function _defineProperty(e,t,i){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:String(t)}function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}!function(){window.phet=window.phet||{},phet.chipper=phet.chipper||{},phet.chipper.packageObject={name:"phet-lib",version:"0.0.0",license:"MIT",repository:{type:"git",url:"https://github.com/phetsims/phet-lib.git"},devDependencies:{grunt:"~1.5.3"},phet:{supportedBrands:["phet","adapted-from-phet"],requirejsNamespace:"PHET_LIB",buildStandalone:!0,requiresLodash:!1,requiresJQuery:!1,finalizeJS:"scenery.Utils.polyfillRequestAnimationFrame();",preload:["../sherpa/lib/jquery-2.1.0.min.js","../sherpa/lib/lodash-4.17.4.min.js","../sherpa/lib/linebreak-1.1.0.js","../sherpa/lib/flatqueue-1.2.1.js","../sherpa/lib/he-1.1.1.js","../sherpa/lib/TextEncoderLite-3c9f6f0.js","../sherpa/lib/base64-js-1.2.0.js","../sherpa/lib/seedrandom-2.4.2.js","../sherpa/lib/FileSaver-b8054a2.js","../sherpa/lib/poly-decomp-0.3.0.js","../sherpa/lib/three-r104.js","../query-string-machine/js/QueryStringMachine.js","../chipper/js/initialize-globals.js"],supportsOutputJS:!0},eslintConfig:{extends:"../chipper/eslint/sim_eslintrc.js"}},phet.chipper.stringPath="../",phet.chipper.locale="en",phet.chipper.loadModules=()=>{},phet.chipper.strings={en:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Reload‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪You completed all levels!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪Start Over‬","VEGAS/label.level":"‪Level: {0}‬","VEGAS/pattern.0challenge.1max":"‪Challenge {0} of {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Keep Trying‬","VEGAS/excellent":"‪Excellent!‬","VEGAS/great":"‪Great!‬","VEGAS/good":"‪Good!‬","VEGAS/label.score.max":"‪Score: {0} out of {1}‬","VEGAS/label.time":"‪Time: {0}‬","VEGAS/yourNewBest":"‪(Your New Best!)‬","VEGAS/pattern.0yourBest":"‪(Your Best: {0})‬","VEGAS/continue":"‪Continue‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/pattern.score.number":"‪Score: {{score}}‬","VEGAS/score":"‪Score:‬"},af:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Reload‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Jy het al die vlakke voltooi!‬","VEGAS/done":"‪Klaar‬","VEGAS/startOver":"‪Begin weer‬","VEGAS/label.level":"‪Vlak: {0}‬","VEGAS/pattern.0challenge.1max":"‪Challenge {0} of {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Hou aan!‬","VEGAS/excellent":"‪Uitstekend!‬","VEGAS/great":"‪Mooi!‬","VEGAS/good":"‪Oulik!‬","VEGAS/label.score.max":"‪Tellling: {0} uit {1}‬","VEGAS/label.time":"‪Tyd: {0}‬","VEGAS/yourNewBest":"‪(Jou nuwe beste!)‬","VEGAS/pattern.0yourBest":"‪(Jou Beste: {0})‬","VEGAS/continue":"‪Volgende‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/pattern.score.number":"‪Telling: {{score}}‬","VEGAS/score":"‪Telling:‬"},ak:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Reload‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪You completed all levels!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪Start Over‬","VEGAS/label.level":"‪Level: {0}‬","VEGAS/pattern.0challenge.1max":"‪Challenge {0} of {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Keep Trying‬","VEGAS/excellent":"‪Excellent!‬","VEGAS/great":"‪Great!‬","VEGAS/good":"‪Good!‬","VEGAS/label.score.max":"‪Score: {0} out of {1}‬","VEGAS/label.time":"‪Time: {0}‬","VEGAS/yourNewBest":"‪(Your New Best!)‬","VEGAS/pattern.0yourBest":"‪(Your Best: {0})‬","VEGAS/continue":"‪Continue‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/pattern.score.number":"‪Score: {{score}}‬","VEGAS/score":"‪Score:‬"},am:{"SCENERY_PHET/webglWarning.body":"‪WebGL አልነቃም ወይም አይገኝም። የበለጠ ለማወቅ ጠቅ ያድርጉ።‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪ይቅርታ፣ የግራፊክስ ስህተት ተከስቷል።‬","SCENERY_PHET/webglWarning.contextLossReload":"‪እንደገና ጫን/ኝ‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪ሁሉንም ደረጃዎች አጠናቅቀዋል!‬","VEGAS/done":"‪ተሰርቷል‬","VEGAS/startOver":"‪እንደገና ጀምር‬","VEGAS/label.level":"‪ደረጃ {0}‬","VEGAS/pattern.0challenge.1max":"‪{0} of {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪ደጋግማችሁ ሞክሩ‬","VEGAS/excellent":"‪እጅግ በጣም ጥሩ ነው።‬","VEGAS/great":"‪ጎበዝ!‬","VEGAS/good":"‪ጥሩ!‬","VEGAS/label.score.max":"‪ነጥብ {0} ከ {1}‬","VEGAS/label.time":"‪ሰአት፡ {0}‬","VEGAS/yourNewBest":"‪(የአንተ/ቺ አዲሱ ምርጥ!)‬","VEGAS/pattern.0yourBest":"‪(የአንተ/ቺ ምርጥ፡ {0})‬","VEGAS/continue":"‪ቀጥል/ይ‬","VEGAS/newLevel":"‪አዲስ ደረጃ‬","VEGAS/keepGoing":"‪ቀጥል‬","VEGAS/pattern.score.number":"‪ነጥብ፡ {{score}}‬","VEGAS/score":"‪ነጥብ፡‬"},ar_MA:{"SCENERY_PHET/webglWarning.body":"‫WebGL غير مشغل أو غير متوفر. اضغط هنا للمزيد من المعلومات.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‫{{units}} {{distance}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‫عفوا، هناك خطأ في الكرافيك‬","SCENERY_PHET/webglWarning.contextLossReload":"‫اعادة التشغيل‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‫لقد اجتزت بنجاح جميع المستويات !‬","VEGAS/done":"‫تم‬","VEGAS/startOver":"‫ابدأ من جديد‬","VEGAS/label.level":"‫المستوى: {0}‬","VEGAS/pattern.0challenge.1max":"‫السؤال {0} من {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‫{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‫{0}:{1}‬","VEGAS/keepTrying":"‫استمر في المحاولة‬","VEGAS/excellent":"‫ممتاز !‬","VEGAS/great":"‫جيد !‬","VEGAS/good":"‫جيد !‬","VEGAS/label.score.max":"‫الرضيد: {0} من {1}‬","VEGAS/label.time":"‫الزمن : {0}‬","VEGAS/yourNewBest":"‫الأفضل بالنسبة لك‬","VEGAS/pattern.0yourBest":"‫(الأفضل بالنسبة لك: {0})‬","VEGAS/continue":"‫تابع‬","VEGAS/newLevel":"‫مستوى جديد‬","VEGAS/keepGoing":"‫استمر‬","VEGAS/pattern.score.number":"‫الرصيد: {{score}}‬","VEGAS/score":"‫الرصيد‬"},ar_SA:{"SCENERY_PHET/webglWarning.body":"‫WebGL غير ممكّن أو غير متوفر. اضغط لتتعلم المزيد‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‫{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‫عذرًا ، لقد حدث خطأ في الرسومات‬","SCENERY_PHET/webglWarning.contextLossReload":"‫اعادة تحميل‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‫لقد أكملت جميع المستويات!‬","VEGAS/done":"‫تم‬","VEGAS/startOver":"‫البدء من جديد‬","VEGAS/label.level":"‫المستوي:\n{0}‬","VEGAS/pattern.0challenge.1max":"‫التحدي من {0} الى {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‫{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‫{0}:{1}‬","VEGAS/keepTrying":"‫استمر بالكتابة‬","VEGAS/excellent":"‫ممتاز‬","VEGAS/great":"‫عظيم !‬","VEGAS/good":"‫جيد !‬","VEGAS/label.score.max":"‫النتيجة\n: {0} out of {1}‬","VEGAS/label.time":"‫الزمن\n: {0}‬","VEGAS/yourNewBest":"‫الأفضل الجديد‬","VEGAS/pattern.0yourBest":"‫(الأفضل : {0})‬","VEGAS/continue":"‫استمرار‬","VEGAS/newLevel":"‫مستوى جديد‬","VEGAS/keepGoing":"‫يستمر في التقدم‬","VEGAS/pattern.score.number":"‫النتيجة {{score}}‬","VEGAS/score":"‫النتيجة‬"},ar:{"SCENERY_PHET/webglWarning.body":"‫WebGL غير ممكّن أو غير متوفر. اضغط لتتعلم المزيد‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‫{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‫عذرًا ، لقد حدث خطأ في الرسومات‬","SCENERY_PHET/webglWarning.contextLossReload":"‫اعادة تحميل‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‫لقد أكملت جميع المستويات!‬","VEGAS/done":"‫تم‬","VEGAS/startOver":"‫ابدأ من جديد‬","VEGAS/label.level":"‫المستوي:{0}‬","VEGAS/pattern.0challenge.1max":"‫التحدي {0} من {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‫{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‫{0}:{1}‬","VEGAS/keepTrying":"‫حاول مرة أخرى‬","VEGAS/excellent":"‫ممتاز!‬","VEGAS/great":"‫رائع!‬","VEGAS/good":"‫جيد!‬","VEGAS/label.score.max":"‫الدرجة: {0} من {1}‬","VEGAS/label.time":"‫الزمن: {0}‬","VEGAS/yourNewBest":"‫الأفضل الجديد‬","VEGAS/pattern.0yourBest":"‫(الأفضل : {0})‬","VEGAS/continue":"‫تابع‬","VEGAS/newLevel":"‫مستوى جديد‬","VEGAS/keepGoing":"‫يستمر في التقدم‬","VEGAS/pattern.score.number":"‫النتيجة: {{score}}‬","VEGAS/score":"‫نتيجة:‬"},ay:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Reload‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪You completed all levels!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪Start Over‬","VEGAS/label.level":"‪Level: {0}‬","VEGAS/pattern.0challenge.1max":"‪Challenge {0} of {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Keep Trying‬","VEGAS/excellent":"‪Excellent!‬","VEGAS/great":"‪Great!‬","VEGAS/good":"‪Good!‬","VEGAS/label.score.max":"‪Score: {0} out of {1}‬","VEGAS/label.time":"‪Time: {0}‬","VEGAS/yourNewBest":"‪(Your New Best!)‬","VEGAS/pattern.0yourBest":"‪(Your Best: {0})‬","VEGAS/continue":"‪Continue‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/pattern.score.number":"‪Score: {{score}}‬","VEGAS/score":"‪Score:‬"},az:{"SCENERY_PHET/webglWarning.body":"‪WebGL aktiv və ya mövcud deyil. Ətraflı öyrənmək üçün klikləyin.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Qrafik xətası baş verdi‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Yenilə‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Siz bütün səviyyələri tamamladınız!‬","VEGAS/done":"‪Hazırdır‬","VEGAS/startOver":"‪Yenidən başlat‬","VEGAS/label.level":"‪Səviyyə: {0}‬","VEGAS/pattern.0challenge.1max":"‪Yarış  {0} / {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Yenidən Sına‬","VEGAS/excellent":"‪Möhtəşəm!‬","VEGAS/great":"‪Əla!‬","VEGAS/good":"‪Yaxşı!‬","VEGAS/label.score.max":"‪Xalınız:  {0} / {1}‬","VEGAS/label.time":"‪Vaxt: {0}‬","VEGAS/yourNewBest":"‪(Yeni ən yaxşı nəticənizt!)‬","VEGAS/pattern.0yourBest":"‪(Ən yaxşı nəticəniz: {0})‬","VEGAS/continue":"‪Davam et‬","VEGAS/newLevel":"‪Yeni səviyyə‬","VEGAS/keepGoing":"‪Davam et‬","VEGAS/pattern.score.number":"‪Xalınız: {{score}}‬","VEGAS/score":"‪Xalınız‬"},be:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Reload‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪You completed all levels!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪Перазапусціць‬","VEGAS/label.level":"‪Узровень: {0}‬","VEGAS/pattern.0challenge.1max":"‪Заданне {0} з {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Працягвайце спрабаваць‬","VEGAS/excellent":"‪Выдатна!‬","VEGAS/great":"‪Выдатна!‬","VEGAS/good":"‪Добра!‬","VEGAS/label.score.max":"‪Рахунак: {0} з {1}‬","VEGAS/label.time":"‪Час: {0}‬","VEGAS/yourNewBest":"‪(Ваш новы лепшы!)‬","VEGAS/pattern.0yourBest":"‪(Ваш лепшы: {0})‬","VEGAS/continue":"‪Працягваць‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/pattern.score.number":"‪Score: {{score}}‬","VEGAS/score":"‪Score:‬"},bg:{"SCENERY_PHET/webglWarning.body":"‪WebGL не е активиран или не е наличен. Кликнете, за да научите повече.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Съжалявам възникна грешка с графиката.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Презареди‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Завършихте всички нива!‬","VEGAS/done":"‪Готово‬","VEGAS/startOver":"‪Започни отначало‬","VEGAS/label.level":"‪Ниво: {0}‬","VEGAS/pattern.0challenge.1max":"‪Задача {0} от {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Опитай пак‬","VEGAS/excellent":"‪Отлично‬","VEGAS/great":"‪Браво‬","VEGAS/good":"‪Добре‬","VEGAS/label.score.max":"‪Резултат: {0} от {1}‬","VEGAS/label.time":"‪Време: {0}‬","VEGAS/yourNewBest":"‪(Твоят нов най-добър резултат!)‬","VEGAS/pattern.0yourBest":"‪(Твоят най-добър резултат: {0})‬","VEGAS/continue":"‪Продължи‬","VEGAS/newLevel":"‪Следващо ниво‬","VEGAS/keepGoing":"‪Продължавай‬","VEGAS/pattern.score.number":"‪Резултат: {{score}}‬","VEGAS/score":"‪Резултат‬"},bn:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪পুনরায় লোড করো‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪তুমি সমস্ত লেভেল অতিক্রম করেছো‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪Start Over‬","VEGAS/label.level":"‪Level: {0}‬","VEGAS/pattern.0challenge.1max":"‪Challenge {0} of {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪চেষ্টা চালিয়ে যাও‬","VEGAS/excellent":"‪চমৎকার‬","VEGAS/great":"‪আসাধারন‬","VEGAS/good":"‪ভাল‬","VEGAS/label.score.max":"‪Score: {0} out of {1}‬","VEGAS/label.time":"‪Time: {0}‬","VEGAS/yourNewBest":"‪(Your New Best!)‬","VEGAS/pattern.0yourBest":"‪(Your Best: {0})‬","VEGAS/continue":"‪চালিয়ে যাও‬","VEGAS/newLevel":"‪নতুন লেভেল‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/pattern.score.number":"‪স্কোর: {{score}}‬","VEGAS/score":"‪স্কোর‬"},bo:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪རིས་དབྱིབས་ནོར་སྐྱོན་ཕྱིན་འདུག། དགོངས་སེལ་ཞུ།‬","SCENERY_PHET/webglWarning.contextLossReload":"‪བསྐྱར་འཇུག‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪You completed all levels!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪Start Over‬","VEGAS/label.level":"‪Level: {0}‬","VEGAS/pattern.0challenge.1max":"‪Challenge {0} of {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪མུ་མཐུད་ཚོད་བྱེད‬","VEGAS/excellent":"‪ཤིན་ཏུ་ལེགས།‬","VEGAS/great":"‪ཤིན་ཏུ་ལེགས།‬","VEGAS/good":"‪ལེགས།‬","VEGAS/label.score.max":"‪Score: {0} out of {1}‬","VEGAS/label.time":"‪Time: {0}‬","VEGAS/yourNewBest":"‪(Your New Best!)‬","VEGAS/pattern.0yourBest":"‪(Your Best: {0})‬","VEGAS/continue":"‪མུ་མཐུད‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/pattern.score.number":"‪Score: {{score}}‬","VEGAS/score":"‪Score:‬"},bs:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Ponovo učitaj‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Kompletirani svi nivoi! Aferim!‬","VEGAS/done":"‪Gotovo‬","VEGAS/startOver":"‪Početi ponovo‬","VEGAS/label.level":"‪Nivo: {0}‬","VEGAS/pattern.0challenge.1max":"‪Izazov {0} od {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Nastavi pokušavati‬","VEGAS/excellent":"‪Odlično!‬","VEGAS/great":"‪Genijalno!‬","VEGAS/good":"‪Dobro!‬","VEGAS/label.score.max":"‪Rezultat: {0} od {1}‬","VEGAS/label.time":"‪Vrijeme: {0}‬","VEGAS/yourNewBest":"‪(Tvoj novi najbolji rezultat!)‬","VEGAS/pattern.0yourBest":"‪(Tvoj najbolji rezultat: {0})‬","VEGAS/continue":"‪Nastavi‬","VEGAS/newLevel":"‪Novi nivo‬","VEGAS/keepGoing":"‪Nastavi‬","VEGAS/pattern.score.number":"‪Rezultat: {{score}}‬","VEGAS/score":"‪Rezultat:‬"},ca:{"SCENERY_PHET/webglWarning.body":"‪WebGL no està activat o disponible. Premeu per saber més.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Disculpeu, error amb els gràfics‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Recarrega‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Has completat tots els nivells!‬","VEGAS/done":"‪Fet‬","VEGAS/startOver":"‪Torna a començar‬","VEGAS/label.level":"‪Nivell: {0}‬","VEGAS/pattern.0challenge.1max":"‪Resultats {0} de {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Segueix intentant-ho‬","VEGAS/excellent":"‪Excel·lent!‬","VEGAS/great":"‪Molt bé!‬","VEGAS/good":"‪Bé!‬","VEGAS/label.score.max":"‪Puntuació: {0} encerts de {1}‬","VEGAS/label.time":"‪Temps: {0}‬","VEGAS/yourNewBest":"‪(El teu millor actual!)‬","VEGAS/pattern.0yourBest":"‪(El teu millor: {0})‬","VEGAS/continue":"‪Continua‬","VEGAS/newLevel":"‪Nivell nou‬","VEGAS/keepGoing":"‪No t'aturis‬","VEGAS/pattern.score.number":"‪Puntuació {{score}}‬","VEGAS/score":"‪Puntuació:‬"},cs:{"SCENERY_PHET/webglWarning.body":"‪WebGL není povoleno nebo není dostupné. Klepněte pro další informace.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Bohužel, objevila se chyba grafiky.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Načíst znovu‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Dokončili jste všechny úrovně!‬","VEGAS/done":"‪Hotovo‬","VEGAS/startOver":"‪Pokračovat od začátku‬","VEGAS/label.level":"‪Kolo: {0}‬","VEGAS/pattern.0challenge.1max":"‪Výzva {0} z {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Nevzdávejte se‬","VEGAS/excellent":"‪Výborně!‬","VEGAS/great":"‪Skvěle!‬","VEGAS/good":"‪Dobře!‬","VEGAS/label.score.max":"‪Skóre: {0} z {1}‬","VEGAS/label.time":"‪Čas: {0}‬","VEGAS/yourNewBest":"‪(Váš nový nejlepší!)‬","VEGAS/pattern.0yourBest":"‪(Váš nejlepší: {0})‬","VEGAS/continue":"‪Pokračovat‬","VEGAS/newLevel":"‪Nová úroveň‬","VEGAS/keepGoing":"‪Pokračovat‬","VEGAS/pattern.score.number":"‪Skóre: {{score}}‬","VEGAS/score":"‪Skóre:‬"},cy:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Ail-lwytho‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪You completed all levels!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪Cychwyn Eto‬","VEGAS/label.level":"‪Lefel: {0}‬","VEGAS/pattern.0challenge.1max":"‪Her {0} o {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Daliwch i drio‬","VEGAS/excellent":"‪Ardderchog!‬","VEGAS/great":"‪Grêt!‬","VEGAS/good":"‪Da!‬","VEGAS/label.score.max":"‪Sgôr: {0} allan o {1}‬","VEGAS/label.time":"‪Amser: {0}‬","VEGAS/yourNewBest":"‪(Eich Gorau Newydd!)‬","VEGAS/pattern.0yourBest":"‪Eich Gorau: {0}‬","VEGAS/continue":"‪Parhau‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/pattern.score.number":"‪Sgôr: {{score}}‬","VEGAS/score":"‪Sgôr:‬"},da:{"SCENERY_PHET/webglWarning.body":"‪WebGL er ikke tilsluttet eller ikke tilgængelig. Klik for at lære mere.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}}{{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Beklager, en grafikfejl er opstået‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Genstart‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Du har klaret alle niveauer!‬","VEGAS/done":"‪Slut‬","VEGAS/startOver":"‪Genstart‬","VEGAS/label.level":"‪Niveau: {0}‬","VEGAS/pattern.0challenge.1max":"‪Udfordring {0} af {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Bliv ved‬","VEGAS/excellent":"‪Fremragende!‬","VEGAS/great":"‪Enestående!‬","VEGAS/good":"‪Godt!‬","VEGAS/label.score.max":"‪Score: {0} ud af {1}‬","VEGAS/label.time":"‪Tid: {0}‬","VEGAS/yourNewBest":"‪(Din nye bedste!)‬","VEGAS/pattern.0yourBest":"‪(Din bedste: {0})‬","VEGAS/continue":"‪Fortsæt‬","VEGAS/newLevel":"‪Nyt niveau‬","VEGAS/keepGoing":"‪Bliv ved‬","VEGAS/pattern.score.number":"‪Score: {{score}}‬","VEGAS/score":"‪Score:‬"},de:{"SCENERY_PHET/webglWarning.body":"‪WebGL nicht aktiv oder nicht verfügbar. Klicken für Informationen.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, ein Grafikfehler ist aufgetreten‬","SCENERY_PHET/webglWarning.contextLossReload":"‪neu laden‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Du hast alle Stufen bearbeitet!‬","VEGAS/done":"‪Fertig‬","VEGAS/startOver":"‪Nochmal beginnen‬","VEGAS/label.level":"‪Niveau: {0}‬","VEGAS/pattern.0challenge.1max":"‪Herausforderung {0} von {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Weiter versuchen‬","VEGAS/excellent":"‪Hervorragend!‬","VEGAS/great":"‪Super!‬","VEGAS/good":"‪Gut!‬","VEGAS/label.score.max":"‪Resultat: {0} von {1}‬","VEGAS/label.time":"‪Zeit {0}‬","VEGAS/yourNewBest":"‪(Dein neuer Rekord!)‬","VEGAS/pattern.0yourBest":"‪(Dein Rekord: {0})‬","VEGAS/continue":"‪Weiter‬","VEGAS/newLevel":"‪Neues Niveau‬","VEGAS/keepGoing":"‪Mach weiter‬","VEGAS/pattern.score.number":"‪Resultat: {{score}}‬","VEGAS/score":"‪Resultat:‬"},ee:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Reload‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Èwu dzidzenuwo katã nu!‬","VEGAS/done":"‪Wɔe vɔ‬","VEGAS/startOver":"‪Dze egɔme tso gɔmedzedzea ke‬","VEGAS/label.level":"‪Ɖoƒe: {0}‬","VEGAS/pattern.0challenge.1max":"‪Ho ʋliʋli {0} tso {1} me‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Yi edzi nanɔ agbagba dzem‬","VEGAS/excellent":"‪Nyuitɔ kekeake!‬","VEGAS/great":"‪Enyo ŋutɔ!‬","VEGAS/good":"‪Enyo!‬","VEGAS/label.score.max":"‪Do age: {0} tso {1}‬","VEGAS/label.time":"‪Ɣeyiɣi: {0}‬","VEGAS/yourNewBest":"‪(Wò nyuitɔ kekeake yeyea!)‬","VEGAS/pattern.0yourBest":"‪(Wò nyuitɔ kekeake: {0})‬","VEGAS/continue":"‪Yi edzi‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/pattern.score.number":"‪Xexlẽdzesi: {{score}}‬","VEGAS/score":"‪xexlẽdzesi‬"},el:{"SCENERY_PHET/webglWarning.body":"‪Το WebGL δεν έχει ενεργοποιηθεί ή δεν είναι διαθέσιμο. Κάντε κλικ για να μάθετε περισσότερα.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Συγγνώμη, αλλά συνέβη ένα σφάλμα γραφικών.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Επαναφόρτωση‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Ολοκλήρωσες όλα τα επίπεδα‬","VEGAS/done":"‪Ολοκληρώθηκε‬","VEGAS/startOver":"‪Επανεκκίνηση‬","VEGAS/label.level":"‪Επίπεδο: {0}‬","VEGAS/pattern.0challenge.1max":"‪Βήμα {0} από {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Προσπάθησε πάλι‬","VEGAS/excellent":"‪Εξαιρετικά!‬","VEGAS/great":"‪Περίφημα!‬","VEGAS/good":"‪Πολύ καλά!‬","VEGAS/label.score.max":"‪Βαθμολογία: {0} από {1}‬","VEGAS/label.time":"‪Χρόνος: {0}‬","VEGAS/yourNewBest":"‪(Η καλύτερη νέα βαθμολογία σας!)‬","VEGAS/pattern.0yourBest":"‪(Η καλύτερη βαθμολογία σας: {0})‬","VEGAS/continue":"‪Συνέχεια‬","VEGAS/newLevel":"‪Νέο επίπεδο‬","VEGAS/keepGoing":"‪Συνέχισε‬","VEGAS/pattern.score.number":"‪Βαθμολογία: {{score}}‬","VEGAS/score":"‪Βαθμολογία:‬"},es_ES:{"SCENERY_PHET/webglWarning.body":"‪WebGL no está activado o no está disponible. Haz click para saber más.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Lo lamentamos, ha ocurrido un error gráfico.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Recargar‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Has completado todos los niveles!‬","VEGAS/done":"‪Hecho‬","VEGAS/startOver":"‪Empezar de nuevo‬","VEGAS/label.level":"‪Nivel: {0}‬","VEGAS/pattern.0challenge.1max":"‪Desafío {0} de {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Sigue intentándolo‬","VEGAS/excellent":"‪¡Excelente!‬","VEGAS/great":"‪¡Genial!‬","VEGAS/good":"‪¡Bien!‬","VEGAS/label.score.max":"‪Puntuación: {0} sobre {1}‬","VEGAS/label.time":"‪Tiempo: {0}‬","VEGAS/yourNewBest":"‪(¡Tu nuevo récord!)‬","VEGAS/pattern.0yourBest":"‪(Tu récord: {0})‬","VEGAS/continue":"‪Continuar‬","VEGAS/newLevel":"‪Nuevo Nivel‬","VEGAS/keepGoing":"‪Sigue intentando‬","VEGAS/pattern.score.number":"‪Puntuación: {{score}}‬","VEGAS/score":"‪Puntuación:‬"},es_MX:{"SCENERY_PHET/webglWarning.body":"‪WebGL no está habilitado o no está disponible. Haz click para aprender mas.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Lo sentimos, se ha producido un error de gráficos.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Recargar‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪¡Haz completado todos los niveles!‬","VEGAS/done":"‪Terminado‬","VEGAS/startOver":"‪Empezar de nuevo‬","VEGAS/label.level":"‪Nivel: {0}‬","VEGAS/pattern.0challenge.1max":"‪Reto {0} de {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Sigue intentando‬","VEGAS/excellent":"‪¡Excelente!‬","VEGAS/great":"‪¡Muy bien!‬","VEGAS/good":"‪¡Bien!‬","VEGAS/label.score.max":"‪Puntuación: {0} de {1}‬","VEGAS/label.time":"‪Tiempo: {0}‬","VEGAS/yourNewBest":"‪(¡Tu nueva mejor puntuación!)‬","VEGAS/pattern.0yourBest":"‪(Tu mejor puntuación: {0})‬","VEGAS/continue":"‪Continuar‬","VEGAS/newLevel":"‪Nuevo Nivel‬","VEGAS/keepGoing":"‪Sigue intentando‬","VEGAS/pattern.score.number":"‪Puntuación: {{score}}‬","VEGAS/score":"‪Puntuación‬"},es_PE:{"SCENERY_PHET/webglWarning.body":"‪WebGL no está habilitado o no está disponible. Haz click para aprender mas.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Lo sentimos, ha ocurrido un error de gráficos‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Volver a Cargar‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪¡Completaste todos los niveles!‬","VEGAS/done":"‪Ya‬","VEGAS/startOver":"‪Comenzar de nuevo‬","VEGAS/label.level":"‪Nivel: {0}‬","VEGAS/pattern.0challenge.1max":"‪Desafío {0} de {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Sigue intentándolo‬","VEGAS/excellent":"‪¡Excelente!‬","VEGAS/great":"‪¡Magnífico!‬","VEGAS/good":"‪¡Bien!‬","VEGAS/label.score.max":"‪Puntuación: {0} falta {1}‬","VEGAS/label.time":"‪Tiempo: {0}‬","VEGAS/yourNewBest":"‪(¡Tu nuevo mejor puntaje!‬","VEGAS/pattern.0yourBest":"‪(Tu mejor puntaje: {0})‬","VEGAS/continue":"‪Continuar‬","VEGAS/newLevel":"‪Nuevo Nivel‬","VEGAS/keepGoing":"‪Sigue adelante‬","VEGAS/pattern.score.number":"‪Puntaje: {{score}}‬","VEGAS/score":"‪Puntaje‬"},es:{"SCENERY_PHET/webglWarning.body":"‪WebGL no está habilitado o no está disponible. Haz click para aprender mas.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Lo sentimos, se ha producido un error de gráficos.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Recargar‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Has completado todos los niveles!‬","VEGAS/done":"‪Hecho‬","VEGAS/startOver":"‪Empezar de nuevo‬","VEGAS/label.level":"‪Nivel: {0}‬","VEGAS/pattern.0challenge.1max":"‪Reto {0} de {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Sigue intentando‬","VEGAS/excellent":"‪¡Excelente!‬","VEGAS/great":"‪¡Muy Bien!‬","VEGAS/good":"‪¡Bien!‬","VEGAS/label.score.max":"‪Puntuación: {0} de {1}‬","VEGAS/label.time":"‪Tiempo: {0}‬","VEGAS/yourNewBest":"‪(¡Nueva mejor puntuación!)‬","VEGAS/pattern.0yourBest":"‪(Mejor puntuación: {0})‬","VEGAS/continue":"‪Continuar‬","VEGAS/newLevel":"‪Nuevo Nivel‬","VEGAS/keepGoing":"‪Sigue intentando‬","VEGAS/pattern.score.number":"‪Puntuación: {{score}}‬","VEGAS/score":"‪Puntuación:‬"},et:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Vabandust, tekkis viga.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Reload‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪You completed all levels!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪Alusta uuesti‬","VEGAS/label.level":"‪Tase: {0}‬","VEGAS/pattern.0challenge.1max":"‪Ülesanne: {0} / {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Proovi veel‬","VEGAS/excellent":"‪Suurepärane!‬","VEGAS/great":"‪Väga hea!‬","VEGAS/good":"‪Tubli!‬","VEGAS/label.score.max":"‪Punkte: {0} / {1}‬","VEGAS/label.time":"‪Aeg {0}‬","VEGAS/yourNewBest":"‪(Uus parim tulemus!)‬","VEGAS/pattern.0yourBest":"‪(Parim tulemus: {0})‬","VEGAS/continue":"‪Jätka‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/pattern.score.number":"‪Score: {{score}}‬","VEGAS/score":"‪Score:‬"},eu:{"SCENERY_PHET/webglWarning.body":"‪WebGL ez dago gaituta edo ez dago erabilgarri. Egin klik gehiago jakiteko.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sentitzen dugu, errore grafiko bat gertatu da.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Berriz kargatu‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Maila guztiak bete dituzu!‬","VEGAS/done":"‪Egina‬","VEGAS/startOver":"‪Hasi berriro‬","VEGAS/label.level":"‪Maila: {0}‬","VEGAS/pattern.0challenge.1max":"‪Desafioa: {0} ({1}etik)‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Saiatu berriro‬","VEGAS/excellent":"‪Bikain!‬","VEGAS/great":"‪Oso ondo!‬","VEGAS/good":"‪Ondo!‬","VEGAS/label.score.max":"‪Puntuazioa: {1}etik {0}‬","VEGAS/label.time":"‪Denbora: {0}‬","VEGAS/yourNewBest":"‪(Zure azken hoberena!)‬","VEGAS/pattern.0yourBest":"‪(Zure hoberena: {0})‬","VEGAS/continue":"‪Jarraitu‬","VEGAS/newLevel":"‪Maila berria‬","VEGAS/keepGoing":"‪Segi aurrera‬","VEGAS/pattern.score.number":"‪Puntuaketa: {{score}}‬","VEGAS/score":"‪Puntuaketa:‬"},fa:{"SCENERY_PHET/webglWarning.body":"‫WebGL فعال نشده یا در دسترس نیست. برای اطلاعات بیشتر کلیک کنید.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‫{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‫متاسفیم، یک اشکال گرافیکی پیش آمد.‬","SCENERY_PHET/webglWarning.contextLossReload":"‫بارگذاری مجدد‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‫شما همه سطح ها را کامل کرده اید!‬","VEGAS/done":"‫انجام شد‬","VEGAS/startOver":"‫از نو شروع کن‬","VEGAS/label.level":"‫{0} :سطح‬","VEGAS/pattern.0challenge.1max":"‫چالش {0} از {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‫{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‫{0}:{1}‬","VEGAS/keepTrying":"‫دوباره امتحان کن‬","VEGAS/excellent":"‫عالی!‬","VEGAS/great":"‫بسیار خوب!‬","VEGAS/good":"‫خوب است!‬","VEGAS/label.score.max":"‫امتیاز: {0} از {1}‬","VEGAS/label.time":"‫زمان: {0}‬","VEGAS/yourNewBest":"‫(رکورد جدید شما!)‬","VEGAS/pattern.0yourBest":"‫(بهترین عملکرد شما: {0})‬","VEGAS/continue":"‫ادامه دادن‬","VEGAS/newLevel":"‫سطح جدید‬","VEGAS/keepGoing":"‫ادامه بده‬","VEGAS/pattern.score.number":"‫امتیاز: {{score}}‬","VEGAS/score":"‫امتیاز:‬"},fi:{"SCENERY_PHET/webglWarning.body":"‪WebGL ei ole saatavilla. Klikkaa lisätietoa.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Grafiikassa tapahtui virhe.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Lataa uudelleen‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Suoritit kaikki tasot!‬","VEGAS/done":"‪Valmis‬","VEGAS/startOver":"‪Aloita alusta‬","VEGAS/label.level":"‪Taso: {0}‬","VEGAS/pattern.0challenge.1max":"‪Haaste {0}/{1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Jatka yrittämistä‬","VEGAS/excellent":"‪Erinomaista!‬","VEGAS/great":"‪Hienoa!‬","VEGAS/good":"‪Hyvä!‬","VEGAS/label.score.max":"‪Pisteet: {0} / {1}‬","VEGAS/label.time":"‪Aika: {0}‬","VEGAS/yourNewBest":"‪(Uusi ennätyksesi!)‬","VEGAS/pattern.0yourBest":"‪(Paras tuloksesi: {0})‬","VEGAS/continue":"‪Jatka‬","VEGAS/newLevel":"‪Uusi taso‬","VEGAS/keepGoing":"‪Jatka eteenpäin‬","VEGAS/pattern.score.number":"‪Pisteet: {{score}}‬","VEGAS/score":"‪Pisteet:‬"},fo:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Reload‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Tú ert liðugur við allar banarnar!‬","VEGAS/done":"‪Liðugt‬","VEGAS/startOver":"‪Byrja aftur‬","VEGAS/label.level":"‪Bani: {0}‬","VEGAS/pattern.0challenge.1max":"‪Avbjóðing {0} av {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Royn víðari‬","VEGAS/excellent":"‪Sera Flott!‬","VEGAS/great":"‪Flott!‬","VEGAS/good":"‪Gott!‬","VEGAS/label.score.max":"‪Stig: {0} út av {1}‬","VEGAS/label.time":"‪Tíð: {0}‬","VEGAS/yourNewBest":"‪(Nýggj háskora!)‬","VEGAS/pattern.0yourBest":"‪(Háskora: {0})‬","VEGAS/continue":"‪Víðari‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/pattern.score.number":"‪Stig: {{score}}‬","VEGAS/score":"‪Stig:‬"},fr:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Désolé, une erreur graphique s'est produite‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Recharger‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Tu as complété tous les niveaux!‬","VEGAS/done":"‪Fait‬","VEGAS/startOver":"‪Recommencez‬","VEGAS/label.level":"‪Niveau : {0}‬","VEGAS/pattern.0challenge.1max":"‪Défi {0} sur {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Essayez encore‬","VEGAS/excellent":"‪Excellent !‬","VEGAS/great":"‪Bravo !‬","VEGAS/good":"‪Bien !‬","VEGAS/label.score.max":"‪Score : {0} sur {1}‬","VEGAS/label.time":"‪Temps : {0}‬","VEGAS/yourNewBest":"‪(Votre nouveau meilleur score!)‬","VEGAS/pattern.0yourBest":"‪(Votre meilleur score: {0})‬","VEGAS/continue":"‪Continuer‬","VEGAS/newLevel":"‪Nouveau Niveau‬","VEGAS/keepGoing":"‪Continuer‬","VEGAS/pattern.score.number":"‪Score: {{score}}‬","VEGAS/score":"‪Score:‬"},ga:{"SCENERY_PHET/webglWarning.body":"‪Níl WebGL cumasaithe nó níl ar fáil. Cliceáil chun teacht ar bhreis faisnéise.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Ár leithscéal, tharla earráid grafaicí.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Athlódáil‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪You completed all levels!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪Tosaigh Arís‬","VEGAS/label.level":"‪Leibhéal: {0}‬","VEGAS/pattern.0challenge.1max":"‪Dúshlán: {0} as {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Coinnigh ort‬","VEGAS/excellent":"‪Thar barr!‬","VEGAS/great":"‪Iontach ar fad!‬","VEGAS/good":"‪Go maith!‬","VEGAS/label.score.max":"‪Scór: {0} as {1}‬","VEGAS/label.time":"‪Am: {0}‬","VEGAS/yourNewBest":"‪(Do scór nua is fearr!)‬","VEGAS/pattern.0yourBest":"‪(Do scór is fearr: {0})‬","VEGAS/continue":"‪Lean ar aghaidh‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/pattern.score.number":"‪Score: {{score}}‬","VEGAS/score":"‪Score:‬"},gl:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Reload‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Completaches todos os niveis‬","VEGAS/done":"‪Feito‬","VEGAS/startOver":"‪Volver‬","VEGAS/label.level":"‪Nivel: {0}‬","VEGAS/pattern.0challenge.1max":"‪Reto {0} de {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Sigue intentándoo‬","VEGAS/excellent":"‪Excelente!‬","VEGAS/great":"‪Xenial!‬","VEGAS/good":"‪Ben!‬","VEGAS/label.score.max":"‪Puntuación: {0} sobre {1}‬","VEGAS/label.time":"‪Tempo: {0}‬","VEGAS/yourNewBest":"‪(A túa nova mellor marca!)‬","VEGAS/pattern.0yourBest":"‪(A túa mellor marca: {0})‬","VEGAS/continue":"‪Continuar‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/pattern.score.number":"‪Puntuación: {{score}}‬","VEGAS/score":"‪Puntuación:‬"},gu:{"SCENERY_PHET/webglWarning.body":"‪WebGL સક્ષમ નથી અથવા ઉપલબ્ધ નથી. વધુ જાણવા માટે ક્લિક કરો.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪માફ કરશો, એક ગ્રાફિક્સ ભૂલ આવી છે.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪ફરી લોડ કરો‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪તમે બધા લેવલ પૂર્ણ કર્યા છે !‬","VEGAS/done":"‪પૂર્ણ‬","VEGAS/startOver":"‪ફરી શરુ કરો‬","VEGAS/label.level":"‪લેવલ : {0}‬","VEGAS/pattern.0challenge.1max":"‪ચેલેન્જ  {1} માંથી {0}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪પ્રયત્નો ચાલુ રાખો‬","VEGAS/excellent":"‪ખુબ સરસ‬","VEGAS/great":"‪સરસ‬","VEGAS/good":"‪વાહ !‬","VEGAS/label.score.max":"‪Score: {0} out of {1}‬","VEGAS/label.time":"‪સમય :{0}‬","VEGAS/yourNewBest":"‪(આપનો નવો રેકોર્ડ )‬","VEGAS/pattern.0yourBest":"‪(આપનો રેકોર્ડ : {0})‬","VEGAS/continue":"‪ચાલુ રાખો‬","VEGAS/newLevel":"‪નવું લેવલ‬","VEGAS/keepGoing":"‪ચાલુ રાખો.‬","VEGAS/pattern.score.number":"‪સ્કોર : {{score}}‬","VEGAS/score":"‪સ્કોર :‬"},ha:{"SCENERY_PHET/webglWarning.body":"‪Ba’a saarda WebGL‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}}{{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Yi haƙuri,  kuren hotuna ya faru‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Sake saukewa‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Ka Kammala Duka lebuls‬","VEGAS/done":"‪An kammala‬","VEGAS/startOver":"‪Sake daga farko‬","VEGAS/label.level":"‪Mataki: {0}‬","VEGAS/pattern.0challenge.1max":"‪Kalubale {0} na {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Ci gaba da ƙoƙari‬","VEGAS/excellent":"‪Da Ƙyau ƙwarai!‬","VEGAS/great":"‪Yayi kyau!‬","VEGAS/good":"‪Da Ƙyau!‬","VEGAS/label.score.max":"‪Maki: {0} daga cikin {1}‬","VEGAS/label.time":"‪Lokaci: {0}‬","VEGAS/yourNewBest":"‪(Wani Mafi kyau naka!)‬","VEGAS/pattern.0yourBest":"‪(Mafi kyau naka: {0})‬","VEGAS/continue":"‪Ci gaba‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/pattern.score.number":"‪Maki:  {{score}}‬","VEGAS/score":"‪maki‬"},hi:{"SCENERY_PHET/webglWarning.body":"‪WebGL चालू या उपलब्ध नहीं है। अधिक जानने के लिए क्लिक करें।‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪क्षमा करें, एक ग्राफ़िक त्रुटि हुई है।‬","SCENERY_PHET/webglWarning.contextLossReload":"‪पुनः लोड करें‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪आपने सभी स्तर पूरे कर लिए !‬","VEGAS/done":"‪पूर्ण हुआ‬","VEGAS/startOver":"‪प्रारंभ करें‬","VEGAS/label.level":"‪स्तर : {0}‬","VEGAS/pattern.0challenge.1max":"‪चुनौती : {1} में से {0}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪कोशिश करते रहो‬","VEGAS/excellent":"‪अति उत्कृष्ट‬","VEGAS/great":"‪शाबाश !‬","VEGAS/good":"‪अच्छा !‬","VEGAS/label.score.max":"‪प्राप्तांक : {1} में से {0}‬","VEGAS/label.time":"‪समय : {0}‬","VEGAS/yourNewBest":"‪(आपका नया सर्वोच्च अंक !)‬","VEGAS/pattern.0yourBest":"‪(आपका सर्वोच्च अंक  : {0})‬","VEGAS/continue":"‪जारी रखिये‬","VEGAS/newLevel":"‪नया स्तर‬","VEGAS/keepGoing":"‪जारी रखें‬","VEGAS/pattern.score.number":"‪प्राप्तांक :{{score}}‬","VEGAS/score":"‪प्राप्तांक  :‬"},hr:{"SCENERY_PHET/webglWarning.body":"‪WebGL nije omogućen ili je nedostupan. Kliknite kako biste saznali više.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Nažalost, došlo je do grafičke pogreške.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Ponovno učitati‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Uradili ste sve nivoe!‬","VEGAS/done":"‪Gotovo‬","VEGAS/startOver":"‪Pokreni ponovo‬","VEGAS/label.level":"‪Razina: {0}‬","VEGAS/pattern.0challenge.1max":"‪Izazov {0} od {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Nastavi pokušavati‬","VEGAS/excellent":"‪Izvrsno!‬","VEGAS/great":"‪Izvrsno!‬","VEGAS/good":"‪Dobro!‬","VEGAS/label.score.max":"‪Bodovi: {0} od {1}‬","VEGAS/label.time":"‪Vrijeme: {0}‬","VEGAS/yourNewBest":"‪(Tvoj novi najbolji rezultat)‬","VEGAS/pattern.0yourBest":"‪(Tvoj najbolji rezultat  {0})‬","VEGAS/continue":"‪Nastavi‬","VEGAS/newLevel":"‪Novi nivo‬","VEGAS/keepGoing":"‪Samo naprijed‬","VEGAS/pattern.score.number":"‪rezultat:  {{score}}‬","VEGAS/score":"‪Rezultat:‬"},ht:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Rechaje‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Ou konplete tout nivo yo!‬","VEGAS/done":"‪Fini‬","VEGAS/startOver":"‪Rekòmanse‬","VEGAS/label.level":"‪Nivo: {0}‬","VEGAS/pattern.0challenge.1max":"‪Defi {0} nan {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0} :{1} :{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0} :{1}‬","VEGAS/keepTrying":"‪Kontinye Eseye‬","VEGAS/excellent":"‪Ekselan!‬","VEGAS/great":"‪Fòmidab!‬","VEGAS/good":"‪Byen!‬","VEGAS/label.score.max":"‪Pwen: {0} sou {1}‬","VEGAS/label.time":"‪Tan: {0}‬","VEGAS/yourNewBest":"","VEGAS/pattern.0yourBest":"","VEGAS/continue":"‪Kontinye‬","VEGAS/newLevel":"‪Nouvo Nivo‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/pattern.score.number":"‪Pwen : {{score}}‬","VEGAS/score":"‪Pwen‬"},hu:{"SCENERY_PHET/webglWarning.body":"‪A WebGL nincs engedélyezve vagy nem elérhető. Bővebb részletekért kattintson ide.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Elnézést, grafikai hiba adódott‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Újratöltés‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪You completed all levels!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪Újrakezdés‬","VEGAS/label.level":"‪Szint: {0}‬","VEGAS/pattern.0challenge.1max":"‪{0}. próba {1} közül‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Gyakorold még‬","VEGAS/excellent":"‪Kiváló!‬","VEGAS/great":"‪Remek!‬","VEGAS/good":"‪Jó!‬","VEGAS/label.score.max":"‪Pontszám: {0} (max.: {1})‬","VEGAS/label.time":"‪Idő: {0}‬","VEGAS/yourNewBest":"‪(Csúcsot javítottál!)‬","VEGAS/pattern.0yourBest":"‪(Eddigi csúcsod: {0})‬","VEGAS/continue":"‪Tovább‬","VEGAS/newLevel":"‪Új szint‬","VEGAS/keepGoing":"‪Tovább‬","VEGAS/pattern.score.number":"‪Pontszám: {{score}}‬","VEGAS/score":"‪Pontszám:‬"},hy:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Reload‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Դուք ավարտեցիք բոլոր մակարդակները‬","VEGAS/done":"‪Կատարած‬","VEGAS/startOver":"‪Սկսել նորից‬","VEGAS/label.level":"‪Մակարդակ՝ {0}‬","VEGAS/pattern.0challenge.1max":"‪Մարտահրավեր {0}-ը {1}-ից‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Շարունակեք փորձել‬","VEGAS/excellent":"‪Գերազանց‬","VEGAS/great":"‪Հոյակապ‬","VEGAS/good":"‪Լավ‬","VEGAS/label.score.max":"‪Գնահատական՝  {0} {1}-ից‬","VEGAS/label.time":"‪Ժամանակ՝ {0}‬","VEGAS/yourNewBest":"‪(Ձեր նոր լավագույնը)‬","VEGAS/pattern.0yourBest":"‪(Ձեր լավագույնը ՝ {0})‬","VEGAS/continue":"‪Շարունակել‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/pattern.score.number":"‪Գնահատական {{score}}‬","VEGAS/score":"‪Գնահատական՝‬"},ig:{"SCENERY_PHET/webglWarning.body":"‪WebGL enweghị ike ma ọ bụ adịghị; pịa ka ịmụtakwu ihe‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Ndo, mperi eserese emela.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Mee-ọzọ‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Mezue ọkwa niile!‬","VEGAS/done":"‪Zuru-ezu‬","VEGAS/startOver":"‪Malite‬","VEGAS/label.level":"‪Amangiri:{0}‬","VEGAS/pattern.0challenge.1max":"‪Ọrụ {0} nke {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Nọgide Na-Agbalị‬","VEGAS/excellent":"‪Oke!‬","VEGAS/great":"‪Oke!‬","VEGAS/good":"‪Nke Ọma!‬","VEGAS/label.score.max":"‪Ụgwọ ọrụ: {0} si {1}‬","VEGAS/label.time":"‪Oge: {0}‬","VEGAS/yourNewBest":"‪(Kacha Mma Gị)‬","VEGAS/pattern.0yourBest":"‪(Nke Kacha Mma: {0})‬","VEGAS/continue":"‪Gaa-n'ihu‬","VEGAS/newLevel":"‪Ọkwa ọhụrụ‬","VEGAS/keepGoing":"‪Gaa N'ihu‬","VEGAS/pattern.score.number":"‪Ụgwọ ọrụ: {{score}}‬","VEGAS/score":"‪ụgwọ ọrụ‬"},in:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Reload‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Kamu telah menyelesaikan semua level!‬","VEGAS/done":"‪Selesai‬","VEGAS/startOver":"‪Memulai‬","VEGAS/label.level":"‪Level: {0}‬","VEGAS/pattern.0challenge.1max":"‪Tantangan {0} dari {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Coba Lagi‬","VEGAS/excellent":"‪Sangat bagus‬","VEGAS/great":"‪Hebat!‬","VEGAS/good":"‪Bagus!‬","VEGAS/label.score.max":"‪Skor : {0} dari {1}‬","VEGAS/label.time":"‪Waktu : {0}‬","VEGAS/yourNewBest":"‪(Skor Terbaik‬","VEGAS/pattern.0yourBest":"‪(Skor Terbaikmu: {0})‬","VEGAS/continue":"‪Lanjutkan‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/pattern.score.number":"‪Skor: {{score}}‬","VEGAS/score":"‪Skor:‬"},is:{"SCENERY_PHET/webglWarning.body":"‪WebGL er ekki virkt eða ekki til staðar. Smelltu fyrir frekari upplýsingar‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Því miður hefur grafísk villa átt sér stað‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Endurhlaða‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Þú hefur lokið öllum erfiðleikastigunum!‬","VEGAS/done":"‪Lokið‬","VEGAS/startOver":"‪Byrja aftur‬","VEGAS/label.level":"‪Erfiðleikastig: {0}‬","VEGAS/pattern.0challenge.1max":"‪Þraut {0} af {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Ekki gefast upp‬","VEGAS/excellent":"‪Frábært!‬","VEGAS/great":"‪Flott!‬","VEGAS/good":"‪Gott!‬","VEGAS/label.score.max":"‪Stig: {0} af {1}‬","VEGAS/label.time":"‪Tími: {0}‬","VEGAS/yourNewBest":"‪(Nýtt persónulegt met!)‬","VEGAS/pattern.0yourBest":"‪(Persónulegt met: {0})‬","VEGAS/continue":"‪Halda áfram‬","VEGAS/newLevel":"‪Nýtt stig‬","VEGAS/keepGoing":"‪Halda áfram‬","VEGAS/pattern.score.number":"‪Stig: {{score}}‬","VEGAS/score":"‪Stig:‬"},it:{"SCENERY_PHET/webglWarning.body":"‪WebGL non è abilitato o non disponibile. Clicca per sapere di più.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Scusa, c'è un errore nella grafica‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Ricarica‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Hai completato tutti i livelli!‬","VEGAS/done":"‪Fatto‬","VEGAS/startOver":"‪Ricomincia‬","VEGAS/label.level":"‪Livello: {0}‬","VEGAS/pattern.0challenge.1max":"‪Partita {0} di {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Allenati‬","VEGAS/excellent":"‪Eccellente!‬","VEGAS/great":"‪Grande!‬","VEGAS/good":"‪Ottimo!‬","VEGAS/label.score.max":"‪Punteggio: {0} su {1}‬","VEGAS/label.time":"‪Tempo: {0}‬","VEGAS/yourNewBest":"‪(Il tuo nuovo record!)‬","VEGAS/pattern.0yourBest":"‪(Il tuo punteggio migliore: {0})‬","VEGAS/continue":"‪Continua‬","VEGAS/newLevel":"‪Nuovo livello‬","VEGAS/keepGoing":"‪Continua così‬","VEGAS/pattern.score.number":"‪Punteggio: {{score}}‬","VEGAS/score":"‪Punteggio:‬"},iw:{"SCENERY_PHET/webglWarning.body":"‫WebGL לא מאופשר או זמין. לחצו ללמוד עוד‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‫{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‫סליחה, חלה שגיאת גרפיקה.‬","SCENERY_PHET/webglWarning.contextLossReload":"‫טען מחדש‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‫השלמת את כל הרמות!‬","VEGAS/done":"‫סיום‬","VEGAS/startOver":"‫התחלה מחדש‬","VEGAS/label.level":"‫רמה: {0}‬","VEGAS/pattern.0challenge.1max":"‫אתגר {0} מ {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‫{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‫{0}:{1}‬","VEGAS/keepTrying":"‫המשיכו לנסות‬","VEGAS/excellent":"‫מצוין!‬","VEGAS/great":"‫מעולה!‬","VEGAS/good":"‫טוב מאוד!‬","VEGAS/label.score.max":"‫ניקוד: {0} מתוך {1}‬","VEGAS/label.time":"‫זמן: {0}‬","VEGAS/yourNewBest":"‫(השיא החדש שלך!)‬","VEGAS/pattern.0yourBest":"‫(השיא שלך: {0})‬","VEGAS/continue":"‫המשך‬","VEGAS/newLevel":"‫השלב הבא‬","VEGAS/keepGoing":"‫המשיכו הלאה‬","VEGAS/pattern.score.number":"‫ציון: {{score}}‬","VEGAS/score":"‫ציון:‬"},ja:{"SCENERY_PHET/webglWarning.body":"‪WebGLは利用できません。詳細はこちら。‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪図表に問題が起きました。‬","SCENERY_PHET/webglWarning.contextLossReload":"‪再読込みする‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪全レベルをコンプリートしました！‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪最初からやり直す‬","VEGAS/label.level":"‪レベル: {0}‬","VEGAS/pattern.0challenge.1max":"‪{0} / {1} 問‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪トライ!トライ！‬","VEGAS/excellent":"‪よくできました！‬","VEGAS/great":"‪すばらしい！‬","VEGAS/good":"‪いいね！‬","VEGAS/label.score.max":"‪正解：{0} 点 / {1} 点‬","VEGAS/label.time":"‪時間: {0}‬","VEGAS/yourNewBest":"‪最高点更新‬","VEGAS/pattern.0yourBest":"‪最高点: {0}‬","VEGAS/continue":"‪続ける‬","VEGAS/newLevel":"‪新しいレベル‬","VEGAS/keepGoing":"‪続けてください‬","VEGAS/pattern.score.number":"‪スコア: {{score}}‬","VEGAS/score":"‪スコア‬"},ka:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪გადატვირთვა‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪You completed all levels!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪ხელახლა დაწყება‬","VEGAS/label.level":"‪საფეხური: {0}‬","VEGAS/pattern.0challenge.1max":"‪თავსატეხი {0}  {1}-დან‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪სცადე განმეორებით‬","VEGAS/excellent":"‪საუკეთესოა!‬","VEGAS/great":"‪მაგარია!‬","VEGAS/good":"‪კარგია!‬","VEGAS/label.score.max":"‪ქულა: {1}-დან {0}‬","VEGAS/label.time":"‪დრო: {0}‬","VEGAS/yourNewBest":"‪(შენი ახალი საუკეთესო!)‬","VEGAS/pattern.0yourBest":"‪(შენი საუკეთესო ქულაა: {0})‬","VEGAS/continue":"‪გააგრძელე‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/pattern.score.number":"‪ქულა : {{score}}‬","VEGAS/score":"‪ქულა :‬"},ki:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Nĩ tũraigua kĩeha, nĩ kũrĩ na mahĩtia ma graphics.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Gũthondeka rĩngĩ‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Ũmũtũ wa mathĩmũ na mĩhĩni-inĩ nĩwega!‬","VEGAS/done":"‪ndĩĩkũ‬","VEGAS/startOver":"‪Anjia weerù‬","VEGAS/label.level":"‪Gììkiro: {0}‬","VEGAS/pattern.0challenge.1max":"‪Ùritù wa {0} kùùmana na {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪ikara ũkĩĩgeragia‬","VEGAS/excellent":"‪Weega makìria!‬","VEGAS/great":"‪Nì  weega!‬","VEGAS/good":"‪Weega‬","VEGAS/label.score.max":"‪Kùùgia: {0} kùùman na {1}‬","VEGAS/label.time":"‪mathaa:{0}‬","VEGAS/yourNewBest":"‪(Yakù njega njerù)‬","VEGAS/pattern.0yourBest":"‪(Yakù Njega: {0})‬","VEGAS/continue":"‪Thììe nambere‬","VEGAS/newLevel":"‪Gikero kĩerũ‬","VEGAS/keepGoing":"‪thiĩ na mbere‬","VEGAS/pattern.score.number":"‪Nýiita: {{score}}‬","VEGAS/score":"‪Kùùnyita‬"},kk:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Reload‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Сіз барлық деңгейді өттіңіз!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪Басынан бастау‬","VEGAS/label.level":"‪Деңгей: {0}‬","VEGAS/pattern.0challenge.1max":"‪Тапсырма {0}/{1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Қайтадан бастау‬","VEGAS/excellent":"‪Керемет!‬","VEGAS/great":"‪Өте жақсы!‬","VEGAS/good":"‪Жақсы!‬","VEGAS/label.score.max":"‪Балл саны: {0}/{1}‬","VEGAS/label.time":"‪Уақыты: {0}‬","VEGAS/yourNewBest":"‪(Сіздің жаңа рекордыңыз!)‬","VEGAS/pattern.0yourBest":"‪(Сіздің рекордыңыз: {0})‬","VEGAS/continue":"‪Жалғастыру‬","VEGAS/newLevel":"‪Жаңа деңгей‬","VEGAS/keepGoing":"‪Жалғастыр‬","VEGAS/pattern.score.number":"‪Балл саны: {{score}}‬","VEGAS/score":"‪Балл саны:‬"},kn:{"SCENERY_PHET/webglWarning.body":"‪WebGLಅನ್ನು ಸಕ್ರಿಯಗೊಳಿಸಿಲ್ಲ ಅಥವಾ ಲಭ್ಯವಿಲ್ಲ.   ಹೆಚ್ಚು ತಿಳಿಯಲು ಕ್ಲಿಕ್\r\n\r\n  ಮಾಡಿ.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪ಕ್ಷಮಿಸಿ, ಗ್ರ್ಯಾಫಿಕ್ ದೋಷ ಸಂಭವಿಸಿದೆ‬","SCENERY_PHET/webglWarning.contextLossReload":"‪ಮರುಪ್ರಯತ್ನಿಸಿ‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪ನೀವು ಈ ಹಂತವನ್ನು ಪೂರ್ಣಗೊಳಿಸಿದ್ದೀರಿ.‬","VEGAS/done":"‪ಮುಕ್ತಾಯವಾಯಿತು‬","VEGAS/startOver":"‪ಪುನಃ ಆರಂಭಿಸಿ‬","VEGAS/label.level":"‪ಮಟ್ಟ {0}‬","VEGAS/pattern.0challenge.1max":"‪ಸವಾಲು  {0} ಪೈಕಿ {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪ಪ್ರಯತ್ನಿಸುತ್ತಲೇ ಇರಿ‬","VEGAS/excellent":"‪ಅತ್ಯುತ್ತಮ!‬","VEGAS/great":"‪ಅದ್ಭುತ!‬","VEGAS/good":"‪ಉತ್ತಮ!‬","VEGAS/label.score.max":"‪ಅಂಕ: {0} ಪೈಕಿ{1}‬","VEGAS/label.time":"‪ಸಮಯ: {0}‬","VEGAS/yourNewBest":"‪( ನಿಮ್ಮ ಹೊಸ-ಅತ್ಯುತ್ತಮ !)‬","VEGAS/pattern.0yourBest":"‪(ನಿಮ್ಮ ಅತ್ಯುತ್ತಮ : {0})‬","VEGAS/continue":"‪ಮುಂದುವರಿಸಿ‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/pattern.score.number":"‪ಅಂಕ : {{score}}‬","VEGAS/score":"‪ಅಂಕ:‬"},ko:{"SCENERY_PHET/webglWarning.body":"‪WebGL을 사용할 수 없습니다. 더 자세한 내용을 보시려면 클릭하세요‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪미안합니다. 그래프 오류가 발생했습니다.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪다시 로드‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪이 수준을 끝냈습니다!‬","VEGAS/done":"‪완료‬","VEGAS/startOver":"‪다시 시작‬","VEGAS/label.level":"‪수준: {0}‬","VEGAS/pattern.0challenge.1max":"‪{1} 중에서 {0} 도전‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪계속 해보세요‬","VEGAS/excellent":"‪잘 했어요!‬","VEGAS/great":"‪그렇죠!‬","VEGAS/good":"‪좋아요!‬","VEGAS/label.score.max":"‪점수: {1} 점 만점에 {0}점‬","VEGAS/label.time":"‪시간: {0}‬","VEGAS/yourNewBest":"‪새로운 최고 점수!‬","VEGAS/pattern.0yourBest":"‪최고 점수: {0}‬","VEGAS/continue":"‪계속‬","VEGAS/newLevel":"‪새로운 수준!‬","VEGAS/keepGoing":"‪계속 하세요‬","VEGAS/pattern.score.number":"‪점수: {{score}}‬","VEGAS/score":"‪점수:‬"},ku_TR:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪ببورە هەڵەی گرافیکی ڕوی دا‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Reload‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪هەموو ئەستەکانت تەواو کرد‬","VEGAS/done":"‪جێبەجێ کرا‬","VEGAS/startOver":"‪دەست پێبکەرەوە‬","VEGAS/label.level":"‪ئاست: {0}‬","VEGAS/pattern.0challenge.1max":"‪(ئاستەنگی {0}لە{1})‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪بەردەوام بە لە هەوڵدان‬","VEGAS/excellent":"‪زۆر باشە‬","VEGAS/great":"‪دەست خۆش‬","VEGAS/good":"‪باشە‬","VEGAS/label.score.max":"‪خاڵی بە دەست هاتوو: {0} لە {1}‬","VEGAS/label.time":"‪کات : {0}‬","VEGAS/yourNewBest":"‪(!باشترین ئاستی نوێ)‬","VEGAS/pattern.0yourBest":"‪(باشترین هەوڵی تۆ: {0} )‬","VEGAS/continue":"‪بەردەوام بە‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/pattern.score.number":"‪{{score}}خاڵی بەدەست هاتوو‬","VEGAS/score":"‪خاڵی بەدەست هاتوو‬"},ku:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪ببورە هەڵەی گرافیکی ڕوی دا‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Reload‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪هەموو ئەستەکانت تەواو کرد‬","VEGAS/done":"‪جێبەجێ کرا‬","VEGAS/startOver":"‪دەست پێبکەرەوە‬","VEGAS/label.level":"‪ئاست: {0}‬","VEGAS/pattern.0challenge.1max":"‪(ئاستەنگی {0}لە{1})‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪بەردەوام بە لە هەوڵدان‬","VEGAS/excellent":"‪زۆر باشە‬","VEGAS/great":"‪دەست خۆش‬","VEGAS/good":"‪باشە‬","VEGAS/label.score.max":"‪خاڵی بە دەست هاتوو: {0} لە {1}‬","VEGAS/label.time":"‪کات : {0}‬","VEGAS/yourNewBest":"‪(!باشترین ئاستی نوێ)‬","VEGAS/pattern.0yourBest":"‪(باشترین هەوڵی تۆ: {0} )‬","VEGAS/continue":"‪بەردەوام بە‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/pattern.score.number":"‪{{score}}خاڵی بەدەست هاتوو‬","VEGAS/score":"‪خاڵی بەدەست هاتوو‬"},lg:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Tekamu ebirala‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Omaliriza emitendera jona‬","VEGAS/done":"‪Kiwedde‬","VEGAS/startOver":"‪Tadika bupya‬","VEGAS/label.level":"‪Omutendera: {0}‬","VEGAS/pattern.0challenge.1max":"‪Okugezesebwa {0} of {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Sigala ng'ogezaako‬","VEGAS/excellent":"‪Kisuffu!‬","VEGAS/great":"‪Kilungi!‬","VEGAS/good":"‪Kilungi!‬","VEGAS/label.score.max":"‪Obubonero: {0} ku {1}‬","VEGAS/label.time":"‪Saawa: {0}‬","VEGAS/yourNewBest":"‪(Ekisinga Kyo Ekipya!)‬","VEGAS/pattern.0yourBest":"‪(Ekisinga Kyo: {0})‬","VEGAS/continue":"‪Weyongeleyo‬","VEGAS/newLevel":"‪Omutendera Omupya‬","VEGAS/keepGoing":"‪Sigala ng'ogenda mu maaso‬","VEGAS/pattern.score.number":"‪Obubonero: {{score}}‬","VEGAS/score":"‪Obubonero‬"},lo:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪ຂໍອະໄພ, ເສັ້ນທີ່ປະກົດຢູ່ມີບັນຫາ‬","SCENERY_PHET/webglWarning.contextLossReload":"‪ໂຫລດຊໍ້າ‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪ທ່ານສຳເລັດທຸກລະດັບ!‬","VEGAS/done":"‪ສຳເລັດ‬","VEGAS/startOver":"‪ເລີ່ມຕົ້ນໃໝ່‬","VEGAS/label.level":"‪ລະດັບ: {0}‬","VEGAS/pattern.0challenge.1max":"‪ທ້າທາຍ {0} ໃນ {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪ພະຍາຍາມຕໍ່ໄປ‬","VEGAS/excellent":"‪ເກັ່ງຫຼາຍ!‬","VEGAS/great":"‪ດີຫຼາຍ!‬","VEGAS/good":"‪ດີ‬","VEGAS/label.score.max":"‪ຄະແນນ: {0} ຈາກທັງໝົດ {1}‬","VEGAS/label.time":"‪ເວລາ: {0}‬","VEGAS/yourNewBest":"‪(ສະຖິຕິໃໝ່ຂອງທ່ານ!)‬","VEGAS/pattern.0yourBest":"‪(ດີຫຼາຍ: {0})‬","VEGAS/continue":"‪ສືບຕໍ່‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/pattern.score.number":"‪ຄະແນນ: {{score}}‬","VEGAS/score":"‪ຄະແນນ:‬"},lt:{"SCENERY_PHET/webglWarning.body":"‪WebGL yra neįjungtas arba nepasiekiamas. Spustelk, kad sužinotum daugiau.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Atsiprašome, įvyko grafikos klaida.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Perkrauti‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Užbaigei visus lygius!‬","VEGAS/done":"‪Baigta‬","VEGAS/startOver":"‪Pradėti iš naujo‬","VEGAS/label.level":"‪Lygis: {0}‬","VEGAS/pattern.0challenge.1max":"‪Iššūkis  {0} iš {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Pabandyk dar kartą‬","VEGAS/excellent":"‪Puikiai!‬","VEGAS/great":"‪Labai gerai!‬","VEGAS/good":"‪Gerai!‬","VEGAS/label.score.max":"‪Taškai: {0} iš {1}‬","VEGAS/label.time":"‪Laikas: {0}‬","VEGAS/yourNewBest":"‪(Tavo naujas rekordas)‬","VEGAS/pattern.0yourBest":"‪(Geriausias rezultatas {0})‬","VEGAS/continue":"‪Pratęsti‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/pattern.score.number":"‪Taškai: {{score}}‬","VEGAS/score":"‪Taškai:‬"},lv:{"SCENERY_PHET/webglWarning.body":"‪WebGL nav ieslēgts vai pieejams. Noklikšķiniet, lai uzzinātu vairāk.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Atvainojiet, radās grafiskās apstrādes kļūda.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Pārlādēt‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Tu pabeidzi visus līmeņus!‬","VEGAS/done":"‪Labi‬","VEGAS/startOver":"‪Sākt no jauna‬","VEGAS/label.level":"‪{0}. līmenis‬","VEGAS/pattern.0challenge.1max":"‪{0}. uzdevums no {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Turpini mēģināt‬","VEGAS/excellent":"‪Izcili!‬","VEGAS/great":"‪Lieliski!‬","VEGAS/good":"‪Labi!‬","VEGAS/label.score.max":"‪Rezultāts: {0} no {1}‬","VEGAS/label.time":"‪Laiks: {0}‬","VEGAS/yourNewBest":"‪(Jauns labākais rezultāts!)‬","VEGAS/pattern.0yourBest":"‪(Labākais rezultāts: {0})‬","VEGAS/continue":"‪Turpināt‬","VEGAS/newLevel":"‪Jauns līmenis‬","VEGAS/keepGoing":"‪Tā turpini‬","VEGAS/pattern.score.number":"‪Rezultāts: {{score}}‬","VEGAS/score":"‪Rezultāts‬"},mg:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Reload‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Nahavita ny ambaratonga rehetra ianao!‬","VEGAS/done":"‪Vita‬","VEGAS/startOver":"‪Atombohy indray‬","VEGAS/label.level":"‪Ambaratonga: {0}‬","VEGAS/pattern.0challenge.1max":"‪Fanamby {0} amin'ny {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Miezaha hatrany‬","VEGAS/excellent":"‪Mahafinaritra!‬","VEGAS/great":"‪Raitra!‬","VEGAS/good":"‪Tsara!‬","VEGAS/label.score.max":"‪naoty: {0} amin'ny {1}‬","VEGAS/label.time":"‪Ora: {0}‬","VEGAS/yourNewBest":"‪(Ny tsara indrindra anananao!)‬","VEGAS/pattern.0yourBest":"‪(Ny tsara indrindra anananao: {0})‬","VEGAS/continue":"‪Tohizo‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/pattern.score.number":"‪Isa: {{score}}‬","VEGAS/score":"‪Isa‬"},mi:{"SCENERY_PHET/webglWarning.body":"‪Kāore e taea te WebGL, kāore i te whakaritea rānei. Pāwhiritia ki ako anō.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Tāmata‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Kua oti i a koe ngā taumata katoa!‬","VEGAS/done":"‪Kua Oti‬","VEGAS/startOver":"‪Tīmata Anō‬","VEGAS/label.level":"‪Taumata: {0}‬","VEGAS/pattern.0challenge.1max":"‪Wero {0} o {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Kia kaha tonu‬","VEGAS/excellent":"‪Ka Mau Te Wehi!‬","VEGAS/great":"‪Ka Rawe!‬","VEGAS/good":"‪Ka Pai!‬","VEGAS/label.score.max":"‪Whiwhinga: {0} o {1}‬","VEGAS/label.time":"‪Wā: {0}‬","VEGAS/yourNewBest":"‪(Tāhau nā Pai Rawa hou!)‬","VEGAS/pattern.0yourBest":"‪(Tāhau na pai rawa: {0})‬","VEGAS/continue":"‪Haere tonu‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/pattern.score.number":"‪Piro: {{score}}‬","VEGAS/score":"‪Piro:‬"},mk:{"SCENERY_PHET/webglWarning.body":"‪WebGL не е овозможен или не е достапен. Кликнете за да дознаете повеќе.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪За жал, се појави грешка во графиката.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Превчитај‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪You completed all levels!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪Започни одново‬","VEGAS/label.level":"‪Ниво: {0}‬","VEGAS/pattern.0challenge.1max":"‪Предизвик {0} of {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Обиди се повторно‬","VEGAS/excellent":"‪Одлично!‬","VEGAS/great":"‪Прекрасно!‬","VEGAS/good":"‪Супер!‬","VEGAS/label.score.max":"‪Резултат: {0} од {1}‬","VEGAS/label.time":"‪Време {0}‬","VEGAS/yourNewBest":"‪(Твојот нов најдобар резултат!)‬","VEGAS/pattern.0yourBest":"‪(Вашиот најдобар резултат: {0})‬","VEGAS/continue":"‪Продолжи‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/pattern.score.number":"‪Score: {{score}}‬","VEGAS/score":"‪Score:‬"},mn:{"SCENERY_PHET/webglWarning.body":"‪WebGL нь боломжгүй. Нэмж суралцахыг товш.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Уучлаарай, Дэлгэцийн алдаа‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Дахих‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Бүх түвшинг гүйцээлээ!‬","VEGAS/done":"‪Гүйцээ‬","VEGAS/startOver":"‪Бүр Эхлүүлэх‬","VEGAS/label.level":"‪Түвшин: {0}‬","VEGAS/pattern.0challenge.1max":"‪Үе {1}-ийн {0}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Дахин оролдох‬","VEGAS/excellent":"‪Онц сайн!‬","VEGAS/great":"‪Онц!‬","VEGAS/good":"‪Сайн!‬","VEGAS/label.score.max":"‪Оноо: {1}-с {0}‬","VEGAS/label.time":"‪Хугацаа: {0}‬","VEGAS/yourNewBest":"‪(Таны шинэ дээд амжилт!)‬","VEGAS/pattern.0yourBest":"‪(Таны дээд амжилт: {0})‬","VEGAS/continue":"‪Үргэлжлүүлэх‬","VEGAS/newLevel":"‪Шинэ түвшин‬","VEGAS/keepGoing":"‪Үргэлжлүүл‬","VEGAS/pattern.score.number":"‪Оноо: {{score}}‬","VEGAS/score":"‪Оноо:‬"},mr:{"SCENERY_PHET/webglWarning.body":"‪WebGL सक्षम नाही किंवा उपलब्ध नाही. आधिक जाणून घेण्यासाठी क्लिक करा‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪ग्राफीक त्रूटी उत्पन‬","SCENERY_PHET/webglWarning.contextLossReload":"‪पुन्हा सुरु करा‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪You completed all levels!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪पुन्हा सुरु करा‬","VEGAS/label.level":"‪पातळी: {0}‬","VEGAS/pattern.0challenge.1max":"‪आव्हान {0} of {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪प्रयत्न करा‬","VEGAS/excellent":"‪अप्रतिम‬","VEGAS/great":"‪मस्त !‬","VEGAS/good":"‪शाब्बास!‬","VEGAS/label.score.max":"‪गुण : {0} पैकी  {1}‬","VEGAS/label.time":"‪वेळ : {0}‬","VEGAS/yourNewBest":"‪(तुमचे नविन सर्वोत्तम गुण)‬","VEGAS/pattern.0yourBest":"‪(तुमचे सर्वोत्तम गुण : {0})‬","VEGAS/continue":"‪पुढे‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/pattern.score.number":"‪गुण : {{score}}‬","VEGAS/score":"‪गुण‬"},ms:{"SCENERY_PHET/webglWarning.body":"‪WebGL tidak dibolehkan atau tidak tersedia. Klik untuk mengetahui lebih lanjut.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Maaf, ralat grafik telah berlaku.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Reload‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Semua tahap telah selesai!‬","VEGAS/done":"‪Selesai‬","VEGAS/startOver":"‪Mula Semula‬","VEGAS/label.level":"‪Tahap {0}‬","VEGAS/pattern.0challenge.1max":"‪Cabaran {0} daripada {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Teruskan Mencuba‬","VEGAS/excellent":"‪Terbaik!‬","VEGAS/great":"‪Tahniah!‬","VEGAS/good":"‪Bagus!‬","VEGAS/label.score.max":"‪Markah: {0} daripada {1}‬","VEGAS/label.time":"‪Masa: {0}‬","VEGAS/yourNewBest":"‪(Memecah Rekod Terbaik!)‬","VEGAS/pattern.0yourBest":"‪(Rekod Terbaik: {0})‬","VEGAS/continue":"‪Teruskan‬","VEGAS/newLevel":"‪Tahap Baru‬","VEGAS/keepGoing":"‪Teruskan‬","VEGAS/pattern.score.number":"‪Markah: {{score}}‬","VEGAS/score":"‪Markah:‬"},mt:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Skuzana, zball grafiku fis-sehh.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Erġa' Llodja‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Lestejt il-livelli kollha!‬","VEGAS/done":"‪Billest‬","VEGAS/startOver":"‪Erġa' Ibda‬","VEGAS/label.level":"‪Livell:{0}‬","VEGAS/pattern.0challenge.1max":"‪Sfida {0} minn {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Ibqa' Pprova‬","VEGAS/excellent":"‪Eċċellenti!‬","VEGAS/great":"‪Prosit!‬","VEGAS/good":"‪Tajjeb!‬","VEGAS/label.score.max":"‪Punti: {0} minn {1}‬","VEGAS/label.time":"‪Ħin:{0}‬","VEGAS/yourNewBest":"‪(L-aħjar riżultat li ġibt s' issa!)‬","VEGAS/pattern.0yourBest":"‪(L-aħjar riżultat li ġibt:{0})‬","VEGAS/continue":"‪Kompli‬","VEGAS/newLevel":"‪Livell Ieħor‬","VEGAS/keepGoing":"‪Kompli Sejjer‬","VEGAS/pattern.score.number":"‪Punteġġ:{{score}}‬","VEGAS/score":"‪Punteġġ:‬"},my:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Reload‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪အဆင့်အားလုံး အောင်မြင်စွာဖြေဆိုနိုင်ပါသည်‬","VEGAS/done":"‪ပြီးဆုံးပါပြီ‬","VEGAS/startOver":"‪Start Over‬","VEGAS/label.level":"‪Level: {0}‬","VEGAS/pattern.0challenge.1max":"‪Challenge {0} of {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪ဆက်ကြိုးစားပါ‬","VEGAS/excellent":"‪တော်လိုက်တာ!‬","VEGAS/great":"‪အလွန်တော်တာပဲ!‬","VEGAS/good":"‪Good!‬","VEGAS/label.score.max":"‪Score: {0} out of {1}‬","VEGAS/label.time":"‪Time: {0}‬","VEGAS/yourNewBest":"‪အကောင်းဆုံး စံချိန်ရလာဒ်‬","VEGAS/pattern.0yourBest":"‪(Your Best: {0})‬","VEGAS/continue":"‪ဆက်သွားပါ‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/pattern.score.number":"‪Score: {{score}}‬","VEGAS/score":"‪ရလာဒ်‬"},nb:{"SCENERY_PHET/webglWarning.body":"‪WebGL er ikke aktivert eller tilgjengelig. Klikk for å lære mer om dette.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Beklager, grafikkfeil‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Start på nytt‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪You completed all levels!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪Start på nytt‬","VEGAS/label.level":"‪Nivå: {0}‬","VEGAS/pattern.0challenge.1max":"‪Forsøk {0} av {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Prøv igjen‬","VEGAS/excellent":"‪Bravo!‬","VEGAS/great":"‪Supert!‬","VEGAS/good":"‪Fint!‬","VEGAS/label.score.max":"‪Resultat:  {0} av{1}‬","VEGAS/label.time":"‪Tid: {0}‬","VEGAS/yourNewBest":"‪{Din nye beste}‬","VEGAS/pattern.0yourBest":"‪(Din beste: {0})‬","VEGAS/continue":"‪Fortsett‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/pattern.score.number":"‪Score: {{score}}‬","VEGAS/score":"‪Score:‬"},ne:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Reload‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪You completed all levels!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪Start Over‬","VEGAS/label.level":"‪Level: {0}‬","VEGAS/pattern.0challenge.1max":"‪Challenge {0} of {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Keep Trying‬","VEGAS/excellent":"‪Excellent!‬","VEGAS/great":"‪Great!‬","VEGAS/good":"‪Good!‬","VEGAS/label.score.max":"‪Score: {0} out of {1}‬","VEGAS/label.time":"‪Time: {0}‬","VEGAS/yourNewBest":"‪(Your New Best!)‬","VEGAS/pattern.0yourBest":"‪(Your Best: {0})‬","VEGAS/continue":"‪Continue‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/pattern.score.number":"‪Score: {{score}}‬","VEGAS/score":"‪Score:‬"},nl:{"SCENERY_PHET/webglWarning.body":"‪WebGL is niet actief of beschikbaar. Klik om meer te weten te komen.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Er trad een grafische fout op‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Opnieuw inladen‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Je bent klaar op alle niveau's‬","VEGAS/done":"‪Klaar‬","VEGAS/startOver":"‪Start opnieuw‬","VEGAS/label.level":"‪Niveau: {0}‬","VEGAS/pattern.0challenge.1max":"‪Uitdaging {0} van {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Probeer nog eens‬","VEGAS/excellent":"‪Uitstekend!‬","VEGAS/great":"‪Geweldig!‬","VEGAS/good":"‪Goed!‬","VEGAS/label.score.max":"‪Score: {0} van {1}‬","VEGAS/label.time":"‪Tijd: {0}‬","VEGAS/yourNewBest":"‪(Je nieuwste beste!)‬","VEGAS/pattern.0yourBest":"‪(Je beste: {0})‬","VEGAS/continue":"‪Doe voort‬","VEGAS/newLevel":"‪Nieuw niveau‬","VEGAS/keepGoing":"‪Doe zo voort‬","VEGAS/pattern.score.number":"‪Score: {{score}}‬","VEGAS/score":"‪Score:‬"},nn:{"SCENERY_PHET/webglWarning.body":"‪v‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Beklagar, grafikkfeil‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Last på nytt‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Du har fullført alle nivåa!‬","VEGAS/done":"‪Ferdig‬","VEGAS/startOver":"‪Start på ny‬","VEGAS/label.level":"‪Nivå: {0}‬","VEGAS/pattern.0challenge.1max":"‪Utfordring {0} av {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Ikkje gje opp‬","VEGAS/excellent":"‪Fantastisk!‬","VEGAS/great":"‪Bra!‬","VEGAS/good":"‪Godt!‬","VEGAS/label.score.max":"‪Poeng: {0} av {1}‬","VEGAS/label.time":"‪Tid: {0}‬","VEGAS/yourNewBest":"‪(Ny personleg rekord!)‬","VEGAS/pattern.0yourBest":"‪(Personleg rekord: {0})‬","VEGAS/continue":"‪Fortsett‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/pattern.score.number":"‪Poengsum: {{score}}‬","VEGAS/score":"‪Poengsum:‬"},ny:{"SCENERY_PHET/webglWarning.body":"‪WebGL siyoyatsidwa kapena palibe. Dinani kuti mudziwe zambiri.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Pepani, cholakwika chajambula chachitika.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Kuikanso‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Mwamaliza magawo onse!‬","VEGAS/done":"‪Zachitika‬","VEGAS/startOver":"‪Yambani Kachiwiri‬","VEGAS/label.level":"‪Gawo: {0}‬","VEGAS/pattern.0challenge.1max":"‪Challenge {0} of {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Pitirizani Kuyesera‬","VEGAS/excellent":"‪Wakhoza bwino kwambiri!‬","VEGAS/great":"‪Wakhoza bwino‬","VEGAS/good":"‪Wakhoza!‬","VEGAS/label.score.max":"‪Wapeza: {0} pa {1}‬","VEGAS/label.time":"‪Nthawi:  {0}‬","VEGAS/yourNewBest":"‪(Wubwino wanu watsopano!)‬","VEGAS/pattern.0yourBest":"‪(Wubwino wanu: {0})‬","VEGAS/continue":"‪Pitirizani‬","VEGAS/newLevel":"‪Gawo Latsopano‬","VEGAS/keepGoing":"‪Kapitiriranibe‬","VEGAS/pattern.score.number":"‪Wapeza: {{score}}‬","VEGAS/score":"‪Wapeza:‬"},om:{"SCENERY_PHET/webglWarning.body":"‪WebGL hin dandeessifamne ykn hin argamu. Caalaatti baruuf cuqaasaa.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Dhiifama, Dogongora giraafiksitu uumame‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Irra deebin fe'i‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Sadarkalee hunda Xumurteetta!‬","VEGAS/done":"‪Raawwatame‬","VEGAS/startOver":"‪Irratti Jalqabi‬","VEGAS/label.level":"‪Sadarkaa: {0}‬","VEGAS/pattern.0challenge.1max":"‪Danqaa  {0} Gaaffota {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Yaali itti-fufu‬","VEGAS/excellent":"‪Baay'ee Baay'ee Gaarii!‬","VEGAS/great":"‪Baay'ee Gaariidha!‬","VEGAS/good":"‪Gaariidha!‬","VEGAS/label.score.max":"‪Qabxii: {1} keessaa {0}‬","VEGAS/label.time":"‪Yeroo: {0}‬","VEGAS/yourNewBest":"‪(waan haaraa siif caalu!)‬","VEGAS/pattern.0yourBest":"‪(kan siif caalu: {0})‬","VEGAS/continue":"‪Itti-fufi‬","VEGAS/newLevel":"‪Sadarkaa Haaraa‬","VEGAS/keepGoing":"‪Adeemsa Itti-fufi‬","VEGAS/pattern.score.number":"‪Qabxii: {{score}}‬","VEGAS/score":"‪Qabxii:‬"},or:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Reload‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪You completed all levels!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪Start Over‬","VEGAS/label.level":"‪Level: {0}‬","VEGAS/pattern.0challenge.1max":"‪Challenge {0} of {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Keep Trying‬","VEGAS/excellent":"‪Excellent!‬","VEGAS/great":"‪Great!‬","VEGAS/good":"‪Good!‬","VEGAS/label.score.max":"‪Score: {0} out of {1}‬","VEGAS/label.time":"‪Time: {0}‬","VEGAS/yourNewBest":"‪(Your New Best!)‬","VEGAS/pattern.0yourBest":"‪(Your Best: {0})‬","VEGAS/continue":"‪Continue‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/pattern.score.number":"‪Score: {{score}}‬","VEGAS/score":"‪Score:‬"},pl:{"SCENERY_PHET/webglWarning.body":"‪WebGL jest wyłączony lub niedostępny. Kliknij, aby dowiedzieć się więcej.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Przepraszamy, wystąpił błąd graficzny.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Odśwież‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Ukończyłeś wszystkie poziomy!‬","VEGAS/done":"‪Gotowe‬","VEGAS/startOver":"‪Zacznij od nowa‬","VEGAS/label.level":"‪Poziom: {0}‬","VEGAS/pattern.0challenge.1max":"‪Zadanie {0} z {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Próbuj dalej‬","VEGAS/excellent":"‪Doskonale!‬","VEGAS/great":"‪Świetnie!‬","VEGAS/good":"‪Dobrze!‬","VEGAS/label.score.max":"‪Wynik: {0} z {1}‬","VEGAS/label.time":"‪Czas: {0}‬","VEGAS/yourNewBest":"‪(Twój nowy rekord!)‬","VEGAS/pattern.0yourBest":"‪(Twój rekord: {0})‬","VEGAS/continue":"‪Kontynuuj‬","VEGAS/newLevel":"‪Nowy poziom‬","VEGAS/keepGoing":"‪Kontynuuj‬","VEGAS/pattern.score.number":"‪Wynik: {{score}}‬","VEGAS/score":"‪Wynik:‬"},pt_BR:{"SCENERY_PHET/webglWarning.body":"‪WebGL não habilitado ou indisponível. Clique para saber mais.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Desculpe-nos, ocorreu um erro gráfico.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Recarregar‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Você completou todos os níveis!‬","VEGAS/done":"‪Feito‬","VEGAS/startOver":"‪Reiniciar‬","VEGAS/label.level":"‪Nível: {0}‬","VEGAS/pattern.0challenge.1max":"‪Desafio {0} de {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Continue Tentando‬","VEGAS/excellent":"‪Excelente!‬","VEGAS/great":"‪Muito bem!‬","VEGAS/good":"‪Bom!‬","VEGAS/label.score.max":"‪Pontos: {0} de {1}‬","VEGAS/label.time":"‪Tempo: {0}‬","VEGAS/yourNewBest":"‪(Sua nova melhor marca!)‬","VEGAS/pattern.0yourBest":"‪(Sua melhor marca: {0})‬","VEGAS/continue":"‪Continue‬","VEGAS/newLevel":"‪Novo Nível‬","VEGAS/keepGoing":"‪Continue‬","VEGAS/pattern.score.number":"‪Pontos: {{score}}‬","VEGAS/score":"‪Pontos:‬"},pt:{"SCENERY_PHET/webglWarning.body":"‪WebGL não está habilitado ou não está disponível. Clique para saber mais.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Desculpe, ocorreu um erro gráfico.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Recarregar‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Completaste os níveis todos!‬","VEGAS/done":"‪Feito‬","VEGAS/startOver":"‪Recomeçar‬","VEGAS/label.level":"‪Nível: {0}‬","VEGAS/pattern.0challenge.1max":"‪Desafio {0} de {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Volta a tentar...‬","VEGAS/excellent":"‪Excelente!‬","VEGAS/great":"‪Excelente Trabalho !‬","VEGAS/good":"‪Correto !‬","VEGAS/label.score.max":"‪Resultado: {0} em {1}‬","VEGAS/label.time":"‪Tempo: {0}‬","VEGAS/yourNewBest":"‪(O teu novo Recorde!)‬","VEGAS/pattern.0yourBest":"‪(O teu recorde: {0})‬","VEGAS/continue":"‪Continuar‬","VEGAS/newLevel":"‪Novo nível‬","VEGAS/keepGoing":"‪Continua‬","VEGAS/pattern.score.number":"‪Resultado: {{score}}‬","VEGAS/score":"‪Resultado:‬"},qu:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Reload‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪You completed all levels!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪Qallariy yapamanta‬","VEGAS/label.level":"‪Pata chayasqan: {0}‬","VEGAS/pattern.0challenge.1max":"‪Atipanakuy {0} of {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Hina qatipay‬","VEGAS/excellent":"‪Allinsu‬","VEGAS/great":"‪¡Allinsu!‬","VEGAS/good":"‪¡Allin!‬","VEGAS/label.score.max":"‪Qillqa unancha: {0} out of {1}‬","VEGAS/label.time":"‪Ura: {0}‬","VEGAS/yourNewBest":"‪(¡Qampa yapamanta allin!)‬","VEGAS/pattern.0yourBest":"‪(Qampa allin: {0})‬","VEGAS/continue":"‪Hinalla qatiy‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/pattern.score.number":"‪Qillqa unancha: {{score}}‬","VEGAS/score":"‪Qillqa unanchasqa:‬"},ro:{"SCENERY_PHET/webglWarning.body":"‪WebGL nu este activat sau nu este disponibil. Faceți clic pentru a afla mai multe.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Ne pare rău, a apărut o eroare grafică.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Reîncarcă‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Ai terminat toate nivelele!‬","VEGAS/done":"‪Final‬","VEGAS/startOver":"‪De la început‬","VEGAS/label.level":"‪Nivelul: {0}‬","VEGAS/pattern.0challenge.1max":"‪Întrebarea {0} din {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Mai încearcă‬","VEGAS/excellent":"‪Excelent!‬","VEGAS/great":"‪Grozav!‬","VEGAS/good":"‪Bine!‬","VEGAS/label.score.max":"‪Scor: {0} din {1}‬","VEGAS/label.time":"‪Cronometru: {0}‬","VEGAS/yourNewBest":"‪(Nou record personal!)‬","VEGAS/pattern.0yourBest":"‪(Record personal: {0})‬","VEGAS/continue":"‪Continuă‬","VEGAS/newLevel":"‪Nivel nou‬","VEGAS/keepGoing":"‪Continuă‬","VEGAS/pattern.score.number":"‪Scor: {{score}}‬","VEGAS/score":"‪Scor:‬"},ru:{"SCENERY_PHET/webglWarning.body":"‪WebGL не активирован или не установлен. Нажмите здесь чтобы узнать больше.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Извините, произошла ошибка‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Перезагрузить‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Вы прошли все уровни!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪Новая игра‬","VEGAS/label.level":"‪Уровень: {0}‬","VEGAS/pattern.0challenge.1max":"‪Задание {0} из {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Попробуйте снова‬","VEGAS/excellent":"‪Превосходно!‬","VEGAS/great":"‪Отлично!‬","VEGAS/good":"‪Хорошо!‬","VEGAS/label.score.max":"‪Баллы: {0} из {1}‬","VEGAS/label.time":"‪Время: {0}‬","VEGAS/yourNewBest":"‪(Ваш новый рекорд!)‬","VEGAS/pattern.0yourBest":"‪(Ваш рекорд: {0})‬","VEGAS/continue":"‪Продолжить‬","VEGAS/newLevel":"‪Новый уровень‬","VEGAS/keepGoing":"‪Продолжай‬","VEGAS/pattern.score.number":"‪Баллы: {{score}}‬","VEGAS/score":"‪Баллы:‬"},rw:{"SCENERY_PHET/webglWarning.body":"‪WebGL ntabwo ishoboye cyangwa ntishobora kuboneka. Kanda kugirango wige byinshi.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Ihangane, habaye ikosa ry'ishusho‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Ongera usubiremo‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Wasoje hose!‬","VEGAS/done":"‪Byakozwe‬","VEGAS/startOver":"‪Tangira‬","VEGAS/label.level":"‪Urwego: {0}‬","VEGAS/pattern.0challenge.1max":"‪Ikibazo  {0} muri {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Komeza Ugerageze‬","VEGAS/excellent":"‪Byiza cyane!‬","VEGAS/great":"‪Byiza!‬","VEGAS/good":"‪Byiza!‬","VEGAS/label.score.max":"‪Amanota{0} kuri {1}‬","VEGAS/label.time":"‪Igihe: {0}‬","VEGAS/yourNewBest":"‪(Ibyiza byawe bishya!)‬","VEGAS/pattern.0yourBest":"‪(Ibyiza byawe:{0})‬","VEGAS/continue":"‪Gukomeza‬","VEGAS/newLevel":"‪Urwego rushya‬","VEGAS/keepGoing":"‪Komeza‬","VEGAS/pattern.score.number":"‪Amanota:{{score}}‬","VEGAS/score":"‪Amanota:‬"},sd:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Reload‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪You completed all levels!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪Start Over‬","VEGAS/label.level":"‪Level: {0}‬","VEGAS/pattern.0challenge.1max":"‪Challenge {0} of {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Keep Trying‬","VEGAS/excellent":"‪Excellent!‬","VEGAS/great":"‪Great!‬","VEGAS/good":"‪Good!‬","VEGAS/label.score.max":"‪Score: {0} out of {1}‬","VEGAS/label.time":"‪Time: {0}‬","VEGAS/yourNewBest":"‪(Your New Best!)‬","VEGAS/pattern.0yourBest":"‪(Your Best: {0})‬","VEGAS/continue":"‪Continue‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/pattern.score.number":"‪Score: {{score}}‬","VEGAS/score":"‪Score:‬"},si:{"SCENERY_PHET/webglWarning.body":"‪WebGL සක්‍රිය කර නැත හෝ ලබාගත නොහැකිය. වැඩිදුර දැනගැනීමට ක්ලික් කරන්න‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪සමාවන්න, චිත්‍රක දෝෂයක් පැන නැගී ඇත.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪නැවත ප්‍රවේශනය කරන්න‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪ඔබ සියලු මට්ටම් සම්පූර්ණ කළා !‬","VEGAS/done":"‪ඉවරයි‬","VEGAS/startOver":"‪නැවත අරඹන්න‬","VEGAS/label.level":"‪මට්ටම: {0}‬","VEGAS/pattern.0challenge.1max":"‪අභියෝගය {1} හි {0}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪දිගටම උත්සාහ කරන්න‬","VEGAS/excellent":"‪විශිෂ්ටයි!‬","VEGAS/great":"‪විශිෂ්ටයි!‬","VEGAS/good":"‪හොඳයි!‬","VEGAS/label.score.max":"‪ලකුණු: {1}න් {0}‬","VEGAS/label.time":"‪කාලය: {0}‬","VEGAS/yourNewBest":"‪(ඔබේ නවතම, හොඳම!)‬","VEGAS/pattern.0yourBest":"‪(ඔබේ හොඳම: {0})‬","VEGAS/continue":"‪නොකඩවාම කරගෙන යන්න‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/pattern.score.number":"‪ලකුණු: {{score}}‬","VEGAS/score":"‪ලකුණු:‬"},sk:{"SCENERY_PHET/webglWarning.body":"‪WebGL nie je povolený alebo nie je dostupný. Kliknutím sa dozviete viac.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Prepáčte, došlo k chybe v grafike‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Opäť načítať‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Dokončili ste všetky úrovne!‬","VEGAS/done":"‪Hotovo‬","VEGAS/startOver":"‪Začať odznova‬","VEGAS/label.level":"‪Úroveň: {0}‬","VEGAS/pattern.0challenge.1max":"‪Výzva {0} z {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Skúšaj ďalej‬","VEGAS/excellent":"‪Vynikajúco!‬","VEGAS/great":"‪Skvelé!‬","VEGAS/good":"‪Dobré!‬","VEGAS/label.score.max":"‪Skóre: {0} z {1}‬","VEGAS/label.time":"‪Čas: {0}‬","VEGAS/yourNewBest":"‪(Tvoje nové maximum!)‬","VEGAS/pattern.0yourBest":"‪(Tvoje maximum: {0})‬","VEGAS/continue":"‪Pokračovať‬","VEGAS/newLevel":"‪Nová obtiažnosť‬","VEGAS/keepGoing":"‪Pokračuj‬","VEGAS/pattern.score.number":"‪Skóre: {{score}}‬","VEGAS/score":"‪Skóre:‬"},sl:{"SCENERY_PHET/webglWarning.body":"‪WebGL ni omogočen ali ni na voljo. Kliknite za več.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Oprostite, prišlo je do napake v grafiki.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Ponovno naloži‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Rešili ste vse nivoje težavnosti!‬","VEGAS/done":"‪Končano‬","VEGAS/startOver":"‪Začni znova‬","VEGAS/label.level":"‪Težavnost: {0}‬","VEGAS/pattern.0challenge.1max":"‪Izziv {0} od {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Ne odnehaj‬","VEGAS/excellent":"‪Odlično!‬","VEGAS/great":"‪Super!‬","VEGAS/good":"‪Dobro!‬","VEGAS/label.score.max":"‪Rezultat: {0} od {1}‬","VEGAS/label.time":"‪Čas: {0}‬","VEGAS/yourNewBest":"‪(Tvoj nov najboljši rezultat!)‬","VEGAS/pattern.0yourBest":"‪(Tvoj najboljši rezultat: {0})‬","VEGAS/continue":"‪Nadaljuj‬","VEGAS/newLevel":"‪Nava raven‬","VEGAS/keepGoing":"‪Nadaljuj‬","VEGAS/pattern.score.number":"‪Rezultat: {{score}}‬","VEGAS/score":"‪Rezultat‬"},sn:{"SCENERY_PHET/webglWarning.body":"‪WebGL haisi kugoneswa kana kuti haisi kuwanikwa. Dzvanya kuti udzidze zvakawanda.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Tine urombo, paitika chikanganiso chemifananidzo.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪tangidza‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Wapedza matanho ose‬","VEGAS/done":"‪Zvaita‬","VEGAS/startOver":"‪Tanga Patsva‬","VEGAS/label.level":"‪Danho: {0}‬","VEGAS/pattern.0challenge.1max":"‪Dambudziko {0} pazvibodzwa {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Ramba uchizama‬","VEGAS/excellent":"‪Wagonesesa!‬","VEGAS/great":"‪Wagonesa!‬","VEGAS/good":"‪Wagona!‬","VEGAS/label.score.max":"‪Chibodzwa: {0} kubva pazvibodzwa {1}‬","VEGAS/label.time":"‪Nguva: {0}‬","VEGAS/yourNewBest":"‪(Chibodzwa chako chitsva chikuru!)‬","VEGAS/pattern.0yourBest":"‪(Chibodzwa chako chikuru: {0})‬","VEGAS/continue":"‪Pfuurira mberi‬","VEGAS/newLevel":"‪Danho idzva‬","VEGAS/keepGoing":"‪Ramba uchienda mberi‬","VEGAS/pattern.score.number":"‪Chibodzwa: {{score}}‬","VEGAS/score":"‪Chibodzwa:‬"},sq:{"SCENERY_PHET/webglWarning.body":"‪WebGL nuk është e lejuar. Kliko për të mësuar më shumë.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Na falni, ka ndodhur një gabim grafik‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Ringarko‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Kompletuat të gjitha nivelet‬","VEGAS/done":"‪Kryer‬","VEGAS/startOver":"‪Rifillo‬","VEGAS/label.level":"‪Niveli: {0}‬","VEGAS/pattern.0challenge.1max":"‪Sfido {0} prej {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Vazhdo të provosh‬","VEGAS/excellent":"‪Shkëlqyeshëm!‬","VEGAS/great":"‪Mrekulli!‬","VEGAS/good":"‪Mirë!‬","VEGAS/label.score.max":"‪Pikët: {0} nga {1}‬","VEGAS/label.time":"‪Koha: {0}‬","VEGAS/yourNewBest":"‪(Rezultati i ri më i mirë!)‬","VEGAS/pattern.0yourBest":"‪(Rezultati më i mirë: {0})‬","VEGAS/continue":"‪Vazhdo‬","VEGAS/newLevel":"‪Nivel i ri‬","VEGAS/keepGoing":"‪Vazhdo‬","VEGAS/pattern.score.number":"‪Pikët: {{score}}‬","VEGAS/score":"‪Pikët:‬"},sr:{"SCENERY_PHET/webglWarning.body":"‪WebGL није омогућен или није доступан. Кликните да бисте сазнали више.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Извините, дошло је до графичке грешке‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Поново учитај‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Комплетирани сви нивои! Свака част!‬","VEGAS/done":"‪Готово‬","VEGAS/startOver":"‪Почни изнова‬","VEGAS/label.level":"‪Ниво: {0}‬","VEGAS/pattern.0challenge.1max":"‪Избор {0} до {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Настави да покушаваш‬","VEGAS/excellent":"‪Изванредно!‬","VEGAS/great":"‪Браво!‬","VEGAS/good":"‪Одлично!‬","VEGAS/label.score.max":"‪Укупно: {0}  од {1}‬","VEGAS/label.time":"‪Време: {0}‬","VEGAS/yourNewBest":"‪(Твој нови рекорд!)‬","VEGAS/pattern.0yourBest":"‪(Твој рекорд: {0})‬","VEGAS/continue":"‪Настави‬","VEGAS/newLevel":"‪Нови ниво‬","VEGAS/keepGoing":"‪Настави‬","VEGAS/pattern.score.number":"‪Резултат: {{score}}‬","VEGAS/score":"‪Резултат:‬"},st:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪t'sela hape‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪u qetile boemo‬","VEGAS/done":"‪qetile‬","VEGAS/startOver":"‪Qala Qalong‬","VEGAS/label.level":"‪Boleng: {0}‬","VEGAS/pattern.0challenge.1max":"‪Teko {0} ea {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Leka Hape‬","VEGAS/excellent":"‪U nepile Haholo-holo‬","VEGAS/great":"‪U nepile haholo‬","VEGAS/good":"‪U nepile‬","VEGAS/label.score.max":"‪Moputso:{0}holimo ho{1}‬","VEGAS/label.time":"‪Nako: {0}‬","VEGAS/yourNewBest":"‪Bokhoni ba hau bo botle‬","VEGAS/pattern.0yourBest":"‪Bokhoni ba hau: {0}‬","VEGAS/continue":"‪Tsoela pele‬","VEGAS/newLevel":"‪boemo bo bocha‬","VEGAS/keepGoing":"‪tsoela-pele‬","VEGAS/pattern.score.number":"‪moputso: {{score}}‬","VEGAS/score":"‪Moputso‬"},sv:{"SCENERY_PHET/webglWarning.body":"‪WebGL är inte aktiverat eller inte tillgängligt. Klicka för att lära mer.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Ledsen, ett grafikfel har uppstått‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Ladda på nytt‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Du slutförde alla nivåer!‬","VEGAS/done":"‪Klart‬","VEGAS/startOver":"‪Börja om‬","VEGAS/label.level":"‪Nivå: {0}‬","VEGAS/pattern.0challenge.1max":"‪Utmaning {0} av {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Försök igen‬","VEGAS/excellent":"‪Utmärkt!‬","VEGAS/great":"‪Mycket bra!‬","VEGAS/good":"‪Bra!‬","VEGAS/label.score.max":"‪Poäng: {0} av {1}‬","VEGAS/label.time":"‪Tid: {0}‬","VEGAS/yourNewBest":"‪(Ditt nya rekord!)‬","VEGAS/pattern.0yourBest":"‪(Ditt rekord: {0})‬","VEGAS/continue":"‪Fortsätt‬","VEGAS/newLevel":"‪Ny nivå‬","VEGAS/keepGoing":"‪Fortsätt‬","VEGAS/pattern.score.number":"‪Poäng: {{score}}‬","VEGAS/score":"‪Poäng:‬"},sw:{"SCENERY_PHET/webglWarning.body":"‪WebGL haijawashwa au haipatikani.Bofya ili kujifunza zaidi.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Samahani, kosa la kimchoro limetokea‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Reloadi‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Umemaliza viwango vyote‬","VEGAS/done":"‪Imefanyika‬","VEGAS/startOver":"‪Anza Upya‬","VEGAS/label.level":"‪Ngazi: {0}‬","VEGAS/pattern.0challenge.1max":"‪Changamoto {0} ya {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Endelea kujaribu‬","VEGAS/excellent":"‪Safi Sana!‬","VEGAS/great":"‪Safi!‬","VEGAS/good":"‪Nzuri!‬","VEGAS/label.score.max":"‪Alama: {0} kati ya {1}‬","VEGAS/label.time":"‪Muda: {0}‬","VEGAS/yourNewBest":"‪(Matokeo yako mapya na bora kabisa!)‬","VEGAS/pattern.0yourBest":"‪(Matokeo yako bora: {0})‬","VEGAS/continue":"‪Endelea‬","VEGAS/newLevel":"‪Kiwango Kipya‬","VEGAS/keepGoing":"‪Endelea‬","VEGAS/pattern.score.number":"‪Alama: {{score}}‬","VEGAS/score":"‪Alama:‬"},ta:{"SCENERY_PHET/webglWarning.body":"‪WebGL இயக்கநிலை படுத்தப்படவில்லை அல்லது கிடைக்கக் கூடியதாயில்லை. மேலும் அறிய கிளிக் செய்க‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪மன்னிக்கவும், ஒரு வரைவியல்  வழு ஏற்பட்டுள்ளது‬","SCENERY_PHET/webglWarning.contextLossReload":"‪மீள ஏற்று‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪எல்லா மட்டங்களையும் நிறைவு செய்துள்ளீர்கள்‬","VEGAS/done":"‪முடிவடைந்தது‬","VEGAS/startOver":"‪மீண்டும் ஆரம்பி‬","VEGAS/label.level":"‪மட்டம் : {0}‬","VEGAS/pattern.0challenge.1max":"‪சவால்   {1} இன் {0}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪முயற்சி செய்துகொண்டிரு‬","VEGAS/excellent":"‪தலைசிறந்தது‬","VEGAS/great":"‪சிறப்பானது‬","VEGAS/good":"‪நன்று‬","VEGAS/label.score.max":"‪புள்ளி: {1} இல்  {0}‬","VEGAS/label.time":"‪நேரம் : {0}‬","VEGAS/yourNewBest":"‪( உமது சிறந்த புதியது)‬","VEGAS/pattern.0yourBest":"‪(உமது சிறந்தது: {0})‬","VEGAS/continue":"‪தொடர்ந்து‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/pattern.score.number":"‪புள்ளி: {{score}}‬","VEGAS/score":"‪புள்ளி‬"},te:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪మన్నించండి, గ్రాఫిక్స్ తప్పిదం దొర్లింది‬","SCENERY_PHET/webglWarning.contextLossReload":"‪తిరిగి ఆరభించు‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪నీవు అన్ని స్థాయిలనూ పూర్తి చేసావు!‬","VEGAS/done":"‪పూర్తయింది‬","VEGAS/startOver":"‪తిరిగి మొదలు పెట్టు‬","VEGAS/label.level":"‪స్థాయి: {0}‬","VEGAS/pattern.0challenge.1max":"‪సవాలు {1} లో {0}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪ప్రయత్నిస్తూనే ఉండండి‬","VEGAS/excellent":"‪అత్యద్భుతం!‬","VEGAS/great":"‪అద్భుతం!‬","VEGAS/good":"‪శభాష్!‬","VEGAS/label.score.max":"‪స్కోర్: {1} లో  {0}‬","VEGAS/label.time":"‪కాలం: {0}‬","VEGAS/yourNewBest":"‪(నీ కొంగొత్త ఉత్తమ ఫలితం!)‬","VEGAS/pattern.0yourBest":"‪(నీ ఉత్తమ ఫలితం: {0})‬","VEGAS/continue":"‪కొనసాగించు‬","VEGAS/newLevel":"‪కొంగొత్త స్థాయి‬","VEGAS/keepGoing":"‪సాగుతూనే ఉండు‬","VEGAS/pattern.score.number":"‪స్కోర్: {{score}}‬","VEGAS/score":"‪స్కోర్‬"},tg:{"SCENERY_PHET/webglWarning.body":"‪WebGL фаъол ё дастрас нест. Барои гирифтани маълумоти бештар клик кунед.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Бубахшед, хатои графикӣ рух дод.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Аз нав бор кунед‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Шумо ҳамаи сатҳҳоро анҷом додед!‬","VEGAS/done":"‪Иҷро шуд‬","VEGAS/startOver":"‪Аз нав‬","VEGAS/label.level":"‪Саҳти: {0}‬","VEGAS/pattern.0challenge.1max":"‪Масъалаи {0} аз {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}: {1}: {2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}: {1}‬","VEGAS/keepTrying":"‪Кӯшиш карданро давом диҳед‬","VEGAS/excellent":"‪Беҳтарин!‬","VEGAS/great":"‪Олиҷаноб!‬","VEGAS/good":"‪Хуб!‬","VEGAS/label.score.max":"‪Баҳогузорӣ: {0} аз {1}‬","VEGAS/label.time":"‪Вақт: {0}‬","VEGAS/yourNewBest":"‪(Натиҷаи беҳтарини нави шумо!)‬","VEGAS/pattern.0yourBest":"‪(Натиҷаи беҳтарини шумо: {0})‬","VEGAS/continue":"‪Идома‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/pattern.score.number":"‪Хол: {{score}}‬","VEGAS/score":"‪Ҳисоб:‬"},th:{"SCENERY_PHET/webglWarning.body":"‪WebGL ไม่เปิดทำงานหรือไม่พร้อม ให้กดเพื่อเรียนรู้เพิ่มเติม‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪ขออภัย การแสดงผลกราฟิกมีข้อผิดพลาด‬","SCENERY_PHET/webglWarning.contextLossReload":"‪แสดงผลใหม่อีกครั้ง‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪คุณผ่านด่านทั้งหมดแล้ว!‬","VEGAS/done":"‪เสร็จแล้ว‬","VEGAS/startOver":"‪เริ่มใหม่ตั้งแต่ต้น‬","VEGAS/label.level":"‪ระดับ: {0}‬","VEGAS/pattern.0challenge.1max":"‪ความท้าทาย {0} ของ {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪พยายามใหม่นะ‬","VEGAS/excellent":"‪สุดยอด!‬","VEGAS/great":"‪ระดับเยี่ยม!‬","VEGAS/good":"‪ระดับดี!‬","VEGAS/label.score.max":"‪คะแนน: {0} จากทั้งหมด {1}‬","VEGAS/label.time":"‪เวลาที่ใช้: {0}‬","VEGAS/yourNewBest":"‪ผลที่ดีที่สุดอันใหม่!‬","VEGAS/pattern.0yourBest":"‪ผลที่ดีที่สุด: {0}‬","VEGAS/continue":"‪ดำเนินการต่อ‬","VEGAS/newLevel":"‪เลือกระดับใหม่‬","VEGAS/keepGoing":"‪ทำต่อไป‬","VEGAS/pattern.score.number":"‪คะแนน: {{score}}‬","VEGAS/score":"‪คะแนน‬"},ti:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Reload‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪You completed all levels!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪ካልእ ፀወታ ጀምር‬","VEGAS/label.level":"‪ብርኪ: {0}‬","VEGAS/pattern.0challenge.1max":"‪ብድሆ {0} of {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪ደጋጊሞም ይፈትኑ‬","VEGAS/excellent":"‪ንኡድ!‬","VEGAS/great":"‪ብጣዕሚ ፅቡቕ!‬","VEGAS/good":"‪ፅቡቕ!‬","VEGAS/label.score.max":"‪ውፅኢት: {0} out of {1}‬","VEGAS/label.time":"‪ግዘ: {0}‬","VEGAS/yourNewBest":"‪(ናይ ሕጂ ብሉፅ ውፅኢት!)‬","VEGAS/pattern.0yourBest":"‪(ብሉፅ ውፅኢት: {0})‬","VEGAS/continue":"‪ቀፅል‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/pattern.score.number":"‪Score: {{score}}‬","VEGAS/score":"‪Score:‬"},tk:{"SCENERY_PHET/webglWarning.body":"‪WebGL işledilmedik ýa-da elýeterli däl. Goşmaça maglumat üçin basyň.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Bagyşlaň, grafika ýalňyşlygy çykdy.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Gaýtadan ýükle‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Siz ähli derejeleri tamamladyňyz!‬","VEGAS/done":"‪Tamamlandy‬","VEGAS/startOver":"‪Täzeden başla‬","VEGAS/label.level":"‪Dereje: {0}‬","VEGAS/pattern.0challenge.1max":"‪Mesele {0} / {1} jemi‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Synanyşmaga dowam et‬","VEGAS/excellent":"‪Örän gowy!‬","VEGAS/great":"‪Berekella!‬","VEGAS/good":"‪Gowy!‬","VEGAS/label.score.max":"‪Utuk: {0} out of {1}‬","VEGAS/label.time":"‪Wagt:{0}‬","VEGAS/yourNewBest":"‪(Täze iň gowy netijäňiz!)‬","VEGAS/pattern.0yourBest":"‪(Iň gowy netijäňiz: {0})‬","VEGAS/continue":"‪Dowam et‬","VEGAS/newLevel":"‪Täze dereje‬","VEGAS/keepGoing":"‪Dowam et‬","VEGAS/pattern.score.number":"‪Utuk: {{score}}‬","VEGAS/score":"‪Utuk:‬"},tl:{"SCENERY_PHET/webglWarning.body":"‪Ang WebGL ay hindi pinagana o hindi magagamit. I-click para matuto pa.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Paumanhin, may naganap na graphics error.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Reload‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪You completed all levels!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪Start Over‬","VEGAS/label.level":"‪Level: {0}‬","VEGAS/pattern.0challenge.1max":"‪Challenge {0} of {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Keep Trying‬","VEGAS/excellent":"‪Excellent!‬","VEGAS/great":"‪Great!‬","VEGAS/good":"‪Good!‬","VEGAS/label.score.max":"‪Score: {0} out of {1}‬","VEGAS/label.time":"‪Time: {0}‬","VEGAS/yourNewBest":"‪(Your New Best!)‬","VEGAS/pattern.0yourBest":"‪(Your Best: {0})‬","VEGAS/continue":"‪Continue‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/pattern.score.number":"‪Score: {{score}}‬","VEGAS/score":"‪Score:‬"},tn:{"SCENERY_PHET/webglWarning.body":"‪WebGL ga e yo kgotsa e emisitswe. Tobetsa go tsaya dintlha ka botlalo‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Re itshwarele, poso ya setshwantsho sa maranyane e diragetse‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Tsenya gape‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪You completed all levels!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪Simolola gape‬","VEGAS/label.level":"‪Level: {0}‬","VEGAS/pattern.0challenge.1max":"‪Teko {0} ya {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Nna o leke‬","VEGAS/excellent":"‪O dirile ka bokgabana‬","VEGAS/great":"‪Maiteko a ako godimo!‬","VEGAS/good":"‪O dirile sentle!‬","VEGAS/label.score.max":"‪Maduo: {0} go tswa mo go {1}‬","VEGAS/label.time":"‪Nako: {0}‬","VEGAS/yourNewBest":"‪(Phitlhelelo ya gago e e ko godimo e ncha!)‬","VEGAS/pattern.0yourBest":"‪(Phitlhelelo ya gago e e ko godimo: {0})‬","VEGAS/continue":"‪Tswelela‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/pattern.score.number":"‪Maduo: {{score}}‬","VEGAS/score":"‪Maduo‬"},tr:{"SCENERY_PHET/webglWarning.body":"‪WebGL kullanılabilir yada yüklü değil. Daha fazla bilgi almak için tıklayın.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Üzgünüz, bir grafik hatası oluştu.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Tekrar Yükle‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Tüm seviyeleri tamamladınız!‬","VEGAS/done":"‪Bitti‬","VEGAS/startOver":"‪Yeniden Başla‬","VEGAS/label.level":"‪Seviye: {0}‬","VEGAS/pattern.0challenge.1max":"‪Görev {0} / {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}: {1}: {2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}: {1}‬","VEGAS/keepTrying":"‪Denemeye Devam et‬","VEGAS/excellent":"‪Mükemmel!‬","VEGAS/great":"‪Harika!‬","VEGAS/good":"‪İyi!‬","VEGAS/label.score.max":"‪Puan: {0} / {1}‬","VEGAS/label.time":"‪Zaman: {0}‬","VEGAS/yourNewBest":"‪(Yeni Rekorun!)‬","VEGAS/pattern.0yourBest":"‪(Rekorun: {0})‬","VEGAS/continue":"‪Devam et‬","VEGAS/newLevel":"‪Yeni Seviye‬","VEGAS/keepGoing":"‪Devam Et‬","VEGAS/pattern.score.number":"‪Puan: {{score}}‬","VEGAS/score":"‪Puan:‬"},tw:{"SCENERY_PHET/webglWarning.body":"‪Abɛɛfo ntentan GL ensɔɛ anaa ebi ni ho. Mia na sua bebiree.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Kafra, grafiks nfomsoɔ aba.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Sane bue biom‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Wawie wo gyinap3n no nyinaa‬","VEGAS/done":"‪Wie‬","VEGAS/startOver":"‪Hyɛ aseɛ‬","VEGAS/label.level":"‪Gyinapɛn: {0}‬","VEGAS/pattern.0challenge.1max":"‪Di asi {0} mu {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Koso sɔ hwɛ‬","VEGAS/excellent":"‪Deɛ wayɛ adeɛ paa ara‬","VEGAS/great":"‪Deɛ ɛso‬","VEGAS/good":"‪Papa anaasɛ deɛ ɛyɛ‬","VEGAS/label.score.max":"‪Nya: {0} ɛmu {1}‬","VEGAS/label.time":"‪Berɛ: {0}‬","VEGAS/yourNewBest":"‪Foforɔ a wayɛ ade paa‬","VEGAS/pattern.0yourBest":"‪Deɛ wayɛ ade paa:{0}‬","VEGAS/continue":"‪Toaso‬","VEGAS/newLevel":"‪Gyinapɛn Foforoɔ‬","VEGAS/keepGoing":"‪Kɔ Soaa Kɔ‬","VEGAS/pattern.score.number":"‪Nya: {{score}}‬","VEGAS/score":"‪Nya:‬"},uk:{"SCENERY_PHET/webglWarning.body":"‪WebGL не ввімкнено або недоступно. Клацніть, щоб дізнатися більше.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪На жаль, сталася помилка графіки.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Перезавантажити‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Ви завершили всі рівні!‬","VEGAS/done":"‪Готово‬","VEGAS/startOver":"‪Почати знову‬","VEGAS/label.level":"‪Рівень: {0}‬","VEGAS/pattern.0challenge.1max":"‪Спроби {0} з {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Продовжуй спроби‬","VEGAS/excellent":"‪Чудово!‬","VEGAS/great":"‪Вищий клас!‬","VEGAS/good":"‪Добре!‬","VEGAS/label.score.max":"‪Рахунок: {0} з {1}‬","VEGAS/label.time":"‪Час: {0}‬","VEGAS/yourNewBest":"‪(Ваш новий найкращий результат!)‬","VEGAS/pattern.0yourBest":"‪(Ваш найкращий результат: {0})‬","VEGAS/continue":"‪Продовжити‬","VEGAS/newLevel":"‪Новий рівень‬","VEGAS/keepGoing":"‪Продовжуй‬","VEGAS/pattern.score.number":"‪Рахунок: {{score}}‬","VEGAS/score":"‪Рахунок:‬"},ur:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‫{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‫معزرت، گرافکس خراب ہو گئی ہے‬","SCENERY_PHET/webglWarning.contextLossReload":"‫دوبارہ شروع کریں‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‫آپ نے تمام درجات مکمل کرلئے ہیں!‬","VEGAS/done":"‫مکمل‬","VEGAS/startOver":"‫پھر سے شروع کریں‬","VEGAS/label.level":"‫سطح: {0}‬","VEGAS/pattern.0challenge.1max":"‫{1} میں موجود {0} چیلنج‬","VEGAS/pattern.0hours.1minutes.2seconds":"‫{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‫{0}:{1}‬","VEGAS/keepTrying":"‫کوشش کرتے جائیں‬","VEGAS/excellent":"‫شاندار!‬","VEGAS/great":"‫زبردست!‬","VEGAS/good":"‫شاباش!‬","VEGAS/label.score.max":"‫سکور: {1} میں سے {0}‬","VEGAS/label.time":"‫وقت: {0}‬","VEGAS/yourNewBest":"‫(آپ کا جد ید بہترین مظاہرہ)‬","VEGAS/pattern.0yourBest":"‫(آپ کا بہترین مظاہرہ: {0})‬","VEGAS/continue":"‫جاری‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/pattern.score.number":"‫اسکور: {{score}}‬","VEGAS/score":"‫اسکور (نشان)‬"},uz:{"SCENERY_PHET/webglWarning.body":"‪WebGL o‘rnatilmagan yoki mavjud emas. Ko‘proq ma'lumot uchun bu yerga bosing.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Uzr, tasvirda xatolik sodir bo‘ldi‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Qayta yuklash‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Siz hamma bosqichni yakunladingiz‬","VEGAS/done":"‪Bajarildi‬","VEGAS/startOver":"‪Boshidan urunib ko‘rish‬","VEGAS/label.level":"‪Daraja:{0}‬","VEGAS/pattern.0challenge.1max":"‪Topshiriq {0} / {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Qayta urinish‬","VEGAS/excellent":"‪Qoyilmaqom!‬","VEGAS/great":"‪Zo‘r!‬","VEGAS/good":"‪Yaxshi‬","VEGAS/label.score.max":"‪Natija: {1} dan {0}‬","VEGAS/label.time":"‪Vaqt: {0}‬","VEGAS/yourNewBest":"‪(Yangi rekord!)‬","VEGAS/pattern.0yourBest":"‪(Rekord: {0})‬","VEGAS/continue":"‪Davom ettirish‬","VEGAS/newLevel":"‪Yangi bosqich‬","VEGAS/keepGoing":"‪Ushlab turish yoki qo‘yib yuborish‬","VEGAS/pattern.score.number":"‪Hisob: {{score}}‬","VEGAS/score":"‪Natija:‬"},vi:{"SCENERY_PHET/webglWarning.body":"‪WebGL chưa được kích hoạt hoặc không có. Click để có thêm thông tin.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Xin lỗi, đã có lỗi đồ hoạ.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Nạp lại‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Bạn đã hoàn thành mọi câu đố!‬","VEGAS/done":"‪Xong‬","VEGAS/startOver":"‪Trở lại từ đầu‬","VEGAS/label.level":"‪Mức độ: {0}‬","VEGAS/pattern.0challenge.1max":"‪Câu đố {0}/{1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}: {1}‬","VEGAS/keepTrying":"‪Tiếp tục‬","VEGAS/excellent":"‪Tuyệt vời!‬","VEGAS/great":"‪Giỏi!‬","VEGAS/good":"‪Tốt!‬","VEGAS/label.score.max":"‪Điểm: {0} / {1}‬","VEGAS/label.time":"‪Thời gian: {0}‬","VEGAS/yourNewBest":"‪(Kỷ lục mới!)‬","VEGAS/pattern.0yourBest":"‪(Điểm cao nhất: {0})‬","VEGAS/continue":"‪Tiếp tục‬","VEGAS/newLevel":"‪Mức mới‬","VEGAS/keepGoing":"‪Tiếp tục‬","VEGAS/pattern.score.number":"‪Điểm: {{score}}‬","VEGAS/score":"‪Điểm:‬"},wo:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Reload‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Matal Nga Toluwal Yëp!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪Jeematal‬","VEGAS/label.level":"‪Toluway: {0}‬","VEGAS/pattern.0challenge.1max":"‪Jongante {0} Ci {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Jeematal‬","VEGAS/excellent":"‪Mucc Ayib!‬","VEGAS/great":"‪Mucc Ayib Na!‬","VEGAS/good":"‪Bax Na!‬","VEGAS/label.score.max":"‪Ngóop Gi: {0} Lu Bokul {1}‬","VEGAS/label.time":"‪Waxtu: {0}‬","VEGAS/yourNewBest":"‪( Sa Lugën Bu Bees! )‬","VEGAS/pattern.0yourBest":"‪( Sa Lugën: {0} )‬","VEGAS/continue":"‪Di Dem‬","VEGAS/newLevel":"‪Toluway Bu Bees‬","VEGAS/keepGoing":"‪Yegalel‬","VEGAS/pattern.score.number":"‪Say Poñ: {{score}}‬","VEGAS/score":"‪Say Poñ‬"},yo:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Reload‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪You completed all levels!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪Sẹ̀sẹ̀bẹ̀rẹ̀‬","VEGAS/label.level":"‪Ipèlè: {0}‬","VEGAS/pattern.0challenge.1max":"‪Ipènijà {0} of {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Gbiyanju si iwaju sii‬","VEGAS/excellent":"‪Tayọ‬","VEGAS/great":"‪Dara ju!‬","VEGAS/good":"‪O dara!‬","VEGAS/label.score.max":"‪Máàkì: {0} out of {1}‬","VEGAS/label.time":"‪Akoko: {0}‬","VEGAS/yourNewBest":"‪(Ipaare tinun to dara ju lo !)‬","VEGAS/pattern.0yourBest":"‪(Ipaare todara ju lo: {0} )‬","VEGAS/continue":"‪Tesiwaju‬","VEGAS/newLevel":"‪Ipele Tuntun‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/pattern.score.number":"‪Score: {{score}}‬","VEGAS/score":"‪Máàkì:‬"},zh_CN:{"SCENERY_PHET/webglWarning.body":"‪WebGL未开启或不可用，点击获取更多信息‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪抱歉，发生了一个图形错误‬","SCENERY_PHET/webglWarning.contextLossReload":"‪重新加载‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪你已经完成所有等级‬","VEGAS/done":"‪完成‬","VEGAS/startOver":"‪重新开始‬","VEGAS/label.level":"‪等级: {0}‬","VEGAS/pattern.0challenge.1max":"‪挑战 {0} / {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪继续努力‬","VEGAS/excellent":"‪完美！‬","VEGAS/great":"‪太好了！‬","VEGAS/good":"‪很好！‬","VEGAS/label.score.max":"‪得分: {0} 总分 {1}‬","VEGAS/label.time":"‪时间: {0}‬","VEGAS/yourNewBest":"‪(你最新最棒的!)‬","VEGAS/pattern.0yourBest":"‪(你最好的: {0})‬","VEGAS/continue":"‪继续‬","VEGAS/newLevel":"‪新级别‬","VEGAS/keepGoing":"‪继续‬","VEGAS/pattern.score.number":"‪分数: {{score}}‬","VEGAS/score":"‪分数:‬"},zh_HK:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Reload‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪你已完成所有關卡!‬","VEGAS/done":"‪完成‬","VEGAS/startOver":"‪重新開始‬","VEGAS/label.level":"‪第 {0} 關‬","VEGAS/pattern.0challenge.1max":"‪第 {0} 關 / 共 {1} 關‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪繼續嘗試‬","VEGAS/excellent":"‪非常好!‬","VEGAS/great":"‪很好!‬","VEGAS/good":"‪好!‬","VEGAS/label.score.max":"‪分數:{1}分之中的{0}分‬","VEGAS/label.time":"‪時間:{0}‬","VEGAS/yourNewBest":"‪(你的最佳成績!)‬","VEGAS/pattern.0yourBest":"‪(你的最佳成績: {0} 分)‬","VEGAS/continue":"‪繼續‬","VEGAS/newLevel":"‪新關卡‬","VEGAS/keepGoing":"‪繼續努力‬","VEGAS/pattern.score.number":"‪得分: {{score}}‬","VEGAS/score":"‪得分:‬"},zh_TW:{"SCENERY_PHET/webglWarning.body":"‪WebGL 未開啟或無法使用。點擊以瞭解詳情。‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪抱歉，發生了錯誤。‬","SCENERY_PHET/webglWarning.contextLossReload":"‪重新載入‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪您破完所有關卡了！‬","VEGAS/done":"‪完成‬","VEGAS/startOver":"‪重新開始‬","VEGAS/label.level":"‪關卡：{0}‬","VEGAS/pattern.0challenge.1max":"‪第 {0} 關 / 共 {1} 關‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪繼續加油‬","VEGAS/excellent":"‪太厲害了！‬","VEGAS/great":"‪太好了！‬","VEGAS/good":"‪很好！‬","VEGAS/label.score.max":"‪得分：共 {1} 分, 得到 {0} 分‬","VEGAS/label.time":"‪時間: {0}‬","VEGAS/yourNewBest":"‪您剛創了新紀錄！‬","VEGAS/pattern.0yourBest":"‪(您的最佳紀錄：{0})‬","VEGAS/continue":"‪繼續‬","VEGAS/newLevel":"‪新關卡‬","VEGAS/keepGoing":"‪繼續加油‬","VEGAS/pattern.score.number":"‪得分：{{score}}‬","VEGAS/score":"‪得分：‬"},zu:{"SCENERY_PHET/webglWarning.body":"‪i-webGL ayinikiwe amandla nomaayitholakali.chofoza ukuze ufunde kabanzi.‬","SCENERY_PHET/a11y.playControlButton.stop":"‪Stop‬","SCENERY_PHET/a11y.movementAlerter.down":"‪down‬","SCENERY_PHET/a11y.movementAlerter.left":"‪left‬","SCENERY_PHET/a11y.movementAlerter.right":"‪right‬","SCENERY_PHET/a11y.movementAlerter.up":"‪up‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheLeft":"‪up and to the left‬","SCENERY_PHET/a11y.movementAlerter.upAndToTheRight":"‪up and to the right‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheLeft":"‪down and to the left‬","SCENERY_PHET/a11y.movementAlerter.downAndToTheRight":"‪down and to the right‬","SCENERY_PHET/a11y.measuringTape":"‪Measuring Tape‬","SCENERY_PHET/a11y.measuringTapeTip":"‪Measuring Tape Tip‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪uxolo,kwenzeke iphutha lesithombe.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪layisha kabusha‬","SCENERY_PHET/a11y.close":"‪Close‬","SCENERY_PHET/a11y.playControlButton.play":"‪Play‬","SCENERY_PHET/a11y.movementAlerter.leftBorderAlert":"‪At left edge‬","SCENERY_PHET/a11y.movementAlerter.rightBorderAlert":"‪At right edge‬","SCENERY_PHET/a11y.movementAlerter.topBorderAlert":"‪At top‬","SCENERY_PHET/a11y.movementAlerter.bottomBorderAlert":"‪At bottom‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬","VEGAS/youCompletedAllLevels":"‪Uqedele wonke amazinga!‬","VEGAS/done":"‪Kwenziwe‬","VEGAS/startOver":"‪qala phansi‬","VEGAS/label.level":"‪Level: {0}‬","VEGAS/pattern.0challenge.1max":"‪Challenge {0} of {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪qhubeka uzame‬","VEGAS/excellent":"‪kuhle kakhulu!‬","VEGAS/great":"‪kuhle kahle!‬","VEGAS/good":"‪kuhle!‬","VEGAS/label.score.max":"‪Score: {0} out of {1}‬","VEGAS/label.time":"‪Time: {0}‬","VEGAS/yourNewBest":"‪okuhle kwakho okusha‬","VEGAS/pattern.0yourBest":"‪(Your Best: {0})‬","VEGAS/continue":"‪qhubeka‬","VEGAS/newLevel":"‪izing elisha‬","VEGAS/keepGoing":"‪qhubeka‬","VEGAS/pattern.score.number":"‪Score: {{score}}‬","VEGAS/score":"‪Isikolo‬"}},phet.chipper.stringMetadata={},function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,(function(e,t){var i=[],n=i.slice,r=i.concat,s=i.push,a=i.indexOf,o={},l=o.toString,h=o.hasOwnProperty,u="".trim,c={},d=e.document,p="2.1.0",m=function(e,t){return new m.fn.init(e,t)},g=/^-ms-/,f=/-([\da-z])/gi,y=function(e,t){return t.toUpperCase()};function E(e){var t=e.length,i=m.type(e);return"function"!==i&&!m.isWindow(e)&&(!(1!==e.nodeType||!t)||("array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e))}m.fn=m.prototype={jquery:p,constructor:m,selector:"",length:0,toArray:function(){return n.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:n.call(this)},pushStack:function(e){var t=m.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return m.each(this,e,t)},map:function(e){return this.pushStack(m.map(this,(function(t,i){return e.call(t,i,t)})))},slice:function(){return this.pushStack(n.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(0>e?t:0);return this.pushStack(i>=0&&t>i?[this[i]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:s,sort:i.sort,splice:i.splice},m.extend=m.fn.extend=function(){var e,t,i,n,r,s,a=arguments[0]||{},o=1,l=arguments.length,h=!1;for("boolean"==typeof a&&(h=a,a=arguments[o]||{},o++),"object"==typeof a||m.isFunction(a)||(a={}),o===l&&(a=this,o--);l>o;o++)if(null!=(e=arguments[o]))for(t in e)i=a[t],a!==(n=e[t])&&(h&&n&&(m.isPlainObject(n)||(r=m.isArray(n)))?(r?(r=!1,s=i&&m.isArray(i)?i:[]):s=i&&m.isPlainObject(i)?i:{},a[t]=m.extend(h,s,n)):void 0!==n&&(a[t]=n));return a},m.extend({expando:"jQuery"+(p+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===m.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return e-parseFloat(e)>=0},isPlainObject:function(e){if("object"!==m.type(e)||e.nodeType||m.isWindow(e))return!1;try{if(e.constructor&&!h.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}return!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?o[l.call(e)]||"object":typeof e},globalEval:function(e){var t,i=eval;(e=m.trim(e))&&(1===e.indexOf("use strict")?((t=d.createElement("script")).text=e,d.head.appendChild(t).parentNode.removeChild(t)):i(e))},camelCase:function(e){return e.replace(g,"ms-").replace(f,y)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,i){var n=0,r=e.length,s=E(e);if(i){if(s)for(;r>n&&!1!==t.apply(e[n],i);n++);else for(n in e)if(!1===t.apply(e[n],i))break}else if(s)for(;r>n&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},trim:function(e){return null==e?"":u.call(e)},makeArray:function(e,t){var i=t||[];return null!=e&&(E(Object(e))?m.merge(i,"string"==typeof e?[e]:e):s.call(i,e)),i},inArray:function(e,t,i){return null==t?-1:a.call(t,e,i)},merge:function(e,t){for(var i=+t.length,n=0,r=e.length;i>n;n++)e[r++]=t[n];return e.length=r,e},grep:function(e,t,i){for(var n=[],r=0,s=e.length,a=!i;s>r;r++)!t(e[r],r)!==a&&n.push(e[r]);return n},map:function(e,t,i){var n,s=0,a=e.length,o=[];if(E(e))for(;a>s;s++)null!=(n=t(e[s],s,i))&&o.push(n);else for(s in e)null!=(n=t(e[s],s,i))&&o.push(n);return r.apply([],o)},guid:1,proxy:function(e,t){var i,r,s;return"string"==typeof t&&(i=e[t],t=e,e=i),m.isFunction(e)?(r=n.call(arguments,2),(s=function(){return e.apply(t||this,r.concat(n.call(arguments)))}).guid=e.guid=e.guid||m.guid++,s):void 0},now:Date.now,support:c}),m.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),(function(e,t){o["[object "+t+"]"]=t.toLowerCase()}));var v=function(e){var t,i,n,r,s,a,o,l,h,u,c,d,p,m,g,f,y,E="sizzle"+-new Date,v=e.document,A=0,b=0,S=ne(),_=ne(),x=ne(),w=function(e,t){return e===t&&(h=!0),0},T="undefined",P={}.hasOwnProperty,C=[],V=C.pop,R=C.push,N=C.push,M=C.slice,k=C.indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(this[t]===e)return t;return-1},L="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",I="[\\x20\\t\\r\\n\\f]",B="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",D=B.replace("w","w#"),O="\\["+I+"*("+B+")"+I+"*(?:([*^$|!~]?=)"+I+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+D+")|)|)"+I+"*\\]",q=":("+B+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+O.replace(3,8)+")*)|.*)\\)|)",Y=new RegExp("^"+I+"+|((?:^|[^\\\\])(?:\\\\.)*)"+I+"+$","g"),H=new RegExp("^"+I+"*,"+I+"*"),G=new RegExp("^"+I+"*([>+~]|"+I+")"+I+"*"),F=new RegExp("="+I+"*([^\\]'\"]*?)"+I+"*\\]","g"),z=new RegExp(q),U=new RegExp("^"+D+"$"),W={ID:new RegExp("^#("+B+")"),CLASS:new RegExp("^\\.("+B+")"),TAG:new RegExp("^("+B.replace("w","w*")+")"),ATTR:new RegExp("^"+O),PSEUDO:new RegExp("^"+q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+I+"*(even|odd|(([+-]|)(\\d*)n|)"+I+"*(?:([+-]|)"+I+"*(\\d+)|))"+I+"*\\)|)","i"),bool:new RegExp("^(?:"+L+")$","i"),needsContext:new RegExp("^"+I+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+I+"*((?:-\\d)?\\d*)"+I+"*\\)|)(?=[^-]|$)","i")},X=/^(?:input|select|textarea|button)$/i,j=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,K=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Z=/[+~]/,J=/'|\\/g,$=new RegExp("\\\\([\\da-f]{1,6}"+I+"?|("+I+")|.)","ig"),te=function(e,t,i){var n="0x"+t-65536;return n!=n||i?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)};try{N.apply(C=M.call(v.childNodes),v.childNodes),C[v.childNodes.length].nodeType}catch(ee){N={apply:C.length?function(e,t){R.apply(e,M.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}function ie(e,t,n,r){var s,a,o,l,h,d,g,f,A,b;if((t?t.ownerDocument||t:v)!==c&&u(t),n=n||[],!e||"string"!=typeof e)return n;if(1!==(l=(t=t||c).nodeType)&&9!==l)return[];if(p&&!r){if(s=K.exec(e))if(o=s[1]){if(9===l){if(!(a=t.getElementById(o))||!a.parentNode)return n;if(a.id===o)return n.push(a),n}else if(t.ownerDocument&&(a=t.ownerDocument.getElementById(o))&&y(t,a)&&a.id===o)return n.push(a),n}else{if(s[2])return N.apply(n,t.getElementsByTagName(e)),n;if((o=s[3])&&i.getElementsByClassName&&t.getElementsByClassName)return N.apply(n,t.getElementsByClassName(o)),n}if(i.qsa&&(!m||!m.test(e))){if(f=g=E,A=t,b=9===l&&e,1===l&&"object"!==t.nodeName.toLowerCase()){for(d=pe(e),(g=t.getAttribute("id"))?f=g.replace(J,"\\$&"):t.setAttribute("id",f),f="[id='"+f+"'] ",h=d.length;h--;)d[h]=f+me(d[h]);A=Z.test(e)&&ce(t.parentNode)||t,b=d.join(",")}if(b)try{return N.apply(n,A.querySelectorAll(b)),n}catch(S){}finally{g||t.removeAttribute("id")}}}return be(e.replace(Y,"$1"),t,n,r)}function ne(){var e=[];return function t(i,r){return e.push(i+" ")>n.cacheLength&&delete t[e.shift()],t[i+" "]=r}}function re(e){return e[E]=!0,e}function se(e){var t=c.createElement("div");try{return!!e(t)}catch(i){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ae(e,t){for(var i=e.split("|"),r=e.length;r--;)n.attrHandle[i[r]]=t}function oe(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||1<<31)-(~e.sourceIndex||1<<31);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function le(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function he(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function ue(e){return re((function(t){return t=+t,re((function(i,n){for(var r,s=e([],i.length,t),a=s.length;a--;)i[r=s[a]]&&(i[r]=!(n[r]=i[r]))}))}))}function ce(e){return e&&typeof e.getElementsByTagName!==T&&e}for(t in i=ie.support={},s=ie.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},u=ie.setDocument=function(e){var t,r=e?e.ownerDocument||e:v,a=r.defaultView;return r!==c&&9===r.nodeType&&r.documentElement?(c=r,d=r.documentElement,p=!s(r),a&&a!==a.top&&(a.addEventListener?a.addEventListener("unload",(function(){u()}),!1):a.attachEvent&&a.attachEvent("onunload",(function(){u()}))),i.attributes=se((function(e){return e.className="i",!e.getAttribute("className")})),i.getElementsByTagName=se((function(e){return e.appendChild(r.createComment("")),!e.getElementsByTagName("*").length})),i.getElementsByClassName=Q.test(r.getElementsByClassName)&&se((function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length})),i.getById=se((function(e){return d.appendChild(e).id=E,!r.getElementsByName||!r.getElementsByName(E).length})),i.getById?(n.find.ID=function(e,t){if(typeof t.getElementById!==T&&p){var i=t.getElementById(e);return i&&i.parentNode?[i]:[]}},n.filter.ID=function(e){var t=e.replace($,te);return function(e){return e.getAttribute("id")===t}}):(delete n.find.ID,n.filter.ID=function(e){var t=e.replace($,te);return function(e){var i=typeof e.getAttributeNode!==T&&e.getAttributeNode("id");return i&&i.value===t}}),n.find.TAG=i.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==T?t.getElementsByTagName(e):void 0}:function(e,t){var i,n=[],r=0,s=t.getElementsByTagName(e);if("*"===e){for(;i=s[r++];)1===i.nodeType&&n.push(i);return n}return s},n.find.CLASS=i.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==T&&p?t.getElementsByClassName(e):void 0},g=[],m=[],(i.qsa=Q.test(r.querySelectorAll))&&(se((function(e){e.innerHTML="<select t=''><option selected=''></option></select>",e.querySelectorAll("[t^='']").length&&m.push("[*^$]="+I+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+I+"*(?:value|"+L+")"),e.querySelectorAll(":checked").length||m.push(":checked")})),se((function(e){var t=r.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+I+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")}))),(i.matchesSelector=Q.test(f=d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&se((function(e){i.disconnectedMatch=f.call(e,"div"),f.call(e,"[s!='']:x"),g.push("!=",q)})),m=m.length&&new RegExp(m.join("|")),g=g.length&&new RegExp(g.join("|")),t=Q.test(d.compareDocumentPosition),y=t||Q.test(d.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},w=t?function(e,t){if(e===t)return h=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!i.sortDetached&&t.compareDocumentPosition(e)===n?e===r||e.ownerDocument===v&&y(v,e)?-1:t===r||t.ownerDocument===v&&y(v,t)?1:l?k.call(l,e)-k.call(l,t):0:4&n?-1:1)}:function(e,t){if(e===t)return h=!0,0;var i,n=0,s=e.parentNode,a=t.parentNode,o=[e],u=[t];if(!s||!a)return e===r?-1:t===r?1:s?-1:a?1:l?k.call(l,e)-k.call(l,t):0;if(s===a)return oe(e,t);for(i=e;i=i.parentNode;)o.unshift(i);for(i=t;i=i.parentNode;)u.unshift(i);for(;o[n]===u[n];)n++;return n?oe(o[n],u[n]):o[n]===v?-1:u[n]===v?1:0},r):c},ie.matches=function(e,t){return ie(e,null,null,t)},ie.matchesSelector=function(e,t){if((e.ownerDocument||e)!==c&&u(e),t=t.replace(F,"='$1']"),!(!i.matchesSelector||!p||g&&g.test(t)||m&&m.test(t)))try{var n=f.call(e,t);if(n||i.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(r){}return ie(t,c,null,[e]).length>0},ie.contains=function(e,t){return(e.ownerDocument||e)!==c&&u(e),y(e,t)},ie.attr=function(e,t){(e.ownerDocument||e)!==c&&u(e);var r=n.attrHandle[t.toLowerCase()],s=r&&P.call(n.attrHandle,t.toLowerCase())?r(e,t,!p):void 0;return void 0!==s?s:i.attributes||!p?e.getAttribute(t):(s=e.getAttributeNode(t))&&s.specified?s.value:null},ie.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ie.uniqueSort=function(e){var t,n=[],r=0,s=0;if(h=!i.detectDuplicates,l=!i.sortStable&&e.slice(0),e.sort(w),h){for(;t=e[s++];)t===e[s]&&(r=n.push(s));for(;r--;)e.splice(n[r],1)}return l=null,e},r=ie.getText=function(e){var t,i="",n=0,s=e.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=r(e)}else if(3===s||4===s)return e.nodeValue}else for(;t=e[n++];)i+=r(t);return i},(n=ie.selectors={cacheLength:50,createPseudo:re,match:W,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace($,te),e[3]=(e[4]||e[5]||"").replace($,te),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ie.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ie.error(e[0]),e},PSEUDO:function(e){var t,i=!e[5]&&e[2];return W.CHILD.test(e[0])?null:(e[3]&&void 0!==e[4]?e[2]=e[4]:i&&z.test(i)&&(t=pe(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace($,te).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=S[e+" "];return t||(t=new RegExp("(^|"+I+")"+e+"("+I+"|$)"))&&S(e,(function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==T&&e.getAttribute("class")||"")}))},ATTR:function(e,t,i){return function(n){var r=ie.attr(n,e);return null==r?"!="===t:!t||(r+="","="===t?r===i:"!="===t?r!==i:"^="===t?i&&0===r.indexOf(i):"*="===t?i&&r.indexOf(i)>-1:"$="===t?i&&r.slice(-i.length)===i:"~="===t?(" "+r+" ").indexOf(i)>-1:"|="===t&&(r===i||r.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,i,n,r){var s="nth"!==e.slice(0,3),a="last"!==e.slice(-4),o="of-type"===t;return 1===n&&0===r?function(e){return!!e.parentNode}:function(t,i,l){var h,u,c,d,p,m,g=s!==a?"nextSibling":"previousSibling",f=t.parentNode,y=o&&t.nodeName.toLowerCase(),v=!l&&!o;if(f){if(s){for(;g;){for(c=t;c=c[g];)if(o?c.nodeName.toLowerCase()===y:1===c.nodeType)return!1;m=g="only"===e&&!m&&"nextSibling"}return!0}if(m=[a?f.firstChild:f.lastChild],a&&v){for(p=(h=(u=f[E]||(f[E]={}))[e]||[])[0]===A&&h[1],d=h[0]===A&&h[2],c=p&&f.childNodes[p];c=++p&&c&&c[g]||(d=p=0)||m.pop();)if(1===c.nodeType&&++d&&c===t){u[e]=[A,p,d];break}}else if(v&&(h=(t[E]||(t[E]={}))[e])&&h[0]===A)d=h[1];else for(;(c=++p&&c&&c[g]||(d=p=0)||m.pop())&&((o?c.nodeName.toLowerCase()!==y:1!==c.nodeType)||!++d||(v&&((c[E]||(c[E]={}))[e]=[A,d]),c!==t)););return(d-=r)===n||d%n==0&&d/n>=0}}},PSEUDO:function(e,t){var i,r=n.pseudos[e]||n.setFilters[e.toLowerCase()]||ie.error("unsupported pseudo: "+e);return r[E]?r(t):r.length>1?(i=[e,e,"",t],n.setFilters.hasOwnProperty(e.toLowerCase())?re((function(e,i){for(var n,s=r(e,t),a=s.length;a--;)e[n=k.call(e,s[a])]=!(i[n]=s[a])})):function(e){return r(e,0,i)}):r}},pseudos:{not:re((function(e){var t=[],i=[],n=a(e.replace(Y,"$1"));return n[E]?re((function(e,t,i,r){for(var s,a=n(e,null,r,[]),o=e.length;o--;)(s=a[o])&&(e[o]=!(t[o]=s))})):function(e,r,s){return t[0]=e,n(t,null,s,i),!i.pop()}})),has:re((function(e){return function(t){return ie(e,t).length>0}})),contains:re((function(e){return function(t){return(t.textContent||t.innerText||r(t)).indexOf(e)>-1}})),lang:re((function(e){return U.test(e||"")||ie.error("unsupported lang: "+e),e=e.replace($,te).toLowerCase(),function(t){var i;do{if(i=p?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(i=i.toLowerCase())===e||0===i.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===d},focus:function(e){return e===c.activeElement&&(!c.hasFocus||c.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!n.pseudos.empty(e)},header:function(e){return j.test(e.nodeName)},input:function(e){return X.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ue((function(){return[0]})),last:ue((function(e,t){return[t-1]})),eq:ue((function(e,t,i){return[0>i?i+t:i]})),even:ue((function(e,t){for(var i=0;t>i;i+=2)e.push(i);return e})),odd:ue((function(e,t){for(var i=1;t>i;i+=2)e.push(i);return e})),lt:ue((function(e,t,i){for(var n=0>i?i+t:i;--n>=0;)e.push(n);return e})),gt:ue((function(e,t,i){for(var n=0>i?i+t:i;++n<t;)e.push(n);return e}))}}).pseudos.nth=n.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[t]=le(t);for(t in{submit:!0,reset:!0})n.pseudos[t]=he(t);function de(){}function pe(e,t){var i,r,s,a,o,l,h,u=_[e+" "];if(u)return t?0:u.slice(0);for(o=e,l=[],h=n.preFilter;o;){for(a in(!i||(r=H.exec(o)))&&(r&&(o=o.slice(r[0].length)||o),l.push(s=[])),i=!1,(r=G.exec(o))&&(i=r.shift(),s.push({value:i,type:r[0].replace(Y," ")}),o=o.slice(i.length)),n.filter)!(r=W[a].exec(o))||h[a]&&!(r=h[a](r))||(i=r.shift(),s.push({value:i,type:a,matches:r}),o=o.slice(i.length));if(!i)break}return t?o.length:o?ie.error(e):_(e,l).slice(0)}function me(e){for(var t=0,i=e.length,n="";i>t;t++)n+=e[t].value;return n}function ge(e,t,i){var n=t.dir,r=i&&"parentNode"===n,s=b++;return t.first?function(t,i,s){for(;t=t[n];)if(1===t.nodeType||r)return e(t,i,s)}:function(t,i,a){var o,l,h=[A,s];if(a){for(;t=t[n];)if((1===t.nodeType||r)&&e(t,i,a))return!0}else for(;t=t[n];)if(1===t.nodeType||r){if((o=(l=t[E]||(t[E]={}))[n])&&o[0]===A&&o[1]===s)return h[2]=o[2];if(l[n]=h,h[2]=e(t,i,a))return!0}}}function fe(e){return e.length>1?function(t,i,n){for(var r=e.length;r--;)if(!e[r](t,i,n))return!1;return!0}:e[0]}function ye(e,t,i,n,r){for(var s,a=[],o=0,l=e.length,h=null!=t;l>o;o++)(s=e[o])&&(!i||i(s,n,r))&&(a.push(s),h&&t.push(o));return a}function Ee(e,t,i,n,r,s){return n&&!n[E]&&(n=Ee(n)),r&&!r[E]&&(r=Ee(r,s)),re((function(s,a,o,l){var h,u,c,d=[],p=[],m=a.length,g=s||function(e,t,i){for(var n=0,r=t.length;r>n;n++)ie(e,t[n],i);return i}(t||"*",o.nodeType?[o]:o,[]),f=!e||!s&&t?g:ye(g,d,e,o,l),y=i?r||(s?e:m||n)?[]:a:f;if(i&&i(f,y,o,l),n)for(h=ye(y,p),n(h,[],o,l),u=h.length;u--;)(c=h[u])&&(y[p[u]]=!(f[p[u]]=c));if(s){if(r||e){if(r){for(h=[],u=y.length;u--;)(c=y[u])&&h.push(f[u]=c);r(null,y=[],h,l)}for(u=y.length;u--;)(c=y[u])&&(h=r?k.call(s,c):d[u])>-1&&(s[h]=!(a[h]=c))}}else y=ye(y===a?y.splice(m,y.length):y),r?r(null,a,y,l):N.apply(a,y)}))}function ve(e){for(var t,i,r,s=e.length,a=n.relative[e[0].type],l=a||n.relative[" "],h=a?1:0,u=ge((function(e){return e===t}),l,!0),c=ge((function(e){return k.call(t,e)>-1}),l,!0),d=[function(e,i,n){return!a&&(n||i!==o)||((t=i).nodeType?u(e,i,n):c(e,i,n))}];s>h;h++)if(i=n.relative[e[h].type])d=[ge(fe(d),i)];else{if((i=n.filter[e[h].type].apply(null,e[h].matches))[E]){for(r=++h;s>r&&!n.relative[e[r].type];r++);return Ee(h>1&&fe(d),h>1&&me(e.slice(0,h-1).concat({value:" "===e[h-2].type?"*":""})).replace(Y,"$1"),i,r>h&&ve(e.slice(h,r)),s>r&&ve(e=e.slice(r)),s>r&&me(e))}d.push(i)}return fe(d)}function Ae(e,t){var i=t.length>0,r=e.length>0,s=function(s,a,l,h,u){var d,p,m,g=0,f="0",y=s&&[],E=[],v=o,b=s||r&&n.find.TAG("*",u),S=A+=null==v?1:Math.random()||.1,_=b.length;for(u&&(o=a!==c&&a);f!==_&&null!=(d=b[f]);f++){if(r&&d){for(p=0;m=e[p++];)if(m(d,a,l)){h.push(d);break}u&&(A=S)}i&&((d=!m&&d)&&g--,s&&y.push(d))}if(g+=f,i&&f!==g){for(p=0;m=t[p++];)m(y,E,a,l);if(s){if(g>0)for(;f--;)y[f]||E[f]||(E[f]=V.call(h));E=ye(E)}N.apply(h,E),u&&!s&&E.length>0&&g+t.length>1&&ie.uniqueSort(h)}return u&&(A=S,o=v),y};return i?re(s):s}function be(e,t,r,s){var o,l,h,u,c,d=pe(e);if(!s&&1===d.length){if((l=d[0]=d[0].slice(0)).length>2&&"ID"===(h=l[0]).type&&i.getById&&9===t.nodeType&&p&&n.relative[l[1].type]){if(!(t=(n.find.ID(h.matches[0].replace($,te),t)||[])[0]))return r;e=e.slice(l.shift().value.length)}for(o=W.needsContext.test(e)?0:l.length;o--&&(h=l[o],!n.relative[u=h.type]);)if((c=n.find[u])&&(s=c(h.matches[0].replace($,te),Z.test(l[0].type)&&ce(t.parentNode)||t))){if(l.splice(o,1),!(e=s.length&&me(l)))return N.apply(r,s),r;break}}return a(e,d)(s,t,!p,r,Z.test(e)&&ce(t.parentNode)||t),r}return de.prototype=n.filters=n.pseudos,n.setFilters=new de,a=ie.compile=function(e,t){var i,n=[],r=[],s=x[e+" "];if(!s){for(t||(t=pe(e)),i=t.length;i--;)(s=ve(t[i]))[E]?n.push(s):r.push(s);s=x(e,Ae(r,n))}return s},i.sortStable=E.split("").sort(w).join("")===E,i.detectDuplicates=!!h,u(),i.sortDetached=se((function(e){return 1&e.compareDocumentPosition(c.createElement("div"))})),se((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||ae("type|href|height|width",(function(e,t,i){return i?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),i.attributes&&se((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||ae("value",(function(e,t,i){return i||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue})),se((function(e){return null==e.getAttribute("disabled")}))||ae(L,(function(e,t,i){var n;return i?void 0:!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null})),ie}(e);m.find=v,m.expr=v.selectors,m.expr[":"]=m.expr.pseudos,m.unique=v.uniqueSort,m.text=v.getText,m.isXMLDoc=v.isXML,m.contains=v.contains;var A=m.expr.match.needsContext,b=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,S=/^.[^:#\[\.,]*$/;function _(e,t,i){if(m.isFunction(t))return m.grep(e,(function(e,n){return!!t.call(e,n,e)!==i}));if(t.nodeType)return m.grep(e,(function(e){return e===t!==i}));if("string"==typeof t){if(S.test(t))return m.filter(t,e,i);t=m.filter(t,e)}return m.grep(e,(function(e){return a.call(t,e)>=0!==i}))}m.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?m.find.matchesSelector(n,e)?[n]:[]:m.find.matches(e,m.grep(t,(function(e){return 1===e.nodeType})))},m.fn.extend({find:function(e){var t,i=this.length,n=[],r=this;if("string"!=typeof e)return this.pushStack(m(e).filter((function(){for(t=0;i>t;t++)if(m.contains(r[t],this))return!0})));for(t=0;i>t;t++)m.find(e,r[t],n);return(n=this.pushStack(i>1?m.unique(n):n)).selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(_(this,e||[],!1))},not:function(e){return this.pushStack(_(this,e||[],!0))},is:function(e){return!!_(this,"string"==typeof e&&A.test(e)?m(e):e||[],!1).length}});var x,w=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(m.fn.init=function(e,t){var i,n;if(!e)return this;if("string"==typeof e){if(!(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:w.exec(e))||!i[1]&&t)return!t||t.jquery?(t||x).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof m?t[0]:t,m.merge(this,m.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:d,!0)),b.test(i[1])&&m.isPlainObject(t))for(i in t)m.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(n=d.getElementById(i[2]))&&n.parentNode&&(this.length=1,this[0]=n),this.context=d,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):m.isFunction(e)?void 0!==x.ready?x.ready(e):e(m):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),m.makeArray(e,this))}).prototype=m.fn,x=m(d);var T=/^(?:parents|prev(?:Until|All))/,P={children:!0,contents:!0,next:!0,prev:!0};function C(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}m.extend({dir:function(e,t,i){for(var n=[],r=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&m(e).is(i))break;n.push(e)}return n},sibling:function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}}),m.fn.extend({has:function(e){var t=m(e,this),i=t.length;return this.filter((function(){for(var e=0;i>e;e++)if(m.contains(this,t[e]))return!0}))},closest:function(e,t){for(var i,n=0,r=this.length,s=[],a=A.test(e)||"string"!=typeof e?m(e,t||this.context):0;r>n;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(a?a.index(i)>-1:1===i.nodeType&&m.find.matchesSelector(i,e))){s.push(i);break}return this.pushStack(s.length>1?m.unique(s):s)},index:function(e){return e?"string"==typeof e?a.call(m(e),this[0]):a.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(m.unique(m.merge(this.get(),m(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),m.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return m.dir(e,"parentNode")},parentsUntil:function(e,t,i){return m.dir(e,"parentNode",i)},next:function(e){return C(e,"nextSibling")},prev:function(e){return C(e,"previousSibling")},nextAll:function(e){return m.dir(e,"nextSibling")},prevAll:function(e){return m.dir(e,"previousSibling")},nextUntil:function(e,t,i){return m.dir(e,"nextSibling",i)},prevUntil:function(e,t,i){return m.dir(e,"previousSibling",i)},siblings:function(e){return m.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return m.sibling(e.firstChild)},contents:function(e){return e.contentDocument||m.merge([],e.childNodes)}},(function(e,t){m.fn[e]=function(i,n){var r=m.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(r=m.filter(n,r)),this.length>1&&(P[e]||m.unique(r),T.test(e)&&r.reverse()),this.pushStack(r)}}));var V,R=/\S+/g,N={};function M(){d.removeEventListener("DOMContentLoaded",M,!1),e.removeEventListener("load",M,!1),m.ready()}m.Callbacks=function(e){e="string"==typeof e?N[e]||function(e){var t=N[e]={};return m.each(e.match(R)||[],(function(e,i){t[i]=!0})),t}(e):m.extend({},e);var t,i,n,r,s,a,o=[],l=!e.once&&[],h=function(c){for(t=e.memory&&c,i=!0,a=r||0,r=0,s=o.length,n=!0;o&&s>a;a++)if(!1===o[a].apply(c[0],c[1])&&e.stopOnFalse){t=!1;break}n=!1,o&&(l?l.length&&h(l.shift()):t?o=[]:u.disable())},u={add:function(){if(o){var i=o.length;!function t(i){m.each(i,(function(i,n){var r=m.type(n);"function"===r?e.unique&&u.has(n)||o.push(n):n&&n.length&&"string"!==r&&t(n)}))}(arguments),n?s=o.length:t&&(r=i,h(t))}return this},remove:function(){return o&&m.each(arguments,(function(e,t){for(var i;(i=m.inArray(t,o,i))>-1;)o.splice(i,1),n&&(s>=i&&s--,a>=i&&a--)})),this},has:function(e){return e?m.inArray(e,o)>-1:!(!o||!o.length)},empty:function(){return o=[],s=0,this},disable:function(){return o=l=t=void 0,this},disabled:function(){return!o},lock:function(){return l=void 0,t||u.disable(),this},locked:function(){return!l},fireWith:function(e,t){return!o||i&&!l||(t=[e,(t=t||[]).slice?t.slice():t],n?l.push(t):h(t)),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!i}};return u},m.extend({Deferred:function(e){var t=[["resolve","done",m.Callbacks("once memory"),"resolved"],["reject","fail",m.Callbacks("once memory"),"rejected"],["notify","progress",m.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return m.Deferred((function(i){m.each(t,(function(t,s){var a=m.isFunction(e[t])&&e[t];r[s[1]]((function(){var e=a&&a.apply(this,arguments);e&&m.isFunction(e.promise)?e.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[s[0]+"With"](this===n?i.promise():this,a?[e]:arguments)}))})),e=null})).promise()},promise:function(e){return null!=e?m.extend(e,n):n}},r={};return n.pipe=n.then,m.each(t,(function(e,s){var a=s[2],o=s[3];n[s[1]]=a.add,o&&a.add((function(){i=o}),t[1^e][2].disable,t[2][2].lock),r[s[0]]=function(){return r[s[0]+"With"](this===r?n:this,arguments),this},r[s[0]+"With"]=a.fireWith})),n.promise(r),e&&e.call(r,r),r},when:function(e){var t,i,r,s=0,a=n.call(arguments),o=a.length,l=1!==o||e&&m.isFunction(e.promise)?o:0,h=1===l?e:m.Deferred(),u=function(e,i,r){return function(s){i[e]=this,r[e]=arguments.length>1?n.call(arguments):s,r===t?h.notifyWith(i,r):--l||h.resolveWith(i,r)}};if(o>1)for(t=new Array(o),i=new Array(o),r=new Array(o);o>s;s++)a[s]&&m.isFunction(a[s].promise)?a[s].promise().done(u(s,r,a)).fail(h.reject).progress(u(s,i,t)):--l;return l||h.resolveWith(r,a),h.promise()}}),m.fn.ready=function(e){return m.ready.promise().done(e),this},m.extend({isReady:!1,readyWait:1,holdReady:function(e){e?m.readyWait++:m.ready(!0)},ready:function(e){(!0===e?--m.readyWait:m.isReady)||(m.isReady=!0,!0!==e&&--m.readyWait>0||(V.resolveWith(d,[m]),m.fn.trigger&&m(d).trigger("ready").off("ready")))}}),m.ready.promise=function(t){return V||(V=m.Deferred(),"complete"===d.readyState?setTimeout(m.ready):(d.addEventListener("DOMContentLoaded",M,!1),e.addEventListener("load",M,!1))),V.promise(t)},m.ready.promise();var k=m.access=function(e,t,i,n,r,s,a){var o=0,l=e.length,h=null==i;if("object"===m.type(i))for(o in r=!0,i)m.access(e,t,o,i[o],!0,s,a);else if(void 0!==n&&(r=!0,m.isFunction(n)||(a=!0),h&&(a?(t.call(e,n),t=null):(h=t,t=function(e,t,i){return h.call(m(e),i)})),t))for(;l>o;o++)t(e[o],i,a?n:n.call(e[o],o,t(e[o],i)));return r?e:h?t.call(e):l?t(e[0],i):s};function L(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=m.expando+Math.random()}m.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},L.uid=1,L.accepts=m.acceptData,L.prototype={key:function(e){if(!L.accepts(e))return 0;var t={},i=e[this.expando];if(!i){i=L.uid++;try{t[this.expando]={value:i},Object.defineProperties(e,t)}catch(n){t[this.expando]=i,m.extend(e,t)}}return this.cache[i]||(this.cache[i]={}),i},set:function(e,t,i){var n,r=this.key(e),s=this.cache[r];if("string"==typeof t)s[t]=i;else if(m.isEmptyObject(s))m.extend(this.cache[r],t);else for(n in t)s[n]=t[n];return s},get:function(e,t){var i=this.cache[this.key(e)];return void 0===t?i:i[t]},access:function(e,t,i){var n;return void 0===t||t&&"string"==typeof t&&void 0===i?void 0!==(n=this.get(e,t))?n:this.get(e,m.camelCase(t)):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,n,r,s=this.key(e),a=this.cache[s];if(void 0===t)this.cache[s]={};else{m.isArray(t)?n=t.concat(t.map(m.camelCase)):(r=m.camelCase(t),t in a?n=[t,r]:n=(n=r)in a?[n]:n.match(R)||[]),i=n.length;for(;i--;)delete a[n[i]]}},hasData:function(e){return!m.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var I=new L,B=new L,D=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,O=/([A-Z])/g;function q(e,t,i){var n;if(void 0===i&&1===e.nodeType)if(n="data-"+t.replace(O,"-$1").toLowerCase(),"string"==typeof(i=e.getAttribute(n))){try{i="true"===i||"false"!==i&&("null"===i?null:+i+""===i?+i:D.test(i)?m.parseJSON(i):i)}catch(r){}B.set(e,t,i)}else i=void 0;return i}m.extend({hasData:function(e){return B.hasData(e)||I.hasData(e)},data:function(e,t,i){return B.access(e,t,i)},removeData:function(e,t){B.remove(e,t)},_data:function(e,t,i){return I.access(e,t,i)},_removeData:function(e,t){I.remove(e,t)}}),m.fn.extend({data:function(e,t){var i,n,r,s=this[0],a=s&&s.attributes;if(void 0===e){if(this.length&&(r=B.get(s),1===s.nodeType&&!I.get(s,"hasDataAttrs"))){for(i=a.length;i--;)0===(n=a[i].name).indexOf("data-")&&(n=m.camelCase(n.slice(5)),q(s,n,r[n]));I.set(s,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each((function(){B.set(this,e)})):k(this,(function(t){var i,n=m.camelCase(e);if(s&&void 0===t){if(void 0!==(i=B.get(s,e)))return i;if(void 0!==(i=B.get(s,n)))return i;if(void 0!==(i=q(s,n,void 0)))return i}else this.each((function(){var i=B.get(this,n);B.set(this,n,t),-1!==e.indexOf("-")&&void 0!==i&&B.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){B.remove(this,e)}))}}),m.extend({queue:function(e,t,i){var n;return e?(t=(t||"fx")+"queue",n=I.get(e,t),i&&(!n||m.isArray(i)?n=I.access(e,t,m.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(e,t){t=t||"fx";var i=m.queue(e,t),n=i.length,r=i.shift(),s=m._queueHooks(e,t);"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===t&&i.unshift("inprogress"),delete s.stop,r.call(e,(function(){m.dequeue(e,t)}),s)),!n&&s&&s.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return I.get(e,i)||I.access(e,i,{empty:m.Callbacks("once memory").add((function(){I.remove(e,[t+"queue",i])}))})}}),m.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?m.queue(this[0],e):void 0===t?this:this.each((function(){var i=m.queue(this,e,t);m._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&m.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){m.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,r=m.Deferred(),s=this,a=this.length,o=function(){--n||r.resolveWith(s,[s])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(i=I.get(s[a],e+"queueHooks"))&&i.empty&&(n++,i.empty.add(o));return o(),r.promise(t)}});var Y=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,H=["Top","Right","Bottom","Left"],G=function(e,t){return e=t||e,"none"===m.css(e,"display")||!m.contains(e.ownerDocument,e)},F=/^(?:checkbox|radio)$/i;!function(){var e=d.createDocumentFragment().appendChild(d.createElement("div"));e.innerHTML="<input type='radio' checked='checked' name='t'/>",c.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",c.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var z="undefined";c.focusinBubbles="onfocusin"in e;var U=/^key/,W=/^(?:mouse|contextmenu)|click/,X=/^(?:focusinfocus|focusoutblur)$/,j=/^([^.]*)(?:\.(.+)|)$/;function Q(){return!0}function K(){return!1}function Z(){try{return d.activeElement}catch(e){}}m.event={global:{},add:function(e,t,i,n,r){var s,a,o,l,h,u,c,d,p,g,f,y=I.get(e);if(y)for(i.handler&&(i=(s=i).handler,r=s.selector),i.guid||(i.guid=m.guid++),(l=y.events)||(l=y.events={}),(a=y.handle)||(a=y.handle=function(t){return typeof m!==z&&m.event.triggered!==t.type?m.event.dispatch.apply(e,arguments):void 0}),h=(t=(t||"").match(R)||[""]).length;h--;)p=f=(o=j.exec(t[h])||[])[1],g=(o[2]||"").split(".").sort(),p&&(c=m.event.special[p]||{},p=(r?c.delegateType:c.bindType)||p,c=m.event.special[p]||{},u=m.extend({type:p,origType:f,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&m.expr.match.needsContext.test(r),namespace:g.join(".")},s),(d=l[p])||((d=l[p]=[]).delegateCount=0,c.setup&&!1!==c.setup.call(e,n,g,a)||e.addEventListener&&e.addEventListener(p,a,!1)),c.add&&(c.add.call(e,u),u.handler.guid||(u.handler.guid=i.guid)),r?d.splice(d.delegateCount++,0,u):d.push(u),m.event.global[p]=!0)},remove:function(e,t,i,n,r){var s,a,o,l,h,u,c,d,p,g,f,y=I.hasData(e)&&I.get(e);if(y&&(l=y.events)){for(h=(t=(t||"").match(R)||[""]).length;h--;)if(p=f=(o=j.exec(t[h])||[])[1],g=(o[2]||"").split(".").sort(),p){for(c=m.event.special[p]||{},d=l[p=(n?c.delegateType:c.bindType)||p]||[],o=o[2]&&new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=s=d.length;s--;)u=d[s],!r&&f!==u.origType||i&&i.guid!==u.guid||o&&!o.test(u.namespace)||n&&n!==u.selector&&("**"!==n||!u.selector)||(d.splice(s,1),u.selector&&d.delegateCount--,c.remove&&c.remove.call(e,u));a&&!d.length&&(c.teardown&&!1!==c.teardown.call(e,g,y.handle)||m.removeEvent(e,p,y.handle),delete l[p])}else for(p in l)m.event.remove(e,p+t[h],i,n,!0);m.isEmptyObject(l)&&(delete y.handle,I.remove(e,"events"))}},trigger:function(t,i,n,r){var s,a,o,l,u,c,p,g=[n||d],f=h.call(t,"type")?t.type:t,y=h.call(t,"namespace")?t.namespace.split("."):[];if(a=o=n=n||d,3!==n.nodeType&&8!==n.nodeType&&!X.test(f+m.event.triggered)&&(f.indexOf(".")>=0&&(y=f.split("."),f=y.shift(),y.sort()),u=f.indexOf(":")<0&&"on"+f,(t=t[m.expando]?t:new m.Event(f,"object"==typeof t&&t)).isTrigger=r?2:3,t.namespace=y.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),i=null==i?[t]:m.makeArray(i,[t]),p=m.event.special[f]||{},r||!p.trigger||!1!==p.trigger.apply(n,i))){if(!r&&!p.noBubble&&!m.isWindow(n)){for(l=p.delegateType||f,X.test(l+f)||(a=a.parentNode);a;a=a.parentNode)g.push(a),o=a;o===(n.ownerDocument||d)&&g.push(o.defaultView||o.parentWindow||e)}for(s=0;(a=g[s++])&&!t.isPropagationStopped();)t.type=s>1?l:p.bindType||f,(c=(I.get(a,"events")||{})[t.type]&&I.get(a,"handle"))&&c.apply(a,i),(c=u&&a[u])&&c.apply&&m.acceptData(a)&&(t.result=c.apply(a,i),!1===t.result&&t.preventDefault());return t.type=f,r||t.isDefaultPrevented()||p._default&&!1!==p._default.apply(g.pop(),i)||!m.acceptData(n)||u&&m.isFunction(n[f])&&!m.isWindow(n)&&((o=n[u])&&(n[u]=null),m.event.triggered=f,n[f](),m.event.triggered=void 0,o&&(n[u]=o)),t.result}},dispatch:function(e){e=m.event.fix(e);var t,i,r,s,a,o=[],l=n.call(arguments),h=(I.get(this,"events")||{})[e.type]||[],u=m.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,e)){for(o=m.event.handlers.call(this,e,h),t=0;(s=o[t++])&&!e.isPropagationStopped();)for(e.currentTarget=s.elem,i=0;(a=s.handlers[i++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(a.namespace))&&(e.handleObj=a,e.data=a.data,void 0!==(r=((m.event.special[a.origType]||{}).handle||a.handler).apply(s.elem,l))&&!1===(e.result=r)&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,t){var i,n,r,s,a=[],o=t.delegateCount,l=e.target;if(o&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!==this;l=l.parentNode||this)if(!0!==l.disabled||"click"!==e.type){for(n=[],i=0;o>i;i++)void 0===n[r=(s=t[i]).selector+" "]&&(n[r]=s.needsContext?m(r,this).index(l)>=0:m.find(r,this,null,[l]).length),n[r]&&n.push(s);n.length&&a.push({elem:l,handlers:n})}return o<t.length&&a.push({elem:this,handlers:t.slice(o)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var i,n,r,s=t.button;return null==e.pageX&&null!=t.clientX&&(n=(i=e.target.ownerDocument||d).documentElement,r=i.body,e.pageX=t.clientX+(n&&n.scrollLeft||r&&r.scrollLeft||0)-(n&&n.clientLeft||r&&r.clientLeft||0),e.pageY=t.clientY+(n&&n.scrollTop||r&&r.scrollTop||0)-(n&&n.clientTop||r&&r.clientTop||0)),e.which||void 0===s||(e.which=1&s?1:2&s?3:4&s?2:0),e}},fix:function(e){if(e[m.expando])return e;var t,i,n,r=e.type,s=e,a=this.fixHooks[r];for(a||(this.fixHooks[r]=a=W.test(r)?this.mouseHooks:U.test(r)?this.keyHooks:{}),n=a.props?this.props.concat(a.props):this.props,e=new m.Event(s),t=n.length;t--;)e[i=n[t]]=s[i];return e.target||(e.target=d),3===e.target.nodeType&&(e.target=e.target.parentNode),a.filter?a.filter(e,s):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==Z()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===Z()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&m.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return m.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,i,n){var r=m.extend(new m.Event,i,{type:e,isSimulated:!0,originalEvent:{}});n?m.event.trigger(r,null,t):m.event.dispatch.call(t,r),r.isDefaultPrevented()&&i.preventDefault()}},m.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i,!1)},m.Event=function(e,t){return this instanceof m.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.getPreventDefault&&e.getPreventDefault()?Q:K):this.type=e,t&&m.extend(this,t),this.timeStamp=e&&e.timeStamp||m.now(),void(this[m.expando]=!0)):new m.Event(e,t)},m.Event.prototype={isDefaultPrevented:K,isPropagationStopped:K,isImmediatePropagationStopped:K,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Q,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Q,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Q,this.stopPropagation()}},m.each({mouseenter:"mouseover",mouseleave:"mouseout"},(function(e,t){m.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,r=e.relatedTarget,s=e.handleObj;return(!r||r!==n&&!m.contains(n,r))&&(e.type=s.origType,i=s.handler.apply(this,arguments),e.type=t),i}}})),c.focusinBubbles||m.each({focus:"focusin",blur:"focusout"},(function(e,t){var i=function(e){m.event.simulate(t,e.target,m.event.fix(e),!0)};m.event.special[t]={setup:function(){var n=this.ownerDocument||this,r=I.access(n,t);r||n.addEventListener(e,i,!0),I.access(n,t,(r||0)+1)},teardown:function(){var n=this.ownerDocument||this,r=I.access(n,t)-1;r?I.access(n,t,r):(n.removeEventListener(e,i,!0),I.remove(n,t))}}})),m.fn.extend({on:function(e,t,i,n,r){var s,a;if("object"==typeof e){for(a in"string"!=typeof t&&(i=i||t,t=void 0),e)this.on(a,t,i,e[a],r);return this}if(null==i&&null==n?(n=t,i=t=void 0):null==n&&("string"==typeof t?(n=i,i=void 0):(n=i,i=t,t=void 0)),!1===n)n=K;else if(!n)return this;return 1===r&&(s=n,(n=function(e){return m().off(e),s.apply(this,arguments)}).guid=s.guid||(s.guid=m.guid++)),this.each((function(){m.event.add(this,e,n,i,t)}))},one:function(e,t,i,n){return this.on(e,t,i,n,1)},off:function(e,t,i){var n,r;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,m(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return(!1===t||"function"==typeof t)&&(i=t,t=void 0),!1===i&&(i=K),this.each((function(){m.event.remove(this,e,i,t)}))},trigger:function(e,t){return this.each((function(){m.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var i=this[0];return i?m.event.trigger(e,t,i,!0):void 0}});var J=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,$=/<([\w:]+)/,ee=/<|&#?\w+;/,te=/<(?:script|style|link)/i,ie=/checked\s*(?:[^=]|=\s*.checked.)/i,ne=/^$|\/(?:java|ecma)script/i,re=/^true\/(.*)/,se=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ae={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function oe(e,t){return m.nodeName(e,"table")&&m.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function le(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function he(e){var t=re.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function ue(e,t){for(var i=0,n=e.length;n>i;i++)I.set(e[i],"globalEval",!t||I.get(t[i],"globalEval"))}function ce(e,t){var i,n,r,s,a,o,l,h;if(1===t.nodeType){if(I.hasData(e)&&(s=I.access(e),a=I.set(t,s),h=s.events))for(r in delete a.handle,a.events={},h)for(i=0,n=h[r].length;n>i;i++)m.event.add(t,r,h[r][i]);B.hasData(e)&&(o=B.access(e),l=m.extend({},o),B.set(t,l))}}function de(e,t){var i=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&m.nodeName(e,t)?m.merge([e],i):i}function pe(e,t){var i=t.nodeName.toLowerCase();"input"===i&&F.test(e.type)?t.checked=e.checked:("input"===i||"textarea"===i)&&(t.defaultValue=e.defaultValue)}ae.optgroup=ae.option,ae.tbody=ae.tfoot=ae.colgroup=ae.caption=ae.thead,ae.th=ae.td,m.extend({clone:function(e,t,i){var n,r,s,a,o=e.cloneNode(!0),l=m.contains(e.ownerDocument,e);if(!(c.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||m.isXMLDoc(e)))for(a=de(o),n=0,r=(s=de(e)).length;r>n;n++)pe(s[n],a[n]);if(t)if(i)for(s=s||de(e),a=a||de(o),n=0,r=s.length;r>n;n++)ce(s[n],a[n]);else ce(e,o);return(a=de(o,"script")).length>0&&ue(a,!l&&de(e,"script")),o},buildFragment:function(e,t,i,n){for(var r,s,a,o,l,h,u=t.createDocumentFragment(),c=[],d=0,p=e.length;p>d;d++)if((r=e[d])||0===r)if("object"===m.type(r))m.merge(c,r.nodeType?[r]:r);else if(ee.test(r)){for(s=s||u.appendChild(t.createElement("div")),a=($.exec(r)||["",""])[1].toLowerCase(),o=ae[a]||ae._default,s.innerHTML=o[1]+r.replace(J,"<$1></$2>")+o[2],h=o[0];h--;)s=s.lastChild;m.merge(c,s.childNodes),(s=u.firstChild).textContent=""}else c.push(t.createTextNode(r));for(u.textContent="",d=0;r=c[d++];)if((!n||-1===m.inArray(r,n))&&(l=m.contains(r.ownerDocument,r),s=de(u.appendChild(r),"script"),l&&ue(s),i))for(h=0;r=s[h++];)ne.test(r.type||"")&&i.push(r);return u},cleanData:function(e){for(var t,i,n,r,s,a,o=m.event.special,l=0;void 0!==(i=e[l]);l++){if(m.acceptData(i)&&((s=i[I.expando])&&(t=I.cache[s]))){if((n=Object.keys(t.events||{})).length)for(a=0;void 0!==(r=n[a]);a++)o[r]?m.event.remove(i,r):m.removeEvent(i,r,t.handle);I.cache[s]&&delete I.cache[s]}delete B.cache[i[B.expando]]}}}),m.fn.extend({text:function(e){return k(this,(function(e){return void 0===e?m.text(this):this.empty().each((function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return this.domManip(arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||oe(this,e).appendChild(e)}))},prepend:function(){return this.domManip(arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=oe(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return this.domManip(arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return this.domManip(arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},remove:function(e,t){for(var i,n=e?m.filter(e,this):this,r=0;null!=(i=n[r]);r++)t||1!==i.nodeType||m.cleanData(de(i)),i.parentNode&&(t&&m.contains(i.ownerDocument,i)&&ue(de(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(m.cleanData(de(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return m.clone(this,e,t)}))},html:function(e){return k(this,(function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!te.test(e)&&!ae[($.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(J,"<$1></$2>");try{for(;n>i;i++)1===(t=this[i]||{}).nodeType&&(m.cleanData(de(t,!1)),t.innerHTML=e);t=0}catch(r){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,(function(t){e=this.parentNode,m.cleanData(de(this)),e&&e.replaceChild(t,this)})),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=r.apply([],e);var i,n,s,a,o,l,h=0,u=this.length,d=this,p=u-1,g=e[0],f=m.isFunction(g);if(f||u>1&&"string"==typeof g&&!c.checkClone&&ie.test(g))return this.each((function(i){var n=d.eq(i);f&&(e[0]=g.call(this,i,n.html())),n.domManip(e,t)}));if(u&&(n=(i=m.buildFragment(e,this[0].ownerDocument,!1,this)).firstChild,1===i.childNodes.length&&(i=n),n)){for(a=(s=m.map(de(i,"script"),le)).length;u>h;h++)o=i,h!==p&&(o=m.clone(o,!0,!0),a&&m.merge(s,de(o,"script"))),t.call(this[h],o,h);if(a)for(l=s[s.length-1].ownerDocument,m.map(s,he),h=0;a>h;h++)o=s[h],ne.test(o.type||"")&&!I.access(o,"globalEval")&&m.contains(l,o)&&(o.src?m._evalUrl&&m._evalUrl(o.src):m.globalEval(o.textContent.replace(se,"")))}return this}}),m.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){m.fn[e]=function(e){for(var i,n=[],r=m(e),a=r.length-1,o=0;a>=o;o++)i=o===a?this:this.clone(!0),m(r[o])[t](i),s.apply(n,i.get());return this.pushStack(n)}}));var me,ge={};function fe(t,i){var n=m(i.createElement(t)).appendTo(i.body),r=e.getDefaultComputedStyle?e.getDefaultComputedStyle(n[0]).display:m.css(n[0],"display");return n.detach(),r}function ye(e){var t=d,i=ge[e];return i||("none"!==(i=fe(e,t))&&i||((t=(me=(me||m("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement))[0].contentDocument).write(),t.close(),i=fe(e,t),me.detach()),ge[e]=i),i}var Ee=/^margin/,ve=new RegExp("^("+Y+")(?!px)[a-z%]+$","i"),Ae=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)};function be(e,t,i){var n,r,s,a,o=e.style;return(i=i||Ae(e))&&(a=i.getPropertyValue(t)||i[t]),i&&(""!==a||m.contains(e.ownerDocument,e)||(a=m.style(e,t)),ve.test(a)&&Ee.test(t)&&(n=o.width,r=o.minWidth,s=o.maxWidth,o.minWidth=o.maxWidth=o.width=a,a=i.width,o.width=n,o.minWidth=r,o.maxWidth=s)),void 0!==a?a+"":a}function Se(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}!function(){var t,i,n=d.documentElement,r=d.createElement("div"),s=d.createElement("div");function a(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",n.appendChild(r);var a=e.getComputedStyle(s,null);t="1%"!==a.top,i="4px"===a.width,n.removeChild(r)}s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",c.clearCloneStyle="content-box"===s.style.backgroundClip,r.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",r.appendChild(s),e.getComputedStyle&&m.extend(c,{pixelPosition:function(){return a(),t},boxSizingReliable:function(){return null==i&&a(),i},reliableMarginRight:function(){var t,i=s.appendChild(d.createElement("div"));return i.style.cssText=s.style.cssText="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",i.style.marginRight=i.style.width="0",s.style.width="1px",n.appendChild(r),t=!parseFloat(e.getComputedStyle(i,null).marginRight),n.removeChild(r),s.innerHTML="",t}})}(),m.swap=function(e,t,i,n){var r,s,a={};for(s in t)a[s]=e.style[s],e.style[s]=t[s];for(s in r=i.apply(e,n||[]),t)e.style[s]=a[s];return r};var _e=/^(none|table(?!-c[ea]).+)/,xe=new RegExp("^("+Y+")(.*)$","i"),we=new RegExp("^([+-])=("+Y+")","i"),Te={position:"absolute",visibility:"hidden",display:"block"},Pe={letterSpacing:0,fontWeight:400},Ce=["Webkit","O","Moz","ms"];function Ve(e,t){if(t in e)return t;for(var i=t[0].toUpperCase()+t.slice(1),n=t,r=Ce.length;r--;)if((t=Ce[r]+i)in e)return t;return n}function Re(e,t,i){var n=xe.exec(t);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):t}function Ne(e,t,i,n,r){for(var s=i===(n?"border":"content")?4:"width"===t?1:0,a=0;4>s;s+=2)"margin"===i&&(a+=m.css(e,i+H[s],!0,r)),n?("content"===i&&(a-=m.css(e,"padding"+H[s],!0,r)),"margin"!==i&&(a-=m.css(e,"border"+H[s]+"Width",!0,r))):(a+=m.css(e,"padding"+H[s],!0,r),"padding"!==i&&(a+=m.css(e,"border"+H[s]+"Width",!0,r)));return a}function Me(e,t,i){var n=!0,r="width"===t?e.offsetWidth:e.offsetHeight,s=Ae(e),a="border-box"===m.css(e,"boxSizing",!1,s);if(0>=r||null==r){if((0>(r=be(e,t,s))||null==r)&&(r=e.style[t]),ve.test(r))return r;n=a&&(c.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+Ne(e,t,i||(a?"border":"content"),n,s)+"px"}function ke(e,t){for(var i,n,r,s=[],a=0,o=e.length;o>a;a++)(n=e[a]).style&&(s[a]=I.get(n,"olddisplay"),i=n.style.display,t?(s[a]||"none"!==i||(n.style.display=""),""===n.style.display&&G(n)&&(s[a]=I.access(n,"olddisplay",ye(n.nodeName)))):s[a]||(r=G(n),(i&&"none"!==i||!r)&&I.set(n,"olddisplay",r?i:m.css(n,"display"))));for(a=0;o>a;a++)(n=e[a]).style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?s[a]||"":"none"));return e}function Le(e,t,i,n,r){return new Le.prototype.init(e,t,i,n,r)}m.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=be(e,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,s,a,o=m.camelCase(t),l=e.style;return t=m.cssProps[o]||(m.cssProps[o]=Ve(l,o)),a=m.cssHooks[t]||m.cssHooks[o],void 0===i?a&&"get"in a&&void 0!==(r=a.get(e,!1,n))?r:l[t]:("string"===(s=typeof i)&&(r=we.exec(i))&&(i=(r[1]+1)*r[2]+parseFloat(m.css(e,t)),s="number"),void(null!=i&&i==i&&("number"!==s||m.cssNumber[o]||(i+="px"),c.clearCloneStyle||""!==i||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(i=a.set(e,i,n))||(l[t]="",l[t]=i))))}},css:function(e,t,i,n){var r,s,a,o=m.camelCase(t);return t=m.cssProps[o]||(m.cssProps[o]=Ve(e.style,o)),(a=m.cssHooks[t]||m.cssHooks[o])&&"get"in a&&(r=a.get(e,!0,i)),void 0===r&&(r=be(e,t,n)),"normal"===r&&t in Pe&&(r=Pe[t]),""===i||i?(s=parseFloat(r),!0===i||m.isNumeric(s)?s||0:r):r}}),m.each(["height","width"],(function(e,t){m.cssHooks[t]={get:function(e,i,n){return i?0===e.offsetWidth&&_e.test(m.css(e,"display"))?m.swap(e,Te,(function(){return Me(e,t,n)})):Me(e,t,n):void 0},set:function(e,i,n){var r=n&&Ae(e);return Re(0,i,n?Ne(e,t,n,"border-box"===m.css(e,"boxSizing",!1,r),r):0)}}})),m.cssHooks.marginRight=Se(c.reliableMarginRight,(function(e,t){return t?m.swap(e,{display:"inline-block"},be,[e,"marginRight"]):void 0})),m.each({margin:"",padding:"",border:"Width"},(function(e,t){m.cssHooks[e+t]={expand:function(i){for(var n=0,r={},s="string"==typeof i?i.split(" "):[i];4>n;n++)r[e+H[n]+t]=s[n]||s[n-2]||s[0];return r}},Ee.test(e)||(m.cssHooks[e+t].set=Re)})),m.fn.extend({css:function(e,t){return k(this,(function(e,t,i){var n,r,s={},a=0;if(m.isArray(t)){for(n=Ae(e),r=t.length;r>a;a++)s[t[a]]=m.css(e,t[a],!1,n);return s}return void 0!==i?m.style(e,t,i):m.css(e,t)}),e,t,arguments.length>1)},show:function(){return ke(this,!0)},hide:function(){return ke(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){G(this)?m(this).show():m(this).hide()}))}}),m.Tween=Le,Le.prototype={constructor:Le,init:function(e,t,i,n,r,s){this.elem=e,this.prop=i,this.easing=r||"swing",this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=s||(m.cssNumber[i]?"":"px")},cur:function(){var e=Le.propHooks[this.prop];return e&&e.get?e.get(this):Le.propHooks._default.get(this)},run:function(e){var t,i=Le.propHooks[this.prop];return this.pos=t=this.options.duration?m.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):Le.propHooks._default.set(this),this}},Le.prototype.init.prototype=Le.prototype,Le.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=m.css(e.elem,e.prop,""))&&"auto"!==t?t:0:e.elem[e.prop]},set:function(e){m.fx.step[e.prop]?m.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[m.cssProps[e.prop]]||m.cssHooks[e.prop])?m.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Le.propHooks.scrollTop=Le.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},m.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},m.fx=Le.prototype.init,m.fx.step={};var Ie,Be,De=/^(?:toggle|show|hide)$/,Oe=new RegExp("^(?:([+-])=|)("+Y+")([a-z%]*)$","i"),qe=/queueHooks$/,Ye=[function(e,t,i){var n,r,s,a,o,l,h,u=this,c={},d=e.style,p=e.nodeType&&G(e),g=I.get(e,"fxshow");for(n in i.queue||(null==(o=m._queueHooks(e,"fx")).unqueued&&(o.unqueued=0,l=o.empty.fire,o.empty.fire=function(){o.unqueued||l()}),o.unqueued++,u.always((function(){u.always((function(){o.unqueued--,m.queue(e,"fx").length||o.empty.fire()}))}))),1===e.nodeType&&("height"in t||"width"in t)&&(i.overflow=[d.overflow,d.overflowX,d.overflowY],"none"===(h=m.css(e,"display"))&&(h=ye(e.nodeName)),"inline"===h&&"none"===m.css(e,"float")&&(d.display="inline-block")),i.overflow&&(d.overflow="hidden",u.always((function(){d.overflow=i.overflow[0],d.overflowX=i.overflow[1],d.overflowY=i.overflow[2]}))),t)if(r=t[n],De.exec(r)){if(delete t[n],s=s||"toggle"===r,r===(p?"hide":"show")){if("show"!==r||!g||void 0===g[n])continue;p=!0}c[n]=g&&g[n]||m.style(e,n)}if(!m.isEmptyObject(c))for(n in g?"hidden"in g&&(p=g.hidden):g=I.access(e,"fxshow",{}),s&&(g.hidden=!p),p?m(e).show():u.done((function(){m(e).hide()})),u.done((function(){var t;for(t in I.remove(e,"fxshow"),c)m.style(e,t,c[t])})),c)a=ze(p?g[n]:0,n,u),n in g||(g[n]=a.start,p&&(a.end=a.start,a.start="width"===n||"height"===n?1:0))}],He={"*":[function(e,t){var i=this.createTween(e,t),n=i.cur(),r=Oe.exec(t),s=r&&r[3]||(m.cssNumber[e]?"":"px"),a=(m.cssNumber[e]||"px"!==s&&+n)&&Oe.exec(m.css(i.elem,e)),o=1,l=20;if(a&&a[3]!==s){s=s||a[3],r=r||[],a=+n||1;do{a/=o=o||".5",m.style(i.elem,e,a+s)}while(o!==(o=i.cur()/n)&&1!==o&&--l)}return r&&(a=i.start=+a||+n||0,i.unit=s,i.end=r[1]?a+(r[1]+1)*r[2]:+r[2]),i}]};function Ge(){return setTimeout((function(){Ie=void 0})),Ie=m.now()}function Fe(e,t){var i,n=0,r={height:e};for(t=t?1:0;4>n;n+=2-t)r["margin"+(i=H[n])]=r["padding"+i]=e;return t&&(r.opacity=r.width=e),r}function ze(e,t,i){for(var n,r=(He[t]||[]).concat(He["*"]),s=0,a=r.length;a>s;s++)if(n=r[s].call(i,t,e))return n}function Ue(e,t,i){var n,r,s=0,a=Ye.length,o=m.Deferred().always((function(){delete l.elem})),l=function(){if(r)return!1;for(var t=Ie||Ge(),i=Math.max(0,h.startTime+h.duration-t),n=1-(i/h.duration||0),s=0,a=h.tweens.length;a>s;s++)h.tweens[s].run(n);return o.notifyWith(e,[h,n,i]),1>n&&a?i:(o.resolveWith(e,[h]),!1)},h=o.promise({elem:e,props:m.extend({},t),opts:m.extend(!0,{specialEasing:{}},i),originalProperties:t,originalOptions:i,startTime:Ie||Ge(),duration:i.duration,tweens:[],createTween:function(t,i){var n=m.Tween(e,h.opts,t,i,h.opts.specialEasing[t]||h.opts.easing);return h.tweens.push(n),n},stop:function(t){var i=0,n=t?h.tweens.length:0;if(r)return this;for(r=!0;n>i;i++)h.tweens[i].run(1);return t?o.resolveWith(e,[h,t]):o.rejectWith(e,[h,t]),this}}),u=h.props;for(function(e,t){var i,n,r,s,a;for(i in e)if(r=t[n=m.camelCase(i)],s=e[i],m.isArray(s)&&(r=s[1],s=e[i]=s[0]),i!==n&&(e[n]=s,delete e[i]),(a=m.cssHooks[n])&&"expand"in a)for(i in s=a.expand(s),delete e[n],s)i in e||(e[i]=s[i],t[i]=r);else t[n]=r}(u,h.opts.specialEasing);a>s;s++)if(n=Ye[s].call(h,e,u,h.opts))return n;return m.map(u,ze,h),m.isFunction(h.opts.start)&&h.opts.start.call(e,h),m.fx.timer(m.extend(l,{elem:e,anim:h,queue:h.opts.queue})),h.progress(h.opts.progress).done(h.opts.done,h.opts.complete).fail(h.opts.fail).always(h.opts.always)}m.Animation=m.extend(Ue,{tweener:function(e,t){m.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var i,n=0,r=e.length;r>n;n++)i=e[n],He[i]=He[i]||[],He[i].unshift(t)},prefilter:function(e,t){t?Ye.unshift(e):Ye.push(e)}}),m.speed=function(e,t,i){var n=e&&"object"==typeof e?m.extend({},e):{complete:i||!i&&t||m.isFunction(e)&&e,duration:e,easing:i&&t||t&&!m.isFunction(t)&&t};return n.duration=m.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in m.fx.speeds?m.fx.speeds[n.duration]:m.fx.speeds._default,(null==n.queue||!0===n.queue)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){m.isFunction(n.old)&&n.old.call(this),n.queue&&m.dequeue(this,n.queue)},n},m.fn.extend({fadeTo:function(e,t,i,n){return this.filter(G).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var r=m.isEmptyObject(e),s=m.speed(t,i,n),a=function(){var t=Ue(this,m.extend({},e),s);(r||I.get(this,"finish"))&&t.stop(!0)};return a.finish=a,r||!1===s.queue?this.each(a):this.queue(s.queue,a)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each((function(){var t=!0,r=null!=e&&e+"queueHooks",s=m.timers,a=I.get(this);if(r)a[r]&&a[r].stop&&n(a[r]);else for(r in a)a[r]&&a[r].stop&&qe.test(r)&&n(a[r]);for(r=s.length;r--;)s[r].elem!==this||null!=e&&s[r].queue!==e||(s[r].anim.stop(i),t=!1,s.splice(r,1));(t||!i)&&m.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,i=I.get(this),n=i[e+"queue"],r=i[e+"queueHooks"],s=m.timers,a=n?n.length:0;for(i.finish=!0,m.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;a>t;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish}))}}),m.each(["toggle","show","hide"],(function(e,t){var i=m.fn[t];m.fn[t]=function(e,n,r){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(Fe(t,!0),e,n,r)}})),m.each({slideDown:Fe("show"),slideUp:Fe("hide"),slideToggle:Fe("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){m.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}})),m.timers=[],m.fx.tick=function(){var e,t=0,i=m.timers;for(Ie=m.now();t<i.length;t++)(e=i[t])()||i[t]!==e||i.splice(t--,1);i.length||m.fx.stop(),Ie=void 0},m.fx.timer=function(e){m.timers.push(e),e()?m.fx.start():m.timers.pop()},m.fx.interval=13,m.fx.start=function(){Be||(Be=setInterval(m.fx.tick,m.fx.interval))},m.fx.stop=function(){clearInterval(Be),Be=null},m.fx.speeds={slow:600,fast:200,_default:400},m.fn.delay=function(e,t){return e=m.fx&&m.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,i){var n=setTimeout(t,e);i.stop=function(){clearTimeout(n)}}))},function(){var e=d.createElement("input"),t=d.createElement("select"),i=t.appendChild(d.createElement("option"));e.type="checkbox",c.checkOn=""!==e.value,c.optSelected=i.selected,t.disabled=!0,c.optDisabled=!i.disabled,(e=d.createElement("input")).value="t",e.type="radio",c.radioValue="t"===e.value}();var We,Xe=m.expr.attrHandle;m.fn.extend({attr:function(e,t){return k(this,m.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){m.removeAttr(this,e)}))}}),m.extend({attr:function(e,t,i){var n,r,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return typeof e.getAttribute===z?m.prop(e,t,i):(1===s&&m.isXMLDoc(e)||(t=t.toLowerCase(),n=m.attrHooks[t]||(m.expr.match.bool.test(t)?We:void 0)),void 0===i?n&&"get"in n&&null!==(r=n.get(e,t))?r:null==(r=m.find.attr(e,t))?void 0:r:null!==i?n&&"set"in n&&void 0!==(r=n.set(e,i,t))?r:(e.setAttribute(t,i+""),i):void m.removeAttr(e,t))},removeAttr:function(e,t){var i,n,r=0,s=t&&t.match(R);if(s&&1===e.nodeType)for(;i=s[r++];)n=m.propFix[i]||i,m.expr.match.bool.test(i)&&(e[n]=!1),e.removeAttribute(i)},attrHooks:{type:{set:function(e,t){if(!c.radioValue&&"radio"===t&&m.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}}}),We={set:function(e,t,i){return!1===t?m.removeAttr(e,i):e.setAttribute(i,i),i}},m.each(m.expr.match.bool.source.match(/\w+/g),(function(e,t){var i=Xe[t]||m.find.attr;Xe[t]=function(e,t,n){var r,s;return n||(s=Xe[t],Xe[t]=r,r=null!=i(e,t,n)?t.toLowerCase():null,Xe[t]=s),r}}));var je=/^(?:input|select|textarea|button)$/i;m.fn.extend({prop:function(e,t){return k(this,m.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[m.propFix[e]||e]}))}}),m.extend({propFix:{for:"htmlFor",class:"className"},prop:function(e,t,i){var n,r,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return(1!==s||!m.isXMLDoc(e))&&(t=m.propFix[t]||t,r=m.propHooks[t]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(e,i,t))?n:e[t]=i:r&&"get"in r&&null!==(n=r.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||je.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),c.optSelected||(m.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),m.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){m.propFix[this.toLowerCase()]=this}));var Qe=/[\t\r\n\f]/g;m.fn.extend({addClass:function(e){var t,i,n,r,s,a,o="string"==typeof e&&e,l=0,h=this.length;if(m.isFunction(e))return this.each((function(t){m(this).addClass(e.call(this,t,this.className))}));if(o)for(t=(e||"").match(R)||[];h>l;l++)if(n=1===(i=this[l]).nodeType&&(i.className?(" "+i.className+" ").replace(Qe," "):" ")){for(s=0;r=t[s++];)n.indexOf(" "+r+" ")<0&&(n+=r+" ");a=m.trim(n),i.className!==a&&(i.className=a)}return this},removeClass:function(e){var t,i,n,r,s,a,o=0===arguments.length||"string"==typeof e&&e,l=0,h=this.length;if(m.isFunction(e))return this.each((function(t){m(this).removeClass(e.call(this,t,this.className))}));if(o)for(t=(e||"").match(R)||[];h>l;l++)if(n=1===(i=this[l]).nodeType&&(i.className?(" "+i.className+" ").replace(Qe," "):"")){for(s=0;r=t[s++];)for(;n.indexOf(" "+r+" ")>=0;)n=n.replace(" "+r+" "," ");a=e?m.trim(n):"",i.className!==a&&(i.className=a)}return this},toggleClass:function(e,t){var i=typeof e;return"boolean"==typeof t&&"string"===i?t?this.addClass(e):this.removeClass(e):this.each(m.isFunction(e)?function(i){m(this).toggleClass(e.call(this,i,this.className,t),t)}:function(){if("string"===i)for(var t,n=0,r=m(this),s=e.match(R)||[];t=s[n++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else(i===z||"boolean"===i)&&(this.className&&I.set(this,"__className__",this.className),this.className=this.className||!1===e?"":I.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(Qe," ").indexOf(t)>=0)return!0;return!1}});var Ke=/\r/g;m.fn.extend({val:function(e){var t,i,n,r=this[0];return arguments.length?(n=m.isFunction(e),this.each((function(i){var r;1===this.nodeType&&(null==(r=n?e.call(this,i,m(this).val()):e)?r="":"number"==typeof r?r+="":m.isArray(r)&&(r=m.map(r,(function(e){return null==e?"":e+""}))),(t=m.valHooks[this.type]||m.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))}))):r?(t=m.valHooks[r.type]||m.valHooks[r.nodeName.toLowerCase()])&&"get"in t&&void 0!==(i=t.get(r,"value"))?i:"string"==typeof(i=r.value)?i.replace(Ke,""):null==i?"":i:void 0}}),m.extend({valHooks:{select:{get:function(e){for(var t,i,n=e.options,r=e.selectedIndex,s="select-one"===e.type||0>r,a=s?null:[],o=s?r+1:n.length,l=0>r?o:s?r:0;o>l;l++)if(!(!(i=n[l]).selected&&l!==r||(c.optDisabled?i.disabled:null!==i.getAttribute("disabled"))||i.parentNode.disabled&&m.nodeName(i.parentNode,"optgroup"))){if(t=m(i).val(),s)return t;a.push(t)}return a},set:function(e,t){for(var i,n,r=e.options,s=m.makeArray(t),a=r.length;a--;)((n=r[a]).selected=m.inArray(m(n).val(),s)>=0)&&(i=!0);return i||(e.selectedIndex=-1),s}}}}),m.each(["radio","checkbox"],(function(){m.valHooks[this]={set:function(e,t){return m.isArray(t)?e.checked=m.inArray(m(e).val(),t)>=0:void 0}},c.checkOn||(m.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),m.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),(function(e,t){m.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}})),m.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}});var Ze=m.now(),Je=/\?/;m.parseJSON=function(e){return JSON.parse(e+"")},m.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new DOMParser).parseFromString(e,"text/xml")}catch(n){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&m.error("Invalid XML: "+e),t};var $e,et,tt=/#.*$/,it=/([?&])_=[^&]*/,nt=/^(.*?):[ \t]*([^\r\n]*)$/gm,rt=/^(?:GET|HEAD)$/,st=/^\/\//,at=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,ot={},lt={},ht="*/".concat("*");try{et=location.href}catch(Rt){(et=d.createElement("a")).href="",et=et.href}function ut(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,r=0,s=t.toLowerCase().match(R)||[];if(m.isFunction(i))for(;n=s[r++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function ct(e,t,i,n){var r={},s=e===lt;function a(o){var l;return r[o]=!0,m.each(e[o]||[],(function(e,o){var h=o(t,i,n);return"string"!=typeof h||s||r[h]?s?!(l=h):void 0:(t.dataTypes.unshift(h),a(h),!1)})),l}return a(t.dataTypes[0])||!r["*"]&&a("*")}function dt(e,t){var i,n,r=m.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((r[i]?e:n||(n={}))[i]=t[i]);return n&&m.extend(!0,e,n),e}$e=at.exec(et.toLowerCase())||[],m.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:et,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test($e[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ht,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":m.parseJSON,"text xml":m.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?dt(dt(e,m.ajaxSettings),t):dt(m.ajaxSettings,e)},ajaxPrefilter:ut(ot),ajaxTransport:ut(lt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var i,n,r,s,a,o,l,h,u=m.ajaxSetup({},t),c=u.context||u,d=u.context&&(c.nodeType||c.jquery)?m(c):m.event,p=m.Deferred(),g=m.Callbacks("once memory"),f=u.statusCode||{},y={},E={},v=0,A="canceled",b={readyState:0,getResponseHeader:function(e){var t;if(2===v){if(!s)for(s={};t=nt.exec(r);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===v?r:null},setRequestHeader:function(e,t){var i=e.toLowerCase();return v||(e=E[i]=E[i]||e,y[e]=t),this},overrideMimeType:function(e){return v||(u.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>v)for(t in e)f[t]=[f[t],e[t]];else b.always(e[b.status]);return this},abort:function(e){var t=e||A;return i&&i.abort(t),_(0,t),this}};if(p.promise(b).complete=g.add,b.success=b.done,b.error=b.fail,u.url=((e||u.url||et)+"").replace(tt,"").replace(st,$e[1]+"//"),u.type=t.method||t.type||u.method||u.type,u.dataTypes=m.trim(u.dataType||"*").toLowerCase().match(R)||[""],null==u.crossDomain&&(o=at.exec(u.url.toLowerCase()),u.crossDomain=!(!o||o[1]===$e[1]&&o[2]===$e[2]&&(o[3]||("http:"===o[1]?"80":"443"))===($e[3]||("http:"===$e[1]?"80":"443")))),u.data&&u.processData&&"string"!=typeof u.data&&(u.data=m.param(u.data,u.traditional)),ct(ot,u,t,b),2===v)return b;for(h in(l=u.global)&&0==m.active++&&m.event.trigger("ajaxStart"),u.type=u.type.toUpperCase(),u.hasContent=!rt.test(u.type),n=u.url,u.hasContent||(u.data&&(n=u.url+=(Je.test(n)?"&":"?")+u.data,delete u.data),!1===u.cache&&(u.url=it.test(n)?n.replace(it,"$1_="+Ze++):n+(Je.test(n)?"&":"?")+"_="+Ze++)),u.ifModified&&(m.lastModified[n]&&b.setRequestHeader("If-Modified-Since",m.lastModified[n]),m.etag[n]&&b.setRequestHeader("If-None-Match",m.etag[n])),(u.data&&u.hasContent&&!1!==u.contentType||t.contentType)&&b.setRequestHeader("Content-Type",u.contentType),b.setRequestHeader("Accept",u.dataTypes[0]&&u.accepts[u.dataTypes[0]]?u.accepts[u.dataTypes[0]]+("*"!==u.dataTypes[0]?", "+ht+"; q=0.01":""):u.accepts["*"]),u.headers)b.setRequestHeader(h,u.headers[h]);if(u.beforeSend&&(!1===u.beforeSend.call(c,b,u)||2===v))return b.abort();for(h in A="abort",{success:1,error:1,complete:1})b[h](u[h]);if(i=ct(lt,u,t,b)){b.readyState=1,l&&d.trigger("ajaxSend",[b,u]),u.async&&u.timeout>0&&(a=setTimeout((function(){b.abort("timeout")}),u.timeout));try{v=1,i.send(y,_)}catch(S){if(!(2>v))throw S;_(-1,S)}}else _(-1,"No Transport");function _(e,t,s,o){var h,y,E,A,S,_=t;2!==v&&(v=2,a&&clearTimeout(a),i=void 0,r=o||"",b.readyState=e>0?4:0,h=e>=200&&300>e||304===e,s&&(A=function(e,t,i){for(var n,r,s,a,o=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(r in o)if(o[r]&&o[r].test(n)){l.unshift(r);break}if(l[0]in i)s=l[0];else{for(r in i){if(!l[0]||e.converters[r+" "+l[0]]){s=r;break}a||(a=r)}s=s||a}return s?(s!==l[0]&&l.unshift(s),i[s]):void 0}(u,b,s)),A=function(e,t,i,n){var r,s,a,o,l,h={},u=e.dataTypes.slice();if(u[1])for(a in e.converters)h[a.toLowerCase()]=e.converters[a];for(s=u.shift();s;)if(e.responseFields[s]&&(i[e.responseFields[s]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=s,s=u.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(!(a=h[l+" "+s]||h["* "+s]))for(r in h)if((o=r.split(" "))[1]===s&&(a=h[l+" "+o[0]]||h["* "+o[0]])){!0===a?a=h[r]:!0!==h[r]&&(s=o[0],u.unshift(o[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(c){return{state:"parsererror",error:a?c:"No conversion from "+l+" to "+s}}}return{state:"success",data:t}}(u,A,b,h),h?(u.ifModified&&((S=b.getResponseHeader("Last-Modified"))&&(m.lastModified[n]=S),(S=b.getResponseHeader("etag"))&&(m.etag[n]=S)),204===e||"HEAD"===u.type?_="nocontent":304===e?_="notmodified":(_=A.state,y=A.data,h=!(E=A.error))):(E=_,(e||!_)&&(_="error",0>e&&(e=0))),b.status=e,b.statusText=(t||_)+"",h?p.resolveWith(c,[y,_,b]):p.rejectWith(c,[b,_,E]),b.statusCode(f),f=void 0,l&&d.trigger(h?"ajaxSuccess":"ajaxError",[b,u,h?y:E]),g.fireWith(c,[b,_]),l&&(d.trigger("ajaxComplete",[b,u]),--m.active||m.event.trigger("ajaxStop")))}return b},getJSON:function(e,t,i){return m.get(e,t,i,"json")},getScript:function(e,t){return m.get(e,void 0,t,"script")}}),m.each(["get","post"],(function(e,t){m[t]=function(e,i,n,r){return m.isFunction(i)&&(r=r||n,n=i,i=void 0),m.ajax({url:e,type:t,dataType:r,data:i,success:n})}})),m.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){m.fn[t]=function(e){return this.on(t,e)}})),m._evalUrl=function(e){return m.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},m.fn.extend({wrapAll:function(e){var t;return m.isFunction(e)?this.each((function(t){m(this).wrapAll(e.call(this,t))})):(this[0]&&(t=m(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this)},wrapInner:function(e){return this.each(m.isFunction(e)?function(t){m(this).wrapInner(e.call(this,t))}:function(){var t=m(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=m.isFunction(e);return this.each((function(i){m(this).wrapAll(t?e.call(this,i):e)}))},unwrap:function(){return this.parent().each((function(){m.nodeName(this,"body")||m(this).replaceWith(this.childNodes)})).end()}}),m.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},m.expr.filters.visible=function(e){return!m.expr.filters.hidden(e)};var pt=/%20/g,mt=/\[\]$/,gt=/\r?\n/g,ft=/^(?:submit|button|image|reset|file)$/i,yt=/^(?:input|select|textarea|keygen)/i;function Et(e,t,i,n){var r;if(m.isArray(t))m.each(t,(function(t,r){i||mt.test(e)?n(e,r):Et(e+"["+("object"==typeof r?t:"")+"]",r,i,n)}));else if(i||"object"!==m.type(t))n(e,t);else for(r in t)Et(e+"["+r+"]",t[r],i,n)}m.param=function(e,t){var i,n=[],r=function(e,t){t=m.isFunction(t)?t():null==t?"":t,n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=m.ajaxSettings&&m.ajaxSettings.traditional),m.isArray(e)||e.jquery&&!m.isPlainObject(e))m.each(e,(function(){r(this.name,this.value)}));else for(i in e)Et(i,e[i],t,r);return n.join("&").replace(pt,"+")},m.fn.extend({serialize:function(){return m.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=m.prop(this,"elements");return e?m.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!m(this).is(":disabled")&&yt.test(this.nodeName)&&!ft.test(e)&&(this.checked||!F.test(e))})).map((function(e,t){var i=m(this).val();return null==i?null:m.isArray(i)?m.map(i,(function(e){return{name:t.name,value:e.replace(gt,"\r\n")}})):{name:t.name,value:i.replace(gt,"\r\n")}})).get()}}),m.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var vt=0,At={},bt={0:200,1223:204},St=m.ajaxSettings.xhr();e.ActiveXObject&&m(e).on("unload",(function(){for(var e in At)At[e]()})),c.cors=!!St&&"withCredentials"in St,c.ajax=St=!!St,m.ajaxTransport((function(e){var t;return c.cors||St&&!e.crossDomain?{send:function(i,n){var r,s=e.xhr(),a=++vt;if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(r in e.xhrFields)s[r]=e.xhrFields[r];for(r in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)s.setRequestHeader(r,i[r]);t=function(e){return function(){t&&(delete At[a],t=s.onload=s.onerror=null,"abort"===e?s.abort():"error"===e?n(s.status,s.statusText):n(bt[s.status]||s.status,s.statusText,"string"==typeof s.responseText?{text:s.responseText}:void 0,s.getAllResponseHeaders()))}},s.onload=t(),s.onerror=t("error"),t=At[a]=t("abort"),s.send(e.hasContent&&e.data||null)},abort:function(){t&&t()}}:void 0})),m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return m.globalEval(e),e}}}),m.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),m.ajaxTransport("script",(function(e){var t,i;if(e.crossDomain)return{send:function(n,r){t=m("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove(),i=null,e&&r("error"===e.type?404:200,e.type)}),d.head.appendChild(t[0])},abort:function(){i&&i()}}}));var _t=[],xt=/(=)\?(?=&|$)|\?\?/;m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=_t.pop()||m.expando+"_"+Ze++;return this[e]=!0,e}}),m.ajaxPrefilter("json jsonp",(function(t,i,n){var r,s,a,o=!1!==t.jsonp&&(xt.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&xt.test(t.data)&&"data");return o||"jsonp"===t.dataTypes[0]?(r=t.jsonpCallback=m.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,o?t[o]=t[o].replace(xt,"$1"+r):!1!==t.jsonp&&(t.url+=(Je.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return a||m.error(r+" was not called"),a[0]},t.dataTypes[0]="json",s=e[r],e[r]=function(){a=arguments},n.always((function(){e[r]=s,t[r]&&(t.jsonpCallback=i.jsonpCallback,_t.push(r)),a&&m.isFunction(s)&&s(a[0]),a=s=void 0})),"script"):void 0})),m.parseHTML=function(e,t,i){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(i=t,t=!1),t=t||d;var n=b.exec(e),r=!i&&[];return n?[t.createElement(n[1])]:(n=m.buildFragment([e],t,r),r&&r.length&&m(r).remove(),m.merge([],n.childNodes))};var wt=m.fn.load;m.fn.load=function(e,t,i){if("string"!=typeof e&&wt)return wt.apply(this,arguments);var n,r,s,a=this,o=e.indexOf(" ");return o>=0&&(n=e.slice(o),e=e.slice(0,o)),m.isFunction(t)?(i=t,t=void 0):t&&"object"==typeof t&&(r="POST"),a.length>0&&m.ajax({url:e,type:r,dataType:"html",data:t}).done((function(e){s=arguments,a.html(n?m("<div>").append(m.parseHTML(e)).find(n):e)})).complete(i&&function(e,t){a.each(i,s||[e.responseText,t,e])}),this},m.expr.filters.animated=function(e){return m.grep(m.timers,(function(t){return e===t.elem})).length};var Tt=e.document.documentElement;function Pt(e){return m.isWindow(e)?e:9===e.nodeType&&e.defaultView}m.offset={setOffset:function(e,t,i){var n,r,s,a,o,l,h=m.css(e,"position"),u=m(e),c={};"static"===h&&(e.style.position="relative"),o=u.offset(),s=m.css(e,"top"),l=m.css(e,"left"),("absolute"===h||"fixed"===h)&&(s+l).indexOf("auto")>-1?(a=(n=u.position()).top,r=n.left):(a=parseFloat(s)||0,r=parseFloat(l)||0),m.isFunction(t)&&(t=t.call(e,i,o)),null!=t.top&&(c.top=t.top-o.top+a),null!=t.left&&(c.left=t.left-o.left+r),"using"in t?t.using.call(e,c):u.css(c)}},m.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){m.offset.setOffset(this,e,t)}));var t,i,n=this[0],r={top:0,left:0},s=n&&n.ownerDocument;return s?(t=s.documentElement,m.contains(t,n)?(typeof n.getBoundingClientRect!==z&&(r=n.getBoundingClientRect()),i=Pt(s),{top:r.top+i.pageYOffset-t.clientTop,left:r.left+i.pageXOffset-t.clientLeft}):r):void 0},position:function(){if(this[0]){var e,t,i=this[0],n={top:0,left:0};return"fixed"===m.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),m.nodeName(e[0],"html")||(n=e.offset()),n.top+=m.css(e[0],"borderTopWidth",!0),n.left+=m.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-m.css(i,"marginTop",!0),left:t.left-n.left-m.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent||Tt;e&&!m.nodeName(e,"html")&&"static"===m.css(e,"position");)e=e.offsetParent;return e||Tt}))}}),m.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,i){var n="pageYOffset"===i;m.fn[t]=function(r){return k(this,(function(t,r,s){var a=Pt(t);return void 0===s?a?a[i]:t[r]:void(a?a.scrollTo(n?e.pageXOffset:s,n?s:e.pageYOffset):t[r]=s)}),t,r,arguments.length,null)}})),m.each(["top","left"],(function(e,t){m.cssHooks[t]=Se(c.pixelPosition,(function(e,i){return i?(i=be(e,t),ve.test(i)?m(e).position()[t]+"px":i):void 0}))})),m.each({Height:"height",Width:"width"},(function(e,t){m.each({padding:"inner"+e,content:t,"":"outer"+e},(function(i,n){m.fn[n]=function(n,r){var s=arguments.length&&(i||"boolean"!=typeof n),a=i||(!0===n||!0===r?"margin":"border");return k(this,(function(t,i,n){var r;return m.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===n?m.css(t,i,a):m.style(t,i,n,a)}),t,s?n:void 0,s,null)}}))})),m.fn.size=function(){return this.length},m.fn.andSelf=m.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],(function(){return m}));var Ct=e.jQuery,Vt=e.$;return m.noConflict=function(t){return e.$===m&&(e.$=Vt),t&&e.jQuery===m&&(e.jQuery=Ct),m},typeof t===z&&(e.jQuery=e.$=m),m})),function(){function e(e,t){return e.set(t[0],t[1]),e}function t(e,t){return e.add(t),e}function i(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}function n(e,t,i,n){for(var r=-1,s=null==e?0:e.length;++r<s;){var a=e[r];t(n,a,i(a),e)}return n}function r(e,t){for(var i=-1,n=null==e?0:e.length;++i<n&&!1!==t(e[i],i,e););return e}function s(e,t){for(var i=null==e?0:e.length;i--&&!1!==t(e[i],i,e););return e}function a(e,t){for(var i=-1,n=null==e?0:e.length;++i<n;)if(!t(e[i],i,e))return!1;return!0}function o(e,t){for(var i=-1,n=null==e?0:e.length,r=0,s=[];++i<n;){var a=e[i];t(a,i,e)&&(s[r++]=a)}return s}function l(e,t){return!(null==e||!e.length)&&-1<y(e,t,0)}function h(e,t,i){for(var n=-1,r=null==e?0:e.length;++n<r;)if(i(t,e[n]))return!0;return!1}function u(e,t){for(var i=-1,n=null==e?0:e.length,r=Array(n);++i<n;)r[i]=t(e[i],i,e);return r}function c(e,t){for(var i=-1,n=t.length,r=e.length;++i<n;)e[r+i]=t[i];return e}function d(e,t,i,n){var r=-1,s=null==e?0:e.length;for(n&&s&&(i=e[++r]);++r<s;)i=t(i,e[r],r,e);return i}function p(e,t,i,n){var r=null==e?0:e.length;for(n&&r&&(i=e[--r]);r--;)i=t(i,e[r],r,e);return i}function m(e,t){for(var i=-1,n=null==e?0:e.length;++i<n;)if(t(e[i],i,e))return!0;return!1}function g(e,t,i){var n;return i(e,(function(e,i,r){if(t(e,i,r))return n=i,!1})),n}function f(e,t,i,n){var r=e.length;for(i+=n?1:-1;n?i--:++i<r;)if(t(e[i],i,e))return i;return-1}function y(e,t,i){if(t==t)e:{--i;for(var n=e.length;++i<n;)if(e[i]===t){e=i;break e}e=-1}else e=f(e,v,i);return e}function E(e,t,i,n){--i;for(var r=e.length;++i<r;)if(n(e[i],t))return i;return-1}function v(e){return e!=e}function A(e,t){var i=null==e?0:e.length;return i?x(e,t)/i:Y}function b(e){return function(t){return null==t?O:t[e]}}function S(e){return function(t){return null==e?O:e[t]}}function _(e,t,i,n,r){return r(e,(function(e,r,s){i=n?(n=!1,e):t(i,e,r,s)})),i}function x(e,t){for(var i,n=-1,r=e.length;++n<r;){var s=t(e[n]);s!==O&&(i=i===O?s:i+s)}return i}function w(e,t){for(var i=-1,n=Array(e);++i<e;)n[i]=t(i);return n}function T(e){return function(t){return e(t)}}function P(e,t){return u(t,(function(t){return e[t]}))}function C(e,t){return e.has(t)}function V(e,t){for(var i=-1,n=e.length;++i<n&&-1<y(t,e[i],0););return i}function R(e,t){for(var i=e.length;i--&&-1<y(t,e[i],0););return i}function N(e){return"\\"+Le[e]}function M(e){var t=-1,i=Array(e.size);return e.forEach((function(e,n){i[++t]=[n,e]})),i}function k(e,t){return function(i){return e(t(i))}}function L(e,t){for(var i=-1,n=e.length,r=0,s=[];++i<n;){var a=e[i];a!==t&&"__lodash_placeholder__"!==a||(e[i]="__lodash_placeholder__",s[r++]=i)}return s}function I(e){var t=-1,i=Array(e.size);return e.forEach((function(e){i[++t]=e})),i}function B(e){if(Ce.test(e)){for(var t=Te.lastIndex=0;Te.test(e);)++t;e=t}else e=Ke(e);return e}function D(e){return Ce.test(e)?e.match(Te)||[]:e.split("")}var O,q=1/0,Y=NaN,H=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],G=/\b__p\+='';/g,F=/\b(__p\+=)''\+/g,z=/(__e\(.*?\)|\b__t\))\+'';/g,U=/&(?:amp|lt|gt|quot|#39);/g,W=/[&<>"']/g,X=RegExp(U.source),j=RegExp(W.source),Q=/<%-([\s\S]+?)%>/g,K=/<%([\s\S]+?)%>/g,Z=/<%=([\s\S]+?)%>/g,J=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$=/^\w*$/,ee=/^\./,te=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ie=/[\\^$.*+?()[\]{}|]/g,ne=RegExp(ie.source),re=/^\s+|\s+$/g,se=/^\s+/,ae=/\s+$/,oe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,le=/\{\n\/\* \[wrapped with (.+)\] \*/,he=/,? & /,ue=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ce=/\\(\\)?/g,de=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,pe=/\w*$/,me=/^[-+]0x[0-9a-f]+$/i,ge=/^0b[01]+$/i,fe=/^\[object .+?Constructor\]$/,ye=/^0o[0-7]+$/i,Ee=/^(?:0|[1-9]\d*)$/,ve=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ae=/($^)/,be=/['\n\r\u2028\u2029\\]/g,Se="[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?(?:\\u200d(?:[^\\ud800-\\udfff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?)*",_e="(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])"+Se,xe=RegExp("['’]","g"),we=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g"),Te=RegExp("\\ud83c[\\udffb-\\udfff](?=\\ud83c[\\udffb-\\udfff])|(?:[^\\ud800-\\udfff][\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]?|[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff])"+Se,"g"),Pe=RegExp(["[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+(?:['’](?:d|ll|m|re|s|t|ve))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde]|$)|(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde](?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])|$)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?(?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:d|ll|m|re|s|t|ve))?|[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?:['’](?:D|LL|M|RE|S|T|VE))?|\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)|\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)|\\d+",_e].join("|"),"g"),Ce=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),Ve=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Re="Array Buffer DataView Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Math Object Promise RegExp Set String Symbol TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap _ clearTimeout isFinite parseInt setTimeout".split(" "),Ne={};Ne["[object Float32Array]"]=Ne["[object Float64Array]"]=Ne["[object Int8Array]"]=Ne["[object Int16Array]"]=Ne["[object Int32Array]"]=Ne["[object Uint8Array]"]=Ne["[object Uint8ClampedArray]"]=Ne["[object Uint16Array]"]=Ne["[object Uint32Array]"]=!0,Ne["[object Arguments]"]=Ne["[object Array]"]=Ne["[object ArrayBuffer]"]=Ne["[object Boolean]"]=Ne["[object DataView]"]=Ne["[object Date]"]=Ne["[object Error]"]=Ne["[object Function]"]=Ne["[object Map]"]=Ne["[object Number]"]=Ne["[object Object]"]=Ne["[object RegExp]"]=Ne["[object Set]"]=Ne["[object String]"]=Ne["[object WeakMap]"]=!1;var Me={};Me["[object Arguments]"]=Me["[object Array]"]=Me["[object ArrayBuffer]"]=Me["[object DataView]"]=Me["[object Boolean]"]=Me["[object Date]"]=Me["[object Float32Array]"]=Me["[object Float64Array]"]=Me["[object Int8Array]"]=Me["[object Int16Array]"]=Me["[object Int32Array]"]=Me["[object Map]"]=Me["[object Number]"]=Me["[object Object]"]=Me["[object RegExp]"]=Me["[object Set]"]=Me["[object String]"]=Me["[object Symbol]"]=Me["[object Uint8Array]"]=Me["[object Uint8ClampedArray]"]=Me["[object Uint16Array]"]=Me["[object Uint32Array]"]=!0,Me["[object Error]"]=Me["[object Function]"]=Me["[object WeakMap]"]=!1;var ke,Le={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ie=parseFloat,Be=parseInt,De="object"==typeof global&&global&&global.Object===Object&&global,Oe="object"==typeof self&&self&&self.Object===Object&&self,qe=De||Oe||Function("return this")(),Ye="object"==typeof exports&&exports&&!exports.nodeType&&exports,He=Ye&&"object"==typeof module&&module&&!module.nodeType&&module,Ge=He&&He.exports===Ye,Fe=Ge&&De.process;e:{try{ke=Fe&&Fe.binding&&Fe.binding("util");break e}catch(e){}ke=void 0}var ze=ke&&ke.isArrayBuffer,Ue=ke&&ke.isDate,We=ke&&ke.isMap,Xe=ke&&ke.isRegExp,je=ke&&ke.isSet,Qe=ke&&ke.isTypedArray,Ke=b("length"),Ze=S({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Je=S({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),$e=S({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),et=function S(Se){function _e(e){if(Jn(e)&&!qa(e)&&!(e instanceof Le)){if(e instanceof ke)return e;if(Yr.call(e,"__wrapped__"))return xn(e)}return new ke(e)}function Te(){}function ke(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=O}function Le(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function De(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function Oe(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function Ye(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function He(e){var t=-1,i=null==e?0:e.length;for(this.__data__=new Ye;++t<i;)this.add(e[t])}function Fe(e){this.size=(this.__data__=new Oe(e)).size}function Ke(e,t){var i,n=qa(e),r=!n&&Oa(e),s=!n&&!r&&Ha(e),a=!n&&!r&&!s&&Wa(e),o=(r=(n=n||r||s||a)?w(e.length,Lr):[]).length;for(i in e)!t&&!Yr.call(e,i)||n&&("length"==i||s&&("offset"==i||"parent"==i)||a&&("buffer"==i||"byteLength"==i||"byteOffset"==i)||cn(i,o))||r.push(i);return r}function tt(e){var t=e.length;return t?e[Xt(0,t-1)]:O}function it(e,t){return An(_i(e),ct(t,0,e.length))}function nt(e){return An(_i(e))}function rt(e,t,i){(i===O||zn(e[t],i))&&(i!==O||t in e)||ht(e,t,i)}function st(e,t,i){var n=e[t];Yr.call(e,t)&&zn(n,i)&&(i!==O||t in e)||ht(e,t,i)}function at(e,t){for(var i=e.length;i--;)if(zn(e[i][0],t))return i;return-1}function ot(e,t,i,n){return Os(e,(function(e,r,s){t(n,e,i(e),s)})),n}function lt(e,t){return e&&xi(t,dr(t),e)}function ht(e,t,i){"__proto__"==t&&rs?rs(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}function ut(e,t){for(var i=-1,n=t.length,r=Pr(n),s=null==e;++i<n;)r[i]=s?O:ur(e,t[i]);return r}function ct(e,t,i){return e==e&&(i!==O&&(e=e<=i?e:i),t!==O&&(e=e>=t?e:t)),e}function dt(e,t,i,n,s,a){var o,l=1&t,h=2&t,u=4&t;if(i&&(o=s?i(e,n,s,a):i(e)),o!==O)return o;if(!Zn(e))return e;if(n=qa(e)){if(o=function(e){var t=e.length,i=e.constructor(t);return t&&"string"==typeof e[0]&&Yr.call(e,"index")&&(i.index=e.index,i.input=e.input),i}(e),!l)return _i(e,o)}else{var c=Qs(e),d="[object Function]"==c||"[object GeneratorFunction]"==c;if(Ha(e))return yi(e,l);if("[object Object]"==c||"[object Arguments]"==c||d&&!s){if(o=h||d?{}:ln(e),!l)return h?function(e,t){return xi(e,js(e),t)}(e,function(e,t){return e&&xi(t,pr(t),e)}(o,e)):function(e,t){return xi(e,Xs(e),t)}(e,lt(o,e))}else{if(!Me[c])return s?e:{};o=hn(e,c,dt,l)}}if(a||(a=new Fe),s=a.get(e))return s;a.set(e,o);h=u?h?$i:Ji:h?pr:dr;var p=n?O:h(e);return r(p||e,(function(n,r){p&&(n=e[r=n]),st(o,r,dt(n,t,i,r,e,a))})),o}function pt(e,t,i){var n=i.length;if(null==e)return!n;for(e=Mr(e);n--;){var r=i[n],s=t[r],a=e[r];if(a===O&&!(r in e)||!s(a))return!1}return!0}function mt(e,t,i){if("function"!=typeof e)throw new Ir("Expected a function");return Js((function(){e.apply(O,i)}),t)}function gt(e,t,i,n){var r=-1,s=l,a=!0,o=e.length,c=[],d=t.length;if(!o)return c;i&&(t=u(t,T(i))),n?(s=h,a=!1):200<=t.length&&(s=C,a=!1,t=new He(t));e:for(;++r<o;){var p=e[r],m=null==i?p:i(p);p=n||0!==p?p:0;if(a&&m==m){for(var g=d;g--;)if(t[g]===m)continue e;c.push(p)}else s(t,m,n)||c.push(p)}return c}function ft(e,t){var i=!0;return Os(e,(function(e,n,r){return i=!!t(e,n,r)})),i}function yt(e,t,i){for(var n=-1,r=e.length;++n<r;){var s=e[n],a=t(s);if(null!=a&&(o===O?a==a&&!ir(a):i(a,o)))var o=a,l=s}return l}function Et(e,t){var i=[];return Os(e,(function(e,n,r){t(e,n,r)&&i.push(e)})),i}function vt(e,t,i,n,r){var s=-1,a=e.length;for(i||(i=un),r||(r=[]);++s<a;){var o=e[s];0<t&&i(o)?1<t?vt(o,t-1,i,n,r):c(r,o):n||(r[r.length]=o)}return r}function At(e,t){return e&&Ys(e,t,dr)}function bt(e,t){return e&&Hs(e,t,dr)}function St(e,t){return o(t,(function(t){return jn(e[t])}))}function _t(e,t){for(var i=0,n=(t=gi(t,e)).length;null!=e&&i<n;)e=e[bn(t[i++])];return i&&i==n?e:O}function xt(e,t,i){return t=t(e),qa(e)?t:c(t,i(e))}function wt(e){if(null==e)e=e===O?"[object Undefined]":"[object Null]";else if(ns&&ns in Mr(e)){var t=Yr.call(e,ns),i=e[ns];try{e[ns]=O;var n=!0}catch(e){}var r=Fr.call(e);n&&(t?e[ns]=i:delete e[ns]),e=r}else e=Fr.call(e);return e}function Tt(e,t){return e>t}function Pt(e,t){return null!=e&&Yr.call(e,t)}function Ct(e,t){return null!=e&&t in Mr(e)}function Vt(e,t,i){for(var n=i?h:l,r=e[0].length,s=e.length,a=s,o=Pr(s),c=1/0,d=[];a--;){var p=e[a];a&&t&&(p=u(p,T(t))),c=fs(p.length,c),o[a]=!i&&(t||120<=r&&120<=p.length)?new He(a&&p):O}p=e[0];var m=-1,g=o[0];e:for(;++m<r&&d.length<c;){var f=p[m],y=t?t(f):f;f=i||0!==f?f:0;if(g?!C(g,y):!n(d,y,i)){for(a=s;--a;){var E=o[a];if(E?!C(E,y):!n(e[a],y,i))continue e}g&&g.push(y),d.push(f)}}return d}function Rt(e,t,n){return null==(t=null==(e=2>(t=gi(t,e)).length?e:_t(e,ei(t,0,-1)))?e:e[bn(Vn(t))])?O:i(t,e,n)}function Nt(e){return Jn(e)&&"[object Arguments]"==wt(e)}function Mt(e,t,i,n,r){if(e===t)t=!0;else if(null==e||null==t||!Jn(e)&&!Jn(t))t=e!=e&&t!=t;else e:{var s,a,o=qa(e),l=qa(t),h="[object Object]"==(s="[object Arguments]"==(s=o?"[object Array]":Qs(e))?"[object Object]":s);l="[object Object]"==(a="[object Arguments]"==(a=l?"[object Array]":Qs(t))?"[object Object]":a);if((a=s==a)&&Ha(e)){if(!Ha(t)){t=!1;break e}o=!0,h=!1}if(a&&!h)r||(r=new Fe),t=o||Wa(e)?Ki(e,t,i,n,Mt,r):function(e,t,i,n,r,s,a){switch(i){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":if(e.byteLength!=t.byteLength||!s(new Qr(e),new Qr(t)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return zn(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var o=M;case"[object Set]":if(o||(o=I),e.size!=t.size&&!(1&n))break;return(i=a.get(e))?i==t:(n|=2,a.set(e,t),t=Ki(o(e),o(t),n,r,s,a),a.delete(e),t);case"[object Symbol]":if(Is)return Is.call(e)==Is.call(t)}return!1}(e,t,s,i,n,Mt,r);else{if(!(1&i)&&(o=h&&Yr.call(e,"__wrapped__"),s=l&&Yr.call(t,"__wrapped__"),o||s)){e=o?e.value():e,t=s?t.value():t,r||(r=new Fe),t=Mt(e,t,i,n,r);break e}if(a)t:if(r||(r=new Fe),o=1&i,s=Ji(e),l=s.length,a=Ji(t).length,l==a||o){for(h=l;h--;){var u=s[h];if(!(o?u in t:Yr.call(t,u))){t=!1;break t}}if((a=r.get(e))&&r.get(t))t=a==t;else{a=!0,r.set(e,t),r.set(t,e);for(var c=o;++h<l;){var d=e[u=s[h]],p=t[u];if(n)var m=o?n(p,d,u,t,e,r):n(d,p,u,e,t,r);if(m===O?d!==p&&!Mt(d,p,i,n,r):!m){a=!1;break}c||(c="constructor"==u)}a&&!c&&((i=e.constructor)!=(n=t.constructor)&&"constructor"in e&&"constructor"in t&&!("function"==typeof i&&i instanceof i&&"function"==typeof n&&n instanceof n)&&(a=!1)),r.delete(e),r.delete(t),t=a}}else t=!1;else t=!1}}return t}function kt(e,t,i,n){var r=i.length,s=r,a=!n;if(null==e)return!s;for(e=Mr(e);r--;){var o=i[r];if(a&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++r<s;){var l=(o=i[r])[0],h=e[l],u=o[1];if(a&&o[2]){if(h===O&&!(l in e))return!1}else{if(o=new Fe,n)var c=n(h,u,l,e,t,o);if(c===O?!Mt(u,h,3,n,o):!c)return!1}}return!0}function Lt(e){return!(!Zn(e)||Gr&&Gr in e)&&(jn(e)?Wr:fe).test(Sn(e))}function It(e){return"function"==typeof e?e:null==e?Ar:"object"==typeof e?qa(e)?Yt(e[0],e[1]):qt(e):xr(e)}function Bt(e){if(!gn(e))return ms(e);var t,i=[];for(t in Mr(e))Yr.call(e,t)&&"constructor"!=t&&i.push(t);return i}function Dt(e,t){return e<t}function Ot(e,t){var i=-1,n=Un(e)?Pr(e.length):[];return Os(e,(function(e,r,s){n[++i]=t(e,r,s)})),n}function qt(e){var t=sn(e);return 1==t.length&&t[0][2]?fn(t[0][0],t[0][1]):function(i){return i===e||kt(i,e,t)}}function Yt(e,t){return pn(e)&&t==t&&!Zn(t)?fn(bn(e),t):function(i){var n=ur(i,e);return n===O&&n===t?cr(i,e):Mt(t,n,3)}}function Ht(e,t,i,n,r){e!==t&&Ys(t,(function(s,a){if(Zn(s)){r||(r=new Fe);var o=r,l=e[a],h=t[a];if(m=o.get(h))rt(e,a,m);else{var u=(m=n?n(l,h,a+"",e,t,o):O)===O;if(u){var c=qa(h),d=!c&&Ha(h),p=!c&&!d&&Wa(h),m=h;c||d||p?qa(l)?m=l:Wn(l)?m=_i(l):d?(u=!1,m=yi(h,!0)):p?(u=!1,m=vi(h,!0)):m=[]:er(h)||Oa(h)?(m=l,Oa(l)?m=lr(l):(!Zn(l)||i&&jn(l))&&(m=ln(h))):u=!1}u&&(o.set(h,m),Ht(m,h,i,n,o),o.delete(h)),rt(e,a,m)}}else(o=n?n(e[a],s,a+"",e,t,r):O)===O&&(o=s),rt(e,a,o)}),pr)}function Gt(e,t){var i=e.length;if(i)return cn(t+=0>t?i:0,i)?e[t]:O}function Ft(e,t,i){var n=-1;return t=u(t.length?t:[Ar],T(nn())),function(e,t){var i=e.length;for(e.sort(t);i--;)e[i]=e[i].c;return e}(e=Ot(e,(function(e){return{a:u(t,(function(t){return t(e)})),b:++n,c:e}})),(function(e,t){var n;e:{n=-1;for(var r=e.a,s=t.a,a=r.length,o=i.length;++n<a;){var l=Ai(r[n],s[n]);if(l){n=n>=o?l:l*("desc"==i[n]?-1:1);break e}}n=e.b-t.b}return n}))}function zt(e,t,i){for(var n=-1,r=t.length,s={};++n<r;){var a=t[n],o=_t(e,a);i(o,a)&&Jt(s,gi(a,e),o)}return s}function Ut(e,t,i,n){var r=n?E:y,s=-1,a=t.length,o=e;for(e===t&&(t=_i(t)),i&&(o=u(e,T(i)));++s<a;){var l=0,h=t[s];for(h=i?i(h):h;-1<(l=r(o,h,l,n));)o!==e&&es.call(o,l,1),es.call(e,l,1)}return e}function Wt(e,t){for(var i=e?t.length:0,n=i-1;i--;){var r=t[i];if(i==n||r!==s){var s=r;cn(r)?es.call(e,r,1):li(e,r)}}}function Xt(e,t){return e+hs(vs()*(t-e+1))}function jt(e,t){var i="";if(!e||1>t||9007199254740991<t)return i;do{t%2&&(i+=e),(t=hs(t/2))&&(e+=e)}while(t);return i}function Qt(e,t){return $s(yn(e,t,Ar),e+"")}function Kt(e){return tt(gr(e))}function Zt(e,t){var i=gr(e);return An(i,ct(t,0,i.length))}function Jt(e,t,i,n){if(!Zn(e))return e;for(var r=-1,s=(t=gi(t,e)).length,a=s-1,o=e;null!=o&&++r<s;){var l=bn(t[r]),h=i;if(r!=a){var u=o[l];(h=n?n(u,l,o):O)===O&&(h=Zn(u)?u:cn(t[r+1])?[]:{})}st(o,l,h),o=o[l]}return e}function $t(e){return An(gr(e))}function ei(e,t,i){var n=-1,r=e.length;for(0>t&&(t=-t>r?0:r+t),0>(i=i>r?r:i)&&(i+=r),r=t>i?0:i-t>>>0,t>>>=0,i=Pr(r);++n<r;)i[n]=e[n+t];return i}function ti(e,t){var i;return Os(e,(function(e,n,r){return!(i=t(e,n,r))})),!!i}function ii(e,t,i){var n=0,r=null==e?n:e.length;if("number"==typeof t&&t==t&&2147483647>=r){for(;n<r;){var s=n+r>>>1,a=e[s];null!==a&&!ir(a)&&(i?a<=t:a<t)?n=s+1:r=s}return r}return ni(e,t,Ar,i)}function ni(e,t,i,n){t=i(t);for(var r=0,s=null==e?0:e.length,a=t!=t,o=null===t,l=ir(t),h=t===O;r<s;){var u=hs((r+s)/2),c=i(e[u]),d=c!==O,p=null===c,m=c==c,g=ir(c);(a?n||m:h?m&&(n||d):o?m&&d&&(n||!p):l?m&&d&&!p&&(n||!g):!p&&!g&&(n?c<=t:c<t))?r=u+1:s=u}return fs(s,4294967294)}function ri(e,t){for(var i=-1,n=e.length,r=0,s=[];++i<n;){var a=e[i],o=t?t(a):a;if(!i||!zn(o,l)){var l=o;s[r++]=0===a?0:a}}return s}function si(e){return"number"==typeof e?e:ir(e)?Y:+e}function ai(e){if("string"==typeof e)return e;if(qa(e))return u(e,ai)+"";if(ir(e))return Bs?Bs.call(e):"";var t=e+"";return"0"==t&&1/e==-q?"-0":t}function oi(e,t,i){var n=-1,r=l,s=e.length,a=!0,o=[],u=o;if(i)a=!1,r=h;else if(200<=s){if(r=t?null:Us(e))return I(r);a=!1,r=C,u=new He}else u=t?[]:o;e:for(;++n<s;){var c=e[n],d=t?t(c):c;c=i||0!==c?c:0;if(a&&d==d){for(var p=u.length;p--;)if(u[p]===d)continue e;t&&u.push(d),o.push(c)}else r(u,d,i)||(u!==o&&u.push(d),o.push(c))}return o}function li(e,t){return null==(e=2>(t=gi(t,e)).length?e:_t(e,ei(t,0,-1)))||delete e[bn(Vn(t))]}function hi(e,t,i,n){for(var r=e.length,s=n?r:-1;(n?s--:++s<r)&&t(e[s],s,e););return i?ei(e,n?0:s,n?s+1:r):ei(e,n?s+1:0,n?r:s)}function ui(e,t){var i=e;return i instanceof Le&&(i=i.value()),d(t,(function(e,t){return t.func.apply(t.thisArg,c([e],t.args))}),i)}function ci(e,t,i){var n=e.length;if(2>n)return n?oi(e[0]):[];for(var r=-1,s=Pr(n);++r<n;)for(var a=e[r],o=-1;++o<n;)o!=r&&(s[r]=gt(s[r]||a,e[o],t,i));return oi(vt(s,1),t,i)}function di(e,t,i){for(var n=-1,r=e.length,s=t.length,a={};++n<r;)i(a,e[n],n<s?t[n]:O);return a}function pi(e){return Wn(e)?e:[]}function mi(e){return"function"==typeof e?e:Ar}function gi(e,t){return qa(e)?e:pn(e,t)?[e]:ea(hr(e))}function fi(e,t,i){var n=e.length;return i=i===O?n:i,!t&&i>=n?e:ei(e,t,i)}function yi(e,t){if(t)return e.slice();var i=e.length;i=Kr?Kr(i):new e.constructor(i);return e.copy(i),i}function Ei(e){var t=new e.constructor(e.byteLength);return new Qr(t).set(new Qr(e)),t}function vi(e,t){return new e.constructor(t?Ei(e.buffer):e.buffer,e.byteOffset,e.length)}function Ai(e,t){if(e!==t){var i=e!==O,n=null===e,r=e==e,s=ir(e),a=t!==O,o=null===t,l=t==t,h=ir(t);if(!o&&!h&&!s&&e>t||s&&a&&l&&!o&&!h||n&&a&&l||!i&&l||!r)return 1;if(!n&&!s&&!h&&e<t||h&&i&&r&&!n&&!s||o&&i&&r||!a&&r||!l)return-1}return 0}function bi(e,t,i,n){var r=-1,s=e.length,a=i.length,o=-1,l=t.length,h=gs(s-a,0),u=Pr(l+h);for(n=!n;++o<l;)u[o]=t[o];for(;++r<a;)(n||r<s)&&(u[i[r]]=e[r]);for(;h--;)u[o++]=e[r++];return u}function Si(e,t,i,n){var r=-1,s=e.length,a=-1,o=i.length,l=-1,h=t.length,u=gs(s-o,0),c=Pr(u+h);for(n=!n;++r<u;)c[r]=e[r];for(u=r;++l<h;)c[u+l]=t[l];for(;++a<o;)(n||r<s)&&(c[u+i[a]]=e[r++]);return c}function _i(e,t){var i=-1,n=e.length;for(t||(t=Pr(n));++i<n;)t[i]=e[i];return t}function xi(e,t,i,n){var r=!i;i||(i={});for(var s=-1,a=t.length;++s<a;){var o=t[s],l=n?n(i[o],e[o],o,i,e):O;l===O&&(l=e[o]),r?ht(i,o,l):st(i,o,l)}return i}function wi(e,t){return function(i,r){var s=qa(i)?n:ot,a=t?t():{};return s(i,e,nn(r,2),a)}}function Ti(e){return Qt((function(t,i){var n=-1,r=i.length,s=1<r?i[r-1]:O,a=2<r?i[2]:O;s=3<e.length&&"function"==typeof s?(r--,s):O;for(a&&dn(i[0],i[1],a)&&(s=3>r?O:s,r=1),t=Mr(t);++n<r;)(a=i[n])&&e(t,a,n,s);return t}))}function Pi(e,t){return function(i,n){if(null==i)return i;if(!Un(i))return e(i,n);for(var r=i.length,s=t?r:-1,a=Mr(i);(t?s--:++s<r)&&!1!==n(a[s],s,a););return i}}function Ci(e){return function(t,i,n){for(var r=-1,s=Mr(t),a=(n=n(t)).length;a--;){var o=n[e?a:++r];if(!1===i(s[o],o,s))break}return t}}function Vi(e){return function(t){t=hr(t);var i=Ce.test(t)?D(t):O,n=i?i[0]:t.charAt(0);return t=i?fi(i,1).join(""):t.slice(1),n[e]()+t}}function Ri(e){return function(t){return d(Er(yr(t).replace(xe,"")),e,"")}}function Ni(e){return function(){switch((t=arguments).length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var t,i=Ds(e.prototype);return Zn(t=e.apply(i,t))?t:i}}function Mi(e,t,n){var r=Ni(e);return function s(){for(var a=arguments.length,o=Pr(a),l=a,h=tn(s);l--;)o[l]=arguments[l];return(a-=(l=3>a&&o[0]!==h&&o[a-1]!==h?[]:L(o,h)).length)<n?Fi(e,t,Ii,s.placeholder,O,o,l,O,O,n-a):i(this&&this!==qe&&this instanceof s?r:e,this,o)}}function ki(e){return function(t,i,n){var r=Mr(t);if(!Un(t)){var s=nn(i,3);t=dr(t),i=function(e){return s(r[e],e,r)}}return-1<(i=e(t,i,n))?r[s?t[i]:i]:O}}function Li(e){return Zi((function(t){var i=t.length,n=i,r=ke.prototype.thru;for(e&&t.reverse();n--;){if("function"!=typeof(a=t[n]))throw new Ir("Expected a function");if(r&&!s&&"wrapper"==en(a))var s=new ke([],!0)}for(n=s?n:i;++n<i;){var a,o="wrapper"==(r=en(a=t[n]))?Ws(a):O;s=o&&mn(o[0])&&424==o[1]&&!o[4].length&&1==o[9]?s[en(o[0])].apply(s,o[3]):1==a.length&&mn(a)?s[r]():s.thru(a)}return function(){var e=(r=arguments)[0];if(s&&1==r.length&&qa(e))return s.plant(e).value();for(var n=0,r=i?t[n].apply(this,r):e;++n<i;)r=t[n].call(this,r);return r}}))}function Ii(e,t,i,n,r,s,a,o,l,h){var u=128&t,c=1&t,d=2&t,p=24&t,m=512&t,g=d?O:Ni(e);return function f(){for(var y=arguments.length,E=Pr(y),v=y;v--;)E[v]=arguments[v];if(p){var A,b=tn(f);v=E.length;for(A=0;v--;)E[v]===b&&++A}if(n&&(E=bi(E,n,r,p)),s&&(E=Si(E,s,a,p)),y-=A,p&&y<h)return b=L(E,b),Fi(e,t,Ii,f.placeholder,i,E,b,o,l,h-y);if(b=c?i:this,v=d?b[e]:e,y=E.length,o){A=E.length;for(var S=fs(o.length,A),_=_i(E);S--;){var x=o[S];E[S]=cn(x,A)?_[x]:O}}else m&&1<y&&E.reverse();return u&&l<y&&(E.length=l),this&&this!==qe&&this instanceof f&&(v=g||Ni(v)),v.apply(b,E)}}function Bi(e,t){return function(i,n){return function(e,t,i){var n={};return At(e,(function(e,r,s){t(n,i(e),r,s)})),n}(i,e,t(n))}}function Di(e,t){return function(i,n){var r;if(i===O&&n===O)return t;if(i!==O&&(r=i),n!==O){if(r===O)return n;"string"==typeof i||"string"==typeof n?(i=ai(i),n=ai(n)):(i=si(i),n=si(n)),r=e(i,n)}return r}}function Oi(e){return Zi((function(t){return t=u(t,T(nn())),Qt((function(n){var r=this;return e(t,(function(e){return i(e,r,n)}))}))}))}function qi(e,t){var i=(t=t===O?" ":ai(t)).length;return 2>i?i?jt(t,e):t:(i=jt(t,ls(e/B(t))),Ce.test(t)?fi(D(i),0,e).join(""):i.slice(0,e))}function Yi(e,t,n,r){var s=1&t,a=Ni(e);return function t(){for(var o=-1,l=arguments.length,h=-1,u=r.length,c=Pr(u+l),d=this&&this!==qe&&this instanceof t?a:e;++h<u;)c[h]=r[h];for(;l--;)c[h++]=arguments[++o];return i(d,s?n:this,c)}}function Hi(e){return function(t,i,n){n&&"number"!=typeof n&&dn(t,i,n)&&(i=n=O),t=rr(t),i===O?(i=t,t=0):i=rr(i),n=n===O?t<i?1:-1:rr(n);var r=-1;i=gs(ls((i-t)/(n||1)),0);for(var s=Pr(i);i--;)s[e?i:++r]=t,t+=n;return s}}function Gi(e){return function(t,i){return"string"==typeof t&&"string"==typeof i||(t=or(t),i=or(i)),e(t,i)}}function Fi(e,t,i,n,r,s,a,o,l,h){var u=8&t;return 4&(t=(t|(u?32:64))&~(u?64:32))||(t&=-4),r=[e,t,r,u?s:O,u?a:O,s=u?O:s,a=u?O:a,o,l,h],i=i.apply(O,r),mn(e)&&Zs(i,r),i.placeholder=n,En(i,e,t)}function zi(e){var t=Nr[e];return function(e,i){if(e=or(e),i=null==i?0:fs(sr(i),292)){var n=(hr(e)+"e").split("e");return+((n=(hr(n=t(n[0]+"e"+(+n[1]+i)))+"e").split("e"))[0]+"e"+(+n[1]-i))}return t(e)}}function Ui(e){return function(t){var i=Qs(t);return"[object Map]"==i?M(t):"[object Set]"==i?function(e){var t=-1,i=Array(e.size);return e.forEach((function(e){i[++t]=[e,e]})),i}(t):function(e,t){return u(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Wi(e,t,i,n,r,s,a,o){var l=2&t;if(!l&&"function"!=typeof e)throw new Ir("Expected a function");var h=n?n.length:0;if(h||(t&=-97,n=r=O),a=a===O?a:gs(sr(a),0),o=o===O?o:sr(o),h-=r?r.length:0,64&t){var u=n,c=r;n=r=O}var d=l?O:Ws(e);return s=[e,t,i,n,r,u,c,s,a,o],d&&(t=(i=s[1])|(e=d[1]),n=128==e&&8==i||128==e&&256==i&&s[7].length<=d[8]||384==e&&d[7].length<=d[8]&&8==i,131>t||n)&&(1&e&&(s[2]=d[2],t|=1&i?0:4),(i=d[3])&&(n=s[3],s[3]=n?bi(n,i,d[4]):i,s[4]=n?L(s[3],"__lodash_placeholder__"):d[4]),(i=d[5])&&(n=s[5],s[5]=n?Si(n,i,d[6]):i,s[6]=n?L(s[5],"__lodash_placeholder__"):d[6]),(i=d[7])&&(s[7]=i),128&e&&(s[8]=null==s[8]?d[8]:fs(s[8],d[8])),null==s[9]&&(s[9]=d[9]),s[0]=d[0],s[1]=t),e=s[0],t=s[1],i=s[2],n=s[3],r=s[4],!(o=s[9]=s[9]===O?l?0:e.length:gs(s[9]-h,0))&&24&t&&(t&=-25),En((d?Gs:Zs)(t&&1!=t?8==t||16==t?Mi(e,t,o):32!=t&&33!=t||r.length?Ii.apply(O,s):Yi(e,t,i,n):function(e,t,i){var n=1&t,r=Ni(e);return function t(){return(this&&this!==qe&&this instanceof t?r:e).apply(n?i:this,arguments)}}(e,t,i),s),e,t)}function Xi(e,t,i,n){return e===O||zn(e,Dr[i])&&!Yr.call(n,i)?t:e}function ji(e,t,i,n,r,s){return Zn(e)&&Zn(t)&&(s.set(t,e),Ht(e,t,O,ji,s),s.delete(t)),e}function Qi(e){return er(e)?O:e}function Ki(e,t,i,n,r,s){var a=1&i,o=e.length;if(o!=(l=t.length)&&!(a&&l>o))return!1;if((l=s.get(e))&&s.get(t))return l==t;var l=-1,h=!0,u=2&i?new He:O;for(s.set(e,t),s.set(t,e);++l<o;){var c=e[l],d=t[l];if(n)var p=a?n(d,c,l,t,e,s):n(c,d,l,e,t,s);if(p!==O){if(p)continue;h=!1;break}if(u){if(!m(t,(function(e,t){if(!C(u,t)&&(c===e||r(c,e,i,n,s)))return u.push(t)}))){h=!1;break}}else if(c!==d&&!r(c,d,i,n,s)){h=!1;break}}return s.delete(e),s.delete(t),h}function Zi(e){return $s(yn(e,O,Pn),e+"")}function Ji(e){return xt(e,dr,Xs)}function $i(e){return xt(e,pr,js)}function en(e){for(var t=e.name+"",i=Cs[t],n=Yr.call(Cs,t)?i.length:0;n--;){var r=i[n],s=r.func;if(null==s||s==e)return r.name}return t}function tn(e){return(Yr.call(_e,"placeholder")?_e:e).placeholder}function nn(){var e=(e=_e.iteratee||br)===br?It:e;return arguments.length?e(arguments[0],arguments[1]):e}function rn(e,t){var i=e.__data__,n=typeof t;return("string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t)?i["string"==typeof t?"string":"hash"]:i.map}function sn(e){for(var t=dr(e),i=t.length;i--;){var n=t[i],r=e[n];t[i]=[n,r,r==r&&!Zn(r)]}return t}function an(e,t){var i=null==e?O:e[t];return Lt(i)?i:O}function on(e,t,i){for(var n=-1,r=(t=gi(t,e)).length,s=!1;++n<r;){var a=bn(t[n]);if(!(s=null!=e&&i(e,a)))break;e=e[a]}return s||++n!=r?s:!!(r=null==e?0:e.length)&&Kn(r)&&cn(a,r)&&(qa(e)||Oa(e))}function ln(e){return"function"!=typeof e.constructor||gn(e)?{}:Ds(Zr(e))}function hn(i,n,r,s){var a=i.constructor;switch(n){case"[object ArrayBuffer]":return Ei(i);case"[object Boolean]":case"[object Date]":return new a(+i);case"[object DataView]":return n=s?Ei(i.buffer):i.buffer,new i.constructor(n,i.byteOffset,i.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return vi(i,s);case"[object Map]":return d(n=s?r(M(i),1):M(i),e,new i.constructor);case"[object Number]":case"[object String]":return new a(i);case"[object RegExp]":return(n=new i.constructor(i.source,pe.exec(i))).lastIndex=i.lastIndex,n;case"[object Set]":return d(n=s?r(I(i),1):I(i),t,new i.constructor);case"[object Symbol]":return Is?Mr(Is.call(i)):{}}}function un(e){return qa(e)||Oa(e)||!!(ts&&e&&e[ts])}function cn(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||Ee.test(e))&&-1<e&&0==e%1&&e<t}function dn(e,t,i){if(!Zn(i))return!1;var n=typeof t;return!!("number"==n?Un(i)&&cn(t,i.length):"string"==n&&t in i)&&zn(i[t],e)}function pn(e,t){if(qa(e))return!1;var i=typeof e;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=e&&!ir(e))||$.test(e)||!J.test(e)||null!=t&&e in Mr(t)}function mn(e){var t=en(e),i=_e[t];return"function"==typeof i&&t in Le.prototype&&(e===i||!!(t=Ws(i))&&e===t[0])}function gn(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Dr)}function fn(e,t){return function(i){return null!=i&&i[e]===t&&(t!==O||e in Mr(i))}}function yn(e,t,n){return t=gs(t===O?e.length-1:t,0),function(){for(var r=arguments,s=-1,a=gs(r.length-t,0),o=Pr(a);++s<a;)o[s]=r[t+s];for(s=-1,a=Pr(t+1);++s<t;)a[s]=r[s];return a[t]=n(o),i(e,this,a)}}function En(e,t,i){var n=t+"";t=$s;var r,s=_n;return i=s(r=(r=n.match(le))?r[1].split(he):[],i),(s=i.length)&&(i[r=s-1]=(1<s?"& ":"")+i[r],i=i.join(2<s?", ":" "),n=n.replace(oe,"{\n/* [wrapped with "+i+"] */\n")),t(e,n)}function vn(e){var t=0,i=0;return function(){var n=ys(),r=16-(n-i);if(i=n,0<r){if(800<=++t)return arguments[0]}else t=0;return e.apply(O,arguments)}}function An(e,t){var i=-1,n=(r=e.length)-1;for(t=t===O?r:t;++i<t;){var r,s=e[r=Xt(i,n)];e[r]=e[i],e[i]=s}return e.length=t,e}function bn(e){if("string"==typeof e||ir(e))return e;var t=e+"";return"0"==t&&1/e==-q?"-0":t}function Sn(e){if(null!=e){try{return qr.call(e)}catch(e){}return e+""}return""}function _n(e,t){return r(H,(function(i){var n="_."+i[0];t&i[1]&&!l(e,n)&&e.push(n)})),e.sort()}function xn(e){if(e instanceof Le)return e.clone();var t=new ke(e.__wrapped__,e.__chain__);return t.__actions__=_i(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function wn(e,t,i){var n=null==e?0:e.length;return n?(0>(i=null==i?0:sr(i))&&(i=gs(n+i,0)),f(e,nn(t,3),i)):-1}function Tn(e,t,i){var n=null==e?0:e.length;if(!n)return-1;var r=n-1;return i!==O&&(r=sr(i),r=0>i?gs(n+r,0):fs(r,n-1)),f(e,nn(t,3),r,!0)}function Pn(e){return null!=e&&e.length?vt(e,1):[]}function Cn(e){return e&&e.length?e[0]:O}function Vn(e){var t=null==e?0:e.length;return t?e[t-1]:O}function Rn(e,t){return e&&e.length&&t&&t.length?Ut(e,t):e}function Nn(e){return null==e?e:As.call(e)}function Mn(e){if(!e||!e.length)return[];var t=0;return e=o(e,(function(e){if(Wn(e))return t=gs(e.length,t),!0})),w(t,(function(t){return u(e,b(t))}))}function kn(e,t){if(!e||!e.length)return[];var n=Mn(e);return null==t?n:u(n,(function(e){return i(t,O,e)}))}function Ln(e){return(e=_e(e)).__chain__=!0,e}function In(e,t){return t(e)}function Bn(e,t){return(qa(e)?r:Os)(e,nn(t,3))}function Dn(e,t){return(qa(e)?s:qs)(e,nn(t,3))}function On(e,t){return(qa(e)?u:Ot)(e,nn(t,3))}function qn(e,t,i){return t=i?O:t,t=e&&null==t?e.length:t,Wi(e,128,O,O,O,O,t)}function Yn(e,t){var i;if("function"!=typeof t)throw new Ir("Expected a function");return e=sr(e),function(){return 0<--e&&(i=t.apply(this,arguments)),1>=e&&(t=O),i}}function Hn(e,t,i){function n(t){var i=l,n=h;return l=h=O,m=t,c=e.apply(n,i)}function r(e){var i=e-p;return e-=m,p===O||i>=t||0>i||f&&e>=u}function s(){var e=Pa();if(r(e))return a(e);var i,n=Js;i=e-m,e=t-(e-p),i=f?fs(e,u-i):e,d=n(s,i)}function a(e){return d=O,y&&l?n(e):(l=h=O,c)}function o(){var e=Pa(),i=r(e);if(l=arguments,h=this,p=e,i){if(d===O)return m=e=p,d=Js(s,t),g?n(e):c;if(f)return d=Js(s,t),n(p)}return d===O&&(d=Js(s,t)),c}var l,h,u,c,d,p,m=0,g=!1,f=!1,y=!0;if("function"!=typeof e)throw new Ir("Expected a function");return t=or(t)||0,Zn(i)&&(g=!!i.leading,u=(f="maxWait"in i)?gs(or(i.maxWait)||0,t):u,y="trailing"in i?!!i.trailing:y),o.cancel=function(){d!==O&&zs(d),m=0,l=p=h=d=O},o.flush=function(){return d===O?c:a(Pa())},o}function Gn(e,t){function i(){var n=arguments,r=t?t.apply(this,n):n[0],s=i.cache;return s.has(r)?s.get(r):(n=e.apply(this,n),i.cache=s.set(r,n)||s,n)}if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Ir("Expected a function");return i.cache=new(Gn.Cache||Ye),i}function Fn(e){if("function"!=typeof e)throw new Ir("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function zn(e,t){return e===t||e!=e&&t!=t}function Un(e){return null!=e&&Kn(e.length)&&!jn(e)}function Wn(e){return Jn(e)&&Un(e)}function Xn(e){if(!Jn(e))return!1;var t=wt(e);return"[object Error]"==t||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!er(e)}function jn(e){return!!Zn(e)&&("[object Function]"==(e=wt(e))||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e)}function Qn(e){return"number"==typeof e&&e==sr(e)}function Kn(e){return"number"==typeof e&&-1<e&&0==e%1&&9007199254740991>=e}function Zn(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Jn(e){return null!=e&&"object"==typeof e}function $n(e){return"number"==typeof e||Jn(e)&&"[object Number]"==wt(e)}function er(e){return!(!Jn(e)||"[object Object]"!=wt(e))&&(null===(e=Zr(e))||"function"==typeof(e=Yr.call(e,"constructor")&&e.constructor)&&e instanceof e&&qr.call(e)==zr)}function tr(e){return"string"==typeof e||!qa(e)&&Jn(e)&&"[object String]"==wt(e)}function ir(e){return"symbol"==typeof e||Jn(e)&&"[object Symbol]"==wt(e)}function nr(e){if(!e)return[];if(Un(e))return tr(e)?D(e):_i(e);if(is&&e[is]){e=e[is]();for(var t,i=[];!(t=e.next()).done;)i.push(t.value);return i}return("[object Map]"==(t=Qs(e))?M:"[object Set]"==t?I:gr)(e)}function rr(e){return e?(e=or(e))===q||e===-q?17976931348623157e292*(0>e?-1:1):e==e?e:0:0===e?e:0}function sr(e){var t=(e=rr(e))%1;return e==e?t?e-t:e:0}function ar(e){return e?ct(sr(e),0,4294967295):0}function or(e){if("number"==typeof e)return e;if(ir(e))return Y;if(Zn(e)&&(e=Zn(e="function"==typeof e.valueOf?e.valueOf():e)?e+"":e),"string"!=typeof e)return 0===e?e:+e;e=e.replace(re,"");var t=ge.test(e);return t||ye.test(e)?Be(e.slice(2),t?2:8):me.test(e)?Y:+e}function lr(e){return xi(e,pr(e))}function hr(e){return null==e?"":ai(e)}function ur(e,t,i){return(e=null==e?O:_t(e,t))===O?i:e}function cr(e,t){return null!=e&&on(e,t,Ct)}function dr(e){return Un(e)?Ke(e):Bt(e)}function pr(e){if(Un(e))e=Ke(e,!0);else if(Zn(e)){var t,i=gn(e),n=[];for(t in e)("constructor"!=t||!i&&Yr.call(e,t))&&n.push(t);e=n}else{if(t=[],null!=e)for(i in Mr(e))t.push(i);e=t}return e}function mr(e,t){if(null==e)return{};var i=u($i(e),(function(e){return[e]}));return t=nn(t),zt(e,i,(function(e,i){return t(e,i[0])}))}function gr(e){return null==e?[]:P(e,dr(e))}function fr(e){return vo(hr(e).toLowerCase())}function yr(e){return(e=hr(e))&&e.replace(ve,Ze).replace(we,"")}function Er(e,t,i){return e=hr(e),(t=i?O:t)===O?Ve.test(e)?e.match(Pe)||[]:e.match(ue)||[]:e.match(t)||[]}function vr(e){return function(){return e}}function Ar(e){return e}function br(e){return It("function"==typeof e?e:dt(e,1))}function Sr(e,t,i){var n=dr(t),s=St(t,n);null!=i||Zn(t)&&(s.length||!n.length)||(i=t,t=e,e=this,s=St(t,dr(t)));var a=!(Zn(i)&&"chain"in i&&!i.chain),o=jn(e);return r(s,(function(i){var n=t[i];e[i]=n,o&&(e.prototype[i]=function(){var t=this.__chain__;if(a||t){var i=e(this.__wrapped__);return(i.__actions__=_i(this.__actions__)).push({func:n,args:arguments,thisArg:e}),i.__chain__=t,i}return n.apply(e,c([this.value()],arguments))})})),e}function _r(){}function xr(e){return pn(e)?b(bn(e)):function(e){return function(t){return _t(t,e)}}(e)}function wr(){return[]}function Tr(){return!1}var Pr=(Se=null==Se?qe:et.defaults(qe.Object(),Se,et.pick(qe,Re))).Array,Cr=Se.Date,Vr=Se.Error,Rr=Se.Function,Nr=Se.Math,Mr=Se.Object,kr=Se.RegExp,Lr=Se.String,Ir=Se.TypeError,Br=Pr.prototype,Dr=Mr.prototype,Or=Se["__core-js_shared__"],qr=Rr.prototype.toString,Yr=Dr.hasOwnProperty,Hr=0,Gr=function(){var e=/[^.]+$/.exec(Or&&Or.keys&&Or.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Fr=Dr.toString,zr=qr.call(Mr),Ur=qe._,Wr=kr("^"+qr.call(Yr).replace(ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Xr=Ge?Se.Buffer:O,jr=Se.Symbol,Qr=Se.Uint8Array,Kr=Xr?Xr.f:O,Zr=k(Mr.getPrototypeOf,Mr),Jr=Mr.create,$r=Dr.propertyIsEnumerable,es=Br.splice,ts=jr?jr.isConcatSpreadable:O,is=jr?jr.iterator:O,ns=jr?jr.toStringTag:O,rs=function(){try{var e=an(Mr,"defineProperty");return e({},"",{}),e}catch(e){}}(),ss=Se.clearTimeout!==qe.clearTimeout&&Se.clearTimeout,as=Cr&&Cr.now!==qe.Date.now&&Cr.now,os=Se.setTimeout!==qe.setTimeout&&Se.setTimeout,ls=Nr.ceil,hs=Nr.floor,us=Mr.getOwnPropertySymbols,cs=Xr?Xr.isBuffer:O,ds=Se.isFinite,ps=Br.join,ms=k(Mr.keys,Mr),gs=Nr.max,fs=Nr.min,ys=Cr.now,Es=Se.parseInt,vs=Nr.random,As=Br.reverse,bs=an(Se,"DataView"),Ss=an(Se,"Map"),_s=an(Se,"Promise"),xs=an(Se,"Set"),ws=an(Se,"WeakMap"),Ts=an(Mr,"create"),Ps=ws&&new ws,Cs={},Vs=Sn(bs),Rs=Sn(Ss),Ns=Sn(_s),Ms=Sn(xs),ks=Sn(ws),Ls=jr?jr.prototype:O,Is=Ls?Ls.valueOf:O,Bs=Ls?Ls.toString:O,Ds=function(){function e(){}return function(t){return Zn(t)?Jr?Jr(t):(e.prototype=t,t=new e,e.prototype=O,t):{}}}();_e.templateSettings={escape:Q,evaluate:K,interpolate:Z,variable:"",imports:{_:_e}},_e.prototype=Te.prototype,_e.prototype.constructor=_e,ke.prototype=Ds(Te.prototype),ke.prototype.constructor=ke,Le.prototype=Ds(Te.prototype),Le.prototype.constructor=Le,De.prototype.clear=function(){this.__data__=Ts?Ts(null):{},this.size=0},De.prototype.delete=function(e){return e=this.has(e)&&delete this.__data__[e],this.size-=e?1:0,e},De.prototype.get=function(e){var t=this.__data__;return Ts?"__lodash_hash_undefined__"===(e=t[e])?O:e:Yr.call(t,e)?t[e]:O},De.prototype.has=function(e){var t=this.__data__;return Ts?t[e]!==O:Yr.call(t,e)},De.prototype.set=function(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=Ts&&t===O?"__lodash_hash_undefined__":t,this},Oe.prototype.clear=function(){this.__data__=[],this.size=0},Oe.prototype.delete=function(e){var t=this.__data__;return!(0>(e=at(t,e))||(e==t.length-1?t.pop():es.call(t,e,1),--this.size,0))},Oe.prototype.get=function(e){var t=this.__data__;return 0>(e=at(t,e))?O:t[e][1]},Oe.prototype.has=function(e){return-1<at(this.__data__,e)},Oe.prototype.set=function(e,t){var i=this.__data__,n=at(i,e);return 0>n?(++this.size,i.push([e,t])):i[n][1]=t,this},Ye.prototype.clear=function(){this.size=0,this.__data__={hash:new De,map:new(Ss||Oe),string:new De}},Ye.prototype.delete=function(e){return e=rn(this,e).delete(e),this.size-=e?1:0,e},Ye.prototype.get=function(e){return rn(this,e).get(e)},Ye.prototype.has=function(e){return rn(this,e).has(e)},Ye.prototype.set=function(e,t){var i=rn(this,e),n=i.size;return i.set(e,t),this.size+=i.size==n?0:1,this},He.prototype.add=He.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},He.prototype.has=function(e){return this.__data__.has(e)},Fe.prototype.clear=function(){this.__data__=new Oe,this.size=0},Fe.prototype.delete=function(e){var t=this.__data__;return e=t.delete(e),this.size=t.size,e},Fe.prototype.get=function(e){return this.__data__.get(e)},Fe.prototype.has=function(e){return this.__data__.has(e)},Fe.prototype.set=function(e,t){var i=this.__data__;if(i instanceof Oe){var n=i.__data__;if(!Ss||199>n.length)return n.push([e,t]),this.size=++i.size,this;i=this.__data__=new Ye(n)}return i.set(e,t),this.size=i.size,this};var Os=Pi(At),qs=Pi(bt,!0),Ys=Ci(),Hs=Ci(!0),Gs=Ps?function(e,t){return Ps.set(e,t),e}:Ar,Fs=rs?function(e,t){return rs(e,"toString",{configurable:!0,enumerable:!1,value:vr(t),writable:!0})}:Ar,zs=ss||function(e){return qe.clearTimeout(e)},Us=xs&&1/I(new xs([,-0]))[1]==q?function(e){return new xs(e)}:_r,Ws=Ps?function(e){return Ps.get(e)}:_r,Xs=us?function(e){return null==e?[]:(e=Mr(e),o(us(e),(function(t){return $r.call(e,t)})))}:wr,js=us?function(e){for(var t=[];e;)c(t,Xs(e)),e=Zr(e);return t}:wr,Qs=wt;(bs&&"[object DataView]"!=Qs(new bs(new ArrayBuffer(1)))||Ss&&"[object Map]"!=Qs(new Ss)||_s&&"[object Promise]"!=Qs(_s.resolve())||xs&&"[object Set]"!=Qs(new xs)||ws&&"[object WeakMap]"!=Qs(new ws))&&(Qs=function(e){var t=wt(e);if(e=(e="[object Object]"==t?e.constructor:O)?Sn(e):"")switch(e){case Vs:return"[object DataView]";case Rs:return"[object Map]";case Ns:return"[object Promise]";case Ms:return"[object Set]";case ks:return"[object WeakMap]"}return t});var Ks=Or?jn:Tr,Zs=vn(Gs),Js=os||function(e,t){return qe.setTimeout(e,t)},$s=vn(Fs),ea=function(e){var t=(e=Gn(e,(function(e){return 500===t.size&&t.clear(),e}))).cache;return e}((function(e){var t=[];return ee.test(e)&&t.push(""),e.replace(te,(function(e,i,n,r){t.push(n?r.replace(ce,"$1"):i||e)})),t})),ta=Qt((function(e,t){return Wn(e)?gt(e,vt(t,1,Wn,!0)):[]})),ia=Qt((function(e,t){var i=Vn(t);return Wn(i)&&(i=O),Wn(e)?gt(e,vt(t,1,Wn,!0),nn(i,2)):[]})),na=Qt((function(e,t){var i=Vn(t);return Wn(i)&&(i=O),Wn(e)?gt(e,vt(t,1,Wn,!0),O,i):[]})),ra=Qt((function(e){var t=u(e,pi);return t.length&&t[0]===e[0]?Vt(t):[]})),sa=Qt((function(e){var t=Vn(e),i=u(e,pi);return t===Vn(i)?t=O:i.pop(),i.length&&i[0]===e[0]?Vt(i,nn(t,2)):[]})),aa=Qt((function(e){var t=Vn(e),i=u(e,pi);return(t="function"==typeof t?t:O)&&i.pop(),i.length&&i[0]===e[0]?Vt(i,O,t):[]})),oa=Qt(Rn),la=Zi((function(e,t){var i=null==e?0:e.length,n=ut(e,t);return Wt(e,u(t,(function(e){return cn(e,i)?+e:e})).sort(Ai)),n})),ha=Qt((function(e){return oi(vt(e,1,Wn,!0))})),ua=Qt((function(e){var t=Vn(e);return Wn(t)&&(t=O),oi(vt(e,1,Wn,!0),nn(t,2))})),ca=Qt((function(e){var t="function"==typeof(t=Vn(e))?t:O;return oi(vt(e,1,Wn,!0),O,t)})),da=Qt((function(e,t){return Wn(e)?gt(e,t):[]})),pa=Qt((function(e){return ci(o(e,Wn))})),ma=Qt((function(e){var t=Vn(e);return Wn(t)&&(t=O),ci(o(e,Wn),nn(t,2))})),ga=Qt((function(e){var t="function"==typeof(t=Vn(e))?t:O;return ci(o(e,Wn),O,t)})),fa=Qt(Mn),ya=Qt((function(e){var t="function"==typeof(t=1<(t=e.length)?e[t-1]:O)?(e.pop(),t):O;return kn(e,t)})),Ea=Zi((function(e){function t(t){return ut(t,e)}var i=e.length,n=i?e[0]:0,r=this.__wrapped__;return!(1<i||this.__actions__.length)&&r instanceof Le&&cn(n)?((r=r.slice(n,+n+(i?1:0))).__actions__.push({func:In,args:[t],thisArg:O}),new ke(r,this.__chain__).thru((function(e){return i&&!e.length&&e.push(O),e}))):this.thru(t)})),va=wi((function(e,t,i){Yr.call(e,i)?++e[i]:ht(e,i,1)})),Aa=ki(wn),ba=ki(Tn),Sa=wi((function(e,t,i){Yr.call(e,i)?e[i].push(t):ht(e,i,[t])})),_a=Qt((function(e,t,n){var r=-1,s="function"==typeof t,a=Un(e)?Pr(e.length):[];return Os(e,(function(e){a[++r]=s?i(t,e,n):Rt(e,t,n)})),a})),xa=wi((function(e,t,i){ht(e,i,t)})),wa=wi((function(e,t,i){e[i?0:1].push(t)}),(function(){return[[],[]]})),Ta=Qt((function(e,t){if(null==e)return[];var i=t.length;return 1<i&&dn(e,t[0],t[1])?t=[]:2<i&&dn(t[0],t[1],t[2])&&(t=[t[0]]),Ft(e,vt(t,1),[])})),Pa=as||function(){return qe.Date.now()},Ca=Qt((function(e,t,i){var n=1;if(i.length){var r=L(i,tn(Ca));n=32|n}return Wi(e,n,t,i,r)})),Va=Qt((function(e,t,i){var n=3;if(i.length){var r=L(i,tn(Va));n=32|n}return Wi(t,n,e,i,r)})),Ra=Qt((function(e,t){return mt(e,1,t)})),Na=Qt((function(e,t,i){return mt(e,or(t)||0,i)}));Gn.Cache=Ye;var Ma=Qt((function(e,t){var n=(t=1==t.length&&qa(t[0])?u(t[0],T(nn())):u(vt(t,1),T(nn()))).length;return Qt((function(r){for(var s=-1,a=fs(r.length,n);++s<a;)r[s]=t[s].call(this,r[s]);return i(e,this,r)}))})),ka=Qt((function(e,t){return Wi(e,32,O,t,L(t,tn(ka)))})),La=Qt((function(e,t){return Wi(e,64,O,t,L(t,tn(La)))})),Ia=Zi((function(e,t){return Wi(e,256,O,O,O,t)})),Ba=Gi(Tt),Da=Gi((function(e,t){return e>=t})),Oa=Nt(function(){return arguments}())?Nt:function(e){return Jn(e)&&Yr.call(e,"callee")&&!$r.call(e,"callee")},qa=Pr.isArray,Ya=ze?T(ze):function(e){return Jn(e)&&"[object ArrayBuffer]"==wt(e)},Ha=cs||Tr,Ga=Ue?T(Ue):function(e){return Jn(e)&&"[object Date]"==wt(e)},Fa=We?T(We):function(e){return Jn(e)&&"[object Map]"==Qs(e)},za=Xe?T(Xe):function(e){return Jn(e)&&"[object RegExp]"==wt(e)},Ua=je?T(je):function(e){return Jn(e)&&"[object Set]"==Qs(e)},Wa=Qe?T(Qe):function(e){return Jn(e)&&Kn(e.length)&&!!Ne[wt(e)]},Xa=Gi(Dt),ja=Gi((function(e,t){return e<=t})),Qa=Ti((function(e,t){if(gn(t)||Un(t))xi(t,dr(t),e);else for(var i in t)Yr.call(t,i)&&st(e,i,t[i])})),Ka=Ti((function(e,t){xi(t,pr(t),e)})),Za=Ti((function(e,t,i,n){xi(t,pr(t),e,n)})),Ja=Ti((function(e,t,i,n){xi(t,dr(t),e,n)})),$a=Zi(ut),eo=Qt((function(e){return e.push(O,Xi),i(Za,O,e)})),to=Qt((function(e){return e.push(O,ji),i(ao,O,e)})),io=Bi((function(e,t,i){e[t]=i}),vr(Ar)),no=Bi((function(e,t,i){Yr.call(e,t)?e[t].push(i):e[t]=[i]}),nn),ro=Qt(Rt),so=Ti((function(e,t,i){Ht(e,t,i)})),ao=Ti((function(e,t,i,n){Ht(e,t,i,n)})),oo=Zi((function(e,t){var i={};if(null==e)return i;var n=!1;t=u(t,(function(t){return t=gi(t,e),n||(n=1<t.length),t})),xi(e,$i(e),i),n&&(i=dt(i,7,Qi));for(var r=t.length;r--;)li(i,t[r]);return i})),lo=Zi((function(e,t){return null==e?{}:function(e,t){return zt(e,t,(function(t,i){return cr(e,i)}))}(e,t)})),ho=Ui(dr),uo=Ui(pr),co=Ri((function(e,t,i){return t=t.toLowerCase(),e+(i?fr(t):t)})),po=Ri((function(e,t,i){return e+(i?"-":"")+t.toLowerCase()})),mo=Ri((function(e,t,i){return e+(i?" ":"")+t.toLowerCase()})),go=Vi("toLowerCase"),fo=Ri((function(e,t,i){return e+(i?"_":"")+t.toLowerCase()})),yo=Ri((function(e,t,i){return e+(i?" ":"")+vo(t)})),Eo=Ri((function(e,t,i){return e+(i?" ":"")+t.toUpperCase()})),vo=Vi("toUpperCase"),Ao=Qt((function(e,t){try{return i(e,O,t)}catch(e){return Xn(e)?e:new Vr(e)}})),bo=Zi((function(e,t){return r(t,(function(t){t=bn(t),ht(e,t,Ca(e[t],e))})),e})),So=Li(),_o=Li(!0),xo=Qt((function(e,t){return function(i){return Rt(i,e,t)}})),wo=Qt((function(e,t){return function(i){return Rt(e,i,t)}})),To=Oi(u),Po=Oi(a),Co=Oi(m),Vo=Hi(),Ro=Hi(!0),No=Di((function(e,t){return e+t}),0),Mo=zi("ceil"),ko=Di((function(e,t){return e/t}),1),Lo=zi("floor"),Io=Di((function(e,t){return e*t}),1),Bo=zi("round"),Do=Di((function(e,t){return e-t}),0);return _e.after=function(e,t){if("function"!=typeof t)throw new Ir("Expected a function");return e=sr(e),function(){if(1>--e)return t.apply(this,arguments)}},_e.ary=qn,_e.assign=Qa,_e.assignIn=Ka,_e.assignInWith=Za,_e.assignWith=Ja,_e.at=$a,_e.before=Yn,_e.bind=Ca,_e.bindAll=bo,_e.bindKey=Va,_e.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return qa(e)?e:[e]},_e.chain=Ln,_e.chunk=function(e,t,i){if(t=(i?dn(e,t,i):t===O)?1:gs(sr(t),0),!(i=null==e?0:e.length)||1>t)return[];for(var n=0,r=0,s=Pr(ls(i/t));n<i;)s[r++]=ei(e,n,n+=t);return s},_e.compact=function(e){for(var t=-1,i=null==e?0:e.length,n=0,r=[];++t<i;){var s=e[t];s&&(r[n++]=s)}return r},_e.concat=function(){var e=arguments.length;if(!e)return[];for(var t=Pr(e-1),i=arguments[0];e--;)t[e-1]=arguments[e];return c(qa(i)?_i(i):[i],vt(t,1))},_e.cond=function(e){var t=null==e?0:e.length,n=nn();return e=t?u(e,(function(e){if("function"!=typeof e[1])throw new Ir("Expected a function");return[n(e[0]),e[1]]})):[],Qt((function(n){for(var r=-1;++r<t;){var s=e[r];if(i(s[0],this,n))return i(s[1],this,n)}}))},_e.conforms=function(e){return function(e){var t=dr(e);return function(i){return pt(i,e,t)}}(dt(e,1))},_e.constant=vr,_e.countBy=va,_e.create=function(e,t){var i=Ds(e);return null==t?i:lt(i,t)},_e.curry=function e(t,i,n){return(t=Wi(t,8,O,O,O,O,O,i=n?O:i)).placeholder=e.placeholder,t},_e.curryRight=function e(t,i,n){return(t=Wi(t,16,O,O,O,O,O,i=n?O:i)).placeholder=e.placeholder,t},_e.debounce=Hn,_e.defaults=eo,_e.defaultsDeep=to,_e.defer=Ra,_e.delay=Na,_e.difference=ta,_e.differenceBy=ia,_e.differenceWith=na,_e.drop=function(e,t,i){var n=null==e?0:e.length;return n?ei(e,0>(t=i||t===O?1:sr(t))?0:t,n):[]},_e.dropRight=function(e,t,i){var n=null==e?0:e.length;return n?ei(e,0,0>(t=n-(t=i||t===O?1:sr(t)))?0:t):[]},_e.dropRightWhile=function(e,t){return e&&e.length?hi(e,nn(t,3),!0,!0):[]},_e.dropWhile=function(e,t){return e&&e.length?hi(e,nn(t,3),!0):[]},_e.fill=function(e,t,i,n){var r=null==e?0:e.length;if(!r)return[];for(i&&"number"!=typeof i&&dn(e,t,i)&&(i=0,n=r),r=e.length,0>(i=sr(i))&&(i=-i>r?0:r+i),0>(n=n===O||n>r?r:sr(n))&&(n+=r),n=i>n?0:ar(n);i<n;)e[i++]=t;return e},_e.filter=function(e,t){return(qa(e)?o:Et)(e,nn(t,3))},_e.flatMap=function(e,t){return vt(On(e,t),1)},_e.flatMapDeep=function(e,t){return vt(On(e,t),q)},_e.flatMapDepth=function(e,t,i){return i=i===O?1:sr(i),vt(On(e,t),i)},_e.flatten=Pn,_e.flattenDeep=function(e){return null!=e&&e.length?vt(e,q):[]},_e.flattenDepth=function(e,t){return null!=e&&e.length?vt(e,t=t===O?1:sr(t)):[]},_e.flip=function(e){return Wi(e,512)},_e.flow=So,_e.flowRight=_o,_e.fromPairs=function(e){for(var t=-1,i=null==e?0:e.length,n={};++t<i;){var r=e[t];n[r[0]]=r[1]}return n},_e.functions=function(e){return null==e?[]:St(e,dr(e))},_e.functionsIn=function(e){return null==e?[]:St(e,pr(e))},_e.groupBy=Sa,_e.initial=function(e){return null!=e&&e.length?ei(e,0,-1):[]},_e.intersection=ra,_e.intersectionBy=sa,_e.intersectionWith=aa,_e.invert=io,_e.invertBy=no,_e.invokeMap=_a,_e.iteratee=br,_e.keyBy=xa,_e.keys=dr,_e.keysIn=pr,_e.map=On,_e.mapKeys=function(e,t){var i={};return t=nn(t,3),At(e,(function(e,n,r){ht(i,t(e,n,r),e)})),i},_e.mapValues=function(e,t){var i={};return t=nn(t,3),At(e,(function(e,n,r){ht(i,n,t(e,n,r))})),i},_e.matches=function(e){return qt(dt(e,1))},_e.matchesProperty=function(e,t){return Yt(e,dt(t,1))},_e.memoize=Gn,_e.merge=so,_e.mergeWith=ao,_e.method=xo,_e.methodOf=wo,_e.mixin=Sr,_e.negate=Fn,_e.nthArg=function(e){return e=sr(e),Qt((function(t){return Gt(t,e)}))},_e.omit=oo,_e.omitBy=function(e,t){return mr(e,Fn(nn(t)))},_e.once=function(e){return Yn(2,e)},_e.orderBy=function(e,t,i,n){return null==e?[]:(qa(t)||(t=null==t?[]:[t]),qa(i=n?O:i)||(i=null==i?[]:[i]),Ft(e,t,i))},_e.over=To,_e.overArgs=Ma,_e.overEvery=Po,_e.overSome=Co,_e.partial=ka,_e.partialRight=La,_e.partition=wa,_e.pick=lo,_e.pickBy=mr,_e.property=xr,_e.propertyOf=function(e){return function(t){return null==e?O:_t(e,t)}},_e.pull=oa,_e.pullAll=Rn,_e.pullAllBy=function(e,t,i){return e&&e.length&&t&&t.length?Ut(e,t,nn(i,2)):e},_e.pullAllWith=function(e,t,i){return e&&e.length&&t&&t.length?Ut(e,t,O,i):e},_e.pullAt=la,_e.range=Vo,_e.rangeRight=Ro,_e.rearg=Ia,_e.reject=function(e,t){return(qa(e)?o:Et)(e,Fn(nn(t,3)))},_e.remove=function(e,t){var i=[];if(!e||!e.length)return i;var n=-1,r=[],s=e.length;for(t=nn(t,3);++n<s;){var a=e[n];t(a,n,e)&&(i.push(a),r.push(n))}return Wt(e,r),i},_e.rest=function(e,t){if("function"!=typeof e)throw new Ir("Expected a function");return Qt(e,t=t===O?t:sr(t))},_e.reverse=Nn,_e.sampleSize=function(e,t,i){return t=(i?dn(e,t,i):t===O)?1:sr(t),(qa(e)?it:Zt)(e,t)},_e.set=function(e,t,i){return null==e?e:Jt(e,t,i)},_e.setWith=function(e,t,i,n){return n="function"==typeof n?n:O,null==e?e:Jt(e,t,i,n)},_e.shuffle=function(e){return(qa(e)?nt:$t)(e)},_e.slice=function(e,t,i){var n=null==e?0:e.length;return n?(i&&"number"!=typeof i&&dn(e,t,i)?(t=0,i=n):(t=null==t?0:sr(t),i=i===O?n:sr(i)),ei(e,t,i)):[]},_e.sortBy=Ta,_e.sortedUniq=function(e){return e&&e.length?ri(e):[]},_e.sortedUniqBy=function(e,t){return e&&e.length?ri(e,nn(t,2)):[]},_e.split=function(e,t,i){return i&&"number"!=typeof i&&dn(e,t,i)&&(t=i=O),(i=i===O?4294967295:i>>>0)?(e=hr(e))&&("string"==typeof t||null!=t&&!za(t))&&(!(t=ai(t))&&Ce.test(e))?fi(D(e),0,i):e.split(t,i):[]},_e.spread=function(e,t){if("function"!=typeof e)throw new Ir("Expected a function");return t=null==t?0:gs(sr(t),0),Qt((function(n){var r=n[t];return n=fi(n,0,t),r&&c(n,r),i(e,this,n)}))},_e.tail=function(e){var t=null==e?0:e.length;return t?ei(e,1,t):[]},_e.take=function(e,t,i){return e&&e.length?ei(e,0,0>(t=i||t===O?1:sr(t))?0:t):[]},_e.takeRight=function(e,t,i){var n=null==e?0:e.length;return n?ei(e,0>(t=n-(t=i||t===O?1:sr(t)))?0:t,n):[]},_e.takeRightWhile=function(e,t){return e&&e.length?hi(e,nn(t,3),!1,!0):[]},_e.takeWhile=function(e,t){return e&&e.length?hi(e,nn(t,3)):[]},_e.tap=function(e,t){return t(e),e},_e.throttle=function(e,t,i){var n=!0,r=!0;if("function"!=typeof e)throw new Ir("Expected a function");return Zn(i)&&(n="leading"in i?!!i.leading:n,r="trailing"in i?!!i.trailing:r),Hn(e,t,{leading:n,maxWait:t,trailing:r})},_e.thru=In,_e.toArray=nr,_e.toPairs=ho,_e.toPairsIn=uo,_e.toPath=function(e){return qa(e)?u(e,bn):ir(e)?[e]:_i(ea(hr(e)))},_e.toPlainObject=lr,_e.transform=function(e,t,i){var n=qa(e),s=n||Ha(e)||Wa(e);if(t=nn(t,4),null==i){var a=e&&e.constructor;i=s?n?new a:[]:Zn(e)&&jn(a)?Ds(Zr(e)):{}}return(s?r:At)(e,(function(e,n,r){return t(i,e,n,r)})),i},_e.unary=function(e){return qn(e,1)},_e.union=ha,_e.unionBy=ua,_e.unionWith=ca,_e.uniq=function(e){return e&&e.length?oi(e):[]},_e.uniqBy=function(e,t){return e&&e.length?oi(e,nn(t,2)):[]},_e.uniqWith=function(e,t){return t="function"==typeof t?t:O,e&&e.length?oi(e,O,t):[]},_e.unset=function(e,t){return null==e||li(e,t)},_e.unzip=Mn,_e.unzipWith=kn,_e.update=function(e,t,i){return null==e?e:Jt(e,t,mi(i)(_t(e,t)),void 0)},_e.updateWith=function(e,t,i,n){return n="function"==typeof n?n:O,null!=e&&(e=Jt(e,t,mi(i)(_t(e,t)),n)),e},_e.values=gr,_e.valuesIn=function(e){return null==e?[]:P(e,pr(e))},_e.without=da,_e.words=Er,_e.wrap=function(e,t){return ka(mi(t),e)},_e.xor=pa,_e.xorBy=ma,_e.xorWith=ga,_e.zip=fa,_e.zipObject=function(e,t){return di(e||[],t||[],st)},_e.zipObjectDeep=function(e,t){return di(e||[],t||[],Jt)},_e.zipWith=ya,_e.entries=ho,_e.entriesIn=uo,_e.extend=Ka,_e.extendWith=Za,Sr(_e,_e),_e.add=No,_e.attempt=Ao,_e.camelCase=co,_e.capitalize=fr,_e.ceil=Mo,_e.clamp=function(e,t,i){return i===O&&(i=t,t=O),i!==O&&(i=(i=or(i))==i?i:0),t!==O&&(t=(t=or(t))==t?t:0),ct(or(e),t,i)},_e.clone=function(e){return dt(e,4)},_e.cloneDeep=function(e){return dt(e,5)},_e.cloneDeepWith=function(e,t){return dt(e,5,t="function"==typeof t?t:O)},_e.cloneWith=function(e,t){return dt(e,4,t="function"==typeof t?t:O)},_e.conformsTo=function(e,t){return null==t||pt(e,t,dr(t))},_e.deburr=yr,_e.defaultTo=function(e,t){return null==e||e!=e?t:e},_e.divide=ko,_e.endsWith=function(e,t,i){e=hr(e),t=ai(t);var n=e.length;n=i=i===O?n:ct(sr(i),0,n);return 0<=(i-=t.length)&&e.slice(i,n)==t},_e.eq=zn,_e.escape=function(e){return(e=hr(e))&&j.test(e)?e.replace(W,Je):e},_e.escapeRegExp=function(e){return(e=hr(e))&&ne.test(e)?e.replace(ie,"\\$&"):e},_e.every=function(e,t,i){var n=qa(e)?a:ft;return i&&dn(e,t,i)&&(t=O),n(e,nn(t,3))},_e.find=Aa,_e.findIndex=wn,_e.findKey=function(e,t){return g(e,nn(t,3),At)},_e.findLast=ba,_e.findLastIndex=Tn,_e.findLastKey=function(e,t){return g(e,nn(t,3),bt)},_e.floor=Lo,_e.forEach=Bn,_e.forEachRight=Dn,_e.forIn=function(e,t){return null==e?e:Ys(e,nn(t,3),pr)},_e.forInRight=function(e,t){return null==e?e:Hs(e,nn(t,3),pr)},_e.forOwn=function(e,t){return e&&At(e,nn(t,3))},_e.forOwnRight=function(e,t){return e&&bt(e,nn(t,3))},_e.get=ur,_e.gt=Ba,_e.gte=Da,_e.has=function(e,t){return null!=e&&on(e,t,Pt)},_e.hasIn=cr,_e.head=Cn,_e.identity=Ar,_e.includes=function(e,t,i,n){return e=Un(e)?e:gr(e),i=i&&!n?sr(i):0,n=e.length,0>i&&(i=gs(n+i,0)),tr(e)?i<=n&&-1<e.indexOf(t,i):!!n&&-1<y(e,t,i)},_e.indexOf=function(e,t,i){var n=null==e?0:e.length;return n?(0>(i=null==i?0:sr(i))&&(i=gs(n+i,0)),y(e,t,i)):-1},_e.inRange=function(e,t,i){return t=rr(t),i===O?(i=t,t=0):i=rr(i),(e=or(e))>=fs(t,i)&&e<gs(t,i)},_e.invoke=ro,_e.isArguments=Oa,_e.isArray=qa,_e.isArrayBuffer=Ya,_e.isArrayLike=Un,_e.isArrayLikeObject=Wn,_e.isBoolean=function(e){return!0===e||!1===e||Jn(e)&&"[object Boolean]"==wt(e)},_e.isBuffer=Ha,_e.isDate=Ga,_e.isElement=function(e){return Jn(e)&&1===e.nodeType&&!er(e)},_e.isEmpty=function(e){if(null==e)return!0;if(Un(e)&&(qa(e)||"string"==typeof e||"function"==typeof e.splice||Ha(e)||Wa(e)||Oa(e)))return!e.length;var t=Qs(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(gn(e))return!Bt(e).length;for(var i in e)if(Yr.call(e,i))return!1;return!0},_e.isEqual=function(e,t){return Mt(e,t)},_e.isEqualWith=function(e,t,i){var n=(i="function"==typeof i?i:O)?i(e,t):O;return n===O?Mt(e,t,O,i):!!n},_e.isError=Xn,_e.isFinite=function(e){return"number"==typeof e&&ds(e)},_e.isFunction=jn,_e.isInteger=Qn,_e.isLength=Kn,_e.isMap=Fa,_e.isMatch=function(e,t){return e===t||kt(e,t,sn(t))},_e.isMatchWith=function(e,t,i){return i="function"==typeof i?i:O,kt(e,t,sn(t),i)},_e.isNaN=function(e){return $n(e)&&e!=+e},_e.isNative=function(e){if(Ks(e))throw new Vr("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Lt(e)},_e.isNil=function(e){return null==e},_e.isNull=function(e){return null===e},_e.isNumber=$n,_e.isObject=Zn,_e.isObjectLike=Jn,_e.isPlainObject=er,_e.isRegExp=za,_e.isSafeInteger=function(e){return Qn(e)&&-9007199254740991<=e&&9007199254740991>=e},_e.isSet=Ua,_e.isString=tr,_e.isSymbol=ir,_e.isTypedArray=Wa,_e.isUndefined=function(e){return e===O},_e.isWeakMap=function(e){return Jn(e)&&"[object WeakMap]"==Qs(e)},_e.isWeakSet=function(e){return Jn(e)&&"[object WeakSet]"==wt(e)},_e.join=function(e,t){return null==e?"":ps.call(e,t)},_e.kebabCase=po,_e.last=Vn,_e.lastIndexOf=function(e,t,i){var n=null==e?0:e.length;if(!n)return-1;var r=n;if(i!==O&&(r=0>(r=sr(i))?gs(n+r,0):fs(r,n-1)),t==t){for(i=r+1;i--&&e[i]!==t;);e=i}else e=f(e,v,r,!0);return e},_e.lowerCase=mo,_e.lowerFirst=go,_e.lt=Xa,_e.lte=ja,_e.max=function(e){return e&&e.length?yt(e,Ar,Tt):O},_e.maxBy=function(e,t){return e&&e.length?yt(e,nn(t,2),Tt):O},_e.mean=function(e){return A(e,Ar)},_e.meanBy=function(e,t){return A(e,nn(t,2))},_e.min=function(e){return e&&e.length?yt(e,Ar,Dt):O},_e.minBy=function(e,t){return e&&e.length?yt(e,nn(t,2),Dt):O},_e.stubArray=wr,_e.stubFalse=Tr,_e.stubObject=function(){return{}},_e.stubString=function(){return""},_e.stubTrue=function(){return!0},_e.multiply=Io,_e.nth=function(e,t){return e&&e.length?Gt(e,sr(t)):O},_e.noConflict=function(){return qe._===this&&(qe._=Ur),this},_e.noop=_r,_e.now=Pa,_e.pad=function(e,t,i){e=hr(e);var n=(t=sr(t))?B(e):0;return!t||n>=t?e:qi(hs(t=(t-n)/2),i)+e+qi(ls(t),i)},_e.padEnd=function(e,t,i){e=hr(e);var n=(t=sr(t))?B(e):0;return t&&n<t?e+qi(t-n,i):e},_e.padStart=function(e,t,i){e=hr(e);var n=(t=sr(t))?B(e):0;return t&&n<t?qi(t-n,i)+e:e},_e.parseInt=function(e,t,i){return i||null==t?t=0:t&&(t=+t),Es(hr(e).replace(se,""),t||0)},_e.random=function(e,t,i){if(i&&"boolean"!=typeof i&&dn(e,t,i)&&(t=i=O),i===O&&("boolean"==typeof t?(i=t,t=O):"boolean"==typeof e&&(i=e,e=O)),e===O&&t===O?(e=0,t=1):(e=rr(e),t===O?(t=e,e=0):t=rr(t)),e>t){var n=e;e=t,t=n}return i||e%1||t%1?(i=vs(),fs(e+i*(t-e+Ie("1e-"+((i+"").length-1))),t)):Xt(e,t)},_e.reduce=function(e,t,i){var n=qa(e)?d:_,r=3>arguments.length;return n(e,nn(t,4),i,r,Os)},_e.reduceRight=function(e,t,i){var n=qa(e)?p:_,r=3>arguments.length;return n(e,nn(t,4),i,r,qs)},_e.repeat=function(e,t,i){return t=(i?dn(e,t,i):t===O)?1:sr(t),jt(hr(e),t)},_e.replace=function(){var e=arguments,t=hr(e[0]);return 3>e.length?t:t.replace(e[1],e[2])},_e.result=function(e,t,i){var n=-1,r=(t=gi(t,e)).length;for(r||(r=1,e=O);++n<r;){var s=null==e?O:e[bn(t[n])];s===O&&(n=r,s=i),e=jn(s)?s.call(e):s}return e},_e.round=Bo,_e.runInContext=S,_e.sample=function(e){return(qa(e)?tt:Kt)(e)},_e.size=function(e){if(null==e)return 0;if(Un(e))return tr(e)?B(e):e.length;var t=Qs(e);return"[object Map]"==t||"[object Set]"==t?e.size:Bt(e).length},_e.snakeCase=fo,_e.some=function(e,t,i){var n=qa(e)?m:ti;return i&&dn(e,t,i)&&(t=O),n(e,nn(t,3))},_e.sortedIndex=function(e,t){return ii(e,t)},_e.sortedIndexBy=function(e,t,i){return ni(e,t,nn(i,2))},_e.sortedIndexOf=function(e,t){var i=null==e?0:e.length;if(i){var n=ii(e,t);if(n<i&&zn(e[n],t))return n}return-1},_e.sortedLastIndex=function(e,t){return ii(e,t,!0)},_e.sortedLastIndexBy=function(e,t,i){return ni(e,t,nn(i,2),!0)},_e.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var i=ii(e,t,!0)-1;if(zn(e[i],t))return i}return-1},_e.startCase=yo,_e.startsWith=function(e,t,i){return e=hr(e),i=null==i?0:ct(sr(i),0,e.length),t=ai(t),e.slice(i,i+t.length)==t},_e.subtract=Do,_e.sum=function(e){return e&&e.length?x(e,Ar):0},_e.sumBy=function(e,t){return e&&e.length?x(e,nn(t,2)):0},_e.template=function(e,t,i){var n=_e.templateSettings;i&&dn(e,t,i)&&(t=O),e=hr(e),t=Za({},t,n,Xi);var r,s,a=dr(i=Za({},t.imports,n.imports,Xi)),o=P(i,a),l=0;i=t.interpolate||Ae;var h="__p+='";i=kr((t.escape||Ae).source+"|"+i.source+"|"+(i===Z?de:Ae).source+"|"+(t.evaluate||Ae).source+"|$","g");var u="sourceURL"in t?"//# sourceURL="+t.sourceURL+"\n":"";if(e.replace(i,(function(t,i,n,a,o,u){return n||(n=a),h+=e.slice(l,u).replace(be,N),i&&(r=!0,h+="'+__e("+i+")+'"),o&&(s=!0,h+="';"+o+";\n__p+='"),n&&(h+="'+((__t=("+n+"))==null?'':__t)+'"),l=u+t.length,t})),h+="';",(t=t.variable)||(h="with(obj){"+h+"}"),h=(s?h.replace(G,""):h).replace(F,"$1").replace(z,"$1;"),h="function("+(t||"obj")+"){"+(t?"":"obj||(obj={});")+"var __t,__p=''"+(r?",__e=_.escape":"")+(s?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+h+"return __p}",(t=Ao((function(){return Rr(a,u+"return "+h).apply(O,o)}))).source=h,Xn(t))throw t;return t},_e.times=function(e,t){if(1>(e=sr(e))||9007199254740991<e)return[];var i=4294967295,n=fs(e,4294967295);for(e-=4294967295,n=w(n,t=nn(t));++i<e;)t(i);return n},_e.toFinite=rr,_e.toInteger=sr,_e.toLength=ar,_e.toLower=function(e){return hr(e).toLowerCase()},_e.toNumber=or,_e.toSafeInteger=function(e){return e?ct(sr(e),-9007199254740991,9007199254740991):0===e?e:0},_e.toString=hr,_e.toUpper=function(e){return hr(e).toUpperCase()},_e.trim=function(e,t,i){return(e=hr(e))&&(i||t===O)?e.replace(re,""):e&&(t=ai(t))?fi(e=D(e),t=V(e,i=D(t)),i=R(e,i)+1).join(""):e},_e.trimEnd=function(e,t,i){return(e=hr(e))&&(i||t===O)?e.replace(ae,""):e&&(t=ai(t))?fi(e=D(e),0,t=R(e,D(t))+1).join(""):e},_e.trimStart=function(e,t,i){return(e=hr(e))&&(i||t===O)?e.replace(se,""):e&&(t=ai(t))?fi(e=D(e),t=V(e,D(t))).join(""):e},_e.truncate=function(e,t){var i=30,n="...";if(Zn(t)){var r="separator"in t?t.separator:r;i="length"in t?sr(t.length):i,n="omission"in t?ai(t.omission):n}var s=(e=hr(e)).length;if(Ce.test(e)){var a=D(e);s=a.length}if(i>=s)return e;if(1>(s=i-B(n)))return n;if(i=a?fi(a,0,s).join(""):e.slice(0,s),r===O)return i+n;if(a&&(s+=i.length-s),za(r)){if(e.slice(s).search(r)){var o=i;for(r.global||(r=kr(r.source,hr(pe.exec(r))+"g")),r.lastIndex=0;a=r.exec(o);)var l=a.index;i=i.slice(0,l===O?s:l)}}else e.indexOf(ai(r),s)!=s&&(-1<(r=i.lastIndexOf(r))&&(i=i.slice(0,r)));return i+n},_e.unescape=function(e){return(e=hr(e))&&X.test(e)?e.replace(U,$e):e},_e.uniqueId=function(e){var t=++Hr;return hr(e)+t},_e.upperCase=Eo,_e.upperFirst=vo,_e.each=Bn,_e.eachRight=Dn,_e.first=Cn,Sr(_e,function(){var e={};return At(_e,(function(t,i){Yr.call(_e.prototype,i)||(e[i]=t)})),e}(),{chain:!1}),_e.VERSION="4.17.4",r("bind bindKey curry curryRight partial partialRight".split(" "),(function(e){_e[e].placeholder=_e})),r(["drop","take"],(function(e,t){Le.prototype[e]=function(i){i=i===O?1:gs(sr(i),0);var n=this.__filtered__&&!t?new Le(this):this.clone();return n.__filtered__?n.__takeCount__=fs(i,n.__takeCount__):n.__views__.push({size:fs(i,4294967295),type:e+(0>n.__dir__?"Right":"")}),n},Le.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),r(["filter","map","takeWhile"],(function(e,t){var i=t+1,n=1==i||3==i;Le.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:nn(e,3),type:i}),t.__filtered__=t.__filtered__||n,t}})),r(["head","last"],(function(e,t){var i="take"+(t?"Right":"");Le.prototype[e]=function(){return this[i](1).value()[0]}})),r(["initial","tail"],(function(e,t){var i="drop"+(t?"":"Right");Le.prototype[e]=function(){return this.__filtered__?new Le(this):this[i](1)}})),Le.prototype.compact=function(){return this.filter(Ar)},Le.prototype.find=function(e){return this.filter(e).head()},Le.prototype.findLast=function(e){return this.reverse().find(e)},Le.prototype.invokeMap=Qt((function(e,t){return"function"==typeof e?new Le(this):this.map((function(i){return Rt(i,e,t)}))})),Le.prototype.reject=function(e){return this.filter(Fn(nn(e)))},Le.prototype.slice=function(e,t){e=sr(e);var i=this;return i.__filtered__&&(0<e||0>t)?new Le(i):(0>e?i=i.takeRight(-e):e&&(i=i.drop(e)),t!==O&&(i=0>(t=sr(t))?i.dropRight(-t):i.take(t-e)),i)},Le.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Le.prototype.toArray=function(){return this.take(4294967295)},At(Le.prototype,(function(e,t){var i=/^(?:filter|find|map|reject)|While$/.test(t),n=/^(?:head|last)$/.test(t),r=_e[n?"take"+("last"==t?"Right":""):t],s=n||/^find/.test(t);r&&(_e.prototype[t]=function(){function t(e){return e=r.apply(_e,c([e],o)),n&&d?e[0]:e}var a=this.__wrapped__,o=n?[1]:arguments,l=a instanceof Le,h=o[0],u=l||qa(a);u&&i&&"function"==typeof h&&1!=h.length&&(l=u=!1);var d=this.__chain__,p=!!this.__actions__.length;h=s&&!d,l=l&&!p;return!s&&u?(a=l?a:new Le(this),(a=e.apply(a,o)).__actions__.push({func:In,args:[t],thisArg:O}),new ke(a,d)):h&&l?e.apply(this,o):(a=this.thru(t),h?n?a.value()[0]:a.value():a)})})),r("pop push shift sort splice unshift".split(" "),(function(e){var t=Br[e],i=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);_e.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var r=this.value();return t.apply(qa(r)?r:[],e)}return this[i]((function(i){return t.apply(qa(i)?i:[],e)}))}})),At(Le.prototype,(function(e,t){var i=_e[t];if(i){var n=i.name+"";(Cs[n]||(Cs[n]=[])).push({name:t,func:i})}})),Cs[Ii(O,2).name]=[{name:"wrapper",func:O}],Le.prototype.clone=function(){var e=new Le(this.__wrapped__);return e.__actions__=_i(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=_i(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=_i(this.__views__),e},Le.prototype.reverse=function(){if(this.__filtered__){var e=new Le(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Le.prototype.value=function(){var e,t=this.__wrapped__.value(),i=this.__dir__,n=qa(t),r=0>i,s=n?t.length:0;e=s;for(var a=this.__views__,o=0,l=-1,h=a.length;++l<h;){var u=a[l],c=u.size;switch(u.type){case"drop":o+=c;break;case"dropRight":e-=c;break;case"take":e=fs(e,o+c);break;case"takeRight":o=gs(o,e-c)}}if(a=(e={start:o,end:e}).start,e=(o=e.end)-a,a=r?o:a-1,l=(o=this.__iteratees__).length,h=0,u=fs(e,this.__takeCount__),!n||!r&&s==e&&u==e)return ui(t,this.__actions__);n=[];e:for(;e--&&h<u;){for(r=-1,s=t[a+=i];++r<l;){c=(d=o[r]).type;var d=(0,d.iteratee)(s);if(2==c)s=d;else if(!d){if(1==c)continue e;break e}}n[h++]=s}return n},_e.prototype.at=Ea,_e.prototype.chain=function(){return Ln(this)},_e.prototype.commit=function(){return new ke(this.value(),this.__chain__)},_e.prototype.next=function(){this.__values__===O&&(this.__values__=nr(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?O:this.__values__[this.__index__++]}},_e.prototype.plant=function(e){for(var t,i=this;i instanceof Te;){var n=xn(i);n.__index__=0,n.__values__=O,t?r.__wrapped__=n:t=n;var r=n;i=i.__wrapped__}return r.__wrapped__=e,t},_e.prototype.reverse=function(){var e=this.__wrapped__;return e instanceof Le?(this.__actions__.length&&(e=new Le(this)),(e=e.reverse()).__actions__.push({func:In,args:[Nn],thisArg:O}),new ke(e,this.__chain__)):this.thru(Nn)},_e.prototype.toJSON=_e.prototype.valueOf=_e.prototype.value=function(){return ui(this.__wrapped__,this.__actions__)},_e.prototype.first=_e.prototype.head,is&&(_e.prototype[is]=function(){return this}),_e}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(qe._=et,define((function(){return et}))):He?((He.exports=et)._=et,Ye._=et):qe._=et}.call(this),window.assertions=window.assertions||{},window.assertions.assertFunction=window.assertions.assertFunction||function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];if(!e){i=i.filter(e=>!!i),window.navigator&&"Microsoft Internet Explorer"===window.navigator.appName&&i.push("stack=\n"+(new Error).stack);const e=i.length>0?"Assertion failed: ":"Assertion failed";throw console&&console.error&&console.error(e,...i),window.phet&&phet.chipper&&phet.chipper.queryParameters&&phet.chipper.queryParameters.debugger,new Error(e+i.join("\n "))}},window.assert=window.assert||null,window.assertSlow=window.assertSlow||null,window.assertions.enableAssert=function(){window.assert=window.assertions.assertFunction,window.console&&window.console.log&&window.console.log("enabling assert")},window.assertions.disableAssert=function(){window.assert=null,window.console&&window.console.log&&window.console.log("disabling assert")},window.assertions.enableAssertSlow=function(){window.assertSlow=window.assertions.assertFunction,window.console&&window.console.log&&window.console.log("enabling assertSlow")},window.assertions.disableAssertSlow=function(){window.assertSlow=null,window.console&&window.console.log&&window.console.log("disabling assertSlow")},function(){window.phetio=window.phetio||{};window.phetio.PhetioIDUtils={append:function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return i.forEach(t=>{if(""===t)return;e+=(""===e?"":".")+t}),e},getComponentName:function(e){const t=e.lastIndexOf(".");return-1===t?e:e.substring(t+1,e.length)},getParentID:function(e){const t=e.lastIndexOf(".");return-1===t?null:e.substring(0,t)},getDOMElementID:function(e){return"phetioID:"+e},getScreenID:function(e){const t=[],i=e.split(".");for(let n=0;n<i.length;n++){const e=i[n];t.push(e);const r=e.indexOf("Screen");if(r>0&&r+"Screen".length===e.length)return t.join(".")}return null},getGroupElementIndex:function(e){return Number(e.split(window.phetio.PhetioIDUtils.GROUP_SEPARATOR)[1])},isAncestor:function(e,t){const i=e.split("."),n=t.split(".");for(let r=0;r<i.length;r++)if(i[r]!==n[r])return!1;return t!==e},getArchetypalPhetioID:function(e){const t=e.split(".");for(let i=0;i<t.length;i++){const e=t[i];if(e.endsWith("Capsule")&&i<t.length-1)t[i+1]="archetype",i++;else{const n=e.split("-").map(e=>e.includes("_")?"archetype":e);t[i]=n.join("-")}}return t.join(".")},SEPARATOR:".",GROUP_SEPARATOR:"_",INTER_TERM_SEPARATOR:"-",GENERAL_COMPONENT_NAME:"general",GLOBAL_COMPONENT_NAME:"global",HOME_SCREEN_COMPONENT_NAME:"homeScreen",MODEL_COMPONENT_NAME:"model",VIEW_COMPONENT_NAME:"view",CONTROLLER_COMPONENT_NAME:"controller",COLORS_COMPONENT_NAME:"colors",STRINGS_COMPONENT_NAME:"strings",ARCHETYPE:"archetype",CAPSULE_SUFFIX:"Capsule"}}(),window.LineBreaker=(()=>{const e=(()=>{function e(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function t(t,i){this.source=t,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=i,this.destLen=0,this.ltree=new e,this.dtree=new e}var i=new e,n=new e,r=new Uint8Array(30),s=new Uint16Array(30),a=new Uint8Array(30),o=new Uint16Array(30),l=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),h=new e,u=new Uint8Array(320);function c(e,t,i,n){var r,s;for(r=0;r<i;++r)e[r]=0;for(r=0;r<30-i;++r)e[r+i]=r/i|0;for(s=n,r=0;r<30;++r)t[r]=s,s+=1<<e[r]}var d=new Uint16Array(16);function p(e,t,i,n){var r,s;for(r=0;r<16;++r)e.table[r]=0;for(r=0;r<n;++r)e.table[t[i+r]]++;for(e.table[0]=0,s=0,r=0;r<16;++r)d[r]=s,s+=e.table[r];for(r=0;r<n;++r)t[i+r]&&(e.trans[d[t[i+r]]++]=r)}function m(e){e.bitcount--||(e.tag=e.source[e.sourceIndex++],e.bitcount=7);var t=1&e.tag;return e.tag>>>=1,t}function g(e,t,i){if(!t)return i;for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var n=e.tag&65535>>>16-t;return e.tag>>>=t,e.bitcount-=t,n+i}function f(e,t){for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var i=0,n=0,r=0,s=e.tag;do{n=2*n+(1&s),s>>>=1,++r,i+=t.table[r],n-=t.table[r]}while(n>=0);return e.tag=s,e.bitcount-=r,t.trans[i+n]}function y(e,t,i){var n,r,s,a,o,c;for(n=g(e,5,257),r=g(e,5,1),s=g(e,4,4),a=0;a<19;++a)u[a]=0;for(a=0;a<s;++a){var d=g(e,3,0);u[l[a]]=d}for(p(h,u,0,19),o=0;o<n+r;){var m=f(e,h);switch(m){case 16:var y=u[o-1];for(c=g(e,2,3);c;--c)u[o++]=y;break;case 17:for(c=g(e,3,3);c;--c)u[o++]=0;break;case 18:for(c=g(e,7,11);c;--c)u[o++]=0;break;default:u[o++]=m}}p(t,u,0,n),p(i,u,n,r)}function E(e,t,i){for(;;){var n,l,h,u,c=f(e,t);if(256===c)return 0;if(c<256)e.dest[e.destLen++]=c;else for(n=g(e,r[c-=257],s[c]),l=f(e,i),u=h=e.destLen-g(e,a[l],o[l]);u<h+n;++u)e.dest[e.destLen++]=e.dest[u]}}function v(e){for(var t,i;e.bitcount>8;)e.sourceIndex--,e.bitcount-=8;if((t=256*(t=e.source[e.sourceIndex+1])+e.source[e.sourceIndex])!==(65535&~(256*e.source[e.sourceIndex+3]+e.source[e.sourceIndex+2])))return-3;for(e.sourceIndex+=4,i=t;i;--i)e.dest[e.destLen++]=e.source[e.sourceIndex++];return e.bitcount=0,0}return function(e,t){var i;for(i=0;i<7;++i)e.table[i]=0;for(e.table[7]=24,e.table[8]=152,e.table[9]=112,i=0;i<24;++i)e.trans[i]=256+i;for(i=0;i<144;++i)e.trans[24+i]=i;for(i=0;i<8;++i)e.trans[168+i]=280+i;for(i=0;i<112;++i)e.trans[176+i]=144+i;for(i=0;i<5;++i)t.table[i]=0;for(t.table[5]=32,i=0;i<32;++i)t.trans[i]=i}(i,n),c(r,s,4,3),c(a,o,2,1),r[28]=0,s[28]=258,function(e,r){var s,a,o=new t(e,r);do{switch(s=m(o),g(o,2,0)){case 0:a=v(o);break;case 1:a=E(o,i,n);break;case 2:y(o,o.ltree,o.dtree),a=E(o,o.ltree,o.dtree);break;default:a=-3}if(0!==a)throw new Error("Data error")}while(!s);return o.destLen<o.dest.length?"function"==typeof o.dest.slice?o.dest.slice(0,o.destLen):o.dest.subarray(0,o.destLen):o.dest}})(),t=(()=>{const e=18===new Uint8Array(new Uint32Array([305419896]).buffer)[0],t=(e,t,i)=>{let n=e[t];e[t]=e[i],e[i]=n};return i=>{e&&(e=>{const i=e.length;for(let n=0;n<i;n+=4)t(e,n,n+3),t(e,n+1,n+2)})(i)}})(),i=new class{constructor(i){const n="function"==typeof i.readUInt32BE&&"function"==typeof i.slice;if(n||i instanceof Uint8Array){let r;if(n)this.highStart=i.readUInt32LE(0),this.errorValue=i.readUInt32LE(4),r=i.readUInt32LE(8),i=i.slice(12);else{const e=new DataView(i.buffer);this.highStart=e.getUint32(0,!0),this.errorValue=e.getUint32(4,!0),r=e.getUint32(8,!0),i=i.subarray(12)}i=e(i,new Uint8Array(r)),i=e(i,new Uint8Array(r)),t(i),this.data=new Uint32Array(i.buffer)}else({data:this.data,highStart:this.highStart,errorValue:this.errorValue}=i)}get(e){let t;return e<0||e>1114111?this.errorValue:e<55296||e>56319&&e<=65535?(t=(this.data[e>>5]<<2)+(31&e),this.data[t]):e<=65535?(t=(this.data[2048+(e-55296>>5)]<<2)+(31&e),this.data[t]):e<this.highStart?(t=this.data[2080+(e>>11)],t=this.data[t+(e>>5&63)],t=(t<<2)+(31&e),this.data[t]):this.data[this.data.length-4]}}((e=>{const t=window.atob(e),i=new Uint8Array(t.length);for(var n=0;n<t.length;n++)i[n]=t.charCodeAt(n);return i})("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")),n=[[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,3,4,4,4,4,4,4,4,4,4,4,4],[0,4,4,1,1,4,4,4,4,1,1,0,0,0,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0],[0,4,4,1,1,4,4,4,4,1,1,1,1,1,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0],[4,4,4,1,1,1,4,4,4,1,1,1,1,1,1,1,1,1,1,1,4,2,4,1,1,1,1,1,1,1,1,1,1],[1,4,4,1,1,1,4,4,4,1,1,1,1,1,1,1,1,1,1,1,4,2,4,1,1,1,1,1,1,1,1,1,1],[0,4,4,1,1,1,4,4,4,0,0,0,0,0,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0],[0,4,4,1,1,1,4,4,4,0,0,0,0,0,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0],[0,4,4,1,1,1,4,4,4,0,0,1,0,1,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0],[0,4,4,1,1,1,4,4,4,0,0,1,1,1,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0],[1,4,4,1,1,1,4,4,4,0,0,1,1,1,1,1,1,1,0,0,4,2,4,1,1,1,1,1,0,1,1,1,0],[1,4,4,1,1,1,4,4,4,0,0,1,1,1,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0],[1,4,4,1,1,1,4,4,4,1,1,1,1,1,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0],[1,4,4,1,1,1,4,4,4,1,1,1,1,1,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0],[1,4,4,1,1,1,4,4,4,1,1,1,1,1,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0],[0,4,4,1,1,1,4,4,4,0,1,0,0,0,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0],[0,4,4,1,1,1,4,4,4,0,0,0,0,0,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0],[0,4,4,1,0,1,4,4,4,0,0,1,0,0,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0],[0,4,4,1,0,1,4,4,4,0,0,0,0,0,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0],[1,4,4,1,1,1,4,4,4,1,1,1,1,1,1,1,1,1,1,1,4,2,4,1,1,1,1,1,1,1,1,1,0],[0,4,4,1,1,1,4,4,4,0,0,0,0,0,0,1,1,1,0,4,4,2,4,0,0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0],[1,4,4,1,1,1,4,4,4,1,1,1,1,1,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0],[1,4,4,1,1,1,4,4,4,1,1,1,1,1,1,1,1,1,1,1,4,2,4,1,1,1,1,1,1,1,1,1,1],[0,4,4,1,1,1,4,4,4,0,1,0,0,0,0,1,1,1,0,0,4,2,4,0,0,0,1,1,0,0,0,1,0],[0,4,4,1,1,1,4,4,4,0,1,0,0,0,0,1,1,1,0,0,4,2,4,0,0,0,0,1,0,0,0,1,0],[0,4,4,1,1,1,4,4,4,0,1,0,0,0,0,1,1,1,0,0,4,2,4,1,1,1,1,0,0,0,0,1,0],[0,4,4,1,1,1,4,4,4,0,1,0,0,0,0,1,1,1,0,0,4,2,4,0,0,0,1,1,0,0,0,1,0],[0,4,4,1,1,1,4,4,4,0,1,0,0,0,0,1,1,1,0,0,4,2,4,0,0,0,0,1,0,0,0,1,0],[0,4,4,1,1,1,4,4,4,0,0,0,0,0,0,1,1,1,0,0,4,2,4,0,0,0,0,0,1,0,0,1,0],[0,4,4,1,1,1,4,4,4,0,1,0,0,0,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,1,1,0],[0,4,4,1,1,1,4,4,4,0,1,0,0,0,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0],[1,4,4,1,1,1,4,4,4,1,1,1,1,1,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0],[0,4,4,1,1,0,4,4,4,0,0,0,0,0,0,0,0,0,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0]],r=function(e){switch(e){case 33:return 12;case 39:case 40:case 42:return 12;case 35:return 5;default:return e}},s=function(e){switch(e){case 37:case 38:return 34;case 41:return 22;default:return e}};class a{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.position=e,this.required=t}}return class{constructor(e){this.string=e,this.pos=0,this.lastPos=0,this.curClass=null,this.nextClass=null,this.LB8a=!1,this.LB21a=!1,this.LB30a=0}nextCodePoint(){const e=this.string.charCodeAt(this.pos++),t=this.string.charCodeAt(this.pos);return 55296<=e&&e<=56319&&56320<=t&&t<=57343?(this.pos++,1024*(e-55296)+(t-56320)+65536):e}nextCharClass(){return r(i.get(this.nextCodePoint()))}getSimpleBreak(){switch(this.nextClass){case 41:return!1;case 34:case 37:case 38:return this.curClass=34,!1;case 36:return this.curClass=36,!1}return null}getPairTableBreak(e){let t=!1;switch(n[this.curClass][this.nextClass]){case 0:t=!0;break;case 1:t=41===e;break;case 2:if(t=41===e,!t)return t=!1,t;break;case 3:if(41!==e)return t}return this.LB8a&&(t=!1),!this.LB21a||16!==this.curClass&&17!==this.curClass?this.LB21a=13===this.curClass:(t=!1,this.LB21a=!1),28===this.curClass?(this.LB30a++,2==this.LB30a&&28===this.nextClass&&(t=!0,this.LB30a=0)):this.LB30a=0,this.curClass=this.nextClass,t}nextBreak(){if(null==this.curClass){let e=this.nextCharClass();this.curClass=s(e),this.nextClass=e,this.LB8a=31===e,this.LB30a=0}for(;this.pos<this.string.length;){this.lastPos=this.pos;const e=this.nextClass;if(this.nextClass=this.nextCharClass(),34===this.curClass||36===this.curClass&&37!==this.nextClass)return this.curClass=s(r(this.nextClass)),new a(this.lastPos,!0);let t=this.getSimpleBreak();if(null===t&&(t=this.getPairTableBreak(e)),this.LB8a=31===this.nextClass,t)return new a(this.lastPos)}return this.lastPos<this.string.length?(this.lastPos=this.string.length,new a(this.string.length)):null}}})();class e{constructor(){this.ids=[],this.values=[],this.length=0}clear(){this.length=0}push(e,t){let i=this.length++;for(this.ids[i]=e,this.values[i]=t;i>0;){const e=i-1>>1,n=this.values[e];if(t>=n)break;this.ids[i]=this.ids[e],this.values[i]=n,i=e}this.ids[i]=e,this.values[i]=t}pop(){if(0===this.length)return;const e=this.ids[0];if(this.length--,this.length>0){const e=this.ids[0]=this.ids[this.length],t=this.values[0]=this.values[this.length],i=this.length>>1;let n=0;for(;n<i;){let e=1+(n<<1);const i=e+1;let r=this.ids[e],s=this.values[e];const a=this.values[i];if(i<this.length&&a<s&&(e=i,r=this.ids[i],s=a),s>=t)break;this.ids[n]=r,this.values[n]=s,n=e}this.ids[n]=e,this.values[n]=t}return e}peek(){if(0!==this.length)return this.ids[0]}peekValue(){if(0!==this.length)return this.values[0]}}function t(){}function i(){}window.FlatQueue=e,function(e){var t="object"==typeof exports&&exports,i="object"==typeof module&&module&&module.exports==t&&module,n="object"==typeof global&&global;n.global!==n&&n.window!==n||(e=n);var r=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,s=/[\x01-\x7F]/g,a=/[\x01-\t\x0B\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,o=/<\u20D2|=\u20E5|>\u20D2|\u205F\u200A|\u219D\u0338|\u2202\u0338|\u2220\u20D2|\u2229\uFE00|\u222A\uFE00|\u223C\u20D2|\u223D\u0331|\u223E\u0333|\u2242\u0338|\u224B\u0338|\u224D\u20D2|\u224E\u0338|\u224F\u0338|\u2250\u0338|\u2261\u20E5|\u2264\u20D2|\u2265\u20D2|\u2266\u0338|\u2267\u0338|\u2268\uFE00|\u2269\uFE00|\u226A\u0338|\u226A\u20D2|\u226B\u0338|\u226B\u20D2|\u227F\u0338|\u2282\u20D2|\u2283\u20D2|\u228A\uFE00|\u228B\uFE00|\u228F\u0338|\u2290\u0338|\u2293\uFE00|\u2294\uFE00|\u22B4\u20D2|\u22B5\u20D2|\u22D8\u0338|\u22D9\u0338|\u22DA\uFE00|\u22DB\uFE00|\u22F5\u0338|\u22F9\u0338|\u2933\u0338|\u29CF\u0338|\u29D0\u0338|\u2A6D\u0338|\u2A70\u0338|\u2A7D\u0338|\u2A7E\u0338|\u2AA1\u0338|\u2AA2\u0338|\u2AAC\uFE00|\u2AAD\uFE00|\u2AAF\u0338|\u2AB0\u0338|\u2AC5\u0338|\u2AC6\u0338|\u2ACB\uFE00|\u2ACC\uFE00|\u2AFD\u20E5|[\xA0-\u0113\u0116-\u0122\u0124-\u012B\u012E-\u014D\u0150-\u017E\u0192\u01B5\u01F5\u0237\u02C6\u02C7\u02D8-\u02DD\u0311\u0391-\u03A1\u03A3-\u03A9\u03B1-\u03C9\u03D1\u03D2\u03D5\u03D6\u03DC\u03DD\u03F0\u03F1\u03F5\u03F6\u0401-\u040C\u040E-\u044F\u0451-\u045C\u045E\u045F\u2002-\u2005\u2007-\u2010\u2013-\u2016\u2018-\u201A\u201C-\u201E\u2020-\u2022\u2025\u2026\u2030-\u2035\u2039\u203A\u203E\u2041\u2043\u2044\u204F\u2057\u205F-\u2063\u20AC\u20DB\u20DC\u2102\u2105\u210A-\u2113\u2115-\u211E\u2122\u2124\u2127-\u2129\u212C\u212D\u212F-\u2131\u2133-\u2138\u2145-\u2148\u2153-\u215E\u2190-\u219B\u219D-\u21A7\u21A9-\u21AE\u21B0-\u21B3\u21B5-\u21B7\u21BA-\u21DB\u21DD\u21E4\u21E5\u21F5\u21FD-\u2205\u2207-\u2209\u220B\u220C\u220F-\u2214\u2216-\u2218\u221A\u221D-\u2238\u223A-\u2257\u2259\u225A\u225C\u225F-\u2262\u2264-\u228B\u228D-\u229B\u229D-\u22A5\u22A7-\u22B0\u22B2-\u22BB\u22BD-\u22DB\u22DE-\u22E3\u22E6-\u22F7\u22F9-\u22FE\u2305\u2306\u2308-\u2310\u2312\u2313\u2315\u2316\u231C-\u231F\u2322\u2323\u232D\u232E\u2336\u233D\u233F\u237C\u23B0\u23B1\u23B4-\u23B6\u23DC-\u23DF\u23E2\u23E7\u2423\u24C8\u2500\u2502\u250C\u2510\u2514\u2518\u251C\u2524\u252C\u2534\u253C\u2550-\u256C\u2580\u2584\u2588\u2591-\u2593\u25A1\u25AA\u25AB\u25AD\u25AE\u25B1\u25B3-\u25B5\u25B8\u25B9\u25BD-\u25BF\u25C2\u25C3\u25CA\u25CB\u25EC\u25EF\u25F8-\u25FC\u2605\u2606\u260E\u2640\u2642\u2660\u2663\u2665\u2666\u266A\u266D-\u266F\u2713\u2717\u2720\u2736\u2758\u2772\u2773\u27C8\u27C9\u27E6-\u27ED\u27F5-\u27FA\u27FC\u27FF\u2902-\u2905\u290C-\u2913\u2916\u2919-\u2920\u2923-\u292A\u2933\u2935-\u2939\u293C\u293D\u2945\u2948-\u294B\u294E-\u2976\u2978\u2979\u297B-\u297F\u2985\u2986\u298B-\u2996\u299A\u299C\u299D\u29A4-\u29B7\u29B9\u29BB\u29BC\u29BE-\u29C5\u29C9\u29CD-\u29D0\u29DC-\u29DE\u29E3-\u29E5\u29EB\u29F4\u29F6\u2A00-\u2A02\u2A04\u2A06\u2A0C\u2A0D\u2A10-\u2A17\u2A22-\u2A27\u2A29\u2A2A\u2A2D-\u2A31\u2A33-\u2A3C\u2A3F\u2A40\u2A42-\u2A4D\u2A50\u2A53-\u2A58\u2A5A-\u2A5D\u2A5F\u2A66\u2A6A\u2A6D-\u2A75\u2A77-\u2A9A\u2A9D-\u2AA2\u2AA4-\u2AB0\u2AB3-\u2AC8\u2ACB\u2ACC\u2ACF-\u2ADB\u2AE4\u2AE6-\u2AE9\u2AEB-\u2AF3\u2AFD\uFB00-\uFB04]|\uD835[\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDCCF\uDD04\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDD6B]/g,l={"­":"shy","‌":"zwnj","‍":"zwj","‎":"lrm","⁣":"ic","⁢":"it","⁡":"af","‏":"rlm","​":"ZeroWidthSpace","⁠":"NoBreak","̑":"DownBreve","⃛":"tdot","⃜":"DotDot","\t":"Tab","\n":"NewLine"," ":"puncsp"," ":"MediumSpace"," ":"thinsp"," ":"hairsp"," ":"emsp13"," ":"ensp"," ":"emsp14"," ":"emsp"," ":"numsp"," ":"nbsp","  ":"ThickSpace","‾":"oline",_:"lowbar","‐":"dash","–":"ndash","—":"mdash","―":"horbar",",":"comma",";":"semi","⁏":"bsemi",":":"colon","⩴":"Colone","!":"excl","¡":"iexcl","?":"quest","¿":"iquest",".":"period","‥":"nldr","…":"mldr","·":"middot","'":"apos","‘":"lsquo","’":"rsquo","‚":"sbquo","‹":"lsaquo","›":"rsaquo",'"':"quot","“":"ldquo","”":"rdquo","„":"bdquo","«":"laquo","»":"raquo","(":"lpar",")":"rpar","[":"lsqb","]":"rsqb","{":"lcub","}":"rcub","⌈":"lceil","⌉":"rceil","⌊":"lfloor","⌋":"rfloor","⦅":"lopar","⦆":"ropar","⦋":"lbrke","⦌":"rbrke","⦍":"lbrkslu","⦎":"rbrksld","⦏":"lbrksld","⦐":"rbrkslu","⦑":"langd","⦒":"rangd","⦓":"lparlt","⦔":"rpargt","⦕":"gtlPar","⦖":"ltrPar","⟦":"lobrk","⟧":"robrk","⟨":"lang","⟩":"rang","⟪":"Lang","⟫":"Rang","⟬":"loang","⟭":"roang","❲":"lbbrk","❳":"rbbrk","‖":"Vert","§":"sect","¶":"para","@":"commat","*":"ast","/":"sol",undefined:null,"&":"amp","#":"num","%":"percnt","‰":"permil","‱":"pertenk","†":"dagger","‡":"Dagger","•":"bull","⁃":"hybull","′":"prime","″":"Prime","‴":"tprime","⁗":"qprime","‵":"bprime","⁁":"caret","`":"grave","´":"acute","˜":"tilde","^":"Hat","¯":"macr","˘":"breve","˙":"dot","¨":"die","˚":"ring","˝":"dblac","¸":"cedil","˛":"ogon","ˆ":"circ","ˇ":"caron","°":"deg","©":"copy","®":"reg","℗":"copysr","℘":"wp","℞":"rx","℧":"mho","℩":"iiota","←":"larr","↚":"nlarr","→":"rarr","↛":"nrarr","↑":"uarr","↓":"darr","↔":"harr","↮":"nharr","↕":"varr","↖":"nwarr","↗":"nearr","↘":"searr","↙":"swarr","↝":"rarrw","↝̸":"nrarrw","↞":"Larr","↟":"Uarr","↠":"Rarr","↡":"Darr","↢":"larrtl","↣":"rarrtl","↤":"mapstoleft","↥":"mapstoup","↦":"map","↧":"mapstodown","↩":"larrhk","↪":"rarrhk","↫":"larrlp","↬":"rarrlp","↭":"harrw","↰":"lsh","↱":"rsh","↲":"ldsh","↳":"rdsh","↵":"crarr","↶":"cularr","↷":"curarr","↺":"olarr","↻":"orarr","↼":"lharu","↽":"lhard","↾":"uharr","↿":"uharl","⇀":"rharu","⇁":"rhard","⇂":"dharr","⇃":"dharl","⇄":"rlarr","⇅":"udarr","⇆":"lrarr","⇇":"llarr","⇈":"uuarr","⇉":"rrarr","⇊":"ddarr","⇋":"lrhar","⇌":"rlhar","⇐":"lArr","⇍":"nlArr","⇑":"uArr","⇒":"rArr","⇏":"nrArr","⇓":"dArr","⇔":"iff","⇎":"nhArr","⇕":"vArr","⇖":"nwArr","⇗":"neArr","⇘":"seArr","⇙":"swArr","⇚":"lAarr","⇛":"rAarr","⇝":"zigrarr","⇤":"larrb","⇥":"rarrb","⇵":"duarr","⇽":"loarr","⇾":"roarr","⇿":"hoarr","∀":"forall","∁":"comp","∂":"part","∂̸":"npart","∃":"exist","∄":"nexist","∅":"empty","∇":"Del","∈":"in","∉":"notin","∋":"ni","∌":"notni","϶":"bepsi","∏":"prod","∐":"coprod","∑":"sum","+":"plus","±":"pm","÷":"div","×":"times","<":"lt","≮":"nlt","<⃒":"nvlt","=":"equals","≠":"ne","=⃥":"bne","⩵":"Equal",">":"gt","≯":"ngt",">⃒":"nvgt","¬":"not","|":"vert","¦":"brvbar","−":"minus","∓":"mp","∔":"plusdo","⁄":"frasl","∖":"setmn","∗":"lowast","∘":"compfn","√":"Sqrt","∝":"prop","∞":"infin","∟":"angrt","∠":"ang","∠⃒":"nang","∡":"angmsd","∢":"angsph","∣":"mid","∤":"nmid","∥":"par","∦":"npar","∧":"and","∨":"or","∩":"cap","∩︀":"caps","∪":"cup","∪︀":"cups","∫":"int","∬":"Int","∭":"tint","⨌":"qint","∮":"oint","∯":"Conint","∰":"Cconint","∱":"cwint","∲":"cwconint","∳":"awconint","∴":"there4","∵":"becaus","∶":"ratio","∷":"Colon","∸":"minusd","∺":"mDDot","∻":"homtht","∼":"sim","≁":"nsim","∼⃒":"nvsim","∽":"bsim","∽̱":"race","∾":"ac","∾̳":"acE","∿":"acd","≀":"wr","≂":"esim","≂̸":"nesim","≃":"sime","≄":"nsime","≅":"cong","≇":"ncong","≆":"simne","≈":"ap","≉":"nap","≊":"ape","≋":"apid","≋̸":"napid","≌":"bcong","≍":"CupCap","≭":"NotCupCap","≍⃒":"nvap","≎":"bump","≎̸":"nbump","≏":"bumpe","≏̸":"nbumpe","≐":"doteq","≐̸":"nedot","≑":"eDot","≒":"efDot","≓":"erDot","≔":"colone","≕":"ecolon","≖":"ecir","≗":"cire","≙":"wedgeq","≚":"veeeq","≜":"trie","≟":"equest","≡":"equiv","≢":"nequiv","≡⃥":"bnequiv","≤":"le","≰":"nle","≤⃒":"nvle","≥":"ge","≱":"nge","≥⃒":"nvge","≦":"lE","≦̸":"nlE","≧":"gE","≧̸":"ngE","≨︀":"lvnE","≨":"lnE","≩":"gnE","≩︀":"gvnE","≪":"ll","≪̸":"nLtv","≪⃒":"nLt","≫":"gg","≫̸":"nGtv","≫⃒":"nGt","≬":"twixt","≲":"lsim","≴":"nlsim","≳":"gsim","≵":"ngsim","≶":"lg","≸":"ntlg","≷":"gl","≹":"ntgl","≺":"pr","⊀":"npr","≻":"sc","⊁":"nsc","≼":"prcue","⋠":"nprcue","≽":"sccue","⋡":"nsccue","≾":"prsim","≿":"scsim","≿̸":"NotSucceedsTilde","⊂":"sub","⊄":"nsub","⊂⃒":"vnsub","⊃":"sup","⊅":"nsup","⊃⃒":"vnsup","⊆":"sube","⊈":"nsube","⊇":"supe","⊉":"nsupe","⊊︀":"vsubne","⊊":"subne","⊋︀":"vsupne","⊋":"supne","⊍":"cupdot","⊎":"uplus","⊏":"sqsub","⊏̸":"NotSquareSubset","⊐":"sqsup","⊐̸":"NotSquareSuperset","⊑":"sqsube","⋢":"nsqsube","⊒":"sqsupe","⋣":"nsqsupe","⊓":"sqcap","⊓︀":"sqcaps","⊔":"sqcup","⊔︀":"sqcups","⊕":"oplus","⊖":"ominus","⊗":"otimes","⊘":"osol","⊙":"odot","⊚":"ocir","⊛":"oast","⊝":"odash","⊞":"plusb","⊟":"minusb","⊠":"timesb","⊡":"sdotb","⊢":"vdash","⊬":"nvdash","⊣":"dashv","⊤":"top","⊥":"bot","⊧":"models","⊨":"vDash","⊭":"nvDash","⊩":"Vdash","⊮":"nVdash","⊪":"Vvdash","⊫":"VDash","⊯":"nVDash","⊰":"prurel","⊲":"vltri","⋪":"nltri","⊳":"vrtri","⋫":"nrtri","⊴":"ltrie","⋬":"nltrie","⊴⃒":"nvltrie","⊵":"rtrie","⋭":"nrtrie","⊵⃒":"nvrtrie","⊶":"origof","⊷":"imof","⊸":"mumap","⊹":"hercon","⊺":"intcal","⊻":"veebar","⊽":"barvee","⊾":"angrtvb","⊿":"lrtri","⋀":"Wedge","⋁":"Vee","⋂":"xcap","⋃":"xcup","⋄":"diam","⋅":"sdot","⋆":"Star","⋇":"divonx","⋈":"bowtie","⋉":"ltimes","⋊":"rtimes","⋋":"lthree","⋌":"rthree","⋍":"bsime","⋎":"cuvee","⋏":"cuwed","⋐":"Sub","⋑":"Sup","⋒":"Cap","⋓":"Cup","⋔":"fork","⋕":"epar","⋖":"ltdot","⋗":"gtdot","⋘":"Ll","⋘̸":"nLl","⋙":"Gg","⋙̸":"nGg","⋚︀":"lesg","⋚":"leg","⋛":"gel","⋛︀":"gesl","⋞":"cuepr","⋟":"cuesc","⋦":"lnsim","⋧":"gnsim","⋨":"prnsim","⋩":"scnsim","⋮":"vellip","⋯":"ctdot","⋰":"utdot","⋱":"dtdot","⋲":"disin","⋳":"isinsv","⋴":"isins","⋵":"isindot","⋵̸":"notindot","⋶":"notinvc","⋷":"notinvb","⋹":"isinE","⋹̸":"notinE","⋺":"nisd","⋻":"xnis","⋼":"nis","⋽":"notnivc","⋾":"notnivb","⌅":"barwed","⌆":"Barwed","⌌":"drcrop","⌍":"dlcrop","⌎":"urcrop","⌏":"ulcrop","⌐":"bnot","⌒":"profline","⌓":"profsurf","⌕":"telrec","⌖":"target","⌜":"ulcorn","⌝":"urcorn","⌞":"dlcorn","⌟":"drcorn","⌢":"frown","⌣":"smile","⌭":"cylcty","⌮":"profalar","⌶":"topbot","⌽":"ovbar","⌿":"solbar","⍼":"angzarr","⎰":"lmoust","⎱":"rmoust","⎴":"tbrk","⎵":"bbrk","⎶":"bbrktbrk","⏜":"OverParenthesis","⏝":"UnderParenthesis","⏞":"OverBrace","⏟":"UnderBrace","⏢":"trpezium","⏧":"elinters","␣":"blank","─":"boxh","│":"boxv","┌":"boxdr","┐":"boxdl","└":"boxur","┘":"boxul","├":"boxvr","┤":"boxvl","┬":"boxhd","┴":"boxhu","┼":"boxvh","═":"boxH","║":"boxV","╒":"boxdR","╓":"boxDr","╔":"boxDR","╕":"boxdL","╖":"boxDl","╗":"boxDL","╘":"boxuR","╙":"boxUr","╚":"boxUR","╛":"boxuL","╜":"boxUl","╝":"boxUL","╞":"boxvR","╟":"boxVr","╠":"boxVR","╡":"boxvL","╢":"boxVl","╣":"boxVL","╤":"boxHd","╥":"boxhD","╦":"boxHD","╧":"boxHu","╨":"boxhU","╩":"boxHU","╪":"boxvH","╫":"boxVh","╬":"boxVH","▀":"uhblk","▄":"lhblk","█":"block","░":"blk14","▒":"blk12","▓":"blk34","□":"squ","▪":"squf","▫":"EmptyVerySmallSquare","▭":"rect","▮":"marker","▱":"fltns","△":"xutri","▴":"utrif","▵":"utri","▸":"rtrif","▹":"rtri","▽":"xdtri","▾":"dtrif","▿":"dtri","◂":"ltrif","◃":"ltri","◊":"loz","○":"cir","◬":"tridot","◯":"xcirc","◸":"ultri","◹":"urtri","◺":"lltri","◻":"EmptySmallSquare","◼":"FilledSmallSquare","★":"starf","☆":"star","☎":"phone","♀":"female","♂":"male","♠":"spades","♣":"clubs","♥":"hearts","♦":"diams","♪":"sung","✓":"check","✗":"cross","✠":"malt","✶":"sext","❘":"VerticalSeparator","⟈":"bsolhsub","⟉":"suphsol","⟵":"xlarr","⟶":"xrarr","⟷":"xharr","⟸":"xlArr","⟹":"xrArr","⟺":"xhArr","⟼":"xmap","⟿":"dzigrarr","⤂":"nvlArr","⤃":"nvrArr","⤄":"nvHarr","⤅":"Map","⤌":"lbarr","⤍":"rbarr","⤎":"lBarr","⤏":"rBarr","⤐":"RBarr","⤑":"DDotrahd","⤒":"UpArrowBar","⤓":"DownArrowBar","⤖":"Rarrtl","⤙":"latail","⤚":"ratail","⤛":"lAtail","⤜":"rAtail","⤝":"larrfs","⤞":"rarrfs","⤟":"larrbfs","⤠":"rarrbfs","⤣":"nwarhk","⤤":"nearhk","⤥":"searhk","⤦":"swarhk","⤧":"nwnear","⤨":"toea","⤩":"tosa","⤪":"swnwar","⤳":"rarrc","⤳̸":"nrarrc","⤵":"cudarrr","⤶":"ldca","⤷":"rdca","⤸":"cudarrl","⤹":"larrpl","⤼":"curarrm","⤽":"cularrp","⥅":"rarrpl","⥈":"harrcir","⥉":"Uarrocir","⥊":"lurdshar","⥋":"ldrushar","⥎":"LeftRightVector","⥏":"RightUpDownVector","⥐":"DownLeftRightVector","⥑":"LeftUpDownVector","⥒":"LeftVectorBar","⥓":"RightVectorBar","⥔":"RightUpVectorBar","⥕":"RightDownVectorBar","⥖":"DownLeftVectorBar","⥗":"DownRightVectorBar","⥘":"LeftUpVectorBar","⥙":"LeftDownVectorBar","⥚":"LeftTeeVector","⥛":"RightTeeVector","⥜":"RightUpTeeVector","⥝":"RightDownTeeVector","⥞":"DownLeftTeeVector","⥟":"DownRightTeeVector","⥠":"LeftUpTeeVector","⥡":"LeftDownTeeVector","⥢":"lHar","⥣":"uHar","⥤":"rHar","⥥":"dHar","⥦":"luruhar","⥧":"ldrdhar","⥨":"ruluhar","⥩":"rdldhar","⥪":"lharul","⥫":"llhard","⥬":"rharul","⥭":"lrhard","⥮":"udhar","⥯":"duhar","⥰":"RoundImplies","⥱":"erarr","⥲":"simrarr","⥳":"larrsim","⥴":"rarrsim","⥵":"rarrap","⥶":"ltlarr","⥸":"gtrarr","⥹":"subrarr","⥻":"suplarr","⥼":"lfisht","⥽":"rfisht","⥾":"ufisht","⥿":"dfisht","⦚":"vzigzag","⦜":"vangrt","⦝":"angrtvbd","⦤":"ange","⦥":"range","⦦":"dwangle","⦧":"uwangle","⦨":"angmsdaa","⦩":"angmsdab","⦪":"angmsdac","⦫":"angmsdad","⦬":"angmsdae","⦭":"angmsdaf","⦮":"angmsdag","⦯":"angmsdah","⦰":"bemptyv","⦱":"demptyv","⦲":"cemptyv","⦳":"raemptyv","⦴":"laemptyv","⦵":"ohbar","⦶":"omid","⦷":"opar","⦹":"operp","⦻":"olcross","⦼":"odsold","⦾":"olcir","⦿":"ofcir","⧀":"olt","⧁":"ogt","⧂":"cirscir","⧃":"cirE","⧄":"solb","⧅":"bsolb","⧉":"boxbox","⧍":"trisb","⧎":"rtriltri","⧏":"LeftTriangleBar","⧏̸":"NotLeftTriangleBar","⧐":"RightTriangleBar","⧐̸":"NotRightTriangleBar","⧜":"iinfin","⧝":"infintie","⧞":"nvinfin","⧣":"eparsl","⧤":"smeparsl","⧥":"eqvparsl","⧫":"lozf","⧴":"RuleDelayed","⧶":"dsol","⨀":"xodot","⨁":"xoplus","⨂":"xotime","⨄":"xuplus","⨆":"xsqcup","⨍":"fpartint","⨐":"cirfnint","⨑":"awint","⨒":"rppolint","⨓":"scpolint","⨔":"npolint","⨕":"pointint","⨖":"quatint","⨗":"intlarhk","⨢":"pluscir","⨣":"plusacir","⨤":"simplus","⨥":"plusdu","⨦":"plussim","⨧":"plustwo","⨩":"mcomma","⨪":"minusdu","⨭":"loplus","⨮":"roplus","⨯":"Cross","⨰":"timesd","⨱":"timesbar","⨳":"smashp","⨴":"lotimes","⨵":"rotimes","⨶":"otimesas","⨷":"Otimes","⨸":"odiv","⨹":"triplus","⨺":"triminus","⨻":"tritime","⨼":"iprod","⨿":"amalg","⩀":"capdot","⩂":"ncup","⩃":"ncap","⩄":"capand","⩅":"cupor","⩆":"cupcap","⩇":"capcup","⩈":"cupbrcap","⩉":"capbrcup","⩊":"cupcup","⩋":"capcap","⩌":"ccups","⩍":"ccaps","⩐":"ccupssm","⩓":"And","⩔":"Or","⩕":"andand","⩖":"oror","⩗":"orslope","⩘":"andslope","⩚":"andv","⩛":"orv","⩜":"andd","⩝":"ord","⩟":"wedbar","⩦":"sdote","⩪":"simdot","⩭":"congdot","⩭̸":"ncongdot","⩮":"easter","⩯":"apacir","⩰":"apE","⩰̸":"napE","⩱":"eplus","⩲":"pluse","⩳":"Esim","⩷":"eDDot","⩸":"equivDD","⩹":"ltcir","⩺":"gtcir","⩻":"ltquest","⩼":"gtquest","⩽":"les","⩽̸":"nles","⩾":"ges","⩾̸":"nges","⩿":"lesdot","⪀":"gesdot","⪁":"lesdoto","⪂":"gesdoto","⪃":"lesdotor","⪄":"gesdotol","⪅":"lap","⪆":"gap","⪇":"lne","⪈":"gne","⪉":"lnap","⪊":"gnap","⪋":"lEg","⪌":"gEl","⪍":"lsime","⪎":"gsime","⪏":"lsimg","⪐":"gsiml","⪑":"lgE","⪒":"glE","⪓":"lesges","⪔":"gesles","⪕":"els","⪖":"egs","⪗":"elsdot","⪘":"egsdot","⪙":"el","⪚":"eg","⪝":"siml","⪞":"simg","⪟":"simlE","⪠":"simgE","⪡":"LessLess","⪡̸":"NotNestedLessLess","⪢":"GreaterGreater","⪢̸":"NotNestedGreaterGreater","⪤":"glj","⪥":"gla","⪦":"ltcc","⪧":"gtcc","⪨":"lescc","⪩":"gescc","⪪":"smt","⪫":"lat","⪬":"smte","⪬︀":"smtes","⪭":"late","⪭︀":"lates","⪮":"bumpE","⪯":"pre","⪯̸":"npre","⪰":"sce","⪰̸":"nsce","⪳":"prE","⪴":"scE","⪵":"prnE","⪶":"scnE","⪷":"prap","⪸":"scap","⪹":"prnap","⪺":"scnap","⪻":"Pr","⪼":"Sc","⪽":"subdot","⪾":"supdot","⪿":"subplus","⫀":"supplus","⫁":"submult","⫂":"supmult","⫃":"subedot","⫄":"supedot","⫅":"subE","⫅̸":"nsubE","⫆":"supE","⫆̸":"nsupE","⫇":"subsim","⫈":"supsim","⫋︀":"vsubnE","⫋":"subnE","⫌︀":"vsupnE","⫌":"supnE","⫏":"csub","⫐":"csup","⫑":"csube","⫒":"csupe","⫓":"subsup","⫔":"supsub","⫕":"subsub","⫖":"supsup","⫗":"suphsub","⫘":"supdsub","⫙":"forkv","⫚":"topfork","⫛":"mlcp","⫤":"Dashv","⫦":"Vdashl","⫧":"Barv","⫨":"vBar","⫩":"vBarv","⫫":"Vbar","⫬":"Not","⫭":"bNot","⫮":"rnmid","⫯":"cirmid","⫰":"midcir","⫱":"topcir","⫲":"nhpar","⫳":"parsim","⫽":"parsl","⫽⃥":"nparsl","♭":"flat","♮":"natur","♯":"sharp","¤":"curren","¢":"cent",$:"dollar","£":"pound","¥":"yen","€":"euro","¹":"sup1","½":"half","⅓":"frac13","¼":"frac14","⅕":"frac15","⅙":"frac16","⅛":"frac18","²":"sup2","⅔":"frac23","⅖":"frac25","³":"sup3","¾":"frac34","⅗":"frac35","⅜":"frac38","⅘":"frac45","⅚":"frac56","⅝":"frac58","⅞":"frac78","𝒶":"ascr","𝕒":"aopf","𝔞":"afr","𝔸":"Aopf","𝔄":"Afr","𝒜":"Ascr","ª":"ordf","á":"aacute","Á":"Aacute","à":"agrave","À":"Agrave","ă":"abreve","Ă":"Abreve","â":"acirc","Â":"Acirc","å":"aring","Å":"angst","ä":"auml","Ä":"Auml","ã":"atilde","Ã":"Atilde","ą":"aogon","Ą":"Aogon","ā":"amacr","Ā":"Amacr","æ":"aelig","Æ":"AElig","𝒷":"bscr","𝕓":"bopf","𝔟":"bfr","𝔹":"Bopf","ℬ":"Bscr","𝔅":"Bfr","𝔠":"cfr","𝒸":"cscr","𝕔":"copf","ℭ":"Cfr","𝒞":"Cscr","ℂ":"Copf","ć":"cacute","Ć":"Cacute","ĉ":"ccirc","Ĉ":"Ccirc","č":"ccaron","Č":"Ccaron","ċ":"cdot","Ċ":"Cdot","ç":"ccedil","Ç":"Ccedil","℅":"incare","𝔡":"dfr","ⅆ":"dd","𝕕":"dopf","𝒹":"dscr","𝒟":"Dscr","𝔇":"Dfr","ⅅ":"DD","𝔻":"Dopf","ď":"dcaron","Ď":"Dcaron","đ":"dstrok","Đ":"Dstrok","ð":"eth","Ð":"ETH","ⅇ":"ee","ℯ":"escr","𝔢":"efr","𝕖":"eopf","ℰ":"Escr","𝔈":"Efr","𝔼":"Eopf","é":"eacute","É":"Eacute","è":"egrave","È":"Egrave","ê":"ecirc","Ê":"Ecirc","ě":"ecaron","Ě":"Ecaron","ë":"euml","Ë":"Euml","ė":"edot","Ė":"Edot","ę":"eogon","Ę":"Eogon","ē":"emacr","Ē":"Emacr","𝔣":"ffr","𝕗":"fopf","𝒻":"fscr","𝔉":"Ffr","𝔽":"Fopf","ℱ":"Fscr","ﬀ":"fflig","ﬃ":"ffilig","ﬄ":"ffllig","ﬁ":"filig",fj:"fjlig","ﬂ":"fllig","ƒ":"fnof","ℊ":"gscr","𝕘":"gopf","𝔤":"gfr","𝒢":"Gscr","𝔾":"Gopf","𝔊":"Gfr","ǵ":"gacute","ğ":"gbreve","Ğ":"Gbreve","ĝ":"gcirc","Ĝ":"Gcirc","ġ":"gdot","Ġ":"Gdot","Ģ":"Gcedil","𝔥":"hfr","ℎ":"planckh","𝒽":"hscr","𝕙":"hopf","ℋ":"Hscr","ℌ":"Hfr","ℍ":"Hopf","ĥ":"hcirc","Ĥ":"Hcirc","ℏ":"hbar","ħ":"hstrok","Ħ":"Hstrok","𝕚":"iopf","𝔦":"ifr","𝒾":"iscr","ⅈ":"ii","𝕀":"Iopf","ℐ":"Iscr","ℑ":"Im","í":"iacute","Í":"Iacute","ì":"igrave","Ì":"Igrave","î":"icirc","Î":"Icirc","ï":"iuml","Ï":"Iuml","ĩ":"itilde","Ĩ":"Itilde","İ":"Idot","į":"iogon","Į":"Iogon","ī":"imacr","Ī":"Imacr","ĳ":"ijlig","Ĳ":"IJlig","ı":"imath","𝒿":"jscr","𝕛":"jopf","𝔧":"jfr","𝒥":"Jscr","𝔍":"Jfr","𝕁":"Jopf","ĵ":"jcirc","Ĵ":"Jcirc","ȷ":"jmath","𝕜":"kopf","𝓀":"kscr","𝔨":"kfr","𝒦":"Kscr","𝕂":"Kopf","𝔎":"Kfr","ķ":"kcedil","Ķ":"Kcedil","𝔩":"lfr","𝓁":"lscr","ℓ":"ell","𝕝":"lopf","ℒ":"Lscr","𝔏":"Lfr","𝕃":"Lopf","ĺ":"lacute","Ĺ":"Lacute","ľ":"lcaron","Ľ":"Lcaron","ļ":"lcedil","Ļ":"Lcedil","ł":"lstrok","Ł":"Lstrok","ŀ":"lmidot","Ŀ":"Lmidot","𝔪":"mfr","𝕞":"mopf","𝓂":"mscr","𝔐":"Mfr","𝕄":"Mopf","ℳ":"Mscr","𝔫":"nfr","𝕟":"nopf","𝓃":"nscr","ℕ":"Nopf","𝒩":"Nscr","𝔑":"Nfr","ń":"nacute","Ń":"Nacute","ň":"ncaron","Ň":"Ncaron","ñ":"ntilde","Ñ":"Ntilde","ņ":"ncedil","Ņ":"Ncedil","№":"numero","ŋ":"eng","Ŋ":"ENG","𝕠":"oopf","𝔬":"ofr","ℴ":"oscr","𝒪":"Oscr","𝔒":"Ofr","𝕆":"Oopf","º":"ordm","ó":"oacute","Ó":"Oacute","ò":"ograve","Ò":"Ograve","ô":"ocirc","Ô":"Ocirc","ö":"ouml","Ö":"Ouml","ő":"odblac","Ő":"Odblac","õ":"otilde","Õ":"Otilde","ø":"oslash","Ø":"Oslash","ō":"omacr","Ō":"Omacr","œ":"oelig","Œ":"OElig","𝔭":"pfr","𝓅":"pscr","𝕡":"popf","ℙ":"Popf","𝔓":"Pfr","𝒫":"Pscr","𝕢":"qopf","𝔮":"qfr","𝓆":"qscr","𝒬":"Qscr","𝔔":"Qfr","ℚ":"Qopf","ĸ":"kgreen","𝔯":"rfr","𝕣":"ropf","𝓇":"rscr","ℛ":"Rscr","ℜ":"Re","ℝ":"Ropf","ŕ":"racute","Ŕ":"Racute","ř":"rcaron","Ř":"Rcaron","ŗ":"rcedil","Ŗ":"Rcedil","𝕤":"sopf","𝓈":"sscr","𝔰":"sfr","𝕊":"Sopf","𝔖":"Sfr","𝒮":"Sscr","Ⓢ":"oS","ś":"sacute","Ś":"Sacute","ŝ":"scirc","Ŝ":"Scirc","š":"scaron","Š":"Scaron","ş":"scedil","Ş":"Scedil","ß":"szlig","𝔱":"tfr","𝓉":"tscr","𝕥":"topf","𝒯":"Tscr","𝔗":"Tfr","𝕋":"Topf","ť":"tcaron","Ť":"Tcaron","ţ":"tcedil","Ţ":"Tcedil","™":"trade","ŧ":"tstrok","Ŧ":"Tstrok","𝓊":"uscr","𝕦":"uopf","𝔲":"ufr","𝕌":"Uopf","𝔘":"Ufr","𝒰":"Uscr","ú":"uacute","Ú":"Uacute","ù":"ugrave","Ù":"Ugrave","ŭ":"ubreve","Ŭ":"Ubreve","û":"ucirc","Û":"Ucirc","ů":"uring","Ů":"Uring","ü":"uuml","Ü":"Uuml","ű":"udblac","Ű":"Udblac","ũ":"utilde","Ũ":"Utilde","ų":"uogon","Ų":"Uogon","ū":"umacr","Ū":"Umacr","𝔳":"vfr","𝕧":"vopf","𝓋":"vscr","𝔙":"Vfr","𝕍":"Vopf","𝒱":"Vscr","𝕨":"wopf","𝓌":"wscr","𝔴":"wfr","𝒲":"Wscr","𝕎":"Wopf","𝔚":"Wfr","ŵ":"wcirc","Ŵ":"Wcirc","𝔵":"xfr","𝓍":"xscr","𝕩":"xopf","𝕏":"Xopf","𝔛":"Xfr","𝒳":"Xscr","𝔶":"yfr","𝓎":"yscr","𝕪":"yopf","𝒴":"Yscr","𝔜":"Yfr","𝕐":"Yopf","ý":"yacute","Ý":"Yacute","ŷ":"ycirc","Ŷ":"Ycirc","ÿ":"yuml","Ÿ":"Yuml","𝓏":"zscr","𝔷":"zfr","𝕫":"zopf","ℨ":"Zfr","ℤ":"Zopf","𝒵":"Zscr","ź":"zacute","Ź":"Zacute","ž":"zcaron","Ž":"Zcaron","ż":"zdot","Ż":"Zdot","Ƶ":"imped","þ":"thorn","Þ":"THORN","ŉ":"napos","α":"alpha","Α":"Alpha","β":"beta","Β":"Beta","γ":"gamma","Γ":"Gamma","δ":"delta","Δ":"Delta","ε":"epsi","ϵ":"epsiv","Ε":"Epsilon","ϝ":"gammad","Ϝ":"Gammad","ζ":"zeta","Ζ":"Zeta","η":"eta","Η":"Eta","θ":"theta","ϑ":"thetav","Θ":"Theta","ι":"iota","Ι":"Iota","κ":"kappa","ϰ":"kappav","Κ":"Kappa","λ":"lambda","Λ":"Lambda","μ":"mu","µ":"micro","Μ":"Mu","ν":"nu","Ν":"Nu","ξ":"xi","Ξ":"Xi","ο":"omicron","Ο":"Omicron","π":"pi","ϖ":"piv","Π":"Pi","ρ":"rho","ϱ":"rhov","Ρ":"Rho","σ":"sigma","Σ":"Sigma","ς":"sigmaf","τ":"tau","Τ":"Tau","υ":"upsi","Υ":"Upsilon","ϒ":"Upsi","φ":"phi","ϕ":"phiv","Φ":"Phi","χ":"chi","Χ":"Chi","ψ":"psi","Ψ":"Psi","ω":"omega","Ω":"ohm","а":"acy","А":"Acy","б":"bcy","Б":"Bcy","в":"vcy","В":"Vcy","г":"gcy","Г":"Gcy","ѓ":"gjcy","Ѓ":"GJcy","д":"dcy","Д":"Dcy","ђ":"djcy","Ђ":"DJcy","е":"iecy","Е":"IEcy","ё":"iocy","Ё":"IOcy","є":"jukcy","Є":"Jukcy","ж":"zhcy","Ж":"ZHcy","з":"zcy","З":"Zcy","ѕ":"dscy","Ѕ":"DScy","и":"icy","И":"Icy","і":"iukcy","І":"Iukcy","ї":"yicy","Ї":"YIcy","й":"jcy","Й":"Jcy","ј":"jsercy","Ј":"Jsercy","к":"kcy","К":"Kcy","ќ":"kjcy","Ќ":"KJcy","л":"lcy","Л":"Lcy","љ":"ljcy","Љ":"LJcy","м":"mcy","М":"Mcy","н":"ncy","Н":"Ncy","њ":"njcy","Њ":"NJcy","о":"ocy","О":"Ocy","п":"pcy","П":"Pcy","р":"rcy","Р":"Rcy","с":"scy","С":"Scy","т":"tcy","Т":"Tcy","ћ":"tshcy","Ћ":"TSHcy","у":"ucy","У":"Ucy","ў":"ubrcy","Ў":"Ubrcy","ф":"fcy","Ф":"Fcy","х":"khcy","Х":"KHcy","ц":"tscy","Ц":"TScy","ч":"chcy","Ч":"CHcy","џ":"dzcy","Џ":"DZcy","ш":"shcy","Ш":"SHcy","щ":"shchcy","Щ":"SHCHcy","ъ":"hardcy","Ъ":"HARDcy","ы":"ycy","Ы":"Ycy","ь":"softcy","Ь":"SOFTcy","э":"ecy","Э":"Ecy","ю":"yucy","Ю":"YUcy","я":"yacy","Я":"YAcy","ℵ":"aleph","ℶ":"beth","ℷ":"gimel","ℸ":"daleth"},h=/["&'<>`]/g,u={'"':"&quot;","&":"&amp;","'":"&#x27;","<":"&lt;",">":"&gt;","`":"&#x60;"},c=/&#(?:[xX][^a-fA-F0-9]|[^0-9xX])/,d=/[\0-\x08\x0B\x0E-\x1F\x7F-\x9F\uFDD0-\uFDEF\uFFFE\uFFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F\uDBBF\uDBFF][\uDFFE\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,p=/&#([0-9]+)(;?)|&#[xX]([a-fA-F0-9]+)(;?)|&([0-9a-zA-Z]+);|&(Aacute|Agrave|Atilde|Ccedil|Eacute|Egrave|Iacute|Igrave|Ntilde|Oacute|Ograve|Oslash|Otilde|Uacute|Ugrave|Yacute|aacute|agrave|atilde|brvbar|ccedil|curren|divide|eacute|egrave|frac12|frac14|frac34|iacute|igrave|iquest|middot|ntilde|oacute|ograve|oslash|otilde|plusmn|uacute|ugrave|yacute|AElig|Acirc|Aring|Ecirc|Icirc|Ocirc|THORN|Ucirc|acirc|acute|aelig|aring|cedil|ecirc|icirc|iexcl|laquo|micro|ocirc|pound|raquo|szlig|thorn|times|ucirc|Auml|COPY|Euml|Iuml|Ouml|QUOT|Uuml|auml|cent|copy|euml|iuml|macr|nbsp|ordf|ordm|ouml|para|quot|sect|sup1|sup2|sup3|uuml|yuml|AMP|ETH|REG|amp|deg|eth|not|reg|shy|uml|yen|GT|LT|gt|lt)([=a-zA-Z0-9])?/g,m={aacute:"á",Aacute:"Á",abreve:"ă",Abreve:"Ă",ac:"∾",acd:"∿",acE:"∾̳",acirc:"â",Acirc:"Â",acute:"´",acy:"а",Acy:"А",aelig:"æ",AElig:"Æ",af:"⁡",afr:"𝔞",Afr:"𝔄",agrave:"à",Agrave:"À",alefsym:"ℵ",aleph:"ℵ",alpha:"α",Alpha:"Α",amacr:"ā",Amacr:"Ā",amalg:"⨿",amp:"&",AMP:"&",and:"∧",And:"⩓",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",aogon:"ą",Aogon:"Ą",aopf:"𝕒",Aopf:"𝔸",ap:"≈",apacir:"⩯",ape:"≊",apE:"⩰",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",aring:"å",Aring:"Å",ascr:"𝒶",Ascr:"𝒜",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",atilde:"ã",Atilde:"Ã",auml:"ä",Auml:"Ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",barwed:"⌅",Barwed:"⌆",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",bcy:"б",Bcy:"Б",bdquo:"„",becaus:"∵",because:"∵",Because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",beta:"β",Beta:"Β",beth:"ℶ",between:"≬",bfr:"𝔟",Bfr:"𝔅",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bnot:"⌐",bNot:"⫭",bopf:"𝕓",Bopf:"𝔹",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxdl:"┐",boxdL:"╕",boxDl:"╖",boxDL:"╗",boxdr:"┌",boxdR:"╒",boxDr:"╓",boxDR:"╔",boxh:"─",boxH:"═",boxhd:"┬",boxhD:"╥",boxHd:"╤",boxHD:"╦",boxhu:"┴",boxhU:"╨",boxHu:"╧",boxHU:"╩",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxul:"┘",boxuL:"╛",boxUl:"╜",boxUL:"╝",boxur:"└",boxuR:"╘",boxUr:"╙",boxUR:"╚",boxv:"│",boxV:"║",boxvh:"┼",boxvH:"╪",boxVh:"╫",boxVH:"╬",boxvl:"┤",boxvL:"╡",boxVl:"╢",boxVL:"╣",boxvr:"├",boxvR:"╞",boxVr:"╟",boxVR:"╠",bprime:"‵",breve:"˘",Breve:"˘",brvbar:"¦",bscr:"𝒷",Bscr:"ℬ",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpe:"≏",bumpE:"⪮",bumpeq:"≏",Bumpeq:"≎",cacute:"ć",Cacute:"Ć",cap:"∩",Cap:"⋒",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",ccaron:"č",Ccaron:"Č",ccedil:"ç",Ccedil:"Ç",ccirc:"ĉ",Ccirc:"Ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",cdot:"ċ",Cdot:"Ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",centerdot:"·",CenterDot:"·",cfr:"𝔠",Cfr:"ℭ",chcy:"ч",CHcy:"Ч",check:"✓",checkmark:"✓",chi:"χ",Chi:"Χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cire:"≗",cirE:"⧃",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",colon:":",Colon:"∷",colone:"≔",Colone:"⩴",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",conint:"∮",Conint:"∯",ContourIntegral:"∮",copf:"𝕔",Copf:"ℂ",coprod:"∐",Coproduct:"∐",copy:"©",COPY:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",cross:"✗",Cross:"⨯",cscr:"𝒸",Cscr:"𝒞",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",cup:"∪",Cup:"⋓",cupbrcap:"⩈",cupcap:"⩆",CupCap:"≍",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",dagger:"†",Dagger:"‡",daleth:"ℸ",darr:"↓",dArr:"⇓",Darr:"↡",dash:"‐",dashv:"⊣",Dashv:"⫤",dbkarow:"⤏",dblac:"˝",dcaron:"ď",Dcaron:"Ď",dcy:"д",Dcy:"Д",dd:"ⅆ",DD:"ⅅ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",delta:"δ",Delta:"Δ",demptyv:"⦱",dfisht:"⥿",dfr:"𝔡",Dfr:"𝔇",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",diamond:"⋄",Diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",djcy:"ђ",DJcy:"Ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",dopf:"𝕕",Dopf:"𝔻",dot:"˙",Dot:"¨",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",downarrow:"↓",Downarrow:"⇓",DownArrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",dscr:"𝒹",Dscr:"𝒟",dscy:"ѕ",DScy:"Ѕ",dsol:"⧶",dstrok:"đ",Dstrok:"Đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",dzcy:"џ",DZcy:"Џ",dzigrarr:"⟿",eacute:"é",Eacute:"É",easter:"⩮",ecaron:"ě",Ecaron:"Ě",ecir:"≖",ecirc:"ê",Ecirc:"Ê",ecolon:"≕",ecy:"э",Ecy:"Э",eDDot:"⩷",edot:"ė",eDot:"≑",Edot:"Ė",ee:"ⅇ",efDot:"≒",efr:"𝔢",Efr:"𝔈",eg:"⪚",egrave:"è",Egrave:"È",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",emacr:"ē",Emacr:"Ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",eng:"ŋ",ENG:"Ŋ",ensp:" ",eogon:"ę",Eogon:"Ę",eopf:"𝕖",Eopf:"𝔼",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",epsilon:"ε",Epsilon:"Ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",escr:"ℯ",Escr:"ℰ",esdot:"≐",esim:"≂",Esim:"⩳",eta:"η",Eta:"Η",eth:"ð",ETH:"Ð",euml:"ë",Euml:"Ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",exponentiale:"ⅇ",ExponentialE:"ⅇ",fallingdotseq:"≒",fcy:"ф",Fcy:"Ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",ffr:"𝔣",Ffr:"𝔉",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",fopf:"𝕗",Fopf:"𝔽",forall:"∀",ForAll:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",fscr:"𝒻",Fscr:"ℱ",gacute:"ǵ",gamma:"γ",Gamma:"Γ",gammad:"ϝ",Gammad:"Ϝ",gap:"⪆",gbreve:"ğ",Gbreve:"Ğ",Gcedil:"Ģ",gcirc:"ĝ",Gcirc:"Ĝ",gcy:"г",Gcy:"Г",gdot:"ġ",Gdot:"Ġ",ge:"≥",gE:"≧",gel:"⋛",gEl:"⪌",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",gfr:"𝔤",Gfr:"𝔊",gg:"≫",Gg:"⋙",ggg:"⋙",gimel:"ℷ",gjcy:"ѓ",GJcy:"Ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gne:"⪈",gnE:"≩",gneq:"⪈",gneqq:"≩",gnsim:"⋧",gopf:"𝕘",Gopf:"𝔾",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",gscr:"ℊ",Gscr:"𝒢",gsim:"≳",gsime:"⪎",gsiml:"⪐",gt:">",Gt:"≫",GT:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",hardcy:"ъ",HARDcy:"Ъ",harr:"↔",hArr:"⇔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",hcirc:"ĥ",Hcirc:"Ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",hfr:"𝔥",Hfr:"ℌ",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",hopf:"𝕙",Hopf:"ℍ",horbar:"―",HorizontalLine:"─",hscr:"𝒽",Hscr:"ℋ",hslash:"ℏ",hstrok:"ħ",Hstrok:"Ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",iacute:"í",Iacute:"Í",ic:"⁣",icirc:"î",Icirc:"Î",icy:"и",Icy:"И",Idot:"İ",iecy:"е",IEcy:"Е",iexcl:"¡",iff:"⇔",ifr:"𝔦",Ifr:"ℑ",igrave:"ì",Igrave:"Ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",ijlig:"ĳ",IJlig:"Ĳ",Im:"ℑ",imacr:"ī",Imacr:"Ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",int:"∫",Int:"∬",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",iocy:"ё",IOcy:"Ё",iogon:"į",Iogon:"Į",iopf:"𝕚",Iopf:"𝕀",iota:"ι",Iota:"Ι",iprod:"⨼",iquest:"¿",iscr:"𝒾",Iscr:"ℐ",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",itilde:"ĩ",Itilde:"Ĩ",iukcy:"і",Iukcy:"І",iuml:"ï",Iuml:"Ï",jcirc:"ĵ",Jcirc:"Ĵ",jcy:"й",Jcy:"Й",jfr:"𝔧",Jfr:"𝔍",jmath:"ȷ",jopf:"𝕛",Jopf:"𝕁",jscr:"𝒿",Jscr:"𝒥",jsercy:"ј",Jsercy:"Ј",jukcy:"є",Jukcy:"Є",kappa:"κ",Kappa:"Κ",kappav:"ϰ",kcedil:"ķ",Kcedil:"Ķ",kcy:"к",Kcy:"К",kfr:"𝔨",Kfr:"𝔎",kgreen:"ĸ",khcy:"х",KHcy:"Х",kjcy:"ќ",KJcy:"Ќ",kopf:"𝕜",Kopf:"𝕂",kscr:"𝓀",Kscr:"𝒦",lAarr:"⇚",lacute:"ĺ",Lacute:"Ĺ",laemptyv:"⦴",lagran:"ℒ",lambda:"λ",Lambda:"Λ",lang:"⟨",Lang:"⟪",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",larr:"←",lArr:"⇐",Larr:"↞",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",latail:"⤙",lAtail:"⤛",late:"⪭",lates:"⪭︀",lbarr:"⤌",lBarr:"⤎",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",lcaron:"ľ",Lcaron:"Ľ",lcedil:"ļ",Lcedil:"Ļ",lceil:"⌈",lcub:"{",lcy:"л",Lcy:"Л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",le:"≤",lE:"≦",LeftAngleBracket:"⟨",leftarrow:"←",Leftarrow:"⇐",LeftArrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",leftrightarrow:"↔",Leftrightarrow:"⇔",LeftRightArrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",leg:"⋚",lEg:"⪋",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",lfr:"𝔩",Lfr:"𝔏",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",ljcy:"љ",LJcy:"Љ",ll:"≪",Ll:"⋘",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",lmidot:"ŀ",Lmidot:"Ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lne:"⪇",lnE:"≨",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",longleftarrow:"⟵",Longleftarrow:"⟸",LongLeftArrow:"⟵",longleftrightarrow:"⟷",Longleftrightarrow:"⟺",LongLeftRightArrow:"⟷",longmapsto:"⟼",longrightarrow:"⟶",Longrightarrow:"⟹",LongRightArrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",lopf:"𝕝",Lopf:"𝕃",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",lscr:"𝓁",Lscr:"ℒ",lsh:"↰",Lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",lstrok:"ł",Lstrok:"Ł",lt:"<",Lt:"≪",LT:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",map:"↦",Map:"⤅",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",mcy:"м",Mcy:"М",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",mfr:"𝔪",Mfr:"𝔐",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",mopf:"𝕞",Mopf:"𝕄",mp:"∓",mscr:"𝓂",Mscr:"ℳ",mstpos:"∾",mu:"μ",Mu:"Μ",multimap:"⊸",mumap:"⊸",nabla:"∇",nacute:"ń",Nacute:"Ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",ncaron:"ň",Ncaron:"Ň",ncedil:"ņ",Ncedil:"Ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",ncy:"н",Ncy:"Н",ndash:"–",ne:"≠",nearhk:"⤤",nearr:"↗",neArr:"⇗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:"\n",nexist:"∄",nexists:"∄",nfr:"𝔫",Nfr:"𝔑",nge:"≱",ngE:"≧̸",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",ngt:"≯",nGt:"≫⃒",ngtr:"≯",nGtv:"≫̸",nharr:"↮",nhArr:"⇎",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",njcy:"њ",NJcy:"Њ",nlarr:"↚",nlArr:"⇍",nldr:"‥",nle:"≰",nlE:"≦̸",nleftarrow:"↚",nLeftarrow:"⇍",nleftrightarrow:"↮",nLeftrightarrow:"⇎",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nlt:"≮",nLt:"≪⃒",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",nopf:"𝕟",Nopf:"ℕ",not:"¬",Not:"⫬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrarr:"↛",nrArr:"⇏",nrarrc:"⤳̸",nrarrw:"↝̸",nrightarrow:"↛",nRightarrow:"⇏",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",nscr:"𝓃",Nscr:"𝒩",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsube:"⊈",nsubE:"⫅̸",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupe:"⊉",nsupE:"⫆̸",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",ntilde:"ñ",Ntilde:"Ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",nu:"ν",Nu:"Ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nvdash:"⊬",nvDash:"⊭",nVdash:"⊮",nVDash:"⊯",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwarr:"↖",nwArr:"⇖",nwarrow:"↖",nwnear:"⤧",oacute:"ó",Oacute:"Ó",oast:"⊛",ocir:"⊚",ocirc:"ô",Ocirc:"Ô",ocy:"о",Ocy:"О",odash:"⊝",odblac:"ő",Odblac:"Ő",odiv:"⨸",odot:"⊙",odsold:"⦼",oelig:"œ",OElig:"Œ",ofcir:"⦿",ofr:"𝔬",Ofr:"𝔒",ogon:"˛",ograve:"ò",Ograve:"Ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",omacr:"ō",Omacr:"Ō",omega:"ω",Omega:"Ω",omicron:"ο",Omicron:"Ο",omid:"⦶",ominus:"⊖",oopf:"𝕠",Oopf:"𝕆",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",or:"∨",Or:"⩔",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",oscr:"ℴ",Oscr:"𝒪",oslash:"ø",Oslash:"Ø",osol:"⊘",otilde:"õ",Otilde:"Õ",otimes:"⊗",Otimes:"⨷",otimesas:"⨶",ouml:"ö",Ouml:"Ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",pcy:"п",Pcy:"П",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",pfr:"𝔭",Pfr:"𝔓",phi:"φ",Phi:"Φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",pi:"π",Pi:"Π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",popf:"𝕡",Popf:"ℙ",pound:"£",pr:"≺",Pr:"⪻",prap:"⪷",prcue:"≼",pre:"⪯",prE:"⪳",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",prime:"′",Prime:"″",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",pscr:"𝓅",Pscr:"𝒫",psi:"ψ",Psi:"Ψ",puncsp:" ",qfr:"𝔮",Qfr:"𝔔",qint:"⨌",qopf:"𝕢",Qopf:"ℚ",qprime:"⁗",qscr:"𝓆",Qscr:"𝒬",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",quot:'"',QUOT:'"',rAarr:"⇛",race:"∽̱",racute:"ŕ",Racute:"Ŕ",radic:"√",raemptyv:"⦳",rang:"⟩",Rang:"⟫",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",rarr:"→",rArr:"⇒",Rarr:"↠",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",rarrtl:"↣",Rarrtl:"⤖",rarrw:"↝",ratail:"⤚",rAtail:"⤜",ratio:"∶",rationals:"ℚ",rbarr:"⤍",rBarr:"⤏",RBarr:"⤐",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",rcaron:"ř",Rcaron:"Ř",rcedil:"ŗ",Rcedil:"Ŗ",rceil:"⌉",rcub:"}",rcy:"р",Rcy:"Р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",reg:"®",REG:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",rfr:"𝔯",Rfr:"ℜ",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",rho:"ρ",Rho:"Ρ",rhov:"ϱ",RightAngleBracket:"⟩",rightarrow:"→",Rightarrow:"⇒",RightArrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",ropf:"𝕣",Ropf:"ℝ",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",rscr:"𝓇",Rscr:"ℛ",rsh:"↱",Rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",sacute:"ś",Sacute:"Ś",sbquo:"‚",sc:"≻",Sc:"⪼",scap:"⪸",scaron:"š",Scaron:"Š",sccue:"≽",sce:"⪰",scE:"⪴",scedil:"ş",Scedil:"Ş",scirc:"ŝ",Scirc:"Ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",scy:"с",Scy:"С",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",searr:"↘",seArr:"⇘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",sfr:"𝔰",Sfr:"𝔖",sfrown:"⌢",sharp:"♯",shchcy:"щ",SHCHcy:"Щ",shcy:"ш",SHcy:"Ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",sigma:"σ",Sigma:"Σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",softcy:"ь",SOFTcy:"Ь",sol:"/",solb:"⧄",solbar:"⌿",sopf:"𝕤",Sopf:"𝕊",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",square:"□",Square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",sscr:"𝓈",Sscr:"𝒮",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",star:"☆",Star:"⋆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",sub:"⊂",Sub:"⋐",subdot:"⪽",sube:"⊆",subE:"⫅",subedot:"⫃",submult:"⫁",subne:"⊊",subnE:"⫋",subplus:"⪿",subrarr:"⥹",subset:"⊂",Subset:"⋐",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",sum:"∑",Sum:"∑",sung:"♪",sup:"⊃",Sup:"⋑",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supe:"⊇",supE:"⫆",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supne:"⊋",supnE:"⫌",supplus:"⫀",supset:"⊃",Supset:"⋑",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swarr:"↙",swArr:"⇙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"\t",target:"⌖",tau:"τ",Tau:"Τ",tbrk:"⎴",tcaron:"ť",Tcaron:"Ť",tcedil:"ţ",Tcedil:"Ţ",tcy:"т",Tcy:"Т",tdot:"⃛",telrec:"⌕",tfr:"𝔱",Tfr:"𝔗",there4:"∴",therefore:"∴",Therefore:"∴",theta:"θ",Theta:"Θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",thorn:"þ",THORN:"Þ",tilde:"˜",Tilde:"∼",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",topf:"𝕥",Topf:"𝕋",topfork:"⫚",tosa:"⤩",tprime:"‴",trade:"™",TRADE:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",tscr:"𝓉",Tscr:"𝒯",tscy:"ц",TScy:"Ц",tshcy:"ћ",TSHcy:"Ћ",tstrok:"ŧ",Tstrok:"Ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",uacute:"ú",Uacute:"Ú",uarr:"↑",uArr:"⇑",Uarr:"↟",Uarrocir:"⥉",ubrcy:"ў",Ubrcy:"Ў",ubreve:"ŭ",Ubreve:"Ŭ",ucirc:"û",Ucirc:"Û",ucy:"у",Ucy:"У",udarr:"⇅",udblac:"ű",Udblac:"Ű",udhar:"⥮",ufisht:"⥾",ufr:"𝔲",Ufr:"𝔘",ugrave:"ù",Ugrave:"Ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",umacr:"ū",Umacr:"Ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",uogon:"ų",Uogon:"Ų",uopf:"𝕦",Uopf:"𝕌",uparrow:"↑",Uparrow:"⇑",UpArrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",updownarrow:"↕",Updownarrow:"⇕",UpDownArrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",upsi:"υ",Upsi:"ϒ",upsih:"ϒ",upsilon:"υ",Upsilon:"Υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",uring:"ů",Uring:"Ů",urtri:"◹",uscr:"𝓊",Uscr:"𝒰",utdot:"⋰",utilde:"ũ",Utilde:"Ũ",utri:"▵",utrif:"▴",uuarr:"⇈",uuml:"ü",Uuml:"Ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",varr:"↕",vArr:"⇕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",vBar:"⫨",Vbar:"⫫",vBarv:"⫩",vcy:"в",Vcy:"В",vdash:"⊢",vDash:"⊨",Vdash:"⊩",VDash:"⊫",Vdashl:"⫦",vee:"∨",Vee:"⋁",veebar:"⊻",veeeq:"≚",vellip:"⋮",verbar:"|",Verbar:"‖",vert:"|",Vert:"‖",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",vfr:"𝔳",Vfr:"𝔙",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",vopf:"𝕧",Vopf:"𝕍",vprop:"∝",vrtri:"⊳",vscr:"𝓋",Vscr:"𝒱",vsubne:"⊊︀",vsubnE:"⫋︀",vsupne:"⊋︀",vsupnE:"⫌︀",Vvdash:"⊪",vzigzag:"⦚",wcirc:"ŵ",Wcirc:"Ŵ",wedbar:"⩟",wedge:"∧",Wedge:"⋀",wedgeq:"≙",weierp:"℘",wfr:"𝔴",Wfr:"𝔚",wopf:"𝕨",Wopf:"𝕎",wp:"℘",wr:"≀",wreath:"≀",wscr:"𝓌",Wscr:"𝒲",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",xfr:"𝔵",Xfr:"𝔛",xharr:"⟷",xhArr:"⟺",xi:"ξ",Xi:"Ξ",xlarr:"⟵",xlArr:"⟸",xmap:"⟼",xnis:"⋻",xodot:"⨀",xopf:"𝕩",Xopf:"𝕏",xoplus:"⨁",xotime:"⨂",xrarr:"⟶",xrArr:"⟹",xscr:"𝓍",Xscr:"𝒳",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",yacute:"ý",Yacute:"Ý",yacy:"я",YAcy:"Я",ycirc:"ŷ",Ycirc:"Ŷ",ycy:"ы",Ycy:"Ы",yen:"¥",yfr:"𝔶",Yfr:"𝔜",yicy:"ї",YIcy:"Ї",yopf:"𝕪",Yopf:"𝕐",yscr:"𝓎",Yscr:"𝒴",yucy:"ю",YUcy:"Ю",yuml:"ÿ",Yuml:"Ÿ",zacute:"ź",Zacute:"Ź",zcaron:"ž",Zcaron:"Ž",zcy:"з",Zcy:"З",zdot:"ż",Zdot:"Ż",zeetrf:"ℨ",ZeroWidthSpace:"​",zeta:"ζ",Zeta:"Ζ",zfr:"𝔷",Zfr:"ℨ",zhcy:"ж",ZHcy:"Ж",zigrarr:"⇝",zopf:"𝕫",Zopf:"ℤ",zscr:"𝓏",Zscr:"𝒵",zwj:"‍",zwnj:"‌"},g={aacute:"á",Aacute:"Á",acirc:"â",Acirc:"Â",acute:"´",aelig:"æ",AElig:"Æ",agrave:"à",Agrave:"À",amp:"&",AMP:"&",aring:"å",Aring:"Å",atilde:"ã",Atilde:"Ã",auml:"ä",Auml:"Ä",brvbar:"¦",ccedil:"ç",Ccedil:"Ç",cedil:"¸",cent:"¢",copy:"©",COPY:"©",curren:"¤",deg:"°",divide:"÷",eacute:"é",Eacute:"É",ecirc:"ê",Ecirc:"Ê",egrave:"è",Egrave:"È",eth:"ð",ETH:"Ð",euml:"ë",Euml:"Ë",frac12:"½",frac14:"¼",frac34:"¾",gt:">",GT:">",iacute:"í",Iacute:"Í",icirc:"î",Icirc:"Î",iexcl:"¡",igrave:"ì",Igrave:"Ì",iquest:"¿",iuml:"ï",Iuml:"Ï",laquo:"«",lt:"<",LT:"<",macr:"¯",micro:"µ",middot:"·",nbsp:" ",not:"¬",ntilde:"ñ",Ntilde:"Ñ",oacute:"ó",Oacute:"Ó",ocirc:"ô",Ocirc:"Ô",ograve:"ò",Ograve:"Ò",ordf:"ª",ordm:"º",oslash:"ø",Oslash:"Ø",otilde:"õ",Otilde:"Õ",ouml:"ö",Ouml:"Ö",para:"¶",plusmn:"±",pound:"£",quot:'"',QUOT:'"',raquo:"»",reg:"®",REG:"®",sect:"§",shy:"­",sup1:"¹",sup2:"²",sup3:"³",szlig:"ß",thorn:"þ",THORN:"Þ",times:"×",uacute:"ú",Uacute:"Ú",ucirc:"û",Ucirc:"Û",ugrave:"ù",Ugrave:"Ù",uml:"¨",uuml:"ü",Uuml:"Ü",yacute:"ý",Yacute:"Ý",yen:"¥",yuml:"ÿ"},f={0:"�",128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},y=[1,2,3,4,5,6,7,8,11,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,64976,64977,64978,64979,64980,64981,64982,64983,64984,64985,64986,64987,64988,64989,64990,64991,64992,64993,64994,64995,64996,64997,64998,64999,65e3,65001,65002,65003,65004,65005,65006,65007,65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111],E=String.fromCharCode,v={}.hasOwnProperty,A=function(e,t){return v.call(e,t)},b=function(e,t){if(!e)return t;var i,n={};for(i in t)n[i]=A(e,i)?e[i]:t[i];return n},S=function(e,t){var i="";return e>=55296&&e<=57343||e>1114111?(t&&w("character reference outside the permissible Unicode range"),"�"):A(f,e)?(t&&w("disallowed character reference"),f[e]):(t&&function(e,t){for(var i=-1,n=e.length;++i<n;)if(e[i]==t)return!0;return!1}(y,e)&&w("disallowed character reference"),e>65535&&(i+=E((e-=65536)>>>10&1023|55296),e=56320|1023&e),i+=E(e))},_=function(e){return"&#x"+e.toString(16).toUpperCase()+";"},x=function(e){return"&#"+e+";"},w=function(e){throw Error("Parse error: "+e)},T=function(e,t){(t=b(t,T.options)).strict&&d.test(e)&&w("forbidden code point");var i=t.encodeEverything,n=t.useNamedReferences,u=t.allowUnsafeSymbols,c=t.decimal?x:_,p=function(e){return c(e.charCodeAt(0))};return i?(e=e.replace(s,(function(e){return n&&A(l,e)?"&"+l[e]+";":p(e)})),n&&(e=e.replace(/&gt;\u20D2/g,"&nvgt;").replace(/&lt;\u20D2/g,"&nvlt;").replace(/&#x66;&#x6A;/g,"&fjlig;")),n&&(e=e.replace(o,(function(e){return"&"+l[e]+";"})))):n?(u||(e=e.replace(h,(function(e){return"&"+l[e]+";"}))),e=(e=e.replace(/&gt;\u20D2/g,"&nvgt;").replace(/&lt;\u20D2/g,"&nvlt;")).replace(o,(function(e){return"&"+l[e]+";"}))):u||(e=e.replace(h,p)),e.replace(r,(function(e){var t=e.charCodeAt(0),i=e.charCodeAt(1);return c(1024*(t-55296)+i-56320+65536)})).replace(a,p)};T.options={allowUnsafeSymbols:!1,encodeEverything:!1,strict:!1,useNamedReferences:!1,decimal:!1};var P=function(e,t){var i=(t=b(t,P.options)).strict;return i&&c.test(e)&&w("malformed character reference"),e.replace(p,(function(e,n,r,s,a,o,l,h){var u,c,d,p,f,y;return n?(d=n,c=r,i&&!c&&w("character reference was not terminated by a semicolon"),u=parseInt(d,10),S(u,i)):s?(p=s,c=a,i&&!c&&w("character reference was not terminated by a semicolon"),u=parseInt(p,16),S(u,i)):o?A(m,f=o)?m[f]:(i&&w("named character reference was not terminated by a semicolon"),e):(f=l,(y=h)&&t.isAttributeValue?(i&&"="==y&&w("`&` did not start a character reference"),e):(i&&w("named character reference was not terminated by a semicolon"),g[f]+(y||"")))}))};P.options={isAttributeValue:!1,strict:!1};var C={version:"1.1.1",encode:T,decode:P,escape:function(e){return e.replace(h,(function(e){return u[e]}))},unescape:P};if("function"==typeof define&&"object"==typeof define.amd&&define.amd)define((function(){return C}));else if(t&&!t.nodeType)if(i)i.exports=C;else for(var V in C)A(C,V)&&(t[V]=C[V]);else e.he=C}(this),function(){"use strict";function e(e,t){var i;t=t||1/0;for(var n=e.length,r=null,s=[],a=0;a<n;a++){if((i=e.charCodeAt(a))>55295&&i<57344){if(!r){if(i>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&s.push(239,191,189);continue}r=i;continue}if(i<56320){(t-=3)>-1&&s.push(239,191,189),r=i;continue}i=r-55296<<10|i-56320|65536,r=null}else r&&((t-=3)>-1&&s.push(239,191,189),r=null);if(i<128){if((t-=1)<0)break;s.push(i)}else if(i<2048){if((t-=2)<0)break;s.push(i>>6|192,63&i|128)}else if(i<65536){if((t-=3)<0)break;s.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<2097152))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return s}function n(e){try{return decodeURIComponent(e)}catch(t){return String.fromCharCode(65533)}}t.prototype.encode=function(t){return"undefined"==typeof Uint8Array?e(t):new Uint8Array(e(t))},i.prototype.decode=function(e){return function(e,t,i){var r="",s="";i=Math.min(e.length,i||1/0);for(var a=t=t||0;a<i;a++)e[a]<=127?(r+=n(s)+String.fromCharCode(e[a]),s=""):s+="%"+e[a].toString(16);return r+n(s)}(e,0,e.length)}}(),function(){"use strict";window.byteLength=function(e){return 3*e.length/4-a(e)},window.toByteArray=function(e){var n,r,s,o,l,h,u=e.length;l=a(e),h=new i(3*u/4-l),s=l>0?u-4:u;var c=0;for(n=0,r=0;n<s;n+=4,r+=3)o=t[e.charCodeAt(n)]<<18|t[e.charCodeAt(n+1)]<<12|t[e.charCodeAt(n+2)]<<6|t[e.charCodeAt(n+3)],h[c++]=o>>16&255,h[c++]=o>>8&255,h[c++]=255&o;2===l?(o=t[e.charCodeAt(n)]<<2|t[e.charCodeAt(n+1)]>>4,h[c++]=255&o):1===l&&(o=t[e.charCodeAt(n)]<<10|t[e.charCodeAt(n+1)]<<4|t[e.charCodeAt(n+2)]>>2,h[c++]=o>>8&255,h[c++]=255&o);return h},window.fromByteArray=function(t){for(var i,n=t.length,r=n%3,s="",a=[],l=0,h=n-r;l<h;l+=16383)a.push(o(t,l,l+16383>h?h:l+16383));1===r?(i=t[n-1],s+=e[i>>2],s+=e[i<<4&63],s+="=="):2===r&&(i=(t[n-2]<<8)+t[n-1],s+=e[i>>10],s+=e[i>>4&63],s+=e[i<<2&63],s+="=");return a.push(s),a.join("")};for(var e=[],t=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,s=n.length;r<s;++r)e[r]=n[r],t[n.charCodeAt(r)]=r;function a(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function o(t,i,n){for(var r,s,a=[],o=i;o<n;o+=3)r=(t[o]<<16)+(t[o+1]<<8)+t[o+2],a.push(e[(s=r)>>18&63]+e[s>>12&63]+e[s>>6&63]+e[63&s]);return a.join("")}t["-".charCodeAt(0)]=62,t["_".charCodeAt(0)]=63}(),function(e,t){var i,n=this,r=t.pow(256,6),s=t.pow(2,52),a=2*s;function o(o,d,p){var m=[],g=u(function e(t,i){var n,r=[],s=typeof t;if(i&&"object"==s)for(n in t)try{r.push(e(t[n],i-1))}catch(a){}return r.length?r:"string"==s?t:t+"\0"}((d=1==d?{entropy:!0}:d||{}).entropy?[o,c(e)]:null==o?function(){try{if(i)return c(i.randomBytes(256));var t=new Uint8Array(256);return(n.crypto||n.msCrypto).getRandomValues(t),c(t)}catch(a){var r=n.navigator,s=r&&r.plugins;return[+new Date,n,s,n.screen,c(e)]}}():o,3),m),f=new l(m),y=function(){for(var e=f.g(6),t=r,i=0;e<s;)e=256*(e+i),t*=256,i=f.g(1);for(;e>=a;)e/=2,t/=2,i>>>=1;return(e+i)/t};return y.int32=function(){return 0|f.g(4)},y.quick=function(){return f.g(4)/4294967296},y.double=y,u(c(f.S),e),(d.pass||p||function(e,i,n,r){return r&&(r.S&&h(r,f),e.state=function(){return h(f,{})}),n?(t.random=e,i):e})(y,g,"global"in d?d.global:this==t,d.state)}function l(e){var t,i=e.length,n=this,r=0,s=n.i=n.j=0,a=n.S=[];for(i||(e=[i++]);r<256;)a[r]=r++;for(r=0;r<256;r++)a[r]=a[s=255&s+e[r%i]+(t=a[r])],a[s]=t;(n.g=function(e){for(var t,i=0,r=n.i,s=n.j,a=n.S;e--;)t=a[r=255&r+1],i=256*i+a[255&(a[r]=a[s=255&s+t])+(a[s]=t)];return n.i=r,n.j=s,i})(256)}function h(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function u(e,t){for(var i,n=e+"",r=0;r<n.length;)t[255&r]=255&(i^=19*t[255&r])+n.charCodeAt(r++);return c(t)}function c(e){return String.fromCharCode.apply(0,e)}if(t.seedrandom=o,u(t.random(),e),"object"==typeof module&&module.exports){module.exports=o;try{i=require("crypto")}catch(d){}}else"function"==typeof define&&define.amd&&define((function(){return o}))}([],Math);/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */var n,r,s=s||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(e){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var t=e.document,i=function(){return e.URL||e.webkitURL||e},n=t.createElementNS("http://www.w3.org/1999/xhtml","a"),r=!e.externalHost&&"download"in n,s=e.webkitRequestFileSystem,a=e.requestFileSystem||s||e.mozRequestFileSystem,o=function(t){(e.setImmediate||e.setTimeout)((function(){throw t}),0)},l=0,h=[],u=function(){for(var e=h.length;e--;){var t=h[e];"string"==typeof t?i().revokeObjectURL(t):t.remove()}h.length=0},c=function(e,t,i){for(var n=(t=[].concat(t)).length;n--;){var r=e["on"+t[n]];if("function"==typeof r)try{r.call(e,i||e)}catch(s){o(s)}}},d=function(o,u){var d,p,m,g,f,y=this,E=o.type,v=!1,A=function(){var e=i().createObjectURL(o);return h.push(e),e},b=function(){c(y,"writestart progress write writeend".split(" "))},S=function(){!v&&d||(d=A()),p?p.location.href=d:window.open(d,"_blank"),y.readyState=y.DONE,b()},_=function(e){return function(){if(y.readyState!==y.DONE)return e.apply(this,arguments)}},x={create:!0,exclusive:!1};if(y.readyState=y.INIT,u||(u="download"),r)return d=A(),n.href=d,n.download=u,g=n,(f=t.createEvent("MouseEvents")).initMouseEvent("click",!0,!1,e,0,0,0,0,0,!1,!1,!1,!1,0,null),g.dispatchEvent(f),y.readyState=y.DONE,void b();e.chrome&&E&&"application/octet-stream"!==E&&(m=o.slice||o.webkitSlice,o=m.call(o,0,o.size,"application/octet-stream"),v=!0),s&&"download"!==u&&(u+=".download"),("application/octet-stream"===E||s)&&(p=e),a?(l+=o.size,a(e.TEMPORARY,l,_((function(e){e.root.getDirectory("saved",x,_((function(e){var t=function(){e.getFile(u,x,_((function(e){e.createWriter(_((function(t){t.onwriteend=function(t){p.location.href=e.toURL(),h.push(e),y.readyState=y.DONE,c(y,"writeend",t)},t.onerror=function(){var e=t.error;e.code!==e.ABORT_ERR&&S()},"writestart progress write abort".split(" ").forEach((function(e){t["on"+e]=y["on"+e]})),t.write(o),y.abort=function(){t.abort(),y.readyState=y.DONE},y.readyState=y.WRITING})),S)})),S)};e.getFile(u,{create:!1},_((function(e){e.remove(),t()})),_((function(e){e.code===e.NOT_FOUND_ERR?t():S()})))})),S)})),S)):S()},p=d.prototype,m=function(e,t){return new d(e,t)};return p.abort=function(){this.readyState=this.DONE,c(this,"abort")},p.readyState=p.INIT=0,p.WRITING=1,p.DONE=2,p.error=p.onwritestart=p.onprogress=p.onwrite=p.onabort=p.onerror=p.onwriteend=null,e.addEventListener("unload",u,!1),m.unload=function(){u(),e.removeEventListener("unload",u,!1)},m}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&null!==module?module.exports=s:"undefined"!=typeof define&&null!==define&&null!=define.amd&&define([],(function(){return s})),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.decomp=e()}}((function(){return function e(t,i,n){function r(a,o){if(!i[a]){if(!t[a]){var l="function"==typeof require&&require;if(!o&&l)return l(a,!0);if(s)return s(a,!0);throw new Error("Cannot find module '"+a+"'")}var h=i[a]={exports:{}};t[a][0].call(h.exports,(function(e){var i=t[a][1][e];return r(i||e)}),h,h.exports,e,t,i,n)}return i[a].exports}for(var s="function"==typeof require&&require,a=0;a<n.length;a++)r(n[a]);return r}({1:[function(e,t,i){function n(e,t,i){i=i||0;var n,r,s,a,o,l,h,u=[0,0];return n=e[1][1]-e[0][1],r=e[0][0]-e[1][0],s=n*e[0][0]+r*e[0][1],a=t[1][1]-t[0][1],o=t[0][0]-t[1][0],l=a*t[0][0]+o*t[0][1],_(h=n*o-a*r,0,i)||(u[0]=(o*s-r*l)/h,u[1]=(n*l-a*s)/h),u}function r(e,t,i,n){var r=t[0]-e[0],s=t[1]-e[1],a=n[0]-i[0],o=n[1]-i[1];if(a*s-o*r==0)return!1;var l=(r*(i[1]-e[1])+s*(e[0]-i[0]))/(a*s-o*r),h=(a*(e[1]-i[1])+o*(i[0]-e[0]))/(o*r-a*s);return l>=0&&l<=1&&h>=0&&h<=1}function s(e,t,i){return(t[0]-e[0])*(i[1]-e[1])-(i[0]-e[0])*(t[1]-e[1])}function a(e,t,i){return s(e,t,i)>0}function o(e,t,i){return s(e,t,i)>=0}function l(e,t,i){return s(e,t,i)<0}function h(e,t,i){return s(e,t,i)<=0}t.exports={decomp:function(e){var t=function e(t){for(var i=[],n=[],r=[],s=[],a=Number.MAX_VALUE,o=0;o<t.length;++o)if(f(t,o))for(var l=0;l<t.length;++l)if(v(t,o,l)){n=e(b(t,o,l,s)),r=e(b(t,l,o,s));for(var h=0;h<r.length;h++)n.push(r[h]);n.length<a&&(i=n,a=n.length,i.push([m(t,o),m(t,l)]))}return i}(e);return t.length>0?function e(t,i){if(0===i.length)return[t];if(i instanceof Array&&i.length&&i[0]instanceof Array&&2===i[0].length&&i[0][0]instanceof Array){for(var n=[t],r=0;r<i.length;r++)for(var s=i[r],a=0;a<n.length;a++){var o=n[a],l=e(o,s);if(l){n.splice(a,1),n.push(l[0],l[1]);break}}return n}s=i,r=t.indexOf(s[0]),a=t.indexOf(s[1]);return-1!==r&&-1!==a&&[b(t,r,a),b(t,a,r)]}(e,t):[e]},quickDecomp:function e(t,i,n,r,s,u,c){u=u||100,c=c||0,s=s||25,i=void 0!==i?i:[],n=n||[],r=r||[];var d=[0,0],y=[0,0],E=[0,0],v=0,b=0,_=0,x=0,w=0,T=0,P=0,C=[],V=[],R=t,N=t;if(N.length<3)return i;if(++c>u)return console.warn("quickDecomp: max level ("+u+") reached."),i;for(var M=0;M<t.length;++M)if(f(R,M)){n.push(R[M]),v=b=Number.MAX_VALUE;for(var k=0;k<t.length;++k)a(m(R,M-1),m(R,M),m(R,k))&&h(m(R,M-1),m(R,M),m(R,k-1))&&(E=S(m(R,M-1),m(R,M),m(R,k),m(R,k-1)),l(m(R,M+1),m(R,M),E)&&(_=p(R[M],E))<b&&(b=_,y=E,T=k)),a(m(R,M+1),m(R,M),m(R,k+1))&&h(m(R,M+1),m(R,M),m(R,k))&&(E=S(m(R,M+1),m(R,M),m(R,k),m(R,k+1)),a(m(R,M-1),m(R,M),E)&&(_=p(R[M],E))<v&&(v=_,d=E,w=k));if(T===(w+1)%t.length)E[0]=(y[0]+d[0])/2,E[1]=(y[1]+d[1])/2,r.push(E),M<w?(g(C,R,M,w+1),C.push(E),V.push(E),0!==T&&g(V,R,T,R.length),g(V,R,0,M+1)):(0!==M&&g(C,R,M,R.length),g(C,R,0,w+1),C.push(E),V.push(E),g(V,R,T,M+1));else{if(T>w&&(w+=t.length),x=Number.MAX_VALUE,w<T)return i;for(k=T;k<=w;++k)o(m(R,M-1),m(R,M),m(R,k))&&h(m(R,M+1),m(R,M),m(R,k))&&(_=p(m(R,M),m(R,k)))<x&&A(R,M,k)&&(x=_,P=k%t.length);M<P?(g(C,R,M,P+1),0!==P&&g(V,R,P,N.length),g(V,R,0,M+1)):(0!==M&&g(C,R,M,N.length),g(C,R,0,P+1),g(V,R,P,M+1))}return C.length<V.length?(e(C,i,n,r,s,u,c),e(V,i,n,r,s,u,c)):(e(V,i,n,r,s,u,c),e(C,i,n,r,s,u,c)),i}return i.push(t),i},isSimple:function(e){var t,i=e;for(t=0;t<i.length-1;t++)for(var n=0;n<t-1;n++)if(r(i[t],i[t+1],i[n],i[n+1]))return!1;for(t=1;t<i.length-2;t++)if(r(i[0],i[i.length-1],i[t],i[t+1]))return!1;return!0},removeCollinearPoints:function(e,t){for(var i=0,n=e.length-1;e.length>3&&n>=0;--n)d(m(e,n-1),m(e,n),m(e,n+1),t)&&(e.splice(n%e.length,1),i++);return i},removeDuplicatePoints:function(e,t){for(var i=e.length-1;i>=1;--i)for(var n=e[i],r=i-1;r>=0;--r)x(n,e[r],t)&&e.splice(i,1)},makeCCW:function(e){for(var t=0,i=e,n=1;n<e.length;++n)(i[n][1]<i[t][1]||i[n][1]===i[t][1]&&i[n][0]>i[t][0])&&(t=n);return!a(m(e,t-1),m(e,t),m(e,t+1))&&(function(e){for(var t=[],i=e.length,n=0;n!==i;n++)t.push(e.pop());for(n=0;n!==i;n++)e[n]=t[n]}(e),!0)}};var u=[],c=[];function d(e,t,i,n){if(n){var r=u,a=c;r[0]=t[0]-e[0],r[1]=t[1]-e[1],a[0]=i[0]-t[0],a[1]=i[1]-t[1];var o=r[0]*a[0]+r[1]*a[1],l=Math.sqrt(r[0]*r[0]+r[1]*r[1]),h=Math.sqrt(a[0]*a[0]+a[1]*a[1]);return Math.acos(o/(l*h))<n}return 0===s(e,t,i)}function p(e,t){var i=t[0]-e[0],n=t[1]-e[1];return i*i+n*n}function m(e,t){var i=e.length;return e[t<0?t%i+i:t%i]}function g(e,t,i,n){for(var r=i;r<n;r++)e.push(t[r])}function f(e,t){return l(m(e,t-1),m(e,t),m(e,t+1))}var y=[],E=[];function v(e,t,i){var r,s,a=y,l=E;if(o(m(e,t+1),m(e,t),m(e,i))&&h(m(e,t-1),m(e,t),m(e,i)))return!1;s=p(m(e,t),m(e,i));for(var u=0;u!==e.length;++u)if((u+1)%e.length!==t&&u!==t&&o(m(e,t),m(e,i),m(e,u+1))&&h(m(e,t),m(e,i),m(e,u))&&(a[0]=m(e,t),a[1]=m(e,i),l[0]=m(e,u),l[1]=m(e,u+1),r=n(a,l),p(m(e,t),r)<s))return!1;return!0}function A(e,t,i){for(var n=0;n!==e.length;++n)if(n!==t&&n!==i&&(n+1)%e.length!==t&&(n+1)%e.length!==i&&r(m(e,t),m(e,i),m(e,n),m(e,n+1)))return!1;return!0}function b(e,t,i,n){var r=n||[];if(function(e){e.length=0}(r),t<i)for(var s=t;s<=i;s++)r.push(e[s]);else{for(s=0;s<=i;s++)r.push(e[s]);for(s=t;s<e.length;s++)r.push(e[s])}return r}function S(e,t,i,n,r){r=r||0;var s=t[1]-e[1],a=e[0]-t[0],o=s*e[0]+a*e[1],l=n[1]-i[1],h=i[0]-n[0],u=l*i[0]+h*i[1],c=s*h-l*a;return _(c,0,r)?[0,0]:[(h*o-a*u)/c,(s*u-l*o)/c]}function _(e,t,i){return i=i||0,Math.abs(e-t)<=i}function x(e,t,i){return _(e[0],t[0],i)&&_(e[1],t[1],i)}},{}]},{},[1])(1)})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).THREE={})}(this,(function(e){"use strict";function t(){}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),"name"in Function.prototype==!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),i=1;i<arguments.length;i++){var n=arguments[i];if(null!=n)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}),Object.assign(t.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var i=this._listeners[e];if(void 0!==i){var n=i.indexOf(t);-1!==n&&i.splice(n,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var i=t.slice(0),n=0,r=i.length;n<r;n++)i[n].call(this,e)}}}});var i,n,r,s={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var e=[],t=0;t<256;t++)e[t]=(t<16?"0":"")+t.toString(16);return function(){var t=4294967295*Math.random()|0,i=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(e[255&t]+e[t>>8&255]+e[t>>16&255]+e[t>>24&255]+"-"+e[255&i]+e[i>>8&255]+"-"+e[i>>16&15|64]+e[i>>24&255]+"-"+e[63&n|128]+e[n>>8&255]+"-"+e[n>>16&255]+e[n>>24&255]+e[255&r]+e[r>>8&255]+e[r>>16&255]+e[r>>24&255]).toUpperCase()}}(),clamp:function(e,t,i){return Math.max(t,Math.min(i,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,i,n,r){return n+(e-t)*(r-n)/(i-t)},lerp:function(e,t,i){return(1-i)*e+i*t},smoothstep:function(e,t,i){return e<=t?0:e>=i?1:(e=(e-t)/(i-t))*e*(3-2*e)},smootherstep:function(e,t,i){return e<=t?0:e>=i?1:(e=(e-t)/(i-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*s.DEG2RAD},radToDeg:function(e){return e*s.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}};function a(e,t){this.x=e||0,this.y=t||0}function o(e,t,i,n){this._x=e||0,this._y=t||0,this._z=i||0,this._w=void 0!==n?n:1}function l(e,t,i){this.x=e||0,this.y=t||0,this.z=i||0}function h(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.defineProperties(a.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(a.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,i=this.y,n=e.elements;return this.x=n[0]*t+n[3]*i+n[6],this.y=n[1]*t+n[4]*i+n[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this},clampLength:function(e,t){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,i=this.y-e.y;return t*t+i*i},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,i){return this.subVectors(t,e).multiplyScalar(i).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,i){return void 0!==i&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var i=Math.cos(t),n=Math.sin(t),r=this.x-e.x,s=this.y-e.y;return this.x=r*i-s*n+e.x,this.y=r*n+s*i+e.y,this}}),Object.assign(o,{slerp:function(e,t,i,n){return i.copy(e).slerp(t,n)},slerpFlat:function(e,t,i,n,r,s,a){var o=i[n+0],l=i[n+1],h=i[n+2],u=i[n+3],c=r[s+0],d=r[s+1],p=r[s+2],m=r[s+3];if(u!==m||o!==c||l!==d||h!==p){var g=1-a,f=o*c+l*d+h*p+u*m,y=f>=0?1:-1,E=1-f*f;if(E>Number.EPSILON){var v=Math.sqrt(E),A=Math.atan2(v,f*y);g=Math.sin(g*A)/v,a=Math.sin(a*A)/v}var b=a*y;if(o=o*g+c*b,l=l*g+d*b,h=h*g+p*b,u=u*g+m*b,g===1-a){var S=1/Math.sqrt(o*o+l*l+h*h+u*u);o*=S,l*=S,h*=S,u*=S}}e[t]=o,e[t+1]=l,e[t+2]=h,e[t+3]=u}}),Object.defineProperties(o.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this.onChangeCallback()}}}),Object.assign(o.prototype,{isQuaternion:!0,set:function(e,t,i,n){return this._x=e,this._y=t,this._z=i,this._w=n,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var i=e._x,n=e._y,r=e._z,s=e.order,a=Math.cos,o=Math.sin,l=a(i/2),h=a(n/2),u=a(r/2),c=o(i/2),d=o(n/2),p=o(r/2);return"XYZ"===s?(this._x=c*h*u+l*d*p,this._y=l*d*u-c*h*p,this._z=l*h*p+c*d*u,this._w=l*h*u-c*d*p):"YXZ"===s?(this._x=c*h*u+l*d*p,this._y=l*d*u-c*h*p,this._z=l*h*p-c*d*u,this._w=l*h*u+c*d*p):"ZXY"===s?(this._x=c*h*u-l*d*p,this._y=l*d*u+c*h*p,this._z=l*h*p+c*d*u,this._w=l*h*u-c*d*p):"ZYX"===s?(this._x=c*h*u-l*d*p,this._y=l*d*u+c*h*p,this._z=l*h*p-c*d*u,this._w=l*h*u+c*d*p):"YZX"===s?(this._x=c*h*u+l*d*p,this._y=l*d*u+c*h*p,this._z=l*h*p-c*d*u,this._w=l*h*u-c*d*p):"XZY"===s&&(this._x=c*h*u-l*d*p,this._y=l*d*u-c*h*p,this._z=l*h*p+c*d*u,this._w=l*h*u+c*d*p),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var i=t/2,n=Math.sin(i);return this._x=e.x*n,this._y=e.y*n,this._z=e.z*n,this._w=Math.cos(i),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t,i=e.elements,n=i[0],r=i[4],s=i[8],a=i[1],o=i[5],l=i[9],h=i[2],u=i[6],c=i[10],d=n+o+c;return d>0?(t=.5/Math.sqrt(d+1),this._w=.25/t,this._x=(u-l)*t,this._y=(s-h)*t,this._z=(a-r)*t):n>o&&n>c?(t=2*Math.sqrt(1+n-o-c),this._w=(u-l)/t,this._x=.25*t,this._y=(r+a)/t,this._z=(s+h)/t):o>c?(t=2*Math.sqrt(1+o-n-c),this._w=(s-h)/t,this._x=(r+a)/t,this._y=.25*t,this._z=(l+u)/t):(t=2*Math.sqrt(1+c-n-o),this._w=(a-r)/t,this._x=(s+h)/t,this._y=(l+u)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:function(e,t){var i=e.dot(t)+1;return i<1e-6?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()},angleTo:function(e){return 2*Math.acos(Math.abs(s.clamp(this.dot(e),-1,1)))},rotateTowards:function(e,t){var i=this.angleTo(e);if(0===i)return this;var n=Math.min(1,t/i);return this.slerp(e,n),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var i=e._x,n=e._y,r=e._z,s=e._w,a=t._x,o=t._y,l=t._z,h=t._w;return this._x=i*h+s*a+n*l-r*o,this._y=n*h+s*o+r*a-i*l,this._z=r*h+s*l+i*o-n*a,this._w=s*h-i*a-n*o-r*l,this.onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var i=this._x,n=this._y,r=this._z,s=this._w,a=s*e._w+i*e._x+n*e._y+r*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=i,this._y=n,this._z=r,this;var o=1-a*a;if(o<=Number.EPSILON){var l=1-t;return this._w=l*s+t*this._w,this._x=l*i+t*this._x,this._y=l*n+t*this._y,this._z=l*r+t*this._z,this.normalize()}var h=Math.sqrt(o),u=Math.atan2(h,a),c=Math.sin((1-t)*u)/h,d=Math.sin(t*u)/h;return this._w=s*c+this._w*d,this._x=i*c+this._x*d,this._y=n*c+this._y*d,this._z=r*c+this._z*d,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(l.prototype,{isVector3:!0,set:function(e,t,i){return this.x=e,this.y=t,this.z=i,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:(n=new o,function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(n.setFromEuler(e))}),applyAxisAngle:function(){var e=new o;return function(t,i){return this.applyQuaternion(e.setFromAxisAngle(t,i))}}(),applyMatrix3:function(e){var t=this.x,i=this.y,n=this.z,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6]*n,this.y=r[1]*t+r[4]*i+r[7]*n,this.z=r[2]*t+r[5]*i+r[8]*n,this},applyMatrix4:function(e){var t=this.x,i=this.y,n=this.z,r=e.elements,s=1/(r[3]*t+r[7]*i+r[11]*n+r[15]);return this.x=(r[0]*t+r[4]*i+r[8]*n+r[12])*s,this.y=(r[1]*t+r[5]*i+r[9]*n+r[13])*s,this.z=(r[2]*t+r[6]*i+r[10]*n+r[14])*s,this},applyQuaternion:function(e){var t=this.x,i=this.y,n=this.z,r=e.x,s=e.y,a=e.z,o=e.w,l=o*t+s*n-a*i,h=o*i+a*t-r*n,u=o*n+r*i-s*t,c=-r*t-s*i-a*n;return this.x=l*o+c*-r+h*-a-u*-s,this.y=h*o+c*-s+u*-r-l*-a,this.z=u*o+c*-a+l*-s-h*-r,this},project:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)},unproject:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)},transformDirection:function(e){var t=this.x,i=this.y,n=this.z,r=e.elements;return this.x=r[0]*t+r[4]*i+r[8]*n,this.y=r[1]*t+r[5]*i+r[9]*n,this.z=r[2]*t+r[6]*i+r[10]*n,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this},clampLength:function(e,t){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,i){return this.subVectors(t,e).multiplyScalar(i).add(e)},cross:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var i=e.x,n=e.y,r=e.z,s=t.x,a=t.y,o=t.z;return this.x=n*o-r*a,this.y=r*s-i*o,this.z=i*a-n*s,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:(i=new l,function(e){return i.copy(this).projectOnVector(e),this.sub(i)}),reflect:function(){var e=new l;return function(t){return this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(s.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,i=this.y-e.y,n=this.z-e.z;return t*t+i*i+n*n},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)},setFromSphericalCoords:function(e,t,i){var n=Math.sin(t)*e;return this.x=n*Math.sin(i),this.y=Math.cos(t)*e,this.z=n*Math.cos(i),this},setFromCylindrical:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)},setFromCylindricalCoords:function(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this},setFromMatrixPosition:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),n=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=n,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,i){return void 0!==i&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}}),Object.assign(h.prototype,{isMatrix3:!0,set:function(e,t,i,n,r,s,a,o,l){var h=this.elements;return h[0]=e,h[1]=n,h[2]=a,h[3]=t,h[4]=r,h[5]=o,h[6]=i,h[7]=s,h[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(){var e=new l;return function(t){for(var i=0,n=t.count;i<n;i++)e.x=t.getX(i),e.y=t.getY(i),e.z=t.getZ(i),e.applyMatrix3(this),t.setXYZ(i,e.x,e.y,e.z);return t}}(),multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var i=e.elements,n=t.elements,r=this.elements,s=i[0],a=i[3],o=i[6],l=i[1],h=i[4],u=i[7],c=i[2],d=i[5],p=i[8],m=n[0],g=n[3],f=n[6],y=n[1],E=n[4],v=n[7],A=n[2],b=n[5],S=n[8];return r[0]=s*m+a*y+o*A,r[3]=s*g+a*E+o*b,r[6]=s*f+a*v+o*S,r[1]=l*m+h*y+u*A,r[4]=l*g+h*E+u*b,r[7]=l*f+h*v+u*S,r[2]=c*m+d*y+p*A,r[5]=c*g+d*E+p*b,r[8]=c*f+d*v+p*S,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],i=e[1],n=e[2],r=e[3],s=e[4],a=e[5],o=e[6],l=e[7],h=e[8];return t*s*h-t*a*l-i*r*h+i*a*o+n*r*l-n*s*o},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var i=e.elements,n=this.elements,r=i[0],s=i[1],a=i[2],o=i[3],l=i[4],h=i[5],u=i[6],c=i[7],d=i[8],p=d*l-h*c,m=h*u-d*o,g=c*o-l*u,f=r*p+s*m+a*g;if(0===f){var y="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(y);return console.warn(y),this.identity()}var E=1/f;return n[0]=p*E,n[1]=(a*c-d*s)*E,n[2]=(h*s-a*l)*E,n[3]=m*E,n[4]=(d*r-a*u)*E,n[5]=(a*o-h*r)*E,n[6]=g*E,n[7]=(s*u-c*r)*E,n[8]=(l*r-s*o)*E,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,i,n,r,s,a){var o=Math.cos(r),l=Math.sin(r);this.set(i*o,i*l,-i*(o*s+l*a)+s+e,-n*l,n*o,-n*(-l*s+o*a)+a+t,0,0,1)},scale:function(e,t){var i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=t,i[4]*=t,i[7]*=t,this},rotate:function(e){var t=Math.cos(e),i=Math.sin(e),n=this.elements,r=n[0],s=n[3],a=n[6],o=n[1],l=n[4],h=n[7];return n[0]=t*r+i*o,n[3]=t*s+i*l,n[6]=t*a+i*h,n[1]=-i*r+t*o,n[4]=-i*s+t*l,n[7]=-i*a+t*h,this},translate:function(e,t){var i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=t*i[2],i[4]+=t*i[5],i[7]+=t*i[8],this},equals:function(e){for(var t=this.elements,i=e.elements,n=0;n<9;n++)if(t[n]!==i[n])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var i=0;i<9;i++)this.elements[i]=e[i+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}});var u,c,d,p,m,g,f,y,E,v,A,b,S,_,x={getDataURL:function(e){var t;if("undefined"==typeof HTMLCanvasElement)return e.src;if(e instanceof HTMLCanvasElement)t=e;else{void 0===r&&(r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),r.width=e.width,r.height=e.height;var i=r.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=r}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}},w=0;function T(e,t,i,n,r,o,l,u,c,d){Object.defineProperty(this,"id",{value:w++}),this.uuid=s.generateUUID(),this.name="",this.image=void 0!==e?e:T.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:T.DEFAULT_MAPPING,this.wrapS=void 0!==i?i:1001,this.wrapT=void 0!==n?n:1001,this.magFilter=void 0!==r?r:1006,this.minFilter=void 0!==o?o:1008,this.anisotropy=void 0!==c?c:1,this.format=void 0!==l?l:1023,this.type=void 0!==u?u:1009,this.offset=new a(0,0),this.repeat=new a(1,1),this.center=new a(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new h,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==d?d:3e3,this.version=0,this.onUpdate=null}function P(e,t,i,n){this.x=e||0,this.y=t||0,this.z=i||0,this.w=void 0!==n?n:1}function C(e,t,i){this.width=e,this.height=t,this.scissor=new P(0,0,e,t),this.scissorTest=!1,this.viewport=new P(0,0,e,t),i=i||{},this.texture=new T(void 0,void 0,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,this.texture.minFilter=void 0!==i.minFilter?i.minFilter:1006,this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0===i.stencilBuffer||i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null}function V(e,t,i){C.call(this,e,t,i),this.samples=4}function R(e,t,i){C.call(this,e,t,i)}function N(e,t,i,n,r,s,a,o,l,h,u,c){T.call(this,null,s,a,o,l,h,n,r,u,c),this.image={data:e,width:t,height:i},this.magFilter=void 0!==l?l:1003,this.minFilter=void 0!==h?h:1003,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function M(e,t){this.min=void 0!==e?e:new l(1/0,1/0,1/0),this.max=void 0!==t?t:new l(-1/0,-1/0,-1/0)}function k(e,t){this.center=void 0!==e?e:new l,this.radius=void 0!==t?t:0}function L(e,t){this.normal=void 0!==e?e:new l(1,0,0),this.constant=void 0!==t?t:0}function I(e,t,i,n,r,s){this.planes=[void 0!==e?e:new L,void 0!==t?t:new L,void 0!==i?i:new L,void 0!==n?n:new L,void 0!==r?r:new L,void 0!==s?s:new L]}function B(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}T.DEFAULT_IMAGE=void 0,T.DEFAULT_MAPPING=300,T.prototype=Object.assign(Object.create(t.prototype),{constructor:T,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var n=this.image;if(void 0===n.uuid&&(n.uuid=s.generateUUID()),!t&&void 0===e.images[n.uuid]){var r;if(Array.isArray(n)){r=[];for(var a=0,o=n.length;a<o;a++)r.push(x.getDataURL(n[a]))}else r=x.getDataURL(n);e.images[n.uuid]={uuid:n.uuid,url:r}}i.image=n.uuid}return t||(e.textures[this.uuid]=i),i},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case 1e3:e.x=e.x-Math.floor(e.x);break;case 1001:e.x=e.x<0?0:1;break;case 1002:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case 1e3:e.y=e.y-Math.floor(e.y);break;case 1001:e.y=e.y<0?0:1;break;case 1002:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}}),Object.defineProperty(T.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(P.prototype,{isVector4:!0,set:function(e,t,i,n){return this.x=e,this.y=t,this.z=i,this.w=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,i=this.y,n=this.z,r=this.w,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*n+s[12]*r,this.y=s[1]*t+s[5]*i+s[9]*n+s[13]*r,this.z=s[2]*t+s[6]*i+s[10]*n+s[14]*r,this.w=s[3]*t+s[7]*i+s[11]*n+s[15]*r,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,i,n,r,s=e.elements,a=s[0],o=s[4],l=s[8],h=s[1],u=s[5],c=s[9],d=s[2],p=s[6],m=s[10];if(Math.abs(o-h)<.01&&Math.abs(l-d)<.01&&Math.abs(c-p)<.01){if(Math.abs(o+h)<.1&&Math.abs(l+d)<.1&&Math.abs(c+p)<.1&&Math.abs(a+u+m-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var g=(a+1)/2,f=(u+1)/2,y=(m+1)/2,E=(o+h)/4,v=(l+d)/4,A=(c+p)/4;return g>f&&g>y?g<.01?(i=0,n=.707106781,r=.707106781):(n=E/(i=Math.sqrt(g)),r=v/i):f>y?f<.01?(i=.707106781,n=0,r=.707106781):(i=E/(n=Math.sqrt(f)),r=A/n):y<.01?(i=.707106781,n=.707106781,r=0):(i=v/(r=Math.sqrt(y)),n=A/r),this.set(i,n,r,t),this}var b=Math.sqrt((p-c)*(p-c)+(l-d)*(l-d)+(h-o)*(h-o));return Math.abs(b)<.001&&(b=1),this.x=(p-c)/b,this.y=(l-d)/b,this.z=(h-o)/b,this.w=Math.acos((a+u+m-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(e,t){return void 0===u&&(u=new P,c=new P),u.set(e,e,e,e),c.set(t,t,t,t),this.clamp(u,c)},clampLength:function(e,t){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,i){return this.subVectors(t,e).multiplyScalar(i).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,i){return void 0!==i&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),C.prototype=Object.assign(Object.create(t.prototype),{constructor:C,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),V.prototype=Object.assign(Object.create(C.prototype),{constructor:V,isWebGLMultisampleRenderTarget:!0,copy:function(e){return C.prototype.copy.call(this,e),this.samples=e.samples,this}}),R.prototype=Object.create(C.prototype),R.prototype.constructor=R,R.prototype.isWebGLRenderTargetCube=!0,N.prototype=Object.create(T.prototype),N.prototype.constructor=N,N.prototype.isDataTexture=!0,Object.assign(M.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,i=1/0,n=1/0,r=-1/0,s=-1/0,a=-1/0,o=0,l=e.length;o<l;o+=3){var h=e[o],u=e[o+1],c=e[o+2];h<t&&(t=h),u<i&&(i=u),c<n&&(n=c),h>r&&(r=h),u>s&&(s=u),c>a&&(a=c)}return this.min.set(t,i,n),this.max.set(r,s,a),this},setFromBufferAttribute:function(e){for(var t=1/0,i=1/0,n=1/0,r=-1/0,s=-1/0,a=-1/0,o=0,l=e.count;o<l;o++){var h=e.getX(o),u=e.getY(o),c=e.getZ(o);h<t&&(t=h),u<i&&(i=u),c<n&&(n=c),h>r&&(r=h),u>s&&(s=u),c>a&&(a=c)}return this.min.set(t,i,n),this.max.set(r,s,a),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new l;return function(t,i){var n=e.copy(i).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}}(),setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new l),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new l),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(){var e,t,i,n=new l;function r(r){var s=r.geometry;if(void 0!==s)if(s.isGeometry){var a=s.vertices;for(t=0,i=a.length;t<i;t++)n.copy(a[t]),n.applyMatrix4(r.matrixWorld),e.expandByPoint(n)}else if(s.isBufferGeometry){var o=s.attributes.position;if(void 0!==o)for(t=0,i=o.count;t<i;t++)n.fromBufferAttribute(o,t).applyMatrix4(r.matrixWorld),e.expandByPoint(n)}}return function(t){return e=this,t.updateMatrixWorld(!0),t.traverse(r),this}}(),containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new l),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:(p=new l,function(e){return this.clampPoint(e.center,p),p.distanceToSquared(e.center)<=e.radius*e.radius}),intersectsPlane:function(e){var t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant},intersectsTriangle:function(){var e=new l,t=new l,i=new l,n=new l,r=new l,s=new l,a=new l,o=new l,h=new l,u=new l;function c(n){var r,s;for(r=0,s=n.length-3;r<=s;r+=3){a.fromArray(n,r);var o=h.x*Math.abs(a.x)+h.y*Math.abs(a.y)+h.z*Math.abs(a.z),l=e.dot(a),u=t.dot(a),c=i.dot(a);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>o)return!1}return!0}return function(a){if(this.isEmpty())return!1;this.getCenter(o),h.subVectors(this.max,o),e.subVectors(a.a,o),t.subVectors(a.b,o),i.subVectors(a.c,o),n.subVectors(t,e),r.subVectors(i,t),s.subVectors(e,i);var l=[0,-n.z,n.y,0,-r.z,r.y,0,-s.z,s.y,n.z,0,-n.x,r.z,0,-r.x,s.z,0,-s.x,-n.y,n.x,0,-r.y,r.x,0,-s.y,s.x,0];return!!c(l)&&(!!c(l=[1,0,0,0,1,0,0,0,1])&&(u.crossVectors(n,r),c(l=[u.x,u.y,u.z])))}}(),clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new l),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new l;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var e=new l;return function(t){return void 0===t&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(t.center),t.radius=.5*this.getSize(e).length(),t}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:(d=[new l,new l,new l,new l,new l,new l,new l,new l],function(e){return this.isEmpty()||(d[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),d[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),d[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),d[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),d[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),d[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),d[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),d[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(d)),this}),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(k.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:(m=new M,function(e,t){var i=this.center;void 0!==t?i.copy(t):m.setFromPoints(e).getCenter(i);for(var n=0,r=0,s=e.length;r<s;r++)n=Math.max(n,i.distanceToSquared(e[r]));return this.radius=Math.sqrt(n),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var i=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new l),t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new M),e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}),Object.assign(L.prototype,{set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,i,n){return this.normal.set(e,t,i),this.constant=n,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new l,t=new l;return function(i,n,r){var s=e.subVectors(r,n).cross(t.subVectors(i,n)).normalize();return this.setFromNormalAndCoplanarPoint(s,i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new l),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(){var e=new l;return function(t,i){void 0===i&&(console.warn("THREE.Plane: .intersectLine() target is now required"),i=new l);var n=t.delta(e),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(t.start)?i.copy(t.start):void 0;var s=-(t.start.dot(this.normal)+this.constant)/r;return s<0||s>1?void 0:i.copy(n).multiplyScalar(s).add(t.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new l),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new l,t=new h;return function(i,n){var r=n||t.getNormalMatrix(i),s=this.coplanarPoint(e).applyMatrix4(i),a=this.normal.applyMatrix3(r).normalize();return this.constant=-s.dot(a),this}}(),translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}),Object.assign(I.prototype,{set:function(e,t,i,n,r,s){var a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(n),a[4].copy(r),a[5].copy(s),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,i=0;i<6;i++)t[i].copy(e.planes[i]);return this},setFromMatrix:function(e){var t=this.planes,i=e.elements,n=i[0],r=i[1],s=i[2],a=i[3],o=i[4],l=i[5],h=i[6],u=i[7],c=i[8],d=i[9],p=i[10],m=i[11],g=i[12],f=i[13],y=i[14],E=i[15];return t[0].setComponents(a-n,u-o,m-c,E-g).normalize(),t[1].setComponents(a+n,u+o,m+c,E+g).normalize(),t[2].setComponents(a+r,u+l,m+d,E+f).normalize(),t[3].setComponents(a-r,u-l,m-d,E-f).normalize(),t[4].setComponents(a-s,u-h,m-p,E-y).normalize(),t[5].setComponents(a+s,u+h,m+p,E+y).normalize(),this},intersectsObject:(f=new k,function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),f.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(f)}),intersectsSprite:function(){var e=new k;return function(t){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,i=e.center,n=-e.radius,r=0;r<6;r++){if(t[r].distanceToPoint(i)<n)return!1}return!0},intersectsBox:(g=new l,function(e){for(var t=this.planes,i=0;i<6;i++){var n=t[i];if(g.x=n.normal.x>0?e.max.x:e.min.x,g.y=n.normal.y>0?e.max.y:e.min.y,g.z=n.normal.z>0?e.max.z:e.min.z,n.distanceToPoint(g)<0)return!1}return!0}),containsPoint:function(e){for(var t=this.planes,i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}}),Object.assign(B.prototype,{isMatrix4:!0,set:function(e,t,i,n,r,s,a,o,l,h,u,c,d,p,m,g){var f=this.elements;return f[0]=e,f[4]=t,f[8]=i,f[12]=n,f[1]=r,f[5]=s,f[9]=a,f[13]=o,f[2]=l,f[6]=h,f[10]=u,f[14]=c,f[3]=d,f[7]=p,f[11]=m,f[15]=g,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new B).fromArray(this.elements)},copy:function(e){var t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this},copyPosition:function(e){var t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this},extractBasis:function(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this},extractRotation:function(){var e=new l;return function(t){var i=this.elements,n=t.elements,r=1/e.setFromMatrixColumn(t,0).length(),s=1/e.setFromMatrixColumn(t,1).length(),a=1/e.setFromMatrixColumn(t,2).length();return i[0]=n[0]*r,i[1]=n[1]*r,i[2]=n[2]*r,i[3]=0,i[4]=n[4]*s,i[5]=n[5]*s,i[6]=n[6]*s,i[7]=0,i[8]=n[8]*a,i[9]=n[9]*a,i[10]=n[10]*a,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this}}(),makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,i=e.x,n=e.y,r=e.z,s=Math.cos(i),a=Math.sin(i),o=Math.cos(n),l=Math.sin(n),h=Math.cos(r),u=Math.sin(r);if("XYZ"===e.order){var c=s*h,d=s*u,p=a*h,m=a*u;t[0]=o*h,t[4]=-o*u,t[8]=l,t[1]=d+p*l,t[5]=c-m*l,t[9]=-a*o,t[2]=m-c*l,t[6]=p+d*l,t[10]=s*o}else if("YXZ"===e.order){var g=o*h,f=o*u,y=l*h,E=l*u;t[0]=g+E*a,t[4]=y*a-f,t[8]=s*l,t[1]=s*u,t[5]=s*h,t[9]=-a,t[2]=f*a-y,t[6]=E+g*a,t[10]=s*o}else if("ZXY"===e.order){g=o*h,f=o*u,y=l*h,E=l*u;t[0]=g-E*a,t[4]=-s*u,t[8]=y+f*a,t[1]=f+y*a,t[5]=s*h,t[9]=E-g*a,t[2]=-s*l,t[6]=a,t[10]=s*o}else if("ZYX"===e.order){c=s*h,d=s*u,p=a*h,m=a*u;t[0]=o*h,t[4]=p*l-d,t[8]=c*l+m,t[1]=o*u,t[5]=m*l+c,t[9]=d*l-p,t[2]=-l,t[6]=a*o,t[10]=s*o}else if("YZX"===e.order){var v=s*o,A=s*l,b=a*o,S=a*l;t[0]=o*h,t[4]=S-v*u,t[8]=b*u+A,t[1]=u,t[5]=s*h,t[9]=-a*h,t[2]=-l*h,t[6]=A*u+b,t[10]=v-S*u}else if("XZY"===e.order){v=s*o,A=s*l,b=a*o,S=a*l;t[0]=o*h,t[4]=-u,t[8]=l*h,t[1]=v*u+S,t[5]=s*h,t[9]=A*u-b,t[2]=b*u-A,t[6]=a*h,t[10]=S*u+v}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:(S=new l(0,0,0),_=new l(1,1,1),function(e){return this.compose(S,e,_)}),lookAt:(v=new l,A=new l,b=new l,function(e,t,i){var n=this.elements;return b.subVectors(e,t),0===b.lengthSq()&&(b.z=1),b.normalize(),v.crossVectors(i,b),0===v.lengthSq()&&(1===Math.abs(i.z)?b.x+=1e-4:b.z+=1e-4,b.normalize(),v.crossVectors(i,b)),v.normalize(),A.crossVectors(b,v),n[0]=v.x,n[4]=A.x,n[8]=b.x,n[1]=v.y,n[5]=A.y,n[9]=b.y,n[2]=v.z,n[6]=A.z,n[10]=b.z,this}),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var i=e.elements,n=t.elements,r=this.elements,s=i[0],a=i[4],o=i[8],l=i[12],h=i[1],u=i[5],c=i[9],d=i[13],p=i[2],m=i[6],g=i[10],f=i[14],y=i[3],E=i[7],v=i[11],A=i[15],b=n[0],S=n[4],_=n[8],x=n[12],w=n[1],T=n[5],P=n[9],C=n[13],V=n[2],R=n[6],N=n[10],M=n[14],k=n[3],L=n[7],I=n[11],B=n[15];return r[0]=s*b+a*w+o*V+l*k,r[4]=s*S+a*T+o*R+l*L,r[8]=s*_+a*P+o*N+l*I,r[12]=s*x+a*C+o*M+l*B,r[1]=h*b+u*w+c*V+d*k,r[5]=h*S+u*T+c*R+d*L,r[9]=h*_+u*P+c*N+d*I,r[13]=h*x+u*C+c*M+d*B,r[2]=p*b+m*w+g*V+f*k,r[6]=p*S+m*T+g*R+f*L,r[10]=p*_+m*P+g*N+f*I,r[14]=p*x+m*C+g*M+f*B,r[3]=y*b+E*w+v*V+A*k,r[7]=y*S+E*T+v*R+A*L,r[11]=y*_+E*P+v*N+A*I,r[15]=y*x+E*C+v*M+A*B,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(){var e=new l;return function(t){for(var i=0,n=t.count;i<n;i++)e.x=t.getX(i),e.y=t.getY(i),e.z=t.getZ(i),e.applyMatrix4(this),t.setXYZ(i,e.x,e.y,e.z);return t}}(),determinant:function(){var e=this.elements,t=e[0],i=e[4],n=e[8],r=e[12],s=e[1],a=e[5],o=e[9],l=e[13],h=e[2],u=e[6],c=e[10],d=e[14];return e[3]*(+r*o*u-n*l*u-r*a*c+i*l*c+n*a*d-i*o*d)+e[7]*(+t*o*d-t*l*c+r*s*c-n*s*d+n*l*h-r*o*h)+e[11]*(+t*l*u-t*a*d-r*s*u+i*s*d+r*a*h-i*l*h)+e[15]*(-n*a*h-t*o*u+t*a*c+n*s*u-i*s*c+i*o*h)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var i=this.elements,n=e.elements,r=n[0],s=n[1],a=n[2],o=n[3],l=n[4],h=n[5],u=n[6],c=n[7],d=n[8],p=n[9],m=n[10],g=n[11],f=n[12],y=n[13],E=n[14],v=n[15],A=p*E*c-y*m*c+y*u*g-h*E*g-p*u*v+h*m*v,b=f*m*c-d*E*c-f*u*g+l*E*g+d*u*v-l*m*v,S=d*y*c-f*p*c+f*h*g-l*y*g-d*h*v+l*p*v,_=f*p*u-d*y*u-f*h*m+l*y*m+d*h*E-l*p*E,x=r*A+s*b+a*S+o*_;if(0===x){var w="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(w);return console.warn(w),this.identity()}var T=1/x;return i[0]=A*T,i[1]=(y*m*o-p*E*o-y*a*g+s*E*g+p*a*v-s*m*v)*T,i[2]=(h*E*o-y*u*o+y*a*c-s*E*c-h*a*v+s*u*v)*T,i[3]=(p*u*o-h*m*o-p*a*c+s*m*c+h*a*g-s*u*g)*T,i[4]=b*T,i[5]=(d*E*o-f*m*o+f*a*g-r*E*g-d*a*v+r*m*v)*T,i[6]=(f*u*o-l*E*o-f*a*c+r*E*c+l*a*v-r*u*v)*T,i[7]=(l*m*o-d*u*o+d*a*c-r*m*c-l*a*g+r*u*g)*T,i[8]=S*T,i[9]=(f*p*o-d*y*o-f*s*g+r*y*g+d*s*v-r*p*v)*T,i[10]=(l*y*o-f*h*o+f*s*c-r*y*c-l*s*v+r*h*v)*T,i[11]=(d*h*o-l*p*o-d*s*c+r*p*c+l*s*g-r*h*g)*T,i[12]=_*T,i[13]=(d*y*a-f*p*a+f*s*m-r*y*m-d*s*E+r*p*E)*T,i[14]=(f*h*a-l*y*a-f*s*u+r*y*u+l*s*E-r*h*E)*T,i[15]=(l*p*a-d*h*a+d*s*u-r*p*u-l*s*m+r*h*m)*T,this},scale:function(e){var t=this.elements,i=e.x,n=e.y,r=e.z;return t[0]*=i,t[4]*=n,t[8]*=r,t[1]*=i,t[5]*=n,t[9]*=r,t[2]*=i,t[6]*=n,t[10]*=r,t[3]*=i,t[7]*=n,t[11]*=r,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],n=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,n))},makeTranslation:function(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var i=Math.cos(t),n=Math.sin(t),r=1-i,s=e.x,a=e.y,o=e.z,l=r*s,h=r*a;return this.set(l*s+i,l*a-n*o,l*o+n*a,0,l*a+n*o,h*a+i,h*o-n*s,0,l*o-n*a,h*o+n*s,r*o*o+i,0,0,0,0,1),this},makeScale:function(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this},makeShear:function(e,t,i){return this.set(1,t,i,0,e,1,i,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,i){var n=this.elements,r=t._x,s=t._y,a=t._z,o=t._w,l=r+r,h=s+s,u=a+a,c=r*l,d=r*h,p=r*u,m=s*h,g=s*u,f=a*u,y=o*l,E=o*h,v=o*u,A=i.x,b=i.y,S=i.z;return n[0]=(1-(m+f))*A,n[1]=(d+v)*A,n[2]=(p-E)*A,n[3]=0,n[4]=(d-v)*b,n[5]=(1-(c+f))*b,n[6]=(g+y)*b,n[7]=0,n[8]=(p+E)*S,n[9]=(g-y)*S,n[10]=(1-(c+m))*S,n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,this},decompose:(y=new l,E=new B,function(e,t,i){var n=this.elements,r=y.set(n[0],n[1],n[2]).length(),s=y.set(n[4],n[5],n[6]).length(),a=y.set(n[8],n[9],n[10]).length();this.determinant()<0&&(r=-r),e.x=n[12],e.y=n[13],e.z=n[14],E.copy(this);var o=1/r,l=1/s,h=1/a;return E.elements[0]*=o,E.elements[1]*=o,E.elements[2]*=o,E.elements[4]*=l,E.elements[5]*=l,E.elements[6]*=l,E.elements[8]*=h,E.elements[9]*=h,E.elements[10]*=h,t.setFromRotationMatrix(E),i.x=r,i.y=s,i.z=a,this}),makePerspective:function(e,t,i,n,r,s){void 0===s&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,o=2*r/(t-e),l=2*r/(i-n),h=(t+e)/(t-e),u=(i+n)/(i-n),c=-(s+r)/(s-r),d=-2*s*r/(s-r);return a[0]=o,a[4]=0,a[8]=h,a[12]=0,a[1]=0,a[5]=l,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=c,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(e,t,i,n,r,s){var a=this.elements,o=1/(t-e),l=1/(i-n),h=1/(s-r),u=(t+e)*o,c=(i+n)*l,d=(s+r)*h;return a[0]=2*o,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-c,a[2]=0,a[6]=0,a[10]=-2*h,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(e){for(var t=this.elements,i=e.elements,n=0;n<16;n++)if(t[n]!==i[n])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var i=0;i<16;i++)this.elements[i]=e[i+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}});var D={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick( specularColor, dotNV );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = normalMatrix * objectTangent;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent ));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif",lights_pars_begin:"uniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#endif\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\tfloat clearCoatInv = 1.0 - clearCoatDHR;\n\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec3 singleScattering = vec3( 0.0 );\n\t\tvec3 multiScattering = vec3( 0.0 );\n\t\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\t\tvec3 diffuse = material.diffuseColor;\n\t\treflectedLight.indirectSpecular += clearCoatInv * radiance * singleScattering;\n\t\treflectedLight.indirectDiffuse += multiScattering * cosineWeightedIrradiance;\n\t\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n\t#else\n\t\treflectedLight.indirectSpecular += clearCoatInv * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#endif\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, irradiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t#endif\n#endif",normal_fragment_maps:"#ifdef USE_NORMALMAP\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t#ifdef FLIP_SIDED\n\t\t\tnormal = - normal;\n\t\t#endif\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\tnormal = normalize( normalMatrix * normal );\n\t#else\n\t\t#ifdef USE_TANGENT\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy = normalScale * mapN.xy;\n\t\t\tnormal = normalize( vTBN * mapN );\n\t\t#else\n\t\t\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\t\t#endif\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tuniform mat3 normalMatrix;\n\t#else\n\t\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\t\tvec2 st0 = dFdx( vUv.st );\n\t\t\tvec2 st1 = dFdy( vUv.st );\n\t\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\t\tvec3 N = normalize( surf_norm );\n\t\t\tmat3 tsn = mat3( S, T, N );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy *= normalScale;\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\treturn normalize( tsn * mapN );\n\t\t}\n\t#endif\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#if defined( DITHERING )\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n}",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"};function O(e){var t={};for(var i in e)for(var n in t[i]={},e[i]){var r=e[i][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?t[i][n]=r.clone():Array.isArray(r)?t[i][n]=r.slice():t[i][n]=r}return t}function q(e){for(var t={},i=0;i<e.length;i++){var n=O(e[i]);for(var r in n)t[r]=n[r]}return t}var Y,H,G,F={clone:O,merge:q},z={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function U(e,t,i){return void 0===t&&void 0===i?this.set(e):this.setRGB(e,t,i)}Object.assign(U.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,i){return this.r=e,this.g=t,this.b=i,this},setHSL:function(){function e(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+6*(t-e)*(2/3-i):e}return function(t,i,n){if(t=s.euclideanModulo(t,1),i=s.clamp(i,0,1),n=s.clamp(n,0,1),0===i)this.r=this.g=this.b=n;else{var r=n<=.5?n*(1+i):n+i-n*i,a=2*n-r;this.r=e(a,r,t+1/3),this.g=e(a,r,t),this.b=e(a,r,t-1/3)}return this}}(),setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var i;if(i=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var n,r=i[1],s=i[2];switch(r){case"rgb":case"rgba":if(n=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(s))return this.r=Math.min(255,Number(n[1]))/255,this.g=Math.min(255,Number(n[2]))/255,this.b=Math.min(255,Number(n[3]))/255,t(n[5]),this;if(n=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(s))return this.r=Math.min(100,Number(n[1]))/100,this.g=Math.min(100,Number(n[2]))/100,this.b=Math.min(100,Number(n[3]))/100,t(n[5]),this;break;case"hsl":case"hsla":if(n=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(s)){var a=Number(n[1])/360,o=Number(n[2])/100,l=Number(n[3])/100;return t(n[5]),this.setHSL(a,o,l)}}}else if(i=/^\#([A-Fa-f0-9]+)$/.exec(e)){var h,u=(h=i[1]).length;if(3===u)return this.r=parseInt(h.charAt(0)+h.charAt(0),16)/255,this.g=parseInt(h.charAt(1)+h.charAt(1),16)/255,this.b=parseInt(h.charAt(2)+h.charAt(2),16)/255,this;if(6===u)return this.r=parseInt(h.charAt(0)+h.charAt(1),16)/255,this.g=parseInt(h.charAt(2)+h.charAt(3),16)/255,this.b=parseInt(h.charAt(4)+h.charAt(5),16)/255,this}e&&e.length>0&&(void 0!==(h=z[e])?this.setHex(h):console.warn("THREE.Color: Unknown color "+e));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var i=t>0?1/t:1;return this.r=Math.pow(e.r,i),this.g=Math.pow(e.g,i),this.b=Math.pow(e.b,i),this},convertGammaToLinear:function(e){return this.copyGammaToLinear(this,e),this},convertLinearToGamma:function(e){return this.copyLinearToGamma(this,e),this},copySRGBToLinear:function(){function e(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}return function(t){return this.r=e(t.r),this.g=e(t.g),this.b=e(t.b),this}}(),copyLinearToSRGB:function(){function e(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}return function(t){return this.r=e(t.r),this.g=e(t.g),this.b=e(t.b),this}}(),convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t,i,n=this.r,r=this.g,s=this.b,a=Math.max(n,r,s),o=Math.min(n,r,s),l=(o+a)/2;if(o===a)t=0,i=0;else{var h=a-o;switch(i=l<=.5?h/(a+o):h/(2-a-o),a){case n:t=(r-s)/h+(r<s?6:0);break;case r:t=(s-n)/h+2;break;case s:t=(n-r)/h+4}t/=6}return e.h=t,e.s=i,e.l=l,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:(G={},function(e,t,i){return this.getHSL(G),G.h+=e,G.s+=t,G.l+=i,this.setHSL(G.h,G.s,G.l),this}),add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},lerpHSL:(Y={h:0,s:0,l:0},H={h:0,s:0,l:0},function(e,t){this.getHSL(Y),e.getHSL(H);var i=s.lerp(Y.h,H.h,t),n=s.lerp(Y.s,H.s,t),r=s.lerp(Y.l,H.l,t);return this.setHSL(i,n,r),this}),equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}});var W,X={common:{diffuse:{value:new U(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new h},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new a(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new U(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new U(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new h}},sprite:{diffuse:{value:new U(15658734)},opacity:{value:1},center:{value:new a(.5,.5)},rotation:{value:0},map:{value:null},uvTransform:{value:new h}}},j={basic:{uniforms:q([X.common,X.specularmap,X.envmap,X.aomap,X.lightmap,X.fog]),vertexShader:D.meshbasic_vert,fragmentShader:D.meshbasic_frag},lambert:{uniforms:q([X.common,X.specularmap,X.envmap,X.aomap,X.lightmap,X.emissivemap,X.fog,X.lights,{emissive:{value:new U(0)}}]),vertexShader:D.meshlambert_vert,fragmentShader:D.meshlambert_frag},phong:{uniforms:q([X.common,X.specularmap,X.envmap,X.aomap,X.lightmap,X.emissivemap,X.bumpmap,X.normalmap,X.displacementmap,X.gradientmap,X.fog,X.lights,{emissive:{value:new U(0)},specular:{value:new U(1118481)},shininess:{value:30}}]),vertexShader:D.meshphong_vert,fragmentShader:D.meshphong_frag},standard:{uniforms:q([X.common,X.envmap,X.aomap,X.lightmap,X.emissivemap,X.bumpmap,X.normalmap,X.displacementmap,X.roughnessmap,X.metalnessmap,X.fog,X.lights,{emissive:{value:new U(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:D.meshphysical_vert,fragmentShader:D.meshphysical_frag},matcap:{uniforms:q([X.common,X.bumpmap,X.normalmap,X.displacementmap,X.fog,{matcap:{value:null}}]),vertexShader:D.meshmatcap_vert,fragmentShader:D.meshmatcap_frag},points:{uniforms:q([X.points,X.fog]),vertexShader:D.points_vert,fragmentShader:D.points_frag},dashed:{uniforms:q([X.common,X.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:D.linedashed_vert,fragmentShader:D.linedashed_frag},depth:{uniforms:q([X.common,X.displacementmap]),vertexShader:D.depth_vert,fragmentShader:D.depth_frag},normal:{uniforms:q([X.common,X.bumpmap,X.normalmap,X.displacementmap,{opacity:{value:1}}]),vertexShader:D.normal_vert,fragmentShader:D.normal_frag},sprite:{uniforms:q([X.sprite,X.fog]),vertexShader:D.sprite_vert,fragmentShader:D.sprite_frag},background:{uniforms:{uvTransform:{value:new h},t2D:{value:null}},vertexShader:D.background_vert,fragmentShader:D.background_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:D.cube_vert,fragmentShader:D.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:D.equirect_vert,fragmentShader:D.equirect_frag},distanceRGBA:{uniforms:q([X.common,X.displacementmap,{referencePosition:{value:new l},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:D.distanceRGBA_vert,fragmentShader:D.distanceRGBA_frag},shadow:{uniforms:q([X.lights,X.fog,{color:{value:new U(0)},opacity:{value:1}}]),vertexShader:D.shadow_vert,fragmentShader:D.shadow_frag}};function Q(){var e=null,t=!1,i=null;function n(r,s){!1!==t&&(i(r,s),e.requestAnimationFrame(n))}return{start:function(){!0!==t&&null!==i&&(e.requestAnimationFrame(n),t=!0)},stop:function(){t=!1},setAnimationLoop:function(e){i=e},setContext:function(t){e=t}}}function K(e){var t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(i){i.isInterleavedBufferAttribute&&(i=i.data);var n=t.get(i);n&&(e.deleteBuffer(n.buffer),t.delete(i))},update:function(i,n){i.isInterleavedBufferAttribute&&(i=i.data);var r=t.get(i);void 0===r?t.set(i,function(t,i){var n=t.array,r=t.dynamic?35048:35044,s=e.createBuffer();e.bindBuffer(i,s),e.bufferData(i,n,r),t.onUploadCallback();var a=5126;return n instanceof Float32Array?a=5126:n instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):n instanceof Uint16Array?a=5123:n instanceof Int16Array?a=5122:n instanceof Uint32Array?a=5125:n instanceof Int32Array?a=5124:n instanceof Int8Array?a=5120:n instanceof Uint8Array&&(a=5121),{buffer:s,type:a,bytesPerElement:n.BYTES_PER_ELEMENT,version:t.version}}(i,n)):r.version<i.version&&(!function(t,i,n){var r=i.array,s=i.updateRange;e.bindBuffer(n,t),!1===i.dynamic?e.bufferData(n,r,35044):-1===s.count?e.bufferSubData(n,0,r):0===s.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(n,s.offset*r.BYTES_PER_ELEMENT,r.subarray(s.offset,s.offset+s.count)),s.count=-1)}(r.buffer,i,n),r.version=i.version)}}}function Z(e,t,i,n,r,s){this.a=e,this.b=t,this.c=i,this.normal=n&&n.isVector3?n:new l,this.vertexNormals=Array.isArray(n)?n:[],this.color=r&&r.isColor?r:new U,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==s?s:0}function J(e,t,i,n){this._x=e||0,this._y=t||0,this._z=i||0,this._order=n||J.DefaultOrder}function $(){this.mask=1}j.physical={uniforms:q([j.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:D.meshphysical_vert,fragmentShader:D.meshphysical_frag},Object.assign(Z.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,i=e.vertexNormals.length;t<i;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(t=0,i=e.vertexColors.length;t<i;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}}),J.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],J.DefaultOrder="XYZ",Object.defineProperties(J.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this.onChangeCallback()}}}),Object.assign(J.prototype,{isEuler:!0,set:function(e,t,i,n){return this._x=e,this._y=t,this._z=i,this._order=n||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,i){var n=s.clamp,r=e.elements,a=r[0],o=r[4],l=r[8],h=r[1],u=r[5],c=r[9],d=r[2],p=r[6],m=r[10];return"XYZ"===(t=t||this._order)?(this._y=Math.asin(n(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(-c,m),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(p,u),this._z=0)):"YXZ"===t?(this._x=Math.asin(-n(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(l,m),this._z=Math.atan2(h,u)):(this._y=Math.atan2(-d,a),this._z=0)):"ZXY"===t?(this._x=Math.asin(n(p,-1,1)),Math.abs(p)<.99999?(this._y=Math.atan2(-d,m),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(h,a))):"ZYX"===t?(this._y=Math.asin(-n(d,-1,1)),Math.abs(d)<.99999?(this._x=Math.atan2(p,m),this._z=Math.atan2(h,a)):(this._x=0,this._z=Math.atan2(-o,u))):"YZX"===t?(this._z=Math.asin(n(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-d,a)):(this._x=0,this._y=Math.atan2(l,m))):"XZY"===t?(this._z=Math.asin(-n(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(p,u),this._y=Math.atan2(l,a)):(this._x=Math.atan2(-c,m),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==i&&this.onChangeCallback(),this},setFromQuaternion:function(){var e=new B;return function(t,i,n){return e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,i,n)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:(W=new o,function(e){return W.setFromEuler(this),this.setFromQuaternion(W,e)}),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new l(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign($.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},test:function(e){return 0!=(this.mask&e.mask)}});var ee,te,ie,ne,re=0;function se(){Object.defineProperty(this,"id",{value:re++}),this.uuid=s.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=se.DefaultUp.clone();var e=new l,t=new J,i=new o,n=new l(1,1,1);t.onChange((function(){i.setFromEuler(t,!1)})),i.onChange((function(){t.setFromQuaternion(i,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:n},modelViewMatrix:{value:new B},normalMatrix:{value:new h}}),this.matrix=new B,this.matrixWorld=new B,this.matrixAutoUpdate=se.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new $,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}se.DefaultUp=new l(0,1,0),se.DefaultMatrixAutoUpdate=!0,se.prototype=Object.assign(Object.create(t.prototype),{constructor:se,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:(ne=new o,function(e,t){return ne.setFromAxisAngle(e,t),this.quaternion.multiply(ne),this}),rotateOnWorldAxis:function(){var e=new o;return function(t,i){return e.setFromAxisAngle(t,i),this.quaternion.premultiply(e),this}}(),rotateX:function(){var e=new l(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new l(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new l(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new l;return function(t,i){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(i)),this}}(),translateX:function(){var e=new l(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new l(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new l(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:(ie=new B,function(e){return e.applyMatrix4(ie.getInverse(this.matrixWorld))}),lookAt:function(){var e=new o,t=new B,i=new l,n=new l;return function(r,s,a){r.isVector3?i.copy(r):i.set(r,s,a);var o=this.parent;this.updateWorldMatrix(!0,!1),n.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?t.lookAt(n,i,this.up):t.lookAt(i,n,this.up),this.quaternion.setFromRotationMatrix(t),o&&(t.extractRotation(o.matrixWorld),e.setFromRotationMatrix(t),this.quaternion.premultiply(e.inverse()))}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var i=this.children.indexOf(e);return-1!==i&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(i,1)),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var i=0,n=this.children.length;i<n;i++){var r=this.children[i].getObjectByProperty(e,t);if(void 0!==r)return r}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new l),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:(ee=new l,te=new l,function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new o),this.updateMatrixWorld(!0),this.matrixWorld.decompose(ee,e,te),e}),getWorldScale:function(){var e=new l,t=new o;return function(i){return void 0===i&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),i=new l),this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,i),i}}(),getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new l),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);for(var t=this.children,i=0,n=t.length;i<n;i++)t[i].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,i=0,n=t.length;i<n;i++)t[i].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,i=0,n=t.length;i<n;i++)t[i].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){var i=this.parent;if(!0===e&&null!==i&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var n=this.children,r=0,s=n.length;r<s;r++)n[r].updateWorldMatrix(!1,!0)},toJSON:function(e){var t=void 0===e||"string"==typeof e,i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var n={};function r(t,i){return void 0===t[i.uuid]&&(t[i.uuid]=i.toJSON(e)),i.uuid}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),!0===this.castShadow&&(n.castShadow=!0),!0===this.receiveShadow&&(n.receiveShadow=!0),!1===this.visible&&(n.visible=!1),!1===this.frustumCulled&&(n.frustumCulled=!1),0!==this.renderOrder&&(n.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),n.layers=this.layers.mask,n.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(n.matrixAutoUpdate=!1),this.isMesh&&0!==this.drawMode&&(n.drawMode=this.drawMode),this.isMesh||this.isLine||this.isPoints){n.geometry=r(e.geometries,this.geometry);var s=this.geometry.parameters;if(void 0!==s&&void 0!==s.shapes){var a=s.shapes;if(Array.isArray(a))for(var o=0,l=a.length;o<l;o++){var h=a[o];r(e.shapes,h)}else r(e.shapes,a)}}if(void 0!==this.material)if(Array.isArray(this.material)){var u=[];for(o=0,l=this.material.length;o<l;o++)u.push(r(e.materials,this.material[o]));n.material=u}else n.material=r(e.materials,this.material);if(this.children.length>0){n.children=[];for(o=0;o<this.children.length;o++)n.children.push(this.children[o].toJSON(e).object)}if(t){var c=g(e.geometries),d=g(e.materials),p=g(e.textures),m=g(e.images);a=g(e.shapes);c.length>0&&(i.geometries=c),d.length>0&&(i.materials=d),p.length>0&&(i.textures=p),m.length>0&&(i.images=m),a.length>0&&(i.shapes=a)}return i.object=n,i;function g(e){var t=[];for(var i in e){var n=e[i];delete n.metadata,t.push(n)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var i=0;i<e.children.length;i++){var n=e.children[i];this.add(n.clone())}return this}});var ae,oe,le=0;function he(){Object.defineProperty(this,"id",{value:le+=2}),this.uuid=s.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function ue(e,t,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===i,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function ce(e,t,i){ue.call(this,new Int8Array(e),t,i)}function de(e,t,i){ue.call(this,new Uint8Array(e),t,i)}function pe(e,t,i){ue.call(this,new Uint8ClampedArray(e),t,i)}function me(e,t,i){ue.call(this,new Int16Array(e),t,i)}function ge(e,t,i){ue.call(this,new Uint16Array(e),t,i)}function fe(e,t,i){ue.call(this,new Int32Array(e),t,i)}function ye(e,t,i){ue.call(this,new Uint32Array(e),t,i)}function Ee(e,t,i){ue.call(this,new Float32Array(e),t,i)}function ve(e,t,i){ue.call(this,new Float64Array(e),t,i)}function Ae(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function be(e){if(0===e.length)return-1/0;for(var t=e[0],i=1,n=e.length;i<n;++i)e[i]>t&&(t=e[i]);return t}he.prototype=Object.assign(Object.create(t.prototype),{constructor:he,isGeometry:!0,applyMatrix:function(e){for(var t=(new h).getNormalMatrix(e),i=0,n=this.vertices.length;i<n;i++){this.vertices[i].applyMatrix4(e)}for(i=0,n=this.faces.length;i<n;i++){var r=this.faces[i];r.normal.applyMatrix3(t).normalize();for(var s=0,a=r.vertexNormals.length;s<a;s++)r.vertexNormals[s].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var e=new B;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new B;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new B;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new B;return function(t,i,n){return e.makeTranslation(t,i,n),this.applyMatrix(e),this}}(),scale:function(){var e=new B;return function(t,i,n){return e.makeScale(t,i,n),this.applyMatrix(e),this}}(),lookAt:(oe=new se,function(e){oe.lookAt(e),oe.updateMatrix(),this.applyMatrix(oe.matrix)}),fromBufferGeometry:function(e){var t=this,i=null!==e.index?e.index.array:void 0,n=e.attributes,r=n.position.array,s=void 0!==n.normal?n.normal.array:void 0,o=void 0!==n.color?n.color.array:void 0,h=void 0!==n.uv?n.uv.array:void 0,u=void 0!==n.uv2?n.uv2.array:void 0;void 0!==u&&(this.faceVertexUvs[1]=[]);for(var c=0,d=0;c<r.length;c+=3,d+=2)t.vertices.push((new l).fromArray(r,c)),void 0!==o&&t.colors.push((new U).fromArray(o,c));function p(e,i,n,r){var c=void 0===o?[]:[t.colors[e].clone(),t.colors[i].clone(),t.colors[n].clone()],d=new Z(e,i,n,void 0===s?[]:[(new l).fromArray(s,3*e),(new l).fromArray(s,3*i),(new l).fromArray(s,3*n)],c,r);t.faces.push(d),void 0!==h&&t.faceVertexUvs[0].push([(new a).fromArray(h,2*e),(new a).fromArray(h,2*i),(new a).fromArray(h,2*n)]),void 0!==u&&t.faceVertexUvs[1].push([(new a).fromArray(u,2*e),(new a).fromArray(u,2*i),(new a).fromArray(u,2*n)])}var m=e.groups;if(m.length>0)for(c=0;c<m.length;c++)for(var g=m[c],f=g.start,y=(d=f,f+g.count);d<y;d+=3)void 0!==i?p(i[d],i[d+1],i[d+2],g.materialIndex):p(d,d+1,d+2,g.materialIndex);else if(void 0!==i)for(c=0;c<i.length;c+=3)p(i[c],i[c+1],i[c+2]);else for(c=0;c<r.length/3;c+=3)p(c,c+1,c+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:(ae=new l,function(){return this.computeBoundingBox(),this.boundingBox.getCenter(ae).negate(),this.translate(ae.x,ae.y,ae.z),this}),normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,i=0===t?1:1/t,n=new B;return n.set(i,0,0,-i*e.x,0,i,0,-i*e.y,0,0,i,-i*e.z,0,0,0,1),this.applyMatrix(n),this},computeFaceNormals:function(){for(var e=new l,t=new l,i=0,n=this.faces.length;i<n;i++){var r=this.faces[i],s=this.vertices[r.a],a=this.vertices[r.b],o=this.vertices[r.c];e.subVectors(o,a),t.subVectors(s,a),e.cross(t),e.normalize(),r.normal.copy(e)}},computeVertexNormals:function(e){var t,i,n,r,s,a;for(void 0===e&&(e=!0),a=new Array(this.vertices.length),t=0,i=this.vertices.length;t<i;t++)a[t]=new l;if(e){var o,h,u,c=new l,d=new l;for(n=0,r=this.faces.length;n<r;n++)s=this.faces[n],o=this.vertices[s.a],h=this.vertices[s.b],u=this.vertices[s.c],c.subVectors(u,h),d.subVectors(o,h),c.cross(d),a[s.a].add(c),a[s.b].add(c),a[s.c].add(c)}else for(this.computeFaceNormals(),n=0,r=this.faces.length;n<r;n++)a[(s=this.faces[n]).a].add(s.normal),a[s.b].add(s.normal),a[s.c].add(s.normal);for(t=0,i=this.vertices.length;t<i;t++)a[t].normalize();for(n=0,r=this.faces.length;n<r;n++){var p=(s=this.faces[n]).vertexNormals;3===p.length?(p[0].copy(a[s.a]),p[1].copy(a[s.b]),p[2].copy(a[s.c])):(p[0]=a[s.a].clone(),p[1]=a[s.b].clone(),p[2]=a[s.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,i;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){var n=(i=this.faces[e]).vertexNormals;3===n.length?(n[0].copy(i.normal),n[1].copy(i.normal),n[2].copy(i.normal)):(n[0]=i.normal.clone(),n[1]=i.normal.clone(),n[2]=i.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,i,n,r;for(i=0,n=this.faces.length;i<n;i++)for((r=this.faces[i]).__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]),e=0,t=r.vertexNormals.length;e<t;e++)r.__originalVertexNormals[e]?r.__originalVertexNormals[e].copy(r.vertexNormals[e]):r.__originalVertexNormals[e]=r.vertexNormals[e].clone();var s=new he;for(s.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var a=this.morphNormals[e].faceNormals,o=this.morphNormals[e].vertexNormals;for(i=0,n=this.faces.length;i<n;i++)h=new l,u={a:new l,b:new l,c:new l},a.push(h),o.push(u)}var h,u,c=this.morphNormals[e];for(s.vertices=this.morphTargets[e].vertices,s.computeFaceNormals(),s.computeVertexNormals(),i=0,n=this.faces.length;i<n;i++)r=this.faces[i],h=c.faceNormals[i],u=c.vertexNormals[i],h.copy(r.normal),u.a.copy(r.vertexNormals[0]),u.b.copy(r.vertexNormals[1]),u.c.copy(r.vertexNormals[2])}for(i=0,n=this.faces.length;i<n;i++)(r=this.faces[i]).normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new M),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new k),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,i){if(e&&e.isGeometry){var n,r=this.vertices.length,s=this.vertices,a=e.vertices,o=this.faces,l=e.faces,u=this.faceVertexUvs[0],c=e.faceVertexUvs[0],d=this.colors,p=e.colors;void 0===i&&(i=0),void 0!==t&&(n=(new h).getNormalMatrix(t));for(var m=0,g=a.length;m<g;m++){var f=a[m].clone();void 0!==t&&f.applyMatrix4(t),s.push(f)}for(m=0,g=p.length;m<g;m++)d.push(p[m].clone());for(m=0,g=l.length;m<g;m++){var y,E,v,A=l[m],b=A.vertexNormals,S=A.vertexColors;(y=new Z(A.a+r,A.b+r,A.c+r)).normal.copy(A.normal),void 0!==n&&y.normal.applyMatrix3(n).normalize();for(var _=0,x=b.length;_<x;_++)E=b[_].clone(),void 0!==n&&E.applyMatrix3(n).normalize(),y.vertexNormals.push(E);y.color.copy(A.color);for(_=0,x=S.length;_<x;_++)v=S[_],y.vertexColors.push(v.clone());y.materialIndex=A.materialIndex+i,o.push(y)}for(m=0,g=c.length;m<g;m++){var w=c[m],T=[];if(void 0!==w){for(_=0,x=w.length;_<x;_++)T.push(w[_].clone());u.push(T)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var e,t,i,n,r,s,a,o,l={},h=[],u=[],c=Math.pow(10,4);for(i=0,n=this.vertices.length;i<n;i++)e=this.vertices[i],void 0===l[t=Math.round(e.x*c)+"_"+Math.round(e.y*c)+"_"+Math.round(e.z*c)]?(l[t]=i,h.push(this.vertices[i]),u[i]=h.length-1):u[i]=u[l[t]];var d=[];for(i=0,n=this.faces.length;i<n;i++){(r=this.faces[i]).a=u[r.a],r.b=u[r.b],r.c=u[r.c],s=[r.a,r.b,r.c];for(var p=0;p<3;p++)if(s[p]===s[(p+1)%3]){d.push(i);break}}for(i=d.length-1;i>=0;i--){var m=d[i];for(this.faces.splice(m,1),a=0,o=this.faceVertexUvs.length;a<o;a++)this.faceVertexUvs[a].splice(m,1)}var g=this.vertices.length-h.length;return this.vertices=h,g},setFromPoints:function(e){this.vertices=[];for(var t=0,i=e.length;t<i;t++){var n=e[t];this.vertices.push(new l(n.x,n.y,n.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,i=0;i<t;i++)e[i]._id=i;e.sort((function(e,t){return e.materialIndex-t.materialIndex}));var n,r,s=this.faceVertexUvs[0],a=this.faceVertexUvs[1];s&&s.length===t&&(n=[]),a&&a.length===t&&(r=[]);for(i=0;i<t;i++){var o=e[i]._id;n&&n.push(s[o]),r&&r.push(a[o])}n&&(this.faceVertexUvs[0]=n),r&&(this.faceVertexUvs[1]=r)},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var i in t)void 0!==t[i]&&(e[i]=t[i]);return e}for(var n=[],r=0;r<this.vertices.length;r++){var s=this.vertices[r];n.push(s.x,s.y,s.z)}var a=[],o=[],l={},h=[],u={},c=[],d={};for(r=0;r<this.faces.length;r++){var p=this.faces[r],m=void 0!==this.faceVertexUvs[0][r],g=p.normal.length()>0,f=p.vertexNormals.length>0,y=1!==p.color.r||1!==p.color.g||1!==p.color.b,E=p.vertexColors.length>0,v=0;if(v=_(v,0,0),v=_(v,1,!0),v=_(v,2,!1),v=_(v,3,m),v=_(v,4,g),v=_(v,5,f),v=_(v,6,y),v=_(v,7,E),a.push(v),a.push(p.a,p.b,p.c),a.push(p.materialIndex),m){var A=this.faceVertexUvs[0][r];a.push(T(A[0]),T(A[1]),T(A[2]))}if(g&&a.push(x(p.normal)),f){var b=p.vertexNormals;a.push(x(b[0]),x(b[1]),x(b[2]))}if(y&&a.push(w(p.color)),E){var S=p.vertexColors;a.push(w(S[0]),w(S[1]),w(S[2]))}}function _(e,t,i){return i?e|1<<t:e&~(1<<t)}function x(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==l[t]||(l[t]=o.length/3,o.push(e.x,e.y,e.z)),l[t]}function w(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==u[t]||(u[t]=h.length,h.push(e.getHex())),u[t]}function T(e){var t=e.x.toString()+e.y.toString();return void 0!==d[t]||(d[t]=c.length/2,c.push(e.x,e.y)),d[t]}return e.data={},e.data.vertices=n,e.data.normals=o,h.length>0&&(e.data.colors=h),c.length>0&&(e.data.uvs=[c]),e.data.faces=a,e},clone:function(){return(new he).copy(this)},copy:function(e){var t,i,n,r,s,a;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var o=e.vertices;for(t=0,i=o.length;t<i;t++)this.vertices.push(o[t].clone());var l=e.colors;for(t=0,i=l.length;t<i;t++)this.colors.push(l[t].clone());var h=e.faces;for(t=0,i=h.length;t<i;t++)this.faces.push(h[t].clone());for(t=0,i=e.faceVertexUvs.length;t<i;t++){var u=e.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),n=0,r=u.length;n<r;n++){var c=u[n],d=[];for(s=0,a=c.length;s<a;s++){var p=c[s];d.push(p.clone())}this.faceVertexUvs[t].push(d)}}var m=e.morphTargets;for(t=0,i=m.length;t<i;t++){var g={};if(g.name=m[t].name,void 0!==m[t].vertices)for(g.vertices=[],n=0,r=m[t].vertices.length;n<r;n++)g.vertices.push(m[t].vertices[n].clone());if(void 0!==m[t].normals)for(g.normals=[],n=0,r=m[t].normals.length;n<r;n++)g.normals.push(m[t].normals[n].clone());this.morphTargets.push(g)}var f=e.morphNormals;for(t=0,i=f.length;t<i;t++){var y={};if(void 0!==f[t].vertexNormals)for(y.vertexNormals=[],n=0,r=f[t].vertexNormals.length;n<r;n++){var E=f[t].vertexNormals[n],v={};v.a=E.a.clone(),v.b=E.b.clone(),v.c=E.c.clone(),y.vertexNormals.push(v)}if(void 0!==f[t].faceNormals)for(y.faceNormals=[],n=0,r=f[t].faceNormals.length;n<r;n++)y.faceNormals.push(f[t].faceNormals[n].clone());this.morphNormals.push(y)}var A=e.skinWeights;for(t=0,i=A.length;t<i;t++)this.skinWeights.push(A[t].clone());var b=e.skinIndices;for(t=0,i=b.length;t<i;t++)this.skinIndices.push(b[t].clone());var S=e.lineDistances;for(t=0,i=S.length;t<i;t++)this.lineDistances.push(S[t]);var _=e.boundingBox;null!==_&&(this.boundingBox=_.clone());var x=e.boundingSphere;return null!==x&&(this.boundingSphere=x.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(ue.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(ue.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.itemSize:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,i){e*=this.itemSize,i*=t.itemSize;for(var n=0,r=this.itemSize;n<r;n++)this.array[e+n]=t.array[i+n];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,i=0,n=0,r=e.length;n<r;n++){var s=e[n];void 0===s&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",n),s=new U),t[i++]=s.r,t[i++]=s.g,t[i++]=s.b}return this},copyVector2sArray:function(e){for(var t=this.array,i=0,n=0,r=e.length;n<r;n++){var s=e[n];void 0===s&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",n),s=new a),t[i++]=s.x,t[i++]=s.y}return this},copyVector3sArray:function(e){for(var t=this.array,i=0,n=0,r=e.length;n<r;n++){var s=e[n];void 0===s&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",n),s=new l),t[i++]=s.x,t[i++]=s.y,t[i++]=s.z}return this},copyVector4sArray:function(e){for(var t=this.array,i=0,n=0,r=e.length;n<r;n++){var s=e[n];void 0===s&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",n),s=new P),t[i++]=s.x,t[i++]=s.y,t[i++]=s.z,t[i++]=s.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this},setXYZ:function(e,t,i,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=n,this},setXYZW:function(e,t,i,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=n,this.array[e+3]=r,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),ce.prototype=Object.create(ue.prototype),ce.prototype.constructor=ce,de.prototype=Object.create(ue.prototype),de.prototype.constructor=de,pe.prototype=Object.create(ue.prototype),pe.prototype.constructor=pe,me.prototype=Object.create(ue.prototype),me.prototype.constructor=me,ge.prototype=Object.create(ue.prototype),ge.prototype.constructor=ge,fe.prototype=Object.create(ue.prototype),fe.prototype.constructor=fe,ye.prototype=Object.create(ue.prototype),ye.prototype.constructor=ye,Ee.prototype=Object.create(ue.prototype),Ee.prototype.constructor=Ee,ve.prototype=Object.create(ue.prototype),ve.prototype.constructor=ve,Object.assign(Ae.prototype,{computeGroups:function(e){for(var t,i=[],n=void 0,r=e.faces,s=0;s<r.length;s++){var a=r[s];a.materialIndex!==n&&(n=a.materialIndex,void 0!==t&&(t.count=3*s-t.start,i.push(t)),t={start:3*s,materialIndex:n})}void 0!==t&&(t.count=3*s-t.start,i.push(t)),this.groups=i},fromGeometry:function(e){var t,i=e.faces,n=e.vertices,r=e.faceVertexUvs,s=r[0]&&r[0].length>0,o=r[1]&&r[1].length>0,l=e.morphTargets,h=l.length;if(h>0){t=[];for(var u=0;u<h;u++)t[u]={name:l[u].name,data:[]};this.morphTargets.position=t}var c,d=e.morphNormals,p=d.length;if(p>0){c=[];for(u=0;u<p;u++)c[u]={name:d[u].name,data:[]};this.morphTargets.normal=c}var m=e.skinIndices,g=e.skinWeights,f=m.length===n.length,y=g.length===n.length;n.length>0&&0===i.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(u=0;u<i.length;u++){var E=i[u];this.vertices.push(n[E.a],n[E.b],n[E.c]);var v=E.vertexNormals;if(3===v.length)this.normals.push(v[0],v[1],v[2]);else{var A=E.normal;this.normals.push(A,A,A)}var b,S=E.vertexColors;if(3===S.length)this.colors.push(S[0],S[1],S[2]);else{var _=E.color;this.colors.push(_,_,_)}if(!0===s)void 0!==(b=r[0][u])?this.uvs.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",u),this.uvs.push(new a,new a,new a));if(!0===o)void 0!==(b=r[1][u])?this.uvs2.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",u),this.uvs2.push(new a,new a,new a));for(var x=0;x<h;x++){var w=l[x].vertices;t[x].data.push(w[E.a],w[E.b],w[E.c])}for(x=0;x<p;x++){var T=d[x].vertexNormals[u];c[x].data.push(T.a,T.b,T.c)}f&&this.skinIndices.push(m[E.a],m[E.b],m[E.c]),y&&this.skinWeights.push(g[E.a],g[E.b],g[E.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}});var Se=1;function _e(){Object.defineProperty(this,"id",{value:Se+=2}),this.uuid=s.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}function xe(e,t,i,n,r,s){he.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:n,heightSegments:r,depthSegments:s},this.fromBufferGeometry(new we(e,t,i,n,r,s)),this.mergeVertices()}function we(e,t,i,n,r,s){_e.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:n,heightSegments:r,depthSegments:s};var a=this;e=e||1,t=t||1,i=i||1,n=Math.floor(n)||1,r=Math.floor(r)||1,s=Math.floor(s)||1;var o=[],h=[],u=[],c=[],d=0,p=0;function m(e,t,i,n,r,s,m,g,f,y,E){var v,A,b=s/f,S=m/y,_=s/2,x=m/2,w=g/2,T=f+1,P=y+1,C=0,V=0,R=new l;for(A=0;A<P;A++){var N=A*S-x;for(v=0;v<T;v++){var M=v*b-_;R[e]=M*n,R[t]=N*r,R[i]=w,h.push(R.x,R.y,R.z),R[e]=0,R[t]=0,R[i]=g>0?1:-1,u.push(R.x,R.y,R.z),c.push(v/f),c.push(1-A/y),C+=1}}for(A=0;A<y;A++)for(v=0;v<f;v++){var k=d+v+T*A,L=d+v+T*(A+1),I=d+(v+1)+T*(A+1),B=d+(v+1)+T*A;o.push(k,L,B),o.push(L,I,B),V+=6}a.addGroup(p,V,E),p+=V,d+=C}m("z","y","x",-1,-1,i,t,e,s,r,0),m("z","y","x",1,-1,i,t,-e,s,r,1),m("x","z","y",1,1,e,i,t,n,s,2),m("x","z","y",1,-1,e,i,-t,n,s,3),m("x","y","z",1,-1,e,t,i,n,r,4),m("x","y","z",-1,-1,e,t,-i,n,r,5),this.setIndex(o),this.addAttribute("position",new Ee(h,3)),this.addAttribute("normal",new Ee(u,3)),this.addAttribute("uv",new Ee(c,2))}function Te(e,t,i,n){he.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:n},this.fromBufferGeometry(new Pe(e,t,i,n)),this.mergeVertices()}function Pe(e,t,i,n){_e.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:n};var r,s,a=(e=e||1)/2,o=(t=t||1)/2,l=Math.floor(i)||1,h=Math.floor(n)||1,u=l+1,c=h+1,d=e/l,p=t/h,m=[],g=[],f=[],y=[];for(s=0;s<c;s++){var E=s*p-o;for(r=0;r<u;r++){var v=r*d-a;g.push(v,-E,0),f.push(0,0,1),y.push(r/l),y.push(1-s/h)}}for(s=0;s<h;s++)for(r=0;r<l;r++){var A=r+u*s,b=r+u*(s+1),S=r+1+u*(s+1),_=r+1+u*s;m.push(A,b,_),m.push(b,S,_)}this.setIndex(m),this.addAttribute("position",new Ee(g,3)),this.addAttribute("normal",new Ee(f,3)),this.addAttribute("uv",new Ee(y,2))}_e.prototype=Object.assign(Object.create(t.prototype),{constructor:_e,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(be(e)>65535?ye:ge)(e,1):this.index=e},addAttribute:function(e,t){return t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):(this.attributes[e]=t,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(e,new ue(arguments[1],arguments[2])))},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,i){this.groups.push({start:e,count:t,materialIndex:void 0!==i?i:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var i=this.attributes.normal;void 0!==i&&((new h).getNormalMatrix(e).applyToBufferAttribute(i),i.needsUpdate=!0);var n=this.attributes.tangent;void 0!==n&&((new h).getNormalMatrix(e).applyToBufferAttribute(n),n.needsUpdate=!0);return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var e=new B;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new B;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new B;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new B;return function(t,i,n){return e.makeTranslation(t,i,n),this.applyMatrix(e),this}}(),scale:function(){var e=new B;return function(t,i,n){return e.makeScale(t,i,n),this.applyMatrix(e),this}}(),lookAt:function(){var e=new se;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){var e=new l;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(e).negate(),this.translate(e.x,e.y,e.z),this}}(),setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var i=new Ee(3*t.vertices.length,3),n=new Ee(3*t.colors.length,3);if(this.addAttribute("position",i.copyVector3sArray(t.vertices)),this.addAttribute("color",n.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var r=new Ee(t.lineDistances.length,1);this.addAttribute("lineDistance",r.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],i=0,n=e.length;i<n;i++){var r=e[i];t.push(r.x,r.y,r.z||0)}return this.addAttribute("position",new Ee(t,3)),this},updateFromObject:function(e){var t,i=e.geometry;if(e.isMesh){var n=i.__directGeometry;if(!0===i.elementsNeedUpdate&&(n=void 0,i.elementsNeedUpdate=!1),void 0===n)return this.fromGeometry(i);n.verticesNeedUpdate=i.verticesNeedUpdate,n.normalsNeedUpdate=i.normalsNeedUpdate,n.colorsNeedUpdate=i.colorsNeedUpdate,n.uvsNeedUpdate=i.uvsNeedUpdate,n.groupsNeedUpdate=i.groupsNeedUpdate,i.verticesNeedUpdate=!1,i.normalsNeedUpdate=!1,i.colorsNeedUpdate=!1,i.uvsNeedUpdate=!1,i.groupsNeedUpdate=!1,i=n}return!0===i.verticesNeedUpdate&&(void 0!==(t=this.attributes.position)&&(t.copyVector3sArray(i.vertices),t.needsUpdate=!0),i.verticesNeedUpdate=!1),!0===i.normalsNeedUpdate&&(void 0!==(t=this.attributes.normal)&&(t.copyVector3sArray(i.normals),t.needsUpdate=!0),i.normalsNeedUpdate=!1),!0===i.colorsNeedUpdate&&(void 0!==(t=this.attributes.color)&&(t.copyColorsArray(i.colors),t.needsUpdate=!0),i.colorsNeedUpdate=!1),i.uvsNeedUpdate&&(void 0!==(t=this.attributes.uv)&&(t.copyVector2sArray(i.uvs),t.needsUpdate=!0),i.uvsNeedUpdate=!1),i.lineDistancesNeedUpdate&&(void 0!==(t=this.attributes.lineDistance)&&(t.copyArray(i.lineDistances),t.needsUpdate=!0),i.lineDistancesNeedUpdate=!1),i.groupsNeedUpdate&&(i.computeGroups(e.geometry),this.groups=i.groups,i.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new Ae).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.addAttribute("position",new ue(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var i=new Float32Array(3*e.normals.length);this.addAttribute("normal",new ue(i,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var n=new Float32Array(3*e.colors.length);this.addAttribute("color",new ue(n,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var r=new Float32Array(2*e.uvs.length);this.addAttribute("uv",new ue(r,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var s=new Float32Array(2*e.uvs2.length);this.addAttribute("uv2",new ue(s,2).copyVector2sArray(e.uvs2))}for(var a in this.groups=e.groups,e.morphTargets){for(var o=[],l=e.morphTargets[a],h=0,u=l.length;h<u;h++){var c=l[h],d=new Ee(3*c.data.length,3);d.name=c.name,o.push(d.copyVector3sArray(c.data))}this.morphAttributes[a]=o}if(e.skinIndices.length>0){var p=new Ee(4*e.skinIndices.length,4);this.addAttribute("skinIndex",p.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var m=new Ee(4*e.skinWeights.length,4);this.addAttribute("skinWeight",m.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){var e=new M;return function(){null===this.boundingBox&&(this.boundingBox=new M);var t=this.attributes.position,i=this.morphAttributes.position;if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),i)for(var n=0,r=i.length;n<r;n++){var s=i[n];e.setFromBufferAttribute(s),this.boundingBox.expandByPoint(e.min),this.boundingBox.expandByPoint(e.max)}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}}(),computeBoundingSphere:function(){var e=new M,t=new M,i=new l;return function(){null===this.boundingSphere&&(this.boundingSphere=new k);var n=this.attributes.position,r=this.morphAttributes.position;if(n){var s=this.boundingSphere.center;if(e.setFromBufferAttribute(n),r)for(var a=0,o=r.length;a<o;a++){var l=r[a];t.setFromBufferAttribute(l),e.expandByPoint(t.min),e.expandByPoint(t.max)}e.getCenter(s);var h=0;for(a=0,o=n.count;a<o;a++)i.fromBufferAttribute(n,a),h=Math.max(h,s.distanceToSquared(i));if(r)for(a=0,o=r.length;a<o;a++)for(var u=0,c=(l=r[a]).count;u<c;u++)i.fromBufferAttribute(l,u),h=Math.max(h,s.distanceToSquared(i));this.boundingSphere.radius=Math.sqrt(h),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes;if(t.position){var i=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new ue(new Float32Array(i.length),3));else for(var n=t.normal.array,r=0,s=n.length;r<s;r++)n[r]=0;var a,o,h,u=t.normal.array,c=new l,d=new l,p=new l,m=new l,g=new l;if(e){var f=e.array;for(r=0,s=e.count;r<s;r+=3)a=3*f[r+0],o=3*f[r+1],h=3*f[r+2],c.fromArray(i,a),d.fromArray(i,o),p.fromArray(i,h),m.subVectors(p,d),g.subVectors(c,d),m.cross(g),u[a]+=m.x,u[a+1]+=m.y,u[a+2]+=m.z,u[o]+=m.x,u[o+1]+=m.y,u[o+2]+=m.z,u[h]+=m.x,u[h+1]+=m.y,u[h+2]+=m.z}else for(r=0,s=i.length;r<s;r+=9)c.fromArray(i,r),d.fromArray(i,r+3),p.fromArray(i,r+6),m.subVectors(p,d),g.subVectors(c,d),m.cross(g),u[r]=m.x,u[r+1]=m.y,u[r+2]=m.z,u[r+3]=m.x,u[r+4]=m.y,u[r+5]=m.z,u[r+6]=m.x,u[r+7]=m.y,u[r+8]=m.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var i=this.attributes;for(var n in i)if(void 0!==e.attributes[n])for(var r=i[n].array,s=e.attributes[n],a=s.array,o=s.itemSize*t,l=Math.min(a.length,r.length-o),h=0,u=o;h<l;h++,u++)r[u]=a[h];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){var e=new l;return function(){for(var t=this.attributes.normal,i=0,n=t.count;i<n;i++)e.x=t.getX(i),e.y=t.getY(i),e.z=t.getZ(i),e.normalize(),t.setXYZ(i,e.x,e.y,e.z)}}(),toNonIndexed:function(){function e(e,t){for(var i=e.array,n=e.itemSize,r=new i.constructor(t.length*n),s=0,a=0,o=0,l=t.length;o<l;o++){s=t[o]*n;for(var h=0;h<n;h++)r[a++]=i[s++]}return new ue(r,n)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t=new _e,i=this.index.array,n=this.attributes;for(var r in n){var s=e(n[r],i);t.addAttribute(r,s)}var a=this.morphAttributes;for(r in a){for(var o=[],l=a[r],h=0,u=l.length;h<u;h++){s=e(l[h],i);o.push(s)}t.morphAttributes[r]=o}for(var c=this.groups,d=(h=0,c.length);h<d;h++){var p=c[h];t.addGroup(p.start,p.count,p.materialIndex)}return t},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var i in t)void 0!==t[i]&&(e[i]=t[i]);return e}e.data={attributes:{}};var n=this.index;null!==n&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});var r=this.attributes;for(var i in r){var s={itemSize:(d=r[i]).itemSize,type:d.array.constructor.name,array:Array.prototype.slice.call(d.array),normalized:d.normalized};""!==d.name&&(s.name=d.name),e.data.attributes[i]=s}var a={},o=!1;for(var i in this.morphAttributes){for(var l=this.morphAttributes[i],h=[],u=0,c=l.length;u<c;u++){var d;s={itemSize:(d=l[u]).itemSize,type:d.array.constructor.name,array:Array.prototype.slice.call(d.array),normalized:d.normalized};""!==d.name&&(s.name=d.name),h.push(s)}h.length>0&&(a[i]=h,o=!0)}o&&(e.data.morphAttributes=a);var p=this.groups;p.length>0&&(e.data.groups=JSON.parse(JSON.stringify(p)));var m=this.boundingSphere;return null!==m&&(e.data.boundingSphere={center:m.center.toArray(),radius:m.radius}),e},clone:function(){return(new _e).copy(this)},copy:function(e){var t,i,n;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var r=e.index;null!==r&&this.setIndex(r.clone());var s=e.attributes;for(t in s){var a=s[t];this.addAttribute(t,a.clone())}var o=e.morphAttributes;for(t in o){var l=[],h=o[t];for(i=0,n=h.length;i<n;i++)l.push(h[i].clone());this.morphAttributes[t]=l}var u=e.groups;for(i=0,n=u.length;i<n;i++){var c=u[i];this.addGroup(c.start,c.count,c.materialIndex)}var d=e.boundingBox;null!==d&&(this.boundingBox=d.clone());var p=e.boundingSphere;return null!==p&&(this.boundingSphere=p.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),xe.prototype=Object.create(he.prototype),xe.prototype.constructor=xe,we.prototype=Object.create(_e.prototype),we.prototype.constructor=we,Te.prototype=Object.create(he.prototype),Te.prototype.constructor=Te,Pe.prototype=Object.create(_e.prototype),Pe.prototype.constructor=Pe;var Ce=0;function Ve(){Object.defineProperty(this,"id",{value:Ce++}),this.uuid=s.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=1,this.side=0,this.flatShading=!1,this.vertexTangents=!1,this.vertexColors=0,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.userData={},this.needsUpdate=!0}Ve.prototype=Object.assign(Object.create(t.prototype),{constructor:Ve,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(void 0!==e)for(var t in e){var i=e[t];if(void 0!==i)if("shading"!==t){var n=this[t];void 0!==n?n&&n.isColor?n.set(i):n&&n.isVector3&&i&&i.isVector3?n.copy(i):this[t]=i:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===i;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){var t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});var i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function n(e){var t=[];for(var i in e){var n=e[i];delete n.metadata,t.push(n)}return t}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearCoat&&(i.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(i.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,i.reflectivity=this.reflectivity,void 0!==this.combine&&(i.combine=this.combine),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(i.size=this.size),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(i.blending=this.blending),!0===this.flatShading&&(i.flatShading=this.flatShading),0!==this.side&&(i.side=this.side),0!==this.vertexColors&&(i.vertexColors=this.vertexColors),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(i.morphTargets=!0),!0===this.skinning&&(i.skinning=!0),!1===this.visible&&(i.visible=!1),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),t){var r=n(e.textures),s=n(e.images);r.length>0&&(i.textures=r),s.length>0&&(i.images=s)}return i},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.userData=JSON.parse(JSON.stringify(e.userData)),this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,i=null;if(null!==t){var n=t.length;i=new Array(n);for(var r=0;r!==n;++r)i[r]=t[r].clone()}return this.clippingPlanes=i,this.shadowSide=e.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Re,Ne,Me,ke,Le,Ie,Be,De,Oe,qe,Ye,He;function Ge(e){Ve.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function Fe(e,t){this.origin=void 0!==e?e:new l,this.direction=void 0!==t?t:new l}function ze(e,t,i){this.a=void 0!==e?e:new l,this.b=void 0!==t?t:new l,this.c=void 0!==i?i:new l}function Ue(e){Ve.call(this),this.type="MeshBasicMaterial",this.color=new U(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function We(e,t){se.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new _e,this.material=void 0!==t?t:new Ue({color:16777215*Math.random()}),this.drawMode=0,this.updateMorphTargets()}function Xe(e,t,i,n){var r,s,a=new U(0),o=0,l=null,h=0;function u(e,i){t.buffers.color.setClear(e.r,e.g,e.b,i,n)}return{getClearColor:function(){return a},setClearColor:function(e,t){a.set(e),u(a,o=void 0!==t?t:1)},getClearAlpha:function(){return o},setClearAlpha:function(e){u(a,o=e)},render:function(t,n,c,d){var p=n.background,m=e.vr,g=m.getSession&&m.getSession();if(g&&"additive"===g.environmentBlendMode&&(p=null),null===p?(u(a,o),l=null,h=0):p&&p.isColor&&(u(p,1),d=!0,l=null,h=0),(e.autoClear||d)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),p&&(p.isCubeTexture||p.isWebGLRenderTargetCube)){void 0===s&&((s=new We(new we(1,1,1),new Ge({type:"BackgroundCubeMaterial",uniforms:O(j.cube.uniforms),vertexShader:j.cube.vertexShader,fragmentShader:j.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),s.geometry.removeAttribute("uv"),s.onBeforeRender=function(e,t,i){this.matrixWorld.copyPosition(i.matrixWorld)},Object.defineProperty(s.material,"map",{get:function(){return this.uniforms.tCube.value}}),i.update(s));var f=p.isWebGLRenderTargetCube?p.texture:p;s.material.uniforms.tCube.value=f,s.material.uniforms.tFlip.value=p.isWebGLRenderTargetCube?1:-1,l===p&&h===f.version||(s.material.needsUpdate=!0,l=p,h=f.version),t.unshift(s,s.geometry,s.material,0,0,null)}else p&&p.isTexture&&(void 0===r&&((r=new We(new Pe(2,2),new Ge({type:"BackgroundMaterial",uniforms:O(j.background.uniforms),vertexShader:j.background.vertexShader,fragmentShader:j.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),Object.defineProperty(r.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(r)),r.material.uniforms.t2D.value=p,!0===p.matrixAutoUpdate&&p.updateMatrix(),r.material.uniforms.uvTransform.value.copy(p.matrix),l===p&&h===p.version||(r.material.needsUpdate=!0,l=p,h=p.version),t.unshift(r,r.geometry,r.material,0,0,null))}}}function je(e,t,i,n){var r;this.setMode=function(e){r=e},this.render=function(t,n){e.drawArrays(r,t,n),i.update(n,r)},this.renderInstances=function(s,a,o){var l;if(n.isWebGL2)l=e;else if(null===(l=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[n.isWebGL2?"drawArraysInstanced":"drawArraysInstancedANGLE"](r,a,o,s.maxInstancedCount),i.update(o,r,s.maxInstancedCount)}}function Qe(e,t,i){var n;function r(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var s="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext,a=void 0!==i.precision?i.precision:"highp",o=r(a);o!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",o,"instead."),a=o);var l=!0===i.logarithmicDepthBuffer,h=e.getParameter(34930),u=e.getParameter(35660),c=e.getParameter(3379),d=e.getParameter(34076),p=e.getParameter(34921),m=e.getParameter(36347),g=e.getParameter(36348),f=e.getParameter(36349),y=u>0,E=s||!!t.get("OES_texture_float");return{isWebGL2:s,getMaxAnisotropy:function(){if(void 0!==n)return n;var i=t.get("EXT_texture_filter_anisotropic");return n=null!==i?e.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:r,precision:a,logarithmicDepthBuffer:l,maxTextures:h,maxVertexTextures:u,maxTextureSize:c,maxCubemapSize:d,maxAttributes:p,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:f,vertexTextures:y,floatFragmentTextures:E,floatVertexTextures:y&&E,maxSamples:s?e.getParameter(36183):0}}function Ke(){var e=this,t=null,i=0,n=!1,r=!1,s=new L,a=new h,o={value:null,needsUpdate:!1};function l(){o.value!==t&&(o.value=t,o.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(t,i,n,r){var l=null!==t?t.length:0,h=null;if(0!==l){if(h=o.value,!0!==r||null===h){var u=n+4*l,c=i.matrixWorldInverse;a.getNormalMatrix(c),(null===h||h.length<u)&&(h=new Float32Array(u));for(var d=0,p=n;d!==l;++d,p+=4)s.copy(t[d]).applyMatrix4(c,a),s.normal.toArray(h,p),h[p+3]=s.constant}o.value=h,o.needsUpdate=!0}return e.numPlanes=l,h}this.uniform=o,this.numPlanes=0,this.numIntersection=0,this.init=function(e,r,s){var a=0!==e.length||r||0!==i||n;return n=r,t=u(e,s,0),i=e.length,a},this.beginShadows=function(){r=!0,u(null)},this.endShadows=function(){r=!1,l()},this.setState=function(e,s,a,h,c,d){if(!n||null===e||0===e.length||r&&!a)r?u(null):l();else{var p=r?0:i,m=4*p,g=c.clippingState||null;o.value=g,g=u(e,h,m,d);for(var f=0;f!==m;++f)g[f]=t[f];c.clippingState=g,this.numIntersection=s?this.numPlanes:0,this.numPlanes+=p}}}function Ze(e){var t={};return{get:function(i){if(void 0!==t[i])return t[i];var n;switch(i){case"WEBGL_depth_texture":n=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=e.getExtension(i)}return null===n&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),t[i]=n,n}}}function Je(e,t,i){var n={},r={};function s(e){var a=e.target,o=n[a.id];for(var l in null!==o.index&&t.remove(o.index),o.attributes)t.remove(o.attributes[l]);a.removeEventListener("dispose",s),delete n[a.id];var h=r[o.id];h&&(t.remove(h),delete r[o.id]),i.memory.geometries--}return{get:function(e,t){var r=n[t.id];return r||(t.addEventListener("dispose",s),t.isBufferGeometry?r=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new _e).setFromObject(e)),r=t._bufferGeometry),n[t.id]=r,i.memory.geometries++,r)},update:function(e){var i=e.index,n=e.attributes;for(var r in null!==i&&t.update(i,34963),n)t.update(n[r],34962);var s=e.morphAttributes;for(var r in s)for(var a=s[r],o=0,l=a.length;o<l;o++)t.update(a[o],34962)},getWireframeAttribute:function(e){var i=r[e.id];if(i)return i;var n,s=[],a=e.index,o=e.attributes;if(null!==a)for(var l=0,h=(n=a.array).length;l<h;l+=3){var u=n[l+0],c=n[l+1],d=n[l+2];s.push(u,c,c,d,d,u)}else for(l=0,h=(n=o.position.array).length/3-1;l<h;l+=3){u=l+0,c=l+1,d=l+2;s.push(u,c,c,d,d,u)}return i=new(be(s)>65535?ye:ge)(s,1),t.update(i,34963),r[e.id]=i,i}}}function $e(e,t,i,n){var r,s,a;this.setMode=function(e){r=e},this.setIndex=function(e){s=e.type,a=e.bytesPerElement},this.render=function(t,n){e.drawElements(r,n,s,t*a),i.update(n,r)},this.renderInstances=function(o,l,h){var u;if(n.isWebGL2)u=e;else if(null===(u=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[n.isWebGL2?"drawElementsInstanced":"drawElementsInstancedANGLE"](r,h,s,l*a,o.maxInstancedCount),i.update(h,r,o.maxInstancedCount)}}function et(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,i,n){switch(n=n||1,t.calls++,i){case 4:t.triangles+=n*(e/3);break;case 5:case 6:t.triangles+=n*(e-2);break;case 1:t.lines+=n*(e/2);break;case 3:t.lines+=n*(e-1);break;case 2:t.lines+=n*e;break;case 0:t.points+=n*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",i)}}}}function tt(e,t){return Math.abs(t[1])-Math.abs(e[1])}function it(e){var t={},i=new Float32Array(8);return{update:function(n,r,s,a){var o=n.morphTargetInfluences,l=o.length,h=t[r.id];if(void 0===h){h=[];for(var u=0;u<l;u++)h[u]=[u,0];t[r.id]=h}var c=s.morphTargets&&r.morphAttributes.position,d=s.morphNormals&&r.morphAttributes.normal;for(u=0;u<l;u++){0!==(p=h[u])[1]&&(c&&r.removeAttribute("morphTarget"+u),d&&r.removeAttribute("morphNormal"+u))}for(u=0;u<l;u++){(p=h[u])[0]=u,p[1]=o[u]}for(h.sort(tt),u=0;u<8;u++){var p;if(p=h[u]){var m=p[0],g=p[1];if(g){c&&r.addAttribute("morphTarget"+u,c[m]),d&&r.addAttribute("morphNormal"+u,d[m]),i[u]=g;continue}}i[u]=0}a.getUniforms().setValue(e,"morphTargetInfluences",i)}}}function nt(e,t){var i={};return{update:function(n){var r=t.render.frame,s=n.geometry,a=e.get(n,s);return i[a.id]!==r&&(s.isGeometry&&a.updateFromObject(n),e.update(a),i[a.id]=r),a},dispose:function(){i={}}}}function rt(e,t,i,n,r,s,a,o,l,h){e=void 0!==e?e:[],t=void 0!==t?t:301,a=void 0!==a?a:1022,T.call(this,e,t,i,n,r,s,a,o,l,h),this.flipY=!1}function st(e,t,i,n){T.call(this,null),this.image={data:e,width:t,height:i,depth:n},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1}function at(e,t,i,n){T.call(this,null),this.image={data:e,width:t,height:i,depth:n},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1}Ge.prototype=Object.create(Ve.prototype),Ge.prototype.constructor=Ge,Ge.prototype.isShaderMaterial=!0,Ge.prototype.copy=function(e){return Ve.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=O(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},Ge.prototype.toJSON=function(e){var t=Ve.prototype.toJSON.call(this,e);for(var i in t.uniforms={},this.uniforms){var n=this.uniforms[i].value;n&&n.isTexture?t.uniforms[i]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[i]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[i]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[i]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[i]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[i]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[i]={type:"m4",value:n.toArray()}:t.uniforms[i]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var r={};for(var s in this.extensions)!0===this.extensions[s]&&(r[s]=!0);return Object.keys(r).length>0&&(t.extensions=r),t},Object.assign(Fe.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new l),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new l;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new l),t.subVectors(e,this.origin);var i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new l;return function(t){var i=e.subVectors(t,this.origin).dot(this.direction);return i<0?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(i).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:(Ne=new l,Me=new l,ke=new l,function(e,t,i,n){Ne.copy(e).add(t).multiplyScalar(.5),Me.copy(t).sub(e).normalize(),ke.copy(this.origin).sub(Ne);var r,s,a,o,l=.5*e.distanceTo(t),h=-this.direction.dot(Me),u=ke.dot(this.direction),c=-ke.dot(Me),d=ke.lengthSq(),p=Math.abs(1-h*h);if(p>0)if(s=h*u-c,o=l*p,(r=h*c-u)>=0)if(s>=-o)if(s<=o){var m=1/p;a=(r*=m)*(r+h*(s*=m)+2*u)+s*(h*r+s+2*c)+d}else s=l,a=-(r=Math.max(0,-(h*s+u)))*r+s*(s+2*c)+d;else s=-l,a=-(r=Math.max(0,-(h*s+u)))*r+s*(s+2*c)+d;else s<=-o?a=-(r=Math.max(0,-(-h*l+u)))*r+(s=r>0?-l:Math.min(Math.max(-l,-c),l))*(s+2*c)+d:s<=o?(r=0,a=(s=Math.min(Math.max(-l,-c),l))*(s+2*c)+d):a=-(r=Math.max(0,-(h*l+u)))*r+(s=r>0?l:Math.min(Math.max(-l,-c),l))*(s+2*c)+d;else s=h>0?-l:l,a=-(r=Math.max(0,-(h*s+u)))*r+s*(s+2*c)+d;return i&&i.copy(this.direction).multiplyScalar(r).add(this.origin),n&&n.copy(Me).multiplyScalar(s).add(Ne),a}),intersectSphere:function(){var e=new l;return function(t,i){e.subVectors(t.center,this.origin);var n=e.dot(this.direction),r=e.dot(e)-n*n,s=t.radius*t.radius;if(r>s)return null;var a=Math.sqrt(s-r),o=n-a,l=n+a;return o<0&&l<0?null:o<0?this.at(l,i):this.at(o,i)}}(),intersectsSphere:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null},intersectPlane:function(e,t){var i=this.distanceToPlane(e);return null===i?null:this.at(i,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var i,n,r,s,a,o,l=1/this.direction.x,h=1/this.direction.y,u=1/this.direction.z,c=this.origin;return l>=0?(i=(e.min.x-c.x)*l,n=(e.max.x-c.x)*l):(i=(e.max.x-c.x)*l,n=(e.min.x-c.x)*l),h>=0?(r=(e.min.y-c.y)*h,s=(e.max.y-c.y)*h):(r=(e.max.y-c.y)*h,s=(e.min.y-c.y)*h),i>s||r>n?null:((r>i||i!=i)&&(i=r),(s<n||n!=n)&&(n=s),u>=0?(a=(e.min.z-c.z)*u,o=(e.max.z-c.z)*u):(a=(e.max.z-c.z)*u,o=(e.min.z-c.z)*u),i>o||a>n?null:((a>i||i!=i)&&(i=a),(o<n||n!=n)&&(n=o),n<0?null:this.at(i>=0?i:n,t)))},intersectsBox:(Re=new l,function(e){return null!==this.intersectBox(e,Re)}),intersectTriangle:function(){var e=new l,t=new l,i=new l,n=new l;return function(r,s,a,o,l){t.subVectors(s,r),i.subVectors(a,r),n.crossVectors(t,i);var h,u=this.direction.dot(n);if(u>0){if(o)return null;h=1}else{if(!(u<0))return null;h=-1,u=-u}e.subVectors(this.origin,r);var c=h*this.direction.dot(i.crossVectors(e,i));if(c<0)return null;var d=h*this.direction.dot(t.cross(e));if(d<0)return null;if(c+d>u)return null;var p=-h*e.dot(n);return p<0?null:this.at(p/u,l)}}(),applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}),Object.assign(ze,{getNormal:(Ie=new l,function(e,t,i,n){void 0===n&&(console.warn("THREE.Triangle: .getNormal() target is now required"),n=new l),n.subVectors(i,t),Ie.subVectors(e,t),n.cross(Ie);var r=n.lengthSq();return r>0?n.multiplyScalar(1/Math.sqrt(r)):n.set(0,0,0)}),getBarycoord:function(){var e=new l,t=new l,i=new l;return function(n,r,s,a,o){e.subVectors(a,r),t.subVectors(s,r),i.subVectors(n,r);var h=e.dot(e),u=e.dot(t),c=e.dot(i),d=t.dot(t),p=t.dot(i),m=h*d-u*u;if(void 0===o&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),o=new l),0===m)return o.set(-2,-1,-1);var g=1/m,f=(d*c-u*p)*g,y=(h*p-u*c)*g;return o.set(1-f-y,y,f)}}(),containsPoint:function(){var e=new l;return function(t,i,n,r){return ze.getBarycoord(t,i,n,r,e),e.x>=0&&e.y>=0&&e.x+e.y<=1}}(),getUV:(Le=new l,function(e,t,i,n,r,s,a,o){return this.getBarycoord(e,t,i,n,Le),o.set(0,0),o.addScaledVector(r,Le.x),o.addScaledVector(s,Le.y),o.addScaledVector(a,Le.z),o})}),Object.assign(ze.prototype,{set:function(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this},setFromPointsAndIndices:function(e,t,i,n){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[n]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){var e=new l,t=new l;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),getMidpoint:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new l),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return ze.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new l),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return ze.getBarycoord(e,this.a,this.b,this.c,t)},containsPoint:function(e){return ze.containsPoint(e,this.a,this.b,this.c)},getUV:function(e,t,i,n,r){return ze.getUV(e,this.a,this.b,this.c,t,i,n,r)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:(Be=new l,De=new l,Oe=new l,qe=new l,Ye=new l,He=new l,function(e,t){void 0===t&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),t=new l);var i,n,r=this.a,s=this.b,a=this.c;Be.subVectors(s,r),De.subVectors(a,r),qe.subVectors(e,r);var o=Be.dot(qe),h=De.dot(qe);if(o<=0&&h<=0)return t.copy(r);Ye.subVectors(e,s);var u=Be.dot(Ye),c=De.dot(Ye);if(u>=0&&c<=u)return t.copy(s);var d=o*c-u*h;if(d<=0&&o>=0&&u<=0)return i=o/(o-u),t.copy(r).addScaledVector(Be,i);He.subVectors(e,a);var p=Be.dot(He),m=De.dot(He);if(m>=0&&p<=m)return t.copy(a);var g=p*h-o*m;if(g<=0&&h>=0&&m<=0)return n=h/(h-m),t.copy(r).addScaledVector(De,n);var f=u*m-p*c;if(f<=0&&c-u>=0&&p-m>=0)return Oe.subVectors(a,s),n=(c-u)/(c-u+(p-m)),t.copy(s).addScaledVector(Oe,n);var y=1/(f+g+d);return i=g*y,n=d*y,t.copy(r).addScaledVector(Be,i).addScaledVector(De,n)}),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}),Ue.prototype=Object.create(Ve.prototype),Ue.prototype.constructor=Ue,Ue.prototype.isMeshBasicMaterial=!0,Ue.prototype.copy=function(e){return Ve.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},We.prototype=Object.assign(Object.create(se.prototype),{constructor:We,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return se.prototype.copy.call(this,e),this.drawMode=e.drawMode,void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e,t,i,n=this.geometry;if(n.isBufferGeometry){var r=n.morphAttributes,s=Object.keys(r);if(s.length>0){var a=r[s[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=a.length;e<t;e++)i=a[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=e}}else{var o=n.morphTargets;void 0!==o&&o.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(){var e=new B,t=new Fe,i=new k,n=new l,r=new l,s=new l,o=new l,h=new l,u=new l,c=new l,d=new l,p=new l,m=new a,g=new a,f=new a,y=new l,E=new l;function v(e,t,i,n,r,s,a,o){if(null===(1===t.side?n.intersectTriangle(a,s,r,!0,o):n.intersectTriangle(r,s,a,2!==t.side,o)))return null;E.copy(o),E.applyMatrix4(e.matrixWorld);var l=i.ray.origin.distanceTo(E);return l<i.near||l>i.far?null:{distance:l,point:E.clone(),object:e}}function A(e,t,i,l,E,A,b,S,_,x){n.fromBufferAttribute(E,S),r.fromBufferAttribute(E,_),s.fromBufferAttribute(E,x);var w=e.morphTargetInfluences;if(t.morphTargets&&A&&w){c.set(0,0,0),d.set(0,0,0),p.set(0,0,0);for(var T=0,P=A.length;T<P;T++){var C=w[T],V=A[T];0!==C&&(o.fromBufferAttribute(V,S),h.fromBufferAttribute(V,_),u.fromBufferAttribute(V,x),c.addScaledVector(o.sub(n),C),d.addScaledVector(h.sub(r),C),p.addScaledVector(u.sub(s),C))}n.add(c),r.add(d),s.add(p)}var R=v(e,t,i,l,n,r,s,y);if(R){b&&(m.fromBufferAttribute(b,S),g.fromBufferAttribute(b,_),f.fromBufferAttribute(b,x),R.uv=ze.getUV(y,n,r,s,m,g,f,new a));var N=new Z(S,_,x);ze.getNormal(n,r,s,N.normal),R.face=N}return R}return function(n,r){var s,o=this.geometry,l=this.material,h=this.matrixWorld;if(void 0!==l&&(null===o.boundingSphere&&o.computeBoundingSphere(),i.copy(o.boundingSphere),i.applyMatrix4(h),!1!==n.ray.intersectsSphere(i)&&(e.getInverse(h),t.copy(n.ray).applyMatrix4(e),null===o.boundingBox||!1!==t.intersectsBox(o.boundingBox))))if(o.isBufferGeometry){var u,c,d,p,E,b,S,_,x,w=o.index,T=o.attributes.position,P=o.morphAttributes.position,C=o.attributes.uv,V=o.groups,R=o.drawRange;if(null!==w)if(Array.isArray(l))for(p=0,b=V.length;p<b;p++)for(x=l[(_=V[p]).materialIndex],E=Math.max(_.start,R.start),S=Math.min(_.start+_.count,R.start+R.count);E<S;E+=3)u=w.getX(E),c=w.getX(E+1),d=w.getX(E+2),(s=A(this,x,n,t,T,P,C,u,c,d))&&(s.faceIndex=Math.floor(E/3),s.face.materialIndex=_.materialIndex,r.push(s));else for(p=Math.max(0,R.start),b=Math.min(w.count,R.start+R.count);p<b;p+=3)u=w.getX(p),c=w.getX(p+1),d=w.getX(p+2),(s=A(this,l,n,t,T,P,C,u,c,d))&&(s.faceIndex=Math.floor(p/3),r.push(s));else if(void 0!==T)if(Array.isArray(l))for(p=0,b=V.length;p<b;p++)for(x=l[(_=V[p]).materialIndex],E=Math.max(_.start,R.start),S=Math.min(_.start+_.count,R.start+R.count);E<S;E+=3)(s=A(this,x,n,t,T,P,C,u=E,c=E+1,d=E+2))&&(s.faceIndex=Math.floor(E/3),s.face.materialIndex=_.materialIndex,r.push(s));else for(p=Math.max(0,R.start),b=Math.min(T.count,R.start+R.count);p<b;p+=3)(s=A(this,l,n,t,T,P,C,u=p,c=p+1,d=p+2))&&(s.faceIndex=Math.floor(p/3),r.push(s))}else if(o.isGeometry){var N,M,k,L,I=Array.isArray(l),B=o.vertices,D=o.faces,O=o.faceVertexUvs[0];O.length>0&&(L=O);for(var q=0,Y=D.length;q<Y;q++){var H=D[q],G=I?l[H.materialIndex]:l;if(void 0!==G&&(N=B[H.a],M=B[H.b],k=B[H.c],s=v(this,G,n,t,N,M,k,y))){if(L&&L[q]){var F=L[q];m.copy(F[0]),g.copy(F[1]),f.copy(F[2]),s.uv=ze.getUV(y,N,M,k,m,g,f,new a)}s.face=H,s.faceIndex=q,r.push(s)}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),rt.prototype=Object.create(T.prototype),rt.prototype.constructor=rt,rt.prototype.isCubeTexture=!0,Object.defineProperty(rt.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}}),st.prototype=Object.create(T.prototype),st.prototype.constructor=st,st.prototype.isDataTexture2DArray=!0,at.prototype=Object.create(T.prototype),at.prototype.constructor=at,at.prototype.isDataTexture3D=!0;var ot=new T,lt=new st,ht=new at,ut=new rt,ct=[],dt=[],pt=new Float32Array(16),mt=new Float32Array(9),gt=new Float32Array(4);function ft(e,t,i){var n=e[0];if(n<=0||n>0)return e;var r=t*i,s=ct[r];if(void 0===s&&(s=new Float32Array(r),ct[r]=s),0!==t){n.toArray(s,0);for(var a=1,o=0;a!==t;++a)o+=i,e[a].toArray(s,o)}return s}function yt(e,t){if(e.length!==t.length)return!1;for(var i=0,n=e.length;i<n;i++)if(e[i]!==t[i])return!1;return!0}function Et(e,t){for(var i=0,n=t.length;i<n;i++)e[i]=t[i]}function vt(e,t){var i=dt[t];void 0===i&&(i=new Int32Array(t),dt[t]=i);for(var n=0;n!==t;++n)i[n]=e.allocateTextureUnit();return i}function At(e,t){var i=this.cache;i[0]!==t&&(e.uniform1f(this.addr,t),i[0]=t)}function bt(e,t){var i=this.cache;i[0]!==t&&(e.uniform1i(this.addr,t),i[0]=t)}function St(e,t){var i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(yt(i,t))return;e.uniform2fv(this.addr,t),Et(i,t)}}function _t(e,t){var i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y&&i[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else if(void 0!==t.r)i[0]===t.r&&i[1]===t.g&&i[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),i[0]=t.r,i[1]=t.g,i[2]=t.b);else{if(yt(i,t))return;e.uniform3fv(this.addr,t),Et(i,t)}}function xt(e,t){var i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y&&i[2]===t.z&&i[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(yt(i,t))return;e.uniform4fv(this.addr,t),Et(i,t)}}function wt(e,t){var i=this.cache,n=t.elements;if(void 0===n){if(yt(i,t))return;e.uniformMatrix2fv(this.addr,!1,t),Et(i,t)}else{if(yt(i,n))return;gt.set(n),e.uniformMatrix2fv(this.addr,!1,gt),Et(i,n)}}function Tt(e,t){var i=this.cache,n=t.elements;if(void 0===n){if(yt(i,t))return;e.uniformMatrix3fv(this.addr,!1,t),Et(i,t)}else{if(yt(i,n))return;mt.set(n),e.uniformMatrix3fv(this.addr,!1,mt),Et(i,n)}}function Pt(e,t){var i=this.cache,n=t.elements;if(void 0===n){if(yt(i,t))return;e.uniformMatrix4fv(this.addr,!1,t),Et(i,t)}else{if(yt(i,n))return;pt.set(n),e.uniformMatrix4fv(this.addr,!1,pt),Et(i,n)}}function Ct(e,t,i){var n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),i.safeSetTexture2D(t||ot,r)}function Vt(e,t,i){var n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),i.setTexture2DArray(t||lt,r)}function Rt(e,t,i){var n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),i.setTexture3D(t||ht,r)}function Nt(e,t,i){var n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),i.safeSetTextureCube(t||ut,r)}function Mt(e,t){var i=this.cache;yt(i,t)||(e.uniform2iv(this.addr,t),Et(i,t))}function kt(e,t){var i=this.cache;yt(i,t)||(e.uniform3iv(this.addr,t),Et(i,t))}function Lt(e,t){var i=this.cache;yt(i,t)||(e.uniform4iv(this.addr,t),Et(i,t))}function It(e,t){var i=this.cache;yt(i,t)||(e.uniform1fv(this.addr,t),Et(i,t))}function Bt(e,t){var i=this.cache;yt(i,t)||(e.uniform1iv(this.addr,t),Et(i,t))}function Dt(e,t){var i=this.cache,n=ft(t,this.size,2);yt(i,n)||(e.uniform2fv(this.addr,n),this.updateCache(n))}function Ot(e,t){var i=this.cache,n=ft(t,this.size,3);yt(i,n)||(e.uniform3fv(this.addr,n),this.updateCache(n))}function qt(e,t){var i=this.cache,n=ft(t,this.size,4);yt(i,n)||(e.uniform4fv(this.addr,n),this.updateCache(n))}function Yt(e,t){var i=this.cache,n=ft(t,this.size,4);yt(i,n)||(e.uniformMatrix2fv(this.addr,!1,n),this.updateCache(n))}function Ht(e,t){var i=this.cache,n=ft(t,this.size,9);yt(i,n)||(e.uniformMatrix3fv(this.addr,!1,n),this.updateCache(n))}function Gt(e,t){var i=this.cache,n=ft(t,this.size,16);yt(i,n)||(e.uniformMatrix4fv(this.addr,!1,n),this.updateCache(n))}function Ft(e,t,i){var n=this.cache,r=t.length,s=vt(i,r);!1===yt(n,s)&&(e.uniform1iv(this.addr,s),Et(n,s));for(var a=0;a!==r;++a)i.safeSetTexture2D(t[a]||ot,s[a])}function zt(e,t,i){var n=this.cache,r=t.length,s=vt(i,r);!1===yt(n,s)&&(e.uniform1iv(this.addr,s),Et(n,s));for(var a=0;a!==r;++a)i.safeSetTextureCube(t[a]||ut,s[a])}function Ut(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=function(e){switch(e){case 5126:return At;case 35664:return St;case 35665:return _t;case 35666:return xt;case 35674:return wt;case 35675:return Tt;case 35676:return Pt;case 35678:case 36198:return Ct;case 35679:return Rt;case 35680:return Nt;case 36289:return Vt;case 5124:case 35670:return bt;case 35667:case 35671:return Mt;case 35668:case 35672:return kt;case 35669:case 35673:return Lt}}(t.type)}function Wt(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return It;case 35664:return Dt;case 35665:return Ot;case 35666:return qt;case 35674:return Yt;case 35675:return Ht;case 35676:return Gt;case 35678:return Ft;case 35680:return zt;case 5124:case 35670:return Bt;case 35667:case 35671:return Mt;case 35668:case 35672:return kt;case 35669:case 35673:return Lt}}(t.type)}function Xt(e){this.id=e,this.seq=[],this.map={}}Wt.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),Et(t,e)},Xt.prototype.setValue=function(e,t,i){for(var n=this.seq,r=0,s=n.length;r!==s;++r){var a=n[r];a.setValue(e,t[a.id],i)}};var jt=/([\w\d_]+)(\])?(\[|\.)?/g;function Qt(e,t){e.seq.push(t),e.map[t.id]=t}function Kt(e,t,i){var n=e.name,r=n.length;for(jt.lastIndex=0;;){var s=jt.exec(n),a=jt.lastIndex,o=s[1],l="]"===s[2],h=s[3];if(l&&(o|=0),void 0===h||"["===h&&a+2===r){Qt(i,void 0===h?new Ut(o,e,t):new Wt(o,e,t));break}var u=i.map[o];void 0===u&&Qt(i,u=new Xt(o)),i=u}}function Zt(e,t){this.seq=[],this.map={};for(var i=e.getProgramParameter(t,35718),n=0;n<i;++n){var r=e.getActiveUniform(t,n);Kt(r,e.getUniformLocation(t,r.name),this)}}function Jt(e,t,i,n){var r=e.createShader(t);return e.shaderSource(r,i),e.compileShader(r),!0===n&&(!1===e.getShaderParameter(r,35713)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(r)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",35633===t?"vertex":"fragment",e.getShaderInfoLog(r),function(e){for(var t=e.split("\n"),i=0;i<t.length;i++)t[i]=i+1+": "+t[i];return t.join("\n")}(i))),r}Zt.prototype.setValue=function(e,t,i,n){var r=this.map[t];void 0!==r&&r.setValue(e,i,n)},Zt.prototype.setOptional=function(e,t,i){var n=t[i];void 0!==n&&this.setValue(e,i,n)},Zt.upload=function(e,t,i,n){for(var r=0,s=t.length;r!==s;++r){var a=t[r],o=i[a.id];!1!==o.needsUpdate&&a.setValue(e,o.value,n)}},Zt.seqWithValue=function(e,t){for(var i=[],n=0,r=e.length;n!==r;++n){var s=e[n];s.id in t&&i.push(s)}return i};var $t=0;function ei(e){switch(e){case 3e3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function ti(e,t){var i=ei(t);return"vec4 "+e+"( vec4 value ) { return "+i[0]+"ToLinear"+i[1]+"; }"}function ii(e,t){var i;switch(t){case 1:i="Linear";break;case 2:i="Reinhard";break;case 3:i="Uncharted2";break;case 4:i="OptimizedCineon";break;case 5:i="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}function ni(e){return""!==e}function ri(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function si(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}function ai(e){return e.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,(function(e,t){var i=D[t];if(void 0===i)throw new Error("Can not resolve #include <"+t+">");return ai(i)}))}function oi(e){return e.replace(/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,(function(e,t,i,n){for(var r="",s=Number(t);s<Number(i);s++)r+=n.replace(/\[ i \]/g,"[ "+s+" ]");return r}))}function li(e,t,i,n,r,s,a,o){var l=e.context,h=n.defines,u=r.vertexShader,c=r.fragmentShader,d="SHADOWMAP_TYPE_BASIC";1===s.shadowMapType?d="SHADOWMAP_TYPE_PCF":2===s.shadowMapType&&(d="SHADOWMAP_TYPE_PCF_SOFT");var p="ENVMAP_TYPE_CUBE",m="ENVMAP_MODE_REFLECTION",g="ENVMAP_BLENDING_MULTIPLY";if(s.envMap){switch(n.envMap.mapping){case 301:case 302:p="ENVMAP_TYPE_CUBE";break;case 306:case 307:p="ENVMAP_TYPE_CUBE_UV";break;case 303:case 304:p="ENVMAP_TYPE_EQUIREC";break;case 305:p="ENVMAP_TYPE_SPHERE"}switch(n.envMap.mapping){case 302:case 304:m="ENVMAP_MODE_REFRACTION"}switch(n.combine){case 0:g="ENVMAP_BLENDING_MULTIPLY";break;case 1:g="ENVMAP_BLENDING_MIX";break;case 2:g="ENVMAP_BLENDING_ADD"}}var f,y,E,v,A,b=e.gammaFactor>0?e.gammaFactor:1,S=a.isWebGL2?"":function(e,t,i){return[(e=e||{}).derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap&&!t.objectSpaceNormalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&i.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&i.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&i.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(ni).join("\n")}(n.extensions,s,t),_=function(e){var t=[];for(var i in e){var n=e[i];!1!==n&&t.push("#define "+i+" "+n)}return t.join("\n")}(h),x=l.createProgram();if(n.isRawShaderMaterial?((f=[_].filter(ni).join("\n")).length>0&&(f+="\n"),(y=[S,_].filter(ni).join("\n")).length>0&&(y+="\n")):(f=["precision "+s.precision+" float;","precision "+s.precision+" int;","#define SHADER_NAME "+r.name,_,s.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+b,"#define MAX_BONES "+s.maxBones,s.useFog&&s.fog?"#define USE_FOG":"",s.useFog&&s.fogExp?"#define FOG_EXP2":"",s.map?"#define USE_MAP":"",s.envMap?"#define USE_ENVMAP":"",s.envMap?"#define "+m:"",s.lightMap?"#define USE_LIGHTMAP":"",s.aoMap?"#define USE_AOMAP":"",s.emissiveMap?"#define USE_EMISSIVEMAP":"",s.bumpMap?"#define USE_BUMPMAP":"",s.normalMap?"#define USE_NORMALMAP":"",s.normalMap&&s.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",s.displacementMap&&s.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",s.specularMap?"#define USE_SPECULARMAP":"",s.roughnessMap?"#define USE_ROUGHNESSMAP":"",s.metalnessMap?"#define USE_METALNESSMAP":"",s.alphaMap?"#define USE_ALPHAMAP":"",s.vertexTangents?"#define USE_TANGENT":"",s.vertexColors?"#define USE_COLOR":"",s.flatShading?"#define FLAT_SHADED":"",s.skinning?"#define USE_SKINNING":"",s.useVertexTexture?"#define BONE_TEXTURE":"",s.morphTargets?"#define USE_MORPHTARGETS":"",s.morphNormals&&!1===s.flatShading?"#define USE_MORPHNORMALS":"",s.doubleSided?"#define DOUBLE_SIDED":"",s.flipSided?"#define FLIP_SIDED":"",s.shadowMapEnabled?"#define USE_SHADOWMAP":"",s.shadowMapEnabled?"#define "+d:"",s.sizeAttenuation?"#define USE_SIZEATTENUATION":"",s.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",s.logarithmicDepthBuffer&&(a.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(ni).join("\n"),y=[S,"precision "+s.precision+" float;","precision "+s.precision+" int;","#define SHADER_NAME "+r.name,_,s.alphaTest?"#define ALPHATEST "+s.alphaTest+(s.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+b,s.useFog&&s.fog?"#define USE_FOG":"",s.useFog&&s.fogExp?"#define FOG_EXP2":"",s.map?"#define USE_MAP":"",s.matcap?"#define USE_MATCAP":"",s.envMap?"#define USE_ENVMAP":"",s.envMap?"#define "+p:"",s.envMap?"#define "+m:"",s.envMap?"#define "+g:"",s.lightMap?"#define USE_LIGHTMAP":"",s.aoMap?"#define USE_AOMAP":"",s.emissiveMap?"#define USE_EMISSIVEMAP":"",s.bumpMap?"#define USE_BUMPMAP":"",s.normalMap?"#define USE_NORMALMAP":"",s.normalMap&&s.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",s.specularMap?"#define USE_SPECULARMAP":"",s.roughnessMap?"#define USE_ROUGHNESSMAP":"",s.metalnessMap?"#define USE_METALNESSMAP":"",s.alphaMap?"#define USE_ALPHAMAP":"",s.vertexTangents?"#define USE_TANGENT":"",s.vertexColors?"#define USE_COLOR":"",s.gradientMap?"#define USE_GRADIENTMAP":"",s.flatShading?"#define FLAT_SHADED":"",s.doubleSided?"#define DOUBLE_SIDED":"",s.flipSided?"#define FLIP_SIDED":"",s.shadowMapEnabled?"#define USE_SHADOWMAP":"",s.shadowMapEnabled?"#define "+d:"",s.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",s.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",s.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",s.logarithmicDepthBuffer&&(a.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",s.envMap&&(a.isWebGL2||t.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",0!==s.toneMapping?"#define TONE_MAPPING":"",0!==s.toneMapping?D.tonemapping_pars_fragment:"",0!==s.toneMapping?ii("toneMapping",s.toneMapping):"",s.dithering?"#define DITHERING":"",s.outputEncoding||s.mapEncoding||s.matcapEncoding||s.envMapEncoding||s.emissiveMapEncoding?D.encodings_pars_fragment:"",s.mapEncoding?ti("mapTexelToLinear",s.mapEncoding):"",s.matcapEncoding?ti("matcapTexelToLinear",s.matcapEncoding):"",s.envMapEncoding?ti("envMapTexelToLinear",s.envMapEncoding):"",s.emissiveMapEncoding?ti("emissiveMapTexelToLinear",s.emissiveMapEncoding):"",s.outputEncoding?(E="linearToOutputTexel",v=s.outputEncoding,A=ei(v),"vec4 "+E+"( vec4 value ) { return LinearTo"+A[0]+A[1]+"; }"):"",s.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(ni).join("\n")),u=si(u=ri(u=ai(u),s),s),c=si(c=ri(c=ai(c),s),s),u=oi(u),c=oi(c),a.isWebGL2&&!n.isRawShaderMaterial){var w=!1,T=/^\s*#version\s+300\s+es\s*\n/;n.isShaderMaterial&&null!==u.match(T)&&null!==c.match(T)&&(w=!0,u=u.replace(T,""),c=c.replace(T,"")),f=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+f,y=["#version 300 es\n","#define varying in",w?"":"out highp vec4 pc_fragColor;",w?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+y}var P,C,V=y+c,R=Jt(l,35633,f+u,e.debug.checkShaderErrors),N=Jt(l,35632,V,e.debug.checkShaderErrors);if(l.attachShader(x,R),l.attachShader(x,N),void 0!==n.index0AttributeName?l.bindAttribLocation(x,0,n.index0AttributeName):!0===s.morphTargets&&l.bindAttribLocation(x,0,"position"),l.linkProgram(x),e.debug.checkShaderErrors){var M=l.getProgramInfoLog(x).trim(),k=l.getShaderInfoLog(R).trim(),L=l.getShaderInfoLog(N).trim(),I=!0,B=!0;!1===l.getProgramParameter(x,35714)?(I=!1,console.error("THREE.WebGLProgram: shader error: ",l.getError(),"35715",l.getProgramParameter(x,35715),"gl.getProgramInfoLog",M,k,L)):""!==M?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",M):""!==k&&""!==L||(B=!1),B&&(this.diagnostics={runnable:I,material:n,programLog:M,vertexShader:{log:k,prefix:f},fragmentShader:{log:L,prefix:y}})}return l.deleteShader(R),l.deleteShader(N),this.getUniforms=function(){return void 0===P&&(P=new Zt(l,x,o)),P},this.getAttributes=function(){return void 0===C&&(C=function(e,t){for(var i={},n=e.getProgramParameter(t,35721),r=0;r<n;r++){var s=e.getActiveAttrib(t,r).name;i[s]=e.getAttribLocation(t,s)}return i}(l,x)),C},this.destroy=function(){l.deleteProgram(x),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.name=r.name,this.id=$t++,this.code=i,this.usedTimes=1,this.program=x,this.vertexShader=R,this.fragmentShader=N,this}function hi(e,t,i,n){var r=[],s={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},a=["precision","supportsVertexTextures","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function o(e,t){var i;return e?e.isTexture?i=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),i=e.texture.encoding):i=3e3,3e3===i&&t&&(i=3007),i}this.getParameters=function(t,n,r,a,l,h,u){var c=s[t.type],d=u.isSkinnedMesh?function(e){var t=e.skeleton.bones;if(i.floatVertexTextures)return 1024;var n=i.maxVertexUniforms,r=Math.floor((n-20)/4),s=Math.min(r,t.length);return s<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+s+"."),0):s}(u):0,p=i.precision;null!==t.precision&&(p=i.getMaxPrecision(t.precision))!==t.precision&&console.warn("THREE.WebGLProgram.getParameters:",t.precision,"not supported, using",p,"instead.");var m=e.getRenderTarget();return{shaderID:c,precision:p,supportsVertexTextures:i.vertexTextures,outputEncoding:o(m?m.texture:null,e.gammaOutput),map:!!t.map,mapEncoding:o(t.map,e.gammaInput),matcap:!!t.matcap,matcapEncoding:o(t.matcap,e.gammaInput),envMap:!!t.envMap,envMapMode:t.envMap&&t.envMap.mapping,envMapEncoding:o(t.envMap,e.gammaInput),envMapCubeUV:!!t.envMap&&(306===t.envMap.mapping||307===t.envMap.mapping),lightMap:!!t.lightMap,aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:o(t.emissiveMap,e.gammaInput),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,objectSpaceNormalMap:1===t.normalMapType,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,combine:t.combine,vertexTangents:t.normalMap&&t.vertexTangents,vertexColors:t.vertexColors,fog:!!a,useFog:t.fog,fogExp:a&&a.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:i.logarithmicDepthBuffer,skinning:t.skinning&&d>0,maxBones:d,useVertexTexture:i.floatVertexTextures,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:n.directional.length,numPointLights:n.point.length,numSpotLights:n.spot.length,numRectAreaLights:n.rectArea.length,numHemiLights:n.hemi.length,numClippingPlanes:l,numClipIntersection:h,dithering:t.dithering,shadowMapEnabled:e.shadowMap.enabled&&u.receiveShadow&&r.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:2===t.side,flipSided:1===t.side,depthPacking:void 0!==t.depthPacking&&t.depthPacking}},this.getProgramCode=function(t,i){var n=[];if(i.shaderID?n.push(i.shaderID):(n.push(t.fragmentShader),n.push(t.vertexShader)),void 0!==t.defines)for(var r in t.defines)n.push(r),n.push(t.defines[r]);for(var s=0;s<a.length;s++)n.push(i[a[s]]);return n.push(t.onBeforeCompile.toString()),n.push(e.gammaOutput),n.push(e.gammaFactor),n.join()},this.acquireProgram=function(s,a,o,l){for(var h,u=0,c=r.length;u<c;u++){var d=r[u];if(d.code===l){++(h=d).usedTimes;break}}return void 0===h&&(h=new li(e,t,l,s,a,o,i,n),r.push(h)),h},this.releaseProgram=function(e){if(0==--e.usedTimes){var t=r.indexOf(e);r[t]=r[r.length-1],r.pop(),e.destroy()}},this.programs=r}function ui(){var e=new WeakMap;return{get:function(t){var i=e.get(t);return void 0===i&&(i={},e.set(t,i)),i},remove:function(t){e.delete(t)},update:function(t,i,n){e.get(t)[i]=n},dispose:function(){e=new WeakMap}}}function ci(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function di(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function pi(){var e=[],t=0,i=[],n=[],r={id:-1};function s(i,n,s,a,o,l){var h=e[t];return void 0===h?(h={id:i.id,object:i,geometry:n,material:s,program:s.program||r,groupOrder:a,renderOrder:i.renderOrder,z:o,group:l},e[t]=h):(h.id=i.id,h.object=i,h.geometry=n,h.material=s,h.program=s.program||r,h.groupOrder=a,h.renderOrder=i.renderOrder,h.z=o,h.group=l),t++,h}return{opaque:i,transparent:n,init:function(){t=0,i.length=0,n.length=0},push:function(e,t,r,a,o,l){var h=s(e,t,r,a,o,l);(!0===r.transparent?n:i).push(h)},unshift:function(e,t,r,a,o,l){var h=s(e,t,r,a,o,l);(!0===r.transparent?n:i).unshift(h)},sort:function(){i.length>1&&i.sort(ci),n.length>1&&n.sort(di)}}}function mi(){var e={};function t(i){var n=i.target;n.removeEventListener("dispose",t),delete e[n.id]}return{get:function(i,n){var r,s=e[i.id];return void 0===s?(r=new pi,e[i.id]={},e[i.id][n.id]=r,i.addEventListener("dispose",t)):void 0===(r=s[n.id])&&(r=new pi,s[n.id]=r),r},dispose:function(){e={}}}}function gi(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var i;switch(t.type){case"DirectionalLight":i={direction:new l,color:new U,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new a};break;case"SpotLight":i={position:new l,direction:new l,color:new U,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new a};break;case"PointLight":i={position:new l,color:new U,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new a,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":i={direction:new l,skyColor:new U,groundColor:new U};break;case"RectAreaLight":i={color:new U,position:new l,halfWidth:new l,halfHeight:new l}}return e[t.id]=i,i}}}var fi=0;function yi(){for(var e=new gi,t={id:fi++,hash:{stateID:-1,directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,shadowsLength:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},i=0;i<9;i++)t.probe.push(new l);var n=new l,r=new B,s=new B;return{setup:function(i,a,o){for(var l=0,h=0,u=0,c=0;c<9;c++)t.probe[c].set(0,0,0);for(var d=0,p=0,m=0,g=0,f=0,y=o.matrixWorldInverse,E=(c=0,i.length);c<E;c++){var v=i[c],A=v.color,b=v.intensity,S=v.distance,_=v.shadow&&v.shadow.map?v.shadow.map.texture:null;if(v.isAmbientLight)l+=A.r*b,h+=A.g*b,u+=A.b*b;else if(v.isLightProbe)for(var x=0;x<9;x++)t.probe[x].addScaledVector(v.sh.coefficients[x],b);else if(v.isDirectionalLight){if((T=e.get(v)).color.copy(v.color).multiplyScalar(v.intensity),T.direction.setFromMatrixPosition(v.matrixWorld),n.setFromMatrixPosition(v.target.matrixWorld),T.direction.sub(n),T.direction.transformDirection(y),T.shadow=v.castShadow,v.castShadow){var w=v.shadow;T.shadowBias=w.bias,T.shadowRadius=w.radius,T.shadowMapSize=w.mapSize}t.directionalShadowMap[d]=_,t.directionalShadowMatrix[d]=v.shadow.matrix,t.directional[d]=T,d++}else if(v.isSpotLight){if((T=e.get(v)).position.setFromMatrixPosition(v.matrixWorld),T.position.applyMatrix4(y),T.color.copy(A).multiplyScalar(b),T.distance=S,T.direction.setFromMatrixPosition(v.matrixWorld),n.setFromMatrixPosition(v.target.matrixWorld),T.direction.sub(n),T.direction.transformDirection(y),T.coneCos=Math.cos(v.angle),T.penumbraCos=Math.cos(v.angle*(1-v.penumbra)),T.decay=v.decay,T.shadow=v.castShadow,v.castShadow){w=v.shadow;T.shadowBias=w.bias,T.shadowRadius=w.radius,T.shadowMapSize=w.mapSize}t.spotShadowMap[m]=_,t.spotShadowMatrix[m]=v.shadow.matrix,t.spot[m]=T,m++}else if(v.isRectAreaLight){(T=e.get(v)).color.copy(A).multiplyScalar(b),T.position.setFromMatrixPosition(v.matrixWorld),T.position.applyMatrix4(y),s.identity(),r.copy(v.matrixWorld),r.premultiply(y),s.extractRotation(r),T.halfWidth.set(.5*v.width,0,0),T.halfHeight.set(0,.5*v.height,0),T.halfWidth.applyMatrix4(s),T.halfHeight.applyMatrix4(s),t.rectArea[g]=T,g++}else if(v.isPointLight){if((T=e.get(v)).position.setFromMatrixPosition(v.matrixWorld),T.position.applyMatrix4(y),T.color.copy(v.color).multiplyScalar(v.intensity),T.distance=v.distance,T.decay=v.decay,T.shadow=v.castShadow,v.castShadow){w=v.shadow;T.shadowBias=w.bias,T.shadowRadius=w.radius,T.shadowMapSize=w.mapSize,T.shadowCameraNear=w.camera.near,T.shadowCameraFar=w.camera.far}t.pointShadowMap[p]=_,t.pointShadowMatrix[p]=v.shadow.matrix,t.point[p]=T,p++}else if(v.isHemisphereLight){var T;(T=e.get(v)).direction.setFromMatrixPosition(v.matrixWorld),T.direction.transformDirection(y),T.direction.normalize(),T.skyColor.copy(v.color).multiplyScalar(b),T.groundColor.copy(v.groundColor).multiplyScalar(b),t.hemi[f]=T,f++}}t.ambient[0]=l,t.ambient[1]=h,t.ambient[2]=u,t.directional.length=d,t.spot.length=m,t.rectArea.length=g,t.point.length=p,t.hemi.length=f,t.hash.stateID=t.id,t.hash.directionalLength=d,t.hash.pointLength=p,t.hash.spotLength=m,t.hash.rectAreaLength=g,t.hash.hemiLength=f,t.hash.shadowsLength=a.length},state:t}}function Ei(){var e=new yi,t=[],i=[];return{init:function(){t.length=0,i.length=0},state:{lightsArray:t,shadowsArray:i,lights:e},setupLights:function(n){e.setup(t,i,n)},pushLight:function(e){t.push(e)},pushShadow:function(e){i.push(e)}}}function vi(){var e={};function t(i){var n=i.target;n.removeEventListener("dispose",t),delete e[n.id]}return{get:function(i,n){var r;return void 0===e[i.id]?(r=new Ei,e[i.id]={},e[i.id][n.id]=r,i.addEventListener("dispose",t)):void 0===e[i.id][n.id]?(r=new Ei,e[i.id][n.id]=r):r=e[i.id][n.id],r},dispose:function(){e={}}}}function Ai(e){Ve.call(this),this.type="MeshDepthMaterial",this.depthPacking=3200,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}function bi(e){Ve.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new l,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(e)}function Si(e,t,i){for(var n=new I,r=new B,s=new a,o=new a(i,i),h=new l,u=new l,c=new Array(4),d=new Array(4),p={},m={0:1,1:0,2:2},g=[new l(1,0,0),new l(-1,0,0),new l(0,0,1),new l(0,0,-1),new l(0,1,0),new l(0,-1,0)],f=[new l(0,1,0),new l(0,1,0),new l(0,1,0),new l(0,1,0),new l(0,0,1),new l(0,0,-1)],y=[new P,new P,new P,new P,new P,new P],E=0;4!==E;++E){var v=0!=(1&E),A=0!=(2&E),b=new Ai({depthPacking:3201,morphTargets:v,skinning:A});c[E]=b;var S=new bi({morphTargets:v,skinning:A});d[E]=S}var _=this;function x(t,i,n,r,s,a){var o=t.geometry,l=null,h=c,u=t.customDepthMaterial;if(n&&(h=d,u=t.customDistanceMaterial),u)l=u;else{var g=!1;i.morphTargets&&(o&&o.isBufferGeometry?g=o.morphAttributes&&o.morphAttributes.position&&o.morphAttributes.position.length>0:o&&o.isGeometry&&(g=o.morphTargets&&o.morphTargets.length>0)),t.isSkinnedMesh&&!1===i.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t);var f=0;g&&(f|=1),t.isSkinnedMesh&&i.skinning&&(f|=2),l=h[f]}if(e.localClippingEnabled&&!0===i.clipShadows&&0!==i.clippingPlanes.length){var y=l.uuid,E=i.uuid,v=p[y];void 0===v&&(v={},p[y]=v);var A=v[E];void 0===A&&(A=l.clone(),v[E]=A),l=A}return l.visible=i.visible,l.wireframe=i.wireframe,l.side=null!=i.shadowSide?i.shadowSide:m[i.side],l.clipShadows=i.clipShadows,l.clippingPlanes=i.clippingPlanes,l.clipIntersection=i.clipIntersection,l.wireframeLinewidth=i.wireframeLinewidth,l.linewidth=i.linewidth,n&&l.isMeshDistanceMaterial&&(l.referencePosition.copy(r),l.nearDistance=s,l.farDistance=a),l}function w(i,r,s,a){if(!1!==i.visible){if(i.layers.test(r.layers)&&(i.isMesh||i.isLine||i.isPoints)&&i.castShadow&&(!i.frustumCulled||n.intersectsObject(i))){i.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,i.matrixWorld);var o=t.update(i),l=i.material;if(Array.isArray(l))for(var h=o.groups,c=0,d=h.length;c<d;c++){var p=h[c],m=l[p.materialIndex];if(m&&m.visible){var g=x(i,m,a,u,s.near,s.far);e.renderBufferDirect(s,null,o,g,i,p)}}else if(l.visible){g=x(i,l,a,u,s.near,s.far);e.renderBufferDirect(s,null,o,g,i,null)}}for(var f=i.children,y=0,E=f.length;y<E;y++)w(f[y],r,s,a)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(t,i,a){if(!1!==_.enabled&&(!1!==_.autoUpdate||!1!==_.needsUpdate)&&0!==t.length){var l,c=e.getRenderTarget(),d=e.state;d.setBlending(0),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(var p=0,m=t.length;p<m;p++){var E=t[p],v=E.shadow,A=E&&E.isPointLight;if(void 0!==v){var b=v.camera;if(s.copy(v.mapSize),s.min(o),A){var S=s.x,x=s.y;y[0].set(2*S,x,S,x),y[1].set(0,x,S,x),y[2].set(3*S,x,S,x),y[3].set(S,x,S,x),y[4].set(3*S,0,S,x),y[5].set(S,0,S,x),s.x*=4,s.y*=2}if(null===v.map){var T={minFilter:1003,magFilter:1003,format:1023};v.map=new C(s.x,s.y,T),v.map.texture.name=E.name+".shadowMap",b.updateProjectionMatrix()}v.isSpotLightShadow&&v.update(E);var P=v.map,V=v.matrix;u.setFromMatrixPosition(E.matrixWorld),b.position.copy(u),A?(l=6,V.makeTranslation(-u.x,-u.y,-u.z)):(l=1,h.setFromMatrixPosition(E.target.matrixWorld),b.lookAt(h),b.updateMatrixWorld(),V.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),V.multiply(b.projectionMatrix),V.multiply(b.matrixWorldInverse)),e.setRenderTarget(P),e.clear();for(var R=0;R<l;R++){if(A){h.copy(b.position),h.add(g[R]),b.up.copy(f[R]),b.lookAt(h),b.updateMatrixWorld();var N=y[R];d.viewport(N)}r.multiplyMatrices(b.projectionMatrix,b.matrixWorldInverse),n.setFromMatrix(r),w(i,a,b,A)}}else console.warn("THREE.WebGLShadowMap:",E,"has no shadow.")}_.needsUpdate=!1,e.setRenderTarget(c)}}}function _i(e,t,i,n){var r=new function(){var t=!1,i=new P,n=null,r=new P(0,0,0,0);return{setMask:function(i){n===i||t||(e.colorMask(i,i,i,i),n=i)},setLocked:function(e){t=e},setClear:function(t,n,s,a,o){!0===o&&(t*=a,n*=a,s*=a),i.set(t,n,s,a),!1===r.equals(i)&&(e.clearColor(t,n,s,a),r.copy(i))},reset:function(){t=!1,n=null,r.set(-1,0,0,0)}}},s=new function(){var t=!1,i=null,n=null,r=null;return{setTest:function(e){e?Y(2929):H(2929)},setMask:function(n){i===n||t||(e.depthMask(n),i=n)},setFunc:function(t){if(n!==t){if(t)switch(t){case 0:e.depthFunc(512);break;case 1:e.depthFunc(519);break;case 2:e.depthFunc(513);break;case 3:e.depthFunc(515);break;case 4:e.depthFunc(514);break;case 5:e.depthFunc(518);break;case 6:e.depthFunc(516);break;case 7:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);n=t}},setLocked:function(e){t=e},setClear:function(t){r!==t&&(e.clearDepth(t),r=t)},reset:function(){t=!1,i=null,n=null,r=null}}},a=new function(){var t=!1,i=null,n=null,r=null,s=null,a=null,o=null,l=null,h=null;return{setTest:function(e){e?Y(2960):H(2960)},setMask:function(n){i===n||t||(e.stencilMask(n),i=n)},setFunc:function(t,i,a){n===t&&r===i&&s===a||(e.stencilFunc(t,i,a),n=t,r=i,s=a)},setOp:function(t,i,n){a===t&&o===i&&l===n||(e.stencilOp(t,i,n),a=t,o=i,l=n)},setLocked:function(e){t=e},setClear:function(t){h!==t&&(e.clearStencil(t),h=t)},reset:function(){t=!1,i=null,n=null,r=null,s=null,a=null,o=null,l=null,h=null}}},o=e.getParameter(34921),l=new Uint8Array(o),h=new Uint8Array(o),u=new Uint8Array(o),c={},d=null,p=null,m=null,g=null,f=null,y=null,E=null,v=null,A=null,b=null,S=!1,_=null,x=null,w=null,T=null,C=null,V=e.getParameter(35661),R=!1,N=0,M=e.getParameter(7938);-1!==M.indexOf("WebGL")?(N=parseFloat(/^WebGL\ ([0-9])/.exec(M)[1]),R=N>=1):-1!==M.indexOf("OpenGL ES")&&(N=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(M)[1]),R=N>=2);var k=null,L={},I=new P,B=new P;function D(t,i,n){var r=new Uint8Array(4),s=e.createTexture();e.bindTexture(t,s),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(var a=0;a<n;a++)e.texImage2D(i+a,0,6408,1,1,0,6408,5121,r);return s}var O={};function q(i,r){(l[i]=1,0===h[i]&&(e.enableVertexAttribArray(i),h[i]=1),u[i]!==r)&&((n.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](i,r),u[i]=r)}function Y(t){!0!==c[t]&&(e.enable(t),c[t]=!0)}function H(t){!1!==c[t]&&(e.disable(t),c[t]=!1)}function G(t,n,r,s,a,o,l,h){if(0!==t){if(m||(Y(3042),m=!0),5===t)a=a||n,o=o||r,l=l||s,n===f&&a===v||(e.blendEquationSeparate(i.convert(n),i.convert(a)),f=n,v=a),r===y&&s===E&&o===A&&l===b||(e.blendFuncSeparate(i.convert(r),i.convert(s),i.convert(o),i.convert(l)),y=r,E=s,A=o,b=l),g=t,S=null;else if(t!==g||h!==S){if(100===f&&100===v||(e.blendEquation(32774),f=100,v=100),h)switch(t){case 1:e.blendFuncSeparate(1,771,1,771);break;case 2:e.blendFunc(1,1);break;case 3:e.blendFuncSeparate(0,0,769,771);break;case 4:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case 1:e.blendFuncSeparate(770,771,1,771);break;case 2:e.blendFunc(770,1);break;case 3:e.blendFunc(0,769);break;case 4:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}y=null,E=null,A=null,b=null,g=t,S=h}}else m&&(H(3042),m=!1)}function F(t){_!==t&&(t?e.frontFace(2304):e.frontFace(2305),_=t)}function z(t){0!==t?(Y(2884),t!==x&&(1===t?e.cullFace(1029):2===t?e.cullFace(1028):e.cullFace(1032))):H(2884),x=t}function U(t,i,n){t?(Y(32823),T===i&&C===n||(e.polygonOffset(i,n),T=i,C=n)):H(32823)}function W(t){void 0===t&&(t=33984+V-1),k!==t&&(e.activeTexture(t),k=t)}return O[3553]=D(3553,3553,1),O[34067]=D(34067,34069,6),r.setClear(0,0,0,1),s.setClear(1),a.setClear(0),Y(2929),s.setFunc(3),F(!1),z(1),Y(2884),G(0),{buffers:{color:r,depth:s,stencil:a},initAttributes:function(){for(var e=0,t=l.length;e<t;e++)l[e]=0},enableAttribute:function(e){q(e,0)},enableAttributeAndDivisor:q,disableUnusedAttributes:function(){for(var t=0,i=h.length;t!==i;++t)h[t]!==l[t]&&(e.disableVertexAttribArray(t),h[t]=0)},enable:Y,disable:H,getCompressedTextureFormats:function(){if(null===d&&(d=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")||t.get("WEBGL_compressed_texture_astc")))for(var i=e.getParameter(34467),n=0;n<i.length;n++)d.push(i[n]);return d},useProgram:function(t){return p!==t&&(e.useProgram(t),p=t,!0)},setBlending:G,setMaterial:function(e,t){2===e.side?H(2884):Y(2884);var i=1===e.side;t&&(i=!i),F(i),1===e.blending&&!1===e.transparent?G(0):G(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),s.setFunc(e.depthFunc),s.setTest(e.depthTest),s.setMask(e.depthWrite),r.setMask(e.colorWrite),U(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)},setFlipSided:F,setCullFace:z,setLineWidth:function(t){t!==w&&(R&&e.lineWidth(t),w=t)},setPolygonOffset:U,setScissorTest:function(e){e?Y(3089):H(3089)},activeTexture:W,bindTexture:function(t,i){null===k&&W();var n=L[k];void 0===n&&(n={type:void 0,texture:void 0},L[k]=n),n.type===t&&n.texture===i||(e.bindTexture(t,i||O[t]),n.type=t,n.texture=i)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===I.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),I.copy(t))},viewport:function(t){!1===B.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),B.copy(t))},reset:function(){for(var t=0;t<h.length;t++)1===h[t]&&(e.disableVertexAttribArray(t),h[t]=0);c={},d=null,k=null,L={},p=null,g=null,_=null,x=null,r.reset(),s.reset(),a.reset()}}}function xi(e,t,i,n,r,a,o){var l,h={},u="undefined"!=typeof OffscreenCanvas;function c(e,t){return u?new OffscreenCanvas(e,t):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function d(e,t,i,n){var r=1;if((e.width>n||e.height>n)&&(r=n/Math.max(e.width,e.height)),r<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){var a=t?s.floorPowerOfTwo:Math.floor,o=a(r*e.width),h=a(r*e.height);void 0===l&&(l=c(o,h));var u=i?c(o,h):l;return u.width=o,u.height=h,u.getContext("2d").drawImage(e,0,0,o,h),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+h+")."),u}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function p(e){return s.isPowerOfTwo(e.width)&&s.isPowerOfTwo(e.height)}function m(e,t){return e.generateMipmaps&&t&&1003!==e.minFilter&&1006!==e.minFilter}function g(t,i,r,s){e.generateMipmap(t),n.get(i).__maxMipLevel=Math.log(Math.max(r,s))*Math.LOG2E}function f(e,i){if(!r.isWebGL2)return e;var n=e;return 6403===e&&(5126===i&&(n=33326),5131===i&&(n=33325),5121===i&&(n=33321)),6407===e&&(5126===i&&(n=34837),5131===i&&(n=34843),5121===i&&(n=32849)),6408===e&&(5126===i&&(n=34836),5131===i&&(n=34842),5121===i&&(n=32856)),33325===n||33326===n||34842===n||34836===n?t.get("EXT_color_buffer_float"):34843!==n&&34837!==n||console.warn("THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead."),n}function y(e){return 1003===e||1004===e||1005===e?9728:9729}function E(t){var i=t.target;i.removeEventListener("dispose",E),function(t){var i=n.get(t);if(void 0===i.__webglInit)return;e.deleteTexture(i.__webglTexture),n.remove(t)}(i),i.isVideoTexture&&delete h[i.id],o.memory.textures--}function v(t){var i=t.target;i.removeEventListener("dispose",v),function(t){var i=n.get(t),r=n.get(t.texture);if(!t)return;void 0!==r.__webglTexture&&e.deleteTexture(r.__webglTexture);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLRenderTargetCube)for(var s=0;s<6;s++)e.deleteFramebuffer(i.__webglFramebuffer[s]),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[s]);else e.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer);n.remove(t.texture),n.remove(t)}(i),o.memory.textures--}var A=0;function b(e,t){var r=n.get(e);if(e.isVideoTexture&&function(e){var t=e.id,i=o.render.frame;h[t]!==i&&(h[t]=i,e.update())}(e),e.version>0&&r.__version!==e.version){var s=e.image;if(void 0===s)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==s.complete)return void T(r,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}i.activeTexture(33984+t),i.bindTexture(3553,r.__webglTexture)}function S(t,s){var o=n.get(t);if(6===t.image.length)if(t.version>0&&o.__version!==t.version){w(o,t),i.activeTexture(33984+s),i.bindTexture(34067,o.__webglTexture),e.pixelStorei(37440,t.flipY);for(var l=t&&t.isCompressedTexture,h=t.image[0]&&t.image[0].isDataTexture,u=[],c=0;c<6;c++)u[c]=l||h?h?t.image[c].image:t.image[c]:d(t.image[c],!1,!0,r.maxCubemapSize);var y=u[0],E=p(y)||r.isWebGL2,v=a.convert(t.format),A=a.convert(t.type),b=f(v,A);x(34067,t,E);for(c=0;c<6;c++)if(l)for(var S,_=u[c].mipmaps,T=0,P=_.length;T<P;T++)S=_[T],1023!==t.format&&1022!==t.format?i.getCompressedTextureFormats().indexOf(v)>-1?i.compressedTexImage2D(34069+c,T,b,S.width,S.height,0,S.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):i.texImage2D(34069+c,T,b,S.width,S.height,0,v,A,S.data);else h?i.texImage2D(34069+c,0,b,u[c].width,u[c].height,0,v,A,u[c].data):i.texImage2D(34069+c,0,b,v,A,u[c]);o.__maxMipLevel=l?_.length-1:0,m(t,E)&&g(34067,t,y.width,y.height),o.__version=t.version,t.onUpdate&&t.onUpdate(t)}else i.activeTexture(33984+s),i.bindTexture(34067,o.__webglTexture)}function _(e,t){i.activeTexture(33984+t),i.bindTexture(34067,n.get(e).__webglTexture)}function x(i,s,o){var l;if(o?(e.texParameteri(i,10242,a.convert(s.wrapS)),e.texParameteri(i,10243,a.convert(s.wrapT)),32879!==i&&35866!==i||e.texParameteri(i,32882,a.convert(s.wrapR)),e.texParameteri(i,10240,a.convert(s.magFilter)),e.texParameteri(i,10241,a.convert(s.minFilter))):(e.texParameteri(i,10242,33071),e.texParameteri(i,10243,33071),32879!==i&&35866!==i||e.texParameteri(i,32882,33071),1001===s.wrapS&&1001===s.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(i,10240,y(s.magFilter)),e.texParameteri(i,10241,y(s.minFilter)),1003!==s.minFilter&&1006!==s.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),l=t.get("EXT_texture_filter_anisotropic")){if(1015===s.type&&null===t.get("OES_texture_float_linear"))return;if(1016===s.type&&null===(r.isWebGL2||t.get("OES_texture_half_float_linear")))return;(s.anisotropy>1||n.get(s).__currentAnisotropy)&&(e.texParameterf(i,l.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(s.anisotropy,r.getMaxAnisotropy())),n.get(s).__currentAnisotropy=s.anisotropy)}}function w(t,i){void 0===t.__webglInit&&(t.__webglInit=!0,i.addEventListener("dispose",E),t.__webglTexture=e.createTexture(),o.memory.textures++)}function T(t,n,s){var o=3553;n.isDataTexture2DArray&&(o=35866),n.isDataTexture3D&&(o=32879),w(t,n),i.activeTexture(33984+s),i.bindTexture(o,t.__webglTexture),e.pixelStorei(37440,n.flipY),e.pixelStorei(37441,n.premultiplyAlpha),e.pixelStorei(3317,n.unpackAlignment);var l=function(e){return!r.isWebGL2&&(1001!==e.wrapS||1001!==e.wrapT||1003!==e.minFilter&&1006!==e.minFilter)}(n)&&!1===p(n.image),h=d(n.image,l,!1,r.maxTextureSize),u=p(h)||r.isWebGL2,c=a.convert(n.format),y=a.convert(n.type),E=f(c,y);x(o,n,u);var v,A=n.mipmaps;if(n.isDepthTexture){if(E=6402,1015===n.type){if(!r.isWebGL2)throw new Error("Float Depth Texture only supported in WebGL2.0");E=36012}else r.isWebGL2&&(E=33189);1026===n.format&&6402===E&&1012!==n.type&&1014!==n.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),n.type=1012,y=a.convert(n.type)),1027===n.format&&(E=34041,1020!==n.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),n.type=1020,y=a.convert(n.type))),i.texImage2D(3553,0,E,h.width,h.height,0,c,y,null)}else if(n.isDataTexture)if(A.length>0&&u){for(var b=0,S=A.length;b<S;b++)v=A[b],i.texImage2D(3553,b,E,v.width,v.height,0,c,y,v.data);n.generateMipmaps=!1,t.__maxMipLevel=A.length-1}else i.texImage2D(3553,0,E,h.width,h.height,0,c,y,h.data),t.__maxMipLevel=0;else if(n.isCompressedTexture){for(b=0,S=A.length;b<S;b++)v=A[b],1023!==n.format&&1022!==n.format?i.getCompressedTextureFormats().indexOf(c)>-1?i.compressedTexImage2D(3553,b,E,v.width,v.height,0,v.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):i.texImage2D(3553,b,E,v.width,v.height,0,c,y,v.data);t.__maxMipLevel=A.length-1}else if(n.isDataTexture2DArray)i.texImage3D(35866,0,E,h.width,h.height,h.depth,0,c,y,h.data),t.__maxMipLevel=0;else if(n.isDataTexture3D)i.texImage3D(32879,0,E,h.width,h.height,h.depth,0,c,y,h.data),t.__maxMipLevel=0;else if(A.length>0&&u){for(b=0,S=A.length;b<S;b++)v=A[b],i.texImage2D(3553,b,E,c,y,v);n.generateMipmaps=!1,t.__maxMipLevel=A.length-1}else i.texImage2D(3553,0,E,c,y,h),t.__maxMipLevel=0;m(n,u)&&g(3553,n,h.width,h.height),t.__version=n.version,n.onUpdate&&n.onUpdate(n)}function P(t,r,s,o){var l=a.convert(r.texture.format),h=a.convert(r.texture.type),u=f(l,h);i.texImage2D(o,0,u,r.width,r.height,0,l,h,null),e.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,s,o,n.get(r.texture).__webglTexture,0),e.bindFramebuffer(36160,null)}function C(t,i,n){if(e.bindRenderbuffer(36161,t),i.depthBuffer&&!i.stencilBuffer){if(n){var r=R(i);e.renderbufferStorageMultisample(36161,r,33189,i.width,i.height)}else e.renderbufferStorage(36161,33189,i.width,i.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(i.depthBuffer&&i.stencilBuffer){if(n){r=R(i);e.renderbufferStorageMultisample(36161,r,34041,i.width,i.height)}else e.renderbufferStorage(36161,34041,i.width,i.height);e.framebufferRenderbuffer(36160,33306,36161,t)}else{var s=f(a.convert(i.texture.format),a.convert(i.texture.type));if(n){r=R(i);e.renderbufferStorageMultisample(36161,r,s,i.width,i.height)}else e.renderbufferStorage(36161,s,i.width,i.height)}e.bindRenderbuffer(36161,null)}function V(t){var i=n.get(t),r=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(r)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");n.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),b(i.depthTexture,0);var r=n.get(i.depthTexture).__webglTexture;if(1026===i.depthTexture.format)e.framebufferTexture2D(36160,36096,3553,r,0);else{if(1027!==i.depthTexture.format)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,r,0)}}(i.__webglFramebuffer,t)}else if(r){i.__webglDepthbuffer=[];for(var s=0;s<6;s++)e.bindFramebuffer(36160,i.__webglFramebuffer[s]),i.__webglDepthbuffer[s]=e.createRenderbuffer(),C(i.__webglDepthbuffer[s],t)}else e.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),C(i.__webglDepthbuffer,t);e.bindFramebuffer(36160,null)}function R(e){return r.isWebGL2&&e.isWebGLMultisampleRenderTarget?Math.min(r.maxSamples,e.samples):0}var N=!1,M=!1;this.allocateTextureUnit=function(){var e=A;return e>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+r.maxTextures),A+=1,e},this.resetTextureUnits=function(){A=0},this.setTexture2D=b,this.setTexture2DArray=function(e,t){var r=n.get(e);e.version>0&&r.__version!==e.version?T(r,e,t):(i.activeTexture(33984+t),i.bindTexture(35866,r.__webglTexture))},this.setTexture3D=function(e,t){var r=n.get(e);e.version>0&&r.__version!==e.version?T(r,e,t):(i.activeTexture(33984+t),i.bindTexture(32879,r.__webglTexture))},this.setTextureCube=S,this.setTextureCubeDynamic=_,this.setupRenderTarget=function(t){var s=n.get(t),l=n.get(t.texture);t.addEventListener("dispose",v),l.__webglTexture=e.createTexture(),o.memory.textures++;var h=!0===t.isWebGLRenderTargetCube,u=!0===t.isWebGLMultisampleRenderTarget,c=p(t)||r.isWebGL2;if(h){s.__webglFramebuffer=[];for(var d=0;d<6;d++)s.__webglFramebuffer[d]=e.createFramebuffer()}else if(s.__webglFramebuffer=e.createFramebuffer(),u)if(r.isWebGL2){s.__webglMultisampledFramebuffer=e.createFramebuffer(),s.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,s.__webglColorRenderbuffer);var y=f(a.convert(t.texture.format),a.convert(t.texture.type)),E=R(t);e.renderbufferStorageMultisample(36161,E,y,t.width,t.height),e.bindFramebuffer(36160,s.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,s.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(s.__webglDepthRenderbuffer=e.createRenderbuffer(),C(s.__webglDepthRenderbuffer,t,!0)),e.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(h){i.bindTexture(34067,l.__webglTexture),x(34067,t.texture,c);for(d=0;d<6;d++)P(s.__webglFramebuffer[d],t,36064,34069+d);m(t.texture,c)&&g(34067,t.texture,t.width,t.height),i.bindTexture(34067,null)}else i.bindTexture(3553,l.__webglTexture),x(3553,t.texture,c),P(s.__webglFramebuffer,t,36064,3553),m(t.texture,c)&&g(3553,t.texture,t.width,t.height),i.bindTexture(3553,null);t.depthBuffer&&V(t)},this.updateRenderTargetMipmap=function(e){var t=e.texture;if(m(t,p(e)||r.isWebGL2)){var s=e.isWebGLRenderTargetCube?34067:3553,a=n.get(t).__webglTexture;i.bindTexture(s,a),g(s,t,e.width,e.height),i.bindTexture(s,null)}},this.updateMultisampleRenderTarget=function(t){if(t.isWebGLMultisampleRenderTarget)if(r.isWebGL2){var i=n.get(t);e.bindFramebuffer(36008,i.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,i.__webglFramebuffer);var s=t.width,a=t.height,o=16384;t.depthBuffer&&(o|=256),t.stencilBuffer&&(o|=1024),e.blitFramebuffer(0,0,s,a,0,0,s,a,o,9728)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===N&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),N=!0),e=e.texture),b(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLRenderTargetCube&&(!1===M&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),M=!0),e=e.texture),e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?S(e,t):_(e,t)}}function wi(e,t,i){return{convert:function(e){var n;if(1e3===e)return 10497;if(1001===e)return 33071;if(1002===e)return 33648;if(1003===e)return 9728;if(1004===e)return 9984;if(1005===e)return 9986;if(1006===e)return 9729;if(1007===e)return 9985;if(1008===e)return 9987;if(1009===e)return 5121;if(1017===e)return 32819;if(1018===e)return 32820;if(1019===e)return 33635;if(1010===e)return 5120;if(1011===e)return 5122;if(1012===e)return 5123;if(1013===e)return 5124;if(1014===e)return 5125;if(1015===e)return 5126;if(1016===e){if(i.isWebGL2)return 5131;if(null!==(n=t.get("OES_texture_half_float")))return n.HALF_FLOAT_OES}if(1021===e)return 6406;if(1022===e)return 6407;if(1023===e)return 6408;if(1024===e)return 6409;if(1025===e)return 6410;if(1026===e)return 6402;if(1027===e)return 34041;if(1028===e)return 6403;if(100===e)return 32774;if(101===e)return 32778;if(102===e)return 32779;if(200===e)return 0;if(201===e)return 1;if(202===e)return 768;if(203===e)return 769;if(204===e)return 770;if(205===e)return 771;if(206===e)return 772;if(207===e)return 773;if(208===e)return 774;if(209===e)return 775;if(210===e)return 776;if((33776===e||33777===e||33778===e||33779===e)&&null!==(n=t.get("WEBGL_compressed_texture_s3tc"))){if(33776===e)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===e)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===e)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===e)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((35840===e||35841===e||35842===e||35843===e)&&null!==(n=t.get("WEBGL_compressed_texture_pvrtc"))){if(35840===e)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===e)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===e)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===e)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===e&&null!==(n=t.get("WEBGL_compressed_texture_etc1")))return n.COMPRESSED_RGB_ETC1_WEBGL;if((37808===e||37809===e||37810===e||37811===e||37812===e||37813===e||37814===e||37815===e||37816===e||37817===e||37818===e||37819===e||37820===e||37821===e)&&null!==(n=t.get("WEBGL_compressed_texture_astc")))return e;if(103===e||104===e){if(i.isWebGL2){if(103===e)return 32775;if(104===e)return 32776}if(null!==(n=t.get("EXT_blend_minmax"))){if(103===e)return n.MIN_EXT;if(104===e)return n.MAX_EXT}}if(1020===e){if(i.isWebGL2)return 34042;if(null!==(n=t.get("WEBGL_depth_texture")))return n.UNSIGNED_INT_24_8_WEBGL}return 0}}}function Ti(){se.call(this),this.type="Group"}function Pi(){se.call(this),this.type="Camera",this.matrixWorldInverse=new B,this.projectionMatrix=new B,this.projectionMatrixInverse=new B}function Ci(e,t,i,n){Pi.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==i?i:.1,this.far=void 0!==n?n:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Vi(e){Ci.call(this),this.cameras=e||[]}Ai.prototype=Object.create(Ve.prototype),Ai.prototype.constructor=Ai,Ai.prototype.isMeshDepthMaterial=!0,Ai.prototype.copy=function(e){return Ve.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},bi.prototype=Object.create(Ve.prototype),bi.prototype.constructor=bi,bi.prototype.isMeshDistanceMaterial=!0,bi.prototype.copy=function(e){return Ve.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this},Ti.prototype=Object.assign(Object.create(se.prototype),{constructor:Ti,isGroup:!0}),Pi.prototype=Object.assign(Object.create(se.prototype),{constructor:Pi,isCamera:!0,copy:function(e,t){return se.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new l),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){se.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),Ci.prototype=Object.assign(Object.create(Pi.prototype),{constructor:Ci,isPerspectiveCamera:!0,copy:function(e,t){return Pi.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*s.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*s.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*s.RAD2DEG*Math.atan(Math.tan(.5*s.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,i,n,r,s){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*s.DEG2RAD*this.fov)/this.zoom,i=2*t,n=this.aspect*i,r=-.5*n,a=this.view;if(null!==this.view&&this.view.enabled){var o=a.fullWidth,l=a.fullHeight;r+=a.offsetX*n/o,t-=a.offsetY*i/l,n*=a.width/o,i*=a.height/l}var h=this.filmOffset;0!==h&&(r+=e*h/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+n,t,t-i,e,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=se.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),Vi.prototype=Object.assign(Object.create(Ci.prototype),{constructor:Vi,isArrayCamera:!0});var Ri,Ni,Mi,ki,Li,Ii,Bi=new l,Di=new l;function Oi(e,t,i){Bi.setFromMatrixPosition(t.matrixWorld),Di.setFromMatrixPosition(i.matrixWorld);var n=Bi.distanceTo(Di),r=t.projectionMatrix.elements,s=i.projectionMatrix.elements,a=r[14]/(r[10]-1),o=r[14]/(r[10]+1),l=(r[9]+1)/r[5],h=(r[9]-1)/r[5],u=(r[8]-1)/r[0],c=(s[8]+1)/s[0],d=a*u,p=a*c,m=n/(-u+c),g=m*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(g),e.translateZ(m),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.getInverse(e.matrixWorld);var f=a+m,y=o+m,E=d-g,v=p+(n-g),A=l*o/y*f,b=h*o/y*f;e.projectionMatrix.makePerspective(E,v,A,b,f,y)}function qi(e){var t=this,i=null,n=null,r=null,s=[],h=new B,u=new B,c=1,d="stage";"undefined"!=typeof window&&"VRFrameData"in window&&(n=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",S,!1));var p=new B,m=new o,g=new l,f=new Ci;f.bounds=new P(0,0,.5,1),f.layers.enable(1);var y=new Ci;y.bounds=new P(.5,0,.5,1),y.layers.enable(2);var E=new Vi([f,y]);function v(){return null!==i&&!0===i.isPresenting}E.layers.enable(1),E.layers.enable(2);var A,b=new a;function S(){if(v()){var n=i.getEyeParameters("left"),r=n.renderWidth*c,s=n.renderHeight*c;A=e.getPixelRatio(),e.getSize(b),e.setDrawingBufferSize(2*r,s,1),w.start()}else t.enabled&&e.setDrawingBufferSize(b.width,b.height,A),w.stop()}var _=[];function x(e){for(var t=navigator.getGamepads&&navigator.getGamepads(),i=0,n=0,r=t.length;i<r;i++){var s=t[i];if(s&&("Daydream Controller"===s.id||"Gear VR Controller"===s.id||"Oculus Go Controller"===s.id||"OpenVR Gamepad"===s.id||s.id.startsWith("Oculus Touch")||s.id.startsWith("Spatial Controller"))){if(n===e)return s;n++}}}this.enabled=!1,this.getController=function(e){var t=s[e];return void 0===t&&((t=new Ti).matrixAutoUpdate=!1,t.visible=!1,s[e]=t),t},this.getDevice=function(){return i},this.setDevice=function(e){void 0!==e&&(i=e),w.setContext(e)},this.setFramebufferScaleFactor=function(e){c=e},this.setFrameOfReferenceType=function(e){d=e},this.setPoseTarget=function(e){void 0!==e&&(r=e)},this.getCamera=function(e){var t="stage"===d?1.6:0;if(!1===v())return e.position.set(0,t,0),e.rotation.set(0,0,0),e;if(i.depthNear=e.near,i.depthFar=e.far,i.getFrameData(n),"stage"===d){var a=i.stageParameters;a?h.fromArray(a.sittingToStandingTransform):h.makeTranslation(0,t,0)}var o=n.pose,l=null!==r?r:e;l.matrix.copy(h),l.matrix.decompose(l.position,l.quaternion,l.scale),null!==o.orientation&&(m.fromArray(o.orientation),l.quaternion.multiply(m)),null!==o.position&&(m.setFromRotationMatrix(h),g.fromArray(o.position),g.applyQuaternion(m),l.position.add(g)),l.updateMatrixWorld(),f.near=e.near,y.near=e.near,f.far=e.far,y.far=e.far,f.matrixWorldInverse.fromArray(n.leftViewMatrix),y.matrixWorldInverse.fromArray(n.rightViewMatrix),u.getInverse(h),"stage"===d&&(f.matrixWorldInverse.multiply(u),y.matrixWorldInverse.multiply(u));var c=l.parent;null!==c&&(p.getInverse(c.matrixWorld),f.matrixWorldInverse.multiply(p),y.matrixWorldInverse.multiply(p)),f.matrixWorld.getInverse(f.matrixWorldInverse),y.matrixWorld.getInverse(y.matrixWorldInverse),f.projectionMatrix.fromArray(n.leftProjectionMatrix),y.projectionMatrix.fromArray(n.rightProjectionMatrix),Oi(E,f,y);var A=i.getLayers();if(A.length){var b=A[0];null!==b.leftBounds&&4===b.leftBounds.length&&f.bounds.fromArray(b.leftBounds),null!==b.rightBounds&&4===b.rightBounds.length&&y.bounds.fromArray(b.rightBounds)}return function(){for(var e=0;e<s.length;e++){var t=s[e],i=x(e);if(void 0!==i&&void 0!==i.pose){if(null===i.pose)return;var n=i.pose;!1===n.hasPosition&&t.position.set(.2,-.6,-.05),null!==n.position&&t.position.fromArray(n.position),null!==n.orientation&&t.quaternion.fromArray(n.orientation),t.matrix.compose(t.position,t.quaternion,t.scale),t.matrix.premultiply(h),t.matrix.decompose(t.position,t.quaternion,t.scale),t.matrixWorldNeedsUpdate=!0,t.visible=!0;var r="Daydream Controller"===i.id?0:1;_[e]!==i.buttons[r].pressed&&(_[e]=i.buttons[r].pressed,!0===_[e]?t.dispatchEvent({type:"selectstart"}):(t.dispatchEvent({type:"selectend"}),t.dispatchEvent({type:"select"})))}else t.visible=!1}}(),E},this.getStandingMatrix=function(){return h},this.isPresenting=v;var w=new Q;this.setAnimationLoop=function(e){w.setAnimationLoop(e),v()&&w.start()},this.submitFrame=function(){v()&&i.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",S)}}function Yi(e){var t=e.context,i=null,n=null,r=1,s=null,a="stage",o=null,l=[],h=[];function u(){return null!==n&&null!==s}var c=new Ci;c.layers.enable(1),c.viewport=new P;var d=new Ci;d.layers.enable(2),d.viewport=new P;var p=new Vi([c,d]);function m(e){var t=l[h.indexOf(e.inputSource)];t&&t.dispatchEvent({type:e.type})}function g(){e.setFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),E.stop()}function f(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.getInverse(e.matrixWorld)}p.layers.enable(1),p.layers.enable(2),this.enabled=!1,this.getController=function(e){var t=l[e];return void 0===t&&((t=new Ti).matrixAutoUpdate=!1,t.visible=!1,l[e]=t),t},this.getDevice=function(){return i},this.setDevice=function(e){void 0!==e&&(i=e),e instanceof XRDevice&&t.setCompatibleXRDevice(e)},this.setFramebufferScaleFactor=function(e){r=e},this.setFrameOfReferenceType=function(e){a=e},this.setSession=function(i){null!==(n=i)&&(n.addEventListener("select",m),n.addEventListener("selectstart",m),n.addEventListener("selectend",m),n.addEventListener("end",g),n.baseLayer=new XRWebGLLayer(n,t,{framebufferScaleFactor:r}),n.requestFrameOfReference(a).then((function(t){s=t,e.setFramebuffer(n.baseLayer.framebuffer),E.setContext(n),E.start()})),h=n.getInputSources(),n.addEventListener("inputsourceschange",(function(){h=n.getInputSources(),console.log(h);for(var e=0;e<l.length;e++){l[e].userData.inputSource=h[e]}})))},this.getCamera=function(e){if(u()){var t=e.parent,i=p.cameras;f(p,t);for(var n=0;n<i.length;n++)f(i[n],t);e.matrixWorld.copy(p.matrixWorld);for(var r=e.children,s=(n=0,r.length);n<s;n++)r[n].updateMatrixWorld(!0);return Oi(p,c,d),p}return e},this.isPresenting=u;var y=null;var E=new Q;E.setAnimationLoop((function(e,t){if(null!==(o=t.getDevicePose(s)))for(var i=n.baseLayer,r=t.views,a=0;a<r.length;a++){var u=r[a],c=i.getViewport(u),d=o.getViewMatrix(u),m=p.cameras[a];m.matrix.fromArray(d).getInverse(m.matrix),m.projectionMatrix.fromArray(u.projectionMatrix),m.viewport.set(c.x,c.y,c.width,c.height),0===a&&p.matrix.copy(m.matrix)}for(a=0;a<l.length;a++){var g=l[a],f=h[a];if(f){var E=t.getInputPose(f,s);if(null!==E){"targetRay"in E?g.matrix.elements=E.targetRay.transformMatrix:"pointerMatrix"in E&&(g.matrix.elements=E.pointerMatrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.visible=!0;continue}}g.visible=!1}y&&y(e)})),this.setAnimationLoop=function(e){y=e},this.dispose=function(){},this.getStandingMatrix=function(){return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."),new B},this.submitFrame=function(){}}function Hi(e){var t=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),i=void 0!==e.context?e.context:null,n=void 0!==e.alpha&&e.alpha,r=void 0===e.depth||e.depth,o=void 0===e.stencil||e.stencil,h=void 0!==e.antialias&&e.antialias,u=void 0===e.premultipliedAlpha||e.premultipliedAlpha,c=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,d=void 0!==e.powerPreference?e.powerPreference:"default",p=null,m=null;this.domElement=t,this.context=null,this.debug={checkShaderErrors:!1},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=1,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var g,f,y,E,v,A,b,S,_,x,w,T,C,V,R,M,k,L,D=this,q=!1,Y=null,H=null,G=null,F=-1,z={geometry:null,program:null,wireframe:!1},U=null,W=null,Z=new P,J=new P,$=null,ee=t.width,te=t.height,ie=1,ne=new P(0,0,ee,te),re=new P(0,0,ee,te),se=!1,ae=new I,oe=new Ke,le=!1,he=!1,ue=new B,ce=new l;function de(){return null===H?ie:1}try{var pe={alpha:n,depth:r,stencil:o,antialias:h,premultipliedAlpha:u,preserveDrawingBuffer:c,powerPreference:d};if(t.addEventListener("webglcontextlost",ye,!1),t.addEventListener("webglcontextrestored",Ee,!1),null===(g=i||t.getContext("webgl",pe)||t.getContext("experimental-webgl",pe)))throw null!==t.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===g.getShaderPrecisionFormat&&(g.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Ne){throw console.error("THREE.WebGLRenderer: "+Ne.message),Ne}function me(){f=new Ze(g),(y=new Qe(g,f,e)).isWebGL2||(f.get("WEBGL_depth_texture"),f.get("OES_texture_float"),f.get("OES_texture_half_float"),f.get("OES_texture_half_float_linear"),f.get("OES_standard_derivatives"),f.get("OES_element_index_uint"),f.get("ANGLE_instanced_arrays")),f.get("OES_texture_float_linear"),L=new wi(g,f,y),(E=new _i(g,f,L,y)).scissor(J.copy(re).multiplyScalar(ie)),E.viewport(Z.copy(ne).multiplyScalar(ie)),v=new et(g),A=new ui,b=new xi(g,f,E,A,y,L,v),S=new K(g),_=new Je(g,S,v),x=new nt(_,v),R=new it(g),w=new hi(D,f,y,b),T=new mi,C=new vi,V=new Xe(D,E,x,u),M=new je(g,f,v,y),k=new $e(g,f,v,y),v.programs=w.programs,D.context=g,D.capabilities=y,D.extensions=f,D.properties=A,D.renderLists=T,D.state=E,D.info=v}me();var ge="undefined"!=typeof navigator&&"xr"in navigator?new Yi(D):new qi(D);this.vr=ge;var fe=new Si(D,x,y.maxTextureSize);function ye(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),q=!0}function Ee(){console.log("THREE.WebGLRenderer: Context Restored."),q=!1,me()}function ve(e){var t=e.target;t.removeEventListener("dispose",ve),function(e){Ae(e),A.remove(e)}(t)}function Ae(e){var t=A.get(e).program;e.program=void 0,void 0!==t&&w.releaseProgram(t)}this.shadowMap=fe,this.getContext=function(){return g},this.getContextAttributes=function(){return g.getContextAttributes()},this.forceContextLoss=function(){var e=f.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=f.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return ie},this.setPixelRatio=function(e){void 0!==e&&(ie=e,this.setSize(ee,te,!1))},this.getSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),e=new a),e.set(ee,te)},this.setSize=function(e,i,n){ge.isPresenting()?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(ee=e,te=i,t.width=e*ie,t.height=i*ie,!1!==n&&(t.style.width=e+"px",t.style.height=i+"px"),this.setViewport(0,0,e,i))},this.getDrawingBufferSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),e=new a),e.set(ee*ie,te*ie)},this.setDrawingBufferSize=function(e,i,n){ee=e,te=i,ie=n,t.width=e*n,t.height=i*n,this.setViewport(0,0,e,i)},this.getCurrentViewport=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),e=new P),e.copy(Z)},this.getViewport=function(e){return e.copy(ne)},this.setViewport=function(e,t,i,n){e.isVector4?ne.set(e.x,e.y,e.z,e.w):ne.set(e,t,i,n),E.viewport(Z.copy(ne).multiplyScalar(ie))},this.getScissor=function(e){return e.copy(re)},this.setScissor=function(e,t,i,n){e.isVector4?re.set(e.x,e.y,e.z,e.w):re.set(e,t,i,n),E.scissor(J.copy(re).multiplyScalar(ie))},this.getScissorTest=function(){return se},this.setScissorTest=function(e){E.setScissorTest(se=e)},this.getClearColor=function(){return V.getClearColor()},this.setClearColor=function(){V.setClearColor.apply(V,arguments)},this.getClearAlpha=function(){return V.getClearAlpha()},this.setClearAlpha=function(){V.setClearAlpha.apply(V,arguments)},this.clear=function(e,t,i){var n=0;(void 0===e||e)&&(n|=16384),(void 0===t||t)&&(n|=256),(void 0===i||i)&&(n|=1024),g.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ye,!1),t.removeEventListener("webglcontextrestored",Ee,!1),T.dispose(),C.dispose(),A.dispose(),x.dispose(),ge.dispose(),Se.stop()},this.renderBufferImmediate=function(e,t){E.initAttributes();var i=A.get(e);e.hasPositions&&!i.position&&(i.position=g.createBuffer()),e.hasNormals&&!i.normal&&(i.normal=g.createBuffer()),e.hasUvs&&!i.uv&&(i.uv=g.createBuffer()),e.hasColors&&!i.color&&(i.color=g.createBuffer());var n=t.getAttributes();e.hasPositions&&(g.bindBuffer(34962,i.position),g.bufferData(34962,e.positionArray,35048),E.enableAttribute(n.position),g.vertexAttribPointer(n.position,3,5126,!1,0,0)),e.hasNormals&&(g.bindBuffer(34962,i.normal),g.bufferData(34962,e.normalArray,35048),E.enableAttribute(n.normal),g.vertexAttribPointer(n.normal,3,5126,!1,0,0)),e.hasUvs&&(g.bindBuffer(34962,i.uv),g.bufferData(34962,e.uvArray,35048),E.enableAttribute(n.uv),g.vertexAttribPointer(n.uv,2,5126,!1,0,0)),e.hasColors&&(g.bindBuffer(34962,i.color),g.bufferData(34962,e.colorArray,35048),E.enableAttribute(n.color),g.vertexAttribPointer(n.color,3,5126,!1,0,0)),E.disableUnusedAttributes(),g.drawArrays(4,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,i,n,r,s){var a=r.isMesh&&r.matrixWorld.determinant()<0;E.setMaterial(n,a);var o=Pe(e,t,n,r),l=!1;z.geometry===i.id&&z.program===o.id&&z.wireframe===(!0===n.wireframe)||(z.geometry=i.id,z.program=o.id,z.wireframe=!0===n.wireframe,l=!0),r.morphTargetInfluences&&(R.update(r,i,n,o),l=!0);var h,u=i.index,c=i.attributes.position,d=1;!0===n.wireframe&&(u=_.getWireframeAttribute(i),d=2);var p=M;null!==u&&(h=S.get(u),(p=k).setIndex(h)),l&&(!function(e,t,i){if(i&&i.isInstancedBufferGeometry&&!y.isWebGL2&&null===f.get("ANGLE_instanced_arrays"))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");E.initAttributes();var n=i.attributes,r=t.getAttributes(),s=e.defaultAttributeValues;for(var a in r){var o=r[a];if(o>=0){var l=n[a];if(void 0!==l){var h=l.normalized,u=l.itemSize,c=S.get(l);if(void 0===c)continue;var d=c.buffer,p=c.type,m=c.bytesPerElement;if(l.isInterleavedBufferAttribute){var v=l.data,A=v.stride,b=l.offset;v&&v.isInstancedInterleavedBuffer?(E.enableAttributeAndDivisor(o,v.meshPerAttribute),void 0===i.maxInstancedCount&&(i.maxInstancedCount=v.meshPerAttribute*v.count)):E.enableAttribute(o),g.bindBuffer(34962,d),g.vertexAttribPointer(o,u,p,h,A*m,b*m)}else l.isInstancedBufferAttribute?(E.enableAttributeAndDivisor(o,l.meshPerAttribute),void 0===i.maxInstancedCount&&(i.maxInstancedCount=l.meshPerAttribute*l.count)):E.enableAttribute(o),g.bindBuffer(34962,d),g.vertexAttribPointer(o,u,p,h,0,0)}else if(void 0!==s){var _=s[a];if(void 0!==_)switch(_.length){case 2:g.vertexAttrib2fv(o,_);break;case 3:g.vertexAttrib3fv(o,_);break;case 4:g.vertexAttrib4fv(o,_);break;default:g.vertexAttrib1fv(o,_)}}}}E.disableUnusedAttributes()}(n,o,i),null!==u&&g.bindBuffer(34963,h.buffer));var m=1/0;null!==u?m=u.count:void 0!==c&&(m=c.count);var v=i.drawRange.start*d,A=i.drawRange.count*d,b=null!==s?s.start*d:0,x=null!==s?s.count*d:1/0,w=Math.max(v,b),T=Math.min(m,v+A,b+x)-1,P=Math.max(0,T-w+1);if(0!==P){if(r.isMesh)if(!0===n.wireframe)E.setLineWidth(n.wireframeLinewidth*de()),p.setMode(1);else switch(r.drawMode){case 0:p.setMode(4);break;case 1:p.setMode(5);break;case 2:p.setMode(6)}else if(r.isLine){var C=n.linewidth;void 0===C&&(C=1),E.setLineWidth(C*de()),r.isLineSegments?p.setMode(1):r.isLineLoop?p.setMode(2):p.setMode(3)}else r.isPoints?p.setMode(0):r.isSprite&&p.setMode(4);i&&i.isInstancedBufferGeometry?i.maxInstancedCount>0&&p.renderInstances(i,w,P):p.render(w,P)}},this.compile=function(e,t){(m=C.get(e,t)).init(),e.traverse((function(e){e.isLight&&(m.pushLight(e),e.castShadow&&m.pushShadow(e))})),m.setupLights(t),e.traverse((function(t){if(t.material)if(Array.isArray(t.material))for(var i=0;i<t.material.length;i++)Te(t.material[i],e.fog,t);else Te(t.material,e.fog,t)}))};var be=null;var Se=new Q;function _e(e,t,i,n){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isGroup)i=e.renderOrder;else if(e.isLight)m.pushLight(e),e.castShadow&&m.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||ae.intersectsSprite(e)){n&&ce.setFromMatrixPosition(e.matrixWorld).applyMatrix4(ue);var r=x.update(e);(s=e.material).visible&&p.push(e,r,s,i,ce.z,null)}}else if(e.isImmediateRenderObject)n&&ce.setFromMatrixPosition(e.matrixWorld).applyMatrix4(ue),p.push(e,null,e.material,i,ce.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.update(),!e.frustumCulled||ae.intersectsObject(e))){n&&ce.setFromMatrixPosition(e.matrixWorld).applyMatrix4(ue);r=x.update(e);var s=e.material;if(Array.isArray(s))for(var a=r.groups,o=0,l=a.length;o<l;o++){var h=a[o],u=s[h.materialIndex];u&&u.visible&&p.push(e,r,u,i,ce.z,h)}else s.visible&&p.push(e,r,s,i,ce.z,null)}var c=e.children;for(o=0,l=c.length;o<l;o++)_e(c[o],t,i,n)}}function xe(e,t,i,n){for(var r=0,s=e.length;r<s;r++){var a=e[r],o=a.object,l=a.geometry,h=void 0===n?a.material:n,u=a.group;if(i.isArrayCamera){W=i;for(var c=i.cameras,d=0,p=c.length;d<p;d++){var g=c[d];if(o.layers.test(g.layers)){if("viewport"in g)E.viewport(Z.copy(g.viewport));else{var f=g.bounds,y=f.x*ee,v=f.y*te,A=f.z*ee,b=f.w*te;E.viewport(Z.set(y,v,A,b).multiplyScalar(ie))}m.setupLights(g),we(o,t,g,l,h,u)}}}else W=null,we(o,t,i,l,h,u)}}function we(e,t,i,n,r,s){if(e.onBeforeRender(D,t,i,n,r,s),m=C.get(t,W||i),e.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){E.setMaterial(r);var a=Pe(i,t.fog,r,e);z.geometry=null,z.program=null,z.wireframe=!1,function(e,t){e.render((function(e){D.renderBufferImmediate(e,t)}))}(e,a)}else D.renderBufferDirect(i,t.fog,n,r,e,s);e.onAfterRender(D,t,i,n,r,s),m=C.get(t,W||i)}function Te(e,t,i){var n=A.get(e),r=m.state.lights,s=m.state.shadowsArray,a=n.lightsHash,o=r.state.hash,l=w.getParameters(e,r.state,s,t,oe.numPlanes,oe.numIntersection,i),h=w.getProgramCode(e,l),u=n.program,c=!0;if(void 0===u)e.addEventListener("dispose",ve);else if(u.code!==h)Ae(e);else if(a.stateID!==o.stateID||a.directionalLength!==o.directionalLength||a.pointLength!==o.pointLength||a.spotLength!==o.spotLength||a.rectAreaLength!==o.rectAreaLength||a.hemiLength!==o.hemiLength||a.shadowsLength!==o.shadowsLength)a.stateID=o.stateID,a.directionalLength=o.directionalLength,a.pointLength=o.pointLength,a.spotLength=o.spotLength,a.rectAreaLength=o.rectAreaLength,a.hemiLength=o.hemiLength,a.shadowsLength=o.shadowsLength,c=!1;else{if(void 0!==l.shaderID)return;c=!1}if(c){if(l.shaderID){var d=j[l.shaderID];n.shader={name:e.type,uniforms:O(d.uniforms),vertexShader:d.vertexShader,fragmentShader:d.fragmentShader}}else n.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.onBeforeCompile(n.shader,D),h=w.getProgramCode(e,l),u=w.acquireProgram(e,n.shader,l,h),n.program=u,e.program=u}var p=u.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var g=0;g<D.maxMorphTargets;g++)p["morphTarget"+g]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;for(g=0;g<D.maxMorphNormals;g++)p["morphNormal"+g]>=0&&e.numSupportedMorphNormals++}var f=n.shader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(n.numClippingPlanes=oe.numPlanes,n.numIntersection=oe.numIntersection,f.clippingPlanes=oe.uniform),n.fog=t,void 0===a&&(n.lightsHash=a={}),a.stateID=o.stateID,a.directionalLength=o.directionalLength,a.pointLength=o.pointLength,a.spotLength=o.spotLength,a.rectAreaLength=o.rectAreaLength,a.hemiLength=o.hemiLength,a.shadowsLength=o.shadowsLength,e.lights&&(f.ambientLightColor.value=r.state.ambient,f.lightProbe.value=r.state.probe,f.directionalLights.value=r.state.directional,f.spotLights.value=r.state.spot,f.rectAreaLights.value=r.state.rectArea,f.pointLights.value=r.state.point,f.hemisphereLights.value=r.state.hemi,f.directionalShadowMap.value=r.state.directionalShadowMap,f.directionalShadowMatrix.value=r.state.directionalShadowMatrix,f.spotShadowMap.value=r.state.spotShadowMap,f.spotShadowMatrix.value=r.state.spotShadowMatrix,f.pointShadowMap.value=r.state.pointShadowMap,f.pointShadowMatrix.value=r.state.pointShadowMatrix);var y=n.program.getUniforms(),E=Zt.seqWithValue(y.seq,f);n.uniformsList=E}function Pe(e,t,i,n){b.resetTextureUnits();var r=A.get(i),a=m.state.lights,o=r.lightsHash,l=a.state.hash;if(le&&(he||e!==U)){var h=e===U&&i.id===F;oe.setState(i.clippingPlanes,i.clipIntersection,i.clipShadows,e,r,h)}!1===i.needsUpdate&&(void 0===r.program||i.fog&&r.fog!==t?i.needsUpdate=!0:(!i.lights||o.stateID===l.stateID&&o.directionalLength===l.directionalLength&&o.pointLength===l.pointLength&&o.spotLength===l.spotLength&&o.rectAreaLength===l.rectAreaLength&&o.hemiLength===l.hemiLength&&o.shadowsLength===l.shadowsLength)&&(void 0===r.numClippingPlanes||r.numClippingPlanes===oe.numPlanes&&r.numIntersection===oe.numIntersection)||(i.needsUpdate=!0)),i.needsUpdate&&(Te(i,t,n),i.needsUpdate=!1);var u,c,d=!1,p=!1,f=!1,v=r.program,S=v.getUniforms(),_=r.shader.uniforms;if(E.useProgram(v.program)&&(d=!0,p=!0,f=!0),i.id!==F&&(F=i.id,p=!0),d||U!==e){if(S.setValue(g,"projectionMatrix",e.projectionMatrix),y.logarithmicDepthBuffer&&S.setValue(g,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),U!==e&&(U=e,p=!0,f=!0),i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshStandardMaterial||i.envMap){var x=S.map.cameraPosition;void 0!==x&&x.setValue(g,ce.setFromMatrixPosition(e.matrixWorld))}(i.isMeshPhongMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.skinning)&&S.setValue(g,"viewMatrix",e.matrixWorldInverse)}if(i.skinning){S.setOptional(g,n,"bindMatrix"),S.setOptional(g,n,"bindMatrixInverse");var w=n.skeleton;if(w){var T=w.bones;if(y.floatVertexTextures){if(void 0===w.boneTexture){var P=Math.sqrt(4*T.length);P=s.ceilPowerOfTwo(P),P=Math.max(P,4);var C=new Float32Array(P*P*4);C.set(w.boneMatrices);var V=new N(C,P,P,1023,1015);V.needsUpdate=!0,w.boneMatrices=C,w.boneTexture=V,w.boneTextureSize=P}S.setValue(g,"boneTexture",w.boneTexture,b),S.setValue(g,"boneTextureSize",w.boneTextureSize)}else S.setOptional(g,w,"boneMatrices")}}return p&&(S.setValue(g,"toneMappingExposure",D.toneMappingExposure),S.setValue(g,"toneMappingWhitePoint",D.toneMappingWhitePoint),i.lights&&(c=f,(u=_).ambientLightColor.needsUpdate=c,u.lightProbe.needsUpdate=c,u.directionalLights.needsUpdate=c,u.pointLights.needsUpdate=c,u.spotLights.needsUpdate=c,u.rectAreaLights.needsUpdate=c,u.hemisphereLights.needsUpdate=c),t&&i.fog&&function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}(_,t),i.isMeshBasicMaterial?Ce(_,i):i.isMeshLambertMaterial?(Ce(_,i),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(_,i)):i.isMeshPhongMaterial?(Ce(_,i),i.isMeshToonMaterial?function(e,t){Ve(e,t),t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(_,i):Ve(_,i)):i.isMeshStandardMaterial?(Ce(_,i),i.isMeshPhysicalMaterial?function(e,t){Re(e,t),e.reflectivity.value=t.reflectivity,e.clearCoat.value=t.clearCoat,e.clearCoatRoughness.value=t.clearCoatRoughness}(_,i):Re(_,i)):i.isMeshMatcapMaterial?(Ce(_,i),function(e,t){t.matcap&&(e.matcap.value=t.matcap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(_,i)):i.isMeshDepthMaterial?(Ce(_,i),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(_,i)):i.isMeshDistanceMaterial?(Ce(_,i),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(_,i)):i.isMeshNormalMaterial?(Ce(_,i),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(_,i)):i.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(_,i),i.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(_,i)):i.isPointsMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*ie,e.scale.value=.5*te,e.map.value=t.map,null!==t.map&&(!0===t.map.matrixAutoUpdate&&t.map.updateMatrix(),e.uvTransform.value.copy(t.map.matrix))}(_,i):i.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,e.map.value=t.map,null!==t.map&&(!0===t.map.matrixAutoUpdate&&t.map.updateMatrix(),e.uvTransform.value.copy(t.map.matrix))}(_,i):i.isShadowMaterial&&(_.color.value.copy(i.color),_.opacity.value=i.opacity),void 0!==_.ltc_1&&(_.ltc_1.value=X.LTC_1),void 0!==_.ltc_2&&(_.ltc_2.value=X.LTC_2),Zt.upload(g,r.uniformsList,_,b)),i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(Zt.upload(g,r.uniformsList,_,b),i.uniformsNeedUpdate=!1),i.isSpriteMaterial&&S.setValue(g,"center",n.center),S.setValue(g,"modelViewMatrix",n.modelViewMatrix),S.setValue(g,"normalMatrix",n.normalMatrix),S.setValue(g,"modelMatrix",n.matrixWorld),v}function Ce(e,t){var i;e.opacity.value=t.opacity,t.color&&e.diffuse.value.copy(t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap),t.envMap&&(e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.maxMipLevel.value=A.get(t.envMap).__maxMipLevel),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity),t.map?i=t.map:t.specularMap?i=t.specularMap:t.displacementMap?i=t.displacementMap:t.normalMap?i=t.normalMap:t.bumpMap?i=t.bumpMap:t.roughnessMap?i=t.roughnessMap:t.metalnessMap?i=t.metalnessMap:t.alphaMap?i=t.alphaMap:t.emissiveMap&&(i=t.emissiveMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}function Ve(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function Re(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}Se.setAnimationLoop((function(e){ge.isPresenting()||be&&be(e)})),"undefined"!=typeof window&&Se.setContext(window),this.setAnimationLoop=function(e){be=e,ge.setAnimationLoop(e),Se.start()},this.render=function(e,t){var i,n;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),i=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),n=arguments[3]),t&&t.isCamera){if(!q){z.geometry=null,z.program=null,z.wireframe=!1,F=-1,U=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),ge.enabled&&(t=ge.getCamera(t)),(m=C.get(e,t)).init(),e.onBeforeRender(D,e,t,i||H),ue.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),ae.setFromMatrix(ue),he=this.localClippingEnabled,le=oe.init(this.clippingPlanes,he,t),(p=T.get(e,t)).init(),_e(e,t,0,D.sortObjects),!0===D.sortObjects&&p.sort(),le&&oe.beginShadows();var r=m.state.shadowsArray;fe.render(r,e,t),m.setupLights(t),le&&oe.endShadows(),this.info.autoReset&&this.info.reset(),void 0!==i&&this.setRenderTarget(i),V.render(p,e,t,n);var s=p.opaque,a=p.transparent;if(e.overrideMaterial){var o=e.overrideMaterial;s.length&&xe(s,e,t,o),a.length&&xe(a,e,t,o)}else s.length&&xe(s,e,t),a.length&&xe(a,e,t);e.onAfterRender(D,e,t),null!==H&&(b.updateRenderTargetMipmap(H),b.updateMultisampleRenderTarget(H)),E.buffers.depth.setTest(!0),E.buffers.depth.setMask(!0),E.buffers.color.setMask(!0),E.setPolygonOffset(!1),ge.enabled&&ge.submitFrame(),p=null,m=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFramebuffer=function(e){Y=e},this.getRenderTarget=function(){return H},this.setRenderTarget=function(e,t,i){H=e,e&&void 0===A.get(e).__webglFramebuffer&&b.setupRenderTarget(e);var n=Y,r=!1;if(e){var s=A.get(e).__webglFramebuffer;e.isWebGLRenderTargetCube?(n=s[t||0],r=!0):n=e.isWebGLMultisampleRenderTarget?A.get(e).__webglMultisampledFramebuffer:s,Z.copy(e.viewport),J.copy(e.scissor),$=e.scissorTest}else Z.copy(ne).multiplyScalar(ie),J.copy(re).multiplyScalar(ie),$=se;if(G!==n&&(g.bindFramebuffer(36160,n),G=n),E.viewport(Z),E.scissor(J),E.setScissorTest($),r){var a=A.get(e.texture);g.framebufferTexture2D(36160,36064,34069+(t||0),a.__webglTexture,i||0)}},this.readRenderTargetPixels=function(e,t,i,n,r,s){if(e&&e.isWebGLRenderTarget){var a=A.get(e).__webglFramebuffer;if(a){var o=!1;a!==G&&(g.bindFramebuffer(36160,a),o=!0);try{var l=e.texture,h=l.format,u=l.type;if(1023!==h&&L.convert(h)!==g.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(1009===u||L.convert(u)===g.getParameter(35738)||1015===u&&(y.isWebGL2||f.get("OES_texture_float")||f.get("WEBGL_color_buffer_float"))||1016===u&&(y.isWebGL2?f.get("EXT_color_buffer_float"):f.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===g.checkFramebufferStatus(36160)?t>=0&&t<=e.width-n&&i>=0&&i<=e.height-r&&g.readPixels(t,i,n,r,L.convert(h),L.convert(u),s):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{o&&g.bindFramebuffer(36160,G)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t,i){var n=t.image.width,r=t.image.height,s=L.convert(t.format);b.setTexture2D(t,0),g.copyTexImage2D(3553,i||0,s,e.x,e.y,n,r,0)},this.copyTextureToTexture=function(e,t,i,n){var r=t.image.width,s=t.image.height,a=L.convert(i.format),o=L.convert(i.type);b.setTexture2D(i,0),t.isDataTexture?g.texSubImage2D(3553,n||0,e.x,e.y,r,s,a,o,t.image.data):g.texSubImage2D(3553,n||0,e.x,e.y,a,o,t.image)}}function Gi(e,t){this.name="",this.color=new U(e),this.density=void 0!==t?t:25e-5}function Fi(e,t,i){this.name="",this.color=new U(e),this.near=void 0!==t?t:1,this.far=void 0!==i?i:1e3}function zi(){se.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function Ui(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function Wi(e,t,i,n){this.data=e,this.itemSize=t,this.offset=i,this.normalized=!0===n}function Xi(e){Ve.call(this),this.type="SpriteMaterial",this.color=new U(16777215),this.map=null,this.rotation=0,this.sizeAttenuation=!0,this.lights=!1,this.transparent=!0,this.setValues(e)}function ji(e){if(se.call(this),this.type="Sprite",void 0===Ri){Ri=new _e;var t=new Ui(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);Ri.setIndex([0,1,2,0,2,3]),Ri.addAttribute("position",new Wi(t,3,0,!1)),Ri.addAttribute("uv",new Wi(t,2,3,!1))}this.geometry=Ri,this.material=void 0!==e?e:new Xi,this.center=new a(.5,.5)}function Qi(){se.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function Ki(e,t){e&&e.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),We.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new B,this.bindMatrixInverse=new B}function Zi(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var i=0,n=this.bones.length;i<n;i++)this.boneInverses.push(new B)}}function Ji(){se.call(this),this.type="Bone"}function $i(e){Ve.call(this),this.type="LineBasicMaterial",this.color=new U(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}function en(e,t,i){1===i&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),se.call(this),this.type="Line",this.geometry=void 0!==e?e:new _e,this.material=void 0!==t?t:new $i({color:16777215*Math.random()})}function tn(e,t){en.call(this,e,t),this.type="LineSegments"}function nn(e,t){en.call(this,e,t),this.type="LineLoop"}function rn(e){Ve.call(this),this.type="PointsMaterial",this.color=new U(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function sn(e,t){se.call(this),this.type="Points",this.geometry=void 0!==e?e:new _e,this.material=void 0!==t?t:new rn({color:16777215*Math.random()})}function an(e,t,i,n,r,s,a,o,l){T.call(this,e,t,i,n,r,s,a,o,l),this.format=void 0!==a?a:1022,this.minFilter=void 0!==s?s:1006,this.magFilter=void 0!==r?r:1006,this.generateMipmaps=!1}function on(e,t,i,n,r,s,a,o,l,h,u,c){T.call(this,null,s,a,o,l,h,n,r,u,c),this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function ln(e,t,i,n,r,s,a,o,l){T.call(this,e,t,i,n,r,s,a,o,l),this.needsUpdate=!0}function hn(e,t,i,n,r,s,a,o,l,h){if(1026!==(h=void 0!==h?h:1026)&&1027!==h)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&1026===h&&(i=1012),void 0===i&&1027===h&&(i=1020),T.call(this,null,n,r,s,a,o,h,i,l),this.image={width:e,height:t},this.magFilter=void 0!==a?a:1003,this.minFilter=void 0!==o?o:1003,this.flipY=!1,this.generateMipmaps=!1}function un(e){_e.call(this),this.type="WireframeGeometry";var t,i,n,r,s,a,o,h,u,c,d=[],p=[0,0],m={},g=["a","b","c"];if(e&&e.isGeometry){var f=e.faces;for(t=0,n=f.length;t<n;t++){var y=f[t];for(i=0;i<3;i++)o=y[g[i]],h=y[g[(i+1)%3]],p[0]=Math.min(o,h),p[1]=Math.max(o,h),void 0===m[u=p[0]+","+p[1]]&&(m[u]={index1:p[0],index2:p[1]})}for(u in m)a=m[u],c=e.vertices[a.index1],d.push(c.x,c.y,c.z),c=e.vertices[a.index2],d.push(c.x,c.y,c.z)}else if(e&&e.isBufferGeometry){var E,v,A,b,S,_,x;if(c=new l,null!==e.index){for(E=e.attributes.position,v=e.index,0===(A=e.groups).length&&(A=[{start:0,count:v.count,materialIndex:0}]),r=0,s=A.length;r<s;++r)for(t=S=(b=A[r]).start,n=S+b.count;t<n;t+=3)for(i=0;i<3;i++)o=v.getX(t+i),h=v.getX(t+(i+1)%3),p[0]=Math.min(o,h),p[1]=Math.max(o,h),void 0===m[u=p[0]+","+p[1]]&&(m[u]={index1:p[0],index2:p[1]});for(u in m)a=m[u],c.fromBufferAttribute(E,a.index1),d.push(c.x,c.y,c.z),c.fromBufferAttribute(E,a.index2),d.push(c.x,c.y,c.z)}else for(t=0,n=(E=e.attributes.position).count/3;t<n;t++)for(i=0;i<3;i++)_=3*t+i,c.fromBufferAttribute(E,_),d.push(c.x,c.y,c.z),x=3*t+(i+1)%3,c.fromBufferAttribute(E,x),d.push(c.x,c.y,c.z)}this.addAttribute("position",new Ee(d,3))}function cn(e,t,i){he.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:i},this.fromBufferGeometry(new dn(e,t,i)),this.mergeVertices()}function dn(e,t,i){_e.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:i};var n,r,s=[],a=[],o=[],h=[],u=1e-5,c=new l,d=new l,p=new l,m=new l,g=new l;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var f=t+1;for(n=0;n<=i;n++){var y=n/i;for(r=0;r<=t;r++){var E=r/t;e(E,y,d),a.push(d.x,d.y,d.z),E-u>=0?(e(E-u,y,p),m.subVectors(d,p)):(e(E+u,y,p),m.subVectors(p,d)),y-u>=0?(e(E,y-u,p),g.subVectors(d,p)):(e(E,y+u,p),g.subVectors(p,d)),c.crossVectors(m,g).normalize(),o.push(c.x,c.y,c.z),h.push(E,y)}}for(n=0;n<i;n++)for(r=0;r<t;r++){var v=n*f+r,A=n*f+r+1,b=(n+1)*f+r+1,S=(n+1)*f+r;s.push(v,A,S),s.push(A,b,S)}this.setIndex(s),this.addAttribute("position",new Ee(a,3)),this.addAttribute("normal",new Ee(o,3)),this.addAttribute("uv",new Ee(h,2))}function pn(e,t,i,n){he.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:n},this.fromBufferGeometry(new mn(e,t,i,n)),this.mergeVertices()}function mn(e,t,i,n){_e.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:n},i=i||1;var r=[],s=[];function o(e,t,i,n){var r,s,a=Math.pow(2,n),o=[];for(r=0;r<=a;r++){o[r]=[];var l=e.clone().lerp(i,r/a),u=t.clone().lerp(i,r/a),c=a-r;for(s=0;s<=c;s++)o[r][s]=0===s&&r===a?l:l.clone().lerp(u,s/c)}for(r=0;r<a;r++)for(s=0;s<2*(a-r)-1;s++){var d=Math.floor(s/2);s%2==0?(h(o[r][d+1]),h(o[r+1][d]),h(o[r][d])):(h(o[r][d+1]),h(o[r+1][d+1]),h(o[r+1][d]))}}function h(e){r.push(e.x,e.y,e.z)}function u(t,i){var n=3*t;i.x=e[n+0],i.y=e[n+1],i.z=e[n+2]}function c(e,t,i,n){n<0&&1===e.x&&(s[t]=e.x-1),0===i.x&&0===i.z&&(s[t]=n/2/Math.PI+.5)}function d(e){return Math.atan2(e.z,-e.x)}function p(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}!function(e){for(var i=new l,n=new l,r=new l,s=0;s<t.length;s+=3)u(t[s+0],i),u(t[s+1],n),u(t[s+2],r),o(i,n,r,e)}(n=n||0),function(e){for(var t=new l,i=0;i<r.length;i+=3)t.x=r[i+0],t.y=r[i+1],t.z=r[i+2],t.normalize().multiplyScalar(e),r[i+0]=t.x,r[i+1]=t.y,r[i+2]=t.z}(i),function(){for(var e=new l,t=0;t<r.length;t+=3){e.x=r[t+0],e.y=r[t+1],e.z=r[t+2];var i=d(e)/2/Math.PI+.5,n=p(e)/Math.PI+.5;s.push(i,1-n)}(function(){for(var e=new l,t=new l,i=new l,n=new l,o=new a,h=new a,u=new a,p=0,m=0;p<r.length;p+=9,m+=6){e.set(r[p+0],r[p+1],r[p+2]),t.set(r[p+3],r[p+4],r[p+5]),i.set(r[p+6],r[p+7],r[p+8]),o.set(s[m+0],s[m+1]),h.set(s[m+2],s[m+3]),u.set(s[m+4],s[m+5]),n.copy(e).add(t).add(i).divideScalar(3);var g=d(n);c(o,m+0,e,g),c(h,m+2,t,g),c(u,m+4,i,g)}})(),function(){for(var e=0;e<s.length;e+=6){var t=s[e+0],i=s[e+2],n=s[e+4],r=Math.max(t,i,n),a=Math.min(t,i,n);r>.9&&a<.1&&(t<.2&&(s[e+0]+=1),i<.2&&(s[e+2]+=1),n<.2&&(s[e+4]+=1))}}()}(),this.addAttribute("position",new Ee(r,3)),this.addAttribute("normal",new Ee(r.slice(),3)),this.addAttribute("uv",new Ee(s,2)),0===n?this.computeVertexNormals():this.normalizeNormals()}function gn(e,t){he.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new fn(e,t)),this.mergeVertices()}function fn(e,t){mn.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function yn(e,t){he.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new En(e,t)),this.mergeVertices()}function En(e,t){mn.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function vn(e,t){he.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new An(e,t)),this.mergeVertices()}function An(e,t){var i=(1+Math.sqrt(5))/2,n=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1];mn.call(this,n,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function bn(e,t){he.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Sn(e,t)),this.mergeVertices()}function Sn(e,t){var i=(1+Math.sqrt(5))/2,n=1/i,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-i,0,-n,i,0,n,-i,0,n,i,-n,-i,0,-n,i,0,n,-i,0,n,i,0,-i,0,-n,i,0,-n,-i,0,n,i,0,n];mn.call(this,r,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function _n(e,t,i,n,r,s){he.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:n,closed:r},void 0!==s&&console.warn("THREE.TubeGeometry: taper has been removed.");var a=new xn(e,t,i,n,r);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}function xn(e,t,i,n,r){_e.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:n,closed:r},t=t||64,i=i||1,n=n||8,r=r||!1;var s=e.computeFrenetFrames(t,r);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;var o,h,u=new l,c=new l,d=new a,p=new l,m=[],g=[],f=[],y=[];function E(r){p=e.getPointAt(r/t,p);var a=s.normals[r],o=s.binormals[r];for(h=0;h<=n;h++){var l=h/n*Math.PI*2,d=Math.sin(l),f=-Math.cos(l);c.x=f*a.x+d*o.x,c.y=f*a.y+d*o.y,c.z=f*a.z+d*o.z,c.normalize(),g.push(c.x,c.y,c.z),u.x=p.x+i*c.x,u.y=p.y+i*c.y,u.z=p.z+i*c.z,m.push(u.x,u.y,u.z)}}!function(){for(o=0;o<t;o++)E(o);E(!1===r?t:0),function(){for(o=0;o<=t;o++)for(h=0;h<=n;h++)d.x=o/t,d.y=h/n,f.push(d.x,d.y)}(),function(){for(h=1;h<=t;h++)for(o=1;o<=n;o++){var e=(n+1)*(h-1)+(o-1),i=(n+1)*h+(o-1),r=(n+1)*h+o,s=(n+1)*(h-1)+o;y.push(e,i,s),y.push(i,r,s)}}()}(),this.setIndex(y),this.addAttribute("position",new Ee(m,3)),this.addAttribute("normal",new Ee(g,3)),this.addAttribute("uv",new Ee(f,2))}function wn(e,t,i,n,r,s,a){he.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:n,p:r,q:s},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Tn(e,t,i,n,r,s)),this.mergeVertices()}function Tn(e,t,i,n,r,s){_e.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:n,p:r,q:s},e=e||1,t=t||.4,i=Math.floor(i)||64,n=Math.floor(n)||8,r=r||2,s=s||3;var a,o,h=[],u=[],c=[],d=[],p=new l,m=new l,g=new l,f=new l,y=new l,E=new l,v=new l;for(a=0;a<=i;++a){var A=a/i*r*Math.PI*2;for(C(A,r,s,e,g),C(A+.01,r,s,e,f),E.subVectors(f,g),v.addVectors(f,g),y.crossVectors(E,v),v.crossVectors(y,E),y.normalize(),v.normalize(),o=0;o<=n;++o){var b=o/n*Math.PI*2,S=-t*Math.cos(b),_=t*Math.sin(b);p.x=g.x+(S*v.x+_*y.x),p.y=g.y+(S*v.y+_*y.y),p.z=g.z+(S*v.z+_*y.z),u.push(p.x,p.y,p.z),m.subVectors(p,g).normalize(),c.push(m.x,m.y,m.z),d.push(a/i),d.push(o/n)}}for(o=1;o<=i;o++)for(a=1;a<=n;a++){var x=(n+1)*(o-1)+(a-1),w=(n+1)*o+(a-1),T=(n+1)*o+a,P=(n+1)*(o-1)+a;h.push(x,w,P),h.push(w,T,P)}function C(e,t,i,n,r){var s=Math.cos(e),a=Math.sin(e),o=i/t*e,l=Math.cos(o);r.x=n*(2+l)*.5*s,r.y=n*(2+l)*a*.5,r.z=n*Math.sin(o)*.5}this.setIndex(h),this.addAttribute("position",new Ee(u,3)),this.addAttribute("normal",new Ee(c,3)),this.addAttribute("uv",new Ee(d,2))}function Pn(e,t,i,n,r){he.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:n,arc:r},this.fromBufferGeometry(new Cn(e,t,i,n,r)),this.mergeVertices()}function Cn(e,t,i,n,r){_e.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:n,arc:r},e=e||1,t=t||.4,i=Math.floor(i)||8,n=Math.floor(n)||6,r=r||2*Math.PI;var s,a,o=[],h=[],u=[],c=[],d=new l,p=new l,m=new l;for(s=0;s<=i;s++)for(a=0;a<=n;a++){var g=a/n*r,f=s/i*Math.PI*2;p.x=(e+t*Math.cos(f))*Math.cos(g),p.y=(e+t*Math.cos(f))*Math.sin(g),p.z=t*Math.sin(f),h.push(p.x,p.y,p.z),d.x=e*Math.cos(g),d.y=e*Math.sin(g),m.subVectors(p,d).normalize(),u.push(m.x,m.y,m.z),c.push(a/n),c.push(s/i)}for(s=1;s<=i;s++)for(a=1;a<=n;a++){var y=(n+1)*s+a-1,E=(n+1)*(s-1)+a-1,v=(n+1)*(s-1)+a,A=(n+1)*s+a;o.push(y,E,A),o.push(E,v,A)}this.setIndex(o),this.addAttribute("position",new Ee(h,3)),this.addAttribute("normal",new Ee(u,3)),this.addAttribute("uv",new Ee(c,2))}Object.assign(Gi.prototype,{isFogExp2:!0,clone:function(){return new Gi(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}),Object.assign(Fi.prototype,{isFog:!0,clone:function(){return new Fi(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}),zi.prototype=Object.assign(Object.create(se.prototype),{constructor:zi,isScene:!0,copy:function(e,t){return se.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=se.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(Ui.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Ui.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.stride:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,i){e*=this.stride,i*=t.stride;for(var n=0,r=this.stride;n<r;n++)this.array[e+n]=t.array[i+n];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}}),Object.defineProperties(Wi.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(Wi.prototype,{isInterleavedBufferAttribute:!0,setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this},setXYZ:function(e,t,i,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=n,this},setXYZW:function(e,t,i,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=n,this.data.array[e+3]=r,this}}),Xi.prototype=Object.create(Ve.prototype),Xi.prototype.constructor=Xi,Xi.prototype.isSpriteMaterial=!0,Xi.prototype.copy=function(e){return Ve.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this},ji.prototype=Object.assign(Object.create(se.prototype),{constructor:ji,isSprite:!0,raycast:function(){var e=new l,t=new l,i=new l,n=new a,r=new a,s=new B,o=new l,h=new l,u=new l,c=new a,d=new a,p=new a;function m(e,t,i,a,o,l){n.subVectors(e,i).addScalar(.5).multiply(a),void 0!==o?(r.x=l*n.x-o*n.y,r.y=o*n.x+l*n.y):r.copy(n),e.copy(t),e.x+=r.x,e.y+=r.y,e.applyMatrix4(s)}return function(n,r){t.setFromMatrixScale(this.matrixWorld),s.getInverse(this.modelViewMatrix).premultiply(this.matrixWorld),i.setFromMatrixPosition(this.modelViewMatrix);var l,g,f=this.material.rotation;0!==f&&(g=Math.cos(f),l=Math.sin(f));var y=this.center;m(o.set(-.5,-.5,0),i,y,t,l,g),m(h.set(.5,-.5,0),i,y,t,l,g),m(u.set(.5,.5,0),i,y,t,l,g),c.set(0,0),d.set(1,0),p.set(1,1);var E=n.ray.intersectTriangle(o,h,u,!1,e);if(null!==E||(m(h.set(-.5,.5,0),i,y,t,l,g),d.set(0,1),null!==(E=n.ray.intersectTriangle(o,u,h,!1,e)))){var v=n.ray.origin.distanceTo(e);v<n.near||v>n.far||r.push({distance:v,point:e.clone(),uv:ze.getUV(e,o,h,u,c,d,p,new a),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return se.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this}}),Qi.prototype=Object.assign(Object.create(se.prototype),{constructor:Qi,isLOD:!0,copy:function(e){se.prototype.copy.call(this,e,!1);for(var t=e.levels,i=0,n=t.length;i<n;i++){var r=t[i];this.addLevel(r.object.clone(),r.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var i=this.levels,n=0;n<i.length&&!(t<i[n].distance);n++);return i.splice(n,0,{distance:t,object:e}),this.add(e),this},getObjectForDistance:function(e){for(var t=this.levels,i=1,n=t.length;i<n&&!(e<t[i].distance);i++);return t[i-1].object},raycast:(Ni=new l,function(e,t){Ni.setFromMatrixPosition(this.matrixWorld);var i=e.ray.origin.distanceTo(Ni);this.getObjectForDistance(i).raycast(e,t)}),update:function(){var e=new l,t=new l;return function(i){var n=this.levels;if(n.length>1){e.setFromMatrixPosition(i.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var r=e.distanceTo(t);n[0].object.visible=!0;for(var s=1,a=n.length;s<a&&r>=n[s].distance;s++)n[s-1].object.visible=!1,n[s].object.visible=!0;for(;s<a;s++)n[s].object.visible=!1}}}(),toJSON:function(e){var t=se.prototype.toJSON.call(this,e);t.object.levels=[];for(var i=this.levels,n=0,r=i.length;n<r;n++){var s=i[n];t.object.levels.push({object:s.object.uuid,distance:s.distance})}return t}}),Ki.prototype=Object.assign(Object.create(We.prototype),{constructor:Ki,isSkinnedMesh:!0,bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var e=new P,t=this.geometry.attributes.skinWeight,i=0,n=t.count;i<n;i++){e.x=t.getX(i),e.y=t.getY(i),e.z=t.getZ(i),e.w=t.getW(i);var r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(e){We.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Object.assign(Zi.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var i=new B;this.bones[e]&&i.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(i)}},pose:function(){var e,t,i;for(t=0,i=this.bones.length;t<i;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,i=this.bones.length;t<i;t++)(e=this.bones[t])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:(Mi=new B,ki=new B,function(){for(var e=this.bones,t=this.boneInverses,i=this.boneMatrices,n=this.boneTexture,r=0,s=e.length;r<s;r++){var a=e[r]?e[r].matrixWorld:ki;Mi.multiplyMatrices(a,t[r]),Mi.toArray(i,16*r)}void 0!==n&&(n.needsUpdate=!0)}),clone:function(){return new Zi(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,i=this.bones.length;t<i;t++){var n=this.bones[t];if(n.name===e)return n}}}),Ji.prototype=Object.assign(Object.create(se.prototype),{constructor:Ji,isBone:!0}),$i.prototype=Object.create(Ve.prototype),$i.prototype.constructor=$i,$i.prototype.isLineBasicMaterial=!0,$i.prototype.copy=function(e){return Ve.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},en.prototype=Object.assign(Object.create(se.prototype),{constructor:en,isLine:!0,computeLineDistances:(Li=new l,Ii=new l,function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,i=[0],n=1,r=t.count;n<r;n++)Li.fromBufferAttribute(t,n-1),Ii.fromBufferAttribute(t,n),i[n]=i[n-1],i[n]+=Li.distanceTo(Ii);e.addAttribute("lineDistance",new Ee(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){var s=e.vertices;for((i=e.lineDistances)[0]=0,n=1,r=s.length;n<r;n++)i[n]=i[n-1],i[n]+=s[n-1].distanceTo(s[n])}return this}),raycast:function(){var e=new B,t=new Fe,i=new k;return function(n,r){var s=n.linePrecision,a=this.geometry,o=this.matrixWorld;if(null===a.boundingSphere&&a.computeBoundingSphere(),i.copy(a.boundingSphere),i.applyMatrix4(o),i.radius+=s,!1!==n.ray.intersectsSphere(i)){e.getInverse(o),t.copy(n.ray).applyMatrix4(e);var h=s/((this.scale.x+this.scale.y+this.scale.z)/3),u=h*h,c=new l,d=new l,p=new l,m=new l,g=this&&this.isLineSegments?2:1;if(a.isBufferGeometry){var f=a.index,y=a.attributes.position.array;if(null!==f)for(var E=f.array,v=0,A=E.length-1;v<A;v+=g){var b=E[v],S=E[v+1];if(c.fromArray(y,3*b),d.fromArray(y,3*S),!(t.distanceSqToSegment(c,d,m,p)>u))m.applyMatrix4(this.matrixWorld),(w=n.ray.origin.distanceTo(m))<n.near||w>n.far||r.push({distance:w,point:p.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}else for(v=0,A=y.length/3-1;v<A;v+=g){if(c.fromArray(y,3*v),d.fromArray(y,3*v+3),!(t.distanceSqToSegment(c,d,m,p)>u))m.applyMatrix4(this.matrixWorld),(w=n.ray.origin.distanceTo(m))<n.near||w>n.far||r.push({distance:w,point:p.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}else if(a.isGeometry){var _=a.vertices,x=_.length;for(v=0;v<x-1;v+=g){var w;if(!(t.distanceSqToSegment(_[v],_[v+1],m,p)>u))m.applyMatrix4(this.matrixWorld),(w=n.ray.origin.distanceTo(m))<n.near||w>n.far||r.push({distance:w,point:p.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),tn.prototype=Object.assign(Object.create(en.prototype),{constructor:tn,isLineSegments:!0,computeLineDistances:function(){var e=new l,t=new l;return function(){var i=this.geometry;if(i.isBufferGeometry)if(null===i.index){for(var n=i.attributes.position,r=[],s=0,a=n.count;s<a;s+=2)e.fromBufferAttribute(n,s),t.fromBufferAttribute(n,s+1),r[s]=0===s?0:r[s-1],r[s+1]=r[s]+e.distanceTo(t);i.addAttribute("lineDistance",new Ee(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(i.isGeometry){var o=i.vertices;for(r=i.lineDistances,s=0,a=o.length;s<a;s+=2)e.copy(o[s]),t.copy(o[s+1]),r[s]=0===s?0:r[s-1],r[s+1]=r[s]+e.distanceTo(t)}return this}}()}),nn.prototype=Object.assign(Object.create(en.prototype),{constructor:nn,isLineLoop:!0}),rn.prototype=Object.create(Ve.prototype),rn.prototype.constructor=rn,rn.prototype.isPointsMaterial=!0,rn.prototype.copy=function(e){return Ve.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this},sn.prototype=Object.assign(Object.create(se.prototype),{constructor:sn,isPoints:!0,raycast:function(){var e=new B,t=new Fe,i=new k;return function(n,r){var s=this,a=this.geometry,o=this.matrixWorld,h=n.params.Points.threshold;if(null===a.boundingSphere&&a.computeBoundingSphere(),i.copy(a.boundingSphere),i.applyMatrix4(o),i.radius+=h,!1!==n.ray.intersectsSphere(i)){e.getInverse(o),t.copy(n.ray).applyMatrix4(e);var u=h/((this.scale.x+this.scale.y+this.scale.z)/3),c=u*u,d=new l,p=new l;if(a.isBufferGeometry){var m=a.index,g=a.attributes.position.array;if(null!==m)for(var f=m.array,y=0,E=f.length;y<E;y++){var v=f[y];d.fromArray(g,3*v),S(d,v)}else{y=0;for(var A=g.length/3;y<A;y++)d.fromArray(g,3*y),S(d,y)}}else{var b=a.vertices;for(y=0,A=b.length;y<A;y++)S(b[y],y)}}function S(e,i){var a=t.distanceSqToPoint(e);if(a<c){t.closestPointToPoint(e,p),p.applyMatrix4(o);var l=n.ray.origin.distanceTo(p);if(l<n.near||l>n.far)return;r.push({distance:l,distanceToRay:Math.sqrt(a),point:p.clone(),index:i,face:null,object:s})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),an.prototype=Object.assign(Object.create(T.prototype),{constructor:an,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),on.prototype=Object.create(T.prototype),on.prototype.constructor=on,on.prototype.isCompressedTexture=!0,ln.prototype=Object.create(T.prototype),ln.prototype.constructor=ln,ln.prototype.isCanvasTexture=!0,hn.prototype=Object.create(T.prototype),hn.prototype.constructor=hn,hn.prototype.isDepthTexture=!0,un.prototype=Object.create(_e.prototype),un.prototype.constructor=un,cn.prototype=Object.create(he.prototype),cn.prototype.constructor=cn,dn.prototype=Object.create(_e.prototype),dn.prototype.constructor=dn,pn.prototype=Object.create(he.prototype),pn.prototype.constructor=pn,mn.prototype=Object.create(_e.prototype),mn.prototype.constructor=mn,gn.prototype=Object.create(he.prototype),gn.prototype.constructor=gn,fn.prototype=Object.create(mn.prototype),fn.prototype.constructor=fn,yn.prototype=Object.create(he.prototype),yn.prototype.constructor=yn,En.prototype=Object.create(mn.prototype),En.prototype.constructor=En,vn.prototype=Object.create(he.prototype),vn.prototype.constructor=vn,An.prototype=Object.create(mn.prototype),An.prototype.constructor=An,bn.prototype=Object.create(he.prototype),bn.prototype.constructor=bn,Sn.prototype=Object.create(mn.prototype),Sn.prototype.constructor=Sn,_n.prototype=Object.create(he.prototype),_n.prototype.constructor=_n,xn.prototype=Object.create(_e.prototype),xn.prototype.constructor=xn,xn.prototype.toJSON=function(){var e=_e.prototype.toJSON.call(this);return e.path=this.parameters.path.toJSON(),e},wn.prototype=Object.create(he.prototype),wn.prototype.constructor=wn,Tn.prototype=Object.create(_e.prototype),Tn.prototype.constructor=Tn,Pn.prototype=Object.create(he.prototype),Pn.prototype.constructor=Pn,Cn.prototype=Object.create(_e.prototype),Cn.prototype.constructor=Cn;var Vn=function(e,t,i){i=i||2;var n,r,s,a,o,l,h,u=t&&t.length,c=u?t[0]*i:e.length,d=Rn(e,0,c,i,!0),p=[];if(!d)return p;if(u&&(d=function(e,t,i,n){var r,s,a,o,l,h=[];for(r=0,s=t.length;r<s;r++)a=t[r]*n,o=r<s-1?t[r+1]*n:e.length,(l=Rn(e,a,o,n,!1))===l.next&&(l.steiner=!0),h.push(Yn(l));for(h.sort(Dn),r=0;r<h.length;r++)On(h[r],i),i=Nn(i,i.next);return i}(e,t,d,i)),e.length>80*i){n=s=e[0],r=a=e[1];for(var m=i;m<c;m+=i)(o=e[m])<n&&(n=o),(l=e[m+1])<r&&(r=l),o>s&&(s=o),l>a&&(a=l);h=0!==(h=Math.max(s-n,a-r))?1/h:0}return Mn(d,p,i,n,r,h),p};function Rn(e,t,i,n,r){var s,a;if(r===function(e,t,i,n){for(var r=0,s=t,a=i-n;s<i;s+=n)r+=(e[a]-e[s])*(e[s+1]+e[a+1]),a=s;return r}(e,t,i,n)>0)for(s=t;s<i;s+=n)a=jn(s,e[s],e[s+1],a);else for(s=i-n;s>=t;s-=n)a=jn(s,e[s],e[s+1],a);return a&&zn(a,a.next)&&(Qn(a),a=a.next),a}function Nn(e,t){if(!e)return e;t||(t=e);var i,n=e;do{if(i=!1,n.steiner||!zn(n,n.next)&&0!==Fn(n.prev,n,n.next))n=n.next;else{if(Qn(n),(n=t=n.prev)===n.next)break;i=!0}}while(i||n!==t);return t}function Mn(e,t,i,n,r,s,a){if(e){!a&&s&&function(e,t,i,n){var r=e;do{null===r.z&&(r.z=qn(r.x,r.y,t,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){var t,i,n,r,s,a,o,l,h=1;do{for(i=e,e=null,s=null,a=0;i;){for(a++,n=i,o=0,t=0;t<h&&(o++,n=n.nextZ);t++);for(l=h;o>0||l>0&&n;)0!==o&&(0===l||!n||i.z<=n.z)?(r=i,i=i.nextZ,o--):(r=n,n=n.nextZ,l--),s?s.nextZ=r:e=r,r.prevZ=s,s=r;i=n}s.nextZ=null,h*=2}while(a>1)}(r)}(e,n,r,s);for(var o,l,h=e;e.prev!==e.next;)if(o=e.prev,l=e.next,s?Ln(e,n,r,s):kn(e))t.push(o.i/i),t.push(e.i/i),t.push(l.i/i),Qn(e),e=l.next,h=l.next;else if((e=l)===h){a?1===a?Mn(e=In(e,t,i),t,i,n,r,s,2):2===a&&Bn(e,t,i,n,r,s):Mn(Nn(e),t,i,n,r,s,1);break}}}function kn(e){var t=e.prev,i=e,n=e.next;if(Fn(t,i,n)>=0)return!1;for(var r=e.next.next;r!==e.prev;){if(Hn(t.x,t.y,i.x,i.y,n.x,n.y,r.x,r.y)&&Fn(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function Ln(e,t,i,n){var r=e.prev,s=e,a=e.next;if(Fn(r,s,a)>=0)return!1;for(var o=r.x<s.x?r.x<a.x?r.x:a.x:s.x<a.x?s.x:a.x,l=r.y<s.y?r.y<a.y?r.y:a.y:s.y<a.y?s.y:a.y,h=r.x>s.x?r.x>a.x?r.x:a.x:s.x>a.x?s.x:a.x,u=r.y>s.y?r.y>a.y?r.y:a.y:s.y>a.y?s.y:a.y,c=qn(o,l,t,i,n),d=qn(h,u,t,i,n),p=e.nextZ;p&&p.z<=d;){if(p!==e.prev&&p!==e.next&&Hn(r.x,r.y,s.x,s.y,a.x,a.y,p.x,p.y)&&Fn(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(p=e.prevZ;p&&p.z>=c;){if(p!==e.prev&&p!==e.next&&Hn(r.x,r.y,s.x,s.y,a.x,a.y,p.x,p.y)&&Fn(p.prev,p,p.next)>=0)return!1;p=p.prevZ}return!0}function In(e,t,i){var n=e;do{var r=n.prev,s=n.next.next;!zn(r,s)&&Un(r,n,n.next,s)&&Wn(r,s)&&Wn(s,r)&&(t.push(r.i/i),t.push(n.i/i),t.push(s.i/i),Qn(n),Qn(n.next),n=e=s),n=n.next}while(n!==e);return n}function Bn(e,t,i,n,r,s){var a=e;do{for(var o=a.next.next;o!==a.prev;){if(a.i!==o.i&&Gn(a,o)){var l=Xn(a,o);return a=Nn(a,a.next),l=Nn(l,l.next),Mn(a,t,i,n,r,s),void Mn(l,t,i,n,r,s)}o=o.next}a=a.next}while(a!==e)}function Dn(e,t){return e.x-t.x}function On(e,t){if(t=function(e,t){var i,n=t,r=e.x,s=e.y,a=-1/0;do{if(s<=n.y&&s>=n.next.y&&n.next.y!==n.y){var o=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(o<=r&&o>a){if(a=o,o===r){if(s===n.y)return n;if(s===n.next.y)return n.next}i=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!i)return null;if(r===a)return i.prev;var l,h=i,u=i.x,c=i.y,d=1/0;n=i.next;for(;n!==h;)r>=n.x&&n.x>=u&&r!==n.x&&Hn(s<c?r:a,s,u,c,s<c?a:r,s,n.x,n.y)&&((l=Math.abs(s-n.y)/(r-n.x))<d||l===d&&n.x>i.x)&&Wn(n,e)&&(i=n,d=l),n=n.next;return i}(e,t)){var i=Xn(t,e);Nn(i,i.next)}}function qn(e,t,i,n,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Yn(e){var t=e,i=e;do{t.x<i.x&&(i=t),t=t.next}while(t!==e);return i}function Hn(e,t,i,n,r,s,a,o){return(r-a)*(t-o)-(e-a)*(s-o)>=0&&(e-a)*(n-o)-(i-a)*(t-o)>=0&&(i-a)*(s-o)-(r-a)*(n-o)>=0}function Gn(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&Un(i,i.next,e,t))return!0;i=i.next}while(i!==e);return!1}(e,t)&&Wn(e,t)&&Wn(t,e)&&function(e,t){var i=e,n=!1,r=(e.x+t.x)/2,s=(e.y+t.y)/2;do{i.y>s!=i.next.y>s&&i.next.y!==i.y&&r<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==e);return n}(e,t)}function Fn(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function zn(e,t){return e.x===t.x&&e.y===t.y}function Un(e,t,i,n){return!!(zn(e,t)&&zn(i,n)||zn(e,n)&&zn(i,t))||Fn(e,t,i)>0!=Fn(e,t,n)>0&&Fn(i,n,e)>0!=Fn(i,n,t)>0}function Wn(e,t){return Fn(e.prev,e,e.next)<0?Fn(e,t,e.next)>=0&&Fn(e,e.prev,t)>=0:Fn(e,t,e.prev)<0||Fn(e,e.next,t)<0}function Xn(e,t){var i=new Kn(e.i,e.x,e.y),n=new Kn(t.i,t.x,t.y),r=e.next,s=t.prev;return e.next=t,t.prev=e,i.next=r,r.prev=i,n.next=i,i.prev=n,s.next=n,n.prev=s,n}function jn(e,t,i,n){var r=new Kn(e,t,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function Qn(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Kn(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var Zn={area:function(e){for(var t=e.length,i=0,n=t-1,r=0;r<t;n=r++)i+=e[n].x*e[r].y-e[r].x*e[n].y;return.5*i},isClockWise:function(e){return Zn.area(e)<0},triangulateShape:function(e,t){var i=[],n=[],r=[];Jn(e),$n(i,e);var s=e.length;t.forEach(Jn);for(var a=0;a<t.length;a++)n.push(s),s+=t[a].length,$n(i,t[a]);var o=Vn(i,n);for(a=0;a<o.length;a+=3)r.push(o.slice(a,a+3));return r}};function Jn(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function $n(e,t){for(var i=0;i<t.length;i++)e.push(t[i].x),e.push(t[i].y)}function er(e,t){he.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new tr(e,t)),this.mergeVertices()}function tr(e,t){_e.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];for(var i=this,n=[],r=[],s=0,o=e.length;s<o;s++){h(e[s])}function h(e){var s=[],o=void 0!==t.curveSegments?t.curveSegments:12,h=void 0!==t.steps?t.steps:1,u=void 0!==t.depth?t.depth:100,c=void 0===t.bevelEnabled||t.bevelEnabled,d=void 0!==t.bevelThickness?t.bevelThickness:6,p=void 0!==t.bevelSize?t.bevelSize:d-2,m=void 0!==t.bevelOffset?t.bevelOffset:0,g=void 0!==t.bevelSegments?t.bevelSegments:3,f=t.extrudePath,y=void 0!==t.UVGenerator?t.UVGenerator:ir;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),u=t.amount);var E,v,A,b,S,_,x,w,T=!1;f&&(E=f.getSpacedPoints(h),T=!0,c=!1,v=f.computeFrenetFrames(h,!1),A=new l,b=new l,S=new l),c||(g=0,d=0,p=0,m=0);var P=e.extractPoints(o),C=P.shape,V=P.holes;if(!Zn.isClockWise(C))for(C=C.reverse(),x=0,w=V.length;x<w;x++)_=V[x],Zn.isClockWise(_)&&(V[x]=_.reverse());var R=Zn.triangulateShape(C,V),N=C;for(x=0,w=V.length;x<w;x++)_=V[x],C=C.concat(_);function M(e,t,i){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(i).add(e)}var k,L,I,B,D,O,q=C.length,Y=R.length;function H(e,t,i){var n,r,s,o=e.x-t.x,l=e.y-t.y,h=i.x-e.x,u=i.y-e.y,c=o*o+l*l,d=o*u-l*h;if(Math.abs(d)>Number.EPSILON){var p=Math.sqrt(c),m=Math.sqrt(h*h+u*u),g=t.x-l/p,f=t.y+o/p,y=((i.x-u/m-g)*u-(i.y+h/m-f)*h)/(o*u-l*h),E=(n=g+o*y-e.x)*n+(r=f+l*y-e.y)*r;if(E<=2)return new a(n,r);s=Math.sqrt(E/2)}else{var v=!1;o>Number.EPSILON?h>Number.EPSILON&&(v=!0):o<-Number.EPSILON?h<-Number.EPSILON&&(v=!0):Math.sign(l)===Math.sign(u)&&(v=!0),v?(n=-l,r=o,s=Math.sqrt(c)):(n=o,r=l,s=Math.sqrt(c/2))}return new a(n/s,r/s)}for(var G=[],F=0,z=N.length,U=z-1,W=F+1;F<z;F++,U++,W++)U===z&&(U=0),W===z&&(W=0),G[F]=H(N[F],N[U],N[W]);var X,j,Q=[],K=G.concat();for(x=0,w=V.length;x<w;x++){for(_=V[x],X=[],F=0,U=(z=_.length)-1,W=F+1;F<z;F++,U++,W++)U===z&&(U=0),W===z&&(W=0),X[F]=H(_[F],_[U],_[W]);Q.push(X),K=K.concat(X)}for(k=0;k<g;k++){for(I=k/g,B=d*Math.cos(I*Math.PI/2),L=p*Math.sin(I*Math.PI/2)+m,F=0,z=N.length;F<z;F++)J((D=M(N[F],G[F],L)).x,D.y,-B);for(x=0,w=V.length;x<w;x++)for(_=V[x],X=Q[x],F=0,z=_.length;F<z;F++)J((D=M(_[F],X[F],L)).x,D.y,-B)}for(L=p+m,F=0;F<q;F++)D=c?M(C[F],K[F],L):C[F],T?(b.copy(v.normals[0]).multiplyScalar(D.x),A.copy(v.binormals[0]).multiplyScalar(D.y),S.copy(E[0]).add(b).add(A),J(S.x,S.y,S.z)):J(D.x,D.y,0);for(j=1;j<=h;j++)for(F=0;F<q;F++)D=c?M(C[F],K[F],L):C[F],T?(b.copy(v.normals[j]).multiplyScalar(D.x),A.copy(v.binormals[j]).multiplyScalar(D.y),S.copy(E[j]).add(b).add(A),J(S.x,S.y,S.z)):J(D.x,D.y,u/h*j);for(k=g-1;k>=0;k--){for(I=k/g,B=d*Math.cos(I*Math.PI/2),L=p*Math.sin(I*Math.PI/2)+m,F=0,z=N.length;F<z;F++)J((D=M(N[F],G[F],L)).x,D.y,u+B);for(x=0,w=V.length;x<w;x++)for(_=V[x],X=Q[x],F=0,z=_.length;F<z;F++)D=M(_[F],X[F],L),T?J(D.x,D.y+E[h-1].y,E[h-1].x+B):J(D.x,D.y,u+B)}function Z(e,t){var i,n;for(F=e.length;--F>=0;){i=F,(n=F-1)<0&&(n=e.length-1);var r=0,s=h+2*g;for(r=0;r<s;r++){var a=q*r,o=q*(r+1);ee(t+i+a,t+n+a,t+n+o,t+i+o)}}}function J(e,t,i){s.push(e),s.push(t),s.push(i)}function $(e,t,r){te(e),te(t),te(r);var s=n.length/3,a=y.generateTopUV(i,n,s-3,s-2,s-1);ie(a[0]),ie(a[1]),ie(a[2])}function ee(e,t,r,s){te(e),te(t),te(s),te(t),te(r),te(s);var a=n.length/3,o=y.generateSideWallUV(i,n,a-6,a-3,a-2,a-1);ie(o[0]),ie(o[1]),ie(o[3]),ie(o[1]),ie(o[2]),ie(o[3])}function te(e){n.push(s[3*e+0]),n.push(s[3*e+1]),n.push(s[3*e+2])}function ie(e){r.push(e.x),r.push(e.y)}!function(){var e=n.length/3;if(c){var t=0,r=q*t;for(F=0;F<Y;F++)$((O=R[F])[2]+r,O[1]+r,O[0]+r);for(r=q*(t=h+2*g),F=0;F<Y;F++)$((O=R[F])[0]+r,O[1]+r,O[2]+r)}else{for(F=0;F<Y;F++)$((O=R[F])[2],O[1],O[0]);for(F=0;F<Y;F++)$((O=R[F])[0]+q*h,O[1]+q*h,O[2]+q*h)}i.addGroup(e,n.length/3-e,0)}(),function(){var e=n.length/3,t=0;for(Z(N,t),t+=N.length,x=0,w=V.length;x<w;x++)Z(_=V[x],t),t+=_.length;i.addGroup(e,n.length/3-e,1)}()}this.addAttribute("position",new Ee(n,3)),this.addAttribute("uv",new Ee(r,2)),this.computeVertexNormals()}er.prototype=Object.create(he.prototype),er.prototype.constructor=er,er.prototype.toJSON=function(){var e=he.prototype.toJSON.call(this);return nr(this.parameters.shapes,this.parameters.options,e)},tr.prototype=Object.create(_e.prototype),tr.prototype.constructor=tr,tr.prototype.toJSON=function(){var e=_e.prototype.toJSON.call(this);return nr(this.parameters.shapes,this.parameters.options,e)};var ir={generateTopUV:function(e,t,i,n,r){var s=t[3*i],o=t[3*i+1],l=t[3*n],h=t[3*n+1],u=t[3*r],c=t[3*r+1];return[new a(s,o),new a(l,h),new a(u,c)]},generateSideWallUV:function(e,t,i,n,r,s){var o=t[3*i],l=t[3*i+1],h=t[3*i+2],u=t[3*n],c=t[3*n+1],d=t[3*n+2],p=t[3*r],m=t[3*r+1],g=t[3*r+2],f=t[3*s],y=t[3*s+1],E=t[3*s+2];return Math.abs(l-c)<.01?[new a(o,1-h),new a(u,1-d),new a(p,1-g),new a(f,1-E)]:[new a(l,1-h),new a(c,1-d),new a(m,1-g),new a(y,1-E)]}};function nr(e,t,i){if(i.shapes=[],Array.isArray(e))for(var n=0,r=e.length;n<r;n++){var s=e[n];i.shapes.push(s.uuid)}else i.shapes.push(e.uuid);return void 0!==t.extrudePath&&(i.options.extrudePath=t.extrudePath.toJSON()),i}function rr(e,t){he.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new sr(e,t)),this.mergeVertices()}function sr(e,t){var i=(t=t||{}).font;if(!i||!i.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new he;var n=i.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),tr.call(this,n,t),this.type="TextBufferGeometry"}function ar(e,t,i,n,r,s,a){he.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:n,phiLength:r,thetaStart:s,thetaLength:a},this.fromBufferGeometry(new or(e,t,i,n,r,s,a)),this.mergeVertices()}function or(e,t,i,n,r,s,a){_e.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:n,phiLength:r,thetaStart:s,thetaLength:a},e=e||1,t=Math.max(3,Math.floor(t)||8),i=Math.max(2,Math.floor(i)||6),n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var o,h,u=(s=void 0!==s?s:0)+(a=void 0!==a?a:Math.PI),c=0,d=[],p=new l,m=new l,g=[],f=[],y=[],E=[];for(h=0;h<=i;h++){var v=[],A=h/i,b=0==h?.5/t:h==i?-.5/t:0;for(o=0;o<=t;o++){var S=o/t;p.x=-e*Math.cos(n+S*r)*Math.sin(s+A*a),p.y=e*Math.cos(s+A*a),p.z=e*Math.sin(n+S*r)*Math.sin(s+A*a),f.push(p.x,p.y,p.z),m.copy(p).normalize(),y.push(m.x,m.y,m.z),E.push(S+b,1-A),v.push(c++)}d.push(v)}for(h=0;h<i;h++)for(o=0;o<t;o++){var _=d[h][o+1],x=d[h][o],w=d[h+1][o],T=d[h+1][o+1];(0!==h||s>0)&&g.push(_,x,T),(h!==i-1||u<Math.PI)&&g.push(x,w,T)}this.setIndex(g),this.addAttribute("position",new Ee(f,3)),this.addAttribute("normal",new Ee(y,3)),this.addAttribute("uv",new Ee(E,2))}function lr(e,t,i,n,r,s){he.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:n,thetaStart:r,thetaLength:s},this.fromBufferGeometry(new hr(e,t,i,n,r,s)),this.mergeVertices()}function hr(e,t,i,n,r,s){_e.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:n,thetaStart:r,thetaLength:s},e=e||.5,t=t||1,r=void 0!==r?r:0,s=void 0!==s?s:2*Math.PI,i=void 0!==i?Math.max(3,i):8;var o,h,u,c=[],d=[],p=[],m=[],g=e,f=(t-e)/(n=void 0!==n?Math.max(1,n):1),y=new l,E=new a;for(h=0;h<=n;h++){for(u=0;u<=i;u++)o=r+u/i*s,y.x=g*Math.cos(o),y.y=g*Math.sin(o),d.push(y.x,y.y,y.z),p.push(0,0,1),E.x=(y.x/t+1)/2,E.y=(y.y/t+1)/2,m.push(E.x,E.y);g+=f}for(h=0;h<n;h++){var v=h*(i+1);for(u=0;u<i;u++){var A=o=u+v,b=o+i+1,S=o+i+2,_=o+1;c.push(A,b,_),c.push(b,S,_)}}this.setIndex(c),this.addAttribute("position",new Ee(d,3)),this.addAttribute("normal",new Ee(p,3)),this.addAttribute("uv",new Ee(m,2))}function ur(e,t,i,n){he.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:n},this.fromBufferGeometry(new cr(e,t,i,n)),this.mergeVertices()}function cr(e,t,i,n){_e.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:n},t=Math.floor(t)||12,i=i||0,n=n||2*Math.PI,n=s.clamp(n,0,2*Math.PI);var r,o,h,u=[],c=[],d=[],p=1/t,m=new l,g=new a;for(o=0;o<=t;o++){var f=i+o*p*n,y=Math.sin(f),E=Math.cos(f);for(h=0;h<=e.length-1;h++)m.x=e[h].x*y,m.y=e[h].y,m.z=e[h].x*E,c.push(m.x,m.y,m.z),g.x=o/t,g.y=h/(e.length-1),d.push(g.x,g.y)}for(o=0;o<t;o++)for(h=0;h<e.length-1;h++){var v=r=h+o*e.length,A=r+e.length,b=r+e.length+1,S=r+1;u.push(v,A,S),u.push(A,b,S)}if(this.setIndex(u),this.addAttribute("position",new Ee(c,3)),this.addAttribute("uv",new Ee(d,2)),this.computeVertexNormals(),n===2*Math.PI){var _=this.attributes.normal.array,x=new l,w=new l,T=new l;for(r=t*e.length*3,o=0,h=0;o<e.length;o++,h+=3)x.x=_[h+0],x.y=_[h+1],x.z=_[h+2],w.x=_[r+h+0],w.y=_[r+h+1],w.z=_[r+h+2],T.addVectors(x,w).normalize(),_[h+0]=_[r+h+0]=T.x,_[h+1]=_[r+h+1]=T.y,_[h+2]=_[r+h+2]=T.z}}function dr(e,t){he.call(this),this.type="ShapeGeometry","object"==typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new pr(e,t)),this.mergeVertices()}function pr(e,t){_e.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var i=[],n=[],r=[],s=[],a=0,o=0;if(!1===Array.isArray(e))h(e);else for(var l=0;l<e.length;l++)h(e[l]),this.addGroup(a,o,l),a+=o,o=0;function h(e){var a,l,h,u=n.length/3,c=e.extractPoints(t),d=c.shape,p=c.holes;for(!1===Zn.isClockWise(d)&&(d=d.reverse()),a=0,l=p.length;a<l;a++)h=p[a],!0===Zn.isClockWise(h)&&(p[a]=h.reverse());var m=Zn.triangulateShape(d,p);for(a=0,l=p.length;a<l;a++)h=p[a],d=d.concat(h);for(a=0,l=d.length;a<l;a++){var g=d[a];n.push(g.x,g.y,0),r.push(0,0,1),s.push(g.x,g.y)}for(a=0,l=m.length;a<l;a++){var f=m[a],y=f[0]+u,E=f[1]+u,v=f[2]+u;i.push(y,E,v),o+=3}}this.setIndex(i),this.addAttribute("position",new Ee(n,3)),this.addAttribute("normal",new Ee(r,3)),this.addAttribute("uv",new Ee(s,2))}function mr(e,t){if(t.shapes=[],Array.isArray(e))for(var i=0,n=e.length;i<n;i++){var r=e[i];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}function gr(e,t){_e.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var i,n,r,a,o=[],l=Math.cos(s.DEG2RAD*t),h=[0,0],u={},c=["a","b","c"];e.isBufferGeometry?(a=new he).fromBufferGeometry(e):a=e.clone(),a.mergeVertices(),a.computeFaceNormals();for(var d=a.vertices,p=a.faces,m=0,g=p.length;m<g;m++)for(var f=p[m],y=0;y<3;y++)i=f[c[y]],n=f[c[(y+1)%3]],h[0]=Math.min(i,n),h[1]=Math.max(i,n),void 0===u[r=h[0]+","+h[1]]?u[r]={index1:h[0],index2:h[1],face1:m,face2:void 0}:u[r].face2=m;for(r in u){var E=u[r];if(void 0===E.face2||p[E.face1].normal.dot(p[E.face2].normal)<=l){var v=d[E.index1];o.push(v.x,v.y,v.z),v=d[E.index2],o.push(v.x,v.y,v.z)}}this.addAttribute("position",new Ee(o,3))}function fr(e,t,i,n,r,s,a,o){he.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:n,heightSegments:r,openEnded:s,thetaStart:a,thetaLength:o},this.fromBufferGeometry(new yr(e,t,i,n,r,s,a,o)),this.mergeVertices()}function yr(e,t,i,n,r,s,o,h){_e.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:n,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:h};var u=this;e=void 0!==e?e:1,t=void 0!==t?t:1,i=i||1,n=Math.floor(n)||8,r=Math.floor(r)||1,s=void 0!==s&&s,o=void 0!==o?o:0,h=void 0!==h?h:2*Math.PI;var c=[],d=[],p=[],m=[],g=0,f=[],y=i/2,E=0;function v(i){var r,s,f,v=new a,A=new l,b=0,S=!0===i?e:t,_=!0===i?1:-1;for(s=g,r=1;r<=n;r++)d.push(0,y*_,0),p.push(0,_,0),m.push(.5,.5),g++;for(f=g,r=0;r<=n;r++){var x=r/n*h+o,w=Math.cos(x),T=Math.sin(x);A.x=S*T,A.y=y*_,A.z=S*w,d.push(A.x,A.y,A.z),p.push(0,_,0),v.x=.5*w+.5,v.y=.5*T*_+.5,m.push(v.x,v.y),g++}for(r=0;r<n;r++){var P=s+r,C=f+r;!0===i?c.push(C,C+1,P):c.push(C+1,C,P),b+=3}u.addGroup(E,b,!0===i?1:2),E+=b}!function(){var s,a,v=new l,A=new l,b=0,S=(t-e)/i;for(a=0;a<=r;a++){var _=[],x=a/r,w=x*(t-e)+e;for(s=0;s<=n;s++){var T=s/n,P=T*h+o,C=Math.sin(P),V=Math.cos(P);A.x=w*C,A.y=-x*i+y,A.z=w*V,d.push(A.x,A.y,A.z),v.set(C,S,V).normalize(),p.push(v.x,v.y,v.z),m.push(T,1-x),_.push(g++)}f.push(_)}for(s=0;s<n;s++)for(a=0;a<r;a++){var R=f[a][s],N=f[a+1][s],M=f[a+1][s+1],k=f[a][s+1];c.push(R,N,k),c.push(N,M,k),b+=6}u.addGroup(E,b,0),E+=b}(),!1===s&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(c),this.addAttribute("position",new Ee(d,3)),this.addAttribute("normal",new Ee(p,3)),this.addAttribute("uv",new Ee(m,2))}function Er(e,t,i,n,r,s,a){fr.call(this,0,e,t,i,n,r,s,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:n,openEnded:r,thetaStart:s,thetaLength:a}}function vr(e,t,i,n,r,s,a){yr.call(this,0,e,t,i,n,r,s,a),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:n,openEnded:r,thetaStart:s,thetaLength:a}}function Ar(e,t,i,n){he.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:n},this.fromBufferGeometry(new br(e,t,i,n)),this.mergeVertices()}function br(e,t,i,n){_e.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:n},e=e||1,t=void 0!==t?Math.max(3,t):8,i=void 0!==i?i:0,n=void 0!==n?n:2*Math.PI;var r,s,o=[],h=[],u=[],c=[],d=new l,p=new a;for(h.push(0,0,0),u.push(0,0,1),c.push(.5,.5),s=0,r=3;s<=t;s++,r+=3){var m=i+s/t*n;d.x=e*Math.cos(m),d.y=e*Math.sin(m),h.push(d.x,d.y,d.z),u.push(0,0,1),p.x=(h[r]/e+1)/2,p.y=(h[r+1]/e+1)/2,c.push(p.x,p.y)}for(r=1;r<=t;r++)o.push(r,r+1,0);this.setIndex(o),this.addAttribute("position",new Ee(h,3)),this.addAttribute("normal",new Ee(u,3)),this.addAttribute("uv",new Ee(c,2))}rr.prototype=Object.create(he.prototype),rr.prototype.constructor=rr,sr.prototype=Object.create(tr.prototype),sr.prototype.constructor=sr,ar.prototype=Object.create(he.prototype),ar.prototype.constructor=ar,or.prototype=Object.create(_e.prototype),or.prototype.constructor=or,lr.prototype=Object.create(he.prototype),lr.prototype.constructor=lr,hr.prototype=Object.create(_e.prototype),hr.prototype.constructor=hr,ur.prototype=Object.create(he.prototype),ur.prototype.constructor=ur,cr.prototype=Object.create(_e.prototype),cr.prototype.constructor=cr,dr.prototype=Object.create(he.prototype),dr.prototype.constructor=dr,dr.prototype.toJSON=function(){var e=he.prototype.toJSON.call(this);return mr(this.parameters.shapes,e)},pr.prototype=Object.create(_e.prototype),pr.prototype.constructor=pr,pr.prototype.toJSON=function(){var e=_e.prototype.toJSON.call(this);return mr(this.parameters.shapes,e)},gr.prototype=Object.create(_e.prototype),gr.prototype.constructor=gr,fr.prototype=Object.create(he.prototype),fr.prototype.constructor=fr,yr.prototype=Object.create(_e.prototype),yr.prototype.constructor=yr,Er.prototype=Object.create(fr.prototype),Er.prototype.constructor=Er,vr.prototype=Object.create(yr.prototype),vr.prototype.constructor=vr,Ar.prototype=Object.create(he.prototype),Ar.prototype.constructor=Ar,br.prototype=Object.create(_e.prototype),br.prototype.constructor=br;var Sr=Object.freeze({WireframeGeometry:un,ParametricGeometry:cn,ParametricBufferGeometry:dn,TetrahedronGeometry:gn,TetrahedronBufferGeometry:fn,OctahedronGeometry:yn,OctahedronBufferGeometry:En,IcosahedronGeometry:vn,IcosahedronBufferGeometry:An,DodecahedronGeometry:bn,DodecahedronBufferGeometry:Sn,PolyhedronGeometry:pn,PolyhedronBufferGeometry:mn,TubeGeometry:_n,TubeBufferGeometry:xn,TorusKnotGeometry:wn,TorusKnotBufferGeometry:Tn,TorusGeometry:Pn,TorusBufferGeometry:Cn,TextGeometry:rr,TextBufferGeometry:sr,SphereGeometry:ar,SphereBufferGeometry:or,RingGeometry:lr,RingBufferGeometry:hr,PlaneGeometry:Te,PlaneBufferGeometry:Pe,LatheGeometry:ur,LatheBufferGeometry:cr,ShapeGeometry:dr,ShapeBufferGeometry:pr,ExtrudeGeometry:er,ExtrudeBufferGeometry:tr,EdgesGeometry:gr,ConeGeometry:Er,ConeBufferGeometry:vr,CylinderGeometry:fr,CylinderBufferGeometry:yr,CircleGeometry:Ar,CircleBufferGeometry:br,BoxGeometry:xe,BoxBufferGeometry:we});function _r(e){Ve.call(this),this.type="ShadowMaterial",this.color=new U(0),this.transparent=!0,this.setValues(e)}function xr(e){Ge.call(this,e),this.type="RawShaderMaterial"}function wr(e){Ve.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new U(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new U(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new a(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Tr(e){wr.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)}function Pr(e){Ve.call(this),this.type="MeshPhongMaterial",this.color=new U(16777215),this.specular=new U(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new U(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new a(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Cr(e){Pr.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function Vr(e){Ve.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new a(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Rr(e){Ve.call(this),this.type="MeshLambertMaterial",this.color=new U(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new U(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Nr(e){Ve.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new U(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new a(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.lights=!1,this.setValues(e)}function Mr(e){$i.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}_r.prototype=Object.create(Ve.prototype),_r.prototype.constructor=_r,_r.prototype.isShadowMaterial=!0,_r.prototype.copy=function(e){return Ve.prototype.copy.call(this,e),this.color.copy(e.color),this},xr.prototype=Object.create(Ge.prototype),xr.prototype.constructor=xr,xr.prototype.isRawShaderMaterial=!0,wr.prototype=Object.create(Ve.prototype),wr.prototype.constructor=wr,wr.prototype.isMeshStandardMaterial=!0,wr.prototype.copy=function(e){return Ve.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Tr.prototype=Object.create(wr.prototype),Tr.prototype.constructor=Tr,Tr.prototype.isMeshPhysicalMaterial=!0,Tr.prototype.copy=function(e){return wr.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this},Pr.prototype=Object.create(Ve.prototype),Pr.prototype.constructor=Pr,Pr.prototype.isMeshPhongMaterial=!0,Pr.prototype.copy=function(e){return Ve.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Cr.prototype=Object.create(Pr.prototype),Cr.prototype.constructor=Cr,Cr.prototype.isMeshToonMaterial=!0,Cr.prototype.copy=function(e){return Pr.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},Vr.prototype=Object.create(Ve.prototype),Vr.prototype.constructor=Vr,Vr.prototype.isMeshNormalMaterial=!0,Vr.prototype.copy=function(e){return Ve.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Rr.prototype=Object.create(Ve.prototype),Rr.prototype.constructor=Rr,Rr.prototype.isMeshLambertMaterial=!0,Rr.prototype.copy=function(e){return Ve.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Nr.prototype=Object.create(Ve.prototype),Nr.prototype.constructor=Nr,Nr.prototype.isMeshMatcapMaterial=!0,Nr.prototype.copy=function(e){return Ve.prototype.copy.call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Mr.prototype=Object.create($i.prototype),Mr.prototype.constructor=Mr,Mr.prototype.isLineDashedMaterial=!0,Mr.prototype.copy=function(e){return $i.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var kr=Object.freeze({ShadowMaterial:_r,SpriteMaterial:Xi,RawShaderMaterial:xr,ShaderMaterial:Ge,PointsMaterial:rn,MeshPhysicalMaterial:Tr,MeshStandardMaterial:wr,MeshPhongMaterial:Pr,MeshToonMaterial:Cr,MeshNormalMaterial:Vr,MeshLambertMaterial:Rr,MeshDepthMaterial:Ai,MeshDistanceMaterial:bi,MeshBasicMaterial:Ue,MeshMatcapMaterial:Nr,LineDashedMaterial:Mr,LineBasicMaterial:$i,Material:Ve}),Lr={arraySlice:function(e,t,i){return Lr.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==i?i:e.length)):e.slice(t,i)},convertArray:function(e,t,i){return!e||!i&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,i=new Array(t),n=0;n!==t;++n)i[n]=n;return i.sort((function(t,i){return e[t]-e[i]})),i},sortedArray:function(e,t,i){for(var n=e.length,r=new e.constructor(n),s=0,a=0;a!==n;++s)for(var o=i[s]*t,l=0;l!==t;++l)r[a++]=e[o+l];return r},flattenJSON:function(e,t,i,n){for(var r=1,s=e[0];void 0!==s&&void 0===s[n];)s=e[r++];if(void 0!==s){var a=s[n];if(void 0!==a)if(Array.isArray(a))do{void 0!==(a=s[n])&&(t.push(s.time),i.push.apply(i,a)),s=e[r++]}while(void 0!==s);else if(void 0!==a.toArray)do{void 0!==(a=s[n])&&(t.push(s.time),a.toArray(i,i.length)),s=e[r++]}while(void 0!==s);else do{void 0!==(a=s[n])&&(t.push(s.time),i.push(a)),s=e[r++]}while(void 0!==s)}}};function Ir(e,t,i,n){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==n?n:new t.constructor(i),this.sampleValues=t,this.valueSize=i}function Br(e,t,i,n){Ir.call(this,e,t,i,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Dr(e,t,i,n){Ir.call(this,e,t,i,n)}function Or(e,t,i,n){Ir.call(this,e,t,i,n)}function qr(e,t,i,n){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Lr.convertArray(t,this.TimeBufferType),this.values=Lr.convertArray(i,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}function Yr(e,t,i){qr.call(this,e,t,i)}function Hr(e,t,i,n){qr.call(this,e,t,i,n)}function Gr(e,t,i,n){qr.call(this,e,t,i,n)}function Fr(e,t,i,n){Ir.call(this,e,t,i,n)}function zr(e,t,i,n){qr.call(this,e,t,i,n)}function Ur(e,t,i,n){qr.call(this,e,t,i,n)}function Wr(e,t,i,n){qr.call(this,e,t,i,n)}function Xr(e,t,i){this.name=e,this.tracks=i,this.duration=void 0!==t?t:-1,this.uuid=s.generateUUID(),this.duration<0&&this.resetDuration()}function jr(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Gr;case"vector":case"vector2":case"vector3":case"vector4":return Wr;case"color":return Hr;case"quaternion":return zr;case"bool":case"boolean":return Yr;case"string":return Ur}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){var i=[],n=[];Lr.flattenJSON(e.keys,i,n,"value"),e.times=i,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}Object.assign(Ir.prototype,{evaluate:function(e){var t=this.parameterPositions,i=this._cachedIndex,n=t[i],r=t[i-1];e:{t:{var s;i:{n:if(!(e<n)){for(var a=i+2;;){if(void 0===n){if(e<r)break n;return i=t.length,this._cachedIndex=i,this.afterEnd_(i-1,e,r)}if(i===a)break;if(r=n,e<(n=t[++i]))break t}s=t.length;break i}if(e>=r)break e;var o=t[1];e<o&&(i=2,r=o);for(a=i-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,e,n);if(i===a)break;if(n=r,e>=(r=t[--i-1]))break t}s=i,i=0}for(;i<s;){var l=i+s>>>1;e<t[l]?s=l:i=l+1}if(n=t[i],void 0===(r=t[i-1]))return this._cachedIndex=0,this.beforeStart_(0,e,n);if(void 0===n)return i=t.length,this._cachedIndex=i,this.afterEnd_(i-1,r,e)}this._cachedIndex=i,this.intervalChanged_(i,r,n)}return this.interpolate_(i,r,e,n)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,i=this.sampleValues,n=this.valueSize,r=e*n,s=0;s!==n;++s)t[s]=i[r+s];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(Ir.prototype,{beforeStart_:Ir.prototype.copySampleValue_,afterEnd_:Ir.prototype.copySampleValue_}),Br.prototype=Object.assign(Object.create(Ir.prototype),{constructor:Br,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(e,t,i){var n=this.parameterPositions,r=e-2,s=e+1,a=n[r],o=n[s];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:r=e,a=2*t-i;break;case 2402:a=t+n[r=n.length-2]-n[r+1];break;default:r=e,a=i}if(void 0===o)switch(this.getSettings_().endingEnd){case 2401:s=e,o=2*i-t;break;case 2402:s=1,o=i+n[1]-n[0];break;default:s=e-1,o=t}var l=.5*(i-t),h=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(o-i),this._offsetPrev=r*h,this._offsetNext=s*h},interpolate_:function(e,t,i,n){for(var r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=e*a,l=o-a,h=this._offsetPrev,u=this._offsetNext,c=this._weightPrev,d=this._weightNext,p=(i-t)/(n-t),m=p*p,g=m*p,f=-c*g+2*c*m-c*p,y=(1+c)*g+(-1.5-2*c)*m+(-.5+c)*p+1,E=(-1-d)*g+(1.5+d)*m+.5*p,v=d*g-d*m,A=0;A!==a;++A)r[A]=f*s[h+A]+y*s[l+A]+E*s[o+A]+v*s[u+A];return r}}),Dr.prototype=Object.assign(Object.create(Ir.prototype),{constructor:Dr,interpolate_:function(e,t,i,n){for(var r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=e*a,l=o-a,h=(i-t)/(n-t),u=1-h,c=0;c!==a;++c)r[c]=s[l+c]*u+s[o+c]*h;return r}}),Or.prototype=Object.assign(Object.create(Ir.prototype),{constructor:Or,interpolate_:function(e){return this.copySampleValue_(e-1)}}),Object.assign(qr,{toJSON:function(e){var t,i=e.constructor;if(void 0!==i.toJSON)t=i.toJSON(e);else{t={name:e.name,times:Lr.convertArray(e.times,Array),values:Lr.convertArray(e.values,Array)};var n=e.getInterpolation();n!==e.DefaultInterpolation&&(t.interpolation=n)}return t.type=e.ValueTypeName,t}}),Object.assign(qr.prototype,{constructor:qr,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(e){return new Or(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new Dr(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new Br(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,i=0,n=t.length;i!==n;++i)t[i]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,i=0,n=t.length;i!==n;++i)t[i]*=e;return this},trim:function(e,t){for(var i=this.times,n=i.length,r=0,s=n-1;r!==n&&i[r]<e;)++r;for(;-1!==s&&i[s]>t;)--s;if(++s,0!==r||s!==n){r>=s&&(r=(s=Math.max(s,1))-1);var a=this.getValueSize();this.times=Lr.arraySlice(i,r,s),this.values=Lr.arraySlice(this.values,r*a,s*a)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var i=this.times,n=this.values,r=i.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var s=null,a=0;a!==r;a++){var o=i[a];if("number"==typeof o&&isNaN(o)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,o),e=!1;break}if(null!==s&&s>o){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,o,s),e=!1;break}s=o}if(void 0!==n&&Lr.isTypedArray(n)){a=0;for(var l=n.length;a!==l;++a){var h=n[a];if(isNaN(h)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,h),e=!1;break}}}return e},optimize:function(){for(var e=this.times,t=this.values,i=this.getValueSize(),n=2302===this.getInterpolation(),r=1,s=e.length-1,a=1;a<s;++a){var o=!1,l=e[a];if(l!==e[a+1]&&(1!==a||l!==l[0]))if(n)o=!0;else for(var h=a*i,u=h-i,c=h+i,d=0;d!==i;++d){var p=t[h+d];if(p!==t[u+d]||p!==t[c+d]){o=!0;break}}if(o){if(a!==r){e[r]=e[a];var m=a*i,g=r*i;for(d=0;d!==i;++d)t[g+d]=t[m+d]}++r}}if(s>0){e[r]=e[s];for(m=s*i,g=r*i,d=0;d!==i;++d)t[g+d]=t[m+d];++r}return r!==e.length&&(this.times=Lr.arraySlice(e,0,r),this.values=Lr.arraySlice(t,0,r*i)),this},clone:function(){var e=Lr.arraySlice(this.times,0),t=Lr.arraySlice(this.values,0),i=new(0,this.constructor)(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}),Yr.prototype=Object.assign(Object.create(qr.prototype),{constructor:Yr,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Hr.prototype=Object.assign(Object.create(qr.prototype),{constructor:Hr,ValueTypeName:"color"}),Gr.prototype=Object.assign(Object.create(qr.prototype),{constructor:Gr,ValueTypeName:"number"}),Fr.prototype=Object.assign(Object.create(Ir.prototype),{constructor:Fr,interpolate_:function(e,t,i,n){for(var r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=e*a,h=(i-t)/(n-t),u=l+a;l!==u;l+=4)o.slerpFlat(r,0,s,l-a,s,l,h);return r}}),zr.prototype=Object.assign(Object.create(qr.prototype),{constructor:zr,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(e){return new Fr(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),Ur.prototype=Object.assign(Object.create(qr.prototype),{constructor:Ur,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Wr.prototype=Object.assign(Object.create(qr.prototype),{constructor:Wr,ValueTypeName:"vector"}),Object.assign(Xr,{parse:function(e){for(var t=[],i=e.tracks,n=1/(e.fps||1),r=0,s=i.length;r!==s;++r)t.push(jr(i[r]).scale(n));return new Xr(e.name,e.duration,t)},toJSON:function(e){for(var t=[],i=e.tracks,n={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid},r=0,s=i.length;r!==s;++r)t.push(qr.toJSON(i[r]));return n},CreateFromMorphTargetSequence:function(e,t,i,n){for(var r=t.length,s=[],a=0;a<r;a++){var o=[],l=[];o.push((a+r-1)%r,a,(a+1)%r),l.push(0,1,0);var h=Lr.getKeyframeOrder(o);o=Lr.sortedArray(o,1,h),l=Lr.sortedArray(l,1,h),n||0!==o[0]||(o.push(r),l.push(l[0])),s.push(new Gr(".morphTargetInfluences["+t[a].name+"]",o,l).scale(1/i))}return new Xr(e,-1,s)},findByName:function(e,t){var i=e;if(!Array.isArray(e)){var n=e;i=n.geometry&&n.geometry.animations||n.animations}for(var r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null},CreateClipsFromMorphTargetSequences:function(e,t,i){for(var n={},r=/^([\w-]*?)([\d]+)$/,s=0,a=e.length;s<a;s++){var o=e[s],l=o.name.match(r);if(l&&l.length>1){var h=n[c=l[1]];h||(n[c]=h=[]),h.push(o)}}var u=[];for(var c in n)u.push(Xr.CreateFromMorphTargetSequence(c,n[c],t,i));return u},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var i=function(e,t,i,n,r){if(0!==i.length){var s=[],a=[];Lr.flattenJSON(i,s,a,n),0!==s.length&&r.push(new e(t,s,a))}},n=[],r=e.name||"default",s=e.length||-1,a=e.fps||30,o=e.hierarchy||[],l=0;l<o.length;l++){var h=o[l].keys;if(h&&0!==h.length)if(h[0].morphTargets){for(var u={},c=0;c<h.length;c++)if(h[c].morphTargets)for(var d=0;d<h[c].morphTargets.length;d++)u[h[c].morphTargets[d]]=-1;for(var p in u){var m=[],g=[];for(d=0;d!==h[c].morphTargets.length;++d){var f=h[c];m.push(f.time),g.push(f.morphTarget===p?1:0)}n.push(new Gr(".morphTargetInfluence["+p+"]",m,g))}s=u.length*(a||1)}else{var y=".bones["+t[l].name+"]";i(Wr,y+".position",h,"pos",n),i(zr,y+".quaternion",h,"rot",n),i(Wr,y+".scale",h,"scl",n)}}return 0===n.length?null:new Xr(r,s,n)}}),Object.assign(Xr.prototype,{resetDuration:function(){for(var e=0,t=0,i=this.tracks.length;t!==i;++t){var n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this},clone:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new Xr(this.name,this.duration,e)}});var Qr={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function Kr(e,t,i){var n=this,r=!1,s=0,a=0,o=void 0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(e){a++,!1===r&&void 0!==n.onStart&&n.onStart(e,s,a),r=!0},this.itemEnd=function(e){s++,void 0!==n.onProgress&&n.onProgress(e,s,a),s===a&&(r=!1,void 0!==n.onLoad&&n.onLoad())},this.itemError=function(e){void 0!==n.onError&&n.onError(e)},this.resolveURL=function(e){return o?o(e):e},this.setURLModifier=function(e){return o=e,this}}var Zr=new Kr,Jr={};function $r(e){this.manager=void 0!==e?e:Zr}function es(e){this.manager=void 0!==e?e:Zr}function ts(e){this.manager=void 0!==e?e:Zr,this._parser=null}function is(e){this.manager=void 0!==e?e:Zr,this._parser=null}function ns(e){this.manager=void 0!==e?e:Zr}function rs(e){this.manager=void 0!==e?e:Zr}function ss(e){this.manager=void 0!==e?e:Zr}function as(){this.type="Curve",this.arcLengthDivisions=200}function os(e,t,i,n,r,s,a,o){as.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=i||1,this.yRadius=n||1,this.aStartAngle=r||0,this.aEndAngle=s||2*Math.PI,this.aClockwise=a||!1,this.aRotation=o||0}function ls(e,t,i,n,r,s){os.call(this,e,t,i,i,n,r,s),this.type="ArcCurve"}function hs(){var e=0,t=0,i=0,n=0;function r(r,s,a,o){e=r,t=a,i=-3*r+3*s-2*a-o,n=2*r-2*s+a+o}return{initCatmullRom:function(e,t,i,n,s){r(t,i,s*(i-e),s*(n-t))},initNonuniformCatmullRom:function(e,t,i,n,s,a,o){var l=(t-e)/s-(i-e)/(s+a)+(i-t)/a,h=(i-t)/a-(n-t)/(a+o)+(n-i)/o;r(t,i,l*=a,h*=a)},calc:function(r){var s=r*r;return e+t*r+i*s+n*(s*r)}}}Object.assign($r.prototype,{load:function(e,t,i,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,s=Qr.get(e);if(void 0!==s)return r.manager.itemStart(e),setTimeout((function(){t&&t(s),r.manager.itemEnd(e)}),0),s;if(void 0===Jr[e]){var a=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(a){var o=a[1],l=!!a[2],h=a[3];h=decodeURIComponent(h),l&&(h=atob(h));try{var u,c=(this.responseType||"").toLowerCase();switch(c){case"arraybuffer":case"blob":for(var d=new Uint8Array(h.length),p=0;p<h.length;p++)d[p]=h.charCodeAt(p);u="blob"===c?new Blob([d.buffer],{type:o}):d.buffer;break;case"document":var m=new DOMParser;u=m.parseFromString(h,o);break;case"json":u=JSON.parse(h);break;default:u=h}setTimeout((function(){t&&t(u),r.manager.itemEnd(e)}),0)}catch(y){setTimeout((function(){n&&n(y),r.manager.itemError(e),r.manager.itemEnd(e)}),0)}}else{Jr[e]=[],Jr[e].push({onLoad:t,onProgress:i,onError:n});var g=new XMLHttpRequest;for(var f in g.open("GET",e,!0),g.addEventListener("load",(function(t){var i=this.response;Qr.add(e,i);var n=Jr[e];if(delete Jr[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var s=0,a=n.length;s<a;s++){(o=n[s]).onLoad&&o.onLoad(i)}r.manager.itemEnd(e)}else{for(s=0,a=n.length;s<a;s++){var o;(o=n[s]).onError&&o.onError(t)}r.manager.itemError(e),r.manager.itemEnd(e)}}),!1),g.addEventListener("progress",(function(t){for(var i=Jr[e],n=0,r=i.length;n<r;n++){var s=i[n];s.onProgress&&s.onProgress(t)}}),!1),g.addEventListener("error",(function(t){var i=Jr[e];delete Jr[e];for(var n=0,s=i.length;n<s;n++){var a=i[n];a.onError&&a.onError(t)}r.manager.itemError(e),r.manager.itemEnd(e)}),!1),g.addEventListener("abort",(function(t){var i=Jr[e];delete Jr[e];for(var n=0,s=i.length;n<s;n++){var a=i[n];a.onError&&a.onError(t)}r.manager.itemError(e),r.manager.itemEnd(e)}),!1),void 0!==this.responseType&&(g.responseType=this.responseType),void 0!==this.withCredentials&&(g.withCredentials=this.withCredentials),g.overrideMimeType&&g.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)g.setRequestHeader(f,this.requestHeader[f]);g.send(null)}return r.manager.itemStart(e),g}Jr[e].push({onLoad:t,onProgress:i,onError:n})},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),Object.assign(es.prototype,{load:function(e,t,i,n){var r=this,s=new $r(r.manager);s.setPath(r.path),s.load(e,(function(e){t(r.parse(JSON.parse(e)))}),i,n)},parse:function(e){for(var t=[],i=0;i<e.length;i++){var n=Xr.parse(e[i]);t.push(n)}return t},setPath:function(e){return this.path=e,this}}),Object.assign(ts.prototype,{load:function(e,t,i,n){var r=this,s=[],a=new on;a.image=s;var o=new $r(this.manager);function l(l){o.load(e[l],(function(e){var i=r._parser(e,!0);s[l]={width:i.width,height:i.height,format:i.format,mipmaps:i.mipmaps},6===(h+=1)&&(1===i.mipmapCount&&(a.minFilter=1006),a.format=i.format,a.needsUpdate=!0,t&&t(a))}),i,n)}if(o.setPath(this.path),o.setResponseType("arraybuffer"),Array.isArray(e))for(var h=0,u=0,c=e.length;u<c;++u)l(u);else o.load(e,(function(e){var i=r._parser(e,!0);if(i.isCubemap)for(var n=i.mipmaps.length/i.mipmapCount,o=0;o<n;o++){s[o]={mipmaps:[]};for(var l=0;l<i.mipmapCount;l++)s[o].mipmaps.push(i.mipmaps[o*i.mipmapCount+l]),s[o].format=i.format,s[o].width=i.width,s[o].height=i.height}else a.image.width=i.width,a.image.height=i.height,a.mipmaps=i.mipmaps;1===i.mipmapCount&&(a.minFilter=1006),a.format=i.format,a.needsUpdate=!0,t&&t(a)}),i,n);return a},setPath:function(e){return this.path=e,this}}),Object.assign(is.prototype,{load:function(e,t,i,n){var r=this,s=new N,a=new $r(this.manager);return a.setResponseType("arraybuffer"),a.setPath(this.path),a.load(e,(function(e){var i=r._parser(e);i&&(void 0!==i.image?s.image=i.image:void 0!==i.data&&(s.image.width=i.width,s.image.height=i.height,s.image.data=i.data),s.wrapS=void 0!==i.wrapS?i.wrapS:1001,s.wrapT=void 0!==i.wrapT?i.wrapT:1001,s.magFilter=void 0!==i.magFilter?i.magFilter:1006,s.minFilter=void 0!==i.minFilter?i.minFilter:1008,s.anisotropy=void 0!==i.anisotropy?i.anisotropy:1,void 0!==i.format&&(s.format=i.format),void 0!==i.type&&(s.type=i.type),void 0!==i.mipmaps&&(s.mipmaps=i.mipmaps),1===i.mipmapCount&&(s.minFilter=1006),s.needsUpdate=!0,t&&t(s,i))}),i,n),s},setPath:function(e){return this.path=e,this}}),Object.assign(ns.prototype,{crossOrigin:"anonymous",load:function(e,t,i,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,s=Qr.get(e);if(void 0!==s)return r.manager.itemStart(e),setTimeout((function(){t&&t(s),r.manager.itemEnd(e)}),0),s;var a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function o(){a.removeEventListener("load",o,!1),a.removeEventListener("error",l,!1),Qr.add(e,this),t&&t(this),r.manager.itemEnd(e)}function l(t){a.removeEventListener("load",o,!1),a.removeEventListener("error",l,!1),n&&n(t),r.manager.itemError(e),r.manager.itemEnd(e)}return a.addEventListener("load",o,!1),a.addEventListener("error",l,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),r.manager.itemStart(e),a.src=e,a},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(rs.prototype,{crossOrigin:"anonymous",load:function(e,t,i,n){var r=new rt,s=new ns(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);var a=0;function o(i){s.load(e[i],(function(e){r.images[i]=e,6===++a&&(r.needsUpdate=!0,t&&t(r))}),void 0,n)}for(var l=0;l<e.length;++l)o(l);return r},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(ss.prototype,{crossOrigin:"anonymous",load:function(e,t,i,n){var r=new T,s=new ns(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,(function(i){r.image=i;var n=e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/);r.format=n?1022:1023,r.needsUpdate=!0,void 0!==t&&t(r)}),i,n),r},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(as.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){var i=this.getUtoTmapping(e);return this.getPoint(i,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],i=0;i<=e;i++)t.push(this.getPoint(i/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,i,n=[],r=this.getPoint(0),s=0;for(n.push(0),i=1;i<=e;i++)s+=(t=this.getPoint(i/e)).distanceTo(r),n.push(s),r=t;return this.cacheArcLengths=n,n},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var i,n=this.getLengths(),r=0,s=n.length;i=t||e*n[s-1];for(var a,o=0,l=s-1;o<=l;)if((a=n[r=Math.floor(o+(l-o)/2)]-i)<0)o=r+1;else{if(!(a>0)){l=r;break}l=r-1}if(n[r=l]===i)return r/(s-1);var h=n[r];return(r+(i-h)/(n[r+1]-h))/(s-1)},getTangent:function(e){var t=e-1e-4,i=e+1e-4;t<0&&(t=0),i>1&&(i=1);var n=this.getPoint(t);return this.getPoint(i).clone().sub(n).normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var i,n,r,a=new l,o=[],h=[],u=[],c=new l,d=new B;for(i=0;i<=e;i++)n=i/e,o[i]=this.getTangentAt(n),o[i].normalize();h[0]=new l,u[0]=new l;var p=Number.MAX_VALUE,m=Math.abs(o[0].x),g=Math.abs(o[0].y),f=Math.abs(o[0].z);for(m<=p&&(p=m,a.set(1,0,0)),g<=p&&(p=g,a.set(0,1,0)),f<=p&&a.set(0,0,1),c.crossVectors(o[0],a).normalize(),h[0].crossVectors(o[0],c),u[0].crossVectors(o[0],h[0]),i=1;i<=e;i++)h[i]=h[i-1].clone(),u[i]=u[i-1].clone(),c.crossVectors(o[i-1],o[i]),c.length()>Number.EPSILON&&(c.normalize(),r=Math.acos(s.clamp(o[i-1].dot(o[i]),-1,1)),h[i].applyMatrix4(d.makeRotationAxis(c,r))),u[i].crossVectors(o[i],h[i]);if(!0===t)for(r=Math.acos(s.clamp(h[0].dot(h[e]),-1,1)),r/=e,o[0].dot(c.crossVectors(h[0],h[e]))>0&&(r=-r),i=1;i<=e;i++)h[i].applyMatrix4(d.makeRotationAxis(o[i],r*i)),u[i].crossVectors(o[i],h[i]);return{tangents:o,normals:h,binormals:u}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),os.prototype=Object.create(as.prototype),os.prototype.constructor=os,os.prototype.isEllipseCurve=!0,os.prototype.getPoint=function(e,t){for(var i=t||new a,n=2*Math.PI,r=this.aEndAngle-this.aStartAngle,s=Math.abs(r)<Number.EPSILON;r<0;)r+=n;for(;r>n;)r-=n;r<Number.EPSILON&&(r=s?0:n),!0!==this.aClockwise||s||(r===n?r=-n:r-=n);var o=this.aStartAngle+e*r,l=this.aX+this.xRadius*Math.cos(o),h=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){var u=Math.cos(this.aRotation),c=Math.sin(this.aRotation),d=l-this.aX,p=h-this.aY;l=d*u-p*c+this.aX,h=d*c+p*u+this.aY}return i.set(l,h)},os.prototype.copy=function(e){return as.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},os.prototype.toJSON=function(){var e=as.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},os.prototype.fromJSON=function(e){return as.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},ls.prototype=Object.create(os.prototype),ls.prototype.constructor=ls,ls.prototype.isArcCurve=!0;var us=new l,cs=new hs,ds=new hs,ps=new hs;function ms(e,t,i,n){as.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=i||"centripetal",this.tension=n||.5}function gs(e,t,i,n,r){var s=.5*(n-t),a=.5*(r-i),o=e*e;return(2*i-2*n+s+a)*(e*o)+(-3*i+3*n-2*s-a)*o+s*e+i}function fs(e,t,i,n){return function(e,t){var i=1-e;return i*i*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,i)+function(e,t){return e*e*t}(e,n)}function ys(e,t,i,n,r){return function(e,t){var i=1-e;return i*i*i*t}(e,t)+function(e,t){var i=1-e;return 3*i*i*e*t}(e,i)+function(e,t){return 3*(1-e)*e*e*t}(e,n)+function(e,t){return e*e*e*t}(e,r)}function Es(e,t,i,n){as.call(this),this.type="CubicBezierCurve",this.v0=e||new a,this.v1=t||new a,this.v2=i||new a,this.v3=n||new a}function vs(e,t,i,n){as.call(this),this.type="CubicBezierCurve3",this.v0=e||new l,this.v1=t||new l,this.v2=i||new l,this.v3=n||new l}function As(e,t){as.call(this),this.type="LineCurve",this.v1=e||new a,this.v2=t||new a}function bs(e,t){as.call(this),this.type="LineCurve3",this.v1=e||new l,this.v2=t||new l}function Ss(e,t,i){as.call(this),this.type="QuadraticBezierCurve",this.v0=e||new a,this.v1=t||new a,this.v2=i||new a}function _s(e,t,i){as.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new l,this.v1=t||new l,this.v2=i||new l}function xs(e){as.call(this),this.type="SplineCurve",this.points=e||[]}ms.prototype=Object.create(as.prototype),ms.prototype.constructor=ms,ms.prototype.isCatmullRomCurve3=!0,ms.prototype.getPoint=function(e,t){var i,n,r,s,a=t||new l,o=this.points,h=o.length,u=(h-(this.closed?0:1))*e,c=Math.floor(u),d=u-c;if(this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/h)+1)*h:0===d&&c===h-1&&(c=h-2,d=1),this.closed||c>0?i=o[(c-1)%h]:(us.subVectors(o[0],o[1]).add(o[0]),i=us),n=o[c%h],r=o[(c+1)%h],this.closed||c+2<h?s=o[(c+2)%h]:(us.subVectors(o[h-1],o[h-2]).add(o[h-1]),s=us),"centripetal"===this.curveType||"chordal"===this.curveType){var p="chordal"===this.curveType?.5:.25,m=Math.pow(i.distanceToSquared(n),p),g=Math.pow(n.distanceToSquared(r),p),f=Math.pow(r.distanceToSquared(s),p);g<1e-4&&(g=1),m<1e-4&&(m=g),f<1e-4&&(f=g),cs.initNonuniformCatmullRom(i.x,n.x,r.x,s.x,m,g,f),ds.initNonuniformCatmullRom(i.y,n.y,r.y,s.y,m,g,f),ps.initNonuniformCatmullRom(i.z,n.z,r.z,s.z,m,g,f)}else"catmullrom"===this.curveType&&(cs.initCatmullRom(i.x,n.x,r.x,s.x,this.tension),ds.initCatmullRom(i.y,n.y,r.y,s.y,this.tension),ps.initCatmullRom(i.z,n.z,r.z,s.z,this.tension));return a.set(cs.calc(d),ds.calc(d),ps.calc(d)),a},ms.prototype.copy=function(e){as.prototype.copy.call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},ms.prototype.toJSON=function(){var e=as.prototype.toJSON.call(this);e.points=[];for(var t=0,i=this.points.length;t<i;t++){var n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},ms.prototype.fromJSON=function(e){as.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var n=e.points[t];this.points.push((new l).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Es.prototype=Object.create(as.prototype),Es.prototype.constructor=Es,Es.prototype.isCubicBezierCurve=!0,Es.prototype.getPoint=function(e,t){var i=t||new a,n=this.v0,r=this.v1,s=this.v2,o=this.v3;return i.set(ys(e,n.x,r.x,s.x,o.x),ys(e,n.y,r.y,s.y,o.y)),i},Es.prototype.copy=function(e){return as.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Es.prototype.toJSON=function(){var e=as.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Es.prototype.fromJSON=function(e){return as.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},vs.prototype=Object.create(as.prototype),vs.prototype.constructor=vs,vs.prototype.isCubicBezierCurve3=!0,vs.prototype.getPoint=function(e,t){var i=t||new l,n=this.v0,r=this.v1,s=this.v2,a=this.v3;return i.set(ys(e,n.x,r.x,s.x,a.x),ys(e,n.y,r.y,s.y,a.y),ys(e,n.z,r.z,s.z,a.z)),i},vs.prototype.copy=function(e){return as.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},vs.prototype.toJSON=function(){var e=as.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},vs.prototype.fromJSON=function(e){return as.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},As.prototype=Object.create(as.prototype),As.prototype.constructor=As,As.prototype.isLineCurve=!0,As.prototype.getPoint=function(e,t){var i=t||new a;return 1===e?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i},As.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},As.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},As.prototype.copy=function(e){return as.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},As.prototype.toJSON=function(){var e=as.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},As.prototype.fromJSON=function(e){return as.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},bs.prototype=Object.create(as.prototype),bs.prototype.constructor=bs,bs.prototype.isLineCurve3=!0,bs.prototype.getPoint=function(e,t){var i=t||new l;return 1===e?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i},bs.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},bs.prototype.copy=function(e){return as.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},bs.prototype.toJSON=function(){var e=as.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},bs.prototype.fromJSON=function(e){return as.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Ss.prototype=Object.create(as.prototype),Ss.prototype.constructor=Ss,Ss.prototype.isQuadraticBezierCurve=!0,Ss.prototype.getPoint=function(e,t){var i=t||new a,n=this.v0,r=this.v1,s=this.v2;return i.set(fs(e,n.x,r.x,s.x),fs(e,n.y,r.y,s.y)),i},Ss.prototype.copy=function(e){return as.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Ss.prototype.toJSON=function(){var e=as.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Ss.prototype.fromJSON=function(e){return as.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},_s.prototype=Object.create(as.prototype),_s.prototype.constructor=_s,_s.prototype.isQuadraticBezierCurve3=!0,_s.prototype.getPoint=function(e,t){var i=t||new l,n=this.v0,r=this.v1,s=this.v2;return i.set(fs(e,n.x,r.x,s.x),fs(e,n.y,r.y,s.y),fs(e,n.z,r.z,s.z)),i},_s.prototype.copy=function(e){return as.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},_s.prototype.toJSON=function(){var e=as.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},_s.prototype.fromJSON=function(e){return as.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},xs.prototype=Object.create(as.prototype),xs.prototype.constructor=xs,xs.prototype.isSplineCurve=!0,xs.prototype.getPoint=function(e,t){var i=t||new a,n=this.points,r=(n.length-1)*e,s=Math.floor(r),o=r-s,l=n[0===s?s:s-1],h=n[s],u=n[s>n.length-2?n.length-1:s+1],c=n[s>n.length-3?n.length-1:s+2];return i.set(gs(o,l.x,h.x,u.x,c.x),gs(o,l.y,h.y,u.y,c.y)),i},xs.prototype.copy=function(e){as.prototype.copy.call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var n=e.points[t];this.points.push(n.clone())}return this},xs.prototype.toJSON=function(){var e=as.prototype.toJSON.call(this);e.points=[];for(var t=0,i=this.points.length;t<i;t++){var n=this.points[t];e.points.push(n.toArray())}return e},xs.prototype.fromJSON=function(e){as.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var n=e.points[t];this.points.push((new a).fromArray(n))}return this};var ws=Object.freeze({ArcCurve:ls,CatmullRomCurve3:ms,CubicBezierCurve:Es,CubicBezierCurve3:vs,EllipseCurve:os,LineCurve:As,LineCurve3:bs,QuadraticBezierCurve:Ss,QuadraticBezierCurve3:_s,SplineCurve:xs});function Ts(){as.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Ps(e){Ts.call(this),this.type="Path",this.currentPoint=new a,e&&this.setFromPoints(e)}function Cs(e){Ps.call(this,e),this.uuid=s.generateUUID(),this.type="Shape",this.holes=[]}function Vs(e,t){se.call(this),this.type="Light",this.color=new U(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function Rs(e,t,i){Vs.call(this,e,i),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(se.DefaultUp),this.updateMatrix(),this.groundColor=new U(t)}function Ns(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new a(512,512),this.map=null,this.matrix=new B}function Ms(){Ns.call(this,new Ci(50,1,.5,500))}function ks(e,t,i,n,r,s){Vs.call(this,e,t),this.type="SpotLight",this.position.copy(se.DefaultUp),this.updateMatrix(),this.target=new se,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==i?i:0,this.angle=void 0!==n?n:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==s?s:1,this.shadow=new Ms}function Ls(e,t,i,n){Vs.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==i?i:0,this.decay=void 0!==n?n:1,this.shadow=new Ns(new Ci(90,1,.5,500))}function Is(e,t,i,n,r,s){Pi.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==e?e:-1,this.right=void 0!==t?t:1,this.top=void 0!==i?i:1,this.bottom=void 0!==n?n:-1,this.near=void 0!==r?r:.1,this.far=void 0!==s?s:2e3,this.updateProjectionMatrix()}function Bs(){Ns.call(this,new Is(-5,5,5,-5,.5,500))}function Ds(e,t){Vs.call(this,e,t),this.type="DirectionalLight",this.position.copy(se.DefaultUp),this.updateMatrix(),this.target=new se,this.shadow=new Bs}function Os(e,t){Vs.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function qs(e,t,i,n){Vs.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==i?i:10,this.height=void 0!==n?n:10}function Ys(e){this.manager=void 0!==e?e:Zr,this.textures={}}Ts.prototype=Object.assign(Object.create(as.prototype),{constructor:Ts,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new As(t,e))},getPoint:function(e){for(var t=e*this.getLength(),i=this.getCurveLengths(),n=0;n<i.length;){if(i[n]>=t){var r=i[n]-t,s=this.curves[n],a=s.getLength(),o=0===a?0:1-r/a;return s.getPointAt(o)}n++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,i=0,n=this.curves.length;i<n;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,i=[],n=0,r=this.curves;n<r.length;n++)for(var s=r[n],a=s&&s.isEllipseCurve?2*e:s&&(s.isLineCurve||s.isLineCurve3)?1:s&&s.isSplineCurve?e*s.points.length:e,o=s.getPoints(a),l=0;l<o.length;l++){var h=o[l];t&&t.equals(h)||(i.push(h),t=h)}return this.autoClose&&i.length>1&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i},copy:function(e){as.prototype.copy.call(this,e),this.curves=[];for(var t=0,i=e.curves.length;t<i;t++){var n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){var e=as.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,i=this.curves.length;t<i;t++){var n=this.curves[t];e.curves.push(n.toJSON())}return e},fromJSON:function(e){as.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,i=e.curves.length;t<i;t++){var n=e.curves[t];this.curves.push((new ws[n.type]).fromJSON(n))}return this}}),Ps.prototype=Object.assign(Object.create(Ts.prototype),{constructor:Ps,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var i=new As(this.currentPoint.clone(),new a(e,t));this.curves.push(i),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,i,n){var r=new Ss(this.currentPoint.clone(),new a(e,t),new a(i,n));this.curves.push(r),this.currentPoint.set(i,n)},bezierCurveTo:function(e,t,i,n,r,s){var o=new Es(this.currentPoint.clone(),new a(e,t),new a(i,n),new a(r,s));this.curves.push(o),this.currentPoint.set(r,s)},splineThru:function(e){var t=new xs([this.currentPoint.clone()].concat(e));this.curves.push(t),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,i,n,r,s){var a=this.currentPoint.x,o=this.currentPoint.y;this.absarc(e+a,t+o,i,n,r,s)},absarc:function(e,t,i,n,r,s){this.absellipse(e,t,i,i,n,r,s)},ellipse:function(e,t,i,n,r,s,a,o){var l=this.currentPoint.x,h=this.currentPoint.y;this.absellipse(e+l,t+h,i,n,r,s,a,o)},absellipse:function(e,t,i,n,r,s,a,o){var l=new os(e,t,i,n,r,s,a,o);if(this.curves.length>0){var h=l.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(l);var u=l.getPoint(1);this.currentPoint.copy(u)},copy:function(e){return Ts.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=Ts.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return Ts.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),Cs.prototype=Object.assign(Object.create(Ps.prototype),{constructor:Cs,getPointsHoles:function(e){for(var t=[],i=0,n=this.holes.length;i<n;i++)t[i]=this.holes[i].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){Ps.prototype.copy.call(this,e),this.holes=[];for(var t=0,i=e.holes.length;t<i;t++){var n=e.holes[t];this.holes.push(n.clone())}return this},toJSON:function(){var e=Ps.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,i=this.holes.length;t<i;t++){var n=this.holes[t];e.holes.push(n.toJSON())}return e},fromJSON:function(e){Ps.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,i=e.holes.length;t<i;t++){var n=e.holes[t];this.holes.push((new Ps).fromJSON(n))}return this}}),Vs.prototype=Object.assign(Object.create(se.prototype),{constructor:Vs,isLight:!0,copy:function(e){return se.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=se.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),Rs.prototype=Object.assign(Object.create(Vs.prototype),{constructor:Rs,isHemisphereLight:!0,copy:function(e){return Vs.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(Ns.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),Ms.prototype=Object.assign(Object.create(Ns.prototype),{constructor:Ms,isSpotLightShadow:!0,update:function(e){var t=this.camera,i=2*s.RAD2DEG*e.angle,n=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;i===t.fov&&n===t.aspect&&r===t.far||(t.fov=i,t.aspect=n,t.far=r,t.updateProjectionMatrix())}}),ks.prototype=Object.assign(Object.create(Vs.prototype),{constructor:ks,isSpotLight:!0,copy:function(e){return Vs.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Ls.prototype=Object.assign(Object.create(Vs.prototype),{constructor:Ls,isPointLight:!0,copy:function(e){return Vs.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),Is.prototype=Object.assign(Object.create(Pi.prototype),{constructor:Is,isOrthographicCamera:!0,copy:function(e,t){return Pi.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,i,n,r,s){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,n=(this.top+this.bottom)/2,r=i-e,s=i+e,a=n+t,o=n-t;if(null!==this.view&&this.view.enabled){var l=this.zoom/(this.view.width/this.view.fullWidth),h=this.zoom/(this.view.height/this.view.fullHeight),u=(this.right-this.left)/this.view.width,c=(this.top-this.bottom)/this.view.height;s=(r+=u*(this.view.offsetX/l))+u*(this.view.width/l),o=(a-=c*(this.view.offsetY/h))-c*(this.view.height/h)}this.projectionMatrix.makeOrthographic(r,s,a,o,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=se.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),Bs.prototype=Object.assign(Object.create(Ns.prototype),{constructor:Bs}),Ds.prototype=Object.assign(Object.create(Vs.prototype),{constructor:Ds,isDirectionalLight:!0,copy:function(e){return Vs.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Os.prototype=Object.assign(Object.create(Vs.prototype),{constructor:Os,isAmbientLight:!0}),qs.prototype=Object.assign(Object.create(Vs.prototype),{constructor:qs,isRectAreaLight:!0,copy:function(e){return Vs.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=Vs.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}),Object.assign(Ys.prototype,{load:function(e,t,i,n){var r=this,s=new $r(r.manager);s.setPath(r.path),s.load(e,(function(e){t(r.parse(JSON.parse(e)))}),i,n)},parse:function(e){var t=this.textures;function i(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var n=new kr[e.type];if(void 0!==e.uuid&&(n.uuid=e.uuid),void 0!==e.name&&(n.name=e.name),void 0!==e.color&&n.color.setHex(e.color),void 0!==e.roughness&&(n.roughness=e.roughness),void 0!==e.metalness&&(n.metalness=e.metalness),void 0!==e.emissive&&n.emissive.setHex(e.emissive),void 0!==e.specular&&n.specular.setHex(e.specular),void 0!==e.shininess&&(n.shininess=e.shininess),void 0!==e.clearCoat&&(n.clearCoat=e.clearCoat),void 0!==e.clearCoatRoughness&&(n.clearCoatRoughness=e.clearCoatRoughness),void 0!==e.vertexColors&&(n.vertexColors=e.vertexColors),void 0!==e.fog&&(n.fog=e.fog),void 0!==e.flatShading&&(n.flatShading=e.flatShading),void 0!==e.blending&&(n.blending=e.blending),void 0!==e.combine&&(n.combine=e.combine),void 0!==e.side&&(n.side=e.side),void 0!==e.opacity&&(n.opacity=e.opacity),void 0!==e.transparent&&(n.transparent=e.transparent),void 0!==e.alphaTest&&(n.alphaTest=e.alphaTest),void 0!==e.depthTest&&(n.depthTest=e.depthTest),void 0!==e.depthWrite&&(n.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(n.colorWrite=e.colorWrite),void 0!==e.wireframe&&(n.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(n.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(n.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(n.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(n.rotation=e.rotation),1!==e.linewidth&&(n.linewidth=e.linewidth),void 0!==e.dashSize&&(n.dashSize=e.dashSize),void 0!==e.gapSize&&(n.gapSize=e.gapSize),void 0!==e.scale&&(n.scale=e.scale),void 0!==e.polygonOffset&&(n.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(n.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(n.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(n.skinning=e.skinning),void 0!==e.morphTargets&&(n.morphTargets=e.morphTargets),void 0!==e.dithering&&(n.dithering=e.dithering),void 0!==e.visible&&(n.visible=e.visible),void 0!==e.userData&&(n.userData=e.userData),void 0!==e.uniforms)for(var r in e.uniforms){var s=e.uniforms[r];switch(n.uniforms[r]={},s.type){case"t":n.uniforms[r].value=i(s.value);break;case"c":n.uniforms[r].value=(new U).setHex(s.value);break;case"v2":n.uniforms[r].value=(new a).fromArray(s.value);break;case"v3":n.uniforms[r].value=(new l).fromArray(s.value);break;case"v4":n.uniforms[r].value=(new P).fromArray(s.value);break;case"m3":n.uniforms[r].value=(new h).fromArray(s.value);case"m4":n.uniforms[r].value=(new B).fromArray(s.value);break;default:n.uniforms[r].value=s.value}}if(void 0!==e.defines&&(n.defines=e.defines),void 0!==e.vertexShader&&(n.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(n.fragmentShader=e.fragmentShader),void 0!==e.extensions)for(var o in e.extensions)n.extensions[o]=e.extensions[o];if(void 0!==e.shading&&(n.flatShading=1===e.shading),void 0!==e.size&&(n.size=e.size),void 0!==e.sizeAttenuation&&(n.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(n.map=i(e.map)),void 0!==e.matcap&&(n.matcap=i(e.matcap)),void 0!==e.alphaMap&&(n.alphaMap=i(e.alphaMap),n.transparent=!0),void 0!==e.bumpMap&&(n.bumpMap=i(e.bumpMap)),void 0!==e.bumpScale&&(n.bumpScale=e.bumpScale),void 0!==e.normalMap&&(n.normalMap=i(e.normalMap)),void 0!==e.normalMapType&&(n.normalMapType=e.normalMapType),void 0!==e.normalScale){var u=e.normalScale;!1===Array.isArray(u)&&(u=[u,u]),n.normalScale=(new a).fromArray(u)}return void 0!==e.displacementMap&&(n.displacementMap=i(e.displacementMap)),void 0!==e.displacementScale&&(n.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(n.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(n.roughnessMap=i(e.roughnessMap)),void 0!==e.metalnessMap&&(n.metalnessMap=i(e.metalnessMap)),void 0!==e.emissiveMap&&(n.emissiveMap=i(e.emissiveMap)),void 0!==e.emissiveIntensity&&(n.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(n.specularMap=i(e.specularMap)),void 0!==e.envMap&&(n.envMap=i(e.envMap)),void 0!==e.envMapIntensity&&(n.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(n.reflectivity=e.reflectivity),void 0!==e.lightMap&&(n.lightMap=i(e.lightMap)),void 0!==e.lightMapIntensity&&(n.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(n.aoMap=i(e.aoMap)),void 0!==e.aoMapIntensity&&(n.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(n.gradientMap=i(e.gradientMap)),n},setPath:function(e){return this.path=e,this},setTextures:function(e){return this.textures=e,this}});var Hs={decodeText:function(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",i=0,n=e.length;i<n;i++)t+=String.fromCharCode(e[i]);return decodeURIComponent(escape(t))},extractUrlBase:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}};function Gs(e){this.manager=void 0!==e?e:Zr}Object.assign(Gs.prototype,{load:function(e,t,i,n){var r=this,s=new $r(r.manager);s.setPath(r.path),s.load(e,(function(e){t(r.parse(JSON.parse(e)))}),i,n)},parse:function(e){var t=new _e,i=e.data.index;if(void 0!==i){var n=new Fs[i.type](i.array);t.setIndex(new ue(n,1))}var r=e.data.attributes;for(var s in r){var a=r[s],o=new ue(n=new Fs[a.type](a.array),a.itemSize,a.normalized);void 0!==a.name&&(o.name=a.name),t.addAttribute(s,o)}var h=e.data.morphAttributes;if(h)for(var s in h){for(var u=h[s],c=[],d=0,p=u.length;d<p;d++){a=u[d],o=new ue(n=new Fs[a.type](a.array),a.itemSize,a.normalized);void 0!==a.name&&(o.name=a.name),c.push(o)}t.morphAttributes[s]=c}var m=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==m){d=0;for(var g=m.length;d!==g;++d){var f=m[d];t.addGroup(f.start,f.count,f.materialIndex)}}var y=e.data.boundingSphere;if(void 0!==y){var E=new l;void 0!==y.center&&E.fromArray(y.center),t.boundingSphere=new k(E,y.radius)}return e.name&&(t.name=e.name),e.userData&&(t.userData=e.userData),t},setPath:function(e){return this.path=e,this}});var Fs={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function zs(e){this.manager=void 0!==e?e:Zr,this.resourcePath=""}Object.assign(zs.prototype,{crossOrigin:"anonymous",load:function(e,t,i,n){var r=this,s=void 0===this.path?Hs.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;var a=new $r(r.manager);a.setPath(this.path),a.load(e,(function(i){var s=null;try{s=JSON.parse(i)}catch(o){return void 0!==n&&n(o),void console.error("THREE:ObjectLoader: Can't parse "+e+".",o.message)}var a=s.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?r.parse(s,t):console.error("THREE.ObjectLoader: Can't load "+e)}),i,n)},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setCrossOrigin:function(e){return this.crossOrigin=e,this},parse:function(e,t){var i=this.parseShape(e.shapes),n=this.parseGeometries(e.geometries,i),r=this.parseImages(e.images,(function(){void 0!==t&&t(o)})),s=this.parseTextures(e.textures,r),a=this.parseMaterials(e.materials,s),o=this.parseObject(e.object,n,a);return e.animations&&(o.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(o),o},parseShape:function(e){var t={};if(void 0!==e)for(var i=0,n=e.length;i<n;i++){var r=(new Cs).fromJSON(e[i]);t[r.uuid]=r}return t},parseGeometries:function(e,t){var i={};if(void 0!==e)for(var n=new Gs,r=0,s=e.length;r<s;r++){var a,o=e[r];switch(o.type){case"PlaneGeometry":case"PlaneBufferGeometry":a=new Sr[o.type](o.width,o.height,o.widthSegments,o.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":a=new Sr[o.type](o.width,o.height,o.depth,o.widthSegments,o.heightSegments,o.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":a=new Sr[o.type](o.radius,o.segments,o.thetaStart,o.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":a=new Sr[o.type](o.radiusTop,o.radiusBottom,o.height,o.radialSegments,o.heightSegments,o.openEnded,o.thetaStart,o.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":a=new Sr[o.type](o.radius,o.height,o.radialSegments,o.heightSegments,o.openEnded,o.thetaStart,o.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":a=new Sr[o.type](o.radius,o.widthSegments,o.heightSegments,o.phiStart,o.phiLength,o.thetaStart,o.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":a=new Sr[o.type](o.radius,o.detail);break;case"RingGeometry":case"RingBufferGeometry":a=new Sr[o.type](o.innerRadius,o.outerRadius,o.thetaSegments,o.phiSegments,o.thetaStart,o.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":a=new Sr[o.type](o.radius,o.tube,o.radialSegments,o.tubularSegments,o.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":a=new Sr[o.type](o.radius,o.tube,o.tubularSegments,o.radialSegments,o.p,o.q);break;case"TubeGeometry":case"TubeBufferGeometry":a=new Sr[o.type]((new ws[o.path.type]).fromJSON(o.path),o.tubularSegments,o.radius,o.radialSegments,o.closed);break;case"LatheGeometry":case"LatheBufferGeometry":a=new Sr[o.type](o.points,o.segments,o.phiStart,o.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":a=new Sr[o.type](o.vertices,o.indices,o.radius,o.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var l=[],h=0,u=o.shapes.length;h<u;h++){var c=t[o.shapes[h]];l.push(c)}a=new Sr[o.type](l,o.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(l=[],h=0,u=o.shapes.length;h<u;h++){c=t[o.shapes[h]];l.push(c)}var d=o.options.extrudePath;void 0!==d&&(o.options.extrudePath=(new ws[d.type]).fromJSON(d)),a=new Sr[o.type](l,o.options);break;case"BufferGeometry":a=n.parse(o);break;case"Geometry":if("THREE"in window&&"LegacyJSONLoader"in THREE)a=(new THREE.LegacyJSONLoader).parse(o,this.resourcePath).geometry;else console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+o.type+'"');continue}a.uuid=o.uuid,void 0!==o.name&&(a.name=o.name),!0===a.isBufferGeometry&&void 0!==o.userData&&(a.userData=o.userData),i[o.uuid]=a}return i},parseMaterials:function(e,t){var i={},n={};if(void 0!==e){var r=new Ys;r.setTextures(t);for(var s=0,a=e.length;s<a;s++){var o=e[s];if("MultiMaterial"===o.type){for(var l=[],h=0;h<o.materials.length;h++){var u=o.materials[h];void 0===i[u.uuid]&&(i[u.uuid]=r.parse(u)),l.push(i[u.uuid])}n[o.uuid]=l}else void 0===i[o.uuid]&&(i[o.uuid]=r.parse(o)),n[o.uuid]=i[o.uuid]}}return n},parseAnimations:function(e){for(var t=[],i=0;i<e.length;i++){var n=e[i],r=Xr.parse(n);void 0!==n.uuid&&(r.uuid=n.uuid),t.push(r)}return t},parseImages:function(e,t){var i=this,n={};function r(e){return i.manager.itemStart(e),s.load(e,(function(){i.manager.itemEnd(e)}),void 0,(function(){i.manager.itemError(e),i.manager.itemEnd(e)}))}if(void 0!==e&&e.length>0){var s=new ns(new Kr(t));s.setCrossOrigin(this.crossOrigin);for(var a=0,o=e.length;a<o;a++){var l=e[a],h=l.url;if(Array.isArray(h)){n[l.uuid]=[];for(var u=0,c=h.length;u<c;u++){var d=h[u],p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(d)?d:i.resourcePath+d;n[l.uuid].push(r(p))}}else{p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l.url)?l.url:i.resourcePath+l.url;n[l.uuid]=r(p)}}}return n},parseTextures:function(e,t){function i(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var n={};if(void 0!==e)for(var r=0,s=e.length;r<s;r++){var a,o=e[r];void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===t[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image),(a=Array.isArray(t[o.image])?new rt(t[o.image]):new T(t[o.image])).needsUpdate=!0,a.uuid=o.uuid,void 0!==o.name&&(a.name=o.name),void 0!==o.mapping&&(a.mapping=i(o.mapping,Ks)),void 0!==o.offset&&a.offset.fromArray(o.offset),void 0!==o.repeat&&a.repeat.fromArray(o.repeat),void 0!==o.center&&a.center.fromArray(o.center),void 0!==o.rotation&&(a.rotation=o.rotation),void 0!==o.wrap&&(a.wrapS=i(o.wrap[0],Zs),a.wrapT=i(o.wrap[1],Zs)),void 0!==o.format&&(a.format=o.format),void 0!==o.type&&(a.type=o.type),void 0!==o.encoding&&(a.encoding=o.encoding),void 0!==o.minFilter&&(a.minFilter=i(o.minFilter,Js)),void 0!==o.magFilter&&(a.magFilter=i(o.magFilter,Js)),void 0!==o.anisotropy&&(a.anisotropy=o.anisotropy),void 0!==o.flipY&&(a.flipY=o.flipY),void 0!==o.premultiplyAlpha&&(a.premultiplyAlpha=o.premultiplyAlpha),void 0!==o.unpackAlignment&&(a.unpackAlignment=o.unpackAlignment),n[o.uuid]=a}return n},parseObject:function(e,t,i){var n;function r(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function s(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],n=0,r=e.length;n<r;n++){var s=e[n];void 0===i[s]&&console.warn("THREE.ObjectLoader: Undefined material",s),t.push(i[s])}return t}return void 0===i[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),i[e]}}switch(e.type){case"Scene":n=new zi,void 0!==e.background&&Number.isInteger(e.background)&&(n.background=new U(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?n.fog=new Fi(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(n.fog=new Gi(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":n=new Ci(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(n.focus=e.focus),void 0!==e.zoom&&(n.zoom=e.zoom),void 0!==e.filmGauge&&(n.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(n.filmOffset=e.filmOffset),void 0!==e.view&&(n.view=Object.assign({},e.view));break;case"OrthographicCamera":n=new Is(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(n.zoom=e.zoom),void 0!==e.view&&(n.view=Object.assign({},e.view));break;case"AmbientLight":n=new Os(e.color,e.intensity);break;case"DirectionalLight":n=new Ds(e.color,e.intensity);break;case"PointLight":n=new Ls(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":n=new qs(e.color,e.intensity,e.width,e.height);break;case"SpotLight":n=new ks(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":n=new Rs(e.color,e.groundColor,e.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var a=r(e.geometry),o=s(e.material);n=a.bones&&a.bones.length>0?new Ki(a,o):new We(a,o),void 0!==e.drawMode&&n.setDrawMode(e.drawMode);break;case"LOD":n=new Qi;break;case"Line":n=new en(r(e.geometry),s(e.material),e.mode);break;case"LineLoop":n=new nn(r(e.geometry),s(e.material));break;case"LineSegments":n=new tn(r(e.geometry),s(e.material));break;case"PointCloud":case"Points":n=new sn(r(e.geometry),s(e.material));break;case"Sprite":n=new ji(s(e.material));break;case"Group":n=new Ti;break;default:n=new se}if(n.uuid=e.uuid,void 0!==e.name&&(n.name=e.name),void 0!==e.matrix?(n.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(n.matrixAutoUpdate=e.matrixAutoUpdate),n.matrixAutoUpdate&&n.matrix.decompose(n.position,n.quaternion,n.scale)):(void 0!==e.position&&n.position.fromArray(e.position),void 0!==e.rotation&&n.rotation.fromArray(e.rotation),void 0!==e.quaternion&&n.quaternion.fromArray(e.quaternion),void 0!==e.scale&&n.scale.fromArray(e.scale)),void 0!==e.castShadow&&(n.castShadow=e.castShadow),void 0!==e.receiveShadow&&(n.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(n.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(n.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&n.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(n.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(n.visible=e.visible),void 0!==e.frustumCulled&&(n.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(n.renderOrder=e.renderOrder),void 0!==e.userData&&(n.userData=e.userData),void 0!==e.layers&&(n.layers.mask=e.layers),void 0!==e.children)for(var l=e.children,h=0;h<l.length;h++)n.add(this.parseObject(l[h],t,i));if("LOD"===e.type)for(var u=e.levels,c=0;c<u.length;c++){var d=u[c],p=n.getObjectByProperty("uuid",d.object);void 0!==p&&n.addLevel(p,d.distance)}return n}});var Us,Ws,Xs,js,Qs,Ks={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},Zs={RepeatWrapping:1e3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},Js={NearestFilter:1003,NearestMipMapNearestFilter:1004,NearestMipMapLinearFilter:1005,LinearFilter:1006,LinearMipMapNearestFilter:1007,LinearMipMapLinearFilter:1008};function $s(e){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=void 0!==e?e:Zr,this.options=void 0}function ea(){this.type="ShapePath",this.color=new U,this.subPaths=[],this.currentPath=null}function ta(e){this.type="Font",this.data=e}function ia(e,t,i,n,r){var s=r.glyphs[e]||r.glyphs["?"];if(s){var a,o,l,h,u,c,d,p,m=new ea;if(s.o)for(var g=s._cachedOutline||(s._cachedOutline=s.o.split(" ")),f=0,y=g.length;f<y;){switch(g[f++]){case"m":a=g[f++]*t+i,o=g[f++]*t+n,m.moveTo(a,o);break;case"l":a=g[f++]*t+i,o=g[f++]*t+n,m.lineTo(a,o);break;case"q":l=g[f++]*t+i,h=g[f++]*t+n,u=g[f++]*t+i,c=g[f++]*t+n,m.quadraticCurveTo(u,c,l,h);break;case"b":l=g[f++]*t+i,h=g[f++]*t+n,u=g[f++]*t+i,c=g[f++]*t+n,d=g[f++]*t+i,p=g[f++]*t+n,m.bezierCurveTo(u,c,d,p,l,h)}}return{offsetX:s.ha*t,path:m}}}function na(e){this.manager=void 0!==e?e:Zr}function ra(){}$s.prototype={constructor:$s,setOptions:function(e){return this.options=e,this},load:function(e,t,i,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,s=Qr.get(e);if(void 0!==s)return r.manager.itemStart(e),setTimeout((function(){t&&t(s),r.manager.itemEnd(e)}),0),s;fetch(e).then((function(e){return e.blob()})).then((function(e){return void 0===r.options?createImageBitmap(e):createImageBitmap(e,r.options)})).then((function(i){Qr.add(e,i),t&&t(i),r.manager.itemEnd(e)})).catch((function(t){n&&n(t),r.manager.itemError(e),r.manager.itemEnd(e)})),r.manager.itemStart(e)},setCrossOrigin:function(){return this},setPath:function(e){return this.path=e,this}},Object.assign(ea.prototype,{moveTo:function(e,t){this.currentPath=new Ps,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,i,n){this.currentPath.quadraticCurveTo(e,t,i,n)},bezierCurveTo:function(e,t,i,n,r,s){this.currentPath.bezierCurveTo(e,t,i,n,r,s)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function i(e){for(var t=[],i=0,n=e.length;i<n;i++){var r=e[i],s=new Cs;s.curves=r.curves,t.push(s)}return t}function n(e,t){for(var i=t.length,n=!1,r=i-1,s=0;s<i;r=s++){var a=t[r],o=t[s],l=o.x-a.x,h=o.y-a.y;if(Math.abs(h)>Number.EPSILON){if(h<0&&(a=t[s],l=-l,o=t[r],h=-h),e.y<a.y||e.y>o.y)continue;if(e.y===a.y){if(e.x===a.x)return!0}else{var u=h*(e.x-a.x)-l*(e.y-a.y);if(0===u)return!0;if(u<0)continue;n=!n}}else{if(e.y!==a.y)continue;if(o.x<=e.x&&e.x<=a.x||a.x<=e.x&&e.x<=o.x)return!0}}return n}var r=Zn.isClockWise,s=this.subPaths;if(0===s.length)return[];if(!0===t)return i(s);var a,o,l,h=[];if(1===s.length)return o=s[0],(l=new Cs).curves=o.curves,h.push(l),h;var u=!r(s[0].getPoints());u=e?!u:u;var c,d,p=[],m=[],g=[],f=0;m[f]=void 0,g[f]=[];for(var y=0,E=s.length;y<E;y++)a=r(c=(o=s[y]).getPoints()),(a=e?!a:a)?(!u&&m[f]&&f++,m[f]={s:new Cs,p:c},m[f].s.curves=o.curves,u&&f++,g[f]=[]):g[f].push({h:o,p:c[0]});if(!m[0])return i(s);if(m.length>1){for(var v=!1,A=[],b=0,S=m.length;b<S;b++)p[b]=[];for(b=0,S=m.length;b<S;b++)for(var _=g[b],x=0;x<_.length;x++){for(var w=_[x],T=!0,P=0;P<m.length;P++)n(w.p,m[P].p)&&(b!==P&&A.push({froms:b,tos:P,hole:x}),T?(T=!1,p[P].push(w)):v=!0);T&&p[b].push(w)}A.length>0&&(v||(g=p))}y=0;for(var C=m.length;y<C;y++){l=m[y].s,h.push(l);for(var V=0,R=(d=g[y]).length;V<R;V++)l.holes.push(d[V].h)}return h}}),Object.assign(ta.prototype,{isFont:!0,generateShapes:function(e,t){void 0===t&&(t=100);for(var i=[],n=function(e,t,i){for(var n=Array.from?Array.from(e):String(e).split(""),r=t/i.resolution,s=(i.boundingBox.yMax-i.boundingBox.yMin+i.underlineThickness)*r,a=[],o=0,l=0,h=0;h<n.length;h++){var u=n[h];if("\n"===u)o=0,l-=s;else{var c=ia(u,r,o,l,i);o+=c.offsetX,a.push(c.path)}}return a}(e,t,this.data),r=0,s=n.length;r<s;r++)Array.prototype.push.apply(i,n[r].toShapes());return i}}),Object.assign(na.prototype,{load:function(e,t,i,n){var r=this,s=new $r(this.manager);s.setPath(this.path),s.load(e,(function(e){var i;try{i=JSON.parse(e)}catch(s){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),i=JSON.parse(e.substring(65,e.length-2))}var n=r.parse(i);t&&t(n)}),i,n)},parse:function(e){return new ta(e)},setPath:function(e){return this.path=e,this}}),ra.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,i=0,n=t.length;i<n;i+=2){var r=t[i],s=t[i+1];if(r.test(e))return s}return null}},Object.assign(ra.prototype,{crossOrigin:"anonymous",onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(e,t,i){for(var n=[],r=0;r<e.length;++r)n[r]=this.createMaterial(e[r],t,i);return n},createMaterial:(Us={NoBlending:0,NormalBlending:1,AdditiveBlending:2,SubtractiveBlending:3,MultiplyBlending:4,CustomBlending:5},Ws=new U,Xs=new ss,js=new Ys,function(e,t,i){var n={};function r(e,r,a,o,l){var h,u=t+e,c=ra.Handlers.get(u);null!==c?h=c.load(u):(Xs.setCrossOrigin(i),h=Xs.load(u)),void 0!==r&&(h.repeat.fromArray(r),1!==r[0]&&(h.wrapS=1e3),1!==r[1]&&(h.wrapT=1e3)),void 0!==a&&h.offset.fromArray(a),void 0!==o&&("repeat"===o[0]&&(h.wrapS=1e3),"mirror"===o[0]&&(h.wrapS=1002),"repeat"===o[1]&&(h.wrapT=1e3),"mirror"===o[1]&&(h.wrapT=1002)),void 0!==l&&(h.anisotropy=l);var d=s.generateUUID();return n[d]=h,d}var a={uuid:s.generateUUID(),type:"MeshLambertMaterial"};for(var o in e){var l=e[o];switch(o){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":a.name=l;break;case"blending":a.blending=Us[l];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",o,"is no longer supported.");break;case"colorDiffuse":a.color=Ws.fromArray(l).getHex();break;case"colorSpecular":a.specular=Ws.fromArray(l).getHex();break;case"colorEmissive":a.emissive=Ws.fromArray(l).getHex();break;case"specularCoef":a.shininess=l;break;case"shading":"basic"===l.toLowerCase()&&(a.type="MeshBasicMaterial"),"phong"===l.toLowerCase()&&(a.type="MeshPhongMaterial"),"standard"===l.toLowerCase()&&(a.type="MeshStandardMaterial");break;case"mapDiffuse":a.map=r(l,e.mapDiffuseRepeat,e.mapDiffuseOffset,e.mapDiffuseWrap,e.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":a.emissiveMap=r(l,e.mapEmissiveRepeat,e.mapEmissiveOffset,e.mapEmissiveWrap,e.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":a.lightMap=r(l,e.mapLightRepeat,e.mapLightOffset,e.mapLightWrap,e.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":a.aoMap=r(l,e.mapAORepeat,e.mapAOOffset,e.mapAOWrap,e.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":a.bumpMap=r(l,e.mapBumpRepeat,e.mapBumpOffset,e.mapBumpWrap,e.mapBumpAnisotropy);break;case"mapBumpScale":a.bumpScale=l;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":a.normalMap=r(l,e.mapNormalRepeat,e.mapNormalOffset,e.mapNormalWrap,e.mapNormalAnisotropy);break;case"mapNormalFactor":a.normalScale=l;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":a.specularMap=r(l,e.mapSpecularRepeat,e.mapSpecularOffset,e.mapSpecularWrap,e.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":a.metalnessMap=r(l,e.mapMetalnessRepeat,e.mapMetalnessOffset,e.mapMetalnessWrap,e.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":a.roughnessMap=r(l,e.mapRoughnessRepeat,e.mapRoughnessOffset,e.mapRoughnessWrap,e.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":a.alphaMap=r(l,e.mapAlphaRepeat,e.mapAlphaOffset,e.mapAlphaWrap,e.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":a.side=1;break;case"doubleSided":a.side=2;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),a.opacity=l;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":a[o]=l;break;case"vertexColors":!0===l&&(a.vertexColors=2),"face"===l&&(a.vertexColors=1);break;default:console.error("THREE.Loader.createMaterial: Unsupported",o,l)}}return"MeshBasicMaterial"===a.type&&delete a.emissive,"MeshPhongMaterial"!==a.type&&delete a.specular,a.opacity<1&&(a.transparent=!0),js.setTextures(n),js.parse(a)})});var sa={getContext:function(){return void 0===Qs&&(Qs=new(window.AudioContext||window.webkitAudioContext)),Qs},setContext:function(e){Qs=e}};function aa(e){this.manager=void 0!==e?e:Zr}function oa(){this.coefficients=[];for(var e=0;e<9;e++)this.coefficients.push(new l)}function la(e,t){Vs.call(this,void 0,t),this.sh=void 0!==e?e:new oa}function ha(e,t,i){la.call(this,void 0,i);var n=(new U).set(e),r=(new U).set(t),s=new l(n.r,n.g,n.b),a=new l(r.r,r.g,r.b),o=Math.sqrt(Math.PI),h=o*Math.sqrt(.75);this.sh.coefficients[0].copy(s).add(a).multiplyScalar(o),this.sh.coefficients[1].copy(s).sub(a).multiplyScalar(h)}function ua(e,t){la.call(this,void 0,t);var i=(new U).set(e);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}function ca(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ci,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ci,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}Object.assign(aa.prototype,{load:function(e,t,i,n){var r=new $r(this.manager);r.setResponseType("arraybuffer"),r.setPath(this.path),r.load(e,(function(e){var i=e.slice(0);sa.getContext().decodeAudioData(i,(function(e){t(e)}))}),i,n)},setPath:function(e){return this.path=e,this}}),Object.assign(oa.prototype,{isSphericalHarmonics3:!0,set:function(e){for(var t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this},zero:function(){for(var e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this},getAt:function(e,t){var i=e.x,n=e.y,r=e.z,s=this.coefficients;return t=.282095*s[0],t+=.488603*s[1]*n,t+=.488603*s[2]*r,t+=.488603*s[3]*i,t+=1.092548*s[4]*(i*n),t+=1.092548*s[5]*(n*r),t+=.315392*s[6]*(3*r*r-1),t+=1.092548*s[7]*(i*r),t+=.546274*s[8]*(i*i-n*n)},getIrradianceAt:function(e,t){var i=e.x,n=e.y,r=e.z,s=this.coefficients;return t=.886227*s[0],t+=2*s[1]*.511664*n,t+=2*s[2]*.511664*r,t+=2*s[3]*.511664*i,t+=2*s[4]*.429043*i*n,t+=2*s[5]*.429043*n*r,t+=s[6]*(.743125*r*r-.247708),t+=2*s[7]*.429043*i*r,t+=.429043*s[8]*(i*i-n*n)},add:function(e){for(var t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this},scale:function(e){for(var t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this},lerp:function(e,t){for(var i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this},equals:function(e){for(var t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0},copy:function(e){return this.set(e.coefficients)},clone:function(){return(new this.constructor).copy(this)},fromArray:function(e){for(var t=this.coefficients,i=0;i<9;i++)t[i].fromArray(e,3*i);return this},toArray:function(){for(var e=[],t=this.coefficients,i=0;i<9;i++)t[i].toArray(e,3*i);return e}}),Object.assign(oa,{getBasisAt:function(e,t){var i=e.x,n=e.y,r=e.z;t[0]=.282095,t[1]=.488603*n,t[2]=.488603*r,t[3]=.488603*i,t[4]=1.092548*i*n,t[5]=1.092548*n*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*i*r,t[8]=.546274*(i*i-n*n)}}),la.prototype=Object.assign(Object.create(Vs.prototype),{constructor:la,isLightProbe:!0,copy:function(e){return Vs.prototype.copy.call(this,e),this.sh.copy(e.sh),this.intensity=e.intensity,this},toJSON:function(e){return Vs.prototype.toJSON.call(this,e)}}),ha.prototype=Object.assign(Object.create(la.prototype),{constructor:ha,isHemisphereLightProbe:!0,copy:function(e){return la.prototype.copy.call(this,e),this},toJSON:function(e){return la.prototype.toJSON.call(this,e)}}),ua.prototype=Object.assign(Object.create(la.prototype),{constructor:ua,isAmbientLightProbe:!0,copy:function(e){return la.prototype.copy.call(this,e),this},toJSON:function(e){return la.prototype.toJSON.call(this,e)}}),Object.assign(ca.prototype,{update:function(){var e,t,i,n,r,a,o,l,h=new B,u=new B;return function(c){if(e!==this||t!==c.focus||i!==c.fov||n!==c.aspect*this.aspect||r!==c.near||a!==c.far||o!==c.zoom||l!==this.eyeSep){e=this,t=c.focus,i=c.fov,n=c.aspect*this.aspect,r=c.near,a=c.far,o=c.zoom;var d,p,m=c.projectionMatrix.clone(),g=(l=this.eyeSep/2)*r/t,f=r*Math.tan(s.DEG2RAD*i*.5)/o;u.elements[12]=-l,h.elements[12]=l,d=-f*n+g,p=f*n+g,m.elements[0]=2*r/(p-d),m.elements[8]=(p+d)/(p-d),this.cameraL.projectionMatrix.copy(m),d=-f*n-g,p=f*n-g,m.elements[0]=2*r/(p-d),m.elements[8]=(p+d)/(p-d),this.cameraR.projectionMatrix.copy(m)}this.cameraL.matrixWorld.copy(c.matrixWorld).multiply(u),this.cameraR.matrixWorld.copy(c.matrixWorld).multiply(h)}}()});function da(e,t,i,n){se.call(this),this.type="CubeCamera";var r=new Ci(90,1,e,t);r.up.set(0,-1,0),r.lookAt(new l(1,0,0)),this.add(r);var s=new Ci(90,1,e,t);s.up.set(0,-1,0),s.lookAt(new l(-1,0,0)),this.add(s);var a=new Ci(90,1,e,t);a.up.set(0,0,1),a.lookAt(new l(0,1,0)),this.add(a);var o=new Ci(90,1,e,t);o.up.set(0,0,-1),o.lookAt(new l(0,-1,0)),this.add(o);var h=new Ci(90,1,e,t);h.up.set(0,-1,0),h.lookAt(new l(0,0,1)),this.add(h);var u=new Ci(90,1,e,t);u.up.set(0,-1,0),u.lookAt(new l(0,0,-1)),this.add(u),n=n||{format:1022,magFilter:1006,minFilter:1006},this.renderTarget=new R(i,i,n),this.renderTarget.texture.name="CubeCamera",this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var i=e.getRenderTarget(),n=this.renderTarget,l=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,s),e.setRenderTarget(n,2),e.render(t,a),e.setRenderTarget(n,3),e.render(t,o),e.setRenderTarget(n,4),e.render(t,h),n.texture.generateMipmaps=l,e.setRenderTarget(n,5),e.render(t,u),e.setRenderTarget(i)},this.clear=function(e,t,i,n){for(var r=e.getRenderTarget(),s=this.renderTarget,a=0;a<6;a++)e.setRenderTarget(s,a),e.clear(t,i,n);e.setRenderTarget(r)}}function pa(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function ma(){se.call(this),this.type="AudioListener",this.context=sa.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0}function ga(e){se.call(this),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function fa(e){ga.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function ya(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function Ea(e,t,i){this.binding=e,this.valueSize=i;var n,r=Float64Array;switch(t){case"quaternion":n=this._slerp;break;case"string":case"bool":r=Array,n=this._select;break;default:n=this._lerp}this.buffer=new r(4*i),this._mixBufferRegion=n,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}da.prototype=Object.create(se.prototype),da.prototype.constructor=da,Object.assign(pa.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"==typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}),ma.prototype=Object.assign(Object.create(se.prototype),{constructor:ma,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this},updateMatrixWorld:function(){var e=new l,t=new o,i=new l,n=new l,r=new pa;return function(s){se.prototype.updateMatrixWorld.call(this,s);var a=this.context.listener,o=this.up;if(this.timeDelta=r.getDelta(),this.matrixWorld.decompose(e,t,i),n.set(0,0,-1).applyQuaternion(t),a.positionX){var l=this.context.currentTime+this.timeDelta;a.positionX.linearRampToValueAtTime(e.x,l),a.positionY.linearRampToValueAtTime(e.y,l),a.positionZ.linearRampToValueAtTime(e.z,l),a.forwardX.linearRampToValueAtTime(n.x,l),a.forwardY.linearRampToValueAtTime(n.y,l),a.forwardZ.linearRampToValueAtTime(n.z,l),a.upX.linearRampToValueAtTime(o.x,l),a.upY.linearRampToValueAtTime(o.y,l),a.upZ.linearRampToValueAtTime(o.z,l)}else a.setPosition(e.x,e.y,e.z),a.setOrientation(n.x,n.y,n.z,o.x,o.y,o.z)}}()}),ga.prototype=Object.assign(Object.create(se.prototype),{constructor:ga,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setMediaElementSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),this.startTime=this.context.currentTime,e.start(this.startTime,this.offset),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.source.onended=null,this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.source.onended=null,this.offset=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},setDetune:function(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}),fa.prototype=Object.assign(Object.create(ga.prototype),{constructor:fa,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){return this.panner.refDistance=e,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){return this.panner.rolloffFactor=e,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){return this.panner.distanceModel=e,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){return this.panner.maxDistance=e,this},setDirectionalCone:function(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this},updateMatrixWorld:function(){var e=new l,t=new o,i=new l,n=new l;return function(r){if(se.prototype.updateMatrixWorld.call(this,r),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(e,t,i),n.set(0,0,1).applyQuaternion(t);var s=this.panner;if(s.positionX){var a=this.context.currentTime+this.listener.timeDelta;s.positionX.linearRampToValueAtTime(e.x,a),s.positionY.linearRampToValueAtTime(e.y,a),s.positionZ.linearRampToValueAtTime(e.z,a),s.orientationX.linearRampToValueAtTime(n.x,a),s.orientationY.linearRampToValueAtTime(n.y,a),s.orientationZ.linearRampToValueAtTime(n.z,a)}else s.setPosition(e.x,e.y,e.z),s.setOrientation(n.x,n.y,n.z)}}}()}),Object.assign(ya.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),i=0;i<t.length;i++)e+=t[i];return e/t.length}}),Object.assign(Ea.prototype,{accumulate:function(e,t){var i=this.buffer,n=this.valueSize,r=e*n+n,s=this.cumulativeWeight;if(0===s){for(var a=0;a!==n;++a)i[r+a]=i[a];s=t}else{var o=t/(s+=t);this._mixBufferRegion(i,r,0,o,n)}this.cumulativeWeight=s},apply:function(e){var t=this.valueSize,i=this.buffer,n=e*t+t,r=this.cumulativeWeight,s=this.binding;if(this.cumulativeWeight=0,r<1){var a=3*t;this._mixBufferRegion(i,n,a,1-r,t)}for(var o=t,l=t+t;o!==l;++o)if(i[o]!==i[o+t]){s.setValue(i,n);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,i=this.valueSize,n=3*i;e.getValue(t,n);for(var r=i,s=n;r!==s;++r)t[r]=t[n+r%i];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(e,t,i,n,r){if(n>=.5)for(var s=0;s!==r;++s)e[t+s]=e[i+s]},_slerp:function(e,t,i,n){o.slerpFlat(e,t,e,t,e,i,n)},_lerp:function(e,t,i,n,r){for(var s=1-n,a=0;a!==r;++a){var o=t+a;e[o]=e[o]*s+e[i+a]*n}}});var va,Aa,ba,Sa,_a,xa,wa,Ta,Pa,Ca,Va,Ra,Na,Ma;function ka(e,t,i){var n=i||La.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,n)}function La(e,t,i){this.path=t,this.parsedPath=i||La.parseTrackName(t),this.node=La.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function Ia(){this.uuid=s.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,i=arguments.length;t!==i;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}function Ba(e,t,i){this._mixer=e,this._clip=t,this._localRoot=i||null;for(var n=t.tracks,r=n.length,s=new Array(r),a={endingStart:2400,endingEnd:2400},o=0;o!==r;++o){var l=n[o].createInterpolant(null);s[o]=l,l.settings=a}this._interpolantSettings=a,this._interpolants=s,this._propertyBindings=new Array(r),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Da(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Oa(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function qa(){_e.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Ya(e,t,i){Ui.call(this,e,t),this.meshPerAttribute=i||1}function Ha(e,t,i,n){"number"==typeof i&&(n=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),ue.call(this,e,t,i),this.meshPerAttribute=n||1}function Ga(e,t,i,n){this.ray=new Fe(e,t),this.near=i||0,this.far=n||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Fa(e,t){return e.distance-t.distance}function za(e,t,i,n){if(!1!==e.visible&&(e.raycast(t,i),!0===n))for(var r=e.children,s=0,a=r.length;s<a;s++)za(r[s],t,i,!0)}function Ua(e,t,i){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==i?i:0,this}function Wa(e,t,i){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==i?i:0,this}function Xa(e,t){this.min=void 0!==e?e:new a(1/0,1/0),this.max=void 0!==t?t:new a(-1/0,-1/0)}function ja(e,t){this.start=void 0!==e?e:new l,this.end=void 0!==t?t:new l}function Qa(e){se.call(this),this.material=e,this.render=function(){}}function Ka(e,t,i,n){this.object=e,this.size=void 0!==t?t:1;var r=void 0!==i?i:16711680,s=void 0!==n?n:1,a=0,o=this.object.geometry;o&&o.isGeometry?a=3*o.faces.length:o&&o.isBufferGeometry&&(a=o.attributes.normal.count);var l=new _e,h=new Ee(2*a*3,3);l.addAttribute("position",h),tn.call(this,l,new $i({color:r,linewidth:s})),this.matrixAutoUpdate=!1,this.update()}function Za(e,t){se.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var i=new _e,n=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],r=0,s=1;r<32;r++,s++){var a=r/32*Math.PI*2,o=s/32*Math.PI*2;n.push(Math.cos(a),Math.sin(a),1,Math.cos(o),Math.sin(o),1)}i.addAttribute("position",new Ee(n,3));var l=new $i({fog:!1});this.cone=new tn(i,l),this.add(this.cone),this.update()}function Ja(e){for(var t=function e(t){var i=[];t&&t.isBone&&i.push(t);for(var n=0;n<t.children.length;n++)i.push.apply(i,e(t.children[n]));return i}(e),i=new _e,n=[],r=[],s=new U(0,0,1),a=new U(0,1,0),o=0;o<t.length;o++){var l=t[o];l.parent&&l.parent.isBone&&(n.push(0,0,0),n.push(0,0,0),r.push(s.r,s.g,s.b),r.push(a.r,a.g,a.b))}i.addAttribute("position",new Ee(n,3)),i.addAttribute("color",new Ee(r,3));var h=new $i({vertexColors:2,depthTest:!1,depthWrite:!1,transparent:!0});tn.call(this,i,h),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function $a(e,t,i){this.light=e,this.light.updateMatrixWorld(),this.color=i;var n=new or(t,4,2),r=new Ue({wireframe:!0,fog:!1});We.call(this,n,r),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function eo(e,t){this.type="RectAreaLightHelper",this.light=e,this.color=t;var i=new _e;i.addAttribute("position",new Ee([1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),i.computeBoundingSphere();var n=new $i({fog:!1});en.call(this,i,n);var r=new _e;r.addAttribute("position",new Ee([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),r.computeBoundingSphere(),this.add(new We(r,new Ue({side:1,fog:!1}))),this.update()}function to(e,t,i){se.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i;var n=new En(t);n.rotateY(.5*Math.PI),this.material=new Ue({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=2);var r=n.getAttribute("position"),s=new Float32Array(3*r.count);n.addAttribute("color",new ue(s,3)),this.add(new We(n,this.material)),this.update()}function io(e,t){this.lightProbe=e,this.size=t;var i={GAMMA_OUTPUT:""},n=new Ge({defines:i,uniforms:{sh:{value:this.lightProbe.sh.coefficients},intensity:{value:this.lightProbe.intensity}},vertexShader:["varying vec3 vNormal;","void main() {","\tvNormal = normalize( normalMatrix * normal );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#define RECIPROCAL_PI 0.318309886","vec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {","\t// matrix is assumed to be orthogonal","\treturn normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );","}","vec3 linearToOutput( in vec3 a ) {","\t#ifdef GAMMA_OUTPUT","\t\treturn pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );","\t#else","\t\treturn a;","\t#endif","}","// source: https://graphics.stanford.edu/papers/envmap/envmap.pdf","vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {","\t// normal is assumed to have unit length","\tfloat x = normal.x, y = normal.y, z = normal.z;","\t// band 0","\tvec3 result = shCoefficients[ 0 ] * 0.886227;","\t// band 1","\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;","\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;","\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;","\t// band 2","\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;","\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;","\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );","\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;","\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );","\treturn result;","}","uniform vec3 sh[ 9 ]; // sh coefficients","uniform float intensity; // light probe intensity","varying vec3 vNormal;","void main() {","\tvec3 normal = normalize( vNormal );","\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );","\tvec3 irradiance = shGetIrradianceAt( worldNormal, sh );","\tvec3 outgoingLight = RECIPROCAL_PI * irradiance * intensity;","\toutgoingLight = linearToOutput( outgoingLight );","\tgl_FragColor = vec4( outgoingLight, 1.0 );","}"].join("\n")}),r=new or(1,32,16);We.call(this,r,n),this.onBeforeRender()}function no(e,t,i,n){e=e||10,t=t||10,i=new U(void 0!==i?i:4473924),n=new U(void 0!==n?n:8947848);for(var r=t/2,s=e/t,a=e/2,o=[],l=[],h=0,u=0,c=-a;h<=t;h++,c+=s){o.push(-a,0,c,a,0,c),o.push(c,0,-a,c,0,a);var d=h===r?i:n;d.toArray(l,u),u+=3,d.toArray(l,u),u+=3,d.toArray(l,u),u+=3,d.toArray(l,u),u+=3}var p=new _e;p.addAttribute("position",new Ee(o,3)),p.addAttribute("color",new Ee(l,3));var m=new $i({vertexColors:2});tn.call(this,p,m)}function ro(e,t,i,n,r,s){e=e||10,t=t||16,i=i||8,n=n||64,r=new U(void 0!==r?r:4473924),s=new U(void 0!==s?s:8947848);var a,o,l,h,u,c,d,p=[],m=[];for(h=0;h<=t;h++)l=h/t*(2*Math.PI),a=Math.sin(l)*e,o=Math.cos(l)*e,p.push(0,0,0),p.push(a,0,o),d=1&h?r:s,m.push(d.r,d.g,d.b),m.push(d.r,d.g,d.b);for(h=0;h<=i;h++)for(d=1&h?r:s,c=e-e/i*h,u=0;u<n;u++)l=u/n*(2*Math.PI),a=Math.sin(l)*c,o=Math.cos(l)*c,p.push(a,0,o),m.push(d.r,d.g,d.b),l=(u+1)/n*(2*Math.PI),a=Math.sin(l)*c,o=Math.cos(l)*c,p.push(a,0,o),m.push(d.r,d.g,d.b);var g=new _e;g.addAttribute("position",new Ee(p,3)),g.addAttribute("color",new Ee(m,3));var f=new $i({vertexColors:2});tn.call(this,g,f)}function so(e,t,i,n){this.audio=e,this.range=t||1,this.divisionsInnerAngle=i||16,this.divisionsOuterAngle=n||2;var r=new _e,s=this.divisionsInnerAngle+2*this.divisionsOuterAngle,a=new Float32Array(3*(3*s+3));r.addAttribute("position",new ue(a,3));var o=new $i({color:65280}),l=new $i({color:16776960});en.call(this,r,[l,o]),this.update()}function ao(e,t,i,n){this.object=e,this.size=void 0!==t?t:1;var r=void 0!==i?i:16776960,s=void 0!==n?n:1,a=0,o=this.object.geometry;o&&o.isGeometry?a=o.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var l=new _e,h=new Ee(2*a*3,3);l.addAttribute("position",h),tn.call(this,l,new $i({color:r,linewidth:s})),this.matrixAutoUpdate=!1,this.update()}function oo(e,t,i){se.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,void 0===t&&(t=1);var n=new _e;n.addAttribute("position",new Ee([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var r=new $i({fog:!1});this.lightPlane=new en(n,r),this.add(this.lightPlane),(n=new _e).addAttribute("position",new Ee([0,0,0,0,0,1],3)),this.targetLine=new en(n,r),this.add(this.targetLine),this.update()}function lo(e){var t=new _e,i=new $i({color:16777215,vertexColors:1}),n=[],r=[],s={},a=new U(16755200),o=new U(16711680),l=new U(43775),h=new U(16777215),u=new U(3355443);function c(e,t,i){d(e,i),d(t,i)}function d(e,t){n.push(0,0,0),r.push(t.r,t.g,t.b),void 0===s[e]&&(s[e]=[]),s[e].push(n.length/3-1)}c("n1","n2",a),c("n2","n4",a),c("n4","n3",a),c("n3","n1",a),c("f1","f2",a),c("f2","f4",a),c("f4","f3",a),c("f3","f1",a),c("n1","f1",a),c("n2","f2",a),c("n3","f3",a),c("n4","f4",a),c("p","n1",o),c("p","n2",o),c("p","n3",o),c("p","n4",o),c("u1","u2",l),c("u2","u3",l),c("u3","u1",l),c("c","t",h),c("p","c",u),c("cn1","cn2",u),c("cn3","cn4",u),c("cf1","cf2",u),c("cf3","cf4",u),t.addAttribute("position",new Ee(n,3)),t.addAttribute("color",new Ee(r,3)),tn.call(this,t,i),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}function ho(e,t){this.object=e,void 0===t&&(t=16776960);var i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Float32Array(24),r=new _e;r.setIndex(new ue(i,1)),r.addAttribute("position",new ue(n,3)),tn.call(this,r,new $i({color:t})),this.matrixAutoUpdate=!1,this.update()}function uo(e,t){this.type="Box3Helper",this.box=e;var i=void 0!==t?t:16776960,n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new _e;r.setIndex(new ue(n,1)),r.addAttribute("position",new Ee([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),tn.call(this,r,new $i({color:i})),this.geometry.computeBoundingSphere()}function co(e,t,i){this.type="PlaneHelper",this.plane=e,this.size=void 0===t?1:t;var n=void 0!==i?i:16776960,r=new _e;r.addAttribute("position",new Ee([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),r.computeBoundingSphere(),en.call(this,r,new $i({color:n}));var s=new _e;s.addAttribute("position",new Ee([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),s.computeBoundingSphere(),this.add(new We(s,new Ue({color:n,opacity:.2,transparent:!0,depthWrite:!1})))}function po(e,t,i,n,r,s){se.call(this),void 0===e&&(e=new l(0,0,1)),void 0===t&&(t=new l(0,0,0)),void 0===i&&(i=1),void 0===n&&(n=16776960),void 0===r&&(r=.2*i),void 0===s&&(s=.2*r),void 0===Va&&((Va=new _e).addAttribute("position",new Ee([0,0,0,0,1,0],3)),(Ra=new yr(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new en(Va,new $i({color:n})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new We(Ra,new Ue({color:n})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,r,s)}function mo(e){var t=[0,0,0,e=e||1,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=new _e;i.addAttribute("position",new Ee(t,3)),i.addAttribute("color",new Ee([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var n=new $i({vertexColors:2});tn.call(this,i,n)}Object.assign(ka.prototype,{getValue:function(e,t){this.bind();var i=this._targetGroup.nCachedObjects_,n=this._bindings[i];void 0!==n&&n.getValue(e,t)},setValue:function(e,t){for(var i=this._bindings,n=this._targetGroup.nCachedObjects_,r=i.length;n!==r;++n)i[n].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}),Object.assign(La,{Composite:ka,create:function(e,t,i){return e&&e.isAnimationObjectGroup?new La.Composite(e,t,i):new La(e,t,i)},sanitizeNodeName:(Ta=new RegExp("[\\[\\]\\.:\\/]","g"),function(e){return e.replace(/\s/g,"_").replace(Ta,"")}),parseTrackName:(va="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",Aa=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),ba=/(WCOD+)?/.source.replace("WCOD",va),Sa=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),_a=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),xa=new RegExp("^"+Aa+ba+Sa+_a+"$"),wa=["material","materials","bones"],function(e){var t=xa.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},n=i.nodeName&&i.nodeName.lastIndexOf(".");if(void 0!==n&&-1!==n){var r=i.nodeName.substring(n+1);-1!==wa.indexOf(r)&&(i.nodeName=i.nodeName.substring(0,n),i.objectName=r)}if(null===i.propertyName||0===i.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}),findNode:function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var i=e.skeleton.getBoneByName(t);if(void 0!==i)return i}if(e.children){var n=function(e){for(var i=0;i<e.length;i++){var r=e[i];if(r.name===t||r.uuid===t)return r;var s=n(r.children);if(s)return s}return null},r=n(e.children);if(r)return r}return null}}),Object.assign(La.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)e[t++]=i[n]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=e[t++]},function(e,t){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,i=t.objectName,n=t.propertyName,r=t.propertyIndex;if(e||(e=La.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(i){var s=t.objectIndex;switch(i){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var a=0;a<e.length;a++)if(e[a].name===s){s=a;break}break;default:if(void 0===e[i])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[i]}if(void 0!==s){if(void 0===e[s])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[s]}}var o=e[n];if(void 0!==o){var l=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);var h=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===n){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(a=0;a<this.node.geometry.morphAttributes.position.length;a++)if(e.geometry.morphAttributes.position[a].name===r){r=a;break}}else{if(!e.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(a=0;a<this.node.geometry.morphTargets.length;a++)if(e.geometry.morphTargets[a].name===r){r=a;break}}}h=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=r}else void 0!==o.fromArray&&void 0!==o.toArray?(h=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(h=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=n;this.getValue=this.GetterByBindingType[h],this.setValue=this.SetterByBindingTypeAndVersioning[h][l]}else{var u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+n+" but it wasn't found.",e)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(La.prototype,{_getValue_unbound:La.prototype.getValue,_setValue_unbound:La.prototype.setValue}),Object.assign(Ia.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=e.length,i=this.nCachedObjects_,n=this._indicesByUUID,r=this._paths,s=this._parsedPaths,a=this._bindings,o=a.length,l=void 0,h=0,u=arguments.length;h!==u;++h){var c=arguments[h],d=c.uuid,p=n[d];if(void 0===p){p=t++,n[d]=p,e.push(c);for(var m=0,g=o;m!==g;++m)a[m].push(new La(c,r[m],s[m]))}else if(p<i){l=e[p];var f=--i,y=e[f];n[y.uuid]=p,e[p]=y,n[d]=f,e[f]=c;for(m=0,g=o;m!==g;++m){var E=a[m],v=E[f],A=E[p];E[p]=v,void 0===A&&(A=new La(c,r[m],s[m])),E[f]=A}}else e[p]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=i},remove:function(){for(var e=this._objects,t=this.nCachedObjects_,i=this._indicesByUUID,n=this._bindings,r=n.length,s=0,a=arguments.length;s!==a;++s){var o=arguments[s],l=o.uuid,h=i[l];if(void 0!==h&&h>=t){var u=t++,c=e[u];i[c.uuid]=h,e[h]=c,i[l]=u,e[u]=o;for(var d=0,p=r;d!==p;++d){var m=n[d],g=m[u],f=m[h];m[h]=g,m[u]=f}}}this.nCachedObjects_=t},uncache:function(){for(var e=this._objects,t=e.length,i=this.nCachedObjects_,n=this._indicesByUUID,r=this._bindings,s=r.length,a=0,o=arguments.length;a!==o;++a){var l=arguments[a],h=l.uuid,u=n[h];if(void 0!==u)if(delete n[h],u<i){var c=--i,d=e[c],p=e[E=--t];n[d.uuid]=u,e[u]=d,n[p.uuid]=c,e[c]=p,e.pop();for(var m=0,g=s;m!==g;++m){var f=(v=r[m])[c],y=v[E];v[u]=f,v[c]=y,v.pop()}}else{var E;n[(p=e[E=--t]).uuid]=u,e[u]=p,e.pop();for(m=0,g=s;m!==g;++m){var v;(v=r[m])[u]=v[E],v.pop()}}}this.nCachedObjects_=i},subscribe_:function(e,t){var i=this._bindingsIndicesByPath,n=i[e],r=this._bindings;if(void 0!==n)return r[n];var s=this._paths,a=this._parsedPaths,o=this._objects,l=o.length,h=this.nCachedObjects_,u=new Array(l);n=r.length,i[e]=n,s.push(e),a.push(t),r.push(u);for(var c=h,d=o.length;c!==d;++c){var p=o[c];u[c]=new La(p,e,t)}return u},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,i=t[e];if(void 0!==i){var n=this._paths,r=this._parsedPaths,s=this._bindings,a=s.length-1,o=s[a];t[e[a]]=i,s[i]=o,s.pop(),r[i]=r[a],r.pop(),n[i]=n[a],n.pop()}}}),Object.assign(Ba.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){var n=this._clip.duration,r=e._clip.duration,s=r/n,a=n/r;e.warp(1,s,t),this.warp(a,1,t)}return this},crossFadeTo:function(e,t,i){return e.crossFadeFrom(this,t,i)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,i){var n=this._mixer,r=n.time,s=this._timeScaleInterpolant,a=this.timeScale;null===s&&(s=n._lendControlInterpolant(),this._timeScaleInterpolant=s);var o=s.parameterPositions,l=s.sampleValues;return o[0]=r,o[1]=r+i,l[0]=e/a,l[1]=t/a,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,i,n){if(this.enabled){var r=this._startTime;if(null!==r){var s=(e-r)*i;if(s<0||0===i)return;this._startTime=null,t=i*s}t*=this._updateTimeScale(e);var a=this._updateTime(t),o=this._updateWeight(e);if(o>0)for(var l=this._interpolants,h=this._propertyBindings,u=0,c=l.length;u!==c;++u)l[u].evaluate(a),h[u].accumulate(n,o)}else this._updateWeight(e)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var i=this._weightInterpolant;if(null!==i){var n=i.evaluate(e)[0];t*=n,e>i.parameterPositions[1]&&(this.stopFading(),0===n&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var i=this._timeScaleInterpolant;if(null!==i)t*=i.evaluate(e)[0],e>i.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e,i=this._clip.duration,n=this.loop,r=this._loopCount,s=2202===n;if(0===e)return-1===r?t:s&&1==(1&r)?i-t:t;if(2200===n){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=i)t=i;else{if(!(t<0))break e;t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===r&&(e>=0?(r=0,this._setEndings(!0,0===this.repetitions,s)):this._setEndings(0===this.repetitions,!0,s)),t>=i||t<0){var a=Math.floor(t/i);t-=i*a,r+=Math.abs(a);var o=this.repetitions-r;if(o<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?i:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===o){var l=e<0;this._setEndings(l,!l,s)}else this._setEndings(!1,!1,s);this._loopCount=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}if(s&&1==(1&r))return this.time=t,i-t}return this.time=t,t},_setEndings:function(e,t,i){var n=this._interpolantSettings;i?(n.endingStart=2401,n.endingEnd=2401):(n.endingStart=e?this.zeroSlopeAtStart?2401:2400:2402,n.endingEnd=t?this.zeroSlopeAtEnd?2401:2400:2402)},_scheduleFading:function(e,t,i){var n=this._mixer,r=n.time,s=this._weightInterpolant;null===s&&(s=n._lendControlInterpolant(),this._weightInterpolant=s);var a=s.parameterPositions,o=s.sampleValues;return a[0]=r,o[0]=t,a[1]=r+e,o[1]=i,this}}),Da.prototype=Object.assign(Object.create(t.prototype),{constructor:Da,_bindAction:function(e,t){var i=e._localRoot||this._root,n=e._clip.tracks,r=n.length,s=e._propertyBindings,a=e._interpolants,o=i.uuid,l=this._bindingsByRootAndName,h=l[o];void 0===h&&(h={},l[o]=h);for(var u=0;u!==r;++u){var c=n[u],d=c.name,p=h[d];if(void 0!==p)s[u]=p;else{if(void 0!==(p=s[u])){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,o,d));continue}var m=t&&t._propertyBindings[u].binding.parsedPath;++(p=new Ea(La.create(i,d,m),c.ValueTypeName,c.getValueSize())).referenceCount,this._addInactiveBinding(p,o,d),s[u]=p}a[u].resultBuffer=p.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,i=e._clip.uuid,n=this._actionsByClip[i];this._bindAction(e,n&&n.knownActions[0]),this._addInactiveAction(e,i,t)}for(var r=e._propertyBindings,s=0,a=r.length;s!==a;++s){var o=r[s];0==o.useCount++&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,i=0,n=t.length;i!==n;++i){var r=t[i];0==--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,i){var n=this._actions,r=this._actionsByClip,s=r[t];if(void 0===s)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=s;else{var a=s.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=n.length,n.push(e),s.actionByRoot[i]=e},_removeInactiveAction:function(e){var t=this._actions,i=t[t.length-1],n=e._cacheIndex;i._cacheIndex=n,t[n]=i,t.pop(),e._cacheIndex=null;var r=e._clip.uuid,s=this._actionsByClip,a=s[r],o=a.knownActions,l=o[o.length-1],h=e._byClipCacheIndex;l._byClipCacheIndex=h,o[h]=l,o.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===o.length&&delete s[r],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,i=0,n=t.length;i!==n;++i){var r=t[i];0==--r.referenceCount&&this._removeInactiveBinding(r)}},_lendAction:function(e){var t=this._actions,i=e._cacheIndex,n=this._nActiveActions++,r=t[n];e._cacheIndex=n,t[n]=e,r._cacheIndex=i,t[i]=r},_takeBackAction:function(e){var t=this._actions,i=e._cacheIndex,n=--this._nActiveActions,r=t[n];e._cacheIndex=n,t[n]=e,r._cacheIndex=i,t[i]=r},_addInactiveBinding:function(e,t,i){var n=this._bindingsByRootAndName,r=n[t],s=this._bindings;void 0===r&&(r={},n[t]=r),r[i]=e,e._cacheIndex=s.length,s.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,i=e.binding,n=i.rootNode.uuid,r=i.path,s=this._bindingsByRootAndName,a=s[n],o=t[t.length-1],l=e._cacheIndex;o._cacheIndex=l,t[l]=o,t.pop(),delete a[r];e:{for(var h in a)break e;delete s[n]}},_lendBinding:function(e){var t=this._bindings,i=e._cacheIndex,n=this._nActiveBindings++,r=t[n];e._cacheIndex=n,t[n]=e,r._cacheIndex=i,t[i]=r},_takeBackBinding:function(e){var t=this._bindings,i=e._cacheIndex,n=--this._nActiveBindings,r=t[n];e._cacheIndex=n,t[n]=e,r._cacheIndex=i,t[i]=r},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,i=e[t];return void 0===i&&((i=new Dr(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=i),i},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,i=e.__cacheIndex,n=--this._nActiveControlInterpolants,r=t[n];e.__cacheIndex=n,t[n]=e,r.__cacheIndex=i,t[i]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var i=t||this._root,n=i.uuid,r="string"==typeof e?Xr.findByName(i,e):e,s=null!==r?r.uuid:e,a=this._actionsByClip[s],o=null;if(void 0!==a){var l=a.actionByRoot[n];if(void 0!==l)return l;o=a.knownActions[0],null===r&&(r=o._clip)}if(null===r)return null;var h=new Ba(this,r,t);return this._bindAction(h,o),this._addInactiveAction(h,s,n),h},existingAction:function(e,t){var i=t||this._root,n=i.uuid,r="string"==typeof e?Xr.findByName(i,e):e,s=r?r.uuid:e,a=this._actionsByClip[s];return void 0!==a&&a.actionByRoot[n]||null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,i=this._bindings,n=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var r=0;r!==t;++r)e[r].reset();for(r=0;r!==n;++r)i[r].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,i=this._nActiveActions,n=this.time+=e,r=Math.sign(e),s=this._accuIndex^=1,a=0;a!==i;++a){t[a]._update(n,e,r,s)}var o=this._bindings,l=this._nActiveBindings;for(a=0;a!==l;++a)o[a].apply(s);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,i=e.uuid,n=this._actionsByClip,r=n[i];if(void 0!==r){for(var s=r.knownActions,a=0,o=s.length;a!==o;++a){var l=s[a];this._deactivateAction(l);var h=l._cacheIndex,u=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,u._cacheIndex=h,t[h]=u,t.pop(),this._removeInactiveBindingsForAction(l)}delete n[i]}},uncacheRoot:function(e){var t=e.uuid,i=this._actionsByClip;for(var n in i){var r=i[n].actionByRoot[t];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}var s=this._bindingsByRootAndName[t];if(void 0!==s)for(var a in s){var o=s[a];o.restoreOriginalState(),this._removeInactiveBinding(o)}},uncacheAction:function(e,t){var i=this.existingAction(e,t);null!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}}),Oa.prototype.clone=function(){return new Oa(void 0===this.value.clone?this.value:this.value.clone())},qa.prototype=Object.assign(Object.create(_e.prototype),{constructor:qa,isInstancedBufferGeometry:!0,copy:function(e){return _e.prototype.copy.call(this,e),this.maxInstancedCount=e.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)}}),Ya.prototype=Object.assign(Object.create(Ui.prototype),{constructor:Ya,isInstancedInterleavedBuffer:!0,copy:function(e){return Ui.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Ha.prototype=Object.assign(Object.create(ue.prototype),{constructor:Ha,isInstancedBufferAttribute:!0,copy:function(e){return ue.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(Ga.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,i){var n=i||[];return za(e,this,n,t),n.sort(Fa),n},intersectObjects:function(e,t,i){var n=i||[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),n;for(var r=0,s=e.length;r<s;r++)za(e[r],this,n,t);return n.sort(Fa),n}}),Object.assign(Ua.prototype,{set:function(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(s.clamp(t/this.radius,-1,1))),this}}),Object.assign(Wa.prototype,{set:function(e,t,i){return this.radius=e,this.theta=t,this.y=i,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}}),Object.assign(Xa.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new a;return function(t,i){var n=e.copy(i).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new a),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new a),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new a),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new a),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new a;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(ja.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new l),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new l),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new l),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:(Pa=new l,Ca=new l,function(e,t){Pa.subVectors(e,this.start),Ca.subVectors(this.end,this.start);var i=Ca.dot(Ca),n=Ca.dot(Pa)/i;return t&&(n=s.clamp(n,0,1)),n}),closestPointToPoint:function(e,t,i){var n=this.closestPointToPointParameter(e,t);return void 0===i&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),i=new l),this.delta(i).multiplyScalar(n).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),Qa.prototype=Object.create(se.prototype),Qa.prototype.constructor=Qa,Qa.prototype.isImmediateRenderObject=!0,Ka.prototype=Object.create(tn.prototype),Ka.prototype.constructor=Ka,Ka.prototype.update=function(){var e=new l,t=new l,i=new h;return function(){var n=["a","b","c"];this.object.updateMatrixWorld(!0),i.getNormalMatrix(this.object.matrixWorld);var r=this.object.matrixWorld,s=this.geometry.attributes.position,a=this.object.geometry;if(a&&a.isGeometry)for(var o=a.vertices,l=a.faces,h=0,u=0,c=l.length;u<c;u++)for(var d=l[u],p=0,m=d.vertexNormals.length;p<m;p++){var g=o[d[n[p]]],f=d.vertexNormals[p];e.copy(g).applyMatrix4(r),t.copy(f).applyMatrix3(i).normalize().multiplyScalar(this.size).add(e),s.setXYZ(h,e.x,e.y,e.z),h+=1,s.setXYZ(h,t.x,t.y,t.z),h+=1}else if(a&&a.isBufferGeometry){var y=a.attributes.position,E=a.attributes.normal;for(h=0,p=0,m=y.count;p<m;p++)e.set(y.getX(p),y.getY(p),y.getZ(p)).applyMatrix4(r),t.set(E.getX(p),E.getY(p),E.getZ(p)),t.applyMatrix3(i).normalize().multiplyScalar(this.size).add(e),s.setXYZ(h,e.x,e.y,e.z),h+=1,s.setXYZ(h,t.x,t.y,t.z),h+=1}s.needsUpdate=!0}}(),Za.prototype=Object.create(se.prototype),Za.prototype.constructor=Za,Za.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Za.prototype.update=function(){var e=new l;return function(){this.light.updateMatrixWorld();var t=this.light.distance?this.light.distance:1e3,i=t*Math.tan(this.light.angle);this.cone.scale.set(i,i,t),e.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(e),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),Ja.prototype=Object.create(tn.prototype),Ja.prototype.constructor=Ja,Ja.prototype.updateMatrixWorld=function(){var e=new l,t=new B,i=new B;return function(n){var r=this.bones,s=this.geometry,a=s.getAttribute("position");i.getInverse(this.root.matrixWorld);for(var o=0,l=0;o<r.length;o++){var h=r[o];h.parent&&h.parent.isBone&&(t.multiplyMatrices(i,h.matrixWorld),e.setFromMatrixPosition(t),a.setXYZ(l,e.x,e.y,e.z),t.multiplyMatrices(i,h.parent.matrixWorld),e.setFromMatrixPosition(t),a.setXYZ(l+1,e.x,e.y,e.z),l+=2)}s.getAttribute("position").needsUpdate=!0,se.prototype.updateMatrixWorld.call(this,n)}}(),$a.prototype=Object.create(We.prototype),$a.prototype.constructor=$a,$a.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},$a.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},eo.prototype=Object.create(en.prototype),eo.prototype.constructor=eo,eo.prototype.update=function(){if(this.scale.set(.5*this.light.width,.5*this.light.height,1),void 0!==this.color)this.material.color.set(this.color),this.children[0].material.color.set(this.color);else{this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var e=this.material.color,t=Math.max(e.r,e.g,e.b);t>1&&e.multiplyScalar(1/t),this.children[0].material.color.copy(this.material.color)}},eo.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()},to.prototype=Object.create(se.prototype),to.prototype.constructor=to,to.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},to.prototype.update=function(){var e=new l,t=new U,i=new U;return function(){var n=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var r=n.geometry.getAttribute("color");t.copy(this.light.color),i.copy(this.light.groundColor);for(var s=0,a=r.count;s<a;s++){var o=s<a/2?t:i;r.setXYZ(s,o.r,o.g,o.b)}r.needsUpdate=!0}n.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),io.prototype=Object.create(We.prototype),io.prototype.constructor=io,io.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},io.prototype.onBeforeRender=function(){this.position.copy(this.lightProbe.position),this.scale.set(1,1,1).multiplyScalar(this.size),this.material.uniforms.intensity.value=this.lightProbe.intensity},no.prototype=Object.assign(Object.create(tn.prototype),{constructor:no,copy:function(e){return tn.prototype.copy.call(this,e),this.geometry.copy(e.geometry),this.material.copy(e.material),this},clone:function(){return(new this.constructor).copy(this)}}),ro.prototype=Object.create(tn.prototype),ro.prototype.constructor=ro,so.prototype=Object.create(en.prototype),so.prototype.constructor=so,so.prototype.update=function(){var e,t,i=this.audio,n=this.range,r=this.divisionsInnerAngle,a=this.divisionsOuterAngle,o=s.degToRad(i.panner.coneInnerAngle),l=s.degToRad(i.panner.coneOuterAngle),h=o/2,u=l/2,c=0,d=0,p=this.geometry,m=p.attributes.position;function g(i,r,s,a){var o=(r-i)/s;for(m.setXYZ(c,0,0,0),d++,e=i;e<r;e+=o)t=c+d,m.setXYZ(t,Math.sin(e)*n,0,Math.cos(e)*n),m.setXYZ(t+1,Math.sin(Math.min(e+o,r))*n,0,Math.cos(Math.min(e+o,r))*n),m.setXYZ(t+2,0,0,0),d+=3;p.addGroup(c,d,a),c+=d,d=0}p.clearGroups(),g(-u,-h,a,0),g(-h,h,r,1),g(h,u,a,0),m.needsUpdate=!0,o===l&&(this.material[0].visible=!1)},so.prototype.dispose=function(){this.geometry.dispose(),this.material[0].dispose(),this.material[1].dispose()},ao.prototype=Object.create(tn.prototype),ao.prototype.constructor=ao,ao.prototype.update=function(){var e=new l,t=new l,i=new h;return function(){this.object.updateMatrixWorld(!0),i.getNormalMatrix(this.object.matrixWorld);for(var n=this.object.matrixWorld,r=this.geometry.attributes.position,s=this.object.geometry,a=s.vertices,o=s.faces,l=0,h=0,u=o.length;h<u;h++){var c=o[h],d=c.normal;e.copy(a[c.a]).add(a[c.b]).add(a[c.c]).divideScalar(3).applyMatrix4(n),t.copy(d).applyMatrix3(i).normalize().multiplyScalar(this.size).add(e),r.setXYZ(l,e.x,e.y,e.z),l+=1,r.setXYZ(l,t.x,t.y,t.z),l+=1}r.needsUpdate=!0}}(),oo.prototype=Object.create(se.prototype),oo.prototype.constructor=oo,oo.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},oo.prototype.update=function(){var e=new l,t=new l,i=new l;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),i.subVectors(t,e),this.lightPlane.lookAt(t),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(t),this.targetLine.scale.z=i.length()}}(),lo.prototype=Object.create(tn.prototype),lo.prototype.constructor=lo,lo.prototype.update=function(){var e,t,i=new l,n=new Pi;function r(r,s,a,o){i.set(s,a,o).unproject(n);var l=t[r];if(void 0!==l)for(var h=e.getAttribute("position"),u=0,c=l.length;u<c;u++)h.setXYZ(l[u],i.x,i.y,i.z)}return function(){e=this.geometry,t=this.pointMap;n.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),r("c",0,0,-1),r("t",0,0,1),r("n1",-1,-1,-1),r("n2",1,-1,-1),r("n3",-1,1,-1),r("n4",1,1,-1),r("f1",-1,-1,1),r("f2",1,-1,1),r("f3",-1,1,1),r("f4",1,1,1),r("u1",.7,1.1,-1),r("u2",-.7,1.1,-1),r("u3",0,2,-1),r("cf1",-1,0,1),r("cf2",1,0,1),r("cf3",0,-1,1),r("cf4",0,1,1),r("cn1",-1,0,-1),r("cn2",1,0,-1),r("cn3",0,-1,-1),r("cn4",0,1,-1),e.getAttribute("position").needsUpdate=!0}}(),ho.prototype=Object.create(tn.prototype),ho.prototype.constructor=ho,ho.prototype.update=function(){var e=new M;return function(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&e.setFromObject(this.object),!e.isEmpty()){var i=e.min,n=e.max,r=this.geometry.attributes.position,s=r.array;s[0]=n.x,s[1]=n.y,s[2]=n.z,s[3]=i.x,s[4]=n.y,s[5]=n.z,s[6]=i.x,s[7]=i.y,s[8]=n.z,s[9]=n.x,s[10]=i.y,s[11]=n.z,s[12]=n.x,s[13]=n.y,s[14]=i.z,s[15]=i.x,s[16]=n.y,s[17]=i.z,s[18]=i.x,s[19]=i.y,s[20]=i.z,s[21]=n.x,s[22]=i.y,s[23]=i.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),ho.prototype.setFromObject=function(e){return this.object=e,this.update(),this},ho.prototype.copy=function(e){return tn.prototype.copy.call(this,e),this.object=e.object,this},ho.prototype.clone=function(){return(new this.constructor).copy(this)},uo.prototype=Object.create(tn.prototype),uo.prototype.constructor=uo,uo.prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),se.prototype.updateMatrixWorld.call(this,e))},co.prototype=Object.create(en.prototype),co.prototype.constructor=co,co.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?1:0,this.lookAt(this.plane.normal),se.prototype.updateMatrixWorld.call(this,e)},po.prototype=Object.create(se.prototype),po.prototype.constructor=po,po.prototype.setDirection=(Ma=new l,function(e){e.y>.99999?this.quaternion.set(0,0,0,1):e.y<-.99999?this.quaternion.set(1,0,0,0):(Ma.set(e.z,0,-e.x).normalize(),Na=Math.acos(e.y),this.quaternion.setFromAxisAngle(Ma,Na))}),po.prototype.setLength=function(e,t,i){void 0===t&&(t=.2*e),void 0===i&&(i=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()},po.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)},po.prototype.copy=function(e){return se.prototype.copy.call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this},po.prototype.clone=function(){return(new this.constructor).copy(this)},mo.prototype=Object.create(tn.prototype),mo.prototype.constructor=mo;function go(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),ms.call(this,e),this.type="catmullrom",this.closed=!0}function fo(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),ms.call(this,e),this.type="catmullrom"}function yo(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),ms.call(this,e),this.type="catmullrom"}as.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(as.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(Ts.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new he,i=0,n=e.length;i<n;i++){var r=e[i];t.vertices.push(new l(r.x,r.y,r.z||0))}return t}}),Object.assign(Ps.prototype,{fromPoints:function(e){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),go.prototype=Object.create(ms.prototype),fo.prototype=Object.create(ms.prototype),yo.prototype=Object.create(ms.prototype),Object.assign(yo.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),no.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Ja.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(ra.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Hs.extractUrlBase(e)}}),Object.assign(zs.prototype,{setTexturePath:function(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}),Object.assign(Xa.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(M.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),ja.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(s,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),s.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),s.ceilPowerOfTwo(e)}}),Object.assign(h.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(B.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){var e;return function(){return void 0===e&&(e=new l),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,i,n,r,s){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,n,i,r,s)}}),L.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},o.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(Fe.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(ze.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign(ze,{barycoordFromPoint:function(e,t,i,n,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),ze.getBarycoord(e,t,i,n,r)},normal:function(e,t,i,n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),ze.getNormal(e,t,i,n)}}),Object.assign(Cs.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new er(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new dr(this,e)}}),Object.assign(a.prototype,{fromAttribute:function(e,t,i){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,i)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(l.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,i){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,i)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(P.prototype,{fromAttribute:function(e,t,i){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,i)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(he.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(se.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(se.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(Qi.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Zi.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Ki.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(as.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),Ci.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Vs.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(ue.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(_e.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,i){void 0!==i&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(_e.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.assign(tr.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(Oa.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(Ve.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new U}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===e}}}),Object.defineProperties(Pr.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(Ge.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(Hi.prototype,{clearTarget:function(e,t,i,n){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,i,n)},animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")}}),Object.defineProperties(Hi.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Si.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(R.prototype,{activeCubeFace:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeCubeFace has been removed. It is now the second parameter of WebGLRenderer.setRenderTarget().")}},activeMipMapLevel:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeMipMapLevel has been removed. It is now the third parameter of WebGLRenderer.setRenderTarget().")}}}),Object.defineProperties(C.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(qi.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}},userHeight:{set:function(){console.warn("THREE.WebVRManager: .userHeight has been removed.")}}}),ga.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new aa).load(e,(function(e){t.setBuffer(e)})),this},ya.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},da.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)};var Eo={merge:function(e,t,i){var n;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),n=t.matrix,t=t.geometry),e.merge(t,n,i)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}};x.crossOrigin=void 0,x.loadTexture=function(e,t,i,n){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var r=new ss;r.setCrossOrigin(this.crossOrigin);var s=r.load(e,i,void 0,n);return t&&(s.mapping=t),s},x.loadTextureCube=function(e,t,i,n){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var r=new rs;r.setCrossOrigin(this.crossOrigin);var s=r.load(e,i,void 0,n);return t&&(s.mapping=t),s},x.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},x.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};var vo={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}};e.WebGLMultisampleRenderTarget=V,e.WebGLRenderTargetCube=R,e.WebGLRenderTarget=C,e.WebGLRenderer=Hi,e.ShaderLib=j,e.UniformsLib=X,e.UniformsUtils=F,e.ShaderChunk=D,e.FogExp2=Gi,e.Fog=Fi,e.Scene=zi,e.Sprite=ji,e.LOD=Qi,e.SkinnedMesh=Ki,e.Skeleton=Zi,e.Bone=Ji,e.Mesh=We,e.LineSegments=tn,e.LineLoop=nn,e.Line=en,e.Points=sn,e.Group=Ti,e.VideoTexture=an,e.DataTexture=N,e.DataTexture2DArray=st,e.DataTexture3D=at,e.CompressedTexture=on,e.CubeTexture=rt,e.CanvasTexture=ln,e.DepthTexture=hn,e.Texture=T,e.AnimationLoader=es,e.CompressedTextureLoader=ts,e.DataTextureLoader=is,e.CubeTextureLoader=rs,e.TextureLoader=ss,e.ObjectLoader=zs,e.MaterialLoader=Ys,e.BufferGeometryLoader=Gs,e.DefaultLoadingManager=Zr,e.LoadingManager=Kr,e.ImageLoader=ns,e.ImageBitmapLoader=$s,e.FontLoader=na,e.FileLoader=$r,e.Loader=ra,e.LoaderUtils=Hs,e.Cache=Qr,e.AudioLoader=aa,e.SpotLightShadow=Ms,e.SpotLight=ks,e.PointLight=Ls,e.RectAreaLight=qs,e.HemisphereLight=Rs,e.HemisphereLightProbe=ha,e.DirectionalLightShadow=Bs,e.DirectionalLight=Ds,e.AmbientLight=Os,e.AmbientLightProbe=ua,e.LightShadow=Ns,e.Light=Vs,e.LightProbe=la,e.StereoCamera=ca,e.PerspectiveCamera=Ci,e.OrthographicCamera=Is,e.CubeCamera=da,e.ArrayCamera=Vi,e.Camera=Pi,e.AudioListener=ma,e.PositionalAudio=fa,e.AudioContext=sa,e.AudioAnalyser=ya,e.Audio=ga,e.VectorKeyframeTrack=Wr,e.StringKeyframeTrack=Ur,e.QuaternionKeyframeTrack=zr,e.NumberKeyframeTrack=Gr,e.ColorKeyframeTrack=Hr,e.BooleanKeyframeTrack=Yr,e.PropertyMixer=Ea,e.PropertyBinding=La,e.KeyframeTrack=qr,e.AnimationUtils=Lr,e.AnimationObjectGroup=Ia,e.AnimationMixer=Da,e.AnimationClip=Xr,e.Uniform=Oa,e.InstancedBufferGeometry=qa,e.BufferGeometry=_e,e.Geometry=he,e.InterleavedBufferAttribute=Wi,e.InstancedInterleavedBuffer=Ya,e.InterleavedBuffer=Ui,e.InstancedBufferAttribute=Ha,e.Face3=Z,e.Object3D=se,e.Raycaster=Ga,e.Layers=$,e.EventDispatcher=t,e.Clock=pa,e.QuaternionLinearInterpolant=Fr,e.LinearInterpolant=Dr,e.DiscreteInterpolant=Or,e.CubicInterpolant=Br,e.Interpolant=Ir,e.Triangle=ze,e.Math=s,e.Spherical=Ua,e.Cylindrical=Wa,e.Plane=L,e.Frustum=I,e.Sphere=k,e.Ray=Fe,e.Matrix4=B,e.Matrix3=h,e.Box3=M,e.Box2=Xa,e.Line3=ja,e.Euler=J,e.Vector4=P,e.Vector3=l,e.Vector2=a,e.Quaternion=o,e.Color=U,e.SphericalHarmonics3=oa,e.ImmediateRenderObject=Qa,e.VertexNormalsHelper=Ka,e.SpotLightHelper=Za,e.SkeletonHelper=Ja,e.PointLightHelper=$a,e.RectAreaLightHelper=eo,e.HemisphereLightHelper=to,e.LightProbeHelper=io,e.GridHelper=no,e.PolarGridHelper=ro,e.PositionalAudioHelper=so,e.FaceNormalsHelper=ao,e.DirectionalLightHelper=oo,e.CameraHelper=lo,e.BoxHelper=ho,e.Box3Helper=uo,e.PlaneHelper=co,e.ArrowHelper=po,e.AxesHelper=mo,e.Shape=Cs,e.Path=Ps,e.ShapePath=ea,e.Font=ta,e.CurvePath=Ts,e.Curve=as,e.ImageUtils=x,e.ShapeUtils=Zn,e.WebGLUtils=wi,e.WireframeGeometry=un,e.ParametricGeometry=cn,e.ParametricBufferGeometry=dn,e.TetrahedronGeometry=gn,e.TetrahedronBufferGeometry=fn,e.OctahedronGeometry=yn,e.OctahedronBufferGeometry=En,e.IcosahedronGeometry=vn,e.IcosahedronBufferGeometry=An,e.DodecahedronGeometry=bn,e.DodecahedronBufferGeometry=Sn,e.PolyhedronGeometry=pn,e.PolyhedronBufferGeometry=mn,e.TubeGeometry=_n,e.TubeBufferGeometry=xn,e.TorusKnotGeometry=wn,e.TorusKnotBufferGeometry=Tn,e.TorusGeometry=Pn,e.TorusBufferGeometry=Cn,e.TextGeometry=rr,e.TextBufferGeometry=sr,e.SphereGeometry=ar,e.SphereBufferGeometry=or,e.RingGeometry=lr,e.RingBufferGeometry=hr,e.PlaneGeometry=Te,e.PlaneBufferGeometry=Pe,e.LatheGeometry=ur,e.LatheBufferGeometry=cr,e.ShapeGeometry=dr,e.ShapeBufferGeometry=pr,e.ExtrudeGeometry=er,e.ExtrudeBufferGeometry=tr,e.EdgesGeometry=gr,e.ConeGeometry=Er,e.ConeBufferGeometry=vr,e.CylinderGeometry=fr,e.CylinderBufferGeometry=yr,e.CircleGeometry=Ar,e.CircleBufferGeometry=br,e.BoxGeometry=xe,e.CubeGeometry=xe,e.BoxBufferGeometry=we,e.ShadowMaterial=_r,e.SpriteMaterial=Xi,e.RawShaderMaterial=xr,e.ShaderMaterial=Ge,e.PointsMaterial=rn,e.MeshPhysicalMaterial=Tr,e.MeshStandardMaterial=wr,e.MeshPhongMaterial=Pr,e.MeshToonMaterial=Cr,e.MeshNormalMaterial=Vr,e.MeshLambertMaterial=Rr,e.MeshDepthMaterial=Ai,e.MeshDistanceMaterial=bi,e.MeshBasicMaterial=Ue,e.MeshMatcapMaterial=Nr,e.LineDashedMaterial=Mr,e.LineBasicMaterial=$i,e.Material=Ve,e.Float64BufferAttribute=ve,e.Float32BufferAttribute=Ee,e.Uint32BufferAttribute=ye,e.Int32BufferAttribute=fe,e.Uint16BufferAttribute=ge,e.Int16BufferAttribute=me,e.Uint8ClampedBufferAttribute=pe,e.Uint8BufferAttribute=de,e.Int8BufferAttribute=ce,e.BufferAttribute=ue,e.ArcCurve=ls,e.CatmullRomCurve3=ms,e.CubicBezierCurve=Es,e.CubicBezierCurve3=vs,e.EllipseCurve=os,e.LineCurve=As,e.LineCurve3=bs,e.QuadraticBezierCurve=Ss,e.QuadraticBezierCurve3=_s,e.SplineCurve=xs,e.REVISION="104",e.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},e.CullFaceNone=0,e.CullFaceBack=1,e.CullFaceFront=2,e.CullFaceFrontBack=3,e.FrontFaceDirectionCW=0,e.FrontFaceDirectionCCW=1,e.BasicShadowMap=0,e.PCFShadowMap=1,e.PCFSoftShadowMap=2,e.FrontSide=0,e.BackSide=1,e.DoubleSide=2,e.FlatShading=1,e.SmoothShading=2,e.NoColors=0,e.FaceColors=1,e.VertexColors=2,e.NoBlending=0,e.NormalBlending=1,e.AdditiveBlending=2,e.SubtractiveBlending=3,e.MultiplyBlending=4,e.CustomBlending=5,e.AddEquation=100,e.SubtractEquation=101,e.ReverseSubtractEquation=102,e.MinEquation=103,e.MaxEquation=104,e.ZeroFactor=200,e.OneFactor=201,e.SrcColorFactor=202,e.OneMinusSrcColorFactor=203,e.SrcAlphaFactor=204,e.OneMinusSrcAlphaFactor=205,e.DstAlphaFactor=206,e.OneMinusDstAlphaFactor=207,e.DstColorFactor=208,e.OneMinusDstColorFactor=209,e.SrcAlphaSaturateFactor=210,e.NeverDepth=0,e.AlwaysDepth=1,e.LessDepth=2,e.LessEqualDepth=3,e.EqualDepth=4,e.GreaterEqualDepth=5,e.GreaterDepth=6,e.NotEqualDepth=7,e.MultiplyOperation=0,e.MixOperation=1,e.AddOperation=2,e.NoToneMapping=0,e.LinearToneMapping=1,e.ReinhardToneMapping=2,e.Uncharted2ToneMapping=3,e.CineonToneMapping=4,e.ACESFilmicToneMapping=5,e.UVMapping=300,e.CubeReflectionMapping=301,e.CubeRefractionMapping=302,e.EquirectangularReflectionMapping=303,e.EquirectangularRefractionMapping=304,e.SphericalReflectionMapping=305,e.CubeUVReflectionMapping=306,e.CubeUVRefractionMapping=307,e.RepeatWrapping=1e3,e.ClampToEdgeWrapping=1001,e.MirroredRepeatWrapping=1002,e.NearestFilter=1003,e.NearestMipMapNearestFilter=1004,e.NearestMipMapLinearFilter=1005,e.LinearFilter=1006,e.LinearMipMapNearestFilter=1007,e.LinearMipMapLinearFilter=1008,e.UnsignedByteType=1009,e.ByteType=1010,e.ShortType=1011,e.UnsignedShortType=1012,e.IntType=1013,e.UnsignedIntType=1014,e.FloatType=1015,e.HalfFloatType=1016,e.UnsignedShort4444Type=1017,e.UnsignedShort5551Type=1018,e.UnsignedShort565Type=1019,e.UnsignedInt248Type=1020,e.AlphaFormat=1021,e.RGBFormat=1022,e.RGBAFormat=1023,e.LuminanceFormat=1024,e.LuminanceAlphaFormat=1025,e.RGBEFormat=1023,e.DepthFormat=1026,e.DepthStencilFormat=1027,e.RedFormat=1028,e.RGB_S3TC_DXT1_Format=33776,e.RGBA_S3TC_DXT1_Format=33777,e.RGBA_S3TC_DXT3_Format=33778,e.RGBA_S3TC_DXT5_Format=33779,e.RGB_PVRTC_4BPPV1_Format=35840,e.RGB_PVRTC_2BPPV1_Format=35841,e.RGBA_PVRTC_4BPPV1_Format=35842,e.RGBA_PVRTC_2BPPV1_Format=35843,e.RGB_ETC1_Format=36196,e.RGBA_ASTC_4x4_Format=37808,e.RGBA_ASTC_5x4_Format=37809,e.RGBA_ASTC_5x5_Format=37810,e.RGBA_ASTC_6x5_Format=37811,e.RGBA_ASTC_6x6_Format=37812,e.RGBA_ASTC_8x5_Format=37813,e.RGBA_ASTC_8x6_Format=37814,e.RGBA_ASTC_8x8_Format=37815,e.RGBA_ASTC_10x5_Format=37816,e.RGBA_ASTC_10x6_Format=37817,e.RGBA_ASTC_10x8_Format=37818,e.RGBA_ASTC_10x10_Format=37819,e.RGBA_ASTC_12x10_Format=37820,e.RGBA_ASTC_12x12_Format=37821,e.LoopOnce=2200,e.LoopRepeat=2201,e.LoopPingPong=2202,e.InterpolateDiscrete=2300,e.InterpolateLinear=2301,e.InterpolateSmooth=2302,e.ZeroCurvatureEnding=2400,e.ZeroSlopeEnding=2401,e.WrapAroundEnding=2402,e.TrianglesDrawMode=0,e.TriangleStripDrawMode=1,e.TriangleFanDrawMode=2,e.LinearEncoding=3e3,e.sRGBEncoding=3001,e.GammaEncoding=3007,e.RGBEEncoding=3002,e.LogLuvEncoding=3003,e.RGBM7Encoding=3004,e.RGBM16Encoding=3005,e.RGBDEncoding=3006,e.BasicDepthPacking=3200,e.RGBADepthPacking=3201,e.TangentSpaceNormalMap=0,e.ObjectSpaceNormalMap=1,e.Face4=function(e,t,i,n,r,s,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new Z(e,t,i,r,s,a)},e.LineStrip=0,e.LinePieces=1,e.MeshFaceMaterial=function(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e},e.MultiMaterial=function(e){return void 0===e&&(e=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e},e.PointCloud=function(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new sn(e,t)},e.Particle=function(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new ji(e)},e.ParticleSystem=function(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new sn(e,t)},e.PointCloudMaterial=function(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new rn(e)},e.ParticleBasicMaterial=function(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new rn(e)},e.ParticleSystemMaterial=function(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new rn(e)},e.Vertex=function(e,t,i){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new l(e,t,i)},e.DynamicBufferAttribute=function(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new ue(e,t).setDynamic(!0)},e.Int8Attribute=function(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new ce(e,t)},e.Uint8Attribute=function(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new de(e,t)},e.Uint8ClampedAttribute=function(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new pe(e,t)},e.Int16Attribute=function(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new me(e,t)},e.Uint16Attribute=function(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new ge(e,t)},e.Int32Attribute=function(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new fe(e,t)},e.Uint32Attribute=function(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new ye(e,t)},e.Float32Attribute=function(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Ee(e,t)},e.Float64Attribute=function(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new ve(e,t)},e.ClosedSplineCurve3=go,e.SplineCurve3=fo,e.Spline=yo,e.AxisHelper=function(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new mo(e)},e.BoundingBoxHelper=function(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new ho(e,t)},e.EdgesHelper=function(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new tn(new gr(e.geometry),new $i({color:void 0!==t?t:16777215}))},e.WireframeHelper=function(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new tn(new un(e.geometry),new $i({color:void 0!==t?t:16777215}))},e.XHRLoader=function(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new $r(e)},e.BinaryTextureLoader=function(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new is(e)},e.GeometryUtils=Eo,e.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}},e.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been removed")},e.JSONLoader=function(){console.error("THREE.JSONLoader has been removed.")},e.SceneUtils=vo,e.LensFlare=function(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")},Object.defineProperty(e,"__esModule",{value:!0})})),n=this,r=()=>{const e=e=>0===e.length||0===e.indexOf("?");return function(){const t=(e,t,n,r,s)=>{if(!e)if(r.public)if(i.addWarning(t,n,s),r.hasOwnProperty("defaultValue"))n=r.defaultValue;else{const e=h[r.type];l(e.hasOwnProperty("defaultValue"),"Type must have a default value if the provided schema does not have one."),n=e.defaultValue}else l(e,s);return n},i={warnings:[],get:function(e,t){return this.getForString(e,t,window.location.search)},getAll:function(e){return this.getAllForString(e,window.location.search)},getForString:function(i,s,l){if(!e(l))throw new Error('Query strings should be either the empty string or start with a "?": '+l);const u=s.private&&!(()=>{try{return"true"===localStorage.getItem("phetTeamMember")}catch(e){return!1}})()?[]:n(i,l);r(i,s);let c=a(i,s,u);s.hasOwnProperty("validValues")?c=t(o(c,s.validValues),i,c,s,`Invalid value supplied for key "${i}": ${c} is not a member of valid values: ${s.validValues.join(", ")}`):s.hasOwnProperty("isValidValue")&&(c=t(s.isValidValue(c),i,c,s,`Invalid value supplied for key "${i}": ${c}`));let d=h[s.type].isValidValue(c);if("array"===s.type&&Array.isArray(c)){let e=!0;for(let t=0;t<c.length;t++){const i=c[t];if(!h[s.elementSchema.type].isValidValue(i)){e=!1;break}if(s.elementSchema.hasOwnProperty("isValidValue")&&!s.elementSchema.isValidValue(i)){e=!1;break}if(s.elementSchema.hasOwnProperty("validValues")&&!o(i,s.elementSchema.validValues)){e=!1;break}}d=d&&e}return c=t(d,i,c,s,"Invalid value for type, key: "+i),c},getAllForString:function(e,t){const i={};for(const n in e)e.hasOwnProperty(n)&&(i[n]=this.getForString(n,e[n],t));return i},containsKey:function(e){return this.containsKeyForString(e,window.location.search)},containsKeyForString:function(t,i){if(!e(i))throw new Error('Query strings should be either the empty string or start with a "?": '+i);return n(t,i).length>0},deepEquals:function(e,t){if(typeof e!=typeof t)return!1;if("string"==typeof e||"number"==typeof e||"boolean"==typeof e)return e===t;if(null===e&&null===t)return!0;if(void 0===e&&void 0===t)return!0;if(null===e&&void 0===t)return!1;if(void 0===e&&null===t)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;if(0===n.length)return e===t;for(let s=0;s<n.length;s++){if(n[s]!==r[s])return!1;const a=e[n[s]],o=t[n[s]];if(!i.deepEquals(a,o))return!1}return!0},removeKeyValuePair:function(e,t){if(0===e.indexOf("?")){const i=[],n=e.substring(1).split("&");for(let e=0;e<n.length;e++){const r=n[e],s=r.split("=");decodeURIComponent(s[0])!==t&&i.push(r)}return i.length>0?"?"+i.join("&"):""}return e},removeKeyValuePairs:function(e,t){for(let i=0;i<t.length;i++)e=this.removeKeyValuePair(e,t[i]);return e},appendQueryString:function(e,t){if(0!==t.indexOf("?")&&0!==t.indexOf("&")||(t=t.substring(1)),0===t.length)return e;const i=e.indexOf("?")>=0?"&":"?";return e+i+t},appendQueryStringArray:function(e,t){for(let i=0;i<t.length;i++)e=this.appendQueryString(e,t[i]);return e},getQueryString:function(e){const t=e.indexOf("?");return t>=0?e.substring(t):"?"},addWarning:function(e,t,i){console.warn(i),this.warnings.push({key:e,value:t,message:i})},hasWarning:function(e){let t=!1;for(let i=0;i<this.warnings.length&&!t;i++)t=this.warnings[i].key===e;return t},getQueryParametersFromString:function(e){return 0===e.indexOf("?")?e.substring(1).split("&"):[]},getSingleQueryParameterString:function(e,t){const i=this.getQueryString(t),n=this.getQueryParametersFromString(i);for(let r=0;r<n.length;r++){const t=n[r],i=t.split("=");if(decodeURIComponent(i[0])===e)return t}return null}},n=function(e,t){const i=[],n=t.slice(1).split("&");for(let r=0;r<n.length;r++){const t=n[r].split("="),s=t[0],a=t.slice(1).join("=");s===e&&(a?i.push(decodeURIComponent(a)):i.push(null))}return i},r=function(e,t){l(t.hasOwnProperty("type"),"type field is required for key: "+e),l(h.hasOwnProperty(t.type),`invalid type: ${t.type} for key: ${e}`),t.hasOwnProperty("parse")&&l("function"==typeof t.parse,"parse must be a function for key: "+e),l(!(t.hasOwnProperty("validValues")&&t.hasOwnProperty("isValidValue")),t,e,"validValues and isValidValue are mutually exclusive for key: "+e),t.hasOwnProperty("validValues")&&l(Array.isArray(t.validValues),"isValidValue must be an array for key: "+e),t.hasOwnProperty("isValidValue")&&l("function"==typeof t.isValidValue,"isValidValue must be a function for key: "+e),t.hasOwnProperty("defaultValue")&&l(h[t.type].isValidValue(t.defaultValue),"defaultValue incorrect type: "+e),t.hasOwnProperty("validValues")&&t.validValues.forEach(i=>l(h[t.type].isValidValue(i),"validValue incorrect type for key: "+e)),t.hasOwnProperty("defaultValue")&&t.hasOwnProperty("validValues")&&l(o(t.defaultValue,t.validValues),t,e,"defaultValue must be a member of validValues, for key: "+e),t.hasOwnProperty("public")&&t.public&&"flag"!==t.type&&l(t.hasOwnProperty("defaultValue"),"defaultValue is required when public: true for key: "+e),s(e,t,h[t.type].required,h[t.type].optional),h[t.type].validateSchema&&h[t.type].validateSchema(e,t)},s=function(e,t,i,n){const r=Object.getOwnPropertyNames(t);i.forEach(t=>{l(-1!==r.indexOf(t),`missing required property: ${t} for key: ${e}`)});const s=i.concat(n);r.forEach(t=>{l("type"===t||-1!==s.indexOf(t),`unsupported property: ${t} for key: ${e}`)})},a=function(e,t,i){let n;return l(i.length<=1,"query parameter cannot occur multiple times: "+e),"flag"===t.type?n=h[t.type].parse(e,t,i[0]):(l(void 0!==i[0]||t.hasOwnProperty("defaultValue"),"missing required query parameter: "+e),n=void 0===i[0]?t.defaultValue:h[t.type].parse(e,t,i[0])),n},o=function(e,t){let n=!1;for(let r=0;r<t.length&&!n;r++)n=i.deepEquals(t[r],e);return n},l=function(e,t){if(!e)throw console&&console.log&&console.log(t),new Error("Query String Machine Assertion failed: "+t)},h={flag:{required:[],optional:["private","public"],validateSchema:null,parse:function(e,t,i){return null===i||void 0!==i&&i},isValidValue:e=>!0===e||!1===e,defaultValue:!0},boolean:{required:[],optional:["defaultValue","private","public"],validateSchema:null,parse:function(e,t,i){return"true"===i||"false"!==i&&i},isValidValue:e=>!0===e||!1===e},number:{required:[],optional:["defaultValue","validValues","isValidValue","private","public"],validateSchema:null,parse:function(e,t,i){const n=Number(i);return null===i||isNaN(n)?i:n},isValidValue:e=>"number"==typeof e&&!isNaN(e)},string:{required:[],optional:["defaultValue","validValues","isValidValue","private","public"],validateSchema:null,parse:function(e,t,i){return i},isValidValue:e=>null===e||"string"==typeof e},array:{required:["elementSchema"],optional:["defaultValue","validValues","isValidValue","separator","validValues","private","public"],validateSchema:function(e,t){t.hasOwnProperty("separator")&&l("string"==typeof t.separator&&1===t.separator.length,`invalid separator: ${t.separator}, for key: ${e}`),l(!t.elementSchema.hasOwnProperty("public"),"Array elements should not declare public; it comes from the array schema itself."),r(e+".element",t.elementSchema)},parse:function(e,t,i){let n;return n=null===i?[]:i.split(t.separator||",").map(i=>a(e,t.elementSchema,[i])),n},isValidValue:e=>Array.isArray(e)||null===e},custom:{required:["parse"],optional:["defaultValue","validValues","isValidValue","private","public"],validateSchema:null,parse:function(e,t,i){return t.parse(i)},isValidValue:e=>!0}};return i}()},"function"==typeof window.define&&window.define.amd?window.define([],r):"object"==typeof module&&module.exports?module.exports=r():n.QueryStringMachine=r(),function(){const e=_.hasIn(window,"phet.chipper.packageObject")?phet.chipper.packageObject:{},t=e.phet||{},i=!_.hasIn(window,"phet.chipper.allowLocaleSwitching")||phet.chipper.allowLocaleSwitching,n=t.simFeatures||{},r=n.colorProfiles||["default"],s={allowLinks:{type:"boolean",defaultValue:!0,public:!0},audio:{type:"string",defaultValue:"enabled",validValues:["enabled","disabled","muted"],public:!0},binder:{type:"flag"},brand:{type:"string",defaultValue:"adapted-from-phet"},buildCompatible:{type:"flag"},continuousTest:{type:"string",defaultValue:""},colorProfile:{type:"string",defaultValue:r[0],validValues:r,public:!0},debugger:{type:"flag"},deprecationWarnings:{type:"flag"},dev:{type:"flag"},disableModals:{type:"flag"},ea:{type:"flag"},eall:{type:"flag"},extraSoundInitiallyEnabled:{type:"flag",public:!0},fuzz:{type:"flag"},fuzzBoard:{type:"flag"},fuzzMouse:{type:"flag"},fuzzPointers:{type:"number",defaultValue:1},fuzzTouch:{type:"flag"},fuzzRate:{type:"number",defaultValue:100,isValidValue:function(e){return e>0}},ga4:{type:"string",defaultValue:null},gameUp:{type:"flag"},gameUpTestHarness:{type:"flag"},gameUpLogging:{type:"flag"},gaPage:{type:"string",defaultValue:null},homeScreen:{type:"boolean",defaultValue:!0,public:!0},initialScreen:{type:"number",defaultValue:0,public:!0},legendsOfLearning:{type:"flag"},listenerLimit:{type:"number",defaultValue:Number.POSITIVE_INFINITY,public:!1},locale:{type:"string",defaultValue:"en"},locales:{type:"array",elementSchema:{type:"string"},defaultValue:[]},supportsDynamicLocale:{type:"boolean",defaultValue:i&&(!n.hasOwnProperty("supportsDynamicLocale")||n.supportsDynamicLocale)},log:{type:"flag"},memoryLimit:{type:"number",defaultValue:0},mobileA11yTest:{type:"flag"},parentLimit:{type:"number",defaultValue:Number.POSITIVE_INFINITY,public:!1},"phet-android-app":{type:"flag"},"phet-app":{type:"flag"},playbackMode:{type:"boolean",defaultValue:!1},postMessageOnBeforeUnload:{type:"flag"},postMessageOnError:{type:"flag"},postMessageOnLoad:{type:"flag"},postMessageOnReady:{type:"flag"},preserveDrawingBuffer:{type:"flag"},preventFullScreen:{type:"flag"},profiler:{type:"flag"},qrCode:{type:"flag"},randomSeed:{type:"number",defaultValue:Math.random()},regionAndCulture:{public:!0,type:"string",validValues:n.supportedRegionsAndCultures||[null],defaultValue:n.supportedRegionsAndCultures&&n.supportedRegionsAndCultures[0]?n.supportedRegionsAndCultures[0]:null},rootRenderer:{type:"string",defaultValue:null,validValues:[null,"canvas","svg","dom","webgl","vello"]},sceneryLog:{type:"array",elementSchema:{type:"string"},defaultValue:null},sceneryStringLog:{type:"flag"},screens:{type:"array",elementSchema:{type:"number",isValidValue:Number.isInteger},defaultValue:null,isValidValue:function(e){return null===e||e.length===_.uniq(e).length&&e.length>0},public:!0},showAnswers:{type:"flag",private:!0},showCanvasNodeBounds:{type:"flag"},showFittedBlockBounds:{type:"flag"},showHitAreas:{type:"flag"},showPointerAreas:{type:"flag"},showPointers:{type:"flag"},showVisibleBounds:{type:"flag"},listenerOrder:{type:"string",defaultValue:"default",isValidValue:function(e){return"default"===e||"random"===e||"reverse"===e||e.match(/random(?:%28|\()(\d+)(?:%29|\))/)}},speechSynthesisFromParent:{type:"flag"},speed:{type:"number",defaultValue:1,isValidValue:function(e){return e>0}},strings:{type:"string",defaultValue:null},stringTest:{type:"string",defaultValue:null},keyboardLocaleSwitcher:{type:"flag"},supportsInteractiveDescription:{type:"boolean",defaultValue:!!n.supportsInteractiveDescription},supportsInteractiveHighlights:{type:"boolean",defaultValue:n.hasOwnProperty("supportsInteractiveHighlights")?!!n.supportsInteractiveHighlights:!!n.supportsInteractiveDescription},interactiveHighlightsInitiallyEnabled:{type:"flag",public:!0},supportsGestureControl:{type:"boolean",defaultValue:!!n.supportsGestureControl},supportsVoicing:{type:"boolean",defaultValue:!!n.supportsVoicing},swashText:{type:"boolean",defaultValue:!0},swashTextColor:{type:"string",defaultValue:""},voicingInitiallyEnabled:{type:"flag"},preferencesStorage:{type:"flag"},printVoicingResponses:{type:"flag"},supportsPanAndZoom:{type:"boolean",public:!0,defaultValue:!n.hasOwnProperty("supportsPanAndZoom")||n.supportsPanAndZoom},supportsSound:{type:"boolean",defaultValue:!!n.supportsSound},supportsExtraSound:{type:"boolean",defaultValue:!!n.supportsExtraSound},vibrationParadigm:{type:"string",defaultValue:null},webgl:{type:"boolean",defaultValue:!0}};function a(e){const t=new Date;let i;do{i=new Date}while(i-t<e)}!function(){window.phet=window.phet||{},window.phet.chipper=window.phet.chipper||{},window.phet.chipper.queryParameters=QueryStringMachine.getAll(s),window.phet.chipper.colorProfiles=r,window.phet.chipper.isFuzzEnabled=()=>window.phet.chipper.queryParameters.fuzz||window.phet.chipper.queryParameters.fuzzMouse||window.phet.chipper.queryParameters.fuzzTouch||window.phet.chipper.queryParameters.fuzzBoard,window.phet.chipper.queryParameters.log&&(window.phet.log=function(e,t){t=_.assignIn({color:"#009900"},t),console.log("%c"+e,"color: "+t.color)}),window.phet.chipper.brand=window.phet.chipper.brand||phet.chipper.queryParameters.brand||"adapted-from-phet";const e="undefined"!=typeof window&&phet.chipper.queryParameters.stringTest?phet.chipper.queryParameters.stringTest:null;window.phet.chipper.mapString=function(t){return null===e?t:"double"===e?`${t}:${t}`:"long"===e?"12345678901234567890123456789012345678901234567890":"rtl"===e?"‫تست (زبان)‬":"xss"===e?t+'<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQIW2NkYGD4DwABCQEBtxmN7wAAAABJRU5ErkJggg==" onload="window.location.href=atob(\'aHR0cHM6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/dj1kUXc0dzlXZ1hjUQ==\')" />':"xss2"===e?t+"<script>alert('XSS')<\/script>":"none"===e||"dynamic"===e?t:e},QueryStringMachine.containsKey("locale")?window.phet.chipper.locale=phet.chipper.queryParameters.locale:window.phet.chipper.locale||(window.phet.chipper.locale="en");const t=JSON.parse(phet.chipper.queryParameters.strings||"{}");phet.chipper.getStringForBuiltSim=e=>{if(t[e])return t[e];let i=phet.chipper.strings[phet.chipper.locale];return i||(i=phet.chipper.strings[phet.chipper.locale.slice(0,2)],i||(i=phet.chipper.strings.en)),phet.chipper.mapString(i[e])}}(),window.phet.chipper.makeEverythingSlow=function(){window.setInterval(()=>{a(64)},16)},window.phet.chipper.makeRandomSlowness=function(){window.setInterval(()=>{a(Math.ceil(100+200*Math.random()))},Math.ceil(100+200*Math.random()))},window.phet.chipper.isProduction="production"===$("meta[name=phet-sim-level]").attr("content"),window.phet.chipper.isApp=phet.chipper.queryParameters["phet-app"]||phet.chipper.queryParameters["phet-android-app"],function(){const e=!phet.chipper.isProduction&&phet.chipper.queryParameters.eall;(e||!phet.chipper.isProduction&&phet.chipper.queryParameters.ea||phet.chipper.isDebugBuild)&&window.assertions.enableAssert(),e&&window.assertions.enableAssertSlow(),window.phet.chipper.reportContinuousTestResult=e=>{window.parent&&window.parent.postMessage(JSON.stringify(_.assignIn({continuousTest:JSON.parse(phet.chipper.queryParameters.continuousTest),url:window.location.href},e)),"*")},phet.chipper.queryParameters.continuousTest&&(window.addEventListener("error",e=>{let t="",i="";e&&e.message&&(t=e.message),e&&e.error&&e.error.stack&&(i=e.error.stack),phet.chipper.reportContinuousTestResult({type:"continuous-test-error",message:t,stack:i})}),window.addEventListener("beforeunload",e=>{phet.chipper.reportContinuousTestResult({type:"continuous-test-unload"})}),window.open=()=>({focus:()=>{},blur:()=>{}})),phet.chipper.queryParameters.postMessageOnError&&window.addEventListener("error",e=>{let t="",i="";e&&e.message&&(t=e.message),e&&e.error&&e.error.stack&&(i=e.error.stack),window.parent&&window.parent.postMessage(JSON.stringify({type:"error",url:window.location.href,message:t,stack:i}),"*")}),phet.chipper.queryParameters.postMessageOnBeforeUnload&&window.addEventListener("beforeunload",e=>{window.parent&&window.parent.postMessage(JSON.stringify({type:"beforeUnload"}),"*")})}(),(()=>{const e={supportsInteractiveDescription:{type:"boolean"},supportsVoicing:{type:"boolean"},supportsInteractiveHighlights:{type:"boolean"},supportsSound:{type:"boolean"},supportsExtraSound:{type:"boolean"},supportsDynamicLocale:{type:"boolean"},colorProfiles:{type:"array"},supportedRegionsAndCultures:{type:"array"}};if(Object.keys(e).forEach(e=>{}),t.hasOwnProperty("simFeatures")){const i=t.simFeatures;Object.keys(i).forEach(t=>{i[t];e[t]&&("boolean"===e[t.type]||e[t.type])})}})()}(),(()=>{var t={897:(e,t,i)=>{"use strict";let n;i.d(t,{Z:()=>r}),e=i.hmd(e);try{n=e&&e.hot}catch(s){n=!1}const r=n},980:e=>{e.exports=function e(t,i,n){function r(a,o){if(!i[a]){if(!t[a]){if(s)return s(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var h=i[a]={exports:{}};t[a][0].call(h.exports,(function(e){var i=t[a][1][e];return r(i||e)}),h,h.exports,e,t,i,n)}return i[a].exports}for(var s=void 0,a=0;a<n.length;a++)r(n[a]);return r}({1:[function(e,t,i){"use strict";var n=function(){var e="/Users/chrisandrejewski/Desktop/Work/github-repos/himalaya/src/compat.js",t="cde94accf38c67a096269c512dfb0f1bca69a38a",i=new(0,function(){}.constructor)("return this")(),n="__coverage__",r={path:"/Users/chrisandrejewski/Desktop/Work/github-repos/himalaya/src/compat.js",statementMap:{0:{start:{line:10,column:2},end:{line:10,column:72}},1:{start:{line:14,column:16},end:{line:14,column:62}},2:{start:{line:15,column:20},end:{line:15,column:56}},3:{start:{line:16,column:2},end:{line:16,column:48}},4:{start:{line:20,column:2},end:{line:20,column:56}},5:{start:{line:24,column:2},end:{line:24,column:42}},6:{start:{line:28,column:14},end:{line:28,column:26}},7:{start:{line:29,column:2},end:{line:29,column:29}},8:{start:{line:29,column:17},end:{line:29,column:29}},9:{start:{line:31,column:22},end:{line:31,column:34}},10:{start:{line:32,column:23},end:{line:32,column:47}},11:{start:{line:33,column:20},end:{line:33,column:70}},12:{start:{line:34,column:2},end:{line:38,column:3}},13:{start:{line:35,column:20},end:{line:35,column:40}},14:{start:{line:36,column:4},end:{line:36,column:46}},15:{start:{line:36,column:35},end:{line:36,column:46}},16:{start:{line:37,column:4},end:{line:37,column:55}},17:{start:{line:37,column:44},end:{line:37,column:55}},18:{start:{line:40,column:2},end:{line:40,column:14}}},fnMap:{0:{name:"startsWith",decl:{start:{line:9,column:16},end:{line:9,column:26}},loc:{start:{line:9,column:57},end:{line:11,column:1}},line:9},1:{name:"endsWith",decl:{start:{line:13,column:16},end:{line:13,column:24}},loc:{start:{line:13,column:55},end:{line:17,column:1}},line:13},2:{name:"stringIncludes",decl:{start:{line:19,column:16},end:{line:19,column:30}},loc:{start:{line:19,column:61},end:{line:21,column:1}},line:19},3:{name:"isRealNaN",decl:{start:{line:23,column:16},end:{line:23,column:25}},loc:{start:{line:23,column:30},end:{line:25,column:1}},line:23},4:{name:"arrayIncludes",decl:{start:{line:27,column:16},end:{line:27,column:29}},loc:{start:{line:27,column:63},end:{line:41,column:1}},line:27}},branchMap:{0:{loc:{start:{line:10,column:20},end:{line:10,column:33}},type:"binary-expr",locations:[{start:{line:10,column:20},end:{line:10,column:28}},{start:{line:10,column:32},end:{line:10,column:33}}],line:10},1:{loc:{start:{line:14,column:17},end:{line:14,column:39}},type:"binary-expr",locations:[{start:{line:14,column:17},end:{line:14,column:25}},{start:{line:14,column:29},end:{line:14,column:39}}],line:14},2:{loc:{start:{line:16,column:9},end:{line:16,column:48}},type:"binary-expr",locations:[{start:{line:16,column:9},end:{line:16,column:25}},{start:{line:16,column:29},end:{line:16,column:48}}],line:16},3:{loc:{start:{line:20,column:35},end:{line:20,column:48}},type:"binary-expr",locations:[{start:{line:20,column:35},end:{line:20,column:43}},{start:{line:20,column:47},end:{line:20,column:48}}],line:20},4:{loc:{start:{line:24,column:9},end:{line:24,column:42}},type:"binary-expr",locations:[{start:{line:24,column:9},end:{line:24,column:30}},{start:{line:24,column:34},end:{line:24,column:42}}],line:24},5:{loc:{start:{line:29,column:2},end:{line:29,column:29}},type:"if",locations:[{start:{line:29,column:2},end:{line:29,column:29}},{start:{line:29,column:2},end:{line:29,column:29}}],line:29},6:{loc:{start:{line:33,column:20},end:{line:33,column:70}},type:"cond-expr",locations:[{start:{line:33,column:39},end:{line:33,column:50}},{start:{line:33,column:53},end:{line:33,column:70}}],line:33},7:{loc:{start:{line:36,column:4},end:{line:36,column:46}},type:"if",locations:[{start:{line:36,column:4},end:{line:36,column:46}},{start:{line:36,column:4},end:{line:36,column:46}}],line:36},8:{loc:{start:{line:37,column:4},end:{line:37,column:55}},type:"if",locations:[{start:{line:37,column:4},end:{line:37,column:55}},{start:{line:37,column:4},end:{line:37,column:55}}],line:37},9:{loc:{start:{line:37,column:8},end:{line:37,column:42}},type:"binary-expr",locations:[{start:{line:37,column:8},end:{line:37,column:20}},{start:{line:37,column:24},end:{line:37,column:42}}],line:37}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},s=i[n]||(i[n]={});return s[e]&&s[e].hash===t?s[e]:(r.hash=t,s[e]=r)}();function r(e){return n.f[3]++,n.s[5]++,n.b[4][0]++,"number"==typeof e&&(n.b[4][1]++,isNaN(e))}Object.defineProperty(i,"__esModule",{value:!0}),i.startsWith=function(e,t,i){return n.f[0]++,n.s[0]++,e.substr((n.b[0][0]++,i||(n.b[0][1]++,0)),t.length)===t},i.endsWith=function(e,t,i){n.f[1]++;var r=(n.s[1]++,n.b[1][0]++,(i||(n.b[1][1]++,e.length))-t.length),s=(n.s[2]++,e.lastIndexOf(t,r));return n.s[3]++,n.b[2][0]++,-1!==s&&(n.b[2][1]++,s===r)},i.stringIncludes=function(e,t,i){return n.f[2]++,n.s[4]++,-1!==e.indexOf(t,(n.b[3][0]++,i||(n.b[3][1]++,0)))},i.isRealNaN=r,i.arrayIncludes=function(e,t,i){n.f[4]++;var s=(n.s[6]++,e.length);if(n.s[7]++,0===s)return n.b[5][0]++,n.s[8]++,!1;n.b[5][1]++;var a=(n.s[9]++,0|i),o=(n.s[10]++,r(t)),l=(n.s[11]++,a>=0?(n.b[6][0]++,a):(n.b[6][1]++,s+a));for(n.s[12]++;l<s;){var h=(n.s[13]++,e[l++]);if(n.s[14]++,h===t)return n.b[7][0]++,n.s[15]++,!0;if(n.b[7][1]++,n.s[16]++,n.b[9][0]++,o&&(n.b[9][1]++,r(h)))return n.b[8][0]++,n.s[17]++,!0;n.b[8][1]++}return n.s[18]++,!1}},{}],2:[function(e,t,i){"use strict";var n=function(){var e="/Users/chrisandrejewski/Desktop/Work/github-repos/himalaya/src/format.js",t="ef8c4d14fa58c2bce23a58bf5d7c370846a07329",i=new(0,function(){}.constructor)("return this")(),n="__coverage__",r={path:"/Users/chrisandrejewski/Desktop/Work/github-repos/himalaya/src/format.js",statementMap:{0:{start:{line:2,column:14},end:{line:2,column:30}},1:{start:{line:3,column:2},end:{line:3,column:30}},2:{start:{line:3,column:18},end:{line:3,column:30}},3:{start:{line:4,column:2},end:{line:4,column:57}},4:{start:{line:8,column:14},end:{line:8,column:27}},5:{start:{line:9,column:14},end:{line:9,column:28}},6:{start:{line:10,column:23},end:{line:10,column:49}},7:{start:{line:11,column:2},end:{line:13,column:3}},8:{start:{line:12,column:4},end:{line:12,column:28}},9:{start:{line:14,column:2},end:{line:14,column:12}},10:{start:{line:18,column:2},end:{line:32,column:4}},11:{start:{line:19,column:17},end:{line:19,column:26}},12:{start:{line:20,column:23},end:{line:27,column:39}},13:{start:{line:28,column:4},end:{line:30,column:5}},14:{start:{line:29,column:6},end:{line:29,column:41}},15:{start:{line:31,column:4},end:{line:31,column:21}},16:{start:{line:36,column:2},end:{line:43,column:4}},17:{start:{line:37,column:18},end:{line:37,column:50}},18:{start:{line:38,column:16},end:{line:38,column:24}},19:{start:{line:39,column:18},end:{line:41,column:12}},20:{start:{line:42,column:4},end:{line:42,column:23}}},fnMap:{0:{name:"splitHead",decl:{start:{line:1,column:16},end:{line:1,column:25}},loc:{start:{line:1,column:37},end:{line:5,column:1}},line:1},1:{name:"unquote",decl:{start:{line:7,column:16},end:{line:7,column:23}},loc:{start:{line:7,column:30},end:{line:15,column:1}},line:7},2:{name:"format",decl:{start:{line:17,column:16},end:{line:17,column:22}},loc:{start:{line:17,column:40},end:{line:33,column:1}},line:17},3:{name:"(anonymous_3)",decl:{start:{line:18,column:19},end:{line:18,column:20}},loc:{start:{line:18,column:27},end:{line:32,column:3}},line:18},4:{name:"formatAttributes",decl:{start:{line:35,column:16},end:{line:35,column:32}},loc:{start:{line:35,column:46},end:{line:44,column:1}},line:35},5:{name:"(anonymous_5)",decl:{start:{line:36,column:24},end:{line:36,column:25}},loc:{start:{line:36,column:37},end:{line:43,column:3}},line:36}},branchMap:{0:{loc:{start:{line:3,column:2},end:{line:3,column:30}},type:"if",locations:[{start:{line:3,column:2},end:{line:3,column:30}},{start:{line:3,column:2},end:{line:3,column:30}}],line:3},1:{loc:{start:{line:10,column:23},end:{line:10,column:49}},type:"binary-expr",locations:[{start:{line:10,column:23},end:{line:10,column:34}},{start:{line:10,column:38},end:{line:10,column:49}}],line:10},2:{loc:{start:{line:11,column:2},end:{line:13,column:3}},type:"if",locations:[{start:{line:11,column:2},end:{line:13,column:3}},{start:{line:11,column:2},end:{line:13,column:3}}],line:11},3:{loc:{start:{line:11,column:6},end:{line:11,column:45}},type:"binary-expr",locations:[{start:{line:11,column:6},end:{line:11,column:18}},{start:{line:11,column:22},end:{line:11,column:45}}],line:11},4:{loc:{start:{line:20,column:23},end:{line:27,column:39}},type:"cond-expr",locations:[{start:{line:21,column:8},end:{line:26,column:7}},{start:{line:27,column:8},end:{line:27,column:39}}],line:20},5:{loc:{start:{line:28,column:4},end:{line:30,column:5}},type:"if",locations:[{start:{line:28,column:4},end:{line:30,column:5}},{start:{line:28,column:4},end:{line:30,column:5}}],line:28},6:{loc:{start:{line:39,column:18},end:{line:41,column:12}},type:"cond-expr",locations:[{start:{line:40,column:8},end:{line:40,column:25}},{start:{line:41,column:8},end:{line:41,column:12}}],line:39}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},s=i[n]||(i[n]={});return s[e]&&s[e].hash===t?s[e]:(r.hash=t,s[e]=r)}();function r(e,t){n.f[0]++;var i=(n.s[0]++,e.indexOf(t));return n.s[1]++,-1===i?(n.b[0][0]++,n.s[2]++,[e]):(n.b[0][1]++,n.s[3]++,[e.slice(0,i),e.slice(i+t.length)])}function s(e){n.f[1]++;var t=(n.s[4]++,e.charAt(0)),i=(n.s[5]++,e.length-1),r=(n.s[6]++,n.b[1][0]++,'"'===t||(n.b[1][1]++,"'"===t));return n.s[7]++,n.b[3][0]++,r&&(n.b[3][1]++,t===e.charAt(i))?(n.b[2][0]++,n.s[8]++,e.slice(1,i)):(n.b[2][1]++,n.s[9]++,e)}function a(e){return n.f[4]++,n.s[16]++,e.map((function(e){n.f[5]++;var t=(n.s[17]++,r(e.trim(),"=")),i=(n.s[18]++,t[0]),a=(n.s[19]++,"string"==typeof t[1]?(n.b[6][0]++,s(t[1])):(n.b[6][1]++,null));return n.s[20]++,{key:i,value:a}}))}Object.defineProperty(i,"__esModule",{value:!0}),i.splitHead=r,i.unquote=s,i.format=function e(t,i){return n.f[2]++,n.s[10]++,t.map((function(t){n.f[3]++;var r=(n.s[11]++,t.type),s=(n.s[12]++,"element"===r?(n.b[4][0]++,{type:r,tagName:t.tagName.toLowerCase(),attributes:a(t.attributes),children:e(t.children,i)}):(n.b[4][1]++,{type:r,content:t.content}));return n.s[13]++,i.includePositions?(n.b[5][0]++,n.s[14]++,s.position=t.position):n.b[5][1]++,n.s[15]++,s}))},i.formatAttributes=a},{}],3:[function(e,t,i){"use strict";var n=function(){var e="/Users/chrisandrejewski/Desktop/Work/github-repos/himalaya/src/index.js",t="a91ca68b6320b199fa63e4cbd37dce6857e0c43d",i=new(0,function(){}.constructor)("return this")(),n="__coverage__",r={path:"/Users/chrisandrejewski/Desktop/Work/github-repos/himalaya/src/index.js",statementMap:{0:{start:{line:12,column:29},end:{line:18,column:1}},1:{start:{line:21,column:17},end:{line:21,column:36}},2:{start:{line:22,column:16},end:{line:22,column:39}},3:{start:{line:23,column:2},end:{line:23,column:31}},4:{start:{line:27,column:2},end:{line:27,column:29}}},fnMap:{0:{name:"parse",decl:{start:{line:20,column:16},end:{line:20,column:21}},loc:{start:{line:20,column:53},end:{line:24,column:1}},line:20},1:{name:"stringify",decl:{start:{line:26,column:16},end:{line:26,column:25}},loc:{start:{line:26,column:57},end:{line:28,column:1}},line:26}},branchMap:{0:{loc:{start:{line:20,column:28},end:{line:20,column:51}},type:"default-arg",locations:[{start:{line:20,column:38},end:{line:20,column:51}}],line:20},1:{loc:{start:{line:26,column:32},end:{line:26,column:55}},type:"default-arg",locations:[{start:{line:26,column:42},end:{line:26,column:55}}],line:26}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0,1:0},b:{0:[0],1:[0]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},s=i[n]||(i[n]={});return s[e]&&s[e].hash===t?s[e]:(r.hash=t,s[e]=r)}();Object.defineProperty(i,"__esModule",{value:!0}),i.parseDefaults=void 0,i.parse=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(n.b[0][0]++,u);n.f[0]++;var i=(n.s[1]++,(0,r.default)(e,t)),o=(n.s[2]++,(0,s.default)(i,t));return n.s[3]++,(0,a.format)(o,t)},i.stringify=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(n.b[1][0]++,u);return n.f[1]++,n.s[4]++,(0,o.toHTML)(e,t)};var r=h(e("./lexer")),s=h(e("./parser")),a=e("./format"),o=e("./stringify"),l=e("./tags");function h(e){return e&&e.__esModule?e:{default:e}}var u=i.parseDefaults=(n.s[0]++,{voidTags:l.voidTags,closingTags:l.closingTags,childlessTags:l.childlessTags,closingTagAncestorBreakers:l.closingTagAncestorBreakers,includePositions:!1})},{"./format":2,"./lexer":4,"./parser":5,"./stringify":6,"./tags":7}],4:[function(e,t,i){"use strict";var n=function(){var e="/Users/chrisandrejewski/Desktop/Work/github-repos/himalaya/src/lexer.js",t="99f1269b85a36e02e6fcfa2eb5c9423a8a428848",i=new(0,function(){}.constructor)("return this")(),n="__coverage__",r={path:"/Users/chrisandrejewski/Desktop/Work/github-repos/himalaya/src/lexer.js",statementMap:{0:{start:{line:9,column:16},end:{line:9,column:30}},1:{start:{line:10,column:14},end:{line:10,column:42}},2:{start:{line:11,column:2},end:{line:19,column:3}},3:{start:{line:12,column:17},end:{line:12,column:30}},4:{start:{line:13,column:4},end:{line:18,column:5}},5:{start:{line:14,column:6},end:{line:14,column:21}},6:{start:{line:15,column:6},end:{line:15,column:25}},7:{start:{line:17,column:6},end:{line:17,column:23}},8:{start:{line:23,column:14},end:{line:23,column:34}},9:{start:{line:24,column:2},end:{line:24,column:41}},10:{start:{line:28,column:2},end:{line:32,column:3}},11:{start:{line:36,column:2},end:{line:40,column:3}},12:{start:{line:44,column:16},end:{line:49,column:3}},13:{start:{line:50,column:2},end:{line:50,column:12}},14:{start:{line:51,column:2},end:{line:51,column:21}},15:{start:{line:55,column:42},end:{line:55,column:47}},16:{start:{line:56,column:14},end:{line:56,column:24}},17:{start:{line:57,column:2},end:{line:72,column:3}},18:{start:{line:58,column:18},end:{line:58,column:38}},19:{start:{line:59,column:4},end:{line:59,column:18}},20:{start:{line:60,column:4},end:{line:71,column:5}},21:{start:{line:61,column:24},end:{line:61,column:57}},22:{start:{line:62,column:6},end:{line:70,column:7}},23:{start:{line:63,column:8},end:{line:63,column:25}},24:{start:{line:65,column:24},end:{line:65,column:37}},25:{start:{line:66,column:24},end:{line:66,column:45}},26:{start:{line:67,column:8},end:{line:69,column:9}},27:{start:{line:68,column:10},end:{line:68,column:36}},28:{start:{line:75,column:21},end:{line:75,column:34}},29:{start:{line:77,column:2},end:{line:87,column:3}},30:{start:{line:78,column:20},end:{line:78,column:43}},31:{start:{line:79,column:4},end:{line:81,column:5}},32:{start:{line:80,column:6},end:{line:80,column:20}},33:{start:{line:82,column:17},end:{line:82,column:40}},34:{start:{line:83,column:4},end:{line:85,column:5}},35:{start:{line:84,column:6},end:{line:84,column:20}},36:{start:{line:86,column:4},end:{line:86,column:23}},37:{start:{line:91,column:15},end:{line:91,column:21}},38:{start:{line:92,column:26},end:{line:92,column:31}},39:{start:{line:93,column:16},end:{line:93,column:48}},40:{start:{line:94,column:2},end:{line:94,column:40}},41:{start:{line:94,column:34},end:{line:94,column:40}},42:{start:{line:95,column:2},end:{line:97,column:3}},43:{start:{line:96,column:4},end:{line:96,column:24}},44:{start:{line:99,column:16},end:{line:99,column:38}},45:{start:{line:100,column:18},end:{line:100,column:52}},46:{start:{line:101,column:2},end:{line:101,column:38}},47:{start:{line:102,column:14},end:{line:102,column:36}},48:{start:{line:103,column:2},end:{line:103,column:60}},49:{start:{line:107,column:26},end:{line:107,column:31}},50:{start:{line:108,column:16},end:{line:108,column:38}},51:{start:{line:109,column:2},end:{line:109,column:32}},52:{start:{line:110,column:19},end:{line:110,column:53}},53:{start:{line:111,column:19},end:{line:111,column:33}},54:{start:{line:112,column:2},end:{line:114,column:3}},55:{start:{line:113,column:4},end:{line:113,column:40}},56:{start:{line:116,column:18},end:{line:116,column:55}},57:{start:{line:117,column:2},end:{line:117,column:41}},58:{start:{line:118,column:2},end:{line:125,column:4}},59:{start:{line:129,column:26},end:{line:129,column:31}},60:{start:{line:131,column:23},end:{line:131,column:53}},61:{start:{line:132,column:18},end:{line:132,column:36}},62:{start:{line:133,column:18},end:{line:133,column:40}},63:{start:{line:134,column:4},end:{line:134,column:46}},64:{start:{line:135,column:4},end:{line:135,column:68}},65:{start:{line:137,column:18},end:{line:137,column:35}},66:{start:{line:138,column:2},end:{line:138,column:25}},67:{start:{line:140,column:22},end:{line:140,column:48}},68:{start:{line:141,column:18},end:{line:141,column:35}},69:{start:{line:142,column:4},end:{line:142,column:46}},70:{start:{line:143,column:16},end:{line:143,column:38}},71:{start:{line:144,column:4},end:{line:144,column:64}},72:{start:{line:146,column:2},end:{line:146,column:16}},73:{start:{line:150,column:19},end:{line:150,column:23}},74:{start:{line:152,column:2},end:{line:152,column:30}},75:{start:{line:156,column:26},end:{line:156,column:31}},76:{start:{line:157,column:14},end:{line:157,column:24}},77:{start:{line:158,column:14},end:{line:158,column:28}},78:{start:{line:159,column:2},end:{line:164,column:3}},79:{start:{line:160,column:17},end:{line:160,column:34}},80:{start:{line:161,column:22},end:{line:161,column:79}},81:{start:{line:162,column:4},end:{line:162,column:24}},82:{start:{line:162,column:19},end:{line:162,column:24}},83:{start:{line:163,column:4},end:{line:163,column:11}},84:{start:{line:166,column:12},end:{line:166,column:21}},85:{start:{line:167,column:2},end:{line:172,column:3}},86:{start:{line:168,column:17},end:{line:168,column:32}},87:{start:{line:169,column:22},end:{line:169,column:79}},88:{start:{line:170,column:4},end:{line:170,column:25}},89:{start:{line:170,column:20},end:{line:170,column:25}},90:{start:{line:171,column:4},end:{line:171,column:9}},91:{start:{line:174,column:2},end:{line:174,column:34}},92:{start:{line:175,column:18},end:{line:175,column:39}},93:{start:{line:176,column:2},end:{line:179,column:4}},94:{start:{line:180,column:2},end:{line:180,column:16}},95:{start:{line:184,column:34},end:{line:184,column:39}},96:{start:{line:185,column:15},end:{line:185,column:29}},97:{start:{line:186,column:14},end:{line:186,column:18}},98:{start:{line:187,column:18},end:{line:187,column:24}},99:{start:{line:188,column:16},end:{line:188,column:18}},100:{start:{line:189,column:14},end:{line:189,column:24}},101:{start:{line:190,column:2},end:{line:227,column:3}},102:{start:{line:191,column:17},end:{line:191,column:35}},103:{start:{line:192,column:4},end:{line:199,column:5}},104:{start:{line:193,column:25},end:{line:193,column:39}},105:{start:{line:194,column:6},end:{line:196,column:7}},106:{start:{line:195,column:8},end:{line:195,column:20}},107:{start:{line:197,column:6},end:{line:197,column:14}},108:{start:{line:198,column:6},end:{line:198,column:14}},109:{start:{line:201,column:21},end:{line:201,column:49}},110:{start:{line:202,column:4},end:{line:207,column:5}},111:{start:{line:203,column:6},end:{line:205,column:7}},112:{start:{line:204,column:8},end:{line:204,column:48}},113:{start:{line:206,column:6},end:{line:206,column:11}},114:{start:{line:209,column:22},end:{line:209,column:44}},115:{start:{line:210,column:4},end:{line:217,column:5}},116:{start:{line:211,column:6},end:{line:213,column:7}},117:{start:{line:212,column:8},end:{line:212,column:48}},118:{start:{line:214,column:6},end:{line:214,column:28}},119:{start:{line:215,column:6},end:{line:215,column:14}},120:{start:{line:216,column:6},end:{line:216,column:14}},121:{start:{line:219,column:25},end:{line:219,column:54}},122:{start:{line:220,column:4},end:{line:224,column:5}},123:{start:{line:221,column:6},end:{line:221,column:18}},124:{start:{line:222,column:6},end:{line:222,column:14}},125:{start:{line:223,column:6},end:{line:223,column:14}},126:{start:{line:226,column:4},end:{line:226,column:12}},127:{start:{line:228,column:2},end:{line:228,column:37}},128:{start:{line:230,column:15},end:{line:230,column:27}},129:{start:{line:231,column:15},end:{line:231,column:26}},130:{start:{line:232,column:2},end:{line:269,column:3}},131:{start:{line:233,column:17},end:{line:233,column:25}},132:{start:{line:234,column:22},end:{line:234,column:46}},133:{start:{line:235,column:4},end:{line:253,column:5}},134:{start:{line:236,column:25},end:{line:236,column:37}},135:{start:{line:237,column:6},end:{line:252,column:7}},136:{start:{line:238,column:8},end:{line:243,column:9}},137:{start:{line:239,column:26},end:{line:239,column:43}},138:{start:{line:240,column:10},end:{line:240,column:47}},139:{start:{line:241,column:10},end:{line:241,column:16}},140:{start:{line:242,column:10},end:{line:242,column:18}},141:{start:{line:244,column:26},end:{line:244,column:38}},142:{start:{line:245,column:8},end:{line:245,column:14}},143:{start:{line:246,column:8},end:{line:251,column:9}},144:{start:{line:247,column:26},end:{line:247,column:48}},145:{start:{line:248,column:10},end:{line:248,column:47}},146:{start:{line:249,column:10},end:{line:249,column:16}},147:{start:{line:250,column:10},end:{line:250,column:18}},148:{start:{line:254,column:4},end:{line:266,column:5}},149:{start:{line:255,column:25},end:{line:255,column:37}},150:{start:{line:256,column:6},end:{line:261,column:7}},151:{start:{line:257,column:24},end:{line:257,column:41}},152:{start:{line:258,column:8},end:{line:258,column:45}},153:{start:{line:259,column:8},end:{line:259,column:14}},154:{start:{line:260,column:8},end:{line:260,column:16}},155:{start:{line:263,column:22},end:{line:263,column:39}},156:{start:{line:264,column:6},end:{line:264,column:43}},157:{start:{line:265,column:6},end:{line:265,column:14}},158:{start:{line:268,column:4},end:{line:268,column:38}},159:{start:{line:272,column:13},end:{line:272,column:20}},160:{start:{line:275,column:34},end:{line:275,column:39}},161:{start:{line:276,column:22},end:{line:276,column:43}},162:{start:{line:277,column:14},end:{line:277,column:24}},163:{start:{line:278,column:14},end:{line:278,column:28}},164:{start:{line:279,column:2},end:{line:311,column:3}},165:{start:{line:280,column:20},end:{line:280,column:44}},166:{start:{line:281,column:4},end:{line:284,column:5}},167:{start:{line:282,column:6},end:{line:282,column:20}},168:{start:{line:283,column:6},end:{line:283,column:11}},169:{start:{line:286,column:29},end:{line:286,column:51}},170:{start:{line:287,column:4},end:{line:287,column:48}},171:{start:{line:288,column:21},end:{line:288,column:66}},172:{start:{line:289,column:17},end:{line:289,column:33}},173:{start:{line:290,column:4},end:{line:293,column:5}},174:{start:{line:291,column:6},end:{line:291,column:37}},175:{start:{line:292,column:6},end:{line:292,column:14}},176:{start:{line:295,column:4},end:{line:306,column:5}},177:{start:{line:296,column:24},end:{line:296,column:46}},178:{start:{line:297,column:6},end:{line:297,column:42}},179:{start:{line:298,column:6},end:{line:305,column:8}},180:{start:{line:308,column:4},end:{line:308,column:39}},181:{start:{line:309,column:4},end:{line:309,column:56}},182:{start:{line:310,column:4},end:{line:310,column:9}}},fnMap:{0:{name:"feedPosition",decl:{start:{line:8,column:16},end:{line:8,column:28}},loc:{start:{line:8,column:50},end:{line:20,column:1}},line:8},1:{name:"jumpPosition",decl:{start:{line:22,column:16},end:{line:22,column:28}},loc:{start:{line:22,column:50},end:{line:25,column:1}},line:22},2:{name:"makeInitialPosition",decl:{start:{line:27,column:16},end:{line:27,column:35}},loc:{start:{line:27,column:39},end:{line:33,column:1}},line:27},3:{name:"copyPosition",decl:{start:{line:35,column:16},end:{line:35,column:28}},loc:{start:{line:35,column:40},end:{line:41,column:1}},line:35},4:{name:"lexer",decl:{start:{line:43,column:24},end:{line:43,column:29}},loc:{start:{line:43,column:45},end:{line:52,column:1}},line:43},5:{name:"lex",decl:{start:{line:54,column:16},end:{line:54,column:19}},loc:{start:{line:54,column:28},end:{line:73,column:1}},line:54},6:{name:"findTextEnd",decl:{start:{line:76,column:16},end:{line:76,column:27}},loc:{start:{line:76,column:41},end:{line:88,column:1}},line:76},7:{name:"lexText",decl:{start:{line:90,column:16},end:{line:90,column:23}},loc:{start:{line:90,column:32},end:{line:104,column:1}},line:90},8:{name:"lexComment",decl:{start:{line:106,column:16},end:{line:106,column:26}},loc:{start:{line:106,column:35},end:{line:126,column:1}},line:106},9:{name:"lexTag",decl:{start:{line:128,column:16},end:{line:128,column:22}},loc:{start:{line:128,column:31},end:{line:147,column:1}},line:128},10:{name:"isWhitespaceChar",decl:{start:{line:151,column:16},end:{line:151,column:32}},loc:{start:{line:151,column:40},end:{line:153,column:1}},line:151},11:{name:"lexTagName",decl:{start:{line:155,column:16},end:{line:155,column:26}},loc:{start:{line:155,column:35},end:{line:181,column:1}},line:155},12:{name:"lexTagAttributes",decl:{start:{line:183,column:16},end:{line:183,column:32}},loc:{start:{line:183,column:41},end:{line:270,column:1}},line:183},13:{name:"lexSkipTag",decl:{start:{line:274,column:16},end:{line:274,column:26}},loc:{start:{line:274,column:44},end:{line:312,column:1}},line:274}},branchMap:{0:{loc:{start:{line:13,column:4},end:{line:18,column:5}},type:"if",locations:[{start:{line:13,column:4},end:{line:18,column:5}},{start:{line:13,column:4},end:{line:18,column:5}}],line:13},1:{loc:{start:{line:60,column:4},end:{line:71,column:5}},type:"if",locations:[{start:{line:60,column:4},end:{line:71,column:5}},{start:{line:60,column:4},end:{line:71,column:5}}],line:60},2:{loc:{start:{line:62,column:6},end:{line:70,column:7}},type:"if",locations:[{start:{line:62,column:6},end:{line:70,column:7}},{start:{line:62,column:6},end:{line:70,column:7}}],line:62},3:{loc:{start:{line:67,column:8},end:{line:69,column:9}},type:"if",locations:[{start:{line:67,column:8},end:{line:69,column:9}},{start:{line:67,column:8},end:{line:69,column:9}}],line:67},4:{loc:{start:{line:79,column:4},end:{line:81,column:5}},type:"if",locations:[{start:{line:79,column:4},end:{line:81,column:5}},{start:{line:79,column:4},end:{line:81,column:5}}],line:79},5:{loc:{start:{line:83,column:4},end:{line:85,column:5}},type:"if",locations:[{start:{line:83,column:4},end:{line:85,column:5}},{start:{line:83,column:4},end:{line:85,column:5}}],line:83},6:{loc:{start:{line:83,column:8},end:{line:83,column:63}},type:"binary-expr",locations:[{start:{line:83,column:8},end:{line:83,column:20}},{start:{line:83,column:24},end:{line:83,column:36}},{start:{line:83,column:40},end:{line:83,column:63}}],line:83},7:{loc:{start:{line:94,column:2},end:{line:94,column:40}},type:"if",locations:[{start:{line:94,column:2},end:{line:94,column:40}},{start:{line:94,column:2},end:{line:94,column:40}}],line:94},8:{loc:{start:{line:95,column:2},end:{line:97,column:3}},type:"if",locations:[{start:{line:95,column:2},end:{line:97,column:3}},{start:{line:95,column:2},end:{line:97,column:3}}],line:95},9:{loc:{start:{line:112,column:2},end:{line:114,column:3}},type:"if",locations:[{start:{line:112,column:2},end:{line:114,column:3}},{start:{line:112,column:2},end:{line:114,column:3}}],line:112},10:{loc:{start:{line:134,column:32},end:{line:134,column:45}},type:"cond-expr",locations:[{start:{line:134,column:40},end:{line:134,column:41}},{start:{line:134,column:44},end:{line:134,column:45}}],line:134},11:{loc:{start:{line:142,column:32},end:{line:142,column:45}},type:"cond-expr",locations:[{start:{line:142,column:40},end:{line:142,column:41}},{start:{line:142,column:44},end:{line:142,column:45}}],line:142},12:{loc:{start:{line:161,column:24},end:{line:161,column:78}},type:"binary-expr",locations:[{start:{line:161,column:24},end:{line:161,column:46}},{start:{line:161,column:50},end:{line:161,column:62}},{start:{line:161,column:66},end:{line:161,column:78}}],line:161},13:{loc:{start:{line:162,column:4},end:{line:162,column:24}},type:"if",locations:[{start:{line:162,column:4},end:{line:162,column:24}},{start:{line:162,column:4},end:{line:162,column:24}}],line:162},14:{loc:{start:{line:169,column:24},end:{line:169,column:78}},type:"binary-expr",locations:[{start:{line:169,column:24},end:{line:169,column:46}},{start:{line:169,column:50},end:{line:169,column:62}},{start:{line:169,column:66},end:{line:169,column:78}}],line:169},15:{loc:{start:{line:170,column:4},end:{line:170,column:25}},type:"if",locations:[{start:{line:170,column:4},end:{line:170,column:25}},{start:{line:170,column:4},end:{line:170,column:25}}],line:170},16:{loc:{start:{line:192,column:4},end:{line:199,column:5}},type:"if",locations:[{start:{line:192,column:4},end:{line:199,column:5}},{start:{line:192,column:4},end:{line:199,column:5}}],line:192},17:{loc:{start:{line:194,column:6},end:{line:196,column:7}},type:"if",locations:[{start:{line:194,column:6},end:{line:196,column:7}},{start:{line:194,column:6},end:{line:196,column:7}}],line:194},18:{loc:{start:{line:201,column:21},end:{line:201,column:49}},type:"binary-expr",locations:[{start:{line:201,column:21},end:{line:201,column:33}},{start:{line:201,column:37},end:{line:201,column:49}}],line:201},19:{loc:{start:{line:202,column:4},end:{line:207,column:5}},type:"if",locations:[{start:{line:202,column:4},end:{line:207,column:5}},{start:{line:202,column:4},end:{line:207,column:5}}],line:202},20:{loc:{start:{line:203,column:6},end:{line:205,column:7}},type:"if",locations:[{start:{line:203,column:6},end:{line:205,column:7}},{start:{line:203,column:6},end:{line:205,column:7}}],line:203},21:{loc:{start:{line:210,column:4},end:{line:217,column:5}},type:"if",locations:[{start:{line:210,column:4},end:{line:217,column:5}},{start:{line:210,column:4},end:{line:217,column:5}}],line:210},22:{loc:{start:{line:211,column:6},end:{line:213,column:7}},type:"if",locations:[{start:{line:211,column:6},end:{line:213,column:7}},{start:{line:211,column:6},end:{line:213,column:7}}],line:211},23:{loc:{start:{line:219,column:25},end:{line:219,column:54}},type:"binary-expr",locations:[{start:{line:219,column:25},end:{line:219,column:38}},{start:{line:219,column:42},end:{line:219,column:54}}],line:219},24:{loc:{start:{line:220,column:4},end:{line:224,column:5}},type:"if",locations:[{start:{line:220,column:4},end:{line:224,column:5}},{start:{line:220,column:4},end:{line:224,column:5}}],line:220},25:{loc:{start:{line:235,column:4},end:{line:253,column:5}},type:"if",locations:[{start:{line:235,column:4},end:{line:253,column:5}},{start:{line:235,column:4},end:{line:253,column:5}}],line:235},26:{loc:{start:{line:237,column:6},end:{line:252,column:7}},type:"if",locations:[{start:{line:237,column:6},end:{line:252,column:7}},{start:{line:237,column:6},end:{line:252,column:7}}],line:237},27:{loc:{start:{line:237,column:10},end:{line:237,column:51}},type:"binary-expr",locations:[{start:{line:237,column:10},end:{line:237,column:20}},{start:{line:237,column:24},end:{line:237,column:51}}],line:237},28:{loc:{start:{line:238,column:8},end:{line:243,column:9}},type:"if",locations:[{start:{line:238,column:8},end:{line:243,column:9}},{start:{line:238,column:8},end:{line:243,column:9}}],line:238},29:{loc:{start:{line:246,column:8},end:{line:251,column:9}},type:"if",locations:[{start:{line:246,column:8},end:{line:251,column:9}},{start:{line:246,column:8},end:{line:251,column:9}}],line:246},30:{loc:{start:{line:254,column:4},end:{line:266,column:5}},type:"if",locations:[{start:{line:254,column:4},end:{line:266,column:5}},{start:{line:254,column:4},end:{line:266,column:5}}],line:254},31:{loc:{start:{line:256,column:6},end:{line:261,column:7}},type:"if",locations:[{start:{line:256,column:6},end:{line:261,column:7}},{start:{line:256,column:6},end:{line:261,column:7}}],line:256},32:{loc:{start:{line:256,column:10},end:{line:256,column:56}},type:"binary-expr",locations:[{start:{line:256,column:10},end:{line:256,column:20}},{start:{line:256,column:24},end:{line:256,column:56}}],line:256},33:{loc:{start:{line:281,column:4},end:{line:284,column:5}},type:"if",locations:[{start:{line:281,column:4},end:{line:284,column:5}},{start:{line:281,column:4},end:{line:284,column:5}}],line:281},34:{loc:{start:{line:290,column:4},end:{line:293,column:5}},type:"if",locations:[{start:{line:290,column:4},end:{line:293,column:5}},{start:{line:290,column:4},end:{line:293,column:5}}],line:290},35:{loc:{start:{line:295,column:4},end:{line:306,column:5}},type:"if",locations:[{start:{line:295,column:4},end:{line:306,column:5}},{start:{line:295,column:4},end:{line:306,column:5}}],line:295}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0,102:0,103:0,104:0,105:0,106:0,107:0,108:0,109:0,110:0,111:0,112:0,113:0,114:0,115:0,116:0,117:0,118:0,119:0,120:0,121:0,122:0,123:0,124:0,125:0,126:0,127:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:0,136:0,137:0,138:0,139:0,140:0,141:0,142:0,143:0,144:0,145:0,146:0,147:0,148:0,149:0,150:0,151:0,152:0,153:0,154:0,155:0,156:0,157:0,158:0,159:0,160:0,161:0,162:0,163:0,164:0,165:0,166:0,167:0,168:0,169:0,170:0,171:0,172:0,173:0,174:0,175:0,176:0,177:0,178:0,179:0,180:0,181:0,182:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0,0],13:[0,0],14:[0,0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0],33:[0,0],34:[0,0],35:[0,0]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},s=i[n]||(i[n]={});return s[e]&&s[e].hash===t?s[e]:(r.hash=t,s[e]=r)}();Object.defineProperty(i,"__esModule",{value:!0}),i.feedPosition=s,i.jumpPosition=a,i.makeInitialPosition=o,i.copyPosition=l,i.default=function(e,t){n.f[4]++;var i=(n.s[12]++,{str:e,options:t,position:o(),tokens:[]});return n.s[13]++,h(i),n.s[14]++,i.tokens},i.lex=h,i.findTextEnd=c,i.lexText=d,i.lexComment=p,i.lexTag=m,i.isWhitespaceChar=f,i.lexTagName=y,i.lexTagAttributes=E,i.lexSkipTag=A;var r=e("./compat");function s(e,t,i){n.f[0]++;var r=(n.s[0]++,e.index),s=(n.s[1]++,e.index=r+i);n.s[2]++;for(var a=r;a<s;a++){var o=(n.s[3]++,t.charAt(a));n.s[4]++,"\n"===o?(n.b[0][0]++,n.s[5]++,e.line++,n.s[6]++,e.column=0):(n.b[0][1]++,n.s[7]++,e.column++)}}function a(e,t,i){n.f[1]++;var r=(n.s[8]++,i-e.index);return n.s[9]++,s(e,t,r)}function o(){return n.f[2]++,n.s[10]++,{index:0,column:0,line:0}}function l(e){return n.f[3]++,n.s[11]++,{index:e.index,line:e.line,column:e.column}}function h(e){n.f[5]++;var t=(n.s[15]++,e),i=t.str,s=t.options.childlessTags,a=(n.s[16]++,i.length);for(n.s[17]++;e.position.index<a;){var o=(n.s[18]++,e.position.index);if(n.s[19]++,d(e),n.s[20]++,e.position.index===o){n.b[1][0]++;var l=(n.s[21]++,(0,r.startsWith)(i,"!--",o+1));if(n.s[22]++,l)n.b[2][0]++,n.s[23]++,p(e);else{n.b[2][1]++;var h=(n.s[24]++,m(e)),u=(n.s[25]++,h.toLowerCase());n.s[26]++,(0,r.arrayIncludes)(s,u)?(n.b[3][0]++,n.s[27]++,A(h,e)):n.b[3][1]++}}else n.b[1][1]++}}var u=(n.s[28]++,/[A-Za-z0-9]/);function c(e,t){for(n.f[6]++,n.s[29]++;;){var i=(n.s[30]++,e.indexOf("<",t));if(n.s[31]++,-1===i)return n.b[4][0]++,n.s[32]++,i;n.b[4][1]++;var r=(n.s[33]++,e.charAt(i+1));if(n.s[34]++,n.b[6][0]++,"/"===r||(n.b[6][1]++,"!"===r)||(n.b[6][2]++,u.test(r)))return n.b[5][0]++,n.s[35]++,i;n.b[5][1]++,n.s[36]++,t=i+1}}function d(e){n.f[7]++;var t=(n.s[37]++,"text"),i=(n.s[38]++,e),r=i.str,s=i.position,o=(n.s[39]++,c(r,s.index));if(n.s[40]++,o===s.index)return n.b[7][0]++,void n.s[41]++;n.b[7][1]++,n.s[42]++,-1===o?(n.b[8][0]++,n.s[43]++,o=r.length):n.b[8][1]++;var h=(n.s[44]++,l(s)),u=(n.s[45]++,r.slice(s.index,o));n.s[46]++,a(s,r,o);var d=(n.s[47]++,l(s));n.s[48]++,e.tokens.push({type:t,content:u,position:{start:h,end:d}})}function p(e){n.f[8]++;var t=(n.s[49]++,e),i=t.str,r=t.position,o=(n.s[50]++,l(r));n.s[51]++,s(r,i,4);var h=(n.s[52]++,i.indexOf("--\x3e",r.index)),u=(n.s[53]++,h+3);n.s[54]++,-1===h?(n.b[9][0]++,n.s[55]++,h=u=i.length):n.b[9][1]++;var c=(n.s[56]++,i.slice(r.index,h));n.s[57]++,a(r,i,u),n.s[58]++,e.tokens.push({type:"comment",content:c,position:{start:o,end:l(r)}})}function m(e){n.f[9]++;var t=(n.s[59]++,e),i=t.str,r=t.position,a=(n.s[60]++,i.charAt(r.index+1)),o=(n.s[61]++,"/"===a),h=(n.s[62]++,l(r));n.s[63]++,s(r,i,o?(n.b[10][0]++,2):(n.b[10][1]++,1)),n.s[64]++,e.tokens.push({type:"tag-start",close:o,position:{start:h}});var u=(n.s[65]++,y(e));n.s[66]++,E(e);var c=(n.s[67]++,i.charAt(r.index)),d=(n.s[68]++,"/"===c);n.s[69]++,s(r,i,d?(n.b[11][0]++,2):(n.b[11][1]++,1));var p=(n.s[70]++,l(r));return n.s[71]++,e.tokens.push({type:"tag-end",close:d,position:{end:p}}),n.s[72]++,u}var g=(n.s[73]++,/\s/);function f(e){return n.f[10]++,n.s[74]++,g.test(e)}function y(e){n.f[11]++;var t=(n.s[75]++,e),i=t.str,r=t.position,s=(n.s[76]++,i.length),o=(n.s[77]++,r.index);for(n.s[78]++;o<s;){var l=(n.s[79]++,i.charAt(o)),h=(n.s[80]++,n.b[12][0]++,!(f(l)||(n.b[12][1]++,"/"===l)||(n.b[12][2]++,">"===l)));if(n.s[81]++,h){n.b[13][0]++,n.s[82]++;break}n.b[13][1]++,n.s[83]++,o++}var u=(n.s[84]++,o+1);for(n.s[85]++;u<s;){var c=(n.s[86]++,i.charAt(u)),d=(n.s[87]++,n.b[14][0]++,!(f(c)||(n.b[14][1]++,"/"===c)||(n.b[14][2]++,">"===c)));if(n.s[88]++,!d){n.b[15][0]++,n.s[89]++;break}n.b[15][1]++,n.s[90]++,u++}n.s[91]++,a(r,i,u);var p=(n.s[92]++,i.slice(o,u));return n.s[93]++,e.tokens.push({type:"tag",content:p}),n.s[94]++,p}function E(e){n.f[12]++;var t=(n.s[95]++,e),i=t.str,s=t.position,o=t.tokens,l=(n.s[96]++,s.index),h=(n.s[97]++,null),u=(n.s[98]++,l),c=(n.s[99]++,[]),d=(n.s[100]++,i.length);for(n.s[101]++;l<d;){var p=(n.s[102]++,i.charAt(l));if(n.s[103]++,h){n.b[16][0]++;var m=(n.s[104]++,p===h);n.s[105]++,m?(n.b[17][0]++,n.s[106]++,h=null):n.b[17][1]++,n.s[107]++,l++,n.s[108]++}else{n.b[16][1]++;var g=(n.s[109]++,n.b[18][0]++,"/"===p||(n.b[18][1]++,">"===p));if(n.s[110]++,g){n.b[19][0]++,n.s[111]++,l!==u?(n.b[20][0]++,n.s[112]++,c.push(i.slice(u,l))):n.b[20][1]++,n.s[113]++;break}n.b[19][1]++;var y=(n.s[114]++,f(p));if(n.s[115]++,y)n.b[21][0]++,n.s[116]++,l!==u?(n.b[22][0]++,n.s[117]++,c.push(i.slice(u,l))):n.b[22][1]++,n.s[118]++,u=l+1,n.s[119]++,l++,n.s[120]++;else{n.b[21][1]++;var E=(n.s[121]++,n.b[23][0]++,"'"===p||(n.b[23][1]++,'"'===p));n.s[122]++,E?(n.b[24][0]++,n.s[123]++,h=p,n.s[124]++,l++,n.s[125]++):(n.b[24][1]++,n.s[126]++,l++)}}}n.s[127]++,a(s,i,l);var v=(n.s[128]++,c.length),A=(n.s[129]++,"attribute");n.s[130]++;for(var b=0;b<v;b++){var S=(n.s[131]++,c[b]),_=(n.s[132]++,-1===S.indexOf("="));if(n.s[133]++,_){n.b[25][0]++;var x=(n.s[134]++,c[b+1]);if(n.s[135]++,n.b[27][0]++,x&&(n.b[27][1]++,(0,r.startsWith)(x,"="))){if(n.b[26][0]++,n.s[136]++,x.length>1){n.b[28][0]++;var w=(n.s[137]++,S+x);n.s[138]++,o.push({type:A,content:w}),n.s[139]++,b+=1,n.s[140]++;continue}n.b[28][1]++;var T=(n.s[141]++,c[b+2]);if(n.s[142]++,b+=1,n.s[143]++,T){n.b[29][0]++;var P=(n.s[144]++,S+"="+T);n.s[145]++,o.push({type:A,content:P}),n.s[146]++,b+=1,n.s[147]++;continue}n.b[29][1]++}else n.b[26][1]++}else n.b[25][1]++;if(n.s[148]++,(0,r.endsWith)(S,"=")){n.b[30][0]++;var C=(n.s[149]++,c[b+1]);if(n.s[150]++,n.b[32][0]++,C&&(n.b[32][1]++,!(0,r.stringIncludes)(C,"="))){n.b[31][0]++;var V=(n.s[151]++,S+C);n.s[152]++,o.push({type:A,content:V}),n.s[153]++,b+=1,n.s[154]++;continue}n.b[31][1]++;var R=(n.s[155]++,S.slice(0,-1));n.s[156]++,o.push({type:A,content:R}),n.s[157]++}else n.b[30][1]++,n.s[158]++,o.push({type:A,content:S})}}var v=(n.s[159]++,[].push);function A(e,t){n.f[13]++;var i=(n.s[160]++,t),r=i.str,s=i.position,o=i.tokens,h=(n.s[161]++,e.toLowerCase()),u=(n.s[162]++,r.length),c=(n.s[163]++,s.index);for(n.s[164]++;c<u;){var p=(n.s[165]++,r.indexOf("</",c));if(n.s[166]++,-1===p){n.b[33][0]++,n.s[167]++,d(t),n.s[168]++;break}n.b[33][1]++;var g=(n.s[169]++,l(s));n.s[170]++,a(g,r,p);var f=(n.s[171]++,{str:r,position:g,tokens:[]}),y=(n.s[172]++,m(f));if(n.s[173]++,h===y.toLowerCase()){if(n.b[34][1]++,n.s[176]++,p!==s.index){n.b[35][0]++;var E=(n.s[177]++,l(s));n.s[178]++,a(s,r,p),n.s[179]++,o.push({type:"text",content:r.slice(E.index,p),position:{start:E,end:l(s)}})}else n.b[35][1]++;n.s[180]++,v.apply(o,f.tokens),n.s[181]++,a(s,r,f.position.index),n.s[182]++;break}n.b[34][0]++,n.s[174]++,c=f.position.index,n.s[175]++}}},{"./compat":1}],5:[function(e,t,i){"use strict";var n=function(){var e="/Users/chrisandrejewski/Desktop/Work/github-repos/himalaya/src/parser.js",t="10fb0478bb046c7059c47c8225586b7e30f48474",i=new(0,function(){}.constructor)("return this")(),n="__coverage__",r={path:"/Users/chrisandrejewski/Desktop/Work/github-repos/himalaya/src/parser.js",statementMap:{0:{start:{line:4,column:15},end:{line:4,column:44}},1:{start:{line:5,column:16},end:{line:5,column:59}},2:{start:{line:6,column:2},end:{line:6,column:14}},3:{start:{line:7,column:2},end:{line:7,column:22}},4:{start:{line:11,column:21},end:{line:11,column:39}},5:{start:{line:12,column:2},end:{line:24,column:3}},6:{start:{line:13,column:23},end:{line:13,column:39}},7:{start:{line:14,column:4},end:{line:23,column:5}},8:{start:{line:15,column:28},end:{line:15,column:55}},9:{start:{line:16,column:6},end:{line:18,column:7}},10:{start:{line:17,column:8},end:{line:17,column:13}},11:{start:{line:19,column:6},end:{line:21,column:7}},12:{start:{line:20,column:8},end:{line:20,column:19}},13:{start:{line:22,column:6},end:{line:22,column:20}},14:{start:{line:25,column:2},end:{line:25,column:14}},15:{start:{line:29,column:2},end:{line:29,column:45}},16:{start:{line:30,column:2},end:{line:32,column:3}},17:{start:{line:31,column:4},end:{line:31,column:47}},18:{start:{line:33,column:2},end:{line:33,column:25}},19:{start:{line:37,column:28},end:{line:37,column:33}},20:{start:{line:38,column:16},end:{line:38,column:21}},21:{start:{line:39,column:14},end:{line:39,column:46}},22:{start:{line:40,column:14},end:{line:40,column:27}},23:{start:{line:41,column:17},end:{line:41,column:22}},24:{start:{line:42,column:2},end:{line:132,column:3}},25:{start:{line:43,column:18},end:{line:43,column:32}},26:{start:{line:44,column:4},end:{line:48,column:5}},27:{start:{line:45,column:6},end:{line:45,column:23}},28:{start:{line:46,column:6},end:{line:46,column:14}},29:{start:{line:47,column:6},end:{line:47,column:14}},30:{start:{line:50,column:21},end:{line:50,column:37}},31:{start:{line:51,column:4},end:{line:51,column:12}},32:{start:{line:52,column:20},end:{line:52,column:50}},33:{start:{line:53,column:4},end:{line:73,column:5}},34:{start:{line:54,column:18},end:{line:54,column:30}},35:{start:{line:55,column:25},end:{line:55,column:30}},36:{start:{line:56,column:6},end:{line:61,column:7}},37:{start:{line:57,column:8},end:{line:60,column:9}},38:{start:{line:58,column:10},end:{line:58,column:29}},39:{start:{line:59,column:10},end:{line:59,column:15}},40:{start:{line:62,column:6},end:{line:66,column:7}},41:{start:{line:63,column:25},end:{line:63,column:39}},42:{start:{line:64,column:8},end:{line:64,column:46}},43:{start:{line:64,column:41},end:{line:64,column:46}},44:{start:{line:65,column:8},end:{line:65,column:16}},45:{start:{line:67,column:6},end:{line:72,column:7}},46:{start:{line:68,column:8},end:{line:68,column:88}},47:{start:{line:69,column:8},end:{line:69,column:13}},48:{start:{line:71,column:8},end:{line:71,column:16}},49:{start:{line:75,column:25},end:{line:75,column:68}},50:{start:{line:76,column:34},end:{line:76,column:46}},51:{start:{line:77,column:4},end:{line:80,column:5}},52:{start:{line:78,column:56},end:{line:78,column:63}},53:{start:{line:79,column:6},end:{line:79,column:77}},54:{start:{line:82,column:4},end:{line:95,column:5}},55:{start:{line:85,column:25},end:{line:85,column:41}},56:{start:{line:86,column:6},end:{line:94,column:7}},57:{start:{line:87,column:8},end:{line:92,column:9}},58:{start:{line:88,column:10},end:{line:88,column:86}},59:{start:{line:89,column:32},end:{line:89,column:48}},60:{start:{line:90,column:10},end:{line:90,column:47}},61:{start:{line:91,column:10},end:{line:91,column:15}},62:{start:{line:93,column:8},end:{line:93,column:39}},63:{start:{line:97,column:21},end:{line:97,column:23}},64:{start:{line:99,column:4},end:{line:104,column:5}},65:{start:{line:100,column:6},end:{line:100,column:32}},66:{start:{line:101,column:6},end:{line:101,column:45}},67:{start:{line:101,column:40},end:{line:101,column:45}},68:{start:{line:102,column:6},end:{line:102,column:40}},69:{start:{line:103,column:6},end:{line:103,column:14}},70:{start:{line:106,column:4},end:{line:106,column:12}},71:{start:{line:107,column:21},end:{line:107,column:23}},72:{start:{line:108,column:21},end:{line:111,column:5}},73:{start:{line:112,column:24},end:{line:118,column:5}},74:{start:{line:119,column:4},end:{line:119,column:27}},75:{start:{line:121,column:24},end:{line:121,column:86}},76:{start:{line:122,column:4},end:{line:131,column:5}},77:{start:{line:123,column:19},end:{line:123,column:60}},78:{start:{line:124,column:25},end:{line:124,column:57}},79:{start:{line:125,column:6},end:{line:125,column:23}},80:{start:{line:126,column:6},end:{line:126,column:32}},81:{start:{line:127,column:31},end:{line:127,column:52}},82:{start:{line:128,column:6},end:{line:130,column:7}},83:{start:{line:129,column:8},end:{line:129,column:66}},84:{start:{line:133,column:2},end:{line:133,column:23}}},fnMap:{0:{name:"parser",decl:{start:{line:3,column:24},end:{line:3,column:30}},loc:{start:{line:3,column:49},end:{line:8,column:1}},line:3},1:{name:"hasTerminalParent",decl:{start:{line:10,column:16},end:{line:10,column:33}},loc:{start:{line:10,column:62},end:{line:26,column:1}},line:10},2:{name:"rewindStack",decl:{start:{line:28,column:16},end:{line:28,column:27}},loc:{start:{line:28,column:81},end:{line:34,column:1}},line:28},3:{name:"parse",decl:{start:{line:36,column:16},end:{line:36,column:21}},loc:{start:{line:36,column:30},end:{line:134,column:1}},line:36}},branchMap:{0:{loc:{start:{line:12,column:2},end:{line:24,column:3}},type:"if",locations:[{start:{line:12,column:2},end:{line:24,column:3}},{start:{line:12,column:2},end:{line:24,column:3}}],line:12},1:{loc:{start:{line:16,column:6},end:{line:18,column:7}},type:"if",locations:[{start:{line:16,column:6},end:{line:18,column:7}},{start:{line:16,column:6},end:{line:18,column:7}}],line:16},2:{loc:{start:{line:19,column:6},end:{line:21,column:7}},type:"if",locations:[{start:{line:19,column:6},end:{line:21,column:7}},{start:{line:19,column:6},end:{line:21,column:7}}],line:19},3:{loc:{start:{line:44,column:4},end:{line:48,column:5}},type:"if",locations:[{start:{line:44,column:4},end:{line:48,column:5}},{start:{line:44,column:4},end:{line:48,column:5}}],line:44},4:{loc:{start:{line:53,column:4},end:{line:73,column:5}},type:"if",locations:[{start:{line:53,column:4},end:{line:73,column:5}},{start:{line:53,column:4},end:{line:73,column:5}}],line:53},5:{loc:{start:{line:57,column:8},end:{line:60,column:9}},type:"if",locations:[{start:{line:57,column:8},end:{line:60,column:9}},{start:{line:57,column:8},end:{line:60,column:9}}],line:57},6:{loc:{start:{line:64,column:8},end:{line:64,column:46}},type:"if",locations:[{start:{line:64,column:8},end:{line:64,column:46}},{start:{line:64,column:8},end:{line:64,column:46}}],line:64},7:{loc:{start:{line:67,column:6},end:{line:72,column:7}},type:"if",locations:[{start:{line:67,column:6},end:{line:72,column:7}},{start:{line:67,column:6},end:{line:72,column:7}}],line:67},8:{loc:{start:{line:77,column:4},end:{line:80,column:5}},type:"if",locations:[{start:{line:77,column:4},end:{line:80,column:5}},{start:{line:77,column:4},end:{line:80,column:5}}],line:77},9:{loc:{start:{line:82,column:4},end:{line:95,column:5}},type:"if",locations:[{start:{line:82,column:4},end:{line:95,column:5}},{start:{line:82,column:4},end:{line:95,column:5}}],line:82},10:{loc:{start:{line:87,column:8},end:{line:92,column:9}},type:"if",locations:[{start:{line:87,column:8},end:{line:92,column:9}},{start:{line:87,column:8},end:{line:92,column:9}}],line:87},11:{loc:{start:{line:101,column:6},end:{line:101,column:45}},type:"if",locations:[{start:{line:101,column:6},end:{line:101,column:45}},{start:{line:101,column:6},end:{line:101,column:45}}],line:101},12:{loc:{start:{line:121,column:26},end:{line:121,column:85}},type:"binary-expr",locations:[{start:{line:121,column:26},end:{line:121,column:41}},{start:{line:121,column:45},end:{line:121,column:85}}],line:121},13:{loc:{start:{line:122,column:4},end:{line:131,column:5}},type:"if",locations:[{start:{line:122,column:4},end:{line:131,column:5}},{start:{line:122,column:4},end:{line:131,column:5}}],line:122},14:{loc:{start:{line:128,column:6},end:{line:130,column:7}},type:"if",locations:[{start:{line:128,column:6},end:{line:130,column:7}},{start:{line:128,column:6},end:{line:130,column:7}}],line:128}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},s=i[n]||(i[n]={});return s[e]&&s[e].hash===t?s[e]:(r.hash=t,s[e]=r)}();Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e,t){n.f[0]++;var i=(n.s[0]++,{tagName:null,children:[]}),r=(n.s[1]++,{tokens:e,options:t,cursor:0,stack:[i]});return n.s[2]++,o(r),n.s[3]++,i.children},i.hasTerminalParent=s,i.rewindStack=a,i.parse=o;var r=e("./compat");function s(e,t,i){n.f[1]++;var s=(n.s[4]++,i[e]);if(n.s[5]++,s){n.b[0][0]++;var a=(n.s[6]++,t.length-1);for(n.s[7]++;a>=0;){var o=(n.s[8]++,t[a].tagName);if(n.s[9]++,o===e){n.b[1][0]++,n.s[10]++;break}if(n.b[1][1]++,n.s[11]++,(0,r.arrayIncludes)(s,o))return n.b[2][0]++,n.s[12]++,!0;n.b[2][1]++,n.s[13]++,a--}}else n.b[0][1]++;return n.s[14]++,!1}function a(e,t,i,r){n.f[2]++,n.s[15]++,e[t].position.end=r,n.s[16]++;for(var s=t+1,a=e.length;s<a;s++)n.s[17]++,e[s].position.end=i;n.s[18]++,e.splice(t)}function o(e){n.f[3]++;var t=(n.s[19]++,e),i=t.tokens,l=t.options,h=(n.s[20]++,e).stack,u=(n.s[21]++,h[h.length-1].children),c=(n.s[22]++,i.length),d=(n.s[23]++,e).cursor;for(n.s[24]++;d<c;){var p=(n.s[25]++,i[d]);if(n.s[26]++,"tag-start"===p.type){n.b[3][1]++;var m=(n.s[30]++,i[++d]);n.s[31]++,d++;var g=(n.s[32]++,m.content.toLowerCase());if(n.s[33]++,p.close){n.b[4][0]++;var f=(n.s[34]++,h.length),y=(n.s[35]++,!1);for(n.s[36]++;--f>-1;){if(n.s[37]++,h[f].tagName===g){n.b[5][0]++,n.s[38]++,y=!0,n.s[39]++;break}n.b[5][1]++}for(n.s[40]++;d<c;){var E=(n.s[41]++,i[d]);if(n.s[42]++,"tag-end"!==E.type){n.b[6][0]++,n.s[43]++;break}n.b[6][1]++,n.s[44]++,d++}if(n.s[45]++,y){n.b[7][0]++,n.s[46]++,a(h,f,p.position.start,i[d-1].position.end),n.s[47]++;break}n.b[7][1]++,n.s[48]++}else{n.b[4][1]++;var v=(n.s[49]++,(0,r.arrayIncludes)(l.closingTags,g)),A=(n.s[50]++,v);if(n.s[51]++,A){n.b[8][0]++;var b=(n.s[52]++,l).closingTagAncestorBreakers;n.s[53]++,A=!s(g,h,b)}else n.b[8][1]++;if(n.s[54]++,A){n.b[9][0]++;var S=(n.s[55]++,h.length-1);for(n.s[56]++;S>0;){if(n.s[57]++,g===h[S].tagName){n.b[10][0]++,n.s[58]++,a(h,S,p.position.start,p.position.start);var _=(n.s[59]++,S-1);n.s[60]++,u=h[_].children,n.s[61]++;break}n.b[10][1]++,n.s[62]++,S-=1}}else n.b[9][1]++;var x=(n.s[63]++,[]),w=void 0;for(n.s[64]++;d<c;){if(n.s[65]++,w=i[d],n.s[66]++,"tag-end"===w.type){n.b[11][0]++,n.s[67]++;break}n.b[11][1]++,n.s[68]++,x.push(w.content),n.s[69]++,d++}n.s[70]++,d++;var T=(n.s[71]++,[]),P=(n.s[72]++,{start:p.position.start,end:w.position.end}),C=(n.s[73]++,{type:"element",tagName:m.content,attributes:x,children:T,position:P});n.s[74]++,u.push(C);var V=(n.s[75]++,n.b[12][0]++,!(w.close||(n.b[12][1]++,(0,r.arrayIncludes)(l.voidTags,g))));if(n.s[76]++,V){n.b[13][0]++;var R=(n.s[77]++,h.push({tagName:g,children:T,position:P})),N=(n.s[78]++,{tokens:i,options:l,cursor:d,stack:h});n.s[79]++,o(N),n.s[80]++,d=N.cursor;var M=(n.s[81]++,h.length===R);n.s[82]++,M?(n.b[14][0]++,n.s[83]++,C.position.end=i[d-1].position.end):n.b[14][1]++}else n.b[13][1]++}}else n.b[3][0]++,n.s[27]++,u.push(p),n.s[28]++,d++,n.s[29]++}n.s[84]++,e.cursor=d}},{"./compat":1}],6:[function(e,t,i){"use strict";var n=function(){var e="/Users/chrisandrejewski/Desktop/Work/github-repos/himalaya/src/stringify.js",t="4a6a4628f3d12bd91f868fee07f716c74df89307",i=new(0,function(){}.constructor)("return this")(),n="__coverage__",r={path:"/Users/chrisandrejewski/Desktop/Work/github-repos/himalaya/src/stringify.js",statementMap:{0:{start:{line:4,column:2},end:{line:12,column:8}},1:{start:{line:5,column:25},end:{line:5,column:34}},2:{start:{line:6,column:4},end:{line:8,column:5}},3:{start:{line:7,column:6},end:{line:7,column:30}},4:{start:{line:9,column:24},end:{line:9,column:50}},5:{start:{line:10,column:18},end:{line:10,column:42}},6:{start:{line:11,column:4},end:{line:11,column:53}},7:{start:{line:16,column:2},end:{line:28,column:13}},8:{start:{line:17,column:4},end:{line:19,column:5}},9:{start:{line:18,column:6},end:{line:18,column:25}},10:{start:{line:20,column:4},end:{line:22,column:5}},11:{start:{line:21,column:6},end:{line:21,column:37}},12:{start:{line:23,column:44},end:{line:23,column:48}},13:{start:{line:24,column:26},end:{line:24,column:80}},14:{start:{line:25,column:4},end:{line:27,column:94}}},fnMap:{0:{name:"formatAttributes",decl:{start:{line:3,column:16},end:{line:3,column:32}},loc:{start:{line:3,column:46},end:{line:13,column:1}},line:3},1:{name:"(anonymous_1)",decl:{start:{line:4,column:27},end:{line:4,column:28}},loc:{start:{line:4,column:49},end:{line:12,column:3}},line:4},2:{name:"toHTML",decl:{start:{line:15,column:16},end:{line:15,column:22}},loc:{start:{line:15,column:39},end:{line:29,column:1}},line:15},3:{name:"(anonymous_3)",decl:{start:{line:16,column:18},end:{line:16,column:19}},loc:{start:{line:16,column:26},end:{line:28,column:3}},line:16}},branchMap:{0:{loc:{start:{line:6,column:4},end:{line:8,column:5}},type:"if",locations:[{start:{line:6,column:4},end:{line:8,column:5}},{start:{line:6,column:4},end:{line:8,column:5}}],line:6},1:{loc:{start:{line:10,column:18},end:{line:10,column:42}},type:"cond-expr",locations:[{start:{line:10,column:32},end:{line:10,column:35}},{start:{line:10,column:38},end:{line:10,column:42}}],line:10},2:{loc:{start:{line:17,column:4},end:{line:19,column:5}},type:"if",locations:[{start:{line:17,column:4},end:{line:19,column:5}},{start:{line:17,column:4},end:{line:19,column:5}}],line:17},3:{loc:{start:{line:20,column:4},end:{line:22,column:5}},type:"if",locations:[{start:{line:20,column:4},end:{line:22,column:5}},{start:{line:20,column:4},end:{line:22,column:5}}],line:20},4:{loc:{start:{line:25,column:11},end:{line:27,column:94}},type:"cond-expr",locations:[{start:{line:26,column:8},end:{line:26,column:53}},{start:{line:27,column:8},end:{line:27,column:94}}],line:25}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},s=i[n]||(i[n]={});return s[e]&&s[e].hash===t?s[e]:(r.hash=t,s[e]=r)}();Object.defineProperty(i,"__esModule",{value:!0}),i.formatAttributes=s,i.toHTML=a;var r=e("./compat");function s(e){return n.f[0]++,n.s[0]++,e.reduce((function(e,t){n.f[1]++;var i=(n.s[1]++,t),r=i.key,s=i.value;if(n.s[2]++,null===s)return n.b[0][0]++,n.s[3]++,e+" "+r;n.b[0][1]++;var a=(n.s[4]++,-1!==s.indexOf("'")),o=(n.s[5]++,a?(n.b[1][0]++,'"'):(n.b[1][1]++,"'"));return n.s[6]++,e+" "+r+"="+o+s+o}),"")}function a(e,t){return n.f[2]++,n.s[7]++,e.map((function(e){if(n.f[3]++,n.s[8]++,"text"===e.type)return n.b[2][0]++,n.s[9]++,e.content;if(n.b[2][1]++,n.s[10]++,"comment"===e.type)return n.b[3][0]++,n.s[11]++,"\x3c!--"+e.content+"--\x3e";n.b[3][1]++;var i=(n.s[12]++,e),o=i.tagName,l=i.attributes,h=i.children,u=(n.s[13]++,(0,r.arrayIncludes)(t.voidTags,o.toLowerCase()));return n.s[14]++,u?(n.b[4][0]++,"<"+o+s(l)+">"):(n.b[4][1]++,"<"+o+s(l)+">"+a(h,t)+"</"+o+">")})).join("")}i.default={toHTML:a}},{"./compat":1}],7:[function(e,t,i){"use strict";var n=function(){var e="/Users/chrisandrejewski/Desktop/Work/github-repos/himalaya/src/tags.js",t="6039b9f65d15797c952509955976acf6930e65a4",i=new(0,function(){}.constructor)("return this")(),n="__coverage__",r={path:"/Users/chrisandrejewski/Desktop/Work/github-repos/himalaya/src/tags.js",statementMap:{0:{start:{line:5,column:29},end:{line:5,column:60}},1:{start:{line:11,column:27},end:{line:14,column:1}},2:{start:{line:23,column:42},end:{line:32,column:1}},3:{start:{line:38,column:24},end:{line:42,column:1}}},fnMap:{},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{},b:{},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},s=i[n]||(i[n]={});return s[e]&&s[e].hash===t?s[e]:(r.hash=t,s[e]=r)}();Object.defineProperty(i,"__esModule",{value:!0}),i.childlessTags=(n.s[0]++,["style","script","template"]),i.closingTags=(n.s[1]++,["html","head","body","p","dt","dd","li","option","thead","th","tbody","tr","td","tfoot","colgroup"]),i.closingTagAncestorBreakers=(n.s[2]++,{li:["ul","ol","menu"],dt:["dl"],dd:["dl"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table"],td:["table"]}),i.voidTags=(n.s[3]++,["!doctype","area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"])},{}]},{},[3])(3)},37:()=>{!function(){window.phetio=window.phetio||{};window.phetio.PhetioIDUtils={append:function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return i.forEach(t=>{if(""===t)return;e+=(""===e?"":".")+t}),e},getComponentName:function(e){const t=e.lastIndexOf(".");return-1===t?e:e.substring(t+1,e.length)},getParentID:function(e){const t=e.lastIndexOf(".");return-1===t?null:e.substring(0,t)},getDOMElementID:function(e){return"phetioID:"+e},getScreenID:function(e){const t=[],i=e.split(".");for(let n=0;n<i.length;n++){const e=i[n];t.push(e);const r=e.indexOf("Screen");if(r>0&&r+"Screen".length===e.length)return t.join(".")}return null},getGroupElementIndex:function(e){return Number(e.split(window.phetio.PhetioIDUtils.GROUP_SEPARATOR)[1])},isAncestor:function(e,t){const i=e.split("."),n=t.split(".");for(let r=0;r<i.length;r++)if(i[r]!==n[r])return!1;return t!==e},getArchetypalPhetioID:function(e){const t=e.split(".");for(let i=0;i<t.length;i++){const e=t[i];if(e.endsWith("Capsule")&&i<t.length-1)t[i+1]="archetype",i++;else{const n=e.split("-").map(e=>e.includes("_")?"archetype":e);t[i]=n.join("-")}}return t.join(".")},SEPARATOR:".",GROUP_SEPARATOR:"_",INTER_TERM_SEPARATOR:"-",GENERAL_COMPONENT_NAME:"general",GLOBAL_COMPONENT_NAME:"global",HOME_SCREEN_COMPONENT_NAME:"homeScreen",MODEL_COMPONENT_NAME:"model",VIEW_COMPONENT_NAME:"view",CONTROLLER_COMPONENT_NAME:"controller",COLORS_COMPONENT_NAME:"colors",STRINGS_COMPONENT_NAME:"strings",ARCHETYPE:"archetype",CAPSULE_SUFFIX:"Capsule"}}()},859:(e,t,i)=>{var n=i(980),r=i(820);void 0===r.himalaya&&(r.himalaya=n),e.exports=n},820:(e,t,i)=>{"use strict";e.exports=function(){if("object"==typeof globalThis)return globalThis;var e;try{e=this||new Function("return this")()}catch(t){if("object"==typeof window)return window;if("object"==typeof self)return self;if(void 0!==i.g)return i.g}return e}()}},i={};function n(e){var r=i[e];if(void 0!==r)return r.exports;var s=i[e]={id:e,loaded:!1,exports:{}};return t[e](s,s.exports,n),s.loaded=!0,s.exports}n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),((t,i,r,s,a,o,l,h,u,c,d,p,m,g,f,y,E,v,A,b,S,x,w,T,P,C,V,R,N,M,k,L,I,B,D,O,q,Y,H,G,F,z,U,W,X,j,Q,K,Z,J,ee,te,ie,ne,re,se,ae,oe,le,ue,ce,de,pe,me,ge,fe,ye,Ee,ve,Ae,be,Se,_e,xe,we,Te,Pe,Ce,Ve,Re,Ne,Me,ke,Le,Ie,Be,De,Oe,qe,Ye,He,Ge,Fe,ze,Ue,We,Xe,je,Qe,Ke,Ze,Je,$e,et,tt,it,nt,rt,st,at,ot,lt,ht,ut,ct,dt,pt,mt,gt,ft,yt,Et,vt)=>{"use strict";var At=n(897);const bt=class{constructor(e){if(this.name=e,window.phet){if("chipper"===e)return window.phet.chipper.name="chipper",window.phet.chipper.register=this.register.bind(window.phet.chipper),window.phet.chipper;_.hasIn(window,"phet.chipper.brand");window.phet[e]=this}}register(e,t){if(e.indexOf(".")<0)At.Z,this[e]=t;else{const i=e.split(".");let n=this;for(let e=0;e<i.length-1;e++)At.Z,n=n[i[e]];const r=i[i.length-1];At.Z,n[r]=t}return t}},St=new bt("alpenglow"),_t=e=>(e>>>0)+"u",xt=_t;St.register("u32",_t);const wt=e=>`0x${(e>>>0).toString(16)}u`,Tt=wt;St.register("u32Hex",wt);const Pt=e=>(e>>0)+"i",Ct=Pt;St.register("i32",Pt);const Vt=e=>`0x${(e>>0).toString(16)}i`;St.register("i32Hex",Vt);const Rt=e=>e+"f",Nt=Rt;St.register("f32",Rt);const Mt=()=>({before:"\n\n\n\nalias u64 = vec2<u32>;\n",after:"",imports:[]}),kt=Mt;St.register("wgsl_u64",Mt);const Lt=()=>({before:"\n\n\n\nalias i64 = vec2<u32>;\n",after:"",imports:[]}),It=Lt;St.register("wgsl_i64",Lt);const Bt=()=>({before:"\n\n\n\nalias q128 = vec4<u32>;\n",after:"",imports:[]}),Dt=Bt;St.register("wgsl_q128",Bt);const Ot=()=>({before:"\n\n\n\nconst ZERO_u64 = vec2( 0u, 0u );\n",after:"",imports:[]});St.register("wgsl_ZERO_u64",Ot);const qt=()=>({before:"\n\n\n\nconst ONE_u64 = vec2( 1u, 0u );\n",after:"",imports:[]});St.register("wgsl_ONE_u64",qt);const Yt=()=>({before:"\n\n\n\nconst ZERO_q128 = vec4( 0u, 0u, 1u, 0u );\n",after:"",imports:[]}),Ht=Yt;St.register("wgsl_ZERO_q128",Yt);const Gt=()=>({before:"\n\n\n\nconst ONE_q128 = vec4( 1u, 0u, 1u, 0u );\n",after:"",imports:[]}),Ft=Gt;St.register("wgsl_ONE_q128",Gt);const zt=()=>({before:"\n\n\n\n\nfn u32_to_u64( x: u32 ) -> u64 {\n  return vec2<u32>( x, 0u );\n}\n",after:"",imports:[kt]});St.register("wgsl_u32_to_u64",zt);const Ut=()=>({before:"\n\n\n\n\nfn i32_to_i64( x: i32 ) -> i64 {\n  return vec2<u32>( u32( x ), select( 0u, 0xffffffffu, x < 0i ) );\n}\n",after:"",imports:[It]}),Wt=Ut;St.register("wgsl_i32_to_i64",Ut);const Xt=()=>({before:"\n\n\n\n\nfn add_u32_u32_to_u64( a: u32, b: u32 ) -> u64 {\n  let sum = a + b;\n  return vec2( sum, select( 0u, 1u, sum < a ) );\n}\n",after:"",imports:[kt]}),jt=Xt;St.register("wgsl_add_u32_u32_to_u64",Xt);const Qt=()=>({before:"\n\n\n\n\n\n\nfn mul_u32_u32_to_u64( a: u32, b: u32 ) -> u64 {\n  let a_low = a & 0xffffu;\n  let a_high = a >> 16u;\n  let b_low = b & 0xffffu;\n  let b_high = b >> 16u;\n  let c_low = a_low * b_low;\n  let c_mid = a_low * b_high + a_high * b_low;\n  let c_high = a_high * b_high;\n  let low = add_u32_u32_to_u64( c_low, c_mid << 16u );\n  let high = vec2( 0u, ( c_mid >> 16u ) + c_high );\n  return low + high;\n}\n",after:"",imports:[kt,jt]}),Kt=Qt;St.register("wgsl_mul_u32_u32_to_u64",Qt);const Zt=()=>({before:"\n\n\n\n\n\n\nfn add_u64_u64( a: u64, b: u64 ) -> u64 {\n  return add_u32_u32_to_u64( a.x, b.x ) + vec2( 0u, add_u32_u32_to_u64( a.y, b.y ).x );\n}\n",after:"",imports:[kt,jt]}),Jt=Zt;St.register("wgsl_add_u64_u64",Zt);const $t=()=>({before:"\n\n\n\n\nfn add_i64_i64( a: i64, b: i64 ) -> i64 {\n  return add_u64_u64( a, b );\n}\n",after:"",imports:[It,Jt]}),ei=$t;St.register("wgsl_add_i64_i64",$t);const ti=()=>({before:"\n\n\n\n\nfn negate_i64( a: i64 ) -> i64 {\n  return add_u64_u64( ~a, vec2( 1u, 0u ) );\n}\n",after:"",imports:[It,Jt]}),ii=ti;St.register("wgsl_negate_i64",ti);const ni=()=>({before:"\n\n\n\n\nfn is_zero_u64( a: u64 ) -> bool {\n  return a.x == 0u && a.y == 0u;\n}\n",after:"",imports:[kt]}),ri=ni;St.register("wgsl_is_zero_u64",ni);const si=()=>({before:"\n\n\n\n\nfn is_negative_i64( a: i64 ) -> bool {\n  return ( a.y >> 31u ) == 1u;\n}\n",after:"",imports:[It]}),ai=si;St.register("wgsl_is_negative_i64",si);const oi=()=>({before:"\n\n\n\n\nfn abs_i64( a: i64 ) -> i64 {\n  return select( a, negate_i64( a ), is_negative_i64( a ) );\n}\n",after:"",imports:[It,ii,ai]}),li=oi;St.register("wgsl_abs_i64",oi);const hi=()=>({before:"\n\n\n\n\nfn left_shift_u64( a: u64, b: u32 ) -> u64 {\n  if ( b == 0u ) {\n    return a;\n  }\n  else if ( b < 32u ) {\n    return vec2( a.x << b, ( a.y << b ) | ( a.x >> ( 32u - b ) ) );\n  }\n  else {\n    return vec2( 0u, a.x << ( b - 32u ) );\n  }\n}\n",after:"",imports:[kt]}),ui=hi;St.register("wgsl_left_shift_u64",hi);const ci=()=>({before:"\n\n\n\n\nfn right_shift_u64( a: u64, b: u32 ) -> u64 {\n  if ( b == 0u ) {\n    return a;\n  }\n  else if ( b < 32u ) {\n    return vec2( ( a.x >> b ) | ( a.y << ( 32u - b ) ), a.y >> b );\n  }\n  else {\n    return vec2( a.y >> ( b - 32u ), 0u );\n  }\n}\n",after:"",imports:[kt]}),di=ci;St.register("wgsl_right_shift_u64",ci);const pi=()=>({before:"\n\n\n\n\n\nfn first_leading_bit_u64( a: u64 ) -> u32 {\n  if ( a.y != 0u ) {\n    return firstLeadingBit( a.y ) + 32u;\n  }\n  else {\n    return firstLeadingBit( a.x );\n  }\n}\n",after:"",imports:[kt]}),mi=pi;St.register("wgsl_first_leading_bit_u64",pi);const gi=()=>({before:"\n\n\n\n\n\nfn first_trailing_bit_u64( a: u64 ) -> u32 {\n  if ( a.x != 0u ) {\n    return firstTrailingBit( a.x );\n  }\n  else {\n    return firstTrailingBit( a.y ) + 32u;\n  }\n}\n",after:"",imports:[kt]}),fi=gi;St.register("wgsl_first_trailing_bit_u64",gi);const yi=()=>({before:"\n\n\n\n\nfn subtract_i64_i64( a: i64, b: i64 ) -> i64 {\n  return add_i64_i64( a, negate_i64( b ) );\n}\n",after:"",imports:[It,ei,ii]}),Ei=yi;St.register("wgsl_subtract_i64_i64",yi);const vi=()=>({before:"\n\n\n\n\nfn cmp_u64_u64( a: u64, b: u64 ) -> i32 {\n  if ( a.y < b.y ) {\n    return -1i;\n  }\n  else if ( a.y > b.y ) {\n    return 1i;\n  }\n  else {\n    if ( a.x < b.x ) {\n      return -1i;\n    }\n    else if ( a.x > b.x ) {\n      return 1i;\n    }\n    else {\n      return 0i;\n    }\n  }\n}\n",after:"",imports:[kt]}),Ai=vi;St.register("wgsl_cmp_u64_u64",vi);const bi=()=>({before:"\n\n\n\n\nfn cmp_i64_i64( a: i64, b: i64 ) -> i32 {\n  let diff = subtract_i64_i64( a, b );\n  if ( is_zero_u64( diff ) ) {\n    return 0i;\n  }\n  else {\n    return select( 1i, -1i, is_negative_i64( diff ) );\n  }\n}\n",after:"",imports:[It,Ei,ri,ai]}),Si=bi;St.register("wgsl_cmp_i64_i64",bi);const _i=()=>({before:"\n\n\n\n\n\n\n\nfn mul_u64_u64( a: u64, b: u64 ) -> u64 {\n  let low = mul_u32_u32_to_u64( a.x, b.x );\n  let mid0 = vec2( 0u, mul_u32_u32_to_u64( a.x, b.y ).x );\n  let mid1 = vec2( 0u, mul_u32_u32_to_u64( a.y, b.x ).x );\n  return add_u64_u64( add_u64_u64( low, mid0 ), mid1 );\n}\n",after:"",imports:[kt,Kt,Jt]}),xi=_i;St.register("wgsl_mul_u64_u64",_i);const wi=()=>({before:"\n\n\n\n\nfn mul_i64_i64( a: i64, b: i64 ) -> i64 {\n  var result = mul_u64_u64( abs_i64( a ), abs_i64( b ) );\n  result.y &= 0x7fffffffu; \n  if ( is_negative_i64( a ) != is_negative_i64( b ) ) {\n    return negate_i64( result );\n  }\n  else {\n    return result;\n  }\n}\n",after:"",imports:[It,xi,li,ai,ii]}),Ti=wi;St.register("wgsl_mul_i64_i64",wi);const Pi=()=>({before:"\n\n\n\n\n\n\n\n\n\n\n\nfn div_u64_u64( a: u64, b: u64 ) -> vec4<u32> {\n  if ( is_zero_u64( a ) ) {\n    return vec4( 0u, 0u, 0u, 0u );\n  }\n  else if ( is_zero_u64( b ) ) {\n    \n    return vec4( 0u, 0u, 0u, 0u );\n  }\n  var result = vec2( 0u, 0u );\n  var remainder = a;\n\n  let high_bit = min( first_leading_bit_u64( a ), first_leading_bit_u64( b ) );\n  var count = 63u - high_bit;\n  var divisor = left_shift_u64( b, count );\n\n  while( !is_zero_u64( remainder ) ) {\n    if ( cmp_u64_u64( remainder, divisor ) >= 0i ) {\n      remainder = subtract_i64_i64( remainder, divisor );\n      result = result | left_shift_u64( vec2( 1u, 0u ), count );\n    }\n    if ( count == 0u ) {\n      break;\n    }\n    divisor = right_shift_u64( divisor, 1u );\n    count -= 1u;\n  }\n\n  return vec4( result, remainder );\n}\n",after:"",imports:[kt,mi,ui,ri,Ai,Ei,di]}),Ci=Pi;St.register("wgsl_div_u64_u64",Pi);const Vi=()=>({before:"\n\n\n\n\n\nfn gcd_u64_u64( a: u64, b: u64 ) -> u64 {\n  if ( is_zero_u64( a ) ) {\n    return b;\n  }\n  else if ( is_zero_u64( b ) ) {\n    return a;\n  }\n\n  let gcd_two = first_trailing_bit_u64( a | b );\n\n  var u = right_shift_u64( a, gcd_two );\n  var v = right_shift_u64( b, gcd_two );\n\n  while ( u.x != v.x || u.y != v.y ) {\n    if ( cmp_u64_u64( u, v ) == -1i ) {\n      let t = u;\n      u = v;\n      v = t;\n    }\n\n    u = subtract_i64_i64( u, v );\n    u = right_shift_u64( u, first_trailing_bit_u64( u ) );\n  }\n\n  return left_shift_u64( u, gcd_two );\n}\n",after:"",imports:[kt,ri,fi,ui,Ai,Ei,di]}),Ri=Vi;St.register("wgsl_gcd_u64_u64",Vi);const Ni=()=>({before:"\n\n\n\n\nfn i64_to_q128( numerator: i64, denominator: i64 ) -> q128 {\n  if ( is_negative_i64( denominator ) ) {\n    return vec4( negate_i64( numerator ), negate_i64( denominator ) );\n  }\n  else {\n    return vec4( numerator, denominator );\n  }\n}\n",after:"",imports:[Dt,It,ai,ii]}),Mi=Ni;St.register("wgsl_i64_to_q128",Ni);const ki=()=>({before:"\n\n\n\n\nfn whole_i64_to_q128( numerator: i64 ) -> q128 {\n  return vec4( numerator, 1u, 0u );\n}\n",after:"",imports:[Dt,It]}),Li=ki;St.register("wgsl_whole_i64_to_q128",ki);const Ii=()=>({before:"\n\n\n\n\n\n\n\nfn equals_cross_mul_q128( a: q128, b: q128 ) -> bool {\n  return is_zero_u64( subtract_i64_i64( mul_i64_i64( a.xy, b.zw ), mul_i64_i64( a.zw, b.xy ) ) );\n}\n",after:"",imports:[Dt,ri,Ei,Ti]}),Bi=Ii;St.register("wgsl_equals_cross_mul_q128",Ii);const Di=()=>({before:"\n\n\n\n\nfn is_zero_q128( a: q128 ) -> bool {\n  return a.x == 0u && a.y == 0u;\n}\n",after:"",imports:[Dt]}),Oi=Di;St.register("wgsl_is_zero_q128",Di);const qi=()=>({before:"\n\n\n\n\n\nfn ratio_test_q128( q: q128 ) -> i32 {\n  return cmp_i64_i64( q.xy, vec2( 0u, 0u ) ) + cmp_i64_i64( q.zw, q.xy );\n}\n",after:"",imports:[Dt,Si]}),Yi=qi;St.register("wgsl_ratio_test_q128",qi);const Hi=()=>({before:"\n\n\n\n\nfn reduce_q128( a: q128 ) -> q128 {\n  let numerator = a.xy;\n  let denominator = a.zw;\n  if ( numerator.x == 0u && numerator.y == 0u ) {\n    return vec4( 0u, 0u, 1u, 0u ); \n  }\n  else if ( denominator.x == 1 && denominator.y == 0u ) {\n    return a; \n  }\n  let abs_numerator = abs_i64( numerator );\n  let gcd = gcd_u64_u64( abs_numerator, denominator );\n  if ( gcd.x == 1u && gcd.y == 0u ) {\n    return a;\n  }\n  else {\n    let reduced_numerator = div_u64_u64( abs_numerator, gcd ).xy;\n    let reduced_denominator = div_u64_u64( denominator, gcd ).xy;\n    if ( is_negative_i64( numerator ) ) {\n      return vec4( negate_i64( reduced_numerator ), reduced_denominator );\n    }\n    else {\n      return vec4( reduced_numerator, reduced_denominator );\n    }\n  }\n}\n",after:"",imports:[Dt,Ri,li,Ci,ai,ii]}),Gi=Hi;St.register("wgsl_reduce_q128",Hi);const Fi=()=>({before:"\n\n\n\n\nstruct IntersectionPoint {\n  t0: q128,\n  t1: q128,\n  px: q128,\n  py: q128\n}\n",after:"",imports:[Dt]}),zi=Fi;St.register("wgsl_IntersectionPoint",Fi);const Ui=()=>({before:"\n\n\n\n\nstruct LineSegmentIntersection {\n  num_points: u32, \n  p0: IntersectionPoint,\n  p1: IntersectionPoint\n}\n",after:"",imports:[zi]}),Wi=Ui;St.register("wgsl_LineSegmentIntersection",Ui);const Xi=()=>({before:"\n\n\n\n\nconst not_rational = vec4( 0u, 0u, 0u, 0u );\nconst not_point = IntersectionPoint( not_rational, not_rational, not_rational, not_rational );\nconst not_intersection = LineSegmentIntersection( 0u, not_point, not_point );\n\n\n\nfn intersect_line_segments( p0: vec2i, p1: vec2i, p2: vec2i, p3: vec2i ) -> LineSegmentIntersection {\n  let p0x = i32_to_i64( p0.x );\n  let p0y = i32_to_i64( p0.y );\n  let p1x = i32_to_i64( p1.x );\n  let p1y = i32_to_i64( p1.y );\n  let p2x = i32_to_i64( p2.x );\n  let p2y = i32_to_i64( p2.y );\n  let p3x = i32_to_i64( p3.x );\n  let p3y = i32_to_i64( p3.y );\n\n  let d0x = subtract_i64_i64( p1x, p0x );\n  let d0y = subtract_i64_i64( p1y, p0y );\n  let d1x = subtract_i64_i64( p3x, p2x );\n  let d1y = subtract_i64_i64( p3y, p2y );\n\n  let cdx = subtract_i64_i64( p2x, p0x );\n  let cdy = subtract_i64_i64( p2y, p0y );\n\n  let denominator = subtract_i64_i64( mul_i64_i64( d0x, d1y ), mul_i64_i64( d0y, d1x ) );\n\n  if ( is_zero_u64( denominator ) ) {\n    \n    \n    var a: q128;\n    var b: q128;\n\n    let d1x_zero = is_zero_u64( d1x );\n    let d1y_zero = is_zero_u64( d1y );\n\n    \n    \n    \n    \n    \n    \n\n    \n    \n    \n    if ( d1x_zero && d1y_zero ) {\n      \n      return not_intersection;\n    }\n    else if ( d1x_zero ) {\n      \n      if ( p0.x != p2.x ) {\n        \n        return not_intersection;\n      }\n      a = i64_to_q128( d0y, d1y );\n      b = i64_to_q128( negate_i64( cdy ), d1y );\n    }\n    else if ( d1y_zero ) {\n      \n      if ( p0.y != p2.y ) {\n        \n        return not_intersection;\n      }\n      a = i64_to_q128( d0x, d1x );\n      b = i64_to_q128( negate_i64( cdx ), d1x );\n    }\n    else {\n      \n      \n      if ( is_zero_u64( d0x ) && is_zero_u64( d0y ) ) {\n        \n        return not_intersection;\n      }\n      let ax = i64_to_q128( d0x, d1x );\n      let ay = i64_to_q128( d0y, d1y );\n      if ( !equals_cross_mul_q128( ax, ay ) ) {\n        return not_intersection;\n      }\n      let bx = i64_to_q128( negate_i64( cdx ), d1x );\n      let by = i64_to_q128( negate_i64( cdy ), d1y );\n      if ( !equals_cross_mul_q128( bx, by ) ) {\n        return not_intersection;\n      }\n\n      \n      if ( is_zero_q128( ax ) ) {\n        a = ay;\n        b = by;\n      }\n      else {\n        a = ax;\n        b = bx;\n      }\n    }\n\n    var points: u32 = 0u;\n    var results = array<IntersectionPoint, 2u>( not_point, not_point );\n\n    \n    \n    \n    \n    \n    \n    \n\n    \n    \n\n    \n    let case1t1 = b;\n    if ( ratio_test_q128( case1t1 ) == 2i ) {\n      let p = IntersectionPoint( ZERO_q128, reduce_q128( case1t1 ), whole_i64_to_q128( p0x ), whole_i64_to_q128( p0y ) );\n      results[ points ] = p;\n      points += 1u;\n    }\n\n    \n    let case2t1 = vec4( add_i64_i64( a.xy, b.xy ), a.zw ); \n    if ( ratio_test_q128( case2t1 ) == 2i ) {\n      let p = IntersectionPoint( ONE_q128, reduce_q128( case2t1 ), whole_i64_to_q128( p1x ), whole_i64_to_q128( p1y ) );\n      results[ points ] = p;\n      points += 1u;\n    }\n\n    \n    let case3t0 = i64_to_q128( negate_i64( b.xy ), a.xy ); \n    if ( ratio_test_q128( case3t0 ) == 2i ) {\n      let p = IntersectionPoint( reduce_q128( case3t0 ), ZERO_q128, whole_i64_to_q128( p2x ), whole_i64_to_q128( p2y ) );\n      results[ points ] = p;\n      points += 1u;\n    }\n\n    \n    \n    let case4t0 = i64_to_q128( subtract_i64_i64( a.zw, b.xy ), a.xy );\n    if ( ratio_test_q128( case4t0 ) == 2i ) {\n      let p = IntersectionPoint( reduce_q128( case4t0 ), ONE_q128, whole_i64_to_q128( p3x ), whole_i64_to_q128( p3y ) );\n      results[ points ] = p;\n      points += 1u;\n    }\n\n    return LineSegmentIntersection( points, results[ 0 ], results[ 1 ] );\n  }\n  else {\n    let t_numerator = subtract_i64_i64( mul_i64_i64( cdx, d1y ), mul_i64_i64( cdy, d1x ) );\n    let u_numerator = subtract_i64_i64( mul_i64_i64( cdx, d0y ), mul_i64_i64( cdy, d0x ) );\n\n    \n    let t_raw = i64_to_q128( t_numerator, denominator );\n    let u_raw = i64_to_q128( u_numerator, denominator );\n\n    \n    let t_cmp = ratio_test_q128( t_raw );\n    let u_cmp = ratio_test_q128( u_raw );\n\n    if ( t_cmp <= 0i || u_cmp <= 0i ) {\n      return not_intersection; \n    }\n    else if ( t_cmp == 1i && u_cmp == 1i ) {\n      return not_intersection; \n    }\n    else {\n      \n      \n      \n      \n      let x_numerator = add_i64_i64( mul_i64_i64( denominator, p0x ), mul_i64_i64( t_numerator, d0x ) );\n      let y_numerator = add_i64_i64( mul_i64_i64( denominator, p0y ), mul_i64_i64( t_numerator, d0y ) );\n\n      let x_raw = i64_to_q128( x_numerator, denominator );\n      let y_raw = i64_to_q128( y_numerator, denominator );\n\n      let x = reduce_q128( x_raw );\n      let y = reduce_q128( y_raw );\n\n      let t = reduce_q128( t_raw );\n      let u = reduce_q128( u_raw );\n\n      \n      return LineSegmentIntersection( 1u, IntersectionPoint( t, u, x, y ), not_point );\n    }\n  }\n}\n",after:"",imports:[zi,Wi,Dt,Wt,Ti,Ei,ri,Mi,Gi,Si,Bi,ii,Oi,Yi,ei,Li,Ht,Ft]});St.register("wgsl_intersect_line_segments",Xi);const ji=()=>({before:"\n\n\n\n\nfn cbrt( x: f32 ) -> f32 {\n\tvar y = sign( x ) * bitcast<f32>( bitcast<u32>( abs( x ) ) / 3u + 0x2a514067u );\n\n  \n  y = ( 2. * y + x / ( y * y ) ) * .333333333;\n  y = ( 2. * y + x / ( y * y ) ) * .333333333;\n\n  \n  let y3 = y * y * y;\n  y *= ( y3 + 2. * x ) / ( 2. * y3 + x );\n\n  return y;\n}\n",after:"",imports:[]}),Qi=ji;St.register("wgsl_cbrt",ji);const Ki=()=>({before:"\n\n\n\nstruct LinearEdge {\n  startPoint: vec2f,\n  endPoint: vec2f\n}\n",after:"",imports:[]}),Zi=Ki;St.register("wgsl_LinearEdge",Ki);const Ji=()=>({before:"\n\n\n\n\nfn shoelace( edge: LinearEdge ) -> f32 {\n  return 0.5 * ( edge.endPoint.x + edge.startPoint.x ) * ( edge.endPoint.y - edge.startPoint.y );\n}\n",after:"",imports:[Zi]});St.register("wgsl_shoelace",Ji);const $i=()=>({before:"\n\n\n\nconst sls_inv_1055 = 1.0 / 1.055;\nconst sls_inv_1292 = 1.0 / 12.92;\n\nfn sRGB_to_linear_sRGB( color: vec3f ) -> vec3f {\n  \n  \n  \n  \n\n  return select( pow( ( color + 0.055 ) * sls_inv_1055, vec3( 2.4 ) ), color * sls_inv_1292, color <= vec3( 0.0404482362771082 ) );\n}\n",after:"",imports:[]}),en=$i;St.register("wgsl_sRGB_to_linear_sRGB",$i);const tn=()=>({before:"\n\n\n\nconst lss_inv_gamma = 1.0 / 2.4;\n\nfn linear_sRGB_to_sRGB( color: vec3f ) -> vec3f {\n  \n  \n  \n  \n\n  return select( 1.055 * pow( color, vec3( lss_inv_gamma ) ) - 0.055, color * 12.92, color <= vec3( 0.00313066844250063 ) );\n}\n",after:"",imports:[]}),nn=tn;St.register("wgsl_linear_sRGB_to_sRGB",tn);const rn=()=>({before:"\n\n\n\nfn premultiply( color: vec4f ) -> vec4f {\n  return vec4( color.xyz * color.w, color.w );\n}\n",after:"",imports:[]}),sn=rn;St.register("wgsl_premultiply",rn);const an=()=>({before:"\n\n\n\nfn unpremultiply( color: vec4f ) -> vec4f {\n  \n  let a_inv = 1.0 / max( color.a, 1e-6 );\n\n  return vec4( color.rgb * a_inv, color.a );\n}\n",after:"",imports:[]}),on=an;St.register("wgsl_unpremultiply",an);const ln=()=>({before:"\n\n\n\n\nfn linear_sRGB_to_oklab( color: vec3f ) -> vec3f {\n  let l = 0.4122214708 * color.r + 0.5363325363 * color.g + 0.0514459929 * color.b;\n  let m = 0.2119034982 * color.r + 0.6806995451 * color.g + 0.1073969566 * color.b;\n  let s = 0.0883024619 * color.r + 0.2817188376 * color.g + 0.6299787005 * color.b;\n\n  let l_ = cbrt( l );\n  let m_ = cbrt( m );\n  let s_ = cbrt( s );\n\n  return vec3(\n    0.2104542553 * l_ + 0.7936177850 * m_ - 0.0040720468 * s_,\n    1.9779984951 * l_ - 2.4285922050 * m_ + 0.4505937099 * s_,\n    0.0259040371 * l_ + 0.7827717662 * m_ - 0.8086757660 * s_\n  );\n}\n",after:"",imports:[Qi]}),hn=ln;St.register("wgsl_linear_sRGB_to_oklab",ln);const un=()=>({before:"\n\n\n\nfn oklab_to_linear_sRGB( color: vec3f ) -> vec3f {\n  let l_ = color.x + 0.3963377774 * color.y + 0.2158037573 * color.z;\n  let m_ = color.x - 0.1055613458 * color.y - 0.0638541728 * color.z;\n  let s_ = color.x - 0.0894841775 * color.y - 1.2914855480 * color.z;\n\n  let l = l_ * l_ * l_;\n  let m = m_ * m_ * m_;\n  let s = s_ * s_ * s_;\n\n  return vec3(\n    4.0767416621 * l - 3.3077115913 * m + 0.2309699292 * s,\n    -1.2684380046 * l + 2.6097574011 * m - 0.3413193965 * s,\n    -0.0041960863 * l - 0.7034186147 * m + 1.7076147010 * s,\n  );\n}\n",after:"",imports:[]}),cn=un;St.register("wgsl_oklab_to_linear_sRGB",un);const dn=()=>({before:"\n\n\n\nfn linear_displayP3_to_linear_sRGB( color: vec3f ) -> vec3f {\n  \n  return vec3(\n    1.2249297438736997 * color.r + -0.2249297438736996 * color.g,\n    -0.04205861411592876 * color.r + 1.0420586141159287 * color.g,\n    -0.019641278613420788 * color.r + -0.07864798001761002 * color.g + 1.0982892586310309 * color.b\n  );\n}\n",after:"",imports:[]}),pn=dn;St.register("wgsl_linear_displayP3_to_linear_sRGB",dn);const mn=()=>({before:"\n\n\n\nfn linear_sRGB_to_linear_displayP3( color: vec3f ) -> vec3f {\n  \n  return vec3(\n    0.8224689734082459 * color.r + 0.17753102659175413 * color.g,\n    0.03319573842230447 * color.r + 0.9668042615776956 * color.g,\n    0.017085772151775966 * color.r + 0.07240728066524241 * color.g + 0.9105069471829815 * color.b\n  );\n}\n",after:"",imports:[]}),gn=mn;St.register("wgsl_linear_sRGB_to_linear_displayP3",mn);const fn=()=>({before:"\n\n\n\n\nfn is_color_in_range( color: vec3f ) -> bool {\n  return all( color >= vec3( 0f ) ) && all( color <= vec3( 1f ) );\n}\n",after:"",imports:[]}),yn=fn;St.register("wgsl_is_color_in_range",fn);const En=()=>({before:"\n\n\n\n\n\nfn gamut_map_linear_sRGB( color: vec3f ) -> vec3f {\n  if ( is_color_in_range( color ) ) {\n    return color;\n  }\n\n  var oklab = linear_sRGB_to_oklab( color );\n  if ( oklab.x <= 0f ) {\n    return vec3( 0f );\n  }\n  else if ( oklab.x >= 1f ) {\n    return vec3( 1f );\n  }\n\n  let chroma = oklab.yz;\n\n  \n  var lowChroma = 0f;\n  var highChroma = 1f;\n  var clipped = vec3( 0f );\n\n  while ( highChroma - lowChroma > 1e-4f ) {\n    let testChroma = ( lowChroma + highChroma ) * 0.5;\n    oklab = vec3(\n      oklab.x,\n      chroma * testChroma\n    );\n\n    let mapped = oklab_to_linear_sRGB( oklab );\n    let isInColorRange = is_color_in_range( mapped );\n    clipped = select( clamp( mapped, vec3( 0f ), vec3( 1f ) ), mapped, isInColorRange );\n\n    \n    if ( isInColorRange || distance( linear_sRGB_to_oklab( clipped ), oklab ) <= 0.02 ) {\n      lowChroma = testChroma;\n    }\n    else {\n      highChroma = testChroma;\n    }\n  }\n\n  let potentialResult = oklab_to_linear_sRGB( oklab );\n  if ( is_color_in_range( potentialResult ) ) {\n    return potentialResult;\n  }\n  else {\n    return clipped;\n  }\n}\n",after:"",imports:[yn,hn,cn]}),vn=En;St.register("wgsl_gamut_map_linear_sRGB",En);const An=()=>({before:"\n\n\n\n\n\nfn gamut_map_linear_displayP3( color: vec3f ) -> vec3f {\n  if ( is_color_in_range( color ) ) {\n    return color;\n  }\n\n  var oklab = linear_sRGB_to_oklab( linear_displayP3_to_linear_sRGB( color ) );\n  if ( oklab.x <= 0f ) {\n    return vec3( 0f );\n  }\n  else if ( oklab.x >= 1f ) {\n    return vec3( 1f );\n  }\n\n  let chroma = oklab.yz;\n\n  \n  var lowChroma = 0f;\n  var highChroma = 1f;\n  var clipped = vec3( 0f );\n\n  while ( highChroma - lowChroma > 1e-4f ) {\n    let testChroma = ( lowChroma + highChroma ) * 0.5;\n    oklab = vec3(\n      oklab.x,\n      chroma * testChroma\n    );\n\n    let mapped = linear_sRGB_to_linear_displayP3( oklab_to_linear_sRGB( oklab ) );\n    let isInColorRange = is_color_in_range( mapped );\n    clipped = select( clamp( mapped, vec3( 0f ), vec3( 1f ) ), mapped, isInColorRange );\n\n    \n    if ( isInColorRange || distance( linear_sRGB_to_oklab( linear_displayP3_to_linear_sRGB( clipped ) ), oklab ) <= 0.02 ) {\n      lowChroma = testChroma;\n    }\n    else {\n      highChroma = testChroma;\n    }\n  }\n\n  let potentialResult = linear_sRGB_to_linear_displayP3( oklab_to_linear_sRGB( oklab ) );\n  if ( is_color_in_range( potentialResult ) ) {\n    return potentialResult;\n  }\n  else {\n    return clipped;\n  }\n}\n",after:"",imports:[yn,pn,gn,hn,cn]}),bn=An;St.register("wgsl_gamut_map_linear_displayP3",An);const Sn=()=>({before:"\n\n\n\n\n\nfn gamut_map_premul_sRGB( color: vec4f ) -> vec4f {\n  if ( color.a <= 1e-8f ) {\n    return vec4( 0f );\n  }\n\n  return vec4(\n    linear_sRGB_to_sRGB( gamut_map_linear_sRGB( sRGB_to_linear_sRGB( unpremultiply( color ).rgb ) ) ),\n    min( 1f, color.a )\n  );\n}\n",after:"",imports:[on,en,nn,vn]});St.register("wgsl_gamut_map_premul_sRGB",Sn);const _n=()=>({before:"\n\n\n\n\n\nfn gamut_map_premul_displayP3( color: vec4f ) -> vec4f {\n  if ( color.a <= 1e-8f ) {\n    return vec4( 0f );\n  }\n\n  return vec4(\n    linear_sRGB_to_sRGB( gamut_map_linear_displayP3( sRGB_to_linear_sRGB( unpremultiply( color ).rgb ) ) ),\n    min( 1f, color.a )\n  );\n}\n",after:"",imports:[on,en,nn,bn]});St.register("wgsl_gamut_map_premul_displayP3",_n);const xn=e=>{let t={};sn(e),on(e);const i=e.BlendColor,n=e.BlendColorBurn,r=e.BlendColorDodge,s=e.BlendDarken,a=e.BlendDifference,o=e.BlendExclusion,l=e.BlendHardLight,h=e.BlendHue,u=e.BlendLighten,c=e.BlendLuminosity,d=e.BlendMultiply,p=e.BlendNormal,m=e.BlendOverlay,g=e.BlendSaturation,f=e.BlendScreen,y=e.BlendSoftLight,E=e.ComposeAtop,v=e.ComposeIn,A=e.ComposeOut,b=e.ComposeOver,S=e.ComposePlus,x=e.ComposePlusLighter,w=e.ComposeXor;let T="";const P=[sn,on];return T+=`\n\n\n\n\n\n\n\n\nfn screen(cb: vec3<f32>, cs: vec3<f32>) -> vec3<f32> {\n    return cb + cs - (cb * cs);\n}\n\nfn color_dodge(cb: f32, cs: f32) -> f32 {\n    if cb == 0.0 {\n        return 0.0;\n    } else if cs == 1.0 {\n        return 1.0;\n    } else {\n        return min(1.0, cb / (1.0 - cs));\n    }\n}\n\nfn color_burn(cb: f32, cs: f32) -> f32 {\n    if cb == 1.0 {\n        return 1.0;\n    } else if cs == 0.0 {\n        return 0.0;\n    } else {\n        return 1.0 - min(1.0, (1.0 - cb) / cs);\n    }\n}\n\nfn hard_light(cb: vec3<f32>, cs: vec3<f32>) -> vec3<f32> {\n    return select(\n        screen(cb, 2.0 * cs - 1.0),\n        cb * 2.0 * cs,\n        cs <= vec3(0.5)\n    );\n}\n\nfn soft_light(cb: vec3<f32>, cs: vec3<f32>) -> vec3<f32> {\n    let d = select(\n        sqrt(cb),\n        ((16.0 * cb - 12.0) * cb + 4.0) * cb,\n        cb <= vec3(0.25)\n    );\n    return select(\n        cb + (2.0 * cs - 1.0) * (d - cb),\n        cb - (1.0 - 2.0 * cs) * cb * (1.0 - cb),\n        cs <= vec3(0.5)\n    );\n}\n\nfn sat(c: vec3<f32>) -> f32 {\n    return max(c.x, max(c.y, c.z)) - min(c.x, min(c.y, c.z));\n}\n\nfn lum(c: vec3<f32>) -> f32 {\n    let f = vec3(0.3, 0.59, 0.11);\n    return dot(c, f);\n}\n\nfn clip_color(c_in: vec3<f32>) -> vec3<f32> {\n    var c = c_in;\n    let l = lum(c);\n    let n = min(c.x, min(c.y, c.z));\n    let x = max(c.x, max(c.y, c.z));\n    if n < 0.0 {\n        c = l + (((c - l) * l) / (l - n));\n    }\n    if x > 1.0 {\n        c = l + (((c - l) * (1.0 - l)) / (x - l));\n    }\n    return c;\n}\n\nfn set_lum(c: vec3<f32>, l: f32) -> vec3<f32> {\n    return clip_color(c + (l - lum(c)));\n}\n\nfn set_sat_inner(\n    cmin: ptr<function, f32>,\n    cmid: ptr<function, f32>,\n    cmax: ptr<function, f32>,\n    s: f32\n) {\n    if *cmax > *cmin {\n        *cmid = ((*cmid - *cmin) * s) / (*cmax - *cmin);\n        *cmax = s;\n    } else {\n        *cmid = 0.0;\n        *cmax = 0.0;\n    }\n    *cmin = 0.0;\n}\n\nfn set_sat(c: vec3<f32>, s: f32) -> vec3<f32> {\n    var r = c.r;\n    var g = c.g;\n    var b = c.b;\n    if r <= g {\n        if g <= b {\n            set_sat_inner(&r, &g, &b, s);\n        } else {\n            if r <= b {\n                set_sat_inner(&r, &b, &g, s);\n            } else {\n                set_sat_inner(&b, &r, &g, s);\n            }\n        }\n    } else {\n        if r <= b {\n            set_sat_inner(&g, &r, &b, s);\n        } else {\n            if g <= b {\n                set_sat_inner(&g, &b, &r, s);\n            } else {\n                set_sat_inner(&b, &g, &r, s);\n            }\n        }\n    }\n    return vec3(r, g, b);\n}\n\n\n\nfn blend_compose( a: vec4f, b: vec4f, composeType: u32, blendType: u32 ) -> vec4f {\n  var blended: vec4f;\n  if ( blendType == ${xt(p)} ) {\n    blended = a;\n  }\n  else {\n    \n    let a3 = unpremultiply( a ).rgb;\n    let b3 = unpremultiply( b ).rgb;\n    var c3: vec3f;\n\n    switch ( blendType ) {\n      case ${xt(d)}: {\n        c3 = b3 * a3;\n      }\n      case ${xt(f)}: {\n        c3 = screen( b3, a3 );\n      }\n      case ${xt(m)}: {\n        c3 = hard_light( a3, b3 );\n      }\n      case ${xt(s)}: {\n        c3 = min( b3, a3 );\n      }\n      case ${xt(u)}: {\n        c3 = max( b3, a3 );\n      }\n      case ${xt(r)}: {\n        c3 = vec3(\n          color_dodge( b3.x, a3.x ),\n          color_dodge( b3.y, a3.y ),\n          color_dodge( b3.z, a3.z )\n        );\n      }\n      case ${xt(n)}: {\n        c3 = vec3(\n          color_burn( b3.x, a3.x ),\n          color_burn( b3.y, a3.y ),\n          color_burn( b3.z, a3.z )\n        );\n      }\n      case ${xt(l)}: {\n        c3 = hard_light( b3, a3 );\n      }\n      case ${xt(y)}: {\n        c3 = soft_light( b3, a3 );\n      }\n      case ${xt(a)}: {\n        c3 = abs( b3 - a3 );\n      }\n      case ${xt(o)}: {\n        c3 = b3 + a3 - 2f * b3 * a3;\n      }\n      case ${xt(h)}: {\n        c3 = set_lum( set_sat( a3, sat( b3 ) ), lum( b3 ) );\n      }\n      case ${xt(g)}: {\n        c3 = set_lum( set_sat( b3, sat( a3 ) ), lum( b3 ) );\n      }\n      case ${xt(i)}: {\n        c3 = set_lum( a3, lum( b3 ) );\n      }\n      case ${xt(c)}: {\n        c3 = set_lum( b3, lum( a3 ) );\n      }\n      default: {\n        c3 = a3;\n      }\n    }\n\n    blended = premultiply( vec4( c3, a.a ) );\n  }\n\n  var fa: f32;\n  var fb: f32;\n\n  \n  \n  \n  \n  \n  \n  switch( composeType ) {\n    case ${xt(b)}: {\n      fa = 1f;\n      fb = 1f - a.a;\n    }\n    case ${xt(v)}: {\n      fa = b.a;\n      fb = 0f;\n    }\n    case ${xt(A)}: {\n      fa = 1f - b.a;\n      fb = 0f;\n    }\n    case ${xt(E)}: {\n      fa = b.a;\n      fb = 1f - a.a;\n    }\n    case ${xt(w)}: {\n      fa = 1f - b.a;\n      fb = 1f - a.a;\n    }\n    case ${xt(S)}: {\n      fa = 1f;\n      fb = 1f;\n    }\n    case ${xt(x)}: {\n      \n      return min( vec4( 1f ), vec4( a + b ) );\n    }\n    default: {}\n  }\n\n  \n  return vec4( fa * blended.rgb + fb * b.rgb, fa * a.a + fb * b.a );\n}\n`,t.before=T,t.after="",t.imports=_.uniq(P).sort(),t},wn=xn;St.register("wgsl_blend_compose",xn);const Tn=e=>{let t={};let i="";return i+="\n\n\n\nstruct MD_ClipResult {\n  p0: vec2f,\n  p1: vec2f,\n  clipped: bool\n}\n\nfn matthes_drakopoulos_clip(\n  p0: vec2f,\n  p1: vec2f,\n  minX: f32,\n  minY: f32,\n  maxX: f32,\n  maxY: f32\n) -> MD_ClipResult {\n  if (\n    !( p0.x < minX && p1.x < minX ) &&\n    !( p0.x > maxX && p1.x > maxX ) &&\n    !( p0.y < minY && p1.y < minY ) &&\n    !( p0.y > maxY && p1.y > maxY )\n  ) {\n    var x0 = p0.x;\n    var y0 = p0.y;\n    var x1 = p1.x;\n    var y1 = p1.y;\n",e.matthes_drakopoulos_extract_slope?i+="    let ma = ( p1.y - p0.y ) / ( p1.x - p0.x );\n    let mb = ( p1.x - p0.x ) / ( p1.y - p0.y );\n\n    \n    if ( x0 < minX ) {\n      x0 = minX;\n      y0 = ma * ( minX - p0.x ) + p0.y;\n    }\n    else if ( x0 > maxX ) {\n      x0 = maxX;\n      y0 = ma * ( maxX - p0.x ) + p0.y;\n    }\n    if ( y0 < minY ) {\n      y0 = minY;\n      x0 = mb * ( minY - p0.y ) + p0.x;\n    }\n    else if ( y0 > maxY ) {\n      y0 = maxY;\n      x0 = mb * ( maxY - p0.y ) + p0.x;\n    }\n\n    \n    if ( x1 < minX ) {\n      x1 = minX;\n      y1 = ma * ( minX - p0.x ) + p0.y;\n    }\n    else if ( x1 > maxX ) {\n      x1 = maxX;\n      y1 = ma * ( maxX - p0.x ) + p0.y;\n    }\n    if ( y1 < minY ) {\n      y1 = minY;\n      x1 = mb * ( minY - p0.y ) + p0.x;\n    }\n    else if ( y1 > maxY ) {\n      y1 = maxY;\n      x1 = mb * ( maxY - p0.y ) + p0.x;\n    }":i+="    \n    if ( x0 < minX ) {\n      x0 = minX;\n      y0 = ( p1.y - p0.y ) * ( minX - p0.x ) / ( p1.x - p0.x ) + p0.y;\n    }\n    else if ( x0 > maxX ) {\n      x0 = maxX;\n      y0 = ( p1.y - p0.y ) * ( maxX - p0.x ) / ( p1.x - p0.x ) + p0.y;\n    }\n    if ( y0 < minY ) {\n      y0 = minY;\n      x0 = ( p1.x - p0.x ) * ( minY - p0.y ) / ( p1.y - p0.y ) + p0.x;\n    }\n    else if ( y0 > maxY ) {\n      y0 = maxY;\n      x0 = ( p1.x - p0.x ) * ( maxY - p0.y ) / ( p1.y - p0.y ) + p0.x;\n    }\n\n    \n    if ( x1 < minX ) {\n      x1 = minX;\n      y1 = ( p1.y - p0.y ) * ( minX - p0.x ) / ( p1.x - p0.x ) + p0.y;\n    }\n    else if ( x1 > maxX ) {\n      x1 = maxX;\n      y1 = ( p1.y - p0.y ) * ( maxX - p0.x ) / ( p1.x - p0.x ) + p0.y;\n    }\n    if ( y1 < minY ) {\n      y1 = minY;\n      x1 = ( p1.x - p0.x ) * ( minY - p0.y ) / ( p1.y - p0.y ) + p0.x;\n    }\n    else if ( y1 > maxY ) {\n      y1 = maxY;\n      x1 = ( p1.x - p0.x ) * ( maxY - p0.y ) / ( p1.y - p0.y ) + p0.x;\n    }",i+="\n    if ( !( x0 < minX && x1 < minX ) && !( x0 > maxX && x1 > maxX ) ) {\n      return MD_ClipResult( vec2( x0, y0 ), vec2( x1, y1 ), true );\n    }\n  }\n\n  return MD_ClipResult( p0, p1, false );\n}\n",t.before=i,t.after="",t.imports=_.uniq([]).sort(),t},Pn=Tn;St.register("wgsl_matthes_drakopoulos_clip",Tn);const Cn=()=>({before:"\n\n\n\n\nstruct bounds_clip_edge_Result {\n  \n  edges: array<LinearEdge,3>,\n  count: u32\n}\n\nfn bounds_clip_edge(\n  edge: LinearEdge,\n  minX: f32,\n  minY: f32,\n  maxX: f32,\n  maxY: f32,\n  centerX: f32,\n  centerY: f32\n) -> bounds_clip_edge_Result {\n  var edges: array<LinearEdge,3>;\n  var count: u32 = 0u;\n\n  \n  let startPoint = edge.startPoint;\n  let endPoint = edge.endPoint;\n  let clipResult: MD_ClipResult = matthes_drakopoulos_clip( startPoint, endPoint, minX, minY, maxX, maxY );\n\n  let clippedStartPoint = clipResult.p0;\n  let clippedEndPoint = clipResult.p1;\n  let clipped = clipResult.clipped;\n\n  let startXLess = startPoint.x < centerX;\n  let startYLess = startPoint.y < centerY;\n  let endXLess = endPoint.x < centerX;\n  let endYLess = endPoint.y < centerY;\n\n  let needsStartCorner = !clipped || !all( startPoint == clippedStartPoint );\n  let needsEndCorner = !clipped || !all( endPoint == clippedEndPoint );\n\n  \n\n  \n  let startCorner = vec2(\n    select( maxX, minX, startXLess ),\n    select( maxY, minY, startYLess )\n  );\n  let endCorner = vec2(\n    select( maxX, minX, endXLess ),\n    select( maxY, minY, endYLess )\n  );\n\n  if ( clipped ) {\n    if ( needsStartCorner && !all( startCorner == clippedStartPoint ) ) {\n      edges[ count ] = LinearEdge( startCorner, clippedStartPoint );\n      count++;\n    }\n\n    if ( !all( clippedStartPoint == clippedEndPoint ) ) {\n      edges[ count ] = LinearEdge( clippedStartPoint, clippedEndPoint );\n      count++;\n    }\n\n    if ( needsEndCorner && !all( endCorner == clippedEndPoint ) ) {\n      edges[ count ] = LinearEdge( clippedEndPoint, endCorner );\n      count++;\n    }\n  }\n  else {\n    if ( startXLess != endXLess && startYLess != endYLess ) {\n      \n      \n      let y = startPoint.y + ( endPoint.y - startPoint.y ) * ( centerX - startPoint.x ) / ( endPoint.x - startPoint.x );\n\n      \n      let startSame = startXLess == startYLess;\n      let yGreater = y > centerY;\n\n      let middlePoint = vec2(\n        select( maxX, minX, startSame == yGreater ),\n        select( minY, maxY, yGreater )\n      );\n\n      edges[ 0u ] = LinearEdge( startCorner, middlePoint );\n      edges[ 1u ] = LinearEdge( middlePoint, endCorner );\n      count = 2u;\n    }\n    else if ( !all( startCorner == endCorner ) ) {\n      edges[ 0u ] = LinearEdge( startCorner, endCorner );\n      count = 1u;\n    }\n  }\n\n  return bounds_clip_edge_Result( edges, count );\n}\n",after:"",imports:[Zi,Pn]}),Vn=Cn;St.register("wgsl_bounds_clip_edge",Cn);const Rn=()=>({before:"\n\n\n\n\nfn bounds_double_area_edge(\n  edge: LinearEdge,\n  minX: f32,\n  minY: f32,\n  maxX: f32,\n  maxY: f32,\n  centerX: f32,\n  centerY: f32\n) -> f32 {\n  let clip = bounds_clip_edge( edge, minX, minY, maxX, maxY, centerX, centerY );\n  var area = 0f;\n\n  \n  if ( clip.count > 0u ) {\n    let edge0 = clip.edges[ 0u ];\n    area += ( edge0.endPoint.x + edge0.startPoint.x ) * ( edge0.endPoint.y - edge0.startPoint.y );\n\n    if ( clip.count > 1u ) {\n      let edge1 = clip.edges[ 1u ];\n      area += ( edge1.endPoint.x + edge1.startPoint.x ) * ( edge1.endPoint.y - edge1.startPoint.y );\n\n      if ( clip.count > 2u ) {\n        let edge2 = clip.edges[ 2u ];\n        area += ( edge2.endPoint.x + edge2.startPoint.x ) * ( edge2.endPoint.y - edge2.startPoint.y );\n      }\n    }\n  }\n\n  return area;\n}\n",after:"",imports:[Zi,Vn]}),Nn=Rn;St.register("wgsl_bounds_double_area_edge",Rn);const Mn=()=>({before:"\n\n\n\nstruct RasterCompleteEdge {\n  \n  startX: f32,\n  startY: f32,\n  endX: f32,\n  endY: f32\n}\n",after:"",imports:[]}),kn=Mn;St.register("wgsl_RasterCompleteEdge",Mn);const Ln=e=>{let t={};const i=e.ExtendPad,n=e.ExtendReflect,r=e.ExtendRepeat;let s="";return s+=`\n\n\n\n\nfn extend_f32( t: f32, extend: u32 ) -> f32 {\n  switch ( extend ) {\n    case ${xt(i)}: {\n      return clamp( t, 0f, 1f );\n    }\n    case ${xt(r)}: {\n      return fract( t );\n    }\n    case ${xt(n)}: {\n      return abs( t - 2f * round( 0.5f * t ) );\n    }\n    default: {\n      return t;\n    }\n  }\n}\n`,t.before=s,t.after="",t.imports=_.uniq([]).sort(),t},In=Ln;St.register("wgsl_extend_f32",Ln);const Bn=e=>{let t={};const i=e.ExtendPad,n=e.ExtendReflect,r=e.ExtendRepeat;let s="";return s+=`\n\n\n\n\n\n\n\n\n\n\n\n\nfn extend_mode_i32( i: i32, size: i32, extend: u32 ) -> i32 {\n  switch ( extend ) {\n    case ${xt(i)}: {\n      return clamp( i, 0i, size - 1i );\n    }\n    case ${xt(r)}: {\n      if ( i >= 0i ) {\n        return i % size;\n      }\n      else {\n        return size - ( ( -i - 1i ) % size ) - 1i;\n      }\n    }\n    case ${xt(n)}: {\n      \n      let pos_i = select( i, -i - 1i, i < 0i );\n\n      let section = pos_i % ( size * 2i );\n      if ( section < size ) {\n        return section;\n      }\n      else {\n        return 2i * size - section - 1i;\n      }\n    }\n    default: {\n      return i;\n    }\n  }\n}\n`,t.before=s,t.after="",t.imports=_.uniq([]).sort(),t},Dn=Bn;St.register("wgsl_extend_i32",Bn);const On=e=>{let t={};wn(e),pn(e),gn(e),hn(e),nn(e),cn(e),sn(e),en(e),on(e),kn(e),In(e),Dn(e);const i=e.BarycentricBlendCode,n=e.BarycentricPerspectiveBlendCode,r=e.BlendComposeCode,s=e.ComputeLinearBlendRatioCode,a=e.ComputeLinearGradientRatioCode,o=e.ComputeRadialBlendRatioCode,l=e.ComputeRadialGradientRatioCode,h=e.ExitCode,u=e.FilterCode,c=e.GradientTypeCircular,d=(e.GradientTypeCone,e.GradientTypeFocalOnCircle),p=e.GradientTypeStrip,m=(e.ImageCode,e.LinearBlendCode),g=e.LinearDisplayP3ToLinearSRGBCode,f=e.LinearSRGBToLinearDisplayP3Code,y=e.LinearSRGBToOklabCode,E=e.LinearSRGBToSRGBCode,v=e.MultiplyScalarCode,A=e.NormalDebugCode,b=e.NormalizeCode,S=e.OklabToLinearSRGBCode,x=e.OpaqueJumpCode,w=e.PhongCode,T=e.PremultiplyCode,P=e.PushCode,C=e.ReturnCode,V=e.SRGBToLinearSRGBCode,R=e.StackBlendCode,N=e.UnpremultiplyCode,M=e.instructionStackSize,k=e.stackSize;let L="",I="";const B=[kn,sn,on,en,nn,hn,cn,pn,gn,wn,In,Dn];return L+="\n\n\n\n\n\n\n\n\nconst oops_inifinite_loop_code = vec4f( 5f, 4f, -5f, -4f );\n\n\n\n\n",I+=`\n\n\n\nfn compute_centroid(\n  centroid: ptr<function, vec2f>,\n  edgesOffset: u32,\n  numEdges: u32,\n  isFullArea: bool,\n  area: f32,\n  minX: f32,\n  minY: f32,\n  maxX: f32,\n  maxY: f32,\n  minXCount: i32,\n  minYCount: i32,\n  maxXCount: i32,\n  maxYCount: i32\n) -> bool {\n  \n\n  let bounds_centroid = 0.5f * vec2( minX + maxX, minY + maxY );\n\n  if ( isFullArea ) {\n    *centroid = bounds_centroid;\n  }\n  else {\n    \n    var centroid_partial = 6f * bounds_centroid * vec2(\n      ( minX - maxX ) * ( f32( minYCount ) * minY + f32( maxYCount ) * maxY ),\n      ( maxY - minY ) * ( f32( minXCount ) * minX + f32( maxXCount ) * maxX )\n    );\n\n    let endIndex = edgesOffset + numEdges;\n    var oops_count = 0u;\n    for ( var i = edgesOffset; i < endIndex; i++ ) {\n      oops_count++;\n      if ( oops_count > 0xfffu ) {\n        return false;\n      }\n\n      let edge = complete_edges[ i ];\n\n      let p0x = edge.startX;\n      let p0y = edge.startY;\n      let p1x = edge.endX;\n      let p1y = edge.endY;\n\n      let base = p0x * ( 2f * p0y + p1y ) + p1x * ( p0y + 2f * p1y );\n      centroid_partial += base * vec2( p0x - p1x, p1y - p0y );\n    }\n\n    *centroid = centroid_partial / ( 6f * area );\n  }\n\n\n  return true;\n}\n\nfn evaluate_render_program_instructions(\n  render_program_index: u32,\n  edgesOffset: u32,\n  numEdges: u32,\n  isFullArea: bool,\n  needsFace: bool,\n  area: f32,\n  minX: f32,\n  minY: f32,\n  maxX: f32,\n  maxY: f32,\n  minXCount: i32,\n  minYCount: i32,\n  maxXCount: i32,\n  maxYCount: i32\n) -> vec4f {\n\n  var stack: array<vec4f,${k}>;\n  var instruction_stack: array<u32,${M}>;\n\n  var stack_length = 0u;\n  var instruction_stack_length = 0u;\n\n  var instruction_address = render_program_index;\n  var is_done = false;\n\n  var oops_count = 0u;\n\n  var fake_centroid = 0.5f * vec2f( maxX + minX, maxY + minY );\n  var real_centroid = fake_centroid;\n  \n  if ( needsFace ) {\n    let centroid_success = compute_centroid(\n      &real_centroid,\n      edgesOffset, numEdges, isFullArea, area,\n      minX, minY, maxX, maxY,\n      minXCount, minYCount, maxXCount, maxYCount\n    );\n    if ( !centroid_success ) {\n      return oops_inifinite_loop_code;\n    }\n  }\n\n  while ( !is_done ) {\n    oops_count++;\n    if ( oops_count > 0xfffu ) {\n      return oops_inifinite_loop_code;\n    }\n\n    let start_address = instruction_address;\n    let instruction_u32 = render_program_instructions[ instruction_address ];\n\n    let code = ( instruction_u32 & 0xffu );\n\n    var instruction_length: u32;\n    \n    if ( ( code >> 4u ) == 0u ) {\n      instruction_length = 1u;\n    }\n    \n    else if ( ( code & 0xc0u ) != 0u ) {\n      instruction_length = ( code & 0x1fu ) + 2u * ( instruction_u32 >> 16u );\n    }\n    \n    else {\n      instruction_length = ( code & 0x1fu );\n    }\n    instruction_address += instruction_length;\n\n    switch ( code ) {\n      case ${xt(h)}: {\n        is_done = true;\n      }\n      case ${xt(C)}: {\n        instruction_stack_length--;\n        instruction_address = instruction_stack[ instruction_stack_length ];\n      }\n      case ${xt(P)}: {\n        stack[ stack_length ] = bitcast<vec4<f32>>( vec4(\n          render_program_instructions[ start_address + 1u ],\n          render_program_instructions[ start_address + 2u ],\n          render_program_instructions[ start_address + 3u ],\n          render_program_instructions[ start_address + 4u ]\n        ) );\n        stack_length++;\n      }\n      case ${xt(R)}: {\n        let background = stack[ stack_length - 1u ];\n        let foreground = stack[ stack_length - 2u ];\n\n        stack_length--;\n\n        \n        stack[ stack_length - 1u ] = ( 1f - foreground.a ) * background + foreground;\n      }\n      case ${xt(m)}: {\n        let zero_color = stack[ stack_length - 1u ];\n        let one_color = stack[ stack_length - 2u ];\n        let t = stack[ stack_length - 3u ].x;\n\n        stack_length -= 2u;\n\n        if ( t <= 0f || t >= 1f ) {\n          \n          stack[ stack_length - 1u ] = zero_color;\n        }\n        else {\n          let minus_t = 1f - t;\n\n          stack[ stack_length - 1u ] = zero_color * minus_t + one_color * t;\n        }\n      }\n      case ${xt(x)}: {\n        let offset = instruction_u32 >> 8u;\n        let color = stack[ stack_length - 1u ];\n        if ( color.a >= ${Nt(.99999)} ) {\n          instruction_address = start_address + offset; \n        }\n      }\n      case ${xt(b)}: {\n        stack[ stack_length - 1u ] = normalize( stack[ stack_length - 1u ] );\n      }\n      case ${xt(T)}: {\n        stack[ stack_length - 1u ] = premultiply( stack[ stack_length - 1u ] );\n      }\n      case ${xt(N)}: {\n        stack[ stack_length - 1u ] = unpremultiply( stack[ stack_length - 1u ] );\n      }\n      case ${xt(V)}: {\n        let color = stack[ stack_length - 1u ];\n        stack[ stack_length - 1u ] = vec4( sRGB_to_linear_sRGB( color.rgb ), color.a );\n      }\n      case ${xt(E)}: {\n        let color = stack[ stack_length - 1u ];\n        stack[ stack_length - 1u ] = vec4( linear_sRGB_to_sRGB( color.rgb ), color.a );\n      }\n      case ${xt(g)}: {\n        let color = stack[ stack_length - 1u ];\n        stack[ stack_length - 1u ] = vec4( linear_displayP3_to_linear_sRGB( color.rgb ), color.a );\n      }\n      case ${xt(f)}: {\n        let color = stack[ stack_length - 1u ];\n        stack[ stack_length - 1u ] = vec4( linear_sRGB_to_linear_displayP3( color.rgb ), color.a );\n      }\n      case ${xt(S)}: {\n        let color = stack[ stack_length - 1u ];\n        stack[ stack_length - 1u ] = vec4( oklab_to_linear_sRGB( color.rgb ), color.a );\n      }\n      case ${xt(y)}: {\n        let color = stack[ stack_length - 1u ];\n        stack[ stack_length - 1u ] = vec4( linear_sRGB_to_oklab( color.rgb ), color.a );\n      }\n      case ${xt(A)}: {\n        let normal = stack[ stack_length - 1u ];\n        stack[ stack_length - 1u ] = vec4( normal.rgb * 0.5f + 0.5f, 1f );\n      }\n      case ${xt(r)}: {\n        let color_a = stack[ stack_length - 1u ];\n        let color_b = stack[ stack_length - 2u ];\n        let compose_type = ( instruction_u32 >> 8u ) & 0x7u;\n        let blend_type = ( instruction_u32 >> 11u ) & 0xfu;\n\n        stack_length--;\n\n        stack[ stack_length - 1u ] = blend_compose( color_a, color_b, compose_type, blend_type );\n      }\n      case ${xt(v)}: {\n        let factor = bitcast<f32>( render_program_instructions[ start_address + 1u ] );\n        stack[ stack_length - 1u ] = factor * stack[ stack_length - 1u ];\n      }\n      case ${xt(s)}, ${xt(o)}: {\n        var t: f32;\n\n        let accuracy = instruction_u32 >> 8u;\n        let zero_offset = render_program_instructions[ start_address + 1u ];\n        let one_offset = render_program_instructions[ start_address + 2u ];\n        let blend_offset = render_program_instructions[ start_address + 3u ];\n        if ( code == ${xt(s)} ) {\n          let scaled_normal = bitcast<vec2<f32>>( vec2(\n            render_program_instructions[ start_address + 4u ],\n            render_program_instructions[ start_address + 5u ]\n          ) );\n          let offset = bitcast<f32>( render_program_instructions[ start_address + 6u ] );\n\n          let centroid = select( fake_centroid, real_centroid, accuracy == 0u );\n          let dot_product = dot( scaled_normal, centroid );\n          t = dot_product - offset;\n        }\n        else {\n          let inverse_transform = mat3x3(\n            bitcast<f32>( render_program_instructions[ start_address + 4u ] ),\n            bitcast<f32>( render_program_instructions[ start_address + 7u ] ),\n            0f,\n            bitcast<f32>( render_program_instructions[ start_address + 5u ] ),\n            bitcast<f32>( render_program_instructions[ start_address + 8u ] ),\n            0f,\n            bitcast<f32>( render_program_instructions[ start_address + 6u ] ),\n            bitcast<f32>( render_program_instructions[ start_address + 9u ] ),\n            1f\n          );\n          let radius0 = bitcast<f32>( render_program_instructions[ start_address + 10u ] );\n          let radius1 = bitcast<f32>( render_program_instructions[ start_address + 11u ] );\n\n          var average_distance: f32;\n\n          if ( accuracy == 0u ) {\n            \n            let localPoint = inverse_transform * vec3( real_centroid, 1f );\n            average_distance = length( localPoint );\n          }\n          else {\n            let centroid = select( fake_centroid, real_centroid, accuracy == 1u );\n            let localPoint = inverse_transform * vec3( centroid, 1f );\n            average_distance = length( localPoint.xy );\n          }\n\n          t = ( average_distance - radius0 ) / ( radius1 - radius0 );\n        }\n\n        stack[ stack_length ] = vec4( t, 0f, 0f, 0f );\n        stack_length++;\n\n        \n        instruction_address = start_address + blend_offset; \n\n        let has_zero = t < 1f;\n        let has_one = t > 0f;\n\n        if ( !has_zero || !has_one ) {\n          stack_length++;\n        }\n\n        if ( has_zero ) {\n          \n          instruction_stack[ instruction_stack_length ] = instruction_address;\n          instruction_stack_length++;\n          instruction_address = start_address + zero_offset;\n        }\n\n        if ( has_one ) {\n          \n          instruction_stack[ instruction_stack_length ] = instruction_address;\n          instruction_stack_length++;\n          instruction_address = start_address + one_offset;\n        }\n      }\n      case ${xt(a)}, ${xt(l)}: {\n        let is_linear = code == ${xt(a)};\n\n        let accuracy = ( instruction_u32 >> 8u ) & 0x7u;\n        let extend = ( instruction_u32 >> 11u ) & 0x2u;\n        let ratio_count = instruction_u32 >> 16u;\n\n        let transform = mat3x3(\n          bitcast<f32>( render_program_instructions[ start_address + 1u ] ),\n          bitcast<f32>( render_program_instructions[ start_address + 4u ] ),\n          0f,\n          bitcast<f32>( render_program_instructions[ start_address + 2u ] ),\n          bitcast<f32>( render_program_instructions[ start_address + 5u ] ),\n          0f,\n          bitcast<f32>( render_program_instructions[ start_address + 3u ] ),\n          bitcast<f32>( render_program_instructions[ start_address + 6u ] ),\n          1f\n        );\n\n        var t: f32;\n        if ( is_linear ) {\n          let inverse_transform = transform;\n          let start = bitcast<vec2<f32>>( vec2(\n              render_program_instructions[ start_address + 7u ],\n              render_program_instructions[ start_address + 8u ]\n          ) );\n          let grad_delta = bitcast<vec2<f32>>( vec2(\n              render_program_instructions[ start_address + 9u ],\n              render_program_instructions[ start_address + 10u ]\n          ) );\n\n          let centroid = select( fake_centroid, real_centroid, accuracy == 0u || accuracy == 2u );\n\n          let local_point = ( inverse_transform * vec3( centroid, 1f ) ).xy;\n          let local_delta = local_point - start;\n\n          let raw_t = select( 0f, dot( local_delta, grad_delta ) / dot( grad_delta, grad_delta ), length( grad_delta ) > 0f, );\n\n          t = extend_f32( raw_t, extend );\n        }\n        else {\n          let kind = ( instruction_u32 >> 13u ) & 0x3u;\n          let is_swapped = ( ( instruction_u32 >> 15u ) % 0x1u ) != 0u;\n          let conic_transform = transform;\n          let focal_x = bitcast<f32>( render_program_instructions[ start_address + 7u ] );\n          let radius = bitcast<f32>( render_program_instructions[ start_address + 8u ] );\n\n          \n          \n\n          let is_strip = kind == ${xt(p)};\n          let is_circular = kind == ${xt(c)};\n          let is_focal_on_circle = kind == ${xt(d)};\n          let r1_recip = select( 1.f / radius, 0f, is_circular );\n          let less_scale = select( 1f, -1f, is_swapped || ( 1f - focal_x ) < 0f );\n          let t_sign = sign( 1f - focal_x );\n\n          \n          let centroid = select( fake_centroid, real_centroid, accuracy == 0u || accuracy == 1u || accuracy == 3u );\n          let point = centroid;\n\n          \n          \n          let local_xy = ( conic_transform * vec3( point, 1f ) ).xy;\n          let x = local_xy.x;\n          let y = local_xy.y;\n          let xx = x * x;\n          let yy = y * y;\n          var is_valid = true;\n          if ( is_strip ) {\n            let a = radius - yy;\n            t = sqrt( a ) + x;\n            is_valid = a >= 0f;\n          }\n          else if ( is_focal_on_circle ) {\n            t = ( xx + yy ) / x;\n            is_valid = t >= 0f && x != 0f;\n          }\n          else if ( radius > 1f ) {\n            t = sqrt( xx + yy ) - x * r1_recip;\n          }\n          else { \n            let a = xx - yy;\n            t = less_scale * sqrt( a ) - x * r1_recip;\n            is_valid = a >= 0f && t >= 0f;\n          }\n          if ( is_valid ) {\n            t = extend_f32( focal_x + t_sign * t, extend );\n            if ( is_swapped ) {\n              t = 1f - t;\n            }\n          }\n        }\n\n        let blend_offset = select( 9u, 11u, is_linear );\n        let stops_offset = blend_offset + 1u; \n\n        let blend_address = start_address + render_program_instructions[ start_address + blend_offset ];\n\n        var i = -1i;\n        while (\n          i < i32( ratio_count ) - 1i &&\n          bitcast<f32>( render_program_instructions[ start_address + stops_offset + 2u * u32( i + 1i ) ] ) < t\n        ) {\n          oops_count++;\n          if ( oops_count > 0xfffu ) {\n            return oops_inifinite_loop_code;\n          }\n\n          i++;\n        }\n\n        \n        instruction_address = blend_address; \n\n        if ( i == -1i ) {\n          stack[ stack_length ] = vec4( 0f, 0f, 0f, 0f ); \n          stack[ stack_length + 1u ] = vec4( 0f, 0f, 0f, 0f ); \n          stack_length += 2;\n\n          \n          instruction_stack[ instruction_stack_length ] = instruction_address;\n          instruction_stack_length++;\n          instruction_address = start_address + render_program_instructions[ start_address + stops_offset + 1u ];\n        }\n        else if ( i == i32( ratio_count ) - 1i ) {\n          stack[ stack_length ] = vec4( 1f, 0f, 0f, 0f ); \n          stack[ stack_length + 1u ] = vec4( 0f, 0f, 0f, 0f ); \n          stack_length += 2;\n\n          \n          instruction_stack[ instruction_stack_length ] = instruction_address;\n          instruction_stack_length++;\n          instruction_address = start_address + render_program_instructions[ start_address + stops_offset + 2u * u32( i ) + 1u ];\n        }\n        else {\n          \n          let ratio_before = bitcast<f32>( render_program_instructions[ start_address + stops_offset + 2u * u32( i ) ] );\n          let ratio_after = bitcast<f32>( render_program_instructions[ start_address + stops_offset + 2u * u32( i + 1i ) ] );\n\n          let ratio = ( t - ratio_before ) / ( ratio_after - ratio_before );\n\n          stack[ stack_length ] = vec4( ratio, 0f, 0f, 0f );\n          stack_length++;\n\n          let hasBefore = ratio < 1f;\n          let hasAfter = ratio > 0f;\n\n          if ( !hasBefore || !hasAfter ) {\n            stack[ stack_length ] = vec4( 0f, 0f, 0f, 0f ); \n            stack_length++;\n          }\n\n          if ( hasBefore ) {\n            \n            instruction_stack[ instruction_stack_length ] = instruction_address;\n            instruction_stack_length++;\n            instruction_address = start_address + render_program_instructions[ start_address + stops_offset + 2u * u32( i ) + 1u ];\n          }\n\n          if ( hasAfter ) {\n            \n            instruction_stack[ instruction_stack_length ] = instruction_address;\n            instruction_stack_length++;\n            instruction_address = start_address + render_program_instructions[ start_address + stops_offset + 2u * u32( i + 1i ) + 1u ];\n          }\n        }\n      }\n      case ${xt(i)}, ${xt(n)}: {\n        let accuracy = instruction_u32 >> 8u;\n\n        let det = bitcast<f32>( render_program_instructions[ start_address + 1u ] );\n        let diff_a = bitcast<vec2<f32>>( vec2(\n          render_program_instructions[ start_address + 2u ],\n          render_program_instructions[ start_address + 3u ]\n        ) );\n        let diff_b = bitcast<vec2<f32>>( vec2(\n          render_program_instructions[ start_address + 4u ],\n          render_program_instructions[ start_address + 5u ]\n        ) );\n        let point_c = bitcast<vec2<f32>>( vec2(\n          render_program_instructions[ start_address + 6u ],\n          render_program_instructions[ start_address + 7u ]\n        ) );\n\n        let color_a = stack[ stack_length - 1u ];\n        let color_b = stack[ stack_length - 2u ];\n        let color_c = stack[ stack_length - 3u ];\n\n        stack_length -= 2u;\n\n        let point = select( fake_centroid, real_centroid, accuracy == 0u );\n\n        let lambda_a = dot( diff_a, point - point_c ) / det;\n        let lambda_b = dot( diff_b, point - point_c ) / det;\n        let lambda_c = 1f - lambda_a - lambda_b;\n\n        if ( code == ${xt(i)} ) {\n          stack[ stack_length - 1u ] = color_a * lambda_a + color_b * lambda_b + color_c * lambda_c;\n        }\n        \n        else {\n          let z_inverse_a = lambda_a * bitcast<f32>( render_program_instructions[ start_address + 8u ] );\n          let z_inverse_b = lambda_b * bitcast<f32>( render_program_instructions[ start_address + 9u ] );\n          let z_inverse_c = lambda_c * bitcast<f32>( render_program_instructions[ start_address + 10u ] );\n\n          stack[ stack_length - 1u ] = (\n            color_a * z_inverse_a +\n            color_b * z_inverse_b +\n            color_c * z_inverse_c\n          ) / ( z_inverse_a + z_inverse_b + z_inverse_c );\n        }\n      }\n      case ${xt(u)}: {\n        \n        let matrix = transpose( mat4x4(\n          bitcast<f32>( render_program_instructions[ start_address + 1u ] ),\n          bitcast<f32>( render_program_instructions[ start_address + 2u ] ),\n          bitcast<f32>( render_program_instructions[ start_address + 3u ] ),\n          bitcast<f32>( render_program_instructions[ start_address + 4u ] ),\n          bitcast<f32>( render_program_instructions[ start_address + 5u ] ),\n          bitcast<f32>( render_program_instructions[ start_address + 6u ] ),\n          bitcast<f32>( render_program_instructions[ start_address + 7u ] ),\n          bitcast<f32>( render_program_instructions[ start_address + 8u ] ),\n          bitcast<f32>( render_program_instructions[ start_address + 9u ] ),\n          bitcast<f32>( render_program_instructions[ start_address + 10u ] ),\n          bitcast<f32>( render_program_instructions[ start_address + 11u ] ),\n          bitcast<f32>( render_program_instructions[ start_address + 12u ] ),\n          bitcast<f32>( render_program_instructions[ start_address + 13u ] ),\n          bitcast<f32>( render_program_instructions[ start_address + 14u ] ),\n          bitcast<f32>( render_program_instructions[ start_address + 15u ] ),\n          bitcast<f32>( render_program_instructions[ start_address + 16u ] )\n        ) );\n\n        let translation = bitcast<vec4<f32>>( vec4(\n          render_program_instructions[ start_address + 17u ],\n          render_program_instructions[ start_address + 18u ],\n          render_program_instructions[ start_address + 19u ],\n          render_program_instructions[ start_address + 20u ]\n        ) );\n\n        stack[ stack_length - 1u ] = matrix * stack[ stack_length - 1u ] + translation;\n      }\n      case ${xt(w)}: {\n        let alpha = bitcast<f32>( render_program_instructions[ start_address + 1u ] );\n        let num_lights = render_program_instructions[ start_address + 2u ];\n\n        let ambient = stack[ stack_length - 1u ];\n        let diffuse = stack[ stack_length - 2u ];\n        let specular = stack[ stack_length - 3u ];\n        let position = stack[ stack_length - 4u ];\n        let normal = stack[ stack_length - 5u ];\n        stack_length -= 4u;\n\n        var output = ambient;\n\n        \n        let view_direction = normalize( -position );\n\n        for ( var i = 0u; i < num_lights; i++ ) {\n          oops_count++;\n          if ( oops_count > 0xfffu ) {\n            return oops_inifinite_loop_code;\n          }\n\n          \n\n          let light_direction = stack[ stack_length - 2u ];\n          let light_color = stack[ stack_length - 3u ];\n          stack_length -= 2u;\n\n          let dot_product = dot( normal, light_direction );\n          if ( dot_product > 0f ) {\n            \n            let reflection = 2f * dot_product * normal - light_direction;\n            let specular_amount = pow( dot( reflection, view_direction ), alpha );\n\n            output += light_color * (\n              \n              diffuse * vec4( vec3( dot_product ), 1f ) +\n              specular * vec4( vec3( specular_amount ), 1f )\n            );\n          }\n        }\n\n        \n        stack[ stack_length - 1u ] = clamp( output, vec4( 0f ), vec4( 1f ) );\n      }\n      default: {\n        \n        return vec4f( -1f, -1f, -1f, -1f );\n      }\n    }\n  }\n\n  \n\n  return stack[ 0u ];\n}\n`,t.before="\n\n\n\n\n\n\n\n\nconst oops_inifinite_loop_code = vec4f( 5f, 4f, -5f, -4f );\n\n\n\n\n",t.after=I,t.imports=_.uniq(B).sort(),t},qn=On;St.register("wgsl_evaluate_render_program_instructions",On);const Yn=()=>({before:"\n\n\n\nfn inclusive_to_exclusive_scan_indices( index: u32, workgroupSize: u32 ) -> vec3i {\n  let index0 = index / workgroupSize;\n  let index1 = index0 / workgroupSize;\n  let index2 = index1 / workgroupSize;\n\n  return vec3( i32( index0 ) - 1i, i32( index1 ) - 1i, i32( index2 ) - 1i );\n}\n",after:"",imports:[]}),Hn=Yn;St.register("wgsl_inclusive_to_exclusive_scan_indices",Yn);const Gn=()=>({before:"\n\n\n\nconst RasterChunk_bits_raster_program_index_mask: u32 = 0x00ffffff;\nconst RasterChunk_bits_needs_face_mask: u32 = 0x40000000;\nconst RasterChunk_bits_is_constant_mask: u32 = 0x80000000;\nconst RasterChunk_bits_full_mask: u32 =\n  RasterChunk_bits_raster_program_index_mask |\n  RasterChunk_bits_needs_face_mask |\n  RasterChunk_bits_is_constant_mask;\n\nstruct RasterChunk {\n  \n  bits: u32,\n\n  edgesOffset: u32,\n  numEdges: u32,\n\n   \n  minX: f32,\n  minY: f32,\n  maxX: f32,\n  maxY: f32,\n\n  \n  minXCount: i32,\n  minYCount: i32,\n  maxXCount: i32,\n  maxYCount: i32\n}\n",after:"",imports:[]}),Fn=Gn;St.register("wgsl_RasterChunk",Gn);const zn=()=>({before:"\n\n\n\nconst RasterClippedChunk_bits_raster_program_index_mask: u32 = 0x00ffffff;\nconst RasterClippedChunk_bits_is_reducible_mask: u32 = 0x08000000; \nconst RasterClippedChunk_bits_is_complete_mask: u32 = 0x10000000; \nconst RasterClippedChunk_bits_is_full_area_mask: u32 = 0x20000000; \nconst RasterClippedChunk_bits_needs_face_mask: u32 = 0x40000000;\nconst RasterClippedChunk_bits_is_constant_mask: u32 = 0x80000000;\n\nstruct RasterClippedChunk {\n  bits: u32,\n\n  \n  area: f32,\n\n   \n  minX: f32,\n  minY: f32,\n  maxX: f32,\n  maxY: f32,\n\n  \n  minXCount: i32,\n  minYCount: i32,\n  maxXCount: i32,\n  maxYCount: i32\n}\n\nconst RasterClippedChunk_discardable = RasterClippedChunk(\n  0u,\n  0.0,\n  0.0, 0.0, 0.0, 0.0,\n  0i, 0i, 0i, 0i\n);\n",after:"",imports:[]}),Un=zn;St.register("wgsl_RasterClippedChunk",zn);const Wn=()=>({before:"\n\n\n\nconst RasterEdge_bits_chunk_index_mask: u32 = 0x2fffffff;\nconst RasterEdge_bits_is_first_edge_mask: u32 = 0x40000000; \nconst RasterEdge_bits_is_last_edge_mask: u32 = 0x80000000;\nconst RasterEdge_bits_first_last_mask: u32 = RasterEdge_bits_is_first_edge_mask | RasterEdge_bits_is_last_edge_mask;\n\nstruct RasterEdge {\n  bits: u32, \n\n  \n  startX: f32,\n  startY: f32,\n  endX: f32,\n  endY: f32\n}\n",after:"",imports:[]}),Xn=Wn;St.register("wgsl_RasterEdge",Wn);const jn=()=>({before:"\n\n\n\nconst RasterEdgeClip_bits_clipped_chunk_index_mask: u32 = 0x2fffffff;\nconst RasterEdgeClip_bits_is_first_edge_mask: u32 = 0x40000000;\nconst RasterEdgeClip_bits_is_last_edge_mask: u32 = 0x80000000;\nconst RasterEdgeClip_bits_first_last_mask: u32 = RasterEdgeClip_bits_is_first_edge_mask | RasterEdgeClip_bits_is_last_edge_mask;\n\nstruct RasterEdgeClip {\n  bits: u32, \n\n  \n  p0x: f32,\n  p0y: f32,\n  p1x: f32,\n  p1y: f32,\n  p2x: f32,\n  p2y: f32,\n  p3x: f32,\n  p3y: f32\n}\n\nfn RasterEdgeClip_getCount( edge_clip: ptr<function, RasterEdgeClip> ) -> u32 {\n  return select( 1u, 0u, (*edge_clip).p0x == (*edge_clip).p1x && (*edge_clip).p0y == (*edge_clip).p1y ) +\n         select( 1u, 0u, (*edge_clip).p1x == (*edge_clip).p2x && (*edge_clip).p1y == (*edge_clip).p2y ) +\n         select( 1u, 0u, (*edge_clip).p2x == (*edge_clip).p3x && (*edge_clip).p2y == (*edge_clip).p3y );\n}\n",after:"",imports:[]}),Qn=jn;St.register("wgsl_RasterEdgeClip",jn);const Kn=e=>{let t={};let i="";return i+="\n\n\n\n\nconst RasterChunkReduceData_bits_clipped_chunk_index_mask: u32 = 0x2fffffff;\nconst RasterChunkReduceData_bits_is_first_edge_mask: u32 = 0x40000000; \nconst RasterChunkReduceData_bits_is_last_edge_mask: u32 = 0x80000000;\nconst RasterChunkReduceData_bits_first_last_mask: u32 = RasterChunkReduceData_bits_is_first_edge_mask | RasterChunkReduceData_bits_is_last_edge_mask;\n\nstruct RasterChunkReduceData {\n  bits: u32,\n\n  area: f32,\n",e.boundsReduce&&(i+="   \n  minX: f32,\n  minY: f32,\n  maxX: f32,\n  maxY: f32,"),i+="\n  \n  minXCount: i32,\n  minYCount: i32,\n  maxXCount: i32,\n  maxYCount: i32\n}\n\nfn RasterChunkReduceData_combine(\n  a: RasterChunkReduceData,\n  b: RasterChunkReduceData\n) -> RasterChunkReduceData {\n  let a_clipped_chunk_index = ( a.bits & RasterChunkReduceData_bits_clipped_chunk_index_mask );\n  if ( a_clipped_chunk_index != ( b.bits & RasterChunkReduceData_bits_clipped_chunk_index_mask ) ) {\n    return b;\n  }\n  else {\n    return RasterChunkReduceData(\n      a_clipped_chunk_index |\n      ( a.bits & RasterChunkReduceData_bits_is_first_edge_mask ) |\n      ( b.bits & RasterChunkReduceData_bits_is_last_edge_mask ),\n      a.area + b.area,",e.boundsReduce&&(i+="      min( a.minX, b.minX ),\n      min( a.minY, b.minY ),\n      max( a.maxX, b.maxX ),\n      max( a.maxY, b.maxY ),"),i+="      a.minXCount + b.minXCount,\n      a.minYCount + b.minYCount,\n      a.maxXCount + b.maxXCount,\n      a.maxYCount + b.maxYCount\n    );\n  }\n}\n\nconst RasterChunkReduceData_out_of_range = RasterChunkReduceData(\n  0x2fffffff,\n  0.0,",e.boundsReduce&&(i+="  0.0, 0.0, 0.0, 0.0,"),i+="  0i, 0i, 0i, 0i\n);\n",t.before=i,t.after="",t.imports=_.uniq([]).sort(),t},Zn=Kn;St.register("wgsl_RasterChunkReduceData",Kn);const Jn=()=>({before:"\n\n\n\n\nstruct RasterChunkReducePair {\n  min: RasterChunkReduceData,\n  max: RasterChunkReduceData\n}\n\nfn RasterChunkReducePair_combine(\n  a: RasterChunkReducePair,\n  b: RasterChunkReducePair\n) -> RasterChunkReducePair {\n  return RasterChunkReducePair(\n    RasterChunkReduceData_combine( a.min, b.min ),\n    RasterChunkReduceData_combine( a.max, b.max )\n  );\n}\n\nconst RasterChunkReducePair_out_of_range = RasterChunkReducePair(\n  RasterChunkReduceData_out_of_range,\n  RasterChunkReduceData_out_of_range\n);\n",after:"",imports:[Zn]}),$n=Jn;St.register("wgsl_RasterChunkReducePair",Jn);const er=()=>({before:"\n\n\n\n\nstruct RasterChunkReduceQuad {\n  leftMin: RasterChunkReduceData,\n  leftMax: RasterChunkReduceData,\n  rightMin: RasterChunkReduceData,\n  rightMax: RasterChunkReduceData\n}\n\nfn RasterChunkReduceQuad_combine(\n  a: RasterChunkReduceQuad,\n  b: RasterChunkReduceQuad\n) -> RasterChunkReduceQuad {\n  var leftMin = a.leftMin;\n  var leftMax = a.leftMax;\n\n  \n  if (\n    ( a.leftMin.bits & RasterChunkReduceData_bits_clipped_chunk_index_mask ) ==\n    ( b.leftMin.bits & RasterChunkReduceData_bits_clipped_chunk_index_mask )\n  ) {\n    leftMin = RasterChunkReduceData_combine( a.leftMin, b.leftMin );\n  }\n  if (\n    ( a.leftMax.bits & RasterChunkReduceData_bits_clipped_chunk_index_mask ) ==\n    ( b.leftMax.bits & RasterChunkReduceData_bits_clipped_chunk_index_mask )\n  ) {\n    leftMax = RasterChunkReduceData_combine( a.leftMax, b.leftMax );\n  }\n\n  let rightMin = RasterChunkReduceData_combine( a.rightMin, b.rightMin );\n  let rightMax = RasterChunkReduceData_combine( a.rightMax, b.rightMax );\n\n  return RasterChunkReduceQuad(\n    leftMin,\n    leftMax,\n    rightMin,\n    rightMax\n  );\n}\n\nconst RasterChunkReduceQuad_out_of_range = RasterChunkReduceQuad(\n  RasterChunkReduceData_out_of_range,\n  RasterChunkReduceData_out_of_range,\n  RasterChunkReduceData_out_of_range,\n  RasterChunkReduceData_out_of_range\n);\n",after:"",imports:[Zn]}),tr=er;St.register("wgsl_RasterChunkReduceQuad",er);const ir=()=>({before:"\n\n\n\nconst RasterCompleteChunk_bits_raster_program_index_mask: u32 = 0x00ffffff;\nconst RasterCompleteChunk_bits_needs_face_mask: u32 = 0x40000000; \nconst RasterCompleteChunk_bits_is_full_area_mask: u32 = 0x20000000; \nconst RasterCompleteChunk_bits_full_mask: u32 =\n  RasterCompleteChunk_bits_raster_program_index_mask |\n  RasterCompleteChunk_bits_needs_face_mask |\n  RasterCompleteChunk_bits_is_full_area_mask;\n\nstruct RasterCompleteChunk {\n  bits: u32,\n\n  edgesOffset: u32,\n  numEdges: u32,\n\n  \n  area: f32,\n\n   \n  minX: f32,\n  minY: f32,\n  maxX: f32,\n  maxY: f32,\n\n  \n  minXCount: i32,\n  minYCount: i32,\n  maxXCount: i32,\n  maxYCount: i32\n}\n",after:"",imports:[]}),nr=ir;St.register("wgsl_RasterCompleteChunk",ir);const rr=()=>({before:"\n\n\n\nstruct RasterSplitReduceData {\n  numReducible: u32,\n  numComplete: u32\n}\n\n\nfn RasterSplitReduceData_combine( a: RasterSplitReduceData, b: RasterSplitReduceData ) -> RasterSplitReduceData {\n  return RasterSplitReduceData( a.numReducible + b.numReducible, a.numComplete + b.numComplete );\n}\n\nconst RasterSplitReduceData_identity = RasterSplitReduceData( 0u, 0u );\n",after:"",imports:[]}),sr=rr;St.register("wgsl_RasterSplitReduceData",rr);const ar=()=>({before:"\n\n\n\n\nstruct RasterStageConfig {\n  \n\n  \n  initial_chunk_workgroup_x: u32, \n  initial_chunk_workgroup_y: u32,\n  initial_chunk_workgroup_z: u32,\n\n  \n  initial_clip_workgroup_x: u32, \n  initial_clip_workgroup_y: u32,\n  initial_clip_workgroup_z: u32,\n\n  \n  chunk_reduce_0_workgroup_x: u32, \n  chunk_reduce_0_workgroup_y: u32,\n  chunk_reduce_0_workgroup_z: u32,\n\n  \n  chunk_reduce_1_workgroup_x: u32, \n  chunk_reduce_1_workgroup_y: u32,\n  chunk_reduce_1_workgroup_z: u32,\n\n  \n  split_reduce_scan_workgroup_x: u32, \n  split_reduce_scan_workgroup_y: u32,\n  split_reduce_scan_workgroup_z: u32,\n\n  \n  edge_reduce_scan_workgroup_x: u32, \n  edge_reduce_scan_workgroup_y: u32,\n  edge_reduce_scan_workgroup_z: u32,\n\n  \n  split_reduce0_workgroup_x: u32, \n  split_reduce0_workgroup_y: u32,\n  split_reduce0_workgroup_z: u32,\n\n  \n  split_reduce1_workgroup_x: u32, \n  split_reduce1_workgroup_y: u32,\n  split_reduce1_workgroup_z: u32,\n\n  \n  edge_reduce0_workgroup_x: u32, \n  edge_reduce0_workgroup_y: u32,\n  edge_reduce0_workgroup_z: u32,\n\n  \n  edge_reduce1_workgroup_x: u32, \n  edge_reduce1_workgroup_y: u32,\n  edge_reduce1_workgroup_z: u32,\n\n  \n  accumulate_workgroup_x: u32, \n  accumulate_workgroup_y: u32,\n  accumulate_workgroup_z: u32,\n\n  \n  num_input_chunks: u32,\n  num_input_edges: u32,\n  num_clipped_chunks: u32, \n  num_edge_clips: u32, \n\n  \n  num_reducible_chunks: u32,\n  num_complete_chunks: u32,\n  num_reducible_edges: u32,\n  num_complete_edges: u32,\n\n  raster_width: u32,\n  raster_height: u32,\n  raster_offset_x: u32,\n  raster_offset_y: u32,\n  raster_color_space: u32 \n\n  \n}\n",after:"",imports:[]}),or=ar;St.register("wgsl_RasterStageConfig",ar);const lr=e=>{let t={};Zn(e),Un(e);let i="",n="";const r=[Un,Zn];return i+="\n\n\n\n\n",n+="\nfn apply_to_clipped_chunk( value: RasterChunkReduceData ) {\n\n  let clipped_chunk_index = value.bits & RasterChunkReduceData_bits_clipped_chunk_index_mask;\n\n  \n  let clipped_chunk = &clipped_chunks[ clipped_chunk_index ];\n\n  let minXCount = (*clipped_chunk).minXCount + value.minXCount;\n  let minYCount = (*clipped_chunk).minYCount + value.minYCount;\n  let maxXCount = (*clipped_chunk).maxXCount + value.maxXCount;\n  let maxYCount = (*clipped_chunk).maxYCount + value.maxYCount;\n\n  let clippedMinX = (*clipped_chunk).minX;\n  let clippedMinY = (*clipped_chunk).minY;\n  let clippedMaxX = (*clipped_chunk).maxX;\n  let clippedMaxY = (*clipped_chunk).maxY;\n",e.boundsReduce?n+="  \n  \n  \n  \n  \n  let minX = select(\n    clippedMinX,\n    clippedMinX + floor( value.minX - clippedMinX ),\n    minXCount == 0i && minYCount == 0i && maxYCount == 0i\n  );\n  let minY = select(\n    clippedMinY,\n    clippedMinY + floor( value.minY - clippedMinY ),\n    minXCount == 0i && minYCount == 0i && maxXCount == 0i\n  );\n  let maxX = select(\n    clippedMaxX,\n    clippedMaxX - floor( clippedMaxX - value.maxX ),\n    maxXCount == 0i && minYCount == 0i && maxYCount == 0i\n  );\n  let maxY = select(\n    clippedMaxY,\n    clippedMaxY - floor( clippedMaxY - value.maxY ),\n    minXCount == 0i && maxXCount == 0i && maxYCount == 0i\n  );":n+="  let minX = clippedMinX;\n  let minY = clippedMinY;\n  let maxX = clippedMaxX;\n  let maxY = clippedMaxY;",n+="\n  \n  \n  \n  \n  \n  let countArea = ( clippedMaxY - clippedMinY ) * ( f32( minXCount ) * clippedMinX + f32( maxXCount ) * clippedMaxX );\n\n  \n  let area = countArea + value.area;\n\n  let width = maxX - minX;\n  let height = maxY - minY;\n\n  \n  \n  let isDiscarded = area <= 1.0e-6;\n  let isFullArea = area >= width * height - 1.0e-4;\n  let isComplete = isDiscarded || isFullArea || ( width <= 1.0 + 1.0e-5 && height <= 1 + 1.0e-5 );\n\n  clipped_chunks[ clipped_chunk_index ] = RasterClippedChunk(\n    (*clipped_chunk).bits |\n    select( 0u, RasterClippedChunk_bits_is_reducible_mask, !isComplete ) |\n    select( 0u, RasterClippedChunk_bits_is_complete_mask, isComplete && !isDiscarded ) |\n    select( 0u, RasterClippedChunk_bits_is_full_area_mask, isFullArea ),\n\n    area,\n\n    minX, minY, maxX, maxY,\n    minXCount, minYCount, maxXCount, maxYCount\n  );\n};\n",t.before="\n\n\n\n\n",t.after=n,t.imports=_.uniq(r).sort(),t},hr=lr;St.register("wgsl_apply_to_clipped_chunk",lr);const ur=()=>({before:"\n\n\n\n\n\nconst RasterClippedChunk_bits_complete_output_split_mask =\n  RasterClippedChunk_bits_is_complete_mask |\n  RasterClippedChunk_bits_is_full_area_mask |\n  RasterClippedChunk_bits_is_constant_mask;\n\nconst RasterClippedChunk_bits_complete_output_split_value =\n  RasterClippedChunk_bits_is_complete_mask |\n  RasterClippedChunk_bits_is_full_area_mask;\n\nconst RasterClippedChunk_bits_exporting_complete_edges_mask =\n  RasterClippedChunk_bits_is_complete_mask |\n  RasterClippedChunk_bits_is_full_area_mask |\n  RasterClippedChunk_bits_needs_face_mask;\n\nconst RasterClippedChunk_bits_exporting_complete_edges_value =\n  RasterClippedChunk_bits_is_complete_mask |\n  RasterClippedChunk_bits_needs_face_mask;\n\n\n\n\nfn RasterClippedChunk_needs_complete_output_split( clipped_chunk: RasterClippedChunk ) -> bool {\n  \n  return ( clipped_chunk.bits & RasterClippedChunk_bits_complete_output_split_mask ) == RasterClippedChunk_bits_complete_output_split_value;\n}\n\nfn RasterClippedChunk_get_output_split_count( clipped_chunk: RasterClippedChunk ) -> u32 {\n  \n  return u32( round( ( clipped_chunk.maxX - clipped_chunk.minX ) * ( clipped_chunk.maxY - clipped_chunk.minY ) ) );\n}\n\nfn RasterClippedChunk_get_data( clipped_chunk: RasterClippedChunk ) -> RasterSplitReduceData {\n  let is_reducible = ( clipped_chunk.bits & RasterClippedChunk_bits_is_reducible_mask ) != 0u;\n  let is_complete = ( clipped_chunk.bits & RasterClippedChunk_bits_is_complete_mask ) != 0u;\n\n  return RasterSplitReduceData(\n    select( 0u, 1u, is_reducible ),\n    select(\n      0u,\n      select(\n        1u,\n        RasterClippedChunk_get_output_split_count( clipped_chunk ),\n        RasterClippedChunk_needs_complete_output_split( clipped_chunk )\n      ),\n      is_complete\n    )\n  );\n}\n\nfn RasterClippedChunk_is_exporting_complete_edges( clipped_chunk: RasterClippedChunk ) -> bool {\n  \n  return ( clipped_chunk.bits & RasterClippedChunk_bits_exporting_complete_edges_mask ) == RasterClippedChunk_bits_exporting_complete_edges_value;\n}\n\n\nfn RasterEdgeClip_get_count( edge_clip: RasterEdgeClip ) -> u32 {\n  return select( 1u, 0u, edge_clip.p0x == edge_clip.p1x && edge_clip.p0y == edge_clip.p1y ) +\n         select( 1u, 0u, edge_clip.p1x == edge_clip.p2x && edge_clip.p1y == edge_clip.p2y ) +\n         select( 1u, 0u, edge_clip.p2x == edge_clip.p3x && edge_clip.p2y == edge_clip.p3y );\n}\n\n\nfn RasterSplitReduceData_from( edge_clip: RasterEdgeClip, clipped_chunk: RasterClippedChunk, exists: bool ) -> RasterSplitReduceData {\n  let is_reducible = ( clipped_chunk.bits & RasterClippedChunk_bits_is_reducible_mask ) != 0u;\n  let is_exporting_complete_edges = RasterClippedChunk_is_exporting_complete_edges( clipped_chunk );\n  let count = select( 0u, RasterEdgeClip_get_count( edge_clip ), exists );\n\n  return RasterSplitReduceData(\n    select( 0u, count, is_reducible ),\n    select( 0u, count, is_exporting_complete_edges )\n  );\n}\n",after:"",imports:[Un,Qn,sr]}),cr=ur;St.register("wgsl_clipped_chunk_info",ur);const dr=e=>{let t={};Fn(e),Un(e),or(e);const i=e.workgroupSize;let n="",r="";const s=[Fn,Un,or];return n+="\n\n\n\n\n\n@group(0) @binding(0)\nvar<uniform> config: RasterStageConfig;\n@group(0) @binding(1)\nvar<storage, read> input_chunks: array<RasterChunk>;\n@group(0) @binding(2)\nvar<storage, read_write> clipped_chunks: array<RasterClippedChunk>;\n",r+=`\n@compute @workgroup_size(${i})\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n  let chunk_index = global_id.x;\n  if ( chunk_index < config.num_input_chunks ) {\n\n    let chunk = input_chunks[ chunk_index ];\n\n    let minClippedChunkIndex = 2u * chunk_index;\n    let maxClippedChunkIndex = 2u * chunk_index + 1u;\n\n    let xDiff = chunk.maxX - chunk.minX;\n    let yDiff = chunk.maxY - chunk.minY;\n\n    let hasEdges = chunk.numEdges > 0u;\n    var minChunk: RasterClippedChunk;\n    var maxChunk: RasterClippedChunk;\n\n    if ( hasEdges ) {\n      let isXSplit = xDiff > yDiff;\n\n      \n      \n      var split: f32;\n      \n      if ( isXSplit ) {\n        split = chunk.minX + floor( 0.5 * xDiff );\n      }\n      else {\n        split = chunk.minY + floor( 0.5 * yDiff );\n      }\n\n      minChunk = RasterClippedChunk(\n        chunk.bits,\n        -1.0,\n\n        \n        \n        chunk.minX,\n        chunk.minY,\n        select( chunk.maxX, split, isXSplit ),\n        select( split, chunk.maxY, isXSplit ),\n\n        chunk.minXCount,\n        chunk.minYCount,\n        chunk.maxXCount,\n        chunk.maxYCount\n      );\n\n      maxChunk = RasterClippedChunk(\n        chunk.bits,\n        -1.0,\n\n        \n        \n        select( chunk.minX, split, isXSplit ),\n        select( split, chunk.minY, isXSplit ),\n        chunk.maxX,\n        chunk.maxY,\n\n        chunk.minXCount,\n        chunk.minYCount,\n        chunk.maxXCount,\n        chunk.maxYCount\n      );\n    }\n    \n    \n    \n    else {\n      let hasArea = chunk.minXCount < 0i && chunk.minYCount > 0i && chunk.maxXCount > 0i && chunk.maxYCount < 0i;\n\n      if ( hasArea ) {\n        \n        minChunk = RasterClippedChunk(\n          chunk.bits | RasterClippedChunk_bits_is_complete_mask | RasterClippedChunk_bits_is_full_area_mask,\n          xDiff * yDiff,\n\n          chunk.minX, chunk.minY, chunk.maxX, chunk.maxY,\n          -1i, 1i, 1i, -1i\n        );\n      }\n      else {\n        minChunk = RasterClippedChunk_discardable;\n      }\n\n      \n      \n      maxChunk = RasterClippedChunk_discardable;\n    }\n\n    clipped_chunks[ minClippedChunkIndex ] = minChunk;\n    clipped_chunks[ maxClippedChunkIndex ] = maxChunk;\n  }\n}\n`,t.before="\n\n\n\n\n\n@group(0) @binding(0)\nvar<uniform> config: RasterStageConfig;\n@group(0) @binding(1)\nvar<storage, read> input_chunks: array<RasterChunk>;\n@group(0) @binding(2)\nvar<storage, read_write> clipped_chunks: array<RasterClippedChunk>;\n",t.after=r,t.imports=_.uniq(s).sort(),t},pr=dr;St.register("wgsl_raster_initial_chunk",dr);const mr=e=>{let t={};Fn(e),$n(e),tr(e),Un(e),Xn(e),Qn(e),or(e),hr(e),e.debugReduceBuffers;const i=e.workgroupSize;let n="",r="";const s=[Fn,Xn,Qn,Un,$n,tr,or,hr];return n+="\n\n\n\n\n",e.boundsReduce&&(n+="const veryPositiveNumber = 1.0e10;\nconst veryNegativeNumber = -1.0e10;\n\nconst bounds_none = vec4(\n  vec2( veryPositiveNumber ),\n  vec2( veryNegativeNumber )\n);"),n+="\n@group(0) @binding(0)\nvar<uniform> config: RasterStageConfig;\n@group(0) @binding(1)\nvar<storage, read> chunks: array<RasterChunk>;\n@group(0) @binding(2)\nvar<storage, read> edges: array<RasterEdge>;\n@group(0) @binding(3)\nvar<storage, read_write> clipped_chunks: array<RasterClippedChunk>; \n@group(0) @binding(4)\nvar<storage, read_write> edge_clips: array<RasterEdgeClip>; \n@group(0) @binding(5)\nvar<storage, read_write> chunk_reduces: array<RasterChunkReduceQuad>; ",e.debugReduceBuffers&&(n+="@group(0) @binding(6)\nvar<storage, read_write> debug_reduces: array<RasterChunkReducePair>;"),n+=`\nvar<workgroup> reduces: array<RasterChunkReducePair,${i}>;\n\n\nvar<workgroup> first_chunk_index: u32;\n\n\n\nvar<workgroup> max_first_chunk_index: atomic<u32>;\n`,r+=`\n@compute @workgroup_size(${i})\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n  let edgeIndex = global_id.x;\n  let exists = edgeIndex < config.num_input_edges;\n\n  let edge = edges[ edgeIndex ];\n  let chunk_index = edge.bits & RasterEdge_bits_chunk_index_mask;\n  let edge_first_last = edge.bits & RasterEdge_bits_first_last_mask;\n  let chunk = chunks[ chunk_index ];\n\n  \n  \n\n  \n  if ( exists && local_id.x == 0u ) {\n    first_chunk_index = chunk_index;\n  }\n\n  \n  \n  let minEdgeIndex = chunk.edgesOffset + edgeIndex;\n  let maxEdgeIndex = chunk.edgesOffset + chunk.numEdges + edgeIndex;\n  let minClippedChunkIndex = 2 * chunk_index;\n  let maxClippedChunkIndex = 2 * chunk_index + 1;\n\n  \n\n  let xDiff = chunk.maxX - chunk.minX;\n  let yDiff = chunk.maxY - chunk.minY;\n\n  let isXSplit = xDiff > yDiff;\n\n  \n  \n  var split: f32;\n  \n  if ( isXSplit ) {\n    split = chunk.minX + floor( 0.5 * xDiff );\n  }\n  else {\n    split = chunk.minY + floor( 0.5 * yDiff );\n  }\n\n  \n  \n  \n  \n\n  var minPoint0: vec2f;\n  var minPoint1: vec2f;\n  var minPoint2: vec2f;\n  var minPoint3: vec2f;\n\n  var maxPoint0: vec2f;\n  var maxPoint1: vec2f;\n  var maxPoint2: vec2f;\n  var maxPoint3: vec2f;\n\n  var minCount = 0i;\n  var maxCount = 0i;\n  var minSet = true;\n  var maxSet = true;\n\n  let centerSecondary = 0.5 * select( chunk.minX + chunk.maxX, chunk.minY + chunk.maxY, isXSplit );\n  let startPoint = vec2( edge.startX, edge.startY );\n  let endPoint = vec2( edge.endX, edge.endY );\n\n  \n  let startPrimaryCmp = sign( select( startPoint.y, startPoint.x, isXSplit ) - split );\n  let endPrimaryCmp = sign( select( endPoint.y, endPoint.x, isXSplit ) - split );\n  let startSecondaryLess = select( startPoint.x, startPoint.y, isXSplit ) < centerSecondary;\n  let endSecondaryLess = select( endPoint.x, endPoint.y, isXSplit ) < centerSecondary;\n\n  if ( startPrimaryCmp == endPrimaryCmp ) {\n    \n    if ( startPrimaryCmp == -1f ) {\n      minPoint0 = startPoint;\n      minPoint1 = endPoint;\n      minPoint2 = endPoint;\n      minPoint3 = endPoint;\n      maxSet = false;\n\n      \n      if ( startSecondaryLess != endSecondaryLess ) {\n        maxCount += select( -1i, 1i, startSecondaryLess );\n      }\n    }\n    \n    else if ( startPrimaryCmp == 1f ) {\n      maxPoint0 = startPoint;\n      maxPoint1 = endPoint;\n      maxPoint2 = endPoint;\n      maxPoint3 = endPoint;\n      minSet = false;\n\n      if ( startSecondaryLess != endSecondaryLess ) {\n        minCount += select( -1i, 1i, startSecondaryLess );\n      }\n    }\n    \n    else if ( startPrimaryCmp == 0f ) {\n      \n      minPoint0 = startPoint;\n      minPoint1 = endPoint;\n      minPoint2 = endPoint;\n      minPoint3 = endPoint;\n\n      maxPoint0 = startPoint;\n      maxPoint1 = endPoint;\n      maxPoint2 = endPoint;\n      maxPoint3 = endPoint;\n    }\n  }\n  else {\n    \n    let secondaryIntersection = select(\n      startPoint.x + ( endPoint.x - startPoint.x ) * ( split - startPoint.y ) / ( endPoint.y - startPoint.y ),\n      startPoint.y + ( endPoint.y - startPoint.y ) * ( split - startPoint.x ) / ( endPoint.x - startPoint.x ),\n      isXSplit\n    );\n    let intersection = select(\n      vec2( secondaryIntersection, split ),\n      vec2( split, secondaryIntersection ),\n      isXSplit\n    );\n\n    let startLess = startPrimaryCmp == -1f;\n    let startGreater = startPrimaryCmp == 1f;\n    let endLess = endPrimaryCmp == -1f;\n    let endGreater = endPrimaryCmp == 1f;\n\n    let minResultStartPoint = select( intersection, startPoint, startLess );\n    let minResultEndPoint = select( intersection, endPoint, endLess );\n    let maxResultStartPoint = select( intersection, startPoint, startGreater );\n    let maxResultEndPoint = select( intersection, endPoint, endGreater );\n\n    let minSecondary = select( chunk.minX, chunk.minY, isXSplit );\n    let maxSecondary = select( chunk.maxX, chunk.maxY, isXSplit );\n    let startCornerSecondary = select( maxSecondary, minSecondary, startSecondaryLess );\n    let endCornerSecondary = select( maxSecondary, minSecondary, endSecondaryLess );\n\n    minPoint0 = select(\n      minResultStartPoint,\n      select( vec2( startCornerSecondary, split ), vec2( split, startCornerSecondary ), isXSplit ),\n      startGreater\n    );\n    minPoint1 = minResultStartPoint;\n    minPoint2 = minResultEndPoint;\n    minPoint3 = select(\n      minResultEndPoint,\n      select( vec2( endCornerSecondary, split ), vec2( split, endCornerSecondary ), isXSplit ),\n      endGreater\n    );\n\n    maxPoint0 = select(\n      maxResultStartPoint,\n      select( vec2( startCornerSecondary, split ), vec2( split, startCornerSecondary ), isXSplit ),\n      startLess\n    );\n    maxPoint1 = maxResultStartPoint;\n    maxPoint2 = maxResultEndPoint;\n    maxPoint3 = select(\n      maxResultEndPoint,\n      select( vec2( endCornerSecondary, split ), vec2( split, endCornerSecondary ), isXSplit ),\n      endLess\n    );\n  }\n\n  var minClip = RasterEdgeClip(\n    minClippedChunkIndex | edge_first_last,\n    minPoint0.x, minPoint0.y,\n    minPoint1.x, minPoint1.y,\n    minPoint2.x, minPoint2.y,\n    minPoint3.x, minPoint3.y\n  );\n  var maxClip = RasterEdgeClip(\n    maxClippedChunkIndex | edge_first_last,\n    maxPoint0.x, maxPoint0.y,\n    maxPoint1.x, maxPoint1.y,\n    maxPoint2.x, maxPoint2.y,\n    maxPoint3.x, maxPoint3.y\n  );\n\n  \n  let minArea = 0.5 * (\n    ( minClip.p1x + minClip.p0x ) * ( minClip.p1y - minClip.p0y ) +\n    ( minClip.p2x + minClip.p1x ) * ( minClip.p2y - minClip.p1y ) +\n    ( minClip.p3x + minClip.p2x ) * ( minClip.p3y - minClip.p2y )\n  );\n  let maxArea = 0.5 * (\n    ( maxClip.p1x + maxClip.p0x ) * ( maxClip.p1y - maxClip.p0y ) +\n    ( maxClip.p2x + maxClip.p1x ) * ( maxClip.p2y - maxClip.p1y ) +\n    ( maxClip.p3x + maxClip.p2x ) * ( maxClip.p3y - maxClip.p2y )\n  );\n`,e.boundsReduce&&(r+="  \n  var minBounds = select(\n    bounds_none,\n    vec4(\n      min( min( minPoint0, minPoint1 ), min( minPoint2, minPoint3 ) ),\n      max( max( minPoint0, minPoint1 ), max( minPoint2, minPoint3 ) )\n    ),\n    minSet\n  );\n\n  if ( minCount != 0i ) {\n    if ( isXSplit ) {\n      minBounds = vec4(\n        minBounds.x,\n        min( minBounds.y, chunk.minY ),\n        max( minBounds.z, split ),\n        max( minBounds.w, chunk.maxY )\n      );\n    }\n    else {\n      minBounds = vec4(\n        min( minBounds.x, chunk.minX ),\n        minBounds.y,\n        max( minBounds.z, chunk.maxX ),\n        max( minBounds.w, split )\n      );\n    }\n  }\n\n  \n  var maxBounds = select(\n    bounds_none,\n    vec4(\n      min( min( maxPoint0, maxPoint1 ), min( maxPoint2, maxPoint3 ) ),\n      max( max( maxPoint0, maxPoint1 ), max( maxPoint2, maxPoint3 ) )\n    ),\n    maxSet\n  );\n\n  if ( maxCount != 0i ) {\n    if ( isXSplit ) {\n      maxBounds = vec4(\n        min( maxBounds.x, split ),\n        min( maxBounds.y, chunk.minY ),\n        maxBounds.z,\n        max( maxBounds.w, chunk.maxY )\n      );\n    }\n    else {\n      maxBounds = vec4(\n        min( maxBounds.x, chunk.minX ),\n        min( maxBounds.y, split ),\n        max( maxBounds.z, chunk.maxX ),\n        maxBounds.w\n      );\n    }\n  }"),r+="\n  \n\n  var value: RasterChunkReducePair;\n\n  if ( exists ) {\n    edge_clips[ minEdgeIndex ] = minClip;\n    edge_clips[ maxEdgeIndex ] = maxClip;\n\n    value = RasterChunkReducePair(\n      RasterChunkReduceData(\n        minClippedChunkIndex | edge_first_last,\n        minArea,",e.boundsReduce&&(r+="        minBounds.x, minBounds.y, minBounds.z, minBounds.w,"),r+="        0i, 0i, select( 0i, minCount, isXSplit ), select( minCount, 0i, isXSplit )\n      ),\n      RasterChunkReduceData(\n        maxClippedChunkIndex | edge_first_last,\n        maxArea,",e.boundsReduce&&(r+="        maxBounds.x, maxBounds.y, maxBounds.z, maxBounds.w,"),r+="        select( 0i, maxCount, isXSplit ), select( maxCount, 0i, isXSplit ), 0i, 0i\n      )\n    );\n\n    \n    \n    if ( ( value.min.bits & RasterChunkReduceData_bits_first_last_mask ) == RasterChunkReduceData_bits_first_last_mask ) {\n      apply_to_clipped_chunk( value.min );\n      apply_to_clipped_chunk( value.max );\n    }\n  }\n  else {\n    value = RasterChunkReducePair_out_of_range;\n  }\n\n  reduces[ local_id.x ] = value;\n",e.debugReduceBuffers&&(r+="  debug_reduces[ global_id.x ] = value;"),r+=`\n  \n  \n  \n  \n  let applicableMinChunkIndex = select(\n    0xffffffff, \n    value.min.bits & RasterChunkReduceData_bits_clipped_chunk_index_mask,\n    ( value.min.bits & RasterChunkReduceData_bits_first_last_mask ) == RasterChunkReduceData_bits_is_last_edge_mask\n  );\n\n  for ( var i = 0u; i < ${xt(Math.log2(i))}; i++ ) {\n    workgroupBarrier();\n\n    let delta = 1u << i;\n    if ( local_id.x >= delta ) {\n      var otherValue = reduces[ local_id.x - delta ];\n\n      value = RasterChunkReducePair_combine( otherValue, value );\n\n      \n      \n      \n      \n      if (\n        ( applicableMinChunkIndex == ( otherValue.min.bits & RasterChunkReduceData_bits_clipped_chunk_index_mask ) ) &&\n        ( value.min.bits & RasterChunkReduceData_bits_is_first_edge_mask ) != 0u\n      ) {\n\n        \n        \n        apply_to_clipped_chunk( value.min );\n        apply_to_clipped_chunk( value.max );\n      }\n    }\n\n    workgroupBarrier();\n    reduces[ local_id.x ] = value;\n  }\n\n  \n  if ( exists && chunk_index == first_chunk_index ) {\n    atomicMax( &max_first_chunk_index, local_id.x );\n  }\n  workgroupBarrier(); \n\n  \n  if ( exists && local_id.x == 0u ) {\n    let last_local_edge_index_in_workgroup = min(\n      config.num_input_edges - 1u - workgroup_id.x * ${xt(i)},\n      ${xt(i-1)}\n    );\n\n    let leftValue = reduces[ atomicLoad( &max_first_chunk_index ) ];\n    let rightValue = reduces[ last_local_edge_index_in_workgroup ];\n\n    chunk_reduces[ workgroup_id.x ] = RasterChunkReduceQuad(\n      leftValue.min,\n      leftValue.max,\n      rightValue.min,\n      rightValue.max\n    );\n  }\n}\n`,t.before=n,t.after=r,t.imports=_.uniq(s).sort(),t},gr=mr;St.register("wgsl_raster_initial_clip",mr);const fr=e=>{let t={};tr(e),Un(e),or(e),hr(e);const i=e.workgroupSize;let n="",r="";const s=[Un,tr,or,hr];return n+=`\n\n\n\n\n\n@group(0) @binding(0)\nvar<uniform> config: RasterStageConfig;\n@group(0) @binding(1)\nvar<uniform> reduce_number: vec4u; \n@group(0) @binding(2)\nvar<storage, read> input_chunk_reduces: array<RasterChunkReduceQuad>;\n@group(0) @binding(3)\nvar<storage, read_write> clipped_chunks: array<RasterClippedChunk>; \n@group(0) @binding(4)\nvar<storage, read_write> output_chunk_reduces: array<RasterChunkReduceQuad>; \n\nvar<workgroup> reduces: array<RasterChunkReduceQuad,${i}>;\n\nvar<workgroup> first_clipped_chunk_index: u32;\n\nvar<workgroup> max_first_reduce_index: atomic<u32>;\n`,r+=`\n\n@compute @workgroup_size(${i})\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n  \n  let num_reduces = select( config.chunk_reduce_0_workgroup_x, config.initial_clip_workgroup_x, reduce_number.x == 0u );\n  let reduce_index = global_id.x;\n  let exists = reduce_index < num_reduces;\n\n  var value = RasterChunkReduceQuad_out_of_range;\n  if ( exists ) {\n    value = input_chunk_reduces[ reduce_index ];\n  }\n\n  \n  let clipped_chunk_index = value.leftMin.bits & RasterChunkReduceData_bits_clipped_chunk_index_mask;\n\n  \n  if ( exists && local_id.x == 0u ) {\n    first_clipped_chunk_index = clipped_chunk_index;\n  }\n\n  reduces[ local_id.x ] = value;\n\n  \n  \n  \n  \n  let applicableMinChunkIndex = select(\n    0xffffffff, \n    value.leftMin.bits & RasterChunkReduceData_bits_clipped_chunk_index_mask,\n    exists && ( ( value.leftMin.bits & RasterChunkReduceData_bits_first_last_mask ) == RasterChunkReduceData_bits_is_last_edge_mask )\n  );\n\n  for ( var i = 0u; i < ${xt(Math.log2(i))}; i++ ) {\n    workgroupBarrier();\n\n    let delta = 1u << i;\n    if ( local_id.x >= delta ) {\n      let otherValue = reduces[ local_id.x - delta ];\n      let oldValue = value;\n\n      value = RasterChunkReduceQuad_combine( otherValue, value );\n\n      \n      \n      \n      \n      if (\n        \n        \n        applicableMinChunkIndex == ( otherValue.rightMin.bits & RasterChunkReduceData_bits_clipped_chunk_index_mask ) &&\n        \n        ( otherValue.rightMin.bits & RasterChunkReduceData_bits_is_first_edge_mask ) != 0u\n      ) {\n        \n        apply_to_clipped_chunk( RasterChunkReduceData_combine( otherValue.rightMin, oldValue.leftMin ) );\n        apply_to_clipped_chunk( RasterChunkReduceData_combine( otherValue.rightMax, oldValue.leftMax ) );\n      }\n    }\n\n    workgroupBarrier();\n    reduces[ local_id.x ] = value;\n  }\n\n  \n  if ( exists && clipped_chunk_index == first_clipped_chunk_index ) {\n    atomicMax( &max_first_reduce_index, local_id.x );\n  }\n  workgroupBarrier(); \n\n  \n  if ( exists && local_id.x == 0 ) {\n    let last_local_index_in_workgroup = min(\n      num_reduces - 1u - workgroup_id.x * ${xt(i)},\n      ${xt(i-1)}\n    );\n\n    let leftValue = reduces[ atomicLoad( &max_first_reduce_index ) ];\n    let rightValue = reduces[ last_local_index_in_workgroup ];\n\n    output_chunk_reduces[ workgroup_id.x ] = RasterChunkReduceQuad(\n      leftValue.leftMin,\n      leftValue.leftMax,\n      rightValue.rightMin,\n      rightValue.rightMax\n    );\n  }\n}\n`,t.before=n,t.after=r,t.imports=_.uniq(s).sort(),t},yr=fr;St.register("wgsl_raster_chunk_reduce",fr);const Er=e=>{let t={};Un(e),sr(e),or(e),cr(e);const i=e.workgroupSize;let n="",r="";const s=[Un,sr,or,cr];return n+="\n\n\n\n\n\n@group(0) @binding(0)\nvar<uniform> config: RasterStageConfig;\n@group(0) @binding(1)\nvar<storage, read> clipped_chunks: array<RasterClippedChunk>;\n@group(0) @binding(2)\nvar<storage, read_write> split_reduces: array<RasterSplitReduceData>; ",e.debugReduceBuffers&&(n+="@group(0) @binding(3)\nvar<storage, read_write> debug_reduces: array<RasterSplitReduceData>;"),n+=`\nvar<workgroup> reduces: array<RasterSplitReduceData,${i}>;\n`,r+=`\n@compute @workgroup_size(${i})\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n  let chunk_index = global_id.x;\n  let exists = chunk_index < config.num_clipped_chunks;\n\n  let clipped_chunk = clipped_chunks[ chunk_index ];\n\n  var value = RasterSplitReduceData_identity;\n  if ( exists ) {\n    value = RasterClippedChunk_get_data( clipped_chunk );\n  }\n\n  reduces[ local_id.x ] = value;\n`,e.debugReduceBuffers&&(r+="  debug_reduces[ global_id.x ] = value;"),r+=`\n  for ( var i = 0u; i < ${xt(Math.log2(i))}; i++ ) {\n    workgroupBarrier();\n\n    let delta = 1u << i;\n    if ( local_id.x >= delta ) {\n      let other = reduces[ local_id.x - delta ];\n      value = RasterSplitReduceData_combine( other, value );\n    }\n\n    workgroupBarrier();\n    reduces[ local_id.x ] = value;\n  }\n\n  if ( local_id.x == ${xt(i-1)} ) {\n    split_reduces[ workgroup_id.x ] = value;\n  }\n}\n`,t.before=n,t.after=r,t.imports=_.uniq(s).sort(),t},vr=Er;St.register("wgsl_raster_initial_split_reduce",Er);const Ar=e=>{let t={};Un(e),Qn(e),sr(e),or(e),cr(e);const i=e.workgroupSize;let n="",r="";const s=[Qn,Un,sr,or,cr];return n+="\n\n\n\n\n\n@group(0) @binding(0)\nvar<uniform> config: RasterStageConfig;\n@group(0) @binding(1)\nvar<storage, read> clipped_chunks: array<RasterClippedChunk>;\n@group(0) @binding(2)\nvar<storage, read> edge_clips: array<RasterEdgeClip>;\n@group(0) @binding(3)\nvar<storage, read_write> edge_reduces: array<RasterSplitReduceData>; ",e.debugReduceBuffers&&(n+="@group(0) @binding(4)\nvar<storage, read_write> debug_reduces: array<RasterSplitReduceData>;"),n+=`\nvar<workgroup> reduces: array<RasterSplitReduceData,${i}>;\n`,r+=`\n@compute @workgroup_size(${i})\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n  let edge_index = global_id.x;\n  let exists = edge_index < config.num_edge_clips;\n\n  let edge_clip = edge_clips[ global_id.x ];\n  let clipped_chunk_index = edge_clip.bits & RasterEdgeClip_bits_clipped_chunk_index_mask;\n  let clipped_chunk = clipped_chunks[ clipped_chunk_index ];\n\n  var value = RasterSplitReduceData_from( edge_clip, clipped_chunk, exists );\n\n  reduces[ local_id.x ] = value;\n`,e.debugReduceBuffers&&(r+="  debug_reduces[ global_id.x ] = value;"),r+=`\n  for ( var i = 0u; i < ${xt(Math.log2(i))}; i++ ) {\n    workgroupBarrier();\n\n    let delta = 1u << i;\n    if ( local_id.x >= delta ) {\n      let other = reduces[ local_id.x - delta ];\n      value = RasterSplitReduceData_combine( other, value );\n    }\n\n    workgroupBarrier();\n    reduces[ local_id.x ] = value;\n  }\n\n  if ( local_id.x == ${xt(i-1)} ) {\n    edge_reduces[ workgroup_id.x ] = value;\n  }\n}\n`,t.before=n,t.after=r,t.imports=_.uniq(s).sort(),t},br=Ar;St.register("wgsl_raster_initial_edge_reduce",Ar);const Sr=e=>{let t={};sr(e),or(e);const i=e.workgroupSize;let n="",r="";const s=[sr,or];return n+=`\n\n\n\n\n\n@group(0) @binding(0)\nvar<uniform> config: RasterStageConfig;\n\n\n\n\n\n@group(0) @binding(1)\nvar<uniform> reduce_number: vec4u; \n\n@group(0) @binding(2)\nvar<storage, read_write> input_reduces: array<RasterSplitReduceData>; \n@group(0) @binding(3)\nvar<storage, read_write> output_reduces: array<RasterSplitReduceData>; \n\nvar<workgroup> reduces: array<RasterSplitReduceData,${i}>;\n`,r+=`\n@compute @workgroup_size(${i})\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n  \n\n  \n  var num_reduces = 0u;\n  if ( reduce_number.x == 0u ) {\n    num_reduces = config.split_reduce_scan_workgroup_x;\n  }\n  else if ( reduce_number.x == 1u ) {\n    num_reduces = config.split_reduce0_workgroup_x;\n  }\n  else if ( reduce_number.x == 2u ) {\n    num_reduces = config.edge_reduce_scan_workgroup_x;\n  }\n  else if ( reduce_number.x == 3u ) {\n    num_reduces = config.edge_reduce0_workgroup_x;\n  }\n\n  let exists = global_id.x < num_reduces;\n\n  var value = RasterSplitReduceData_identity;\n  if ( exists ) {\n    value = input_reduces[ global_id.x ];\n  }\n\n  reduces[ local_id.x ] = value;\n\n  for ( var i = 0u; i < ${xt(Math.log2(i))}; i++ ) {\n    workgroupBarrier();\n\n    let delta = 1u << i;\n    if ( local_id.x >= delta ) {\n      let other = reduces[ local_id.x - delta ];\n      value = RasterSplitReduceData_combine( other, value );\n    }\n\n    workgroupBarrier();\n    reduces[ local_id.x ] = value;\n  }\n\n  let is_last_in_workgroup = local_id.x == ${xt(i-1)};\n\n  if ( is_last_in_workgroup ) {\n    \n    output_reduces[ workgroup_id.x ] = value;\n    input_reduces[ global_id.x ] = RasterSplitReduceData_identity;\n  }\n  else {\n    input_reduces[ global_id.x ] = value;\n  }\n}\n`,t.before=n,t.after=r,t.imports=_.uniq(s).sort(),t},_r=Sr;St.register("wgsl_raster_split_reduce",Sr);const xr=e=>{let t={};Hn(e),Fn(e),Un(e),nr(e),sr(e),or(e),cr(e);const i=e.workgroupSize;let n="",r="";const s=[sr,Un,Fn,nr,or,cr,Hn];return n+="\n\n\n\n\n\n@group(0) @binding(0)\nvar<uniform> config: RasterStageConfig;\n@group(0) @binding(1)\nvar<storage, read> clipped_chunks: array<RasterClippedChunk>;\n@group(0) @binding(2)\nvar<storage, read> split_reduces0: array<RasterSplitReduceData>;\n@group(0) @binding(3)\nvar<storage, read> split_reduces1: array<RasterSplitReduceData>;\n@group(0) @binding(4)\nvar<storage, read> split_reduces2: array<RasterSplitReduceData>;\n@group(0) @binding(5)\nvar<storage, read_write> reducible_chunks: array<RasterChunk>;\n@group(0) @binding(6)\nvar<storage, read_write> complete_chunks: array<RasterCompleteChunk>;\n@group(0) @binding(7)\nvar<storage, read_write> chunk_index_map: array<u32>;",e.debugReduceBuffers&&(n+="@group(0) @binding(8)\nvar<storage, read_write> debug_reduces: array<RasterSplitReduceData>;"),n+=`\nvar<workgroup> reduces: array<RasterSplitReduceData,${i}>;\nvar<workgroup> base_reducible_value: u32;\nvar<workgroup> base_complete_value: u32;\n`,r+=`\n@compute @workgroup_size(${i})\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n  let clipped_chunk_index = global_id.x;\n  let exists = clipped_chunk_index < config.num_clipped_chunks;\n\n  if ( local_id.x == 0u ) {\n    \n    let indices = inclusive_to_exclusive_scan_indices( clipped_chunk_index, ${xt(i)} );\n\n    var baseReducible = 0u;\n    var baseComplete = 0u;\n\n    if ( indices.x >= 0i ) {\n      let reduce = split_reduces0[ indices.x ];\n      baseReducible += reduce.numReducible;\n      baseComplete += reduce.numComplete;\n    }\n    if ( indices.y >= 0i ) {\n      let reduce = split_reduces1[ indices.y ];\n      baseReducible += reduce.numReducible;\n      baseComplete += reduce.numComplete;\n    }\n    if ( indices.z >= 0i ) {\n      \n      let reduce = split_reduces2[ indices.z ];\n      baseReducible += reduce.numReducible;\n      baseComplete += reduce.numComplete;\n    }\n\n    base_reducible_value = baseReducible;\n    base_complete_value = baseComplete;\n\n    \n  }\n\n  let clipped_chunk = clipped_chunks[ clipped_chunk_index ];\n\n  var initialValue = RasterSplitReduceData_identity;\n  if ( exists ) {\n    initialValue = RasterClippedChunk_get_data( clipped_chunk );\n  }\n  var value = initialValue;\n\n  reduces[ local_id.x ] = value;\n\n  for ( var i = 0u; i < ${xt(Math.log2(i))}; i++ ) {\n    workgroupBarrier();\n    let delta = 1u << i;\n\n    if ( local_id.x >= delta ) {\n      let other = reduces[ local_id.x - delta ];\n      value = RasterSplitReduceData_combine( other, value );\n    }\n\n    workgroupBarrier();\n    reduces[ local_id.x ] = value;\n  }\n`,e.debugReduceBuffers&&(r+="  debug_reduces[ clipped_chunk_index ] = value;"),r+="\n  if ( exists ) {\n    var baseIndex = 0u; \n\n    let is_reducible = ( clipped_chunk.bits & RasterClippedChunk_bits_is_reducible_mask ) != 0u;\n    if ( is_reducible ) {\n\n      \n      baseIndex = base_reducible_value + value.numReducible - initialValue.numReducible;\n\n      chunk_index_map[ clipped_chunk_index ] = baseIndex;\n\n      reducible_chunks[ baseIndex ] = RasterChunk(\n        clipped_chunk.bits & RasterChunk_bits_full_mask,\n        0u, \n        0u, \n        clipped_chunk.minX, clipped_chunk.minY, clipped_chunk.maxX, clipped_chunk.maxY,\n        clipped_chunk.minXCount, clipped_chunk.minYCount, clipped_chunk.maxXCount, clipped_chunk.maxYCount\n      );\n    }\n\n    let is_complete = ( clipped_chunk.bits & RasterClippedChunk_bits_is_complete_mask ) != 0u;\n    if ( is_complete ) {\n      \n      baseIndex = base_complete_value + value.numComplete - initialValue.numComplete;\n\n      chunk_index_map[ clipped_chunk_index ] = baseIndex;\n\n      if ( RasterClippedChunk_needs_complete_output_split( clipped_chunk ) ) {\n        \n        let count = RasterClippedChunk_get_output_split_count( clipped_chunk );\n        let width = u32( round( clipped_chunk.maxX - clipped_chunk.minX ) ); \n\n        for ( var i = 0u; i < count; i++ ) {\n          let x = clipped_chunk.minX + f32( i % width );\n          let y = clipped_chunk.minY + f32( i / width );\n\n          complete_chunks[ baseIndex + i ] = RasterCompleteChunk(\n            clipped_chunk.bits & RasterCompleteChunk_bits_full_mask,\n            0u, \n            0u, \n            1.0, \n            x, y, x + 1.0, y + 1.0,\n            -1i, 1i, 1i, -1i\n          );\n        }\n      }\n      else {\n        complete_chunks[ baseIndex ] = RasterCompleteChunk(\n          clipped_chunk.bits & RasterCompleteChunk_bits_full_mask,\n          0u, \n          0u, \n          clipped_chunk.area,\n          clipped_chunk.minX, clipped_chunk.minY, clipped_chunk.maxX, clipped_chunk.maxY,\n          clipped_chunk.minXCount, clipped_chunk.minYCount, clipped_chunk.maxXCount, clipped_chunk.maxYCount\n        );\n      }\n    }\n  }\n}\n",t.before=n,t.after=r,t.imports=_.uniq(s).sort(),t},wr=xr;St.register("wgsl_raster_split_scan",xr);const Tr=e=>{let t={};Hn(e),Un(e),kn(e),Xn(e),Qn(e),sr(e),or(e),cr(e);const i=e.workgroupSize;let n="",r="";const s=[Un,Qn,sr,Xn,kn,or,cr,Hn];return n+=`\n\n\n\n\n\n@group(0) @binding(0)\nvar<uniform> config: RasterStageConfig;\n@group(0) @binding(1)\nvar<storage, read> clipped_chunks: array<RasterClippedChunk>;\n@group(0) @binding(2)\nvar<storage, read> edge_clips: array<RasterEdgeClip>;\n@group(0) @binding(3)\nvar<storage, read> edge_reduces0: array<RasterSplitReduceData>;\n@group(0) @binding(4)\nvar<storage, read> edge_reduces1: array<RasterSplitReduceData>;\n@group(0) @binding(5)\nvar<storage, read> edge_reduces2: array<RasterSplitReduceData>;\n@group(0) @binding(6)\nvar<storage, read_write> reducible_edges: array<RasterEdge>;\n@group(0) @binding(7)\nvar<storage, read_write> complete_edges: array<RasterCompleteEdge>;\n@group(0) @binding(8)\nvar<storage, read_write> chunk_indices: array<u32>;\n\n\nvar<workgroup> reduces: array<RasterSplitReduceData,${i}>;\nvar<workgroup> base_reducible_value: u32;\nvar<workgroup> base_complete_value: u32;\n`,r+=`\n@compute @workgroup_size(${i})\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n  let edge_clip_index = global_id.x;\n  let exists = edge_clip_index < config.num_edge_clips;\n  if ( local_id.x == 0u ) {\n    \n    let indices = inclusive_to_exclusive_scan_indices( edge_clip_index, ${xt(i)} );\n\n    var baseReducible = 0u;\n    var baseComplete = 0u;\n\n    if ( indices.x >= 0i ) {\n      let reduce = edge_reduces0[ indices.x ];\n      baseReducible += reduce.numReducible;\n      baseComplete += reduce.numComplete;\n    }\n    if ( indices.y >= 0i ) {\n      let reduce = edge_reduces1[ indices.y ];\n      baseReducible += reduce.numReducible;\n      baseComplete += reduce.numComplete;\n    }\n    if ( indices.z >= 0i ) {\n      \n      let reduce = edge_reduces2[ indices.z ];\n      baseReducible += reduce.numReducible;\n      baseComplete += reduce.numComplete;\n    }\n\n    base_reducible_value = baseReducible;\n    base_complete_value = baseComplete;\n\n    \n  }\n\n  let edge_clip = edge_clips[ global_id.x ];\n  let clipped_chunk_index = edge_clip.bits & RasterEdgeClip_bits_clipped_chunk_index_mask;\n  let clipped_chunk = clipped_chunks[ clipped_chunk_index ];\n\n  let initialValue = RasterSplitReduceData_from( edge_clip, clipped_chunk, exists );\n  var value = initialValue;\n\n  reduces[ local_id.x ] = value;\n\n  for ( var i = 0u; i < ${xt(Math.log2(i))}; i++ ) {\n    workgroupBarrier();\n\n    let delta = 1u << i;\n    if ( local_id.x >= delta ) {\n      let other = reduces[ local_id.x - delta ];\n      value = RasterSplitReduceData_combine( other, value );\n    }\n\n    workgroupBarrier();\n    reduces[ local_id.x ] = value;\n  }\n\n  if ( exists ) {\n    \n\n\n\n\n\n    var edgeStarts: array<vec2f,3>;\n    var edgeEnds: array<vec2f,3>;\n\n    var index = 0u;\n    if ( edge_clip.p0x != edge_clip.p1x || edge_clip.p0y != edge_clip.p1y ) {\n      edgeStarts[ index ] = vec2( edge_clip.p0x, edge_clip.p0y );\n      edgeEnds[ index ] = vec2( edge_clip.p1x, edge_clip.p1y );\n      index++;\n    }\n    if ( edge_clip.p1x != edge_clip.p2x || edge_clip.p1y != edge_clip.p2y ) {\n      edgeStarts[ index ] = vec2( edge_clip.p1x, edge_clip.p1y );\n      edgeEnds[ index ] = vec2( edge_clip.p2x, edge_clip.p2y );\n      index++;\n    }\n    if ( edge_clip.p2x != edge_clip.p3x || edge_clip.p2y != edge_clip.p3y ) {\n      edgeStarts[ index ] = vec2( edge_clip.p2x, edge_clip.p2y );\n      edgeEnds[ index ] = vec2( edge_clip.p3x, edge_clip.p3y );\n      index++;\n    }\n\n    let has_reducible_vertices = ( clipped_chunk.bits & RasterClippedChunk_bits_is_reducible_mask ) != 0u;\n    let has_complete_vertices = RasterClippedChunk_is_exporting_complete_edges( clipped_chunk );\n    var base_index = 0u; \n\n    if ( has_reducible_vertices ) {\n      \n      base_index = base_reducible_value + value.numReducible - initialValue.numReducible;\n\n      \n      if ( index > 0u ) {\n        reducible_edges[ base_index ] = RasterEdge(\n          clipped_chunk_index,\n\n          \n          edgeStarts[ 0u ].x,\n          edgeStarts[ 0u ].y,\n          edgeEnds[ 0u ].x,\n          edgeEnds[ 0u ].y\n        );\n        if ( index > 1 ) {\n          reducible_edges[ base_index + 1u ] = RasterEdge(\n            clipped_chunk_index,\n            edgeStarts[ 1u ].x,\n            edgeStarts[ 1u ].y,\n            edgeEnds[ 1u ].x,\n            edgeEnds[ 1u ].y\n          );\n          if ( index > 2 ) {\n            reducible_edges[ base_index + 2u ] = RasterEdge(\n              clipped_chunk_index,\n              edgeStarts[ 2u ].x,\n              edgeStarts[ 2u ].y,\n              edgeEnds[ 2u ].x,\n              edgeEnds[ 2u ].y\n            );\n          }\n        }\n      }\n    }\n\n    \n    if ( has_complete_vertices ) {\n      \n      base_index = base_complete_value + value.numComplete - initialValue.numComplete;\n\n      if ( index > 0u ) {\n        complete_edges[ base_index ] = RasterCompleteEdge(\n          edgeStarts[ 0u ].x,\n          edgeStarts[ 0u ].y,\n          edgeEnds[ 0u ].x,\n          edgeEnds[ 0u ].y\n        );\n        if ( index > 1 ) {\n          complete_edges[ base_index + 1u ] = RasterCompleteEdge(\n            edgeStarts[ 1u ].x,\n            edgeStarts[ 1u ].y,\n            edgeEnds[ 1u ].x,\n            edgeEnds[ 1u ].y\n          );\n          if ( index > 2 ) {\n            complete_edges[ base_index + 2u ] = RasterCompleteEdge(\n              edgeStarts[ 2u ].x,\n              edgeStarts[ 2u ].y,\n              edgeEnds[ 2u ].x,\n              edgeEnds[ 2u ].y\n            );\n          }\n        }\n      }\n    }\n\n    \n    \n    if ( has_reducible_vertices || has_complete_vertices ) {\n      let is_first_edge = ( edge_clip.bits & RasterEdgeClip_bits_is_first_edge_mask ) != 0u;\n      if ( is_first_edge ) {\n        chunk_indices[ 2u * clipped_chunk_index ] = base_index;\n      }\n\n      let is_last_edge = ( edge_clip.bits & RasterEdgeClip_bits_is_last_edge_mask ) != 0u;\n      if ( is_last_edge ) {\n        chunk_indices[ 2u * clipped_chunk_index + 1u ] = base_index + index;\n      }\n    }\n  }\n}\n`,t.before=n,t.after=r,t.imports=_.uniq(s).sort(),t},Pr=Tr;St.register("wgsl_raster_edge_scan",Tr);const Cr=e=>{let t={};Fn(e),Un(e),nr(e),or(e);const i=e.workgroupSize;let n="",r="";const s=[or,Un,Fn,nr];return n+="\n\n\n\n\n\n@group(0) @binding(0)\nvar<uniform> config: RasterStageConfig;\n@group(0) @binding(1)\nvar<storage, read> chunk_index_map: array<u32>;\n@group(0) @binding(2)\nvar<storage, read> chunk_indices: array<u32>;\n@group(0) @binding(3)\nvar<storage, read> clipped_chunks: array<RasterClippedChunk>;\n@group(0) @binding(4)\nvar<storage, read_write> reducible_chunks: array<RasterChunk>;\n@group(0) @binding(5)\nvar<storage, read_write> complete_chunks: array<RasterCompleteChunk>;\n",r+=`\n@compute @workgroup_size(${i})\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n  let clipped_chunk_index = global_id.x;\n  let exists = clipped_chunk_index < config.num_clipped_chunks;\n\n  if ( exists ) {\n    let clipped_chunk = clipped_chunks[ clipped_chunk_index ];\n    let output_chunk_index = chunk_index_map[ clipped_chunk_index ];\n\n    let startIndex = chunk_indices[ 2u * clipped_chunk_index ];\n    let endIndex = chunk_indices[ 2u * clipped_chunk_index + 1u ];\n\n    let is_reducible = ( clipped_chunk.bits & RasterClippedChunk_bits_is_reducible_mask ) != 0u;\n    if ( is_reducible ) {\n      let chunk = reducible_chunks[ output_chunk_index ];\n      reducible_chunks[ output_chunk_index ] = RasterChunk(\n        chunk.bits,\n        startIndex,\n        endIndex - startIndex,\n        chunk.minX, chunk.minY, chunk.maxX, chunk.maxY,\n        chunk.minXCount, chunk.minYCount, chunk.maxXCount, chunk.maxYCount\n      );\n    }\n\n    let is_complete = ( clipped_chunk.bits & RasterClippedChunk_bits_is_complete_mask ) != 0u;\n    if ( is_complete ) {\n      let chunk = complete_chunks[ output_chunk_index ];\n      let needs_face = ( clipped_chunk.bits & RasterClippedChunk_bits_needs_face_mask ) != 0u;\n      let is_full_area = ( chunk.bits & RasterCompleteChunk_bits_is_full_area_mask ) != 0u;\n      complete_chunks[ output_chunk_index ] = RasterCompleteChunk(\n        chunk.bits & RasterCompleteChunk_bits_full_mask,\n        select( 0u, startIndex, needs_face && !is_full_area ),\n        select( 0u, endIndex - startIndex, needs_face && !is_full_area ),\n        chunk.area,\n        chunk.minX, chunk.minY, chunk.maxX, chunk.maxY,\n        chunk.minXCount, chunk.minYCount, chunk.maxXCount, chunk.maxYCount\n      );\n    }\n  }\n}\n`,t.before="\n\n\n\n\n\n@group(0) @binding(0)\nvar<uniform> config: RasterStageConfig;\n@group(0) @binding(1)\nvar<storage, read> chunk_index_map: array<u32>;\n@group(0) @binding(2)\nvar<storage, read> chunk_indices: array<u32>;\n@group(0) @binding(3)\nvar<storage, read> clipped_chunks: array<RasterClippedChunk>;\n@group(0) @binding(4)\nvar<storage, read_write> reducible_chunks: array<RasterChunk>;\n@group(0) @binding(5)\nvar<storage, read_write> complete_chunks: array<RasterCompleteChunk>;\n",t.after=r,t.imports=_.uniq(s).sort(),t},Vr=Cr;St.register("wgsl_raster_chunk_index_patch",Cr);const Rr=e=>{let t={};sr(e),or(e);const i=e.workgroupSize;let n="",r="";const s=[or,sr];return n+="\n\n\n\n\n\n@group(0) @binding(0)\nvar<storage, read> split_reduces: array<RasterSplitReduceData>;\n@group(0) @binding(1)\nvar<storage, read> edge_reduces: array<RasterSplitReduceData>;\n@group(0) @binding(2)\nvar<storage, read_write> config: RasterStageConfig;\n",r+=`\nfn divide_round_up( a: u32, b: u32 ) -> u32 {\n  return ( a + b - 1u ) / b;\n}\n\n@compute @workgroup_size(1)\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n  let split_reduce = split_reduces[ 0u ];\n  let edge_reduce = edge_reduces[ 0u ];\n\n  let num_reducible_chunks = split_reduce.numReducible;\n  let num_complete_chunks = split_reduce.numComplete;\n  let num_reducible_edges = edge_reduce.numReducible;\n  let num_complete_edges = edge_reduce.numComplete;\n\n  \n  let num_input_chunks = num_reducible_chunks;\n  let num_input_edges = num_reducible_edges;\n  let num_clipped_chunks = 2u * num_input_chunks;\n  let num_edge_clips = 2u * num_input_edges;\n\n  let workgroup_size = ${xt(i)};\n\n  \n  config = RasterStageConfig(\n    \n    divide_round_up( num_input_chunks, workgroup_size ), 1u, 1u,\n\n    \n    divide_round_up( num_input_edges, workgroup_size ), 1u, 1u,\n\n    \n    divide_round_up( num_input_edges, workgroup_size * workgroup_size ), 1u, 1u,\n\n    \n    divide_round_up( num_input_edges, workgroup_size * workgroup_size * workgroup_size ), 1u, 1u,\n\n    \n    divide_round_up( num_clipped_chunks, workgroup_size ), 1u, 1u,\n\n    \n    divide_round_up( num_edge_clips, workgroup_size ), 1u, 1u,\n\n    \n    divide_round_up( num_clipped_chunks, workgroup_size * workgroup_size ), 1u, 1u,\n\n    \n    divide_round_up( num_clipped_chunks, workgroup_size * workgroup_size * workgroup_size ), 1u, 1u,\n\n    \n    divide_round_up( num_edge_clips, workgroup_size * workgroup_size ), 1u, 1u,\n\n    \n    divide_round_up( num_edge_clips, workgroup_size * workgroup_size * workgroup_size ), 1u, 1u,\n\n    \n    divide_round_up( num_complete_chunks, workgroup_size ), 1u, 1u,\n\n    num_input_chunks,\n    num_input_edges,\n\n    num_clipped_chunks,\n    num_edge_clips,\n\n    num_reducible_chunks,\n    num_complete_chunks,\n    num_reducible_edges,\n    num_complete_edges,\n\n    config.raster_width,\n    config.raster_height,\n    config.raster_offset_x,\n    config.raster_offset_y,\n    config.raster_color_space\n  );\n}\n`,t.before="\n\n\n\n\n\n@group(0) @binding(0)\nvar<storage, read> split_reduces: array<RasterSplitReduceData>;\n@group(0) @binding(1)\nvar<storage, read> edge_reduces: array<RasterSplitReduceData>;\n@group(0) @binding(2)\nvar<storage, read_write> config: RasterStageConfig;\n",t.after=r,t.imports=_.uniq(s).sort(),t},Nr=Rr;St.register("wgsl_raster_uniform_update",Rr);const Mr=e=>{let t={};Xn(e),or(e);const i=e.workgroupSize;let n="",r="";const s=[or,Xn];return n+="\n\n\n\n\n\n@group(0) @binding(0)\nvar<uniform> config: RasterStageConfig;\n@group(0) @binding(1)\nvar<storage, read> chunk_index_map: array<u32>;\n@group(0) @binding(2)\nvar<storage, read> chunk_indices: array<u32>;\n@group(0) @binding(3)\nvar<storage, read_write> reducible_edges: array<RasterEdge>;\n",r+=`\n@compute @workgroup_size(${i})\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n  let edge_index = global_id.x;\n  let exists = edge_index < config.num_reducible_edges;\n\n  if ( exists ) {\n    let edge = reducible_edges[ edge_index ];\n    let clipped_chunk_index = edge.bits & RasterEdge_bits_chunk_index_mask;\n\n    let output_chunk_index = chunk_index_map[ clipped_chunk_index ];\n\n    let startIndex = chunk_indices[ 2u * clipped_chunk_index ];\n    let endIndex = chunk_indices[ 2u * clipped_chunk_index + 1u ];\n\n    reducible_edges[ edge_index ] = RasterEdge(\n      output_chunk_index |\n      select( 0u, RasterEdge_bits_is_first_edge_mask, edge_index == startIndex ) |\n      select( 0u, RasterEdge_bits_is_last_edge_mask, edge_index == endIndex - 1u ),\n      edge.startX,\n      edge.startY,\n      edge.endX,\n      edge.endY\n    );\n  }\n}\n`,t.before="\n\n\n\n\n\n@group(0) @binding(0)\nvar<uniform> config: RasterStageConfig;\n@group(0) @binding(1)\nvar<storage, read> chunk_index_map: array<u32>;\n@group(0) @binding(2)\nvar<storage, read> chunk_indices: array<u32>;\n@group(0) @binding(3)\nvar<storage, read_write> reducible_edges: array<RasterEdge>;\n",t.after=r,t.imports=_.uniq(s).sort(),t},kr=Mr;St.register("wgsl_raster_edge_index_patch",Mr);const Lr=e=>{let t={};qn(e),nr(e),kn(e),or(e);const i=e.integerScale,n=e.workgroupSize;let r="",s="";const a=[or,nr,kn,qn];return r+="\n\n\n\n\n\n@group(0) @binding(0)\nvar<uniform> config: RasterStageConfig;\n@group(0) @binding(1)\nvar<storage, read> render_program_instructions: array<u32>;\n@group(0) @binding(2)\nvar<storage, read> complete_chunks: array<RasterCompleteChunk>;\n@group(0) @binding(3)\nvar<storage, read> complete_edges: array<RasterCompleteEdge>;\n@group(0) @binding(4)\nvar<storage, read_write> accumulation: array<atomic<i32>>;",e.debugAccumulation&&(r+="@group(0) @binding(5)\nvar<storage, read_write> debug_accumulation: array<i32>;"),r+="",s+=`\n@compute @workgroup_size(${n})\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n  \n\n  if ( global_id.x >= config.num_complete_chunks ) {\n    return;\n  }\n\n  let chunk = complete_chunks[ global_id.x ];\n\n  let render_program_index = chunk.bits & RasterCompleteChunk_bits_raster_program_index_mask;\n  let is_full_area = ( chunk.bits & RasterCompleteChunk_bits_is_full_area_mask ) != 0u;\n  let needs_face = ( chunk.bits & RasterCompleteChunk_bits_needs_face_mask ) != 0u;\n  let area = chunk.area;\n\n  \n  let minX = clamp( i32( round( chunk.minX + f32( config.raster_offset_x ) ) ), 0i, i32( config.raster_width ) );\n  let minY = clamp( i32( round( chunk.minY + f32( config.raster_offset_y ) ) ), 0i, i32( config.raster_height ) );\n  let maxX = clamp( i32( round( chunk.maxX + f32( config.raster_offset_x ) ) ), 0i, i32( config.raster_width ) );\n  let maxY = clamp( i32( round( chunk.maxY + f32( config.raster_offset_y ) ) ), 0i, i32( config.raster_height ) );\n\n  if ( minX >= maxX || minY >= maxY ) {\n    return;\n  }\n\n  \n  if ( minX < maxX - 0xffffi || minY < maxY - 0xffffi ) {\n    return;\n  }\n`,e.debugAccumulation&&(s+="  \n  debug_accumulation[ global_id.x ] = 6i;"),s+=`\n  \n  let pixel_area = select( area, 1.0f, is_full_area );\n\n  let color = evaluate_render_program_instructions(\n    render_program_index,\n    chunk.edgesOffset,\n    chunk.numEdges,\n    is_full_area,\n    needs_face,\n    area,\n    chunk.minX,\n    chunk.minY,\n    chunk.maxX,\n    chunk.maxY,\n    chunk.minXCount,\n    chunk.minYCount,\n    chunk.maxXCount,\n    chunk.maxYCount\n  );\n\n  let integer_color = vec4<i32>( round( color * ${Nt(i)} * pixel_area ) );\n\n  for ( var y = minY; y < maxY; y += 1i ) {\n    for ( var x = minX; x < maxX; x += 1i ) {\n      let pixel_index = 4u * ( config.raster_width * u32( y ) + u32( x ) );\n\n      atomicAdd( &accumulation[ pixel_index ], integer_color.r );\n      atomicAdd( &accumulation[ pixel_index + 1u ], integer_color.g );\n      atomicAdd( &accumulation[ pixel_index + 2u ], integer_color.b );\n      atomicAdd( &accumulation[ pixel_index + 3u ], integer_color.a );\n    }\n  }\n}\n`,t.before=r,t.after=s,t.imports=_.uniq(a).sort(),t},Ir=Lr;St.register("wgsl_raster_accumulate",Lr);const Br=e=>{let t={};bn(e),vn(e),nn(e),sn(e),on(e),or(e);const i=e.integerScale,n=e.preferredStorageFormat;let r="",s="";const a=[nn,bn,vn,nn,sn,on,or];return r+=`\n\n\n\n\n\n@group(0) @binding(0)\nvar<uniform> config: RasterStageConfig;\n@group(0) @binding(1)\nvar<storage, read> accumulation: array<i32>;\n@group(0) @binding(2)\nvar output: texture_storage_2d<${n}, write>;\n`,s+=`\n@compute @workgroup_size(16, 16)\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n  if ( global_id.x >= config.raster_width || global_id.y >= config.raster_height ) {\n    return;\n  }\n\n  let accumulation_index = 4u * ( global_id.x + global_id.y * config.raster_width );\n  let accumulation_value = vec4(\n    accumulation[ accumulation_index ],\n    accumulation[ accumulation_index + 1u ],\n    accumulation[ accumulation_index + 2u ],\n    accumulation[ accumulation_index + 3u ]\n  );\n\n  let linear_unmapped_color = unpremultiply( vec4<f32>( accumulation_value ) * vec4( ${Nt(1/i)} ) );\n\n  var output_color = vec4( 0f );\n  if ( linear_unmapped_color.a > 1e-8f ) {\n    switch ( config.raster_color_space ) {\n      case 0u: {\n        output_color = vec4(\n          linear_sRGB_to_sRGB( gamut_map_linear_sRGB( linear_unmapped_color.rgb ) ),\n          min( 1f, linear_unmapped_color.a )\n        );\n      }\n      case 1u: {\n        output_color = vec4(\n          linear_sRGB_to_sRGB( gamut_map_linear_displayP3( linear_unmapped_color.rgb ) ),\n          min( 1f, linear_unmapped_color.a )\n        );\n      }\n      default: {\n        output_color = vec4( 1f, 0.5f, 0.111111, 1f );\n      }\n    }\n  }\n\n  textureStore( output, global_id.xy, premultiply( output_color ) );\n}\n`,t.before=r,t.after=s,t.imports=_.uniq(a).sort(),t},Dr=Br;St.register("wgsl_raster_to_texture",Br);const Or=e=>{let t={};let i="";var n;return i+=`\n\n\n\n${n=(e,t,i,n,r)=>t?`${e} = ${t(n,r)};`:i?`\n      ${i(e,n,r)}\n    `:void 0,t=n,""}\n`,t.before=i,t.after="",t.imports=_.uniq([]).sort(),t},qr=Or;St.register("wgsl_binary_expression_statement",Or);const Yr=e=>{let t={};let i="";var n;return i+=`\n\n\n\n${n=e=>"/*** "+e+" ***/",t=n,""}\n`,t.before=i,t.after="",t.imports=_.uniq([]).sort(),t},Hr=Yr;St.register("wgsl_comment",Yr);const Gr=e=>{let t={};let i="";var n;return i+=`\n\n\n\n${n=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return null===e?t:`\n      if ( ${e} ) {\n        ${t}\n      }\n      ${null!==i?`\n        else {\n          ${i}\n        }\n      `:""}\n    `},t=n,""}\n`,t.before=i,t.after="",t.imports=_.uniq([]).sort(),t},Fr=Gr;St.register("wgsl_conditional_if",Gr);const zr=e=>{let t={};let i="";var n;return i+=`\n\n\n\n${n=(e,t,i)=>_.range(e,t).map(n=>i(n,n===e,n===t+(e<t?-1:1))).join("\n"),t=n,""}\n`,t.before=i,t.after="",t.imports=_.uniq([]).sort(),t},Ur=zr;St.register("wgsl_unroll",zr);const Wr=e=>{let t={};const i=qr(e),n=Hr(e),r=Fr(e),s=Ur(e);let a="";const o=[Fr,Ur,Hr,qr];var l;return a+=`\n\n\n\n\n\n\n\n\n\n\n${l=e=>{let{value:t,valueType:a,loadExpression:o,loadStatements:l,identity:h,combineExpression:u,combineStatements:c,workgroupSize:d,grainSize:p,globalIndex:m="global_id.x",workgroupIndex:g="workgroup_id.x",localIndex:f="local_id.x",length:y=null,inputOrder:E=null,inputAccessOrder:v,factorOutSubexpressions:A=!0,nestSubexpressions:b=!1,useSelectIfOptional:S=!1}=e,_=[],x=[],w=null,T=null;if("blocked"===v)A?(_.push(`let base_blocked_index = ${xt(p)} * ${m};`),x.push(e=>`let blocked_index = base_blocked_index + ${xt(e)};`),w=e=>"blocked_index",null!==y&&(T=w)):(w=e=>`${xt(p)} * ${m} + ${xt(e)}`,null!==y&&(T=w));else{if("striped"!==v)throw new Error("Unrecognized inputAccessOrder: "+v);if(A){if("striped"===E&&y?(_.push(`let base_workgroup = ${g} * ${xt(d*p)};`),_.push(`let base_striped_index = base_workgroup + ${f};`),_.push(`let base_blocked_index = base_workgroup + ${f} * ${xt(p)};`)):_.push(`let base_striped_index = ${g} * ${xt(d*p)} + ${f};`),x.push(e=>`let striped_index = base_striped_index + ${xt(e*d)};`),w=e=>"striped_index",null!==y)if("striped"===E)T=e=>"base_blocked_index + "+xt(e);else{if("blocked"!==E)throw new Error("Unrecognized inputOrder: "+E);T=w}}else if(w=e=>`${g} * ${xt(d*p)} + ${f} + ${xt(e*d)}`,null!==y)if("striped"===E)T=e=>`${g} * ${xt(d*p)} + ${f} * ${xt(p)} + ${xt(e)}`;else{if("blocked"!==E)throw new Error("Unrecognized inputOrder: "+E);T=w}}const P=e=>T?`select( ${h}, ${o(w(e))}, ${T(e)} < ${y} )`:o(w(e)),C=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return r(T?`${T(e)} < ${y}`:null,t,i)},V=(e,t,i)=>o?`\n    ${i?i+" ":""}${e} = ${o(w(t))};\n  `:`\n    ${i?`\n      var ${e}: ${a};\n    `:""}\n    ${l(e,w(t))}\n  `,R=e=>0===e?P(0):u(R(e-1),P(e)),N=(e,t,n)=>i(e,u,c,t,n);return b?`\n    var ${t} = ${R(p-1)};\n  `:`\n    ${n("begin load_reduced")}\n    var ${t}: ${a};\n    {\n      ${_.join("\n")}\n      {\n        ${x.map(e=>e(0)).join("\n")}\n        ${o&&S?`\n          ${t} = ${P(0)};\n        `:`\n          ${((e,t)=>C(t,`\n    ${V(e,t)}\n  `,`\n    ${e} = ${h};\n  `))(t,0)}\n        `}\n      }\n      ${s(1,p,e=>`\n        {\n          ${x.map(t=>t(e)).join("\n")}\n          ${o&&S?`\n            ${N(t,t,P(e))}\n          `:`\n            ${C(e,`\n              ${V("next_value",e,"let")}\n              ${N(t,t,"next_value")}\n            `)}\n          `}\n        }\n      `)}\n    }\n    ${n("end load_reduced")}\n  `},t=l,""}\n`,t.before=a,t.after="",t.imports=_.uniq(o).sort(),t},Xr=Wr;St.register("wgsl_load_reduced",Wr);const jr=e=>{let t={};const i=qr(e),n=Hr(e),r=Ur(e);let s="";const a=[Hr,Ur,qr];var o;return s+=`\n\n\n\n\n${o=e=>{let{value:t,scratch:s,workgroupSize:a,identity:o,combineExpression:l,combineStatements:h,localIndex:u="local_id.x",mapScratchIndex:c=_.identity,convergent:d=!1,scratchPreloaded:p=!1,valuePreloaded:m=!0}=e;const g=d?Math.log2(a):0,f=d?0:Math.log2(a);return`\n    ${n("begin reduce convergent:"+d)}\n    ${p?"":`\n      ${s}[ ${c(u)} ] = ${t};\n    `}\n    ${m?"":`\n      ${t} = ${s}[ ${c(u)} ];\n    `}\n\n    ${r(g,f,(e,n,r)=>`\n      \n      ${p&&n?"":"\n        workgroupBarrier();\n      "}\n\n      \n      if ( ${(e=>d?`${u} < ${xt(1<<e-1)}`:`${u} % ${xt(1<<e+1)} == 0u`)(e)} ) {\n        ${((e,t,n)=>i(e,l,h,t,n))(t,t,`${s}[ ${c((e=>d?`${u} + ${xt(1<<e-1)}`:`${u} + ${xt(1<<e)}`)(e))} ]`)}\n\n        ${r?"":`\n          ${s}[ ${c(u)} ] = ${t};\n        `}\n      }\n    `)}\n    ${n("end reduce")}\n  `},t=o,""}\n`,t.before=s,t.after="",t.imports=_.uniq(a).sort(),t},Qr=jr;St.register("wgsl_reduce",jr);const Kr=e=>{let t={};Ur(e);let i="";const n=[Ur];var r;return i+=`\n\n\n\n\n${r=e=>{let{i:t,size:i}=e;return`( reverseBits( ${t} ) >> ${xt(32-Math.log2(i))} )`},t=r,""}\n`,t.before=i,t.after="",t.imports=_.uniq(n).sort(),t},Zr=Kr;St.register("wgsl_get_convergent_index",Kr);const Jr=e=>{let t={};const i=Zr(e);let n="";const r=[Zr];var s;return n+=`\n\n\n\n\n${s=e=>{let{i:t,size:n}=e;const r=n-1;return`( ( ${t} & ${Tt(4294967295-r)} ) | ${i({i:`( ${t} & ${Tt(r)} )`,size:n})} )`},t=s,""}\n`,t.before=n,t.after="",t.imports=_.uniq(r).sort(),t},$r=Jr;St.register("wgsl_from_convergent_index",Jr);const es=e=>{let t={};const i=$r(e);let n="";const r=[$r];var s;return n+=`\n\n\n\n\n${s=e=>{let{i:t,size:n}=e;return i({i:t,size:n})},t=s,""}\n`,t.before=n,t.after="",t.imports=_.uniq(r).sort(),t},ts=es;St.register("wgsl_to_convergent_index",es);const is=e=>{let t={};const i=Xr(e),n=Qr(e),r=ts(e),s=e.combineExpression,a=e.combineStatements,o=e.convergent,l=e.convergentRemap,h=e.grainSize,u=e.identity,c=e.inputAccessOrder,d=e.inputOrder,p=e.length,m=e.valueType,g=e.workgroupSize;let f="",y="";const E=[Qr,Xr,ts];return f+=`\n\n\n\n\n\n\n\n\n@group(0) @binding(0)\nvar<storage> input: array<${m}>;\n@group(0) @binding(1)\nvar<storage, read_write> output: array<${m}>;\n\nvar<workgroup> scratch: array<${m}, ${g}>;\n`,y+=`\n@compute @workgroup_size(${g})\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n  ${i({value:"value",valueType:m,loadExpression:e=>`input[ ${e} ]`,identity:u,combineExpression:s,combineStatements:a,workgroupSize:g,grainSize:h,length:p,inputOrder:d,inputAccessOrder:c})}\n\n  ${l?`\n    scratch[ ${r({i:"local_id.x",size:g})} ] = value;\n\n    workgroupBarrier();\n  `:""}\n\n  \n  ${n({value:"value",scratch:"scratch",workgroupSize:g,identity:u,combineExpression:s,combineStatements:a,convergent:o,scratchPreloaded:l,valuePreloaded:!l})}\n\n  if ( local_id.x == 0u ) {\n    output[ workgroup_id.x ] = value;\n  }\n}\n`,t.before=f,t.after=y,t.imports=_.uniq(E).sort(),t};St.register("wgsl_example_raked_reduce",is);const ns=e=>{let t={};const i=Qr(e),n=e.combine,r=e.identity,s=e.inputSize,a=e.workgroupSize;let o="",l="";const h=[Qr];return o+=`\n\n\n\n\n\n\n@group(0) @binding(0)\nvar<storage> input: array<f32>;\n@group(0) @binding(1)\nvar<storage, read_write> output: array<f32>;\n\nvar<workgroup> scratch: array<f32, ${a}>;\n`,l+=`\n@compute @workgroup_size(${a})\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n  var value = select( ${r}, input[ global_id.x ], global_id.x < ${xt(s)} );\n\n  ${i({value:"value",valueType:"f32",scratch:"scratch",workgroupSize:a,identity:r,combineExpression:n})}\n\n  if ( local_id.x == 0u ) {\n    output[ workgroup_id.x ] = value;\n  }\n}\n`,t.before=o,t.after=l,t.imports=_.uniq(h).sort(),t},rs=ns;St.register("wgsl_f32_reduce_simple",ns);const ss=e=>{let t={};const i=Xr(e),n=Qr(e),r=e.combine,s=e.grainSize,a=e.identity,o=e.inputSize,l=e.workgroupSize;let h="",u="";const c=[Qr,Xr];return h+=`\n\n\n\n\n\n\n@group(0) @binding(0)\nvar<storage> input: array<f32>;\n@group(0) @binding(1)\nvar<storage, read_write> output: array<f32>;\n\nvar<workgroup> scratch: array<f32, ${l}>;\n`,u+=`\n@compute @workgroup_size(${l})\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n  ${i({value:"value",valueType:"f32",loadExpression:e=>`input[ ${e} ]`,identity:a,combineExpression:r,workgroupSize:l,grainSize:s,length:xt(o),inputOrder:"blocked",inputAccessOrder:"blocked"})}\n\n  ${n({value:"value",scratch:"scratch",workgroupSize:l,identity:a,combineExpression:r})}\n\n  if ( local_id.x == 0u ) {\n    output[ workgroup_id.x ] = value;\n  }\n}\n`,t.before=h,t.after=u,t.imports=_.uniq(c).sort(),t},as=ss;St.register("wgsl_f32_reduce_raked_blocked",ss);const os=e=>{let t={};const i=Xr(e),n=Qr(e),r=e.combine,s=e.grainSize,a=e.identity,o=e.inputSize,l=e.workgroupSize;let h="",u="";const c=[Qr,Xr];return h+=`\n\n\n\n\n\n\n@group(0) @binding(0)\nvar<storage> input: array<f32>;\n@group(0) @binding(1)\nvar<storage, read_write> output: array<f32>;\n\nvar<workgroup> scratch: array<f32, ${l}>;\n`,u+=`\n@compute @workgroup_size(${l})\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n  ${i({value:"value",valueType:"f32",loadExpression:e=>`input[ ${e} ]`,identity:a,combineExpression:r,workgroupSize:l,grainSize:s,length:xt(o),inputOrder:"striped",inputAccessOrder:"striped"})}\n\n  ${n({value:"value",scratch:"scratch",workgroupSize:l,identity:a,combineExpression:r})}\n\n  if ( local_id.x == 0u ) {\n    output[ workgroup_id.x ] = value;\n  }\n}\n`,t.before=h,t.after=u,t.imports=_.uniq(c).sort(),t};St.register("wgsl_f32_reduce_raked_striped",os);const ls=e=>{let t={};const i=Xr(e),n=Qr(e),r=e.combine,s=e.grainSize,a=e.identity,o=e.inputSize,l=e.workgroupSize;let h="",u="";const c=[Qr,Xr];return h+=`\n\n\n\n\n\n\n@group(0) @binding(0)\nvar<storage> input: array<f32>;\n@group(0) @binding(1)\nvar<storage, read_write> output: array<f32>;\n\nvar<workgroup> scratch: array<f32, ${l}>;\n`,u+=`\n@compute @workgroup_size(${l})\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n  ${i({value:"value",valueType:"f32",loadExpression:e=>`input[ ${e} ]`,identity:a,combineExpression:r,workgroupSize:l,grainSize:s,length:xt(o),inputOrder:"blocked",inputAccessOrder:"striped"})}\n\n  ${n({value:"value",scratch:"scratch",workgroupSize:l,identity:a,combineExpression:r})}\n\n  if ( local_id.x == 0u ) {\n    output[ workgroup_id.x ] = value;\n  }\n}\n`,t.before=h,t.after=u,t.imports=_.uniq(c).sort(),t},hs=ls;St.register("wgsl_f32_reduce_raked_striped_blocked",ls);const us=e=>{let t={};const i=Xr(e),n=Qr(e),r=e.combine,s=e.grainSize,a=e.identity,o=e.inputSize,l=e.workgroupSize;let h="",u="";const c=[Qr,Xr];return h+=`\n\n\n\n\n\n\n@group(0) @binding(0)\nvar<storage> input: array<f32>;\n@group(0) @binding(1)\nvar<storage, read_write> output: array<f32>;\n\nvar<workgroup> scratch: array<f32, ${l}>;\n`,u+=`\n@compute @workgroup_size(${l})\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n  ${i({value:"value",valueType:"f32",loadExpression:e=>`input[ ${e} ]`,identity:a,combineExpression:r,workgroupSize:l,grainSize:s,length:xt(o),inputOrder:"blocked",inputAccessOrder:"striped"})}\n\n  ${n({value:"value",scratch:"scratch",workgroupSize:l,identity:a,combineExpression:r,convergent:!0})}\n\n  if ( local_id.x == 0u ) {\n    output[ workgroup_id.x ] = value;\n  }\n}\n`,t.before=h,t.after=u,t.imports=_.uniq(c).sort(),t},cs=us;St.register("wgsl_f32_reduce_raked_striped_blocked_convergent",us);const ds=e=>{let t={};const i=Xr(e),n=Qr(e),r=e.combine,s=e.grainSize,a=e.identity,o=e.inputSize,l=e.workgroupSize;let h="",u="";const c=[Qr,Xr];return h+=`\n\n\n\n\n\n\n@group(0) @binding(0)\nvar<storage> input: array<u32>;\n@group(0) @binding(1)\nvar<storage, read_write> output: array<u32>;\n\nvar<workgroup> scratch: array<u32, ${l}>;\n`,u+=`\n@compute @workgroup_size(${l})\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n  ${i({value:"value",valueType:"u32",loadExpression:e=>`input[ ${e} ]`,identity:a,combineExpression:r,workgroupSize:l,grainSize:s,length:xt(o),inputOrder:"blocked",inputAccessOrder:"striped"})}\n\n  ${n({value:"value",scratch:"scratch",workgroupSize:l,identity:a,combineExpression:r,convergent:!0})}\n\n  if ( local_id.x == 0u ) {\n    output[ workgroup_id.x ] = value;\n  }\n}\n`,t.before=h,t.after=u,t.imports=_.uniq(c).sort(),t};St.register("wgsl_u32_reduce_raked_striped_blocked_convergent",ds);const ps=e=>{let t={};const i=Xr(e),n=Qr(e),r=e.combine,s=e.grainSize,a=e.identity,o=e.inputSize,l=e.workgroupSize;let h="",u="";const c=[Qr,Xr];return h+=`\n\n\n\n\n\n\n@group(0) @binding(0)\nvar<storage> input: array<u32>;\n@group(0) @binding(1)\nvar<storage, read_write> output: atomic<u32>;\n\nvar<workgroup> scratch: array<u32, ${l}>;\n`,u+=`\n@compute @workgroup_size(${l})\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n  ${i({value:"value",valueType:"u32",loadExpression:e=>`input[ ${e} ]`,identity:a,combineExpression:r,workgroupSize:l,grainSize:s,length:xt(o),inputOrder:"blocked",inputAccessOrder:"striped"})}\n\n  ${n({value:"value",scratch:"scratch",workgroupSize:l,identity:a,combineExpression:r,convergent:!0})}\n\n  if ( local_id.x == 0u ) {\n    atomicAdd( &output, value );\n  }\n}\n`,t.before=h,t.after=u,t.imports=_.uniq(c).sort(),t};St.register("wgsl_u32_atomic_reduce_raked_striped_blocked_convergent",ps);const ms=e=>{let t={};const i=qr(e),n=Hr(e),r=Ur(e);let s="";const a=[Hr,Ur,qr];var o;return s+=`\n\n\n\n\n${o=e=>{let{value:t,scratch:s,direction:a="left",workgroupSize:o,identity:l,combineExpression:h,combineStatements:u,localIndex:c="local_id.x",mapScratchIndex:d=_.identity,exclusive:p=!1,needsValidScratch:m=!1,scratchPreloaded:g=!1,valuePreloaded:f=!0}=e;return`\n    ${n(`begin scan direction:${a} exclusive:${p}`)}\n    ${g?"":`\n      ${s}[ ${d(c)} ] = ${t};\n    `}\n    ${f?"":`\n      ${t} = ${s}[ ${d(c)} ];\n    `}\n\n    ${r(0,Math.log2(o),(e,n,r)=>`\n      \n      \n      ${g&&n?"":"\n        workgroupBarrier();\n      "}\n\n      \n      if ( ${(e=>"left"===a?`${c} >= ${xt(1<<e)}`:`${c} < ${xt(o-(1<<e))}`)(e)} ) {\n        ${((e,t,n)=>i(e,h,u,t,n))(t,(e=>"left"===a?`${s}[ ${d(`${c} - ${xt(1<<e)}`)} ]`:t)(e),(e=>"left"===a?t:`${s}[ ${d(`${c} + ${xt(1<<e)}`)} ]`)(e))}\n      }\n\n      ${!r||m||p?`\n        workgroupBarrier();\n\n        ${s}[ ${d(c)} ] = ${t};\n      `:""}\n    `)}\n\n    \n    ${p?`\n      workgroupBarrier();\n\n      ${"left"===a?`\n        ${t} = select( ${l}, ${s}[ ${d(c+" - 1u")} ], ${c} > 0u );\n      `:`\n        ${t} = select( ${l}, ${s}[ ${d(c+" + 1u")} ], ${c} < ${xt(o-1)} );\n      `}\n    `:""}\n\n    \n    ${n("end scan")}\n  `},t=o,""}\n`,t.before=s,t.after="",t.imports=_.uniq(a).sort(),t},gs=ms;St.register("wgsl_scan",ms);const fs=e=>{let t={};const i=gs(e),n=e.workgroupSize;let r="",s="";const a=[gs];return r+=`\n\n\n\n\n\n@group(0) @binding(0)\nvar<storage> input: array<f32>;\n@group(0) @binding(1)\nvar<storage, read_write> output: array<f32>;\n\nvar<workgroup> scratch: array<f32, ${n}>;\n`,s+=`\n@compute @workgroup_size(${n})\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n  var value = input[ global_id.x ];\n\n  ${i({value:"value",scratch:"scratch",workgroupSize:n,identity:"0f",combineExpression:(e,t)=>`${e} + ${t}`,exclusive:!0})}\n\n  output[ local_id.x ] = value;\n}\n`,t.before=r,t.after=s,t.imports=_.uniq(a).sort(),t};St.register("wgsl_f32_exclusive_scan_simple_single",fs);const ys=e=>{let t={};const i=gs(e),n=e.workgroupSize;let r="",s="";const a=[gs];return r+=`\n\n\n\n\n\n@group(0) @binding(0)\nvar<storage> input: array<f32>;\n@group(0) @binding(1)\nvar<storage, read_write> output: array<f32>;\n\nvar<workgroup> scratch: array<f32, ${n}>;\n`,s+=`\n@compute @workgroup_size(${n})\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n  var value = input[ global_id.x ];\n\n  ${i({value:"value",scratch:"scratch",workgroupSize:n,identity:"0f",combineExpression:(e,t)=>`${e} + ${t}`,skipLastScratch:!0})}\n\n  output[ local_id.x ] = value;\n}\n`,t.before=r,t.after=s,t.imports=_.uniq(a).sort(),t};St.register("wgsl_f32_inclusive_scan_simple_single",ys);const Es=e=>{let t={};const i=gs(e),n=e.grainSize,r=e.workgroupSize;let s="",a="";const o=[gs];return s+=`\n\n\n\n\n\nfn identity() -> f32 {\n  return 0.0;\n}\n\nfn combine( a: f32, b: f32 ) -> f32 {\n  return a + b;\n}\n\n@group(0) @binding(0)\nvar<storage> input: array<f32>;\n@group(0) @binding(1)\nvar<storage, read_write> output: array<f32>;\n\nvar<workgroup> scratch: array<f32, ${r}>;\n`,a+=`\n@compute @workgroup_size(${r})\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n  var baseIndex = global_id.x * ${xt(n)};\n  var value = input[ baseIndex ];\n  for ( var i = 1u; i < ${xt(n)}; i++ ) {\n    value = combine( value, input[ baseIndex + i ] );\n  }\n\n  ${i({value:"value",scratch:"scratch",workgroupSize:r,identity:"0f",combineExpression:(e,t)=>`${e} + ${t}`,exclusive:!0})}\n\n  \n  \n\n  \n\n  \n  for ( var i = 0u; i < ${xt(n)}; i++ ) {\n    output[ baseIndex + i ] = value;\n    value = combine( value, input[ baseIndex + i ] );\n    \n  }\n}\n`,t.before=s,t.after=a,t.imports=_.uniq(o).sort(),t};St.register("wgsl_f32_exclusive_scan_raked_blocked_single",Es);const vs=e=>{let t={};const i=gs(e),n=e.grainSize,r=e.workgroupSize;let s="",a="";const o=[gs];return s+=`\n\n\n\n\n\nfn identity() -> f32 {\n  return 0.0;\n}\n\nfn combine( a: f32, b: f32 ) -> f32 {\n  return a + b;\n}\n\n@group(0) @binding(0)\nvar<storage> input: array<f32>;\n@group(0) @binding(1)\nvar<storage, read_write> output: array<f32>;\n\nvar<workgroup> scratch: array<f32, ${r}>;\n`,a+=`\n@compute @workgroup_size(${r})\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n  var baseIndex = global_id.x * ${xt(n)};\n  var value = input[ baseIndex ];\n  for ( var i = 1u; i < ${xt(n)}; i++ ) {\n    value = combine( value, input[ baseIndex + i ] );\n  }\n\n  ${i({value:"value",scratch:"scratch",workgroupSize:r,identity:"0f",combineExpression:(e,t)=>`${e} + ${t}`,exclusive:!0})}\n\n  for ( var i = 0u; i < ${xt(n)}; i++ ) {\n    value = combine( value, input[ baseIndex + i ] );\n    output[ baseIndex + i ] = value;\n  }\n}\n`,t.before=s,t.after=a,t.imports=_.uniq(o).sort(),t};St.register("wgsl_f32_inclusive_scan_raked_blocked_single",vs);const As=e=>{let t={};const i=gs(e),n=e.grainSize,r=e.workgroupSize;let s="",a="";const o=[gs];return s+=`\n\n\n\n\n\nfn identity() -> f32 {\n  return 0.0;\n}\n\nfn combine( a: f32, b: f32 ) -> f32 {\n  return a + b;\n}\n\n@group(0) @binding(0)\nvar<storage> input: array<f32>;\n@group(0) @binding(1)\nvar<storage, read_write> output: array<f32>;\n\nvar<workgroup> scratch: array<f32, ${r}>;\n`,a+=`\n@compute @workgroup_size(${r})\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n  var baseIndex = workgroup_id.x * ${xt(r*n)} + local_id.x;\n  var value = input[ baseIndex ];\n  for ( var i = 1u; i < ${xt(n)}; i++ ) {\n    value = combine( value, input[ baseIndex + i * ${xt(r)} ] );\n  }\n\n  ${i({value:"value",scratch:"scratch",workgroupSize:r,identity:"0f",combineExpression:(e,t)=>`${e} + ${t}`,exclusive:!0})}\n\n  for ( var i = 0u; i < ${xt(n)}; i++ ) {\n    output[ baseIndex + i * ${xt(r)} ] = value;\n    value = combine( value, input[ baseIndex + i * ${xt(r)} ] );\n    \n  }\n}\n`,t.before=s,t.after=a,t.imports=_.uniq(o).sort(),t};St.register("wgsl_f32_exclusive_scan_raked_striped_single",As);const bs=e=>{let t={};const i=gs(e),n=e.grainSize,r=e.workgroupSize;let s="",a="";const o=[gs];return s+=`\n\n\n\n\n\nfn identity() -> f32 {\n  return 0.0;\n}\n\nfn combine( a: f32, b: f32 ) -> f32 {\n  return a + b;\n}\n\n@group(0) @binding(0)\nvar<storage> input: array<f32>;\n@group(0) @binding(1)\nvar<storage, read_write> output: array<f32>;\n\nvar<workgroup> scratch: array<f32, ${r}>;\n`,a+=`\n@compute @workgroup_size(${r})\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n  var baseIndex = workgroup_id.x * ${xt(r*n)} + local_id.x;\n  var value = input[ baseIndex ];\n  for ( var i = 1u; i < ${xt(n)}; i++ ) {\n    value = combine( value, input[ baseIndex + i * ${xt(r)} ] );\n  }\n\n  ${i({value:"value",scratch:"scratch",workgroupSize:r,identity:"0f",combineExpression:(e,t)=>`${e} + ${t}`,exclusive:!0})}\n\n  for ( var i = 0u; i < ${xt(n)}; i++ ) {\n    value = combine( value, input[ baseIndex + i * ${xt(r)} ] );\n    output[ baseIndex + i * ${xt(r)} ] = value;\n  }\n}\n`,t.before=s,t.after=a,t.imports=_.uniq(o).sort(),t};St.register("wgsl_f32_inclusive_scan_raked_striped_single",bs);const Ss=e=>{let t={};const i=Hr(e);let n="";const r=[Hr];var s;return n+=`\n\n\n\n\n${s=e=>{let{value:t,outputIndex:n,lengthA:r,lengthB:s,compare:a,greaterThan:o,lessThanOrEqual:l}=e;return`\n  \n\n  ${i("begin get_corank")}\n\n  var ${t} = min( ${n}, ${r} );\n  {\n    var gc_j = ${n} - ${t};\n\n    \n    \n    \n    \n    var gc_i_low: u32 = select( ${n} - ${s}, 0u, ${n} <= ${s} );\n    var gc_j_low = select( ${n} - ${r}, 0u, ${n} <= ${r} );\n    var gc_delta: u32;\n\n    \n    var oops_count_corank = 0u;\n    while ( true ) {\n      oops_count_corank++;\n      if ( oops_count_corank > 0xffu ) {\n        break;\n      }\n\n      if ( ${t} > 0u && gc_j < ${s} && ${o?o(t+" - 1u","gc_j"):a(t+" - 1u","gc_j")+" > 0i"} ) {\n        gc_delta = ( ${t} - gc_i_low + 1u ) >> 1u;\n        gc_j_low = gc_j;\n        gc_j = gc_j + gc_delta;\n        ${t} = ${t} - gc_delta;\n      }\n      else if ( gc_j > 0u && ${t} < ${r} && ${l?l(t,"gc_j - 1u"):a(t,"gc_j - 1u")+" <= 0i"} ) {\n        gc_delta = ( gc_j - gc_j_low + 1u ) >> 1u;\n        gc_i_low = ${t};\n        ${t} = ${t} + gc_delta;\n        gc_j = gc_j - gc_delta;\n      }\n      else {\n        break;\n      }\n    }\n  }\n\n  ${i("end get_corank")}\n`},t=s,""}\n`,t.before=n,t.after="",t.imports=_.uniq(r).sort(),t},_s=Ss;St.register("wgsl_get_corank",Ss);const xs=e=>{let t={};const i=Hr(e);let n="";const r=[Hr];var s;return n+=`\n\n\n\n\n${s=e=>{let{lengthA:t,lengthB:n,compare:r,setFromA:s,setFromB:a}=e;return`\n  ${i("begin merge_sequential")}\n  {\n    var ms_i = 0u;\n    var ms_j = 0u;\n    var ms_k = 0u;\n\n    \n    var oops_count = 0u;\n\n    \n    while ( ms_i < ${t} && ms_j < ${n} ) {\n      oops_count++;\n      if ( oops_count > 0xffu ) {\n        break;\n      }\n\n      if ( ${r("ms_i","ms_j")} <= 0i ) {\n        ${s("ms_k","ms_i")}\n        ms_i++;\n      }\n      else {\n        ${a("ms_k","ms_j")}\n        ms_j++;\n      }\n      ms_k++;\n    }\n\n    \n    while ( ms_i < ${t} ) {\n      oops_count++;\n      if ( oops_count > 0xffu ) {\n        break;\n      }\n\n      ${s("ms_k","ms_i")}\n      ms_i++;\n      ms_k++;\n    }\n\n    \n    while ( ms_j < ${n} ) {\n      oops_count++;\n      if ( oops_count > 0xffu ) {\n        break;\n      }\n\n      ${a("ms_k","ms_j")}\n      ms_j++;\n      ms_k++;\n    }\n  }\n  ${i("end merge_sequential")}\n`},t=s,""}\n`,t.before=n,t.after="",t.imports=_.uniq(r).sort(),t},ws=xs;St.register("wgsl_merge_sequential",xs);const Ts=e=>{let t={};const i=Hr(e),n=_s(e),r=ws(e);let s="";const a=[Hr,_s,ws];var o;return s+=`\n\n\n\n\n${o=e=>{let{lengthA:t,lengthB:s,setFromA:a,setFromB:o,grainSize:l,compare:h,greaterThan:u,lessThanOrEqual:c}=e;return`\n  ${i("begin merge_simple")}\n  {\n    \n    let max_output = ${t} + ${s};\n    let start_output = min( max_output, global_id.x * ${xt(l)} );\n    let end_output = min( max_output, start_output + ${xt(l)} );\n\n    if ( start_output != end_output ) {\n      ${n({value:"start_a",outputIndex:"start_output",lengthA:t,lengthB:s,compare:h,greaterThan:u,lessThanOrEqual:c})}\n      ${n({value:"end_a",outputIndex:"end_output",lengthA:t,lengthB:s,compare:h,greaterThan:u,lessThanOrEqual:c})}\n\n\n      let start_b = start_output - start_a;\n      let end_b = end_output - end_a;\n\n      let span_a = end_a - start_a;\n      let span_b = end_b - start_b;\n\n      ${r({lengthA:"span_a",lengthB:"span_b",compare:(e,t)=>h("start_a + "+e,"start_b + "+t),setFromA:(e,t)=>a("start_output + "+e,"start_a + "+t),setFromB:(e,t)=>o("start_output + "+e,"start_b + "+t)})}\n    }\n  }\n  ${i("end merge_simple")}\n`},t=o,""}\n`,t.before=s,t.after="",t.imports=_.uniq(a).sort(),t},Ps=Ts;St.register("wgsl_merge_simple",Ts);const Cs=e=>{let t={};const i=Ps(e),n=e.grainSize,r=e.sizeA,s=e.sizeB,a=e.workgroupSize;let o="",l="";const h=[Ps];return o+="\n\n\n\n\n\n\n@group(0) @binding(0)\nvar<storage> a: array<i32>;\n@group(0) @binding(1)\nvar<storage> b: array<i32>;\n@group(0) @binding(2)\nvar<storage, read_write> c: array<i32>;\n",l+=`\n@compute @workgroup_size(${a})\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n  ${i({lengthA:xt(r),lengthB:xt(s),setFromA:(e,t)=>`c[ ${e} ] = a[ ${t} ];`,setFromB:(e,t)=>`c[ ${e} ] = b[ ${t} ];`,grainSize:n,compare:(e,t)=>`a[ ${e} ] - b[ ${t} ]`,greaterThan:(e,t)=>`a[ ${e} ] > b[ ${t} ]`,lessThanOrEqual:(e,t)=>`a[ ${e} ] <= b[ ${t} ]`})}\n}\n`,t.before="\n\n\n\n\n\n\n@group(0) @binding(0)\nvar<storage> a: array<i32>;\n@group(0) @binding(1)\nvar<storage> b: array<i32>;\n@group(0) @binding(2)\nvar<storage, read_write> c: array<i32>;\n",t.after=l,t.imports=_.uniq(h).sort(),t},Vs=Cs;St.register("wgsl_i32_merge_simple",Cs);const Rs=e=>{let t={};const i=Hr(e),n=_s(e),r=ws(e),s=Ur(e);let a="",o="";const l=[Hr,_s,ws,Ur];var h;return a+="\n\n\n\n",o+="",e.corankConsumed||(o+="var<workgroup> consumed_a: atomic<u32>;\nvar<workgroup> consumed_b: atomic<u32>;"),o+=`\nvar<workgroup> block_start_a: u32;\nvar<workgroup> block_end_a: u32;\n\n\n${h=e=>{let{workgroupA:t,workgroupB:a,loadFromA:o,loadFromB:l,storeOutput:h,lengthA:u,lengthB:c,workgroupSize:d,blockOutputSize:p,sharedMemorySize:m,compare:g,greaterThan:f,lessThanOrEqual:y,atomicConsumed:E=!0}=e;return`\n  ${i("begin merge")}\n  \n  \n  {\n    let max_output = ${u} + ${c};\n\n    \n    \n    let block_start_output = min( max_output, workgroup_id.x * ${xt(p)} );\n    let block_end_output = min( max_output, block_start_output + ${xt(p)} );\n    let block_length = block_end_output - block_start_output;\n\n    if ( block_length > 0u ) {\n      \n      if ( local_id.x < 2u ) {\n        let output_index = select( block_start_output, block_end_output, local_id.x == 1u );\n        ${n({value:"block_a",outputIndex:"output_index",lengthA:u,lengthB:c,compare:g?(e,t)=>g(o(e),l(t)):void 0,greaterThan:f?(e,t)=>f(o(e),l(t)):void 0,lessThanOrEqual:y?(e,t)=>y(o(e),l(t)):void 0})}\n        if ( local_id.x == 0u ) {\n          block_start_a = block_a;\n        }\n        else {\n          block_end_a = block_a;\n        }\n      }\n      workgroupBarrier();\n\n      \n      let block_start_b = block_start_output - block_start_a;\n      let block_end_b = block_end_output - block_end_a;\n\n      \n      \n\n      \n      \n      \n      var processed_index_a = block_start_a;\n      var processed_index_b = block_start_b;\n\n      \n      \n      \n      \n      var loaded_index_a = block_start_a;\n      var loaded_index_b = block_start_b;\n\n      \n      \n      let total_iterations = ( block_length + ${xt(m-1)} ) / ${xt(m)};\n      var iteration = 0u;\n\n      var oops_count_merge = 0u;\n      while ( iteration < total_iterations ) {\n        oops_count_merge++;\n        if ( oops_count_merge > 0xffu ) {\n          break;\n        }\n\n        \n        \n        \n\n        \n        let loading_a_quantity = min( min( block_end_a, processed_index_a + ${xt(m)} ) - loaded_index_a, ${xt(m)} );\n        ${s(0,Math.ceil(m/d),e=>`\n          {\n            \n            let relative_index = local_id.x + ${xt(e*d)};\n            if ( relative_index < loading_a_quantity ) {\n              let index = relative_index + loaded_index_a;\n              ${t}[ index % ${xt(m)} ] = ${o("index")};\n            }\n          }\n        `)}\n        loaded_index_a += loading_a_quantity;\n\n        \n        let loading_b_quantity = min( min( block_end_b, processed_index_b + ${xt(m)} ) - loaded_index_b, ${xt(m)} );\n        ${s(0,Math.ceil(m/d),e=>`\n          {\n            \n            let relative_index = local_id.x + ${xt(e*d)};\n            if ( relative_index < loading_b_quantity ) {\n              let index = relative_index + loaded_index_b;\n              ${a}[ index % ${xt(m)} ] = ${l("index")};\n            }\n          }\n        `)}\n        loaded_index_b += loading_b_quantity;\n\n        \n        \n        ${E?"\n          if ( local_id.x == 0u ) {\n            atomicStore( &consumed_a, 0u );\n            atomicStore( &consumed_b, 0u );\n          }\n        ":""}\n\n        \n        workgroupBarrier();\n\n        \n        \n        let base_iteration_index = block_start_output + iteration * ${xt(m)};\n\n        \n        let thread_start_output = min( block_end_output, base_iteration_index + local_id.x * ${xt(m/d)} );\n        let thread_end_output = min( block_end_output, base_iteration_index + ( local_id.x + 1 ) * ${xt(m/d)} );\n        let thread_length = thread_end_output - thread_start_output;\n\n        if ( thread_length > 0u ) {\n\n          \n          \n          \n          let iteration_length_a = loaded_index_a - processed_index_a;\n          let iteration_length_b = loaded_index_b - processed_index_b;\n\n          \n          let output_relative_start = thread_start_output - base_iteration_index;\n          let output_relative_end = thread_end_output - base_iteration_index;\n\n          \n          ${n({value:"thread_relative_start_a",outputIndex:"output_relative_start",lengthA:"iteration_length_a",lengthB:"iteration_length_b",compare:g?(e,i)=>g(`${t}[ ( ${e} + processed_index_a ) % ${xt(m)} ]`,`${a}[ ( ${i} + processed_index_b ) % ${xt(m)} ]`):void 0,greaterThan:f?(e,i)=>f(`${t}[ ( ${e} + processed_index_a ) % ${xt(m)} ]`,`${a}[ ( ${i} + processed_index_b ) % ${xt(m)} ]`):void 0,lessThanOrEqual:y?(e,i)=>y(`${t}[ ( ${e} + processed_index_a ) % ${xt(m)} ]`,`${a}[ ( ${i} + processed_index_b ) % ${xt(m)} ]`):void 0})}\n\n          \n          ${n({value:"thread_relative_end_a",outputIndex:"output_relative_end",lengthA:"iteration_length_a",lengthB:"iteration_length_b",compare:g?(e,i)=>g(`${t}[ ( ${e} + processed_index_a ) % ${xt(m)} ]`,`${a}[ ( ${i} + processed_index_b ) % ${xt(m)} ]`):void 0,greaterThan:f?(e,i)=>f(`${t}[ ( ${e} + processed_index_a ) % ${xt(m)} ]`,`${a}[ ( ${i} + processed_index_b ) % ${xt(m)} ]`):void 0,lessThanOrEqual:y?(e,i)=>y(`${t}[ ( ${e} + processed_index_a ) % ${xt(m)} ]`,`${a}[ ( ${i} + processed_index_b ) % ${xt(m)} ]`):void 0})}\n\n          \n          let thread_relative_start_b = output_relative_start - thread_relative_start_a;\n          let thread_relative_end_b = output_relative_end - thread_relative_end_a;\n\n          \n          let thread_length_a = thread_relative_end_a - thread_relative_start_a;\n          let thread_length_b = thread_relative_end_b - thread_relative_start_b;\n\n          \n          ${E?"\n            atomicAdd( &consumed_a, thread_length_a );\n            atomicAdd( &consumed_b, thread_length_b );\n          ":""}\n\n          \n          ${r({lengthA:"thread_length_a",lengthB:"thread_length_b",compare:(e,i)=>g(`${t}[ ( ${e} + processed_index_a + thread_relative_start_a ) % ${xt(m)} ]`,`${a}[ ( ${i} + processed_index_b + thread_relative_start_b ) % ${xt(m)} ]`),setFromA:(e,i)=>h(`( ${e} + thread_start_output )`,`${t}[ ( ${i} + processed_index_a + thread_relative_start_a ) % ${xt(m)} ]`),setFromB:(e,t)=>h(`( ${e} + thread_start_output )`,`${a}[ ( ${t} + processed_index_b + thread_relative_start_b ) % ${xt(m)} ]`)})}\n\n          \n          ${E?"":`\n            let iteration_possible_a_length = loaded_index_a - processed_index_a;\n            let iteration_possible_b_length = loaded_index_b - processed_index_b;\n\n            \n            ${n({value:"consumed_a",outputIndex:xt(m),lengthA:"iteration_possible_a_length",lengthB:"iteration_possible_b_length",compare:g?(e,i)=>g(`${t}[ ( ${e} + processed_index_a ) % ${xt(m)} ]`,`${a}[ ( ${i} + processed_index_b ) % ${xt(m)} ]`):void 0,greaterThan:f?(e,i)=>f(`${t}[ ( ${e} + processed_index_a ) % ${xt(m)} ]`,`${a}[ ( ${i} + processed_index_b ) % ${xt(m)} ]`):void 0,lessThanOrEqual:y?(e,i)=>y(`${t}[ ( ${e} + processed_index_a ) % ${xt(m)} ]`,`${a}[ ( ${i} + processed_index_b ) % ${xt(m)} ]`):void 0})}\n\n            let consumed_b = ${xt(m)} - consumed_a;\n\n            processed_index_a += consumed_a;\n            processed_index_b += consumed_b;\n          `}\n        }\n\n        ${E?"\n          workgroupBarrier();\n          processed_index_a += atomicLoad( &consumed_a );\n          processed_index_b += atomicLoad( &consumed_b );\n        ":""}\n        iteration++;\n      }\n    }\n  }\n  ${i("end merge")}\n`},t=h,""}\n`,t.before="\n\n\n\n",t.after=o,t.imports=_.uniq(l).sort(),t},Ns=Rs;St.register("wgsl_merge",Rs);const Ms=e=>{let t={};const i=Ns(e),n=e.blockOutputSize,r=e.lengthA,s=e.lengthB,a=e.sharedMemorySize,o=e.workgroupSize;let l="",h="";const u=[Ns];return l+=`\n\n\n\n\n\n@group(0) @binding(0)\nvar<storage> a: array<i32>;\n@group(0) @binding(1)\nvar<storage> b: array<i32>;\n@group(0) @binding(2)\nvar<storage, read_write> c: array<i32>;\n\nvar<workgroup> scratch_a: array<i32,${a}>;\nvar<workgroup> scratch_b: array<i32,${a}>;\n`,h+=`\n@compute @workgroup_size(${o})\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n  ${i({workgroupA:"scratch_a",workgroupB:"scratch_b",loadFromA:e=>`a[ ${e} ]`,loadFromB:e=>`b[ ${e} ]`,storeOutput:(e,t)=>`c[ ${e} ] = ${t};`,lengthA:xt(r),lengthB:xt(s),workgroupSize:o,blockOutputSize:n,sharedMemorySize:a,compare:(e,t)=>`${e} - ${t}`,greaterThan:(e,t)=>`${e} > ${t}`,lessThanOrEqual:(e,t)=>`${e} <= ${t}`,atomicConsumed:!0})}\n}\n`,t.before=l,t.after=h,t.imports=_.uniq(u).sort(),t};St.register("wgsl_i32_merge",Ms);const ks=e=>{let t={};const i=Hr(e),n=gs(e);let r="";const s=[Hr,gs];var a;return r+=`\n\n\n\n\n${a=e=>{let{inputValue:t,workgroupSize:r,scratch:s,moveTo:a,length:o,bits:l}=e;return`\n  ${i("begin two_bit_workgroup_sort")}\n\n  {\n    let tb_bits = select( 4u, ${l}, local_id.x < ${o} ); \n    var tb_bits_vector = vec4(\n      select( 0u, 1u, tb_bits == 0u ),\n      select( 0u, 1u, tb_bits == 1u ),\n      select( 0u, 1u, tb_bits == 2u ),\n      select( 0u, 1u, tb_bits == 3u )\n    );\n    \n\n    ${n({value:"tb_bits_vector",scratch:s,workgroupSize:r,identity:"vec4( 0u )",combineExpression:(e,t)=>`${e} + ${t}`,exclusive:!0,needsValidScratch:!0})}\n\n    \n    let tb_offset_bits_vector = ${s}[ ${xt(r-1)} ];\n    let tb_offsets = vec4(\n      0u,\n      tb_offset_bits_vector.x,\n      tb_offset_bits_vector.x + tb_offset_bits_vector.y,\n      tb_offset_bits_vector.x + tb_offset_bits_vector.y + tb_offset_bits_vector.z\n    );\n\n    if ( local_id.x < ${o} ) {\n      ${a("tb_offsets[ tb_bits ] + tb_bits_vector[ tb_bits ]")}\n    }\n  }\n\n  ${i("end two_bit_workgroup_sort")}\n`},t=a,""}\n`,t.before=r,t.after="",t.imports=_.uniq(s).sort(),t},Ls=ks;St.register("wgsl_two_bit_workgroup_sort",ks);const Is=e=>{let t={};const i=Hr(e),n=Ls(e);let r="";const s=[Hr,Ls];var a;return r+=`\n\n\n\n\n${a=e=>{let{value:t,workgroupSize:r,numBits:s,bitsScratch:a,valueScratch:o,length:l,getTwoBits:h}=e;return`\n  ${i("begin workgroup_radix_sort")}\n\n  for ( var wrs_i = 0u; wrs_i < ${xt(s)}; wrs_i += 2u ) {\n    let wrs_bits = ${h(t,"wrs_i")};\n\n    ${n({inputValue:t,workgroupSize:r,scratch:a,moveTo:e=>`${o}[ ${e} ] = ${t};`,length:l,bits:"wrs_bits"})}\n\n    workgroupBarrier();\n\n    if ( local_id.x < ${l} ) {\n      ${t} = ${o}[ local_id.x ];\n    }\n  }\n\n  ${i("end workgroup_radix_sort")}\n`},t=a,""}\n`,t.before=r,t.after="",t.imports=_.uniq(s).sort(),t},Bs=Is;St.register("wgsl_workgroup_radix_sort",Is);const Ds=e=>{let t={};const i=Bs(e),n=e.inputSize,r=e.workgroupSize;let s="",a="";const o=[Bs];return s+=`\n\n\n\n\n\n@group(0) @binding(0)\nvar<storage> input: array<u32>;\n@group(0) @binding(1)\nvar<storage, read_write> output: array<u32>;\n\nvar<workgroup> value_scratch: array<u32, ${r}>;\nvar<workgroup> bits_scratch: array<vec4u, ${r}>;\n`,a+=`\n@compute @workgroup_size(${r})\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n\n  var val = input[ global_id.x ];\n\n  ${i({value:"val",workgroupSize:r,numBits:32,bitsScratch:"bits_scratch",valueScratch:"value_scratch",length:xt(n),getTwoBits:(e,t)=>`( ( ( ${e} ) >> ( ${t} ) ) & 0x3u )`})}\n\n  workgroupBarrier();\n\n  if ( global_id.x < ${xt(n)} ) {\n    output[ global_id.x ] = val;\n  }\n}\n`,t.before=s,t.after=a,t.imports=_.uniq(o).sort(),t};St.register("wgsl_u32_workgroup_radix_sort",Ds);const Os=e=>{let t={};let i="";var n;return i+=`\n\n\n\n${n=e=>{let{bitVector:t,bits:i,bitsPerInnerPass:n,bitVectorSize:r,maxCount:s}=e;const a=Math.ceil(Math.log2(s)),o=Math.floor(32/a);return`${1===o?"":"( "}${t}${r>1?`[ ${1===o?i:`( ${i} ) / ${xt(o)}`} ]`:""}${1===o?"":` >> ( ( ( ${i} ) % ${xt(o)} ) * ${xt(a)} ) ) & ${xt((1<<a)-1)}`}`},t=n,""}\n`,t.before=i,t.after="",t.imports=_.uniq([]).sort(),t},qs=Os;St.register("wgsl_bit_pack_radix_access",Os);const Ys=e=>{let t={};const i=Hr(e);let n="";const r=[Hr];var s;return n+=`\n\n\n\n\n${s=e=>{let{bitVector:t,bitsPerInnerPass:n,bitVectorSize:r,maxCount:s}=e;const a=Math.ceil(Math.log2(s)),o=Math.floor(32/a);if(1!==o){const e=(1<<a>>>0)-1,s=4294967295,l=i=>{const n=r>1?[".x",".y",".z",".w"][Math.floor(i/o)]:"";let s=`${t}${n}`;const l=a*(i%o);return l>0&&(s=`( ${s} >> ${xt(l)} )`),`${s} & ${Tt(e)}`},h=(i,n)=>{const l=r>1?[".x",".y",".z",".w"][Math.floor(i/o)]:"",h=`${t}${l}`,u=a*(i%o),c=s-(e<<u>>>0),d=0===u?n:`( ( ${n} ) << ${xt(u)} )`;return`${h} = ( ${h} & ${Tt(c)} ) | ${d}`};let u="\n      var bitty_value = 0u;\n      var bitty_next_value = 0u;\n    ";const c=1<<n>>>0;for(let t=0;t<c;t++){const e=t===c-1;e||(u+=`bitty_next_value += ${l(t)};\n`),u+=h(t,"bitty_value")+";\n",e||(u+="bitty_value = bitty_next_value;\n")}return`\n      ${i("begin bit_pack_radix_exclusive_scan")}\n      ${u}\n      ${i("end bit_pack_radix_exclusive_scan")}\n    `}switch(r){case 1:return t+" = 0u;";case 2:return`${t} = vec2( 0u, ${t}.x );`;case 3:return`${t} = vec3( 0u, ${t}.x, ${t}.y );`;case 4:return`${t} = vec4( 0u, ${t}.x, ${t}.y, ${t}.z );`}},t=s,""}\n`,t.before=n,t.after="",t.imports=_.uniq(r).sort(),t},Hs=Ys;St.register("wgsl_bit_pack_radix_exclusive_scan",Ys);const Gs=e=>{let t={};let i="";var n;return i+=`\n\n\n\n${n=e=>{let{bitVector:t,bits:i,bitsPerInnerPass:n,bitVectorSize:r,maxCount:s}=e;const a=Math.ceil(Math.log2(s)),o=Math.floor(32/a);return`\n    ${t}${r>1?`[ ${1===o?i:`( ${i} ) / ${xt(o)}`} ]`:""} += 1u${1===o?"":` << ( ( ( ${i} ) % ${xt(o)} ) * ${xt(a)} )`};\n  `},t=n,""}\n`,t.before=i,t.after="",t.imports=_.uniq([]).sort(),t},Fs=Gs;St.register("wgsl_bit_pack_radix_increment",Gs);const zs=e=>{let t={};const i=qs(e),n=Hs(e),r=Fs(e),s=Hr(e),a=gs(e);let o="";const l=[Hr,qs,Hs,Fs,gs];var h;return o+=`\n\n\n\n\n${h=e=>{let{inputValue:t,workgroupSize:o,scratch:l,moveTo:h,length:u,bits:c}=e;return`\n  ${s("begin two_bit_compact_workgroup_sort")}\n\n  {\n    var tb_bits_vector = 0u;\n\n    if ( local_id.x < ${u} ) {\n      ${r({bitVector:"tb_bits_vector",bits:c,bitsPerInnerPass:2,bitVectorSize:1,maxCount:o})}\n    }\n\n    ${a({value:"tb_bits_vector",scratch:l,workgroupSize:o,identity:"0u",combineExpression:(e,t)=>`${e} + ${t}`,exclusive:!0,needsValidScratch:!0})}\n\n    \n    var tb_offsets = ${l}[ ${xt(o-1)} ];\n\n    ${n({bitVector:"tb_offsets",bitsPerInnerPass:2,bitVectorSize:1,maxCount:o})}\n\n    if ( local_id.x < ${u} ) {\n      \n      ${h(`( ${i({bitVector:"tb_offsets",bits:c,bitsPerInnerPass:2,bitVectorSize:1,maxCount:o})} ) + ( ${i({bitVector:"tb_bits_vector",bits:c,bitsPerInnerPass:2,bitVectorSize:1,maxCount:o})} )`)}\n    }\n  }\n\n  ${s("end two_bit_compact_workgroup_sort")}\n`},t=h,""}\n`,t.before=o,t.after="",t.imports=_.uniq(l).sort(),t},Us=zs;St.register("wgsl_two_bit_compact_workgroup_sort",zs);const Ws=e=>{let t={};const i=Hr(e),n=Us(e);let r="";const s=[Hr,Us];var a;return r+=`\n\n\n\n\n${a=e=>{let{value:t,workgroupSize:r,numBits:s,bitsScratch:a,valueScratch:o,length:l,getTwoBits:h}=e;return`\n  ${i("begin compact_workgroup_radix_sort")}\n\n  for ( var wrs_i = 0u; wrs_i < ${xt(s)}; wrs_i += 2u ) {\n    let wrs_bits = ${h(t,"wrs_i")};\n\n    ${n({inputValue:t,workgroupSize:r,scratch:a,moveTo:e=>`${o}[ ${e} ] = ${t};`,length:l,bits:"wrs_bits"})}\n\n    workgroupBarrier();\n\n    if ( local_id.x < ${l} ) {\n      ${t} = ${o}[ local_id.x ];\n    }\n  }\n\n  ${i("end compact_workgroup_radix_sort")}\n`},t=a,""}\n`,t.before=r,t.after="",t.imports=_.uniq(s).sort(),t},Xs=Ws;St.register("wgsl_compact_workgroup_radix_sort",Ws);const js=e=>{let t={};const i=Xs(e),n=e.inputSize,r=e.workgroupSize;let s="",a="";const o=[Xs];return s+=`\n\n\n\n\n\n@group(0) @binding(0)\nvar<storage> input: array<u32>;\n@group(0) @binding(1)\nvar<storage, read_write> output: array<u32>;\n\nvar<workgroup> value_scratch: array<u32, ${r}>;\nvar<workgroup> bits_scratch: array<u32, ${r}>;\n`,a+=`\n@compute @workgroup_size(${r})\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n\n  var val = input[ global_id.x ];\n\n  ${i({value:"val",workgroupSize:r,numBits:32,bitsScratch:"bits_scratch",valueScratch:"value_scratch",length:xt(n),getTwoBits:(e,t)=>`( ( ( ${e} ) >> ( ${t} ) ) & 0x3u )`})}\n\n  workgroupBarrier();\n\n  if ( global_id.x < ${xt(n)} ) {\n    output[ global_id.x ] = val;\n  }\n}\n`,t.before=s,t.after=a,t.imports=_.uniq(o).sort(),t};St.register("wgsl_u32_compact_workgroup_radix_sort",js);const Qs=e=>{let t={};const i=Fr(e),n=Ur(e);let r="";const s=[Fr,Ur];var a;return r+=`\n\n\n\n\n${a=e=>{let{workgroupSize:t,grainSize:r,length:s,callback:a}=e;return`\n  ${n(0,r,e=>`\n    {\n      let coalesced_local_index = ${xt(e*t)} + local_id.x;\n      let coalesced_data_index = workgroup_id.x * ${xt(t*r)} + coalesced_local_index;\n      ${i(s?"coalesced_data_index < "+s:null,`\n        ${a("coalesced_local_index","coalesced_data_index")}\n      `)}\n    }\n  `)}\n`},t=a,""}\n`,t.before=r,t.after="",t.imports=_.uniq(s).sort(),t},Ks=Qs;St.register("wgsl_coalesced_loop",Qs);const Zs=e=>{let t={};const i=Hr(e),n=gs(e),r=Ur(e);let s="";const a=[Hr,gs,Ur];var o;return s+=`\n\n\n\n\n${o=e=>{let{valueType:t,workgroupSize:s,grainSize:a,bitsScratch:o,valueScratch:l,length:h,getTwoBits:u,earlyLoad:c=!1}=e;return`\n  ${i("begin two_bit_single_sort")}\n  {\n    var tb_bits_vector = vec4( 0u );\n\n    ${c?`\n      var tb_values: array<${t}, ${a}>;\n    `:""}\n\n    ${r(0,a,e=>`\n      \n      if ( ${xt(a)} * local_id.x + ${xt(e)} < ${h} ) {\n        let tb_value = ${l}[ ${xt(a)} * local_id.x + ${xt(e)} ];\n        let tb_bits = ${u("tb_value")};\n        tb_bits_vector[ tb_bits ]++;\n\n        ${c?`\n          tb_values[ ${xt(e)} ] = tb_value;\n        `:""}\n      }\n    `)}\n\n    ${n({value:"tb_bits_vector",scratch:o,workgroupSize:s,identity:"vec4( 0u )",combineExpression:(e,t)=>`${e} + ${t}`,exclusive:!0,needsValidScratch:!0})}\n\n    \n    var tb_offset_bits_vector = ${o}[ ${xt(s-1)} ];\n    let tb_offsets = vec4(\n      0u,\n      tb_offset_bits_vector.x,\n      tb_offset_bits_vector.x + tb_offset_bits_vector.y,\n      tb_offset_bits_vector.x + tb_offset_bits_vector.y + tb_offset_bits_vector.z\n    );\n\n    ${c?"":`\n      var tb_values: array<${t}, ${a}>;\n\n      ${r(0,a,e=>`\n        \n        tb_values[ ${xt(e)} ] = ${l}[ ${xt(a)} * local_id.x + ${xt(e)} ];\n      `)}\n\n      workgroupBarrier();\n    `}\n\n    ${r(0,a,e=>`\n      \n      if ( ${xt(a)} * local_id.x + ${xt(e)} < ${h} ) {\n        let tb_value = tb_values[ ${xt(e)} ];\n        let tb_bits = ${u("tb_value")};\n\n        ${l}[ tb_offsets[ tb_bits ] + tb_bits_vector[ tb_bits ] ] = tb_value;\n\n        \n        tb_bits_vector[ tb_bits ]++;\n      }\n    `)}\n\n    workgroupBarrier();\n  }\n  ${i("end two_bit_single_sort")}\n`},t=o,""}\n`,t.before=s,t.after="",t.imports=_.uniq(a).sort(),t},Js=Zs;St.register("wgsl_two_bit_single_sort",Zs);const $s=e=>{let t={};const i=Hr(e),n=Js(e);let r="";const s=[Hr,Js];var a;return r+=`\n\n\n\n\n${a=e=>{let{valueType:t,workgroupSize:r,grainSize:s,numBits:a,bitsScratch:o,valueScratch:l,length:h,getTwoBits:u,earlyLoad:c}=e;return`\n  ${i("begin single_radix_sort")}\n\n  for ( var wrs_i = 0u; wrs_i < ${xt(a)}; wrs_i += 2u ) {\n    ${n({valueType:t,workgroupSize:r,grainSize:s,bitsScratch:o,valueScratch:l,length:h,getTwoBits:e=>u(e,"wrs_i"),earlyLoad:c})}\n\n    \n\n    ${i("end single_radix_sort")}\n  }\n`},t=a,""}\n`,t.before=r,t.after="",t.imports=_.uniq(s).sort(),t},ea=$s;St.register("wgsl_single_radix_sort",$s);const ta=e=>{let t={};const i=Ks(e),n=ea(e),r=(Ur(e),e.earlyLoad),s=e.grainSize,a=e.inputSize,o=e.workgroupSize;let l="",h="";const u=[ea,Ks,Ur];return l+=`\n\n\n\n\n\n@group(0) @binding(0)\nvar<storage> input: array<u32>;\n@group(0) @binding(1)\nvar<storage, read_write> output: array<u32>;\n\nvar<workgroup> value_scratch: array<u32, ${o*s}>;\nvar<workgroup> bits_scratch: array<vec4u, ${o}>;\n`,h+=`\n@compute @workgroup_size(${o})\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n  \n  ${i({workgroupSize:o,grainSize:s,length:xt(a),callback:(e,t)=>`value_scratch[ ${e} ] = input[ ${t} ];`})}\n\n  workgroupBarrier();\n\n  \n  ${n({valueType:"u32",workgroupSize:o,grainSize:s,numBits:32,bitsScratch:"bits_scratch",valueScratch:"value_scratch",length:xt(a),getTwoBits:(e,t)=>`( ( ( ${e} ) >> ( ${t} ) ) & 0x3u )`,earlyLoad:r})}\n\n  \n  ${i({workgroupSize:o,grainSize:s,length:xt(a),callback:(e,t)=>`output[ ${t} ] = value_scratch[ ${e} ];`})}\n}\n`,t.before=l,t.after=h,t.imports=_.uniq(u).sort(),t};St.register("wgsl_u32_single_radix_sort",ta);const ia=e=>{let t={};const i=e.log,n=e.logBinding,r=e.shaderName;let s="";var a;return s+="\n\n\n\n",e.log&&(s+=`struct _Log {\n  next_space: atomic<u32>,\n  data: array<u32>\n};\n@group(0) @binding(${n})\nvar<storage, read_write> _log: _Log;`),s+=`\n${a=e=>{let{name:t,additionalIndex:n=null,type:s=null,dataCount:a=0,writeU32s:o=(()=>{}),lineToLog:l}=e;if(!i)return"";if(l||(l=0===a?rk.toLogNull:rk.toLogExistingFlat),null===t)return"\n      {\n        let _log_offset = atomicAdd( &_log.next_space, 1u );\n        _log.data[ _log_offset ] = 0u;\n      }\n    ";{const e=tk.register({type:s,logName:t,shaderName:r,dataCount:"number"==typeof a?a:null,hasAdditionalIndex:null!==n,lineToLog:l}),i=7+(null!==n?1:0)+("number"!=typeof a?1:0);let h=0;return`\n      {\n        ${"number"==typeof a?`\n          \n          let _log_item_length = ${xt(i+a*(0===a?0:s.bytesPerElement/4))};\n        `:"string"==typeof a?`\n          \n          let _log_data_count = ${a};\n          let _log_item_length = ${xt(i)} + _log_data_count * ${xt(s.bytesPerElement/4)};\n        `:`\n          \n          var _log_data_count: u32;\n          ${a("_log_data_count")}\n          let _log_item_length = ${xt(i)} + _log_data_count * ${xt(s.bytesPerElement/4)};\n        `}\n\n        var _log_offset = atomicAdd( &_log.next_space, _log_item_length );\n\n        \n        if ( _log_offset + _log_item_length > arrayLength( &_log.data ) ) {\n          _log.data[ 0u ] = 0xffffffffu;\n          _log_offset = 1;\n        }\n\n        _log.data[ _log_offset + ${xt(h++)} ] = ${xt(e)};\n        _log.data[ _log_offset + ${xt(h++)} ] = workgroup_id.x;\n        _log.data[ _log_offset + ${xt(h++)} ] = workgroup_id.y;\n        _log.data[ _log_offset + ${xt(h++)} ] = workgroup_id.z;\n        _log.data[ _log_offset + ${xt(h++)} ] = local_id.x;\n        _log.data[ _log_offset + ${xt(h++)} ] = local_id.y;\n        _log.data[ _log_offset + ${xt(h++)} ] = local_id.z;\n\n        ${null!==n?`\n          _log.data[ _log_offset + ${xt(h++)} ] = ${n};\n        `:""}\n\n        ${"number"!=typeof a?`\n          _log.data[ _log_offset + ${xt(h++)} ] = _log_data_count;\n        `:""}\n\n        ${0!==a?`\n          ${o((e,t)=>`_log.data[ _log_offset + ${xt(h)} + ( ${e} ) ] = ${t};`)}\n        `:""}\n      }\n    `}},t=a,""}\n`,t.before=s,t.after="",t.imports=_.uniq([]).sort(),t},na=ia;St.register("wgsl_log",ia);const ra=e=>{let t={};const i=na(e);let n="";const r=[na];var s;return n+=`\n\n\n\n\n${s=e=>i({name:e}),t=s,""}\n`,t.before=n,t.after="",t.imports=_.uniq(r).sort(),t},sa=ra;St.register("wgsl_log_string",ra);const aa=e=>{let t={};const i=na(e);let n="";const r=[na];var s;return n+=`\n\n\n\n\n${s=e=>{let{type:t,value:n,name:r,additionalIndex:s=null,lineToLog:a}=e;return r||(r=n),i({name:r,additionalIndex:s,type:t,dataCount:1,writeU32s:e=>t.writeU32s(e,n),lineToLog:a})},t=s,""}\n`,t.before=n,t.after="",t.imports=_.uniq(r).sort(),t},oa=aa;St.register("wgsl_log_value",aa);const la=e=>{let t={};const i=qs(e),n=Hs(e),r=Fs(e),s=Hr(e),a=na(e),o=sa(e),l=oa(e),h=gs(e),u=Ur(e);let c="";const d=[Hr,qs,Hs,Fs,gs,Ur,na,oa,sa];var p;return c+=`\n\n\n\n\n${p=e=>{let{order:t,workgroupSize:c,grainSize:d,bitsPerInnerPass:p,bitVectorSize:m,bitsScratch:g,valueScratch:f,length:y,getBits:E,earlyLoad:v=!1}=e;const A={1:GM,2:XM,3:ZM,4:$M}[m],b=(e,t)=>a({name:`${e} (countBitQuantity: ${Math.ceil(Math.log2(c*d))})`,type:A,dataCount:m,writeU32s:e=>A.writeU32s(e,t),lineToLog:rk.toLogExisting});return`\n    ${s("begin n_bit_compact_single_sort")}\n\n    ${o(`n_bit_compact_single_sort workgroupSize:${c}, grainSize:${d}, bitsPerInnerPass:${p}, bitVectorSize:${m}, length:"${y}" earlyLoad:${v}`)}\n\n    {\n      var tb_bits_vector = ${{1:"0u",2:"vec2( 0u )",3:"vec3( 0u )",4:"vec4( 0u )"}[m]};\n\n      ${v?`\n        var tb_values: array<${t.type.valueType}, ${d}>;\n      `:""}\n\n      \n      ${u(0,d,e=>`\n        \n        if ( ${xt(d)} * local_id.x + ${xt(e)} < ${y} ) {\n          let tb_value = ${f}[ ${xt(d)} * local_id.x + ${xt(e)} ];\n          let tb_bits = ${E("tb_value")};\n\n          ${l({value:"tb_value",name:`tb_value (raked index ${e})`,type:t.type})}\n\n          ${l({value:"tb_bits",name:`tb_bits (raked index ${e})`,type:GM})}\n\n          ${r({bitVector:"tb_bits_vector",bits:"tb_bits",bitsPerInnerPass:p,bitVectorSize:m,maxCount:c*d})}\n\n          ${v?`\n            tb_values[ ${xt(e)} ] = tb_value;\n          `:""}\n        }\n      `)}\n\n      ${b("n_bit histogram initial","tb_bits_vector")}\n\n      ${h({value:"tb_bits_vector",scratch:g,workgroupSize:c,identity:{1:"0u",2:"vec2( 0u )",3:"vec3( 0u )",4:"vec4( 0u )"}[m],combineExpression:(e,t)=>`${e} + ${t}`,exclusive:!0,needsValidScratch:!0})}\n\n      ${b("n_bit histogram scanned","tb_bits_vector")}\n\n      \n      var tb_offsets = ${g}[ ${xt(c-1)} ];\n\n      ${n({bitVector:"tb_offsets",bitsPerInnerPass:p,bitVectorSize:m,maxCount:c*d})}\n\n      ${v?"":`\n        var tb_values: array<${t.type.valueType}, ${d}>;\n\n        ${u(0,d,e=>`\n          \n          tb_values[ ${xt(e)} ] = ${f}[ ${xt(d)} * local_id.x + ${xt(e)} ];\n        `)}\n\n        workgroupBarrier();\n      `}\n\n      ${u(0,d,e=>`\n        \n        if ( ${xt(d)} * local_id.x + ${xt(e)} < ${y} ) {\n          let tb_value = tb_values[ ${xt(e)} ];\n          let tb_bits = ${E("tb_value")};\n\n          \n          ${f}[ ( ${i({bitVector:"tb_offsets",bits:"tb_bits",bitsPerInnerPass:p,bitVectorSize:m,maxCount:c*d})} ) + ( ${i({bitVector:"tb_bits_vector",bits:"tb_bits",bitsPerInnerPass:p,bitVectorSize:m,maxCount:c*d})} ) ] = tb_value;\n\n          \n          ${r({bitVector:"tb_bits_vector",bits:"tb_bits",bitsPerInnerPass:p,bitVectorSize:m,maxCount:c*d})}\n        }\n      `)}\n\n      workgroupBarrier();\n    }\n\n    ${s("end n_bit_compact_single_sort")}\n  `},t=p,""}\n`,t.before=c,t.after="",t.imports=_.uniq(d).sort(),t},ha=la;St.register("wgsl_n_bit_compact_single_sort",la);const ua=e=>{let t={};const i=Hr(e),n=ha(e);let r="";const s=[Hr,ha];var a;return r+=`\n\n\n\n\n${a=e=>{let{order:t,workgroupSize:r,grainSize:s,numBits:a,bitsPerInnerPass:o,bitVectorSize:l,bitsScratch:h,valueScratch:u,length:c,getBits:d,earlyLoad:p}=e;return`\n  ${i("begin compact_single_radix_sort")}\n\n  for ( var wrs_i = 0u; wrs_i < ${xt(a)}; wrs_i += ${xt(o)} ) {\n    ${n({order:t,workgroupSize:r,grainSize:s,bitsPerInnerPass:o,bitVectorSize:l,bitsScratch:h,valueScratch:u,length:c,getBits:e=>d(e,"wrs_i"),earlyLoad:p})}\n\n    \n  }\n\n  ${i("end compact_single_radix_sort")}\n`},t=a,""}\n`,t.before=r,t.after="",t.imports=_.uniq(s).sort(),t},ca=ua;St.register("wgsl_compact_single_radix_sort",ua);const da=e=>{let t={};const i=Ks(e),n=ca(e),r=(Ur(e),e.bitVectorSize),s=e.bitsPerInnerPass,a=e.earlyLoad,o=e.grainSize,l=e.inputSize,h=e.workgroupSize;let u="",c="";const d=[ca,Ks,Ur];return u+=`\n\n\n\n\n\n@group(0) @binding(0)\nvar<storage> input: array<u32>;\n@group(0) @binding(1)\nvar<storage, read_write> output: array<u32>;\n\nvar<workgroup> value_scratch: array<u32, ${h*o}>;\nvar<workgroup> bits_scratch: array<${{1:"u32",2:"vec2u",3:"vec3u",4:"vec4u"}[r]}, ${h}>;\n`,c+=`\n@compute @workgroup_size(${h})\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n  \n  ${i({workgroupSize:h,grainSize:o,length:xt(l),callback:(e,t)=>`value_scratch[ ${e} ] = input[ ${t} ];`})}\n\n  workgroupBarrier();\n\n  \n  ${n({order:zM,workgroupSize:h,grainSize:o,numBits:32,bitsPerInnerPass:s,bitVectorSize:r,bitsScratch:"bits_scratch",valueScratch:"value_scratch",length:xt(l),getBits:(e,t)=>`( ( ( ${e} ) >> ( ${t} ) ) & ${xt((1<<s)-1)} )`,earlyLoad:a})}\n\n  \n  ${i({workgroupSize:h,grainSize:o,length:xt(l),callback:(e,t)=>`output[ ${t} ] = value_scratch[ ${e} ];`})}\n}\n`,t.before=u,t.after=c,t.imports=_.uniq(d).sort(),t};St.register("wgsl_u32_compact_single_radix_sort",da);const pa=e=>{let t={};const i=Ks(e),n=Hr(e);let r="";const s=[Hr,Ks];var a;return r+=`\n\n\n\n\n${a=e=>{let{workgroupSize:t,grainSize:r,histogramScratch:s,getBin:a,length:o}=e;return`\n  ${n("begin histogram")}\n  {\n    ${i({workgroupSize:t,grainSize:r,length:o,callback:(e,t)=>`\n        atomicAdd( &${s}[ ${a(t)} ], 1u );\n      `})}\n  }\n  ${n("end histogram")}\n`},t=a,""}\n`,t.before=r,t.after="",t.imports=_.uniq(s).sort(),t},ma=pa;St.register("wgsl_histogram",pa);const ga=e=>{let t={};const i=ma(e),n=Ur(e),r=e.grainSize,s=e.inputSize,a=e.numBins,o=e.workgroupSize;let l="",h="";const u=[ma,Ur];return l+=`\n\n\n\n\n\n@group(0) @binding(0)\nvar<storage> input: array<u32>;\n@group(0) @binding(1)\nvar<storage, read_write> output: array<atomic<u32>>;\n\nvar<workgroup> histogram_scratch: array<atomic<u32>, ${a}>;\n`,h+=`\n@compute @workgroup_size(${o})\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n\n  ${i({workgroupSize:o,grainSize:r,histogramScratch:"histogram_scratch",getBin:e=>`input[ ${e} ]`,length:xt(s)})}\n\n  workgroupBarrier();\n\n  \n  ${n(0,Math.ceil(a/o),e=>`\n    {\n      let index = ${xt(o*e)} + local_id.x;\n      if ( index < ${xt(a)} ) {\n        atomicAdd( &output[ index ], atomicLoad( &histogram_scratch[ index ] ) );\n      }\n    }\n  `)}\n}\n`,t.before=l,t.after=h,t.imports=_.uniq(u).sort(),t};St.register("wgsl_u32_histogram",ga);const fa=e=>{let t={};let i="";var n;return i+=`\n\n\n\n\n${n=(e,t)=>`( ( ( ${e} ) + ${xt(t-1)} ) / ${xt(t)} )`,t=n,""}\n`,t.before=i,t.after="",t.imports=_.uniq([]).sort(),t},ya=fa;St.register("wgsl_ceil_divide_constant_divisor",fa);const Ea=e=>{let t={};const i=ya(e),n=Hr(e),r=ma(e),s=Ur(e);let a="";const o=[Hr,ma,Ur,ya];var l;return a+=`\n\n\n\n\n${l=e=>{let{workgroupSize:t,grainSize:a,histogramScratch:o,numBins:l,getBin:h,length:u,storeHistogram:c}=e;return`\n  ${n("begin radix_histogram")}\n\n  {\n    ${r({workgroupSize:t,grainSize:a,histogramScratch:o,getBin:h,length:u})}\n\n    let num_valid_workgroups = ${i(u,t*a)};\n    if ( workgroup_id.x < num_valid_workgroups ) {\n      \n      workgroupBarrier();\n\n      ${s(0,Math.ceil(l/t),e=>`\n        {\n          let local_index = ${xt(t*e)} + local_id.x;\n          if ( local_index < ${xt(l)} ) {\n            ${c("local_index * num_valid_workgroups + workgroup_id.x","atomicLoad( &histogram_scratch[ local_index ] )")}\n          }\n        }\n      `)}\n    }\n  }\n\n  ${n("end radix_histogram")}\n`},t=l,""}\n`,t.before=a,t.after="",t.imports=_.uniq(o).sort(),t},va=Ea;St.register("wgsl_radix_histogram",Ea);const Aa=e=>{let t={};const i=va(e),n=e.grainSize,r=e.inputSize,s=e.numBins,a=e.workgroupSize;let o="",l="";const h=[va];return o+=`\n\n\n\n\n\n@group(0) @binding(0)\nvar<storage> input: array<u32>;\n@group(0) @binding(1)\nvar<storage, read_write> output: array<u32>;\n\nvar<workgroup> histogram_scratch: array<atomic<u32>, ${s}>;\n`,l+=`\n@compute @workgroup_size(${a})\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n  ${i({workgroupSize:a,grainSize:n,histogramScratch:"histogram_scratch",getBin:e=>`input[ ${e} ]`,numBins:s,length:xt(r),storeHistogram:(e,t)=>`output[ ${e} ] = ${t};`})}\n}\n`,t.before=o,t.after=l,t.imports=_.uniq(h).sort(),t};St.register("wgsl_u32_radix_histogram",Aa);const ba=e=>{let t={};const i=Xr(e),n=e.combineExpression,r=e.combineStatements,s=e.factorOutSubexpressions,a=e.grainSize,o=e.identity,l=e.inputAccessOrder,h=e.inputOrder,u=e.length,c=e.nestSubexpressions,d=e.useLoadExpression,p=e.valueType,m=e.workgroupSize;let g="",f="";const y=[Xr];return g+=`\n\n\n\n\n\n@group(0) @binding(0)\nvar<storage> input: array<${p}>;\n@group(0) @binding(1)\nvar<storage, read_write> output: array<${p}>;\n`,f+=`\n@compute @workgroup_size(${m})\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n\n  ${i({value:"val",valueType:p,loadExpression:d?e=>`input[ ${e} ]`:null,loadStatements:d?null:(e,t)=>`${e} = input[ ${t} ];`,identity:o,workgroupSize:m,grainSize:a,length:u,combineExpression:n,combineStatements:r,inputOrder:h,inputAccessOrder:l,factorOutSubexpressions:s,nestSubexpressions:c})}\n\n  output[ global_id.x ] = val;\n}\n`,t.before=g,t.after=f,t.imports=_.uniq(y).sort(),t};St.register("wgsl_example_load_reduced",ba);const Sa=e=>{let t={};const i=Hr(e),n=Fr(e),r=Ur(e);let s="";const a=[Fr,Ur,Hr];var o;return s+=`\n\n\n\n\n${o=e=>{let{loadExpression:t,loadStatements:s,storeStatements:a,valueType:o,workgroupSize:l,grainSize:h,globalIndex:u="global_id.x",workgroupIndex:c="workgroup_id.x",localIndex:d="local_id.x",length:p=null,outOfRangeValue:m=null,inputOrder:g=null,inputAccessOrder:f="striped",factorOutSubexpressions:y=!0}=e,E=[],v=[],A=null,b=null;if("blocked"===f)y?(E.push(`let base_blocked_index = ${xt(h)} * ${u};`),v.push(e=>`let blocked_index = base_blocked_index + ${xt(e)};`),A=e=>"blocked_index",null!==p&&(b=A)):(A=e=>`${xt(h)} * ${u} + ${xt(e)}`,null!==p&&(b=A));else{if("striped"!==f)throw new Error("Unrecognized inputAccessOrder: "+f);if(y){if("striped"===g&&p?(E.push(`let base_workgroup = ${c} * ${xt(l*h)};`),E.push(`let base_striped_index = base_workgroup + ${d};`),E.push(`let base_blocked_index = base_workgroup + ${d} * ${xt(h)};`)):E.push(`let base_striped_index = ${c} * ${xt(l*h)} + ${d};`),v.push(e=>`let striped_index = base_striped_index + ${xt(e*l)};`),A=e=>"striped_index",null!==p)if("striped"===g)b=e=>"base_blocked_index + "+xt(e);else{if("blocked"!==g)throw new Error("Unrecognized inputOrder: "+g);b=A}}else if(A=e=>`${c} * ${xt(l*h)} + ${d} + ${xt(e*l)}`,null!==p)if("striped"===g)b=e=>`${c} * ${xt(l*h)} + ${d} * ${xt(h)} + ${xt(e)}`;else{if("blocked"!==g)throw new Error("Unrecognized inputOrder: "+g);b=A}}const S=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return n(b?`${b(e)} < ${p}`:null,t,i)},_=(e,i,n)=>t?`\n    ${n?n+" ":""}${e} = ${t(A(i))};\n  `:`\n    ${n?`\n      var ${e}: ${o};\n    `:""}\n    ${s(e,A(i))}\n  `;return`\n    ${i("begin load_multiple")}\n    {\n      ${E.join("\n")}\n      ${r(0,h,e=>`\n        {\n          ${v.map(t=>t(e)).join("\n")}\n\n          ${m?`\n            var lm_val: ${o};\n            ${S(e,`\n              ${_("lm_val",e)}\n            `,`\n              lm_val = ${m};\n            `)}\n\n            \n            ${a(`${A(e)} - ${c} * ${xt(l*h)}`,"lm_val")}\n          `:`\n            ${S(e,`\n              var lm_val: ${o};\n              ${_("lm_val",e)}\n\n              ${a(`${A(e)} - ${c} * ${xt(l*h)}`,"lm_val")}\n            `)}\n          `}\n        }\n      `)}\n    }\n    ${i("end load_multiple")}\n  `},t=o,""}\n`,t.before=s,t.after="",t.imports=_.uniq(a).sort(),t},_a=Sa;St.register("wgsl_load_multiple",Sa);const xa=e=>{let t={};const i=_a(e),n=Ur(e),r=e.factorOutSubexpressions,s=e.grainSize,a=e.inputAccessOrder,o=e.inputOrder,l=e.length,h=e.outOfRangeValue,u=e.useLoadExpression,c=e.valueType,d=e.workgroupSize;let p="",m="";const g=[_a,Ur];return p+=`\n\n\n\n\n\n@group(0) @binding(0)\nvar<storage> input: array<${c}>;\n@group(0) @binding(1)\nvar<storage, read_write> output: array<${c}>;\n\nvar<workgroup> scratch: array<${c}, ${d*s}>;\n`,m+=`\n@compute @workgroup_size(${d})\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n\n  ${i({loadExpression:u?e=>`input[ ${e} ]`:null,loadStatements:u?null:(e,t)=>`${e} = input[ ${t} ];`,storeStatements:(e,t)=>`scratch[ ${e} ] = ${t};`,valueType:c,workgroupSize:d,grainSize:s,length:l,outOfRangeValue:h,inputOrder:o,inputAccessOrder:a,factorOutSubexpressions:r})}\n\n  workgroupBarrier();\n\n  \n  ${n(0,s,e=>`\n    {\n      let local_index = local_id.x * ${xt(s)} + ${xt(e)};\n      output[ workgroup_id.x * ${xt(d*s)} + local_index ] = scratch[ local_index ];\n    }\n  `)}\n}\n`,t.before=p,t.after=m,t.imports=_.uniq(g).sort(),t};St.register("wgsl_example_load_multiple",xa);const wa=e=>{let t={};let i="";var n;return i+=`\n\n\n\n${n=e=>{let{i:t,workgroupSize:i,grainSize:n}=e;return`\n  \n  (\n    ( ( ${t} ) / ${xt(i*n)} ) * ${xt(i*n)} +\n    ( ( ${t} ) % ${xt(i)} ) * ${xt(n)} +\n    ( ( ( ${t} ) % ${xt(i*n)} ) / ${xt(i)} )\n  )\n`.split("\n").map(e=>e.trim()).join(" ")},t=n,""}\n`,t.before=i,t.after="",t.imports=_.uniq([]).sort(),t},Ta=wa;St.register("wgsl_from_striped_index",wa);const Pa=e=>{let t={};const i=Ta(e),n=Ur(e),r=e.grainSize,s=e.workgroupSize;let a="",o="";const l=[Ta,Ur];return a+="\n\n\n\n\n\n@group(0) @binding(0)\nvar<storage> input: array<u32>;\n@group(0) @binding(1)\nvar<storage, read_write> output: array<u32>;\n",o+=`\n@compute @workgroup_size(${s})\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n  ${n(0,r,e=>`\n    {\n      \n      \n      let index = global_id.x * ${r} + ${xt(e)};\n      output[ ${i({i:"index",workgroupSize:s,grainSize:r})} ] = input[ index ];\n    }\n  `)}\n}\n`,t.before="\n\n\n\n\n\n@group(0) @binding(0)\nvar<storage> input: array<u32>;\n@group(0) @binding(1)\nvar<storage, read_write> output: array<u32>;\n",t.after=o,t.imports=_.uniq(l).sort(),t};St.register("wgsl_u32_from_striped",Pa);const Ca=e=>{let t={};let i="";var n;return i+=`\n\n\n\n${n=e=>{let{i:t,workgroupSize:i,grainSize:n}=e;return`\n  \n  (\n    ( ( ${t} ) / ${xt(i*n)} ) * ${xt(i*n)} +\n    ( ( ${t} ) % ${xt(n)} ) * ${xt(i)} +\n    ( ( ( ${t} ) % ${xt(i*n)} ) / ${xt(n)} )\n  )\n`.split("\n").map(e=>e.trim()).join(" ")},t=n,""}\n`,t.before=i,t.after="",t.imports=_.uniq([]).sort(),t},Va=Ca;St.register("wgsl_to_striped_index",Ca);const Ra=e=>{let t={};const i=Va(e),n=Ur(e),r=e.grainSize,s=e.workgroupSize;let a="",o="";const l=[Va,Ur];return a+="\n\n\n\n\n\n@group(0) @binding(0)\nvar<storage> input: array<u32>;\n@group(0) @binding(1)\nvar<storage, read_write> output: array<u32>;\n",o+=`\n@compute @workgroup_size(${s})\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n  ${n(0,r,e=>`\n    {\n      \n      let index = global_id.x * ${r} + ${xt(e)};\n      output[ ${i({i:"index",workgroupSize:s,grainSize:r})} ] = input[ index ];\n    }\n  `)}\n}\n`,t.before="\n\n\n\n\n\n@group(0) @binding(0)\nvar<storage> input: array<u32>;\n@group(0) @binding(1)\nvar<storage, read_write> output: array<u32>;\n",t.after=o,t.imports=_.uniq(l).sort(),t};St.register("wgsl_u32_to_striped",Ra);const Na=e=>{let t={};const i=ts(e),n=Ur(e),r=e.grainSize,s=e.workgroupSize;let a="",o="";const l=[ts,Ur];return a+="\n\n\n\n\n\n@group(0) @binding(0)\nvar<storage> input: array<u32>;\n@group(0) @binding(1)\nvar<storage, read_write> output: array<u32>;\n",o+=`\n@compute @workgroup_size(${s})\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n  ${n(0,r,e=>`\n    {\n      \n      let index = global_id.x * ${r} + ${xt(e)};\n      output[ ${i({i:"index",size:s*r})} ] = input[ index ];\n    }\n  `)}\n}\n`,t.before="\n\n\n\n\n\n@group(0) @binding(0)\nvar<storage> input: array<u32>;\n@group(0) @binding(1)\nvar<storage, read_write> output: array<u32>;\n",t.after=o,t.imports=_.uniq(l).sort(),t};St.register("wgsl_u32_flip_convergent",Na);const Ma=e=>{let t={};const i=Xr(e),n=Qr(e),r=ts(e),s=Va(e),a=e.combineExpression,o=e.combineStatements,l=e.convergent,h=e.convergentRemap,u=e.factorOutSubexpressions,c=e.grainSize,d=e.identity,p=e.inputAccessOrder,m=e.inputOrder,g=e.length,f=e.nestSubexpressions,y=e.stripeOutput,E=e.valueType,v=e.workgroupSize;let A="",b="";const S=[Qr,Xr,ts,Va];return A+=`\n\n\n\n\n\n\n\n\n\n\n@group(0) @binding(0)\nvar<storage> input: array<${E}>;\n@group(0) @binding(1)\nvar<storage, read_write> output: array<${E}>;\n\nvar<workgroup> scratch: array<${E}, ${v}>;\n`,b+=`\n@compute @workgroup_size(${v})\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n  ${i({value:"value",valueType:E,loadExpression:e=>`input[ ${e} ]`,identity:d,combineExpression:a,combineStatements:o,workgroupSize:v,grainSize:c,length:g,inputOrder:m,inputAccessOrder:p,factorOutSubexpressions:u,nestSubexpressions:f})}\n\n  ${h?`\n    scratch[ ${r({i:"local_id.x",size:v})} ] = value;\n\n    workgroupBarrier();\n  `:""}\n\n  \n  ${n({value:"value",scratch:"scratch",workgroupSize:v,identity:d,combineExpression:a,combineStatements:o,convergent:l,scratchPreloaded:h,valuePreloaded:!h})}\n\n  if ( local_id.x == 0u ) {\n    output[ ${y?s({i:"workgroup_id.x",workgroupSize:v,grainSize:c}):"workgroup_id.x"} ] = value;\n  }\n}\n`,t.before=A,t.after=b,t.imports=_.uniq(S).sort(),t},ka=Ma;St.register("wgsl_main_reduce",Ma);const La=e=>{let t={};const i=Xr(e),n=Qr(e),r=e.atomicOperation,s=e.combineExpression,a=e.factorOutSubexpressions,o=e.grainSize,l=e.identity,h=e.inputOrder,u=e.length,c=e.nestSubexpressions,d=e.valueType,p=e.workgroupSize;let m="",g="";const f=[Qr,Xr];return m+=`\n\n\n\n\n\n@group(0) @binding(0)\nvar<storage> input: array<${d}>;\n@group(0) @binding(1)\nvar<storage, read_write> output: atomic<${d}>;\n\nvar<workgroup> scratch: array<${d}, ${p}>;\n`,g+=`\n@compute @workgroup_size(${p})\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n  ${i({value:"value",valueType:d,loadExpression:e=>`input[ ${e} ]`,identity:l,combineExpression:s,workgroupSize:p,grainSize:o,length:u,inputOrder:h,inputAccessOrder:"striped",factorOutSubexpressions:a,nestSubexpressions:c})}\n\n  ${n({value:"value",scratch:"scratch",workgroupSize:p,identity:l,combineExpression:s,convergent:!0})}\n\n  if ( local_id.x == 0u ) {\n    ${r}( &output, value );\n  }\n}\n`,t.before=m,t.after=g,t.imports=_.uniq(f).sort(),t},Ia=La;St.register("wgsl_main_reduce_atomic",La);const Ba=e=>{let t={};const i=qr(e),n=Qr(e),r=Va(e),s=Ur(e),a=e.combineExpression,o=e.combineStatements,l=(e.factorOutSubexpressions,e.grainSize),h=e.identity,u=(e.nestSubexpressions,e.stripeOutput),c=e.valueType,d=e.workgroupSize;let p="",m="";const g=[Qr,Ur,qr,Va];return p+=`\n\n\n\n\n\n\n\n@group(0) @binding(0)\nvar<storage> input: array<${c}>;\n@group(0) @binding(1)\nvar<storage, read_write> output: array<${c}>;\n\nvar<workgroup> scratch: array<${c}, ${d}>;\n`,m+=`\n@compute @workgroup_size(${d})\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n  \n  if ( local_id.x == 0u ) {\n    scratch[ 0u ] = ${h};\n  }\n\n  var value: ${c};\n  ${s(0,l,(e,t,r)=>`\n      {\n        value = input[ workgroup_id.x * ${xt(d*l)} + ${xt(e*d)} + local_id.x ];\n        if ( local_id.x == 0u ) {\n          ${((e,t,n)=>i(e,a,o,t,n))("value","scratch[ 0u ]","value")}\n        }\n\n        ${n({value:"value",scratch:"scratch",workgroupSize:d,identity:h,combineExpression:a,combineStatements:o})}\n\n        ${r?"":"\n          if ( local_id.x == 0u ) {\n            scratch[ 0u ] = value;\n          }\n        "}\n      }\n    `)}\n\n  if ( local_id.x == 0u ) {\n    output[ ${u?r({i:"workgroup_id.x",workgroupSize:d,grainSize:l}):"workgroup_id.x"} ] = value;\n  }\n}\n`,t.before=p,t.after=m,t.imports=_.uniq(g).sort(),t},Da=Ba;St.register("wgsl_main_reduce_non_commutative",Ba);const Oa=e=>{let t={};const i=Ur(e),n=e.atomicOperation,r=e.directAtomics,s=e.grainSize,a=e.identity,o=e.length,l=e.numAtomics,h=e.valueType,u=e.workgroupSize;let c="",d="";const p=[Ur];return c+=`\n\n\n\n\n\n@group(0) @binding(0)\nvar<storage> input: array<${h}>;\n@group(0) @binding(1)\nvar<storage, read_write> output: atomic<${h}>;\n\nvar<workgroup> scratch: array<atomic<${h}>, ${l}>;\n`,d+=`\n@compute @workgroup_size(${u})\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n\n  \n  ${"0u"===a||"0i"===a?"":`\n    if ( local_id.x < ${xt(l)} ) {\n      atomicStore( &scratch[ local_id.x ], ${a} );\n    }\n\n    workgroupBarrier();\n  `}\n\n  let base_striped_index = workgroup_id.x * ${xt(u*s)} + local_id.x;\n  ${i(0,s,e=>`\n    {\n      let striped_index = base_striped_index + ${xt(e*u)};\n      ${o?`\n        \n        if ( striped_index < ${o} ) {\n          ${n}( &output, input[ striped_index ] );\n        }\n      `:`\n        ${n}( &output, input[ striped_index ] );\n      `}\n    }\n  `)}\n\n  workgroupBarrier();\n\n  ${r?`\n    if ( local_id.x < ${xt(l)} ) {\n      ${n}( &output, atomicLoad( &scratch[ local_id.x ] ) );\n    }\n  `:`\n    ${l>1?`\n      if ( local_id.x > 0 && local_id.x < ${xt(l)} ) {\n        ${n}( &scratch[ 0u ], atomicLoad( &scratch[ local_id.x ] ) );\n      }\n\n      workgroupBarrier();\n    `:""}\n\n    if ( local_id.x == 0u ) {\n      ${n}( &output, atomicLoad( &scratch[ 0u ] ) );\n    }\n  `}\n}\n`,t.before=c,t.after=d,t.imports=_.uniq(p).sort(),t},qa=Oa;St.register("wgsl_main_atomic_reduce_atomic",Oa);const Ya=e=>{let t={};const i=qr(e),n=Hr(e),r=gs(e),s=Va(e),a=Ur(e);let o="";const l=[Hr,Ur,gs,qr,Va];var h;return o+=`\n\n\n\n\n${h=e=>{let{scratch:t,valueType:o,workgroupSize:l,grainSize:h,identity:u,combineExpression:c,combineStatements:d,storeReduction:p=null,stripeReducedOutput:m=!1,exclusive:g=!1,getAddedValue:f=null,addedValueNeedsWorkgroupBarrier:y=!0}=e;const E=(e,t,n)=>i(e,c,d,t,n);return`\n    ${n("begin scan_raked")}\n\n    \n\n    \n    \n    ${n("begin (sequential scan of tile)")}\n    var value = ${t}[ local_id.x * ${xt(h)} ];\n    ${a(1,h,e=>`\n      {\n        ${E("value","value",`${t}[ local_id.x * ${xt(h)} + ${xt(e)} ]`)}\n        ${t}[ local_id.x * ${xt(h)} + ${xt(e)} ] = value;\n      }\n    `)}\n    ${n("end (sequential scan of tile)")}\n\n    \n    workgroupBarrier();\n\n    \n    ${r({value:"value",scratch:t,workgroupSize:l,identity:u,combineExpression:c,combineStatements:d,mapScratchIndex:e=>`( ${e} ) * ${xt(h)} + ${xt(h-1)}`,exclusive:!1,needsValidScratch:!0,scratchPreloaded:!0,valuePreloaded:!0})}\n\n    workgroupBarrier();\n\n    \n    \n    ${p?`\n      ${n("begin (store reduction)")}\n      if ( local_id.x == ${xt(l-1)} ) {\n        ${p(m?s({i:"workgroup_id.x",workgroupSize:l,grainSize:h}):"workgroup_id.x","value")}\n      }\n      ${n("end (store reduction)")}\n    `:""}\n\n    \n    ${n("begin (add scanned values to tile)")}\n    var added_value = select( ${u}, ${t}[ local_id.x * ${xt(h)} - 1u ], local_id.x > 0 );\n    ${f?`\n      ${n("begin (get global added values)")}\n\n      \n      var workgroup_added_value: ${o};\n      ${f("workgroup_added_value")}\n\n      \n      ${y?"\n        workgroupBarrier();\n      ":""}\n\n      \n      {\n        let last_value = ${t}[ local_id.x * ${xt(h)} + ${xt(h-1)} ];\n\n        var new_last_value: ${o};\n        ${E("new_last_value","workgroup_added_value","last_value")}\n\n        ${t}[ local_id.x * ${xt(h)} + ${xt(h-1)} ] = new_last_value;\n      }\n\n      \n      ${E("added_value","workgroup_added_value","added_value")}\n\n      ${n("end (get global added values)")}\n    `:"\n    "}\n    ${a(0,h-1,e=>`\n      {\n        let index = local_id.x * ${xt(h)} + ${xt(e)};\n        var current_value: ${o};\n        ${E("current_value","added_value",t+"[ index ]")}\n        ${t}[ index ] = current_value;\n      }\n    `)}\n    ${n("end (add scanned values to tile)")}\n\n    ${n("end scan_raked")}\n  `},t=h,""}\n`,t.before=o,t.after="",t.imports=_.uniq(l).sort(),t},Ha=Ya;St.register("wgsl_scan_raked",Ya);const Ga=e=>{let t={};const i=Ks(e),n=Hr(e),r=_a(e),s=Ha(e);let a="";const o=[Hr,_a,Ha,Ks];var l;return a+=`\n\n\n\n\n${l=e=>{let{input:t,output:a,scratch:o,valueType:l,workgroupSize:h,grainSize:u,identity:c,combineExpression:d,combineStatements:p,storeReduction:m=null,stripeReducedOutput:g=!1,length:f=null,inputOrder:y=null,inputAccessOrder:E,factorOutSubexpressions:v=!0,exclusive:A=!1,getAddedValue:b=null,addedValueNeedsWorkgroupBarrier:S=!0}=e;return`\n    ${n("begin scan_comprehensive")}\n\n    \n    ${r({loadExpression:e=>`${t}[ ${e} ]`,storeStatements:(e,t)=>`${o}[ ${e} ] = ${t};`,valueType:l,workgroupSize:h,grainSize:u,length:f,outOfRangeValue:c,inputOrder:y,inputAccessOrder:E,factorOutSubexpressions:v})}\n\n    workgroupBarrier();\n\n    ${s({scratch:o,valueType:l,workgroupSize:h,grainSize:u,identity:c,combineExpression:d,combineStatements:p,storeReduction:m,stripeReducedOutput:g,exclusive:A,getAddedValue:b,addedValueNeedsWorkgroupBarrier:S})}\n\n    workgroupBarrier();\n\n    \n    ${n("begin (output write)")}\n    ${i({workgroupSize:h,grainSize:u,length:f,callback:(e,t)=>`\n        ${a}[ ${t} ] = ${A?`select( ${b?"workgroup_added_value":c}, ${o}[ ${e} - 1u ], ${e} > 0u )`:`${o}[ ${e} ]`};\n      `})}\n    ${n("end (output write)")}\n\n    ${n("end scan_comprehensive")}\n  `},t=l,""}\n`,t.before=a,t.after="",t.imports=_.uniq(o).sort(),t},Fa=Ga;St.register("wgsl_scan_comprehensive",Ga);const za=e=>{let t={};const i=Fa(e),n=e.combineExpression,r=e.combineStatements,s=e.exclusive,a=e.factorOutSubexpressions,o=e.getAddedValue,l=e.grainSize,h=e.identity,u=e.inPlace,c=e.inputAccessOrder,d=e.inputOrder,p=e.length,m=e.valueType,g=e.workgroupSize;let f="",y="";const E=[Fa];return f+=`\n\n\n\n\n\n${u?`\n  @group(0) @binding(0)\n  var<storage, read_write> data: array<${m}>;\n`:`\n  @group(0) @binding(0)\n  var<storage> input: array<${m}>;\n  @group(0) @binding(1)\n  var<storage, read_write> output: array<${m}>;\n`}\n\nvar<workgroup> scratch: array<${m}, ${g*l}>;\n`,y+=`\n@compute @workgroup_size(${g})\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n  ${i({input:u?"data":"input",output:u?"data":"output",scratch:"scratch",workgroupSize:g,grainSize:l,length:p,identity:h,combineExpression:n,combineStatements:r,inputOrder:d,inputAccessOrder:c,valueType:m,factorOutSubexpressions:a,exclusive:s,getAddedValue:o})}\n}\n`,t.before=f,t.after=y,t.imports=_.uniq(E).sort(),t},Ua=za;St.register("wgsl_main_scan",za);const Wa=e=>{let t={};const i=Fa(e),n=e.combineExpression,r=e.combineStatements,s=e.exclusive,a=e.factorOutSubexpressions,o=e.getAddedValue,l=e.grainSize,h=e.identity,u=e.inPlace,c=e.inputAccessOrder,d=e.inputOrder,p=e.length,m=e.stripeReducedOutput,g=e.valueType,f=e.workgroupSize;let y="",E="";const v=[Fa];return y+=`\n\n\n\n\n\n${u?`\n  @group(0) @binding(0)\n  var<storage, read_write> data: array<${g}>;\n`:`\n  @group(0) @binding(0)\n  var<storage> input: array<${g}>;\n  @group(0) @binding(1)\n  var<storage, read_write> output: array<${g}>;\n`}\n@group(0) @binding(${u?1:2})\nvar<storage, read_write> reductions: array<${g}>;\n\nvar<workgroup> scratch: array<${g}, ${f*l}>;\n`,E+=`\n@compute @workgroup_size(${f})\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n  ${i({input:u?"data":"input",output:u?"data":"output",scratch:"scratch",workgroupSize:f,grainSize:l,length:p,identity:h,combineExpression:n,combineStatements:r,inputOrder:d,inputAccessOrder:c,valueType:g,factorOutSubexpressions:a,exclusive:s,getAddedValue:o,storeReduction:(e,t)=>`reductions[ ${e} ] = ${t};`,stripeReducedOutput:m})}\n}\n`,t.before=y,t.after=E,t.imports=_.uniq(v).sort(),t},Xa=Wa;St.register("wgsl_main_scan_reduce",Wa);const ja=e=>{let t={};const i=Fa(e),n=e.combineExpression,r=e.combineStatements,s=e.exclusive,a=e.factorOutSubexpressions,o=e.grainSize,l=e.identity,h=e.inPlace,u=e.inputAccessOrder,c=e.inputOrder,d=e.isReductionExclusive,p=e.length,m=e.valueType,g=e.workgroupSize;let f="",y="";const E=[Fa];return f+=`\n\n\n\n\n\n${h?`\n  @group(0) @binding(0)\n  var<storage, read_write> data: array<${m}>;\n`:`\n  @group(0) @binding(0)\n  var<storage> input: array<${m}>;\n  @group(0) @binding(2)\n  var<storage, read_write> output: array<${m}>;\n`}\n@group(0) @binding(1)\nvar<storage> scanned_reduction: array<${m}>;\n\nvar<workgroup> scratch: array<${m}, ${g*o}>;\n\nvar<workgroup> reduction_value: ${m};\n`,y+=`\n@compute @workgroup_size(${g})\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n  ${i({input:h?"data":"input",output:h?"data":"output",scratch:"scratch",workgroupSize:g,grainSize:o,length:p,identity:l,combineExpression:n,combineStatements:r,inputOrder:c,inputAccessOrder:u,valueType:m,factorOutSubexpressions:a,exclusive:s,getAddedValue:e=>`\n      if ( local_id.x == 0u ) {\n        \n        ${d?"\n          reduction_value = scanned_reduction[ workgroup_id.x ];\n        ":`\n          \n          \n          if ( workgroup_id.x % ${xt(g*o)} == 0u ) {\n            reduction_value = ${l};\n          }\n          else {\n            reduction_value = scanned_reduction[ workgroup_id.x - 1u ];\n          }\n        `}\n      }\n\n      workgroupBarrier();\n\n      ${e} = reduction_value;\n    `,addedValueNeedsWorkgroupBarrier:!1})}\n}\n`,t.before=f,t.after=y,t.imports=_.uniq(E).sort(),t},Qa=ja;St.register("wgsl_main_scan_add_1",ja);const Ka=e=>{let t={};const i=qr(e),n=Fa(e),r=e.combineExpression,s=e.combineStatements,a=e.exclusive,o=e.factorOutSubexpressions,l=e.grainSize,h=e.identity,u=e.inPlace,c=e.inputAccessOrder,d=e.inputOrder,p=e.isReductionExclusive,m=e.length,g=e.valueType,f=e.workgroupSize;let y="",E="";const v=[Fa,qr];return y+=`\n\n\n\n\n\n${u?`\n  @group(0) @binding(0)\n  var<storage, read_write> data: array<${g}>;\n`:`\n  @group(0) @binding(0)\n  var<storage> input: array<${g}>;\n  @group(0) @binding(3)\n  var<storage, read_write> output: array<${g}>;\n`}\n@group(0) @binding(1)\nvar<storage> scanned_reduction: array<${g}>;\n@group(0) @binding(2)\nvar<storage> double_scanned_reduction: array<${g}>;\n\nvar<workgroup> scratch: array<${g}, ${f*l}>;\n\nvar<workgroup> reduction_value: ${g};\n`,E+=`\n@compute @workgroup_size(${f})\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n  ${n({input:u?"data":"input",output:u?"data":"output",scratch:"scratch",workgroupSize:f,grainSize:l,length:m,identity:h,combineExpression:r,combineStatements:s,inputOrder:d,inputAccessOrder:c,valueType:g,factorOutSubexpressions:o,exclusive:a,getAddedValue:e=>`\n      if ( local_id.x == 0u ) {\n        \n        ${p?`\n          let middle_value = scanned_reduction[ workgroup_id.x ];\n          let lower_value = double_scanned_reduction[ workgroup_id.x / ${xt(f*l)} ];\n        `:`\n          var middle_value: ${g};\n          var lower_value: ${g};\n          \n          \n          if ( workgroup_id.x % ${xt(f*l)} == 0u ) {\n            middle_value = ${h};\n          }\n          else {\n            middle_value = scanned_reduction[ workgroup_id.x - 1u ];\n          }\n          let lower_index = workgroup_id.x / ${xt(f*l)};\n          if ( lower_index % ${xt(f*l)} == 0u ) {\n            lower_value = ${h};\n          }\n          else {\n            lower_value = double_scanned_reduction[ lower_index - 1u ];\n          }\n        `}\n\n        ${i("reduction_value",r,s,"lower_value","middle_value")}\n      }\n\n      workgroupBarrier();\n\n      ${e} = reduction_value;\n    `,addedValueNeedsWorkgroupBarrier:!1})}\n}\n`,t.before=y,t.after=E,t.imports=_.uniq(v).sort(),t},Za=Ka;St.register("wgsl_main_scan_add_2",Ka);const Ja=e=>{let t={};const i=va(e),n=e.bitsPerPass,r=e.grainSize,s=e.length,a=e.order,o=e.pass,l=e.workgroupSize;let h="",u="";const c=[va];return h+=`\n\n\n\n\n\n@group(0) @binding(0)\nvar<storage> input: array<${a.type.valueType}>;\n@group(0) @binding(1)\nvar<storage, read_write> output: array<u32>;\n\nvar<workgroup> histogram_scratch: array<atomic<u32>, ${1<<n}>;\n`,u+=`\n@compute @workgroup_size(${l})\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n  ${i({workgroupSize:l,grainSize:r,histogramScratch:"histogram_scratch",getBin:e=>a.getBitsWGSL(`input[ ${e} ]`,o*n,n),numBins:1<<n,length:s,storeHistogram:(e,t)=>`output[ ${e} ] = ${t};`})}\n}\n`,t.before=h,t.after=u,t.imports=_.uniq(c).sort(),t},$a=Ja;St.register("wgsl_main_radix_histogram",Ja);const eo=e=>{let t={};const i=e.log;let n="";var r;return n+=`\n\n\n\n\n${r=e=>i?e:"",t=r,""}\n`,t.before=n,t.after="",t.imports=_.uniq([]).sort(),t},to=eo;St.register("wgsl_if_log",eo);const io=e=>{let t={};const i=to(e),n=na(e);let r="";const s=[na,to];var a;return r+=`\n\n\n\n\n${a=e=>{let{name:t,additionalIndex:r=null,type:s,lineToLog:a=rk.toLogExistingFlat,workgroupSize:o,grainSize:l,length:h=null,relativeLength:u=null,skipBarriers:c=!1,accessExpression:d=null,relativeAccessExpression:p=null}=e;return`\n    ${i(`\n      {\n        ${c?"":"\n          workgroupBarrier();\n          storageBarrier();\n        "}\n\n        let base_log_index = workgroup_id.x * ${xt(o*l)};\n        let base_local_log_index = ${xt(l)} * local_id.x;\n        let combined_base = base_log_index + base_local_log_index;\n\n        ${null!==h?`\n          if ( combined_base < ${h} ) {\n        `:""}\n        ${null!==u?`\n          if ( base_local_log_index < ${u} ) {\n        `:""}\n\n        var log_length = ${xt(l)};\n        ${null!==h?`\n          log_length = min( log_length, ${h} - combined_base );\n        `:""}\n        ${null!==u?`\n          log_length = min( log_length, ${u} - base_local_log_index );\n        `:""}\n\n        ${n({name:t,additionalIndex:r,type:s,lineToLog:a,dataCount:"log_length",writeU32s:e=>`\n            for ( var _i = 0u; _i < log_length; _i++ ) {\n              ${d?`\n                \n                let _expr = ${d("combined_base + _i")};\n              `:`\n                \n                let _expr = ${p("base_local_log_index + _i")};\n              `}\n              ${s.writeU32s((t,i)=>e(`_i * ${xt(s.bytesPerElement/4)} + ${t}`,i),"_expr")}\n            }\n          `})}\n\n        ${null!==u?"\n          }\n        ":""}\n        ${null!==h?"\n          }\n        ":""}\n      }\n    `)}\n  `},t=a,""}\n`,t.before=r,t.after="",t.imports=_.uniq(s).sort(),t},no=io;St.register("wgsl_log_u32_raked",io);const ro=e=>{let t={};const i=ya(e),n=Hr(e),r=Fr(e),s=_a(e),a=sa(e),o=no(e),l=oa(e),h=ha(e),u=Ha(e),c=Ur(e),d=e.bitsPerInnerPass,p=e.bitsPerPass,m=e.earlyLoad,g=e.factorOutSubexpressions,f=e.grainSize,y=e.innerBitVectorSize,E=e.length,v=e.order,A=e.pass,b=e.workgroupSize;let S="",x="";const w=[Hr,Fr,Ha,Ur,ya,_a,ha,sa,oa,no];return S+=`\n\n\n\n\n\n@group(0) @binding(0)\nvar<storage> input: array<${v.type.valueType}>;\n@group(0) @binding(1)\nvar<storage> histogram_offsets: array<u32>;\n@group(0) @binding(2)\nvar<storage, read_write> output: array<${v.type.valueType}>;\n\n\nvar<workgroup> bits_scratch: array<${{1:"u32",2:"vec2u",3:"vec3u",4:"vec4u"}[y]}, ${b}>;\nvar<workgroup> value_scratch: array<${v.type.valueType}, ${b*f}>;\nvar<workgroup> local_histogram_offsets: array<u32, ${xt(1<<p)}>;\nvar<workgroup> start_indices: array<u32, ${b*f}>;\n`,x+=`\n@compute @workgroup_size(${b})\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n  ${(()=>{const e=e=>v.getBitsWGSL(e,A*p,p);return`\n      ${a("main_radix_scatter start")}\n\n      let num_valid_workgroups = ${i(E,b*f)};\n\n      ${l({value:"num_valid_workgroups",type:GM})}\n\n      if ( workgroup_id.x < num_valid_workgroups ) {\n        ${s({loadExpression:e=>`input[ ${e} ]`,storeStatements:(e,t)=>`value_scratch[ ${e} ] = ${t};`,valueType:v.type.valueType,workgroupSize:b,grainSize:f,length:E,outOfRangeValue:null,inputOrder:"blocked",inputAccessOrder:"striped",factorOutSubexpressions:g})}\n\n        ${o({name:"initial data",type:v.type,workgroupSize:b,grainSize:f,length:E,relativeAccessExpression:e=>`value_scratch[ ${e} ]`})}\n\n        ${n("begin load histogram offsets")}\n        ${c(0,Math.ceil((1<<p)/b),e=>`\n          {\n            let local_index = ${xt(b*e)} + local_id.x;\n            if ( local_index < ${xt(1<<p)} ) {\n              local_histogram_offsets[ local_index ] = histogram_offsets[ local_index * num_valid_workgroups + workgroup_id.x ];\n            }\n          }\n        `)}\n        ${n("end load histogram offsets")}\n\n        ${o({name:"scanned histogram",type:GM,workgroupSize:b,grainSize:f,relativeLength:xt(1<<p),relativeAccessExpression:e=>`histogram_offsets[ ${e} ]`})}\n\n        \n        workgroupBarrier();\n\n        ${E?`\n          let reduced_length = ( ${E} ) - workgroup_id.x * ${xt(b*f)};\n        `:""}\n\n        ${l({value:"reduced_length",type:GM})}\n\n        for ( var srs_i = 0u; srs_i < ${xt(p)}; srs_i += ${xt(d)} ) {\n          ${l({value:"srs_i",type:GM})}\n\n          ${h({order:v,valueType:v.type.valueType,workgroupSize:b,grainSize:f,bitsPerInnerPass:d,bitVectorSize:y,bitsScratch:"bits_scratch",valueScratch:"value_scratch",length:E?"reduced_length":null,getBits:t=>`( ( ( ${e(t)} ) >> srs_i ) & ${xt((1<<d)-1)} )`,earlyLoad:m})}\n\n          ${o({name:`after b_bit_sort ${d} ${y}`,type:v.type,workgroupSize:b,grainSize:f,length:E,relativeAccessExpression:e=>`value_scratch[ ${e} ]`,additionalIndex:"srs_i"})}\n        }\n\n        \n        ${n("begin write start_indices")}\n        ${c(0,f,t=>`\n          {\n            let local_index = ${xt(b*t)} + local_id.x;\n            ${r(E?"local_index < reduced_length":null,`\n              var head_value = 0u;\n\n              if ( local_index > 0u && ${e("value_scratch[ local_index ]")} != ${e("value_scratch[ local_index - 1u ]")} ) {\n                head_value = local_index;\n              }\n\n              start_indices[ local_index ] = head_value;\n            `)}\n          }\n        `)}\n        ${n("end write start_indices")}\n\n        workgroupBarrier();\n\n        ${u({scratch:"start_indices",valueType:"u32",workgroupSize:b,grainSize:f,identity:"0u",combineExpression:(e,t)=>`max( ${e}, ${t} )`,exclusive:!1})}\n\n        workgroupBarrier();\n\n        ${n("begin write output")}\n        ${c(0,f,t=>`\n          {\n            let local_index = ${xt(b*t)} + local_id.x;\n            ${r(E?"local_index < reduced_length":null,`\n              let local_offset = local_index - start_indices[ local_index ];\n              let value = value_scratch[ local_index ];\n              let offset = local_histogram_offsets[ ${e("value")} ] + local_offset;\n\n              output[ offset ] = value;\n            `)}\n          }\n        `)}\n        ${n("end write output")}\n\n        ${o({name:"exit(!) data",type:v.type,workgroupSize:b,grainSize:f,length:E,accessExpression:e=>`output[ ${e} ]`})}\n      }\n    `})()}\n}\n`,t.before=S,t.after=x,t.imports=_.uniq(w).sort(),t},so=ro;St.register("wgsl_main_radix_scatter",ro);const ao=e=>{let t={};const i=na(e);let n="",r="";const s=[na];return n+="\n\n\n\n",r+=`\n@compute @workgroup_size(1)\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n  ${i({name:null})}\n}\n`,t.before="\n\n\n\n",t.after=r,t.imports=_.uniq(s).sort(),t},oo=ao;St.register("wgsl_main_log_barrier",ao);const lo=e=>{let t={};Zi(e),Nn(e),nn(e);const i=e.preferredStorageFormat;let n="",r="";const s=[Zi,Nn,nn];return n+=`\n\n\n\n\n\nstruct Config {\n  num_edges: u32\n}\n\n@group(0) @binding(0)\nvar<uniform> config: Config;\n@group(0) @binding(1)\nvar output: texture_storage_2d<${i}, write>;\n@group(0) @binding(2)\nvar<storage> vertices: array<f32>;\n`,r+="\n@compute @workgroup_size(16, 16)\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n  let minPoint = vec2f( global_id.xy );\n  let maxPoint = minPoint + 1.0;\n  let center = 0.5 * ( minPoint + maxPoint );\n\n  var double_area = 0f;\n  for ( var i: u32 = 0; i < config.num_edges; i++ ) {\n    let edge = LinearEdge( vec2( vertices[ i * 4 + 0 ], vertices[ i * 4 + 1 ] ), vec2( vertices[ i * 4 + 2 ], vertices[ i * 4 + 3 ] ) );\n    double_area += bounds_double_area_edge( edge, minPoint.x, minPoint.y, maxPoint.x, maxPoint.y, center.x, center.y );\n  }\n\n  let area = 0.5 * double_area;\n  let value = 1f - clamp( area, 0f, 1f );\n\n  textureStore( output, global_id.xy, vec4( linear_sRGB_to_sRGB( vec3( value ) ), 1.0 ) );\n}\n",t.before=n,t.after="\n@compute @workgroup_size(16, 16)\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n  let minPoint = vec2f( global_id.xy );\n  let maxPoint = minPoint + 1.0;\n  let center = 0.5 * ( minPoint + maxPoint );\n\n  var double_area = 0f;\n  for ( var i: u32 = 0; i < config.num_edges; i++ ) {\n    let edge = LinearEdge( vec2( vertices[ i * 4 + 0 ], vertices[ i * 4 + 1 ] ), vec2( vertices[ i * 4 + 2 ], vertices[ i * 4 + 3 ] ) );\n    double_area += bounds_double_area_edge( edge, minPoint.x, minPoint.y, maxPoint.x, maxPoint.y, center.x, center.y );\n  }\n\n  let area = 0.5 * double_area;\n  let value = 1f - clamp( area, 0f, 1f );\n\n  textureStore( output, global_id.xy, vec4( linear_sRGB_to_sRGB( vec3( value ) ), 1.0 ) );\n}\n",t.imports=_.uniq(s).sort(),t},ho=lo;St.register("wgsl_test_to_canvas",lo);const uo=()=>({before:"\n\n\n\n\nstruct Config {\n  render_program_index: u32,\n  edgesOffset: u32,\n  numEdges: u32,\n  isFullArea: u32, \n  needsFace: u32, \n  area: f32,\n  minX: f32,\n  minY: f32,\n  maxX: f32,\n  maxY: f32,\n  minXCount: i32,\n  minYCount: i32,\n  maxXCount: i32,\n  maxYCount: i32\n}\n\n@group(0) @binding(0)\nvar<uniform> config: Config;\n@group(0) @binding(1)\nvar<storage, read> render_program_instructions: array<u32>;\n@group(0) @binding(2)\nvar<storage, read> complete_edges: array<RasterCompleteEdge>;\n@group(0) @binding(3)\nvar<storage, read_write> output: vec4<f32>;\n",after:"\n@compute @workgroup_size(1)\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n  output = evaluate_render_program_instructions(\n    config.render_program_index,\n    config.edgesOffset,\n    config.numEdges,\n    config.isFullArea != 0u,\n    config.needsFace != 0u,\n    config.area,\n    config.minX,\n    config.minY,\n    config.maxX,\n    config.maxY,\n    config.minXCount,\n    config.minYCount,\n    config.maxXCount,\n    config.maxYCount\n  );\n}\n",imports:[kn,qn]}),co=uo;St.register("wgsl_test_render_program",uo);const po=e=>{let t={};const i=e.workgroupSize;let n="",r="";return n+=`\n\n\n\n\n@group(0) @binding(0)\nvar<storage, read> input: array<f32>;\n@group(0) @binding(1)\nvar<storage, read_write> output: array<f32>;\n\nvar<workgroup> scratch: array<f32, ${xt(i)}>;\n`,r+=`\n@compute @workgroup_size(${i})\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n  var value = input[ global_id.x ];\n  scratch[ local_id.x ] = value;\n\n  \n  for ( var j = 0u; j < 1000u; j += 1u ) {\n    for ( var i = 0u; i < ${xt(Math.log2(i))}; i += 1u ) {\n      workgroupBarrier();\n\n      if ( local_id.x >= 1u << i ) {\n        let otherValue = scratch[ local_id.x - ( 1u << i ) ];\n        value = otherValue + value;\n      }\n\n      workgroupBarrier();\n      scratch[ local_id.x ] = value;\n    }\n  }\n\n  output[ global_id.x ] = scratch[ local_id.x ];\n}\n`,t.before=n,t.after=r,t.imports=_.uniq([]).sort(),t},mo=po;St.register("wgsl_expensive_operation",po);const go=e=>{let t={};let i="",n="";return i+=`\n\n\n\n\n@group(0) @binding(0)\nvar<storage, read_write> buffer_a: array<f32>;\n@group(0) @binding(1)\nvar<storage, read_write> buffer_b: array<f32>;\n@group(0) @binding(2)\nvar<storage, read_write> buffer_c: array<f32>;\n@group(0) @binding(3)\nvar<storage, read_write> buffer_d: array<f32>;\n@group(0) @binding(4)\nvar output: texture_storage_2d<${e.preferredStorageFormat}, write>;\n`,n+="\n@compute @workgroup_size(16, 16)\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n  let index = global_id.y * 16u + global_id.x;\n  let bufferSum = buffer_a[ index ] + buffer_b[ index ] + buffer_c[ index ] + buffer_d[ index ];\n  textureStore( output, global_id.xy, vec4( ( 1f / ( 4f * ( 1f + f32( index ) ) ) ) * bufferSum, 0.1f, 0f, 1f ) );\n}\n",t.before=i,t.after="\n@compute @workgroup_size(16, 16)\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n  let index = global_id.y * 16u + global_id.x;\n  let bufferSum = buffer_a[ index ] + buffer_b[ index ] + buffer_c[ index ] + buffer_d[ index ];\n  textureStore( output, global_id.xy, vec4( ( 1f / ( 4f * ( 1f + f32( index ) ) ) ) * bufferSum, 0.1f, 0f, 1f ) );\n}\n",t.imports=_.uniq([]).sort(),t},fo=go;St.register("wgsl_fake_combine_to_texture",go);const yo=e=>{let t={};let i="",n="";return i+="\n\n\n\n\n@group(0) @binding(0)\nvar<storage, read_write> input: array<f32>;\n@group(0) @binding(1)\nvar<storage, read_write> output: array<f32>;\n",n+=`\n@compute @workgroup_size(${e.workgroupSize})\nfn main(\n  @builtin(global_invocation_id) global_id: vec3u,\n  @builtin(local_invocation_id) local_id: vec3u,\n  @builtin(workgroup_id) workgroup_id: vec3u\n) {\n  output[ global_id.x ] = input[ global_id.x ];\n}\n`,t.before="\n\n\n\n\n@group(0) @binding(0)\nvar<storage, read_write> input: array<f32>;\n@group(0) @binding(1)\nvar<storage, read_write> output: array<f32>;\n",t.after=n,t.imports=_.uniq([]).sort(),t},Eo=yo;St.register("wgsl_copy_storage_operation",yo);var vo=function(e){return e[e.Box=0]="Box",e[e.Bilinear=1]="Bilinear",e[e.MitchellNetravali=2]="MitchellNetravali",e}(vo||{});const Ao=vo,bo=e=>{if(e===vo.Box)return 1;if(e===vo.Bilinear)return 2;if(e===vo.MitchellNetravali)return 4;throw new Error("Unknown PolygonFilterType: "+e)},So=e=>{if(e===vo.Box)return 0;if(e===vo.Bilinear)return-.5;if(e===vo.MitchellNetravali)return-1.5;throw new Error("Unknown PolygonFilterType: "+e)},_o=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const n=bo(t)*i,r=.5*(n-1);return e.dilated(r)};St.register("PolygonFilterType",vo);const xo=new bt("phetCore");xo.register("Namespace",bt);const wo=xo;function To(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return _.each(i,t=>{if(t)for(const i in t)if(t.hasOwnProperty(i)&&void 0!==t[i]){const n=t[i];_.endsWith(i,"Options")&&"Options"!==i?e[i]=To(e[i]||{},n):e[i]=n}}),e}wo.register("merge",To);const Po=To,Co=(e,t,i,n)=>Po(e,t,i,n);function Vo(){return Co}function Ro(){return Co}function No(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return Co(e,...i)}wo.register("optionize",Vo);class Mo{constructor(e){_defineProperty(this,"objects",[]);const t=Vo()({defaultArguments:[],initialize:e.prototype.initialize,maxSize:100,initialSize:0,useDefaultConstruction:!1},arguments.length<=1?void 0:arguments[1]);for(this._maxPoolSize=t.maxSize,this.partialConstructor=Function.prototype.bind.bind(e,e),this.DefaultConstructor=this.partialConstructor(...t.defaultArguments),this.initialize=t.initialize,this.useDefaultConstruction=t.useDefaultConstruction;this.objects.length<t.initialSize;)this.objects.push(this.createDefaultObject())}createDefaultObject(){return new this.DefaultConstructor}fetch(){return this.objects.length?this.objects.pop():this.createDefaultObject()}create(){let e;for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return this.objects.length?(e=this.objects.pop(),this.initialize.apply(e,i)):this.useDefaultConstruction?(e=this.createDefaultObject(),this.initialize.apply(e,i)):e=new(this.partialConstructor(...i)),e}get poolSize(){return this.objects.length}set maxPoolSize(e){this._maxPoolSize=e}get maxPoolSize(){return this._maxPoolSize}freeToPool(e){this.objects.length<this.maxPoolSize&&this.objects.push(e)}forEach(e){this.objects.forEach(e)}}wo.register("Pool",Mo);const ko=new bt("axon"),Lo={},Io=e=>{window.phet&&window.phet.chipper&&window.phet.chipper.queryParameters&&phet.chipper.queryParameters.deprecationWarnings&&(Lo.hasOwnProperty(e)||(Lo[e]=!0,console.warn("Deprecation warning: "+e)))};wo.register("deprecationWarning",Io);const Bo=Io;class Do{constructor(e){Bo("EnumerationDeprecated should be exchanged for classes that extend EnumerationValue, see WilderEnumerationPatterns for examples.");e.keys,e.map;const t=e.keys||Object.keys(e.map),i=e.map||{};e=Po({phetioDocumentation:null,beforeFreeze:null},e),this.phetioDocumentation=e.phetioDocumentation,this.KEYS=t,this.VALUES=[],t.forEach(e=>{const t=i[e]||{};t.name=e,t.toString=()=>e,this[e]=t,this.VALUES.push(t)}),e.beforeFreeze&&e.beforeFreeze(this)}toString(){return this.KEYS.join(", ")}includes(e){return _.includes(this.VALUES,e)}getValue(e){return this[e]}getKey(e){return e.name}get values(){return this.VALUES}get keys(){return this.KEYS}get enumeration(){return this}static byKeys(e,t){return new Do(Po({keys:e},t))}static byMap(e,t){return new Do(Po({map:e},t))}}wo.register("EnumerationDeprecated",Do);const Oo=Do,qo=["string","number","boolean","function"],Yo=["valueType","validValues","valueComparisonStrategy","isValidValue","phetioType","validators"];class Ho{static getValidatorValidationError(e){if(!(e instanceof Object))return"validator must be an Object";if(!(e.hasOwnProperty("isValidValue")||e.hasOwnProperty("valueType")||e.hasOwnProperty("validValues")||e.hasOwnProperty("valueComparisonStrategy")||e.hasOwnProperty("phetioType")||e.hasOwnProperty("validators")))return this.combineErrorMessages("validator must have at least one of: "+Yo.join(","),e.validationMessage);if(e.hasOwnProperty("valueType")){const t=Ho.getValueOrElementTypeValidationError(e.valueType);if(t)return this.combineErrorMessages(`Invalid valueType: ${e.valueType}, error: ${t}`,e.validationMessage)}if(e.hasOwnProperty("isValidValue")&&"function"!=typeof e.isValidValue&&null!==e.isValidValue&&void 0!==e.isValidValue)return this.combineErrorMessages("isValidValue must be a function: "+e.isValidValue,e.validationMessage);if(e.hasOwnProperty("valueComparisonStrategy")&&"reference"!==e.valueComparisonStrategy&&"lodashDeep"!==e.valueComparisonStrategy&&"equalsFunction"!==e.valueComparisonStrategy&&"function"!=typeof e.isValidValue)return this.combineErrorMessages('valueComparisonStrategy must be "reference", "lodashDeep", \n        "equalsFunction", or a comparison function: '+e.valueComparisonStrategy,e.validationMessage);if(void 0!==e.validValues&&null!==e.validValues){if(!Array.isArray(e.validValues))return this.combineErrorMessages("validValues must be an array: "+e.validValues,e.validationMessage);const t=_.omit(e,"validValues");if(Ho.containsValidatorKey(t))for(let i=0;i<e.validValues.length;i++){const n=e.validValues[i],r=Ho.getValidationError(n,t);if(r)return this.combineErrorMessages(`Item not valid in validValues: ${n}, error: ${r}`,e.validationMessage)}}if(e.hasOwnProperty("phetioType")){if(!e.phetioType)return this.combineErrorMessages("falsey phetioType provided",e.validationMessage);if(!e.phetioType.validator)return this.combineErrorMessages("validator needed for phetioType: "+e.phetioType.typeName,e.validationMessage);const t=Ho.getValidatorValidationError(e.phetioType.validator);if(t)return this.combineErrorMessages(t,e.validationMessage)}if(e.hasOwnProperty("validators")){const t=e.validators;for(let i=0;i<t.length;i++){const n=t[i],r=Ho.getValidatorValidationError(n);if(r)return this.combineErrorMessages(`validators[${i}] invalid: ${r}`,e.validationMessage)}}return null}static getValueTypeValidatorValidationError(e){return"function"==typeof e||"string"==typeof e||e instanceof Oo||null==e?"string"!=typeof e||_.includes(qo,e)?null:"valueType not a supported primitive types: "+e:"valueType must be {function|string|EnumerationDeprecated|null|undefined}, valueType="+e}static validateValidator(e){0}static containsValidatorKey(e){if(!(e instanceof Object))return!1;for(let t=0;t<Yo.length;t++)if(e.hasOwnProperty(Yo[t]))return!0;return!1}static combineErrorMessages(e,t){return t&&(e=`${"function"==typeof t?t():t}: ${e}`),e}static isValueValid(e,t,i){return null===this.getValidationError(e,t,i)}static getValidationError(e,t,i){const n=Vo()({validateValidator:!0},i);if(n.validateValidator){const e=Ho.getValidatorValidationError(t);if(e)return e}if(t.hasOwnProperty("valueType")){const i=t.valueType;if(Array.isArray(i)){if(!_.some(i.map(i=>!Ho.getValueTypeValidationError(e,i,t.validationMessage))))return this.combineErrorMessages(`value not valid for any valueType in ${i.toString().substring(0,100)}, value: ${e}`,t.validationMessage)}else if(i){const n=Ho.getValueTypeValidationError(e,i,t.validationMessage);if(n)return n}}if(t.validValues){const i=t.valueComparisonStrategy||"reference";if(!t.validValues.some(t=>{if("reference"===i)return t===e;if("equalsFunction"===i){const i=t;return i.equals(e)}return"lodashDeep"===i?_.isEqual(t,e):i(t,e)}))return this.combineErrorMessages("value not in validValues: "+e,t.validationMessage)}if(t.hasOwnProperty("isValidValue")&&!t.isValidValue(e))return this.combineErrorMessages("value failed isValidValue: "+e,t.validationMessage);if(t.hasOwnProperty("phetioType")){const i=Ho.getValidationError(e,t.phetioType.validator,n);if(i)return this.combineErrorMessages(`value failed phetioType validator: ${e}, error: ${i}`,t.validationMessage)}if(t.hasOwnProperty("validators")){const i=t.validators;for(let r=0;r<i.length;r++){const s=i[r],a=Ho.getValidationError(e,s,n);if(a)return this.combineErrorMessages(`Failed validation for validators[${r}]: ${a}`,t.validationMessage)}}return null}static getValueTypeValidationError(e,t,i){return"string"==typeof t&&typeof e!==t?this.combineErrorMessages(`value should have typeof ${t}, value=${e}`,i):t!==Array||Array.isArray(e)?t instanceof Oo&&!t.includes(e)?this.combineErrorMessages("value is not a member of EnumerationDeprecated "+t,i):"function"!=typeof t||e instanceof t?null===t&&null!==e?this.combineErrorMessages("value should be null, value="+e,i):null:this.combineErrorMessages(`value should be instanceof ${t.name}, value=${e}`,i):this.combineErrorMessages("value should have been an array, value="+e,i)}static getValueOrElementTypeValidationError(e){if(Array.isArray(e))for(let t=0;t<e.length;t++){const i=e[t],n=Ho.getValueTypeValidatorValidationError(i);if(n)return"Array value invalid: "+n}else if(e){const t=Ho.getValueTypeValidatorValidationError(e);if(t)return"Value type invalid: "+t}return null}}_defineProperty(Ho,"VALIDATOR_KEYS",Yo),_defineProperty(Ho,"STRING_WITHOUT_TEMPLATE_VARS_VALIDATOR",{valueType:"string",isValidValue:e=>!/\{\{\w*\}\}/.test(e)}),ko.register("Validation",Ho);const Go=(e,t,i)=>{0};ko.register("validate",Go);const Fo=Go,zo=new bt("tandem"),Uo={IO_TYPE_SUFFIX:"IO"};zo.register("PhetioConstants",Uo);const Wo=Uo,Xo={OBJECT_IO_TYPE_NAME:"ObjectIO",EVENT_TYPE_MODEL:"MODEL",PHET_IO_OBJECT_METADATA_DEFAULTS:{phetioTypeName:"ObjectIO",phetioDocumentation:"",phetioState:!0,phetioReadOnly:!1,phetioEventType:"MODEL",phetioHighFrequency:!1,phetioPlayback:!1,phetioDynamicElement:!1,phetioIsArchetype:!1,phetioFeatured:!1,phetioDesigned:!1,phetioArchetypePhetioID:null},METADATA_KEY_NAME:"_metadata",DATA_KEY_NAME:"_data",BASE_TANDEM_CHARACTER_CLASS:"a-zA-Z0-9[\\],",BASE_DYNAMIC_TANDEM_CHARACTER_CLASS:"a-zA-Z0-9[\\],_",BASE_DERIVED_TANDEM_CHARACTER_CLASS:"a-zA-Z0-9[\\],_\\-"};zo.register("TandemConstants",Xo);const jo=Xo,Qo=function(e){};wo.register("assertMutuallyExclusiveOptions",Qo);const Ko=Qo;class Zo{constructor(e){const t=Vo()({displayString:"",validator:null,compositeSchema:null},e);this.displayString=t.displayString,this.validator=t.validator,this.compositeSchema=t.compositeSchema}defaultApplyState(e,t){for(const i in this.compositeSchema)if(this.compositeSchema.hasOwnProperty(i)){const n=this.compositeSchema[i],r=this.getCoreObjectAccessorName(i,e);"fromStateObject"===n.defaultDeserializationMethod?e[r]=this.compositeSchema[i].fromStateObject(t[i]):this.compositeSchema[i].applyState(e[r],t[i])}}defaultToStateObject(e){const t={};for(const i in this.compositeSchema)if(this.compositeSchema.hasOwnProperty(i)){const n=this.getCoreObjectAccessorName(i,e);0,t[i]=this.compositeSchema[i].toStateObject(e[n])}return t}getCoreObjectAccessorName(e,t){const i=e.startsWith("_")?e.substring(1):e,n="_"+i;let r;return r=t.hasOwnProperty(n)?n:i,r}isComposite(){return!!this.compositeSchema}checkStateObjectValid(e,t,i){if(this.isComposite()){const t=e,n=this.compositeSchema;let r=null;if(!t)return r=!1,r;return Object.keys(n).forEach(e=>{"string"==typeof e?(t.hasOwnProperty(e)&&n[e].isStateObjectValid(t[e],!1)||(r=!1),i.push(e)):console.error("key should be a string",e)}),r}{const t=e;return Ho.isValueValid(t,this.validator)}}getRelatedTypes(){const e=[];if(this.compositeSchema){Object.keys(this.compositeSchema).forEach(t=>{this.compositeSchema[t]instanceof el&&e.push(this.compositeSchema[t])})}return e}getStateSchemaAPI(){return this.isComposite()?_.mapValues(this.compositeSchema,e=>e.typeName):this.displayString}static asValue(e,t){return new Zo({validator:t,displayString:e})}}zo.register("StateSchema",Zo);const Jo={validateValidator:!1},$o=e=>{const t=e.indexOf(Wo.IO_TYPE_SUFFIX);return e.substring(0,t)};class el{constructor(e,t){this.typeName=e;const i=t.supertype||el.ObjectIO,n=!!t.toStateObject,r=!!t.applyState,s=!!t.stateSchema,a=Vo()({supertype:el.ObjectIO,methods:{},events:[],metadataDefaults:{},dataDefaults:{},methodOrder:[],parameterTypes:[],documentation:"IO Type for "+$o(e),isFunctionType:!1,toStateObject:i&&i.toStateObject,fromStateObject:i&&i.fromStateObject,stateObjectToCreateElementArguments:i&&i.stateObjectToCreateElementArguments,applyState:i&&i.applyState,stateSchema:null,defaultDeserializationMethod:"fromStateObject",addChildElement:i&&i.addChildElement},t);if(this.supertype=i,this.documentation=a.documentation,this.methods=a.methods,this.events=a.events,this.metadataDefaults=a.metadataDefaults,this.dataDefaults=a.dataDefaults,this.methodOrder=a.methodOrder,this.parameterTypes=a.parameterTypes,this.validator=_.pick(a,Ho.VALIDATOR_KEYS),this.validator.validationMessage=this.validator.validationMessage||"Validation failed IOType Validator: "+this.typeName,this.defaultDeserializationMethod=a.defaultDeserializationMethod,null===a.stateSchema||a.stateSchema instanceof Zo)this.stateSchema=a.stateSchema;else{const e="function"==typeof a.stateSchema?a.stateSchema(this):a.stateSchema;this.stateSchema=new Zo({compositeSchema:e})}this.toStateObject=e=>{let t;return Fo(e,this.validator,Jo),t=!n&&s&&this.stateSchema&&this.stateSchema.isComposite()?this.defaultToStateObject(e):a.toStateObject(e),t},this.fromStateObject=a.fromStateObject,this.stateObjectToCreateElementArguments=a.stateObjectToCreateElementArguments,this.applyState=(e,t)=>{Fo(e,this.validator,Jo),!r&&s&&this.stateSchema&&this.stateSchema.isComposite()?this.defaultApplyState(e,t):a.applyState(e,t)},this.isFunctionType=a.isFunctionType,this.addChildElement=a.addChildElement}defaultToStateObject(e){let t={};return this.supertype&&(t=this.supertype.defaultToStateObject(e)),this.stateSchema&&this.stateSchema.isComposite()?_.merge(t,this.stateSchema.defaultToStateObject(e)):t}defaultApplyState(e,t){this.supertype&&this.supertype.defaultApplyState(e,t),this.stateSchema&&this.stateSchema.isComposite()&&this.stateSchema.defaultApplyState(e,t)}getTypeHierarchy(){const e=[];let t=this;for(;t;)e.push(t),t=t.supertype;return e}extends(e){return this.getTypeHierarchy().includes(e)}getAllMetadataDefaults(){return _.merge({},this.supertype?this.supertype.getAllMetadataDefaults():{},this.metadataDefaults)}getAllDataDefaults(){return _.merge({},this.supertype?this.supertype.getAllDataDefaults():{},this.dataDefaults)}isStateObjectValid(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=!0;if(this.stateSchema){const n=this.stateSchema.checkStateObjectValid(e,t,i);if(null!==n)return n}return this.supertype?n&&this.supertype.isStateObjectValid(e,t,i):!(!this.supertype&&e&&"string"!=typeof e&&!Array.isArray(e))||(Object.keys(e).forEach(e=>{const t=i.includes(e);t||(n=!1)}),n)}validateStateObject(e){this.isStateObjectValid(e,!0)}toString(){return this.typeName}}el.ObjectIO=new el(jo.OBJECT_IO_TYPE_NAME,{isValidValue:()=>!0,supertype:null,documentation:"The root of the IO Type hierarchy",toStateObject:e=>(phet&&phet.tandem&&phet.tandem.Tandem.VALIDATION,null),fromStateObject:()=>{throw new Error("ObjectIO.fromStateObject should not be called")},stateObjectToCreateElementArguments:()=>[],applyState:_.noop,metadataDefaults:jo.PHET_IO_OBJECT_METADATA_DEFAULTS,dataDefaults:{initialState:null},stateSchema:null}),zo.register("IOType",el);const tl=new el("NumberIO",{valueType:"number",documentation:"IO Type for Javascript's number primitive type",toStateObject:_.identity,fromStateObject:e=>e,stateSchema:Zo.asValue("number",{isValidValue:e=>"number"==typeof e&&!isNaN(e)&&e!==Number.POSITIVE_INFINITY&&e!==Number.NEGATIVE_INFINITY})});zo.register("NumberIO",tl);const il=tl,nl=new bt("dot");nl.register("FastArray",window.Float64Array?window.Float64Array:window.Array);const rl=nl,sl=(e,t)=>e.add(t);class al{constructor(e,t){this.x=e,this.y=t}getMagnitude(){return Math.sqrt(this.magnitudeSquared)}get magnitude(){return this.getMagnitude()}getMagnitudeSquared(){return this.x*this.x+this.y*this.y}get magnitudeSquared(){return this.getMagnitudeSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceXY(e,t){const i=this.x-e,n=this.y-t;return Math.sqrt(i*i+n*n)}distanceSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}distanceSquaredXY(e,t){const i=this.x-e,n=this.y-t;return i*i+n*n}dot(e){return this.x*e.x+this.y*e.y}dotXY(e,t){return this.x*e+this.y*t}getAngle(){return Math.atan2(this.y,this.x)}get angle(){return this.getAngle()}angleBetween(e){const t=this.magnitude,i=e.magnitude;return Math.acos(rl.clamp((this.x*e.x+this.y*e.y)/(t*i),-1,1))}equals(e){return this.x===e.x&&this.y===e.y}equalsEpsilon(e,t){return t||(t=0),Math.max(Math.abs(this.x-e.x),Math.abs(this.y-e.y))<=t}isFinite(){return isFinite(this.x)&&isFinite(this.y)}copy(e){return e?e.set(this):ol(this.x,this.y)}crossScalar(e){return this.x*e.y-this.y*e.x}normalized(){const e=this.magnitude;if(0===e)throw new Error("Cannot normalize a zero-magnitude vector");return ol(this.x/e,this.y/e)}roundedSymmetric(){return this.copy().roundSymmetric()}withMagnitude(e){return this.copy().setMagnitude(e)}timesScalar(e){return ol(this.x*e,this.y*e)}times(e){return this.timesScalar(e)}componentTimes(e){return ol(this.x*e.x,this.y*e.y)}plus(e){return ol(this.x+e.x,this.y+e.y)}plusXY(e,t){return ol(this.x+e,this.y+t)}plusScalar(e){return ol(this.x+e,this.y+e)}minus(e){return ol(this.x-e.x,this.y-e.y)}minusXY(e,t){return ol(this.x-e,this.y-t)}minusScalar(e){return ol(this.x-e,this.y-e)}dividedScalar(e){return ol(this.x/e,this.y/e)}negated(){return ol(-this.x,-this.y)}getPerpendicular(){return ol(this.y,-this.x)}get perpendicular(){return this.getPerpendicular()}rotated(e){const t=this.angle+e,i=this.magnitude;return ol(i*Math.cos(t),i*Math.sin(t))}rotateAboutXY(e,t,i){const n=this.x-e,r=this.y-t,s=Math.cos(i),a=Math.sin(i);return this.x=e+n*s-r*a,this.y=t+n*a+r*s,this}rotateAboutPoint(e,t){return this.rotateAboutXY(e.x,e.y,t)}rotatedAboutXY(e,t,i){return ol(this.x,this.y).rotateAboutXY(e,t,i)}rotatedAboutPoint(e,t){return this.rotatedAboutXY(e.x,e.y,t)}blend(e,t){return ol(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)}average(e){return this.blend(e,.5)}static average(e){return _.reduce(e,sl,new al(0,0)).divideScalar(e.length)}toString(){return`Vector2(${this.x}, ${this.y})`}toVector3(){return new bl(this.x,this.y,0)}setXY(e,t){return this.x=e,this.y=t,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}set(e){return this.setXY(e.x,e.y)}setMagnitude(e){const t=e/this.magnitude;return this.multiplyScalar(t)}add(e){return this.setXY(this.x+e.x,this.y+e.y)}addXY(e,t){return this.setXY(this.x+e,this.y+t)}addScalar(e){return this.setXY(this.x+e,this.y+e)}subtract(e){return this.setXY(this.x-e.x,this.y-e.y)}subtractXY(e,t){return this.setXY(this.x-e,this.y-t)}subtractScalar(e){return this.setXY(this.x-e,this.y-e)}multiplyScalar(e){return this.setXY(this.x*e,this.y*e)}multiply(e){return this.multiplyScalar(e)}componentMultiply(e){return this.setXY(this.x*e.x,this.y*e.y)}divideScalar(e){return this.setXY(this.x/e,this.y/e)}negate(){return this.setXY(-this.x,-this.y)}normalize(){const e=this.magnitude;if(0===e)throw new Error("Cannot normalize a zero-magnitude vector");return this.divideScalar(e)}roundSymmetric(){return this.setXY(fl.roundSymmetric(this.x),fl.roundSymmetric(this.y))}rotate(e){const t=this.angle+e,i=this.magnitude;return this.setXY(i*Math.cos(t),i*Math.sin(t))}setPolar(e,t){return this.setXY(e*Math.cos(t),e*Math.sin(t))}toStateObject(){return{x:this.x,y:this.y}}freeToPool(){al.pool.freeToPool(this)}static createPolar(e,t){return new al(0,0).setPolar(e,t)}static fromStateObject(e){return ol(e.x,e.y)}static getAngleBetweenVectors(e,t){const i=t.x-e.x,n=t.y-e.y;return Math.atan2(n,i)}static getDistanceBetweenVectors(e,t){const i=t.x-e.x,n=t.y-e.y;return Math.sqrt(i*i+n*n)}}_defineProperty(al,"pool",new Mo(t=al,{maxSize:1e3,initialize:t.prototype.setXY,defaultArguments:[0,0]})),al.prototype.isVector2=!0,al.prototype.dimension=2,rl.register("Vector2",al);const ol=al.pool.create.bind(al.pool);rl.register("v2",ol);class ll extends al{static mutableOverrideHelper(e){ll.prototype[e]=()=>{throw new Error(`Cannot call mutable method '${e}' on immutable Vector2`)}}}ll.mutableOverrideHelper("setXY"),ll.mutableOverrideHelper("setX"),ll.mutableOverrideHelper("setY"),al.ZERO=new al(0,0),al.X_UNIT=new al(1,0),al.Y_UNIT=new al(0,1);const hl={x:il,y:il};al.Vector2IO=new el("Vector2IO",{valueType:al,stateSchema:hl,toStateObject:e=>e.toStateObject(),fromStateObject:e=>al.fromStateObject(e),documentation:"A numerical object with x and y properties, like {x:3,y:4}"});const ul=Number.MIN_VALUE,cl=2*Math.PI;let dl,pl,ml;const gl={clamp:(e,t,i)=>e<t?t:e>i?i:e,moduloBetweenDown(e,t,i){const n=i-t;let r=(e-t)%n;return r<0&&(r+=n),r+t},moduloBetweenUp:(e,t,i)=>-gl.moduloBetweenDown(-e,-i,-t),rangeInclusive(e,t){if(t<e)return[];const i=new Array(t-e+1);for(let n=e;n<=t;n++)i[n-e]=n;return i},rangeExclusive:(e,t)=>gl.rangeInclusive(e+1,t-1),toRadians:e=>Math.PI*e/180,toDegrees:e=>180*e/Math.PI,mod:(e,t)=>e/t%1==0?0:e%t,gcd(e,t){return Math.abs(0===t?e:this.gcd(t,gl.mod(e,t)))},lcm:(e,t)=>gl.roundSymmetric(Math.abs(e*t)/gl.gcd(e,t)),lineLineIntersection(e,t,i,n){if(e.equals(t)||i.equals(n))return null;const r=e.x-t.x,s=i.x-n.x,a=e.y-t.y,o=i.y-n.y,l=r*o-a*s;if(Math.abs(l)<1e-10)return null;const h=e.x*t.y-e.y*t.x,u=i.x*n.y-i.y*n.x;return new al((h*s-r*u)/l,(h*o-a*u)/l)},circleCenterFromPoints(e,t,i){const n=new al((e.x+t.x)/2,(e.y+t.y)/2),r=new al((t.x+i.x)/2,(t.y+i.y)/2),s=new al(n.x+(t.y-e.y),n.y-(t.x-e.x)),a=new al(r.x+(i.y-t.y),r.y-(i.x-t.x));return gl.lineLineIntersection(n,s,r,a)},pointInCircleFromPoints(e,t,i,n){const r=e.x-n.x,s=e.y-n.y,a=(e.x-n.x)*(e.x-n.x)+(e.y-n.y)*(e.y-n.y),o=t.x-n.x,l=t.y-n.y,h=(t.x-n.x)*(t.x-n.x)+(t.y-n.y)*(t.y-n.y),u=i.x-n.x,c=i.y-n.y,d=(i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y);return r*l*d+s*h*u+a*o*c-a*l*u-s*o*d-r*h*c>0},sphereRayIntersection(e,t,i){i=void 0===i?1e-5:i;const n=new bl(0,0,0),r=t.direction,s=t.position,a=s.minus(n),o=r.dot(a),l=4*o*o-4*(a.magnitudeSquared-e*e);if(l<i)return null;const h=r.dot(n)-r.dot(s),u=Math.sqrt(l)/2,c=h-u,d=h+u;if(d<i)return null;const p=t.pointAtDistance(d),m=p.minus(n).normalized();if(c<i)return{distance:d,hitPoint:p,normal:m.negated(),fromOutside:!1};{const e=t.pointAtDistance(c),i=e.minus(n).normalized();return{distance:c,hitPoint:e,normal:i,fromOutside:!0}}},solveLinearRootsReal:(e,t)=>0===e?0===t?null:[]:[-t/e],solveQuadraticRootsReal(e,t,i){if(0===e||Math.abs(t/e)>1e7||Math.abs(i/e)>1e7)return gl.solveLinearRootsReal(t,i);const n=t*t-4*e*i;if(n<0)return[];const r=Math.sqrt(n);return[(-t-r)/(2*e),(-t+r)/(2*e)]},solveCubicRootsReal(e,t,i,n){let r,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e-7;if(0===e)r=gl.solveQuadraticRootsReal(t,i,n);else{const a=1e7;if(0===e||Math.abs(t/e)>a||Math.abs(i/e)>a||Math.abs(n/e)>a)r=gl.solveQuadraticRootsReal(t,i,n);else if(0===n||Math.abs(e/n)>a||Math.abs(t/n)>a||Math.abs(i/n)>a)r=[0].concat(gl.solveQuadraticRootsReal(e,t,i));else{const a=(3*(i/=e)-(t/=e)*t)/9,o=(-27*(n/=e)+t*(9*i-t*t*2))/54,l=a*a*a+o*o,h=t/3;if(l>s){const e=Math.sqrt(l);r=[gl.cubeRoot(o+e)+gl.cubeRoot(o-e)-h]}else if(l>-s){const e=gl.cubeRoot(o),t=-h-e;r=[2*e-h,t,t]}else{let e=-a*a*a;e=Math.acos(o/Math.sqrt(e));const t=2*Math.sqrt(-a);r=[-h+t*Math.cos(e/3),-h+t*Math.cos((e+2*Math.PI)/3),-h+t*Math.cos((e+4*Math.PI)/3)]}}}return r},cubeRoot:e=>e>=0?Math.pow(e,1/3):-Math.pow(-e,1/3),linear:(e,t,i,n,r)=>(n-i)/(t-e)*(r-e)+i,roundSymmetric:e=>(e<0?-1:1)*Math.round(Math.abs(e)),toFixed(e,t){const i=Math.pow(10,t);return(gl.roundSymmetric(e*i)/i).toFixed(t)},toFixedNumber:(e,t)=>parseFloat(gl.toFixed(e,t)),equalsEpsilon:(e,t,i)=>Math.abs(e-t)<=i,lineSegmentIntersection(e,t,i,n,r,s,a,o){const l=(e,t,i,n,r,s)=>(s-t)*(i-e)-(n-t)*(r-e);if(l(e,t,r,s,a,o)*l(i,n,r,s,a,o)>0||l(r,s,e,t,i,n)*l(a,o,e,t,i,n)>0)return null;const h=(e-i)*(s-o)-(t-n)*(r-a);return Math.abs(h)<1e-10?null:e===r&&t===s||e===a&&t===o?new al(e,t):i===r&&n===s||i===a&&n===o?new al(i,n):new al(((e*n-t*i)*(r-a)-(e-i)*(r*o-s*a))/h,((e*n-t*i)*(s-o)-(t-n)*(r*o-s*a))/h)},distToSegmentSquared(e,t,i){const n=t.distanceSquared(i);if(0===n)return e.distanceSquared(t);const r=((e.x-t.x)*(i.x-t.x)+(e.y-t.y)*(i.y-t.y))/n;let s;return s=r<0?e.distanceSquared(t):r>1?e.distanceSquared(i):e.distanceSquared(new al(t.x+r*(i.x-t.x),t.y+r*(i.y-t.y))),s},distToSegment(e,t,i){return Math.sqrt(this.distToSegmentSquared(e,t,i))},arePointsCollinear:(e,t,i,n)=>(void 0===n&&(n=0),gl.triangleArea(e,t,i)<=n),triangleArea:(e,t,i)=>Math.abs(gl.triangleAreaSigned(e,t,i)),triangleAreaSigned:(e,t,i)=>e.x*(t.y-i.y)+t.x*(i.y-e.y)+i.x*(e.y-t.y),centroidOfPolygon(e){const t=new al(0,0);let i=0;return e.forEach((n,r)=>{const s=e[(r+1)%e.length],a=n.x*s.y-s.x*n.y;i+=a/2,t.addXY((n.x+s.x)*a,(n.y+s.y)*a)}),t.divideScalar(6*i),t},cosh:e=>(Math.exp(e)+Math.exp(-e))/2,sinh:e=>(Math.exp(e)-Math.exp(-e))/2,log10:e=>Math.log(e)/Math.LN10,boxMullerTransform(e,t,i){if(dl=!dl,!dl)return ml*t+e;let n,r;do{n=i.nextDouble(),r=i.nextDouble()}while(n<=ul);return pl=Math.sqrt(-2*Math.log(n))*Math.cos(cl*r),ml=Math.sqrt(-2*Math.log(n))*Math.sin(cl*r),pl*t+e},numberOfDecimalPlaces(e){if(Math.floor(e)===e)return 0;{const t=e.toString();if(t.includes("e")){const e=t.split("e"),i=e[0],n=Number(e[1]),r=i.includes(".")?i.split(".")[1].length:0;return Math.max(r-n,0)}return t.split(".")[1].length}},roundToInterval:(e,t)=>gl.toFixedNumber(gl.roundSymmetric(e/t)*t,gl.numberOfDecimalPlaces(t))};rl.register("Utils",gl),rl.clamp=gl.clamp,rl.moduloBetweenDown=gl.moduloBetweenDown,rl.moduloBetweenUp=gl.moduloBetweenUp,rl.rangeInclusive=gl.rangeInclusive,rl.rangeExclusive=gl.rangeExclusive,rl.toRadians=gl.toRadians,rl.toDegrees=gl.toDegrees,rl.lineLineIntersection=gl.lineLineIntersection,rl.lineSegmentIntersection=gl.lineSegmentIntersection,rl.sphereRayIntersection=gl.sphereRayIntersection,rl.solveQuadraticRootsReal=gl.solveQuadraticRootsReal,rl.solveCubicRootsReal=gl.solveCubicRootsReal,rl.cubeRoot=gl.cubeRoot,rl.linear=gl.linear,rl.boxMullerTransform=gl.boxMullerTransform;const fl=gl;class yl{constructor(e,t,i,n){this.x=e,this.y=t,this.z=i,this.w=n}getMagnitude(){return Math.sqrt(this.magnitudeSquared)}get magnitude(){return this.getMagnitude()}getMagnitudeSquared(){return this.dot(this)}get magnitudeSquared(){return this.getMagnitudeSquared()}distance(e){return this.minus(e).magnitude}distanceXYZW(e,t,i,n){const r=this.x-e,s=this.y-t,a=this.z-i,o=this.w-n;return Math.sqrt(r*r+s*s+a*a+o*o)}distanceSquared(e){return this.minus(e).magnitudeSquared}distanceSquaredXYZW(e,t,i,n){const r=this.x-e,s=this.y-t,a=this.z-i,o=this.w-n;return r*r+s*s+a*a+o*o}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}dotXYZW(e,t,i,n){return this.x*e+this.y*t+this.z*i+this.w*n}angleBetween(e){return Math.acos(rl.clamp(this.normalized().dot(e.normalized()),-1,1))}equals(e){return this.x===e.x&&this.y===e.y&&this.z===e.z&&this.w===e.w}equalsEpsilon(e,t){return t||(t=0),Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)+Math.abs(this.w-e.w)<=t}isFinite(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.z)&&isFinite(this.w)}copy(e){return e?e.set(this):El(this.x,this.y,this.z,this.w)}normalized(){const e=this.magnitude;return this.dividedScalar(e)}roundedSymmetric(){return this.copy().roundSymmetric()}withMagnitude(e){return this.copy().setMagnitude(e)}timesScalar(e){return El(this.x*e,this.y*e,this.z*e,this.w*e)}times(e){return this.timesScalar(e)}componentTimes(e){return El(this.x*e.x,this.y*e.y,this.z*e.z,this.w*e.w)}plus(e){return El(this.x+e.x,this.y+e.y,this.z+e.z,this.w+e.w)}plusXYZW(e,t,i,n){return El(this.x+e,this.y+t,this.z+i,this.w+n)}plusScalar(e){return El(this.x+e,this.y+e,this.z+e,this.w+e)}minus(e){return El(this.x-e.x,this.y-e.y,this.z-e.z,this.w-e.w)}minusXYZW(e,t,i,n){return El(this.x-e,this.y-t,this.z-i,this.w-n)}minusScalar(e){return El(this.x-e,this.y-e,this.z-e,this.w-e)}dividedScalar(e){return El(this.x/e,this.y/e,this.z/e,this.w/e)}negated(){return El(-this.x,-this.y,-this.z,-this.w)}blend(e,t){return this.plus(e.minus(this).times(t))}average(e){return this.blend(e,.5)}toString(){return`Vector4(${this.x}, ${this.y}, ${this.z}, ${this.w})`}toVector3(){return new bl(this.x,this.y,this.z)}setXYZW(e,t,i,n){return this.x=e,this.y=t,this.z=i,this.w=n,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}set(e){return this.setXYZW(e.x,e.y,e.z,e.w)}setMagnitude(e){const t=e/this.magnitude;return this.multiplyScalar(t)}add(e){return this.setXYZW(this.x+e.x,this.y+e.y,this.z+e.z,this.w+e.w)}addXYZW(e,t,i,n){return this.setXYZW(this.x+e,this.y+t,this.z+i,this.w+n)}addScalar(e){return this.setXYZW(this.x+e,this.y+e,this.z+e,this.w+e)}subtract(e){return this.setXYZW(this.x-e.x,this.y-e.y,this.z-e.z,this.w-e.w)}subtractXYZW(e,t,i,n){return this.setXYZW(this.x-e,this.y-t,this.z-i,this.w-n)}subtractScalar(e){return this.setXYZW(this.x-e,this.y-e,this.z-e,this.w-e)}multiplyScalar(e){return this.setXYZW(this.x*e,this.y*e,this.z*e,this.w*e)}multiply(e){return this.multiplyScalar(e)}componentMultiply(e){return this.setXYZW(this.x*e.x,this.y*e.y,this.z*e.z,this.w*e.w)}divideScalar(e){return this.setXYZW(this.x/e,this.y/e,this.z/e,this.w/e)}negate(){return this.setXYZW(-this.x,-this.y,-this.z,-this.w)}normalize(){const e=this.magnitude;if(0===e)throw new Error("Cannot normalize a zero-magnitude vector");return this.divideScalar(e)}roundSymmetric(){return this.setXYZW(fl.roundSymmetric(this.x),fl.roundSymmetric(this.y),fl.roundSymmetric(this.z),fl.roundSymmetric(this.w))}freeToPool(){yl.pool.freeToPool(this)}}_defineProperty(yl,"pool",new Mo(i=yl,{maxSize:1e3,initialize:i.prototype.setXYZW,defaultArguments:[0,0,0,0]})),yl.prototype.isVector4=!0,yl.prototype.dimension=4,rl.register("Vector4",yl);const El=yl.pool.create.bind(yl.pool);rl.register("v4",El);class vl extends yl{static mutableOverrideHelper(e){vl.prototype[e]=()=>{throw new Error(`Cannot call mutable method '${e}' on immutable Vector3`)}}}vl.mutableOverrideHelper("setXYZW"),vl.mutableOverrideHelper("setX"),vl.mutableOverrideHelper("setY"),vl.mutableOverrideHelper("setZ"),vl.mutableOverrideHelper("setW"),yl.ZERO=new yl(0,0,0,0),yl.X_UNIT=new yl(1,0,0,0),yl.Y_UNIT=new yl(0,1,0,0),yl.Z_UNIT=new yl(0,0,1,0),yl.W_UNIT=new yl(0,0,0,1);const Al=(e,t)=>e.add(t);class bl{constructor(e,t,i){this.x=e,this.y=t,this.z=i}getMagnitude(){return Math.sqrt(this.magnitudeSquared)}get magnitude(){return this.getMagnitude()}getMagnitudeSquared(){return this.dot(this)}get magnitudeSquared(){return this.getMagnitudeSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceXYZ(e,t,i){const n=this.x-e,r=this.y-t,s=this.z-i;return Math.sqrt(n*n+r*r+s*s)}distanceSquared(e){const t=this.x-e.x,i=this.y-e.y,n=this.z-e.z;return t*t+i*i+n*n}distanceSquaredXYZ(e,t,i){const n=this.x-e,r=this.y-t,s=this.z-i;return n*n+r*r+s*s}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}dotXYZ(e,t,i){return this.x*e+this.y*t+this.z*i}angleBetween(e){return Math.acos(fl.clamp(this.normalized().dot(e.normalized()),-1,1))}equals(e){return this.x===e.x&&this.y===e.y&&this.z===e.z}equalsEpsilon(e,t){return t||(t=0),Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)<=t}isFinite(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.z)}copy(e){return e?e.set(this):Sl(this.x,this.y,this.z)}cross(e){return Sl(this.y*e.z-this.z*e.y,this.z*e.x-this.x*e.z,this.x*e.y-this.y*e.x)}normalized(){const e=this.magnitude;if(0===e)throw new Error("Cannot normalize a zero-magnitude vector");return Sl(this.x/e,this.y/e,this.z/e)}roundedSymmetric(){return this.copy().roundSymmetric()}withMagnitude(e){return this.copy().setMagnitude(e)}timesScalar(e){return Sl(this.x*e,this.y*e,this.z*e)}times(e){return this.timesScalar(e)}componentTimes(e){return Sl(this.x*e.x,this.y*e.y,this.z*e.z)}plus(e){return Sl(this.x+e.x,this.y+e.y,this.z+e.z)}plusXYZ(e,t,i){return Sl(this.x+e,this.y+t,this.z+i)}plusScalar(e){return Sl(this.x+e,this.y+e,this.z+e)}minus(e){return Sl(this.x-e.x,this.y-e.y,this.z-e.z)}minusXYZ(e,t,i){return Sl(this.x-e,this.y-t,this.z-i)}minusScalar(e){return Sl(this.x-e,this.y-e,this.z-e)}dividedScalar(e){return Sl(this.x/e,this.y/e,this.z/e)}negated(){return Sl(-this.x,-this.y,-this.z)}blend(e,t){return this.plus(e.minus(this).times(t))}average(e){return this.blend(e,.5)}static average(e){return _.reduce(e,Al,new bl(0,0,0)).divideScalar(e.length)}toString(){return`Vector3(${this.x}, ${this.y}, ${this.z})`}toVector2(){return ol(this.x,this.y)}toVector4(){return El(this.x,this.y,this.z,1)}toVector4Zero(){return El(this.x,this.y,this.z,0)}setXYZ(e,t,i){return this.x=e,this.y=t,this.z=i,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}set(e){return this.setXYZ(e.x,e.y,e.z)}setMagnitude(e){const t=e/this.magnitude;return this.multiplyScalar(t)}add(e){return this.setXYZ(this.x+e.x,this.y+e.y,this.z+e.z)}addXYZ(e,t,i){return this.setXYZ(this.x+e,this.y+t,this.z+i)}addScalar(e){return this.setXYZ(this.x+e,this.y+e,this.z+e)}subtract(e){return this.setXYZ(this.x-e.x,this.y-e.y,this.z-e.z)}subtractXYZ(e,t,i){return this.setXYZ(this.x-e,this.y-t,this.z-i)}subtractScalar(e){return this.setXYZ(this.x-e,this.y-e,this.z-e)}multiplyScalar(e){return this.setXYZ(this.x*e,this.y*e,this.z*e)}multiply(e){return this.multiplyScalar(e)}componentMultiply(e){return this.setXYZ(this.x*e.x,this.y*e.y,this.z*e.z)}divideScalar(e){return this.setXYZ(this.x/e,this.y/e,this.z/e)}negate(){return this.setXYZ(-this.x,-this.y,-this.z)}setCross(e){return this.setXYZ(this.y*e.z-this.z*e.y,this.z*e.x-this.x*e.z,this.x*e.y-this.y*e.x)}normalize(){const e=this.magnitude;if(0===e)throw new Error("Cannot normalize a zero-magnitude vector");return this.divideScalar(e)}roundSymmetric(){return this.setXYZ(fl.roundSymmetric(this.x),fl.roundSymmetric(this.y),fl.roundSymmetric(this.z))}toStateObject(){return{x:this.x,y:this.y,z:this.z}}freeToPool(){bl.pool.freeToPool(this)}static slerp(e,t,i){return rl.Quaternion.slerp(new rl.Quaternion,rl.Quaternion.getRotationQuaternion(e,t),i).timesVector3(e)}static fromStateObject(e){return Sl(e.x,e.y,e.z)}}_defineProperty(bl,"pool",new Mo(r=bl,{maxSize:1e3,initialize:r.prototype.setXYZ,defaultArguments:[0,0,0]})),bl.prototype.isVector3=!0,bl.prototype.dimension=3,rl.register("Vector3",bl);const Sl=bl.pool.create.bind(bl.pool);rl.register("v3",Sl);class _l extends bl{static mutableOverrideHelper(e){_l.prototype[e]=()=>{throw new Error(`Cannot call mutable method '${e}' on immutable Vector3`)}}}_l.mutableOverrideHelper("setXYZ"),_l.mutableOverrideHelper("setX"),_l.mutableOverrideHelper("setY"),_l.mutableOverrideHelper("setZ"),bl.ZERO=new bl(0,0,0),bl.X_UNIT=new bl(1,0,0),bl.Y_UNIT=new bl(0,1,0),bl.Z_UNIT=new bl(0,0,1),bl.Vector3IO=new el("Vector3IO",{valueType:bl,documentation:"Basic 3-dimensional vector, represented as (x,y,z)",toStateObject:e=>e.toStateObject(),fromStateObject:bl.fromStateObject,stateSchema:{x:il,y:il,z:il}});class xl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;_defineProperty(this,"vertices",[]),_defineProperty(this,"uvs",[]),_defineProperty(this,"normals",[]),_defineProperty(this,"faces",[]),_defineProperty(this,"lines",[]),this.name=e}static loadOBJ(e){const t=e.split("\n"),i=[];let n="",r="",s=0;const a=()=>(0===i.length&&i.push(new xl),i[i.length-1]),o=e=>new bl(e.length>=2?parseFloat(e[1]):0,e.length>=3?parseFloat(e[2]):0,e.length>=4?parseFloat(e[3]):0);for(let l=0;l<t.length;l++){let e=t[l];e.includes("#")&&(e=e.substring(0,e.indexOf("#"))),e=e.replace(/\s+/g," ").trim();const h=e.split(" ");if(h.length)switch(h[0].toLowerCase()){case"o":{const e=new xl(h[1]||"");i.push(e),r="",s=0;break}case"g":r=h[1];break;case"v":a().vertices.push(o(h));break;case"vt":a().uvs.push(o(h));break;case"vn":a().normals.push(o(h));break;case"l":{const e=h.length-1,t=new Tl;for(let i=0;i<e;i++){const e=h[i+1].split("/");let n=parseInt(e[0],10);n<0&&(n=a().vertices.length+n+1),t.vertexIndices.push(n-1),t.uvIndices.push(e.length>1&&e[1]?parseInt(e[1],10)-1:n-1)}a().lines.push(t);break}case"s":s="off"===h[1].toLowerCase()?0:parseInt(h[1],10);break;case"f":{const e=h.length-1,t=new wl(n,r,s);for(let i=0;i<e;i++){const e=h[i+1].split("/");let n=parseInt(e[0],10);n<0&&(n=a().vertices.length+n+1),t.vertexIndices.push(n-1),t.uvIndices.push(e.length>1&&e[1]?parseInt(e[1],10)-1:n-1),t.normalIndices.push(e.length>2?parseInt(e[2],10)-1:n-1)}a().faces.push(t);break}case"mtllib":break;case"usemtl":h.length>=2&&(n=h[1])}}return i}}class wl{constructor(e,t,i){_defineProperty(this,"vertexIndices",[]),_defineProperty(this,"uvIndices",[]),_defineProperty(this,"normalIndices",[]),this.material=e,this.group=t,this.smoothingGroup=i}}class Tl{constructor(){_defineProperty(this,"vertexIndices",[]),_defineProperty(this,"uvIndices",[])}}St.register("Mesh",xl);var Pl=function(e){return e[e.Normal=0]="Normal",e[e.Multiply=1]="Multiply",e[e.Screen=2]="Screen",e[e.Overlay=3]="Overlay",e[e.Darken=4]="Darken",e[e.Lighten=5]="Lighten",e[e.ColorDodge=6]="ColorDodge",e[e.ColorBurn=7]="ColorBurn",e[e.HardLight=8]="HardLight",e[e.SoftLight=9]="SoftLight",e[e.Difference=10]="Difference",e[e.Exclusion=11]="Exclusion",e[e.Hue=12]="Hue",e[e.Saturation=13]="Saturation",e[e.Color=14]="Color",e[e.Luminosity=15]="Luminosity",e}(Pl||{});const Cl=Pl;St.register("RenderBlendType",Pl);const Vl={BlendNormal:Pl.Normal,BlendMultiply:Pl.Multiply,BlendScreen:Pl.Screen,BlendOverlay:Pl.Overlay,BlendDarken:Pl.Darken,BlendLighten:Pl.Lighten,BlendColorDodge:Pl.ColorDodge,BlendColorBurn:Pl.ColorBurn,BlendHardLight:Pl.HardLight,BlendSoftLight:Pl.SoftLight,BlendDifference:Pl.Difference,BlendExclusion:Pl.Exclusion,BlendHue:Pl.Hue,BlendSaturation:Pl.Saturation,BlendColor:Pl.Color,BlendLuminosity:Pl.Luminosity};var Rl=function(e){return e[e.Over=0]="Over",e[e.In=1]="In",e[e.Out=2]="Out",e[e.Atop=3]="Atop",e[e.Xor=4]="Xor",e[e.Plus=5]="Plus",e[e.PlusLighter=6]="PlusLighter",e}(Rl||{});const Nl=Rl;St.register("RenderComposeType",Rl);const Ml={ComposeOver:Rl.Over,ComposeIn:Rl.In,ComposeOut:Rl.Out,ComposeAtop:Rl.Atop,ComposeXor:Rl.Xor,ComposePlus:Rl.Plus,ComposePlusLighter:Rl.PlusLighter};var kl=function(e){return e[e.Pad=0]="Pad",e[e.Reflect=1]="Reflect",e[e.Repeat=2]="Repeat",e}(kl||{});const Ll=kl;St.register("RenderExtend",kl);const Il={ExtendPad:kl.Pad,ExtendReflect:kl.Reflect,ExtendRepeat:kl.Repeat};class Bl{constructor(e,t,i){this.needsFace=e,this.needsArea=t,this.needsCentroid=i}}St.register("RenderProgramNeeds",Bl);const Dl=new el("InfiniteNumberIO",{valueType:"number",documentation:"IO Type for Javascript's number primitive type",toStateObject:e=>e===Number.POSITIVE_INFINITY?"POSITIVE_INFINITY":e===Number.NEGATIVE_INFINITY?"NEGATIVE_INFINITY":e,fromStateObject:e=>"POSITIVE_INFINITY"===e?Number.POSITIVE_INFINITY:"NEGATIVE_INFINITY"===e?Number.NEGATIVE_INFINITY:e,stateSchema:Zo.asValue("'POSITIVE_INFINITY'|'NEGATIVE_INFINITY'|number",{isValidValue:e=>"POSITIVE_INFINITY"===e||"NEGATIVE_INFINITY"===e||"number"==typeof e&&!isNaN(e)})});zo.register("InfiniteNumberIO",Dl);const Ol=Dl,ql={min:Ol,max:Ol};class Yl{constructor(e,t){this._min=e,this._max=t}getMin(){return this._min}get min(){return this.getMin()}set min(e){this.setMin(e)}setMin(e){this._min=e}getMax(){return this._max}get max(){return this.getMax()}set max(e){this.setMax(e)}setMax(e){this._max=e}setMinMax(e,t){return this._min=e,this._max=t,this}addValue(e){this._min=Math.min(this._min,e),this._max=Math.max(this._max,e)}withValue(e){return new Yl(Math.min(this._min,e),Math.max(this._max,e))}copy(){return new Yl(this._min,this._max)}getLength(){return this._max-this._min}getCenter(){return(this._max+this._min)/2}contains(e){return e>=this._min&&e<=this._max}containsRange(e){return this._min<=e.min&&this._max>=e.max}intersects(e){return this._max>=e.min&&e.max>=this._min}intersectsExclusive(e){return this._max>e.min&&e.max>this._min}union(e){return new Yl(Math.min(this.min,e.min),Math.max(this.max,e.max))}intersection(e){return new Yl(Math.max(this.min,e.min),Math.min(this.max,e.max))}includeRange(e){return this.setMinMax(Math.min(this.min,e.min),Math.max(this.max,e.max))}constrainRange(e){return this.setMinMax(Math.max(this.min,e.min),Math.min(this.max,e.max))}shifted(e){return new Yl(this.min+e,this.max+e)}toString(){return`[Range (min:${this._min} max:${this._max})]`}constrainValue(e){return Math.min(Math.max(e,this._min),this._max)}equals(e){return this.constructor===e.constructor&&this._min===e.min&&this._max===e.max}equalsEpsilon(e,t){return this.constructor===e.constructor&&Math.abs(this._min-e.min)<=t&&Math.abs(this._max-e.max)<=t}getNormalizedValue(e){return(e-this.min)/this.getLength()}expandNormalizedValue(e){return e*this.getLength()+this.min}get defaultValue(){throw new Error("defaultValue is undefined, did you mean to use RangeWithValue?")}toStateObject(){return{min:Ol.toStateObject(this.min),max:Ol.toStateObject(this.max)}}static fromStateObject(e){return new Yl(Ol.fromStateObject(e.min),Ol.fromStateObject(e.max))}}_defineProperty(Yl,"RangeIO",new el("RangeIO",{valueType:s=Yl,documentation:'A range with "min" and "max" members.',stateSchema:ql,toStateObject:e=>e.toStateObject(),fromStateObject:e=>s.fromStateObject(e)})),_defineProperty(Yl,"EVERYTHING",new s(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY)),_defineProperty(Yl,"NOTHING",new s(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY)),rl.register("Range",Yl);const Hl=Yl;class Gl{toString(){return this.name}isEnumerationValue(){return!0}constructor(){this.constructor;this._name=null,this._enumeration=null}set name(e){this._name=e}get name(){return this._name}set enumeration(e){this._enumeration=e}get enumeration(){return this._enumeration}}_defineProperty(Gl,"sealedCache",new Set),wo.register("EnumerationValue",Gl);const Fl=Gl;function zl(e){const t=[e];let i=e.prototype;for(;i&&(i=Object.getPrototypeOf(i));)i.constructor&&t.push(i.constructor);return t}wo.register("inheritance",zl);const Ul=zl;class Wl{constructor(e,t){const i=Vo()({phetioDocumentation:"",instanceType:e},t);this.phetioDocumentation=i.phetioDocumentation;const n=i.instanceType,r=_.reverse(Ul(e));this.keys=[],this.values=[],r.forEach(t=>{Object.keys(t).forEach(i=>{const r=t[i];r instanceof n&&(this.keys.push(i),this.values.push(r),r instanceof e&&(r.name=i,r.enumeration=this))})}),this.Enumeration=e,Fl.sealedCache.add(e)}getKey(e){return e.name}getValue(e){return this.Enumeration[e]}includes(e){return this.values.includes(e)}}wo.register("Enumeration",Wl);const Xl=Wl;class jl extends Fl{static fromLayoutOrientation(e){return"horizontal"===e?jl.HORIZONTAL:jl.VERTICAL}constructor(e,t,i,n,r,s,a,o,l,h,u,c,d,p,m,g,f,y,E){super(),this.coordinate=e,this.centerCoordinate=t,this.minCoordinate=i,this.maxCoordinate=n,this.minSide=r,this.maxSide=s,this.minSize=a,this.maxSize=o,this.rectCoordinate=l,this.rectSize=h,this.flowBoxOrientation=u,this.size=c,this.line=d,this.preferredSize=p,this.localPreferredSize=m,this.sizable=g,this.ariaOrientation=u,this.modelToView=f,this.viewToModel=y,this.toVector=E}}_defineProperty(jl,"HORIZONTAL",new(a=jl)("x","centerX","minX","maxX","left","right","minWidth","maxWidth","rectX","rectWidth","horizontal","width","column","preferredWidth","localPreferredWidth","widthSizable",(e,t)=>e.modelToViewX(t),(e,t)=>e.viewToModelX(t),(e,t,i)=>new i(e,t,0,0))),_defineProperty(jl,"VERTICAL",new a("y","centerY","minY","maxY","top","bottom","minHeight","maxHeight","rectY","rectHeight","vertical","height","row","preferredHeight","localPreferredHeight","heightSizable",(e,t)=>e.modelToViewY(t),(e,t)=>e.viewToModelY(t),(e,t,i)=>new i(t,e,0,0))),_defineProperty(jl,"enumeration",new Xl(a,{phetioDocumentation:"Horizontal or vertical orientation"})),jl.HORIZONTAL.opposite=jl.VERTICAL,jl.VERTICAL.opposite=jl.HORIZONTAL,wo.register("Orientation",jl);const Ql=jl,Kl=new al(0,0);class Zl{constructor(e,t,i,n){this.minX=e,this.minY=t,this.maxX=i,this.maxY=n}getWidth(){return this.maxX-this.minX}get width(){return this.getWidth()}getHeight(){return this.maxY-this.minY}get height(){return this.getHeight()}getX(){return this.minX}get x(){return this.getX()}getY(){return this.minY}get y(){return this.getY()}getMinX(){return this.minX}getMinY(){return this.minY}getMaxX(){return this.maxX}getMaxY(){return this.maxY}getLeft(){return this.minX}get left(){return this.minX}getTop(){return this.minY}get top(){return this.minY}getRight(){return this.maxX}get right(){return this.maxX}getBottom(){return this.maxY}get bottom(){return this.maxY}getCenterX(){return(this.maxX+this.minX)/2}get centerX(){return this.getCenterX()}getCenterY(){return(this.maxY+this.minY)/2}get centerY(){return this.getCenterY()}getLeftTop(){return new al(this.minX,this.minY)}get leftTop(){return this.getLeftTop()}getCenterTop(){return new al(this.getCenterX(),this.minY)}get centerTop(){return this.getCenterTop()}getRightTop(){return new al(this.maxX,this.minY)}get rightTop(){return this.getRightTop()}getLeftCenter(){return new al(this.minX,this.getCenterY())}get leftCenter(){return this.getLeftCenter()}getCenter(){return new al(this.getCenterX(),this.getCenterY())}get center(){return this.getCenter()}getRightCenter(){return new al(this.maxX,this.getCenterY())}get rightCenter(){return this.getRightCenter()}getLeftBottom(){return new al(this.minX,this.maxY)}get leftBottom(){return this.getLeftBottom()}getCenterBottom(){return new al(this.getCenterX(),this.maxY)}get centerBottom(){return this.getCenterBottom()}getRightBottom(){return new al(this.maxX,this.maxY)}get rightBottom(){return this.getRightBottom()}isEmpty(){return this.getWidth()<0||this.getHeight()<0}isFinite(){return isFinite(this.minX)&&isFinite(this.minY)&&isFinite(this.maxX)&&isFinite(this.maxY)}hasNonzeroArea(){return this.getWidth()>0&&this.getHeight()>0}isValid(){return!this.isEmpty()&&this.isFinite()}closestPointTo(e){return this.containsCoordinates(e.x,e.y)?e:this.getConstrainedPoint(e)}closestBoundaryPointTo(e){if(this.containsCoordinates(e.x,e.y)){const t=e.x<this.centerX?this.minX:this.maxX,i=e.y<this.centerY?this.minY:this.maxY;return Math.abs(t-e.x)<Math.abs(i-e.y)?new al(t,e.y):new al(e.x,i)}return this.getConstrainedPoint(e)}getConstrainedPoint(e){const t=Math.max(Math.min(e.x,this.maxX),this.x),i=Math.max(Math.min(e.y,this.maxY),this.y);return new al(t,i)}containsCoordinates(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}containsPoint(e){return this.containsCoordinates(e.x,e.y)}containsBounds(e){return this.minX<=e.minX&&this.maxX>=e.maxX&&this.minY<=e.minY&&this.maxY>=e.maxY}intersectsBounds(e){const t=Math.max(this.minX,e.minX),i=Math.max(this.minY,e.minY),n=Math.min(this.maxX,e.maxX),r=Math.min(this.maxY,e.maxY);return n-t>=0&&r-i>=0}minimumDistanceToPointSquared(e){const t=e.x<this.minX?this.minX:e.x>this.maxX?this.maxX:null,i=e.y<this.minY?this.minY:e.y>this.maxY?this.maxY:null;let n;if(null===t&&null===i)return 0;if(null===t)return n=i-e.y,n*n;if(null===i)return n=t-e.x,n*n;{const n=t-e.x,r=i-e.y;return n*n+r*r}}maximumDistanceToPointSquared(e){let t=e.x>this.getCenterX()?this.minX:this.maxX,i=e.y>this.getCenterY()?this.minY:this.maxY;return t-=e.x,i-=e.y,t*t+i*i}toString(){return`[x:(${this.minX},${this.maxX}),y:(${this.minY},${this.maxY})]`}equals(e){return this.minX===e.minX&&this.minY===e.minY&&this.maxX===e.maxX&&this.maxY===e.maxY}equalsEpsilon(e,t){t=void 0!==t?t:0;const i=this.isFinite(),n=e.isFinite();return i&&n?Math.abs(this.minX-e.minX)<t&&Math.abs(this.minY-e.minY)<t&&Math.abs(this.maxX-e.maxX)<t&&Math.abs(this.maxY-e.maxY)<t:i===n&&(this===e||(isFinite(this.minX+e.minX)?Math.abs(this.minX-e.minX)<t:this.minX===e.minX)&&(isFinite(this.minY+e.minY)?Math.abs(this.minY-e.minY)<t:this.minY===e.minY)&&(isFinite(this.maxX+e.maxX)?Math.abs(this.maxX-e.maxX)<t:this.maxX===e.maxX)&&(isFinite(this.maxY+e.maxY)?Math.abs(this.maxY-e.maxY)<t:this.maxY===e.maxY))}copy(e){return e?e.set(this):Jl(this.minX,this.minY,this.maxX,this.maxY)}union(e){return Jl(Math.min(this.minX,e.minX),Math.min(this.minY,e.minY),Math.max(this.maxX,e.maxX),Math.max(this.maxY,e.maxY))}intersection(e){return Jl(Math.max(this.minX,e.minX),Math.max(this.minY,e.minY),Math.min(this.maxX,e.maxX),Math.min(this.maxY,e.maxY))}withCoordinates(e,t){return Jl(Math.min(this.minX,e),Math.min(this.minY,t),Math.max(this.maxX,e),Math.max(this.maxY,t))}withPoint(e){return this.withCoordinates(e.x,e.y)}withX(e){return this.copy().addX(e)}withY(e){return this.copy().addY(e)}withMinX(e){return Jl(e,this.minY,this.maxX,this.maxY)}withMinY(e){return Jl(this.minX,e,this.maxX,this.maxY)}withMaxX(e){return Jl(this.minX,this.minY,e,this.maxY)}withMaxY(e){return Jl(this.minX,this.minY,this.maxX,e)}roundedOut(){return Jl(Math.floor(this.minX),Math.floor(this.minY),Math.ceil(this.maxX),Math.ceil(this.maxY))}roundedIn(){return Jl(Math.ceil(this.minX),Math.ceil(this.minY),Math.floor(this.maxX),Math.floor(this.maxY))}transformed(e){return this.copy().transform(e)}dilated(e){return this.dilatedXY(e,e)}dilatedX(e){return Jl(this.minX-e,this.minY,this.maxX+e,this.maxY)}dilatedY(e){return Jl(this.minX,this.minY-e,this.maxX,this.maxY+e)}dilatedXY(e,t){return Jl(this.minX-e,this.minY-t,this.maxX+e,this.maxY+t)}eroded(e){return this.dilated(-e)}erodedX(e){return this.dilatedX(-e)}erodedY(e){return this.dilatedY(-e)}erodedXY(e,t){return this.dilatedXY(-e,-t)}withOffsets(e,t,i,n){return Jl(this.minX-e,this.minY-t,this.maxX+i,this.maxY+n)}shiftedX(e){return Jl(this.minX+e,this.minY,this.maxX+e,this.maxY)}shiftedY(e){return Jl(this.minX,this.minY+e,this.maxX,this.maxY+e)}shiftedXY(e,t){return Jl(this.minX+e,this.minY+t,this.maxX+e,this.maxY+t)}shifted(e){return this.shiftedXY(e.x,e.y)}blend(e,t){const i=1-t;return Jl(i*this.minX+t*e.minX,i*this.minY+t*e.minY,i*this.maxX+t*e.maxX,i*this.maxY+t*e.maxY)}setMinMax(e,t,i,n){return this.minX=e,this.minY=t,this.maxX=i,this.maxY=n,this}setMinX(e){return this.minX=e,this}setMinY(e){return this.minY=e,this}setMaxX(e){return this.maxX=e,this}setMaxY(e){return this.maxY=e,this}set(e){return this.setMinMax(e.minX,e.minY,e.maxX,e.maxY)}includeBounds(e){return this.setMinMax(Math.min(this.minX,e.minX),Math.min(this.minY,e.minY),Math.max(this.maxX,e.maxX),Math.max(this.maxY,e.maxY))}constrainBounds(e){return this.setMinMax(Math.max(this.minX,e.minX),Math.max(this.minY,e.minY),Math.min(this.maxX,e.maxX),Math.min(this.maxY,e.maxY))}addCoordinates(e,t){return this.setMinMax(Math.min(this.minX,e),Math.min(this.minY,t),Math.max(this.maxX,e),Math.max(this.maxY,t))}addPoint(e){return this.addCoordinates(e.x,e.y)}addX(e){return this.minX=Math.min(e,this.minX),this.maxX=Math.max(e,this.maxX),this}addY(e){return this.minY=Math.min(e,this.minY),this.maxY=Math.max(e,this.maxY),this}roundOut(){return this.setMinMax(Math.floor(this.minX),Math.floor(this.minY),Math.ceil(this.maxX),Math.ceil(this.maxY))}roundIn(){return this.setMinMax(Math.ceil(this.minX),Math.ceil(this.minY),Math.floor(this.maxX),Math.floor(this.maxY))}transform(e){if(this.isEmpty())return this;if(e.isIdentity())return this;const t=this.minX,i=this.minY,n=this.maxX,r=this.maxY;return this.set(Zl.NOTHING),this.addPoint(e.multiplyVector2(Kl.setXY(t,i))),this.addPoint(e.multiplyVector2(Kl.setXY(t,r))),this.addPoint(e.multiplyVector2(Kl.setXY(n,i))),this.addPoint(e.multiplyVector2(Kl.setXY(n,r))),this}dilate(e){return this.dilateXY(e,e)}dilateX(e){return this.setMinMax(this.minX-e,this.minY,this.maxX+e,this.maxY)}dilateY(e){return this.setMinMax(this.minX,this.minY-e,this.maxX,this.maxY+e)}dilateXY(e,t){return this.setMinMax(this.minX-e,this.minY-t,this.maxX+e,this.maxY+t)}erode(e){return this.dilate(-e)}erodeX(e){return this.dilateX(-e)}erodeY(e){return this.dilateY(-e)}erodeXY(e,t){return this.dilateXY(-e,-t)}offset(e,t,i,n){return Jl(this.minX-e,this.minY-t,this.maxX+i,this.maxY+n)}shiftX(e){return this.setMinMax(this.minX+e,this.minY,this.maxX+e,this.maxY)}shiftY(e){return this.setMinMax(this.minX,this.minY+e,this.maxX,this.maxY+e)}shiftXY(e,t){return this.setMinMax(this.minX+e,this.minY+t,this.maxX+e,this.maxY+t)}shift(e){return this.shiftXY(e.x,e.y)}getXRange(){return new Hl(this.minX,this.maxX)}setXRange(e){return this.setMinMax(e.min,this.minY,e.max,this.maxY)}get xRange(){return this.getXRange()}set xRange(e){this.setXRange(e)}getYRange(){return new Hl(this.minY,this.maxY)}setYRange(e){return this.setMinMax(this.minX,e.min,this.maxX,e.max)}get yRange(){return this.getYRange()}set yRange(e){this.setYRange(e)}getClosestPoint(e,t,i){return i?i.setXY(e,t):i=new al(e,t),i.x<this.minX&&(i.x=this.minX),i.x>this.maxX&&(i.x=this.maxX),i.y<this.minY&&(i.y=this.minY),i.y>this.maxY&&(i.y=this.maxY),i}freeToPool(){Zl.pool.freeToPool(this)}static rect(e,t,i,n){return Jl(e,t,e+i,t+n)}static oriented(e,t,i,n,r){return e===Ql.HORIZONTAL?new Zl(t,i,n,r):new Zl(i,t,r,n)}static point(e,t){if(e instanceof al){const t=e;return Jl(t.x,t.y,t.x,t.y)}return Jl(e,t,e,t)}}_defineProperty(Zl,"pool",new Mo(o=Zl,{maxSize:1e3,initialize:o.prototype.setMinMax,defaultArguments:[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY]})),_defineProperty(Zl,"NOTHING",new o(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY)),_defineProperty(Zl,"EVERYTHING",new o(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY)),_defineProperty(Zl,"Bounds2IO",new el("Bounds2IO",{valueType:o,documentation:"a 2-dimensional bounds rectangle",toStateObject:e=>({minX:e.minX,minY:e.minY,maxX:e.maxX,maxY:e.maxY}),fromStateObject:e=>new o(Ol.fromStateObject(e.minX),Ol.fromStateObject(e.minY),Ol.fromStateObject(e.maxX),Ol.fromStateObject(e.maxY)),stateSchema:{minX:Ol,maxX:Ol,minY:Ol,maxY:Ol}})),rl.register("Bounds2",Zl);const Jl=Zl.pool.create.bind(Zl.pool);rl.register("b2",Jl),Zl.prototype.isBounds=!0,Zl.prototype.dimension=2;class $l{constructor(){_defineProperty(this,"face",null),_defineProperty(this,"area",0),_defineProperty(this,"centroid",new al(0,0)),_defineProperty(this,"minX",0),_defineProperty(this,"minY",0),_defineProperty(this,"maxX",0),_defineProperty(this,"maxY",0)}set(e,t,i,n,r,s,a){return this.face=e,this.area=t,this.centroid.set(i),this.minX=n,this.minY=r,this.maxX=s,this.maxY=a,this}getFace(){return this.face?this.face:SR.fromBoundsValues(this.minX,this.minY,this.maxX,this.maxY)}getBounds(){return new Zl(this.minX,this.minY,this.maxX,this.maxY)}getCenterX(){return(this.minX+this.maxX)/2}getCenterY(){return(this.minY+this.maxY)/2}hasArea(){return isFinite(this.area)}hasCentroid(){return this.centroid.isFinite()}writeBoundsCentroid(e){return e.setXY((this.minX+this.maxX)/2,(this.minY+this.maxY)/2),e}}St.register("RenderEvaluationContext",$l);const eh=Float64Array;class th{constructor(){_defineProperty(this,"data",new eh(64)),_defineProperty(this,"dataLength",0)}reset(){this.dataLength=0}getLength(){return this.dataLength/4}getCurrentIndex(){return this.dataLength}getLastIndex(){return this.dataLength-4}push(e){const t=this.dataLength;return this.dataLength+=4,this.data[t]=e.x,this.data[t+1]=e.y,this.data[t+2]=e.z,this.data[t+3]=e.w,e}pushValues(e,t,i,n){const r=this.dataLength;this.dataLength+=4,this.data[r]=e,this.data[r+1]=t,this.data[r+2]=i,this.data[r+3]=n}pushNumber(e){const t=this.dataLength;this.dataLength+=4,this.data[t]=e}popInto(e){this.dataLength-=4;const t=this.dataLength;return e.setXYZW(this.data[t],this.data[t+1],this.data[t+2],this.data[t+3]),e}popNumber(){this.dataLength-=4;const e=this.dataLength;return this.data[e]}writeTop(e){const t=this.dataLength-4;return this.data[t]=e.x,this.data[t+1]=e.y,this.data[t+2]=e.z,this.data[t+3]=e.w,e}writeTopValues(e,t,i,n){const r=this.dataLength-4;this.data[r]=e,this.data[r+1]=t,this.data[r+2]=i,this.data[r+3]=n}readTop(e){const t=this.dataLength-4;return e.setXYZW(this.data[t],this.data[t+1],this.data[t+2],this.data[t+3]),e}}St.register("RenderExecutionStack",th);const ih=[];class nh{constructor(){_defineProperty(this,"stack",new th),_defineProperty(this,"indexStack",[]),_defineProperty(this,"instructions",[]),_defineProperty(this,"instructionIndex",0),_defineProperty(this,"isDone",!1),this.evaluator=this.execute.bind(this)}loadRenderProgram(e){e.writeInstructions(ih),this.loadInstructions(ih),ih.length=0}loadInstructions(e){this.instructions.length=0;for(let t=0;t<e.length;t++){const i=e[t];i instanceof oh?i.index=this.instructions.length:this.instructions.push(i)}this.updateIndices()}reset(){this.stack.reset(),this.indexStack.length=0,this.instructionIndex=0,this.isDone=!1}execute(e,t){const i=this.stack,n=this.instructions;for(this.stack.reset(),this.indexStack.length=0,this.instructionIndex=0,this.isDone=!1;!this.isDone&&this.instructionIndex<n.length;)n[this.instructionIndex++].execute(i,e,this);return i.popInto(t),t}jump(e){this.instructionIndex=e.index}call(e){this.indexStack.push(this.instructionIndex),this.instructionIndex=e.index}return(){this.instructionIndex=this.indexStack.pop()}exit(){this.isDone=!0}updateIndices(){for(let e=0;e<this.instructions.length;e++){const t=this.instructions[e];t instanceof oh&&(t.index=e)}}}St.register("RenderExecutor",nh);class rh{static getInstructionLength(e){const t=255&e;return t>>4==0?1:192&t?t&31+2*(e>>Oc.GRADIENT_BEFORE_RATIO_COUNT_BITS):31&t}static instructionsToBinary(e,t){const i=[];let n=0;for(let r=0;r<t.length;r++)i.push(n),n+=t[r].getBinaryLength();for(let r=0;r<t.length;r++)t[r].writeBinary(e,e=>{const n=t.indexOf(e),s=i[n]-i[r];return s});e.pushU32(rh.ExitCode)}static binaryToInstructions(e,t){const i=[];let n=t;for(;e.fullU32Array[n]!==rh.ExitCode;)i.push(n),n+=rh.getInstructionLength(e.fullU32Array[n]);const r=n,s=i.map(()=>null);s.push(null);const a=e=>(e=>(null===s[e]&&(s[e]=new oh),s[e]))((e=>{if(e===r)return i.length;const t=i.indexOf(e);return t})(e)),o=[];for(let h=0;h<i.length;h++){const t=i[h],n=rh.binaryToInstruction(e,t,e=>a(t+e)),r=s[h];r&&o.push(r),o.push(n)}const l=s[i.length];return l&&o.push(l),o}static binaryToInstruction(e,t,i){const n=255&e.fullU32Array[t];switch(n){case rh.ReturnCode:return hh.INSTANCE;case rh.PremultiplyCode:return Jh.INSTANCE;case rh.UnpremultiplyCode:return tu.INSTANCE;case rh.StackBlendCode:return Vu.INSTANCE;case rh.LinearBlendCode:return mc.INSTANCE;case rh.LinearDisplayP3ToLinearSRGBCode:return fu.INSTANCE;case rh.LinearSRGBToLinearDisplayP3Code:return vu.INSTANCE;case rh.LinearSRGBToOklabCode:return pu.INSTANCE;case rh.LinearSRGBToSRGBCode:return ou.INSTANCE;case rh.OklabToLinearSRGBCode:return uu.INSTANCE;case rh.SRGBToLinearSRGBCode:return ru.INSTANCE;case rh.NormalizeCode:return Qh.INSTANCE;case rh.ExitCode:return uh.INSTANCE;case rh.BlendComposeCode:return xu.fromBinary(e,t,i);case rh.OpaqueJumpCode:return Cu.fromBinary(e,t,i);case rh.NormalDebugCode:return qu.INSTANCE;case rh.MultiplyScalarCode:return ch.fromBinary(e,t,i);case rh.PhongCode:return Zu.fromBinary(e,t,i);case rh.PushCode:return lh.fromBinary(e,t,i);case rh.ComputeLinearBlendRatioCode:case rh.ComputeRadialBlendRatioCode:return cc.fromBinary(e,t,i);case rh.BarycentricBlendCode:return _c.fromBinary(e,t,i);case rh.BarycentricPerspectiveBlendCode:return Mc.fromBinary(e,t,i);case rh.FilterCode:return tc.fromBinary(e,t,i);case rh.ComputeLinearGradientRatioCode:case rh.ComputeRadialGradientRatioCode:return Oc.fromBinary(e,t,i);default:throw new Error("Unknown/unimplemented instruction code: "+n)}}static instructionsEquals(e,t){const i=e.filter(e=>!(e instanceof oh)),n=t.filter(e=>!(e instanceof oh));if(i.length!==n.length)return!1;const r=new Map,s=e=>{let t=0;for(let i=0;i<e.length;i++){const n=e[i];n instanceof oh?r.set(n,t):t++}};s(e),s(t);const a=(e,t)=>r.get(e)===r.get(t);for(let o=0;o<i.length;o++){const e=i[o],t=n[o];if(!e.equals(t,a))return!1}return!0}}l=rh,_defineProperty(rh,"ExitCode",0),_defineProperty(rh,"ReturnCode",1),_defineProperty(rh,"StackBlendCode",2),_defineProperty(rh,"LinearBlendCode",3),_defineProperty(rh,"BlendComposeCode",4),_defineProperty(rh,"OpaqueJumpCode",5),_defineProperty(rh,"PremultiplyCode",6),_defineProperty(rh,"UnpremultiplyCode",7),_defineProperty(rh,"SRGBToLinearSRGBCode",8),_defineProperty(rh,"LinearSRGBToSRGBCode",9),_defineProperty(rh,"LinearDisplayP3ToLinearSRGBCode",10),_defineProperty(rh,"LinearSRGBToLinearDisplayP3Code",11),_defineProperty(rh,"OklabToLinearSRGBCode",12),_defineProperty(rh,"LinearSRGBToOklabCode",13),_defineProperty(rh,"NormalizeCode",14),_defineProperty(rh,"NormalDebugCode",15),_defineProperty(rh,"MultiplyScalarCode",130),_defineProperty(rh,"PhongCode",131),_defineProperty(rh,"PushCode",133),_defineProperty(rh,"ComputeLinearBlendRatioCode",135),_defineProperty(rh,"BarycentricBlendCode",136),_defineProperty(rh,"BarycentricPerspectiveBlendCode",139),_defineProperty(rh,"ComputeRadialBlendRatioCode",140),_defineProperty(rh,"FilterCode",149),_defineProperty(rh,"ComputeLinearGradientRatioCode",204),_defineProperty(rh,"ComputeRadialGradientRatioCode",202),_defineProperty(rh,"ImageCode",255),_defineProperty(rh,"CODE_NAME_CONSTANTS",{ExitCode:l.ExitCode,ReturnCode:l.ReturnCode,StackBlendCode:l.StackBlendCode,LinearBlendCode:l.LinearBlendCode,BlendComposeCode:l.BlendComposeCode,OpaqueJumpCode:l.OpaqueJumpCode,PremultiplyCode:l.PremultiplyCode,UnpremultiplyCode:l.UnpremultiplyCode,SRGBToLinearSRGBCode:l.SRGBToLinearSRGBCode,LinearSRGBToSRGBCode:l.LinearSRGBToSRGBCode,LinearDisplayP3ToLinearSRGBCode:l.LinearDisplayP3ToLinearSRGBCode,LinearSRGBToLinearDisplayP3Code:l.LinearSRGBToLinearDisplayP3Code,OklabToLinearSRGBCode:l.OklabToLinearSRGBCode,LinearSRGBToOklabCode:l.LinearSRGBToOklabCode,NormalizeCode:l.NormalizeCode,NormalDebugCode:l.NormalDebugCode,MultiplyScalarCode:l.MultiplyScalarCode,PhongCode:l.PhongCode,PushCode:l.PushCode,ComputeLinearBlendRatioCode:l.ComputeLinearBlendRatioCode,BarycentricBlendCode:l.BarycentricBlendCode,BarycentricPerspectiveBlendCode:l.BarycentricPerspectiveBlendCode,ComputeRadialBlendRatioCode:l.ComputeRadialBlendRatioCode,FilterCode:l.FilterCode,ComputeLinearGradientRatioCode:l.ComputeLinearGradientRatioCode,ComputeRadialGradientRatioCode:l.ComputeRadialGradientRatioCode,ImageCode:l.ImageCode});const sh=new yl(0,0,0,0);let ah=0;class oh extends rh{constructor(){super(...arguments),_defineProperty(this,"id",ah++),_defineProperty(this,"index",0)}toString(){return`RenderInstructionLocation(${this.id})`}equals(e,t){return e instanceof oh&&t(this,e)}execute(e,t,i){}writeBinary(e,t){}getBinaryLength(){return 0}}class lh extends rh{constructor(e){super(),this.vector=e}toString(){return`RenderInstructionPush(${`vector:${this.vector.x},${this.vector.y},${this.vector.z},${this.vector.w}`})`}equals(e,t){return e instanceof lh&&this.vector.equalsEpsilon(e.vector,1e-6)}execute(e,t,i){e.push(this.vector)}writeBinary(e,t){e.pushU32(rh.PushCode),e.pushF32(this.vector.x),e.pushF32(this.vector.y),e.pushF32(this.vector.z),e.pushF32(this.vector.w)}static fromBinary(e,t,i){return new lh(new yl(e.fullF32Array[t+1],e.fullF32Array[t+2],e.fullF32Array[t+3],e.fullF32Array[t+4]))}getBinaryLength(){return 5}}class hh extends rh{toString(){return"RenderInstructionReturn()"}equals(e,t){return e instanceof hh}execute(e,t,i){i.return()}writeBinary(e,t){e.pushU32(rh.ReturnCode)}getBinaryLength(){return 1}}_defineProperty(hh,"INSTANCE",new hh);class uh extends rh{toString(){return"RenderInstructionExit()"}equals(e,t){return e instanceof uh}execute(e,t,i){i.exit()}writeBinary(e,t){e.pushU32(rh.ExitCode)}getBinaryLength(){return 1}}_defineProperty(uh,"INSTANCE",new uh);class ch extends rh{constructor(e){super(),this.factor=e}toString(){return`RenderInstructionMultiplyScalar(${"factor:"+this.factor})`}equals(e,t){return e instanceof ch&&Math.abs(this.factor-e.factor)<1e-6}execute(e,t,i){e.readTop(sh),sh.multiplyScalar(this.factor),e.writeTop(sh)}writeBinary(e,t){e.pushU32(rh.MultiplyScalarCode),e.pushF32(this.factor)}static fromBinary(e,t,i){return new ch(e.fullF32Array[t+1])}getBinaryLength(){return 2}}St.register("RenderInstruction",rh);class dh{constructor(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];_defineProperty(this,"isSimplified",!1),this.children=e,this.isFullyTransparent=t,this.isFullyOpaque=i;let a=this instanceof gh;for(let o=0;o<e.length;o++){const t=e[o];n=n||t.needsFace,r=r||t.needsArea,s=s||t.needsCentroid,a=a||t.hasPathBoolean}this.needsFace=n,this.needsArea=r,this.needsCentroid=s,this.hasPathBoolean=a}simplified(){if(this.isSimplified)return this;if(!dh.simplify)return this.isSimplified=!0,this;let e=!1;const t=[];for(let n=0;n<this.children.length;n++){const i=this.children[n],r=i.simplified();t.push(r),e=e||r!==i}const i=this.getSimplified(t);if(i)return i.isSimplified=!0,i;if(e){const e=this.withChildren(t);return e.isSimplified=!0,e}return this.isSimplified=!0,this}getSimplified(e){return null}writeInstructions(e){throw new Error("unimplemented")}equals(e){return this===e||this.getName()===e.getName()&&this.children.length===e.children.length&&_.every(this.children,(t,i)=>t.equals(e.children[i]))&&this.equalsTyped(e)}equalsTyped(e){return!0}getEvaluator(){return(e,t)=>t.set(this.evaluate(e))}transformed(e){return this.withChildren(this.children.map(t=>t.transformed(e)))}depthFirst(e){this.children.forEach(t=>t.depthFirst(e)),e(this)}containsRenderProgram(e){let t=!1;return this.depthFirst(i=>{i===e&&(t=!0)}),t}replace(e){const t=e(this);return t||this.withChildren(this.children.map(t=>t.replace(e)))}withPathInclusion(e){return this instanceof gh?e(this.path)?this.inside.withPathInclusion(e):this.outside.withPathInclusion(e):this.withChildren(this.children.map(t=>t.withPathInclusion(e)))}isSplittable(){return!1}split(e){throw new Error("unimplemented")}getNeeds(){return new Bl(this.needsFace,this.needsArea,this.needsCentroid)}colorConverted(e,t){return Uh.convert(this,e,t)}toRecursiveString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=this.getExtraDebugString();let i=`${e}${this.getName()}${t?` (${t})`:""}`;return this.children.forEach(t=>{i+="\n"+t.toRecursiveString(e+"  ")}),i}getExtraDebugString(){return""}print(){console.log(this.toRecursiveString())}static deserialize(e){if("RenderStack"===e.type)return wu.deserialize(e);if("RenderColor"===e.type)return Fh.deserialize(e);if("RenderAlpha"===e.type)return Wh.deserialize(e);if("RenderDepthSort"===e.type)return Lu.deserialize(e);if("RenderBlendCompose"===e.type)return Au.deserialize(e);if("RenderPathBoolean"===e.type)return gh.deserialize(e);if("RenderFilter"===e.type)return Ju.deserialize(e);if("RenderImage"===e.type)return sc.deserialize(e);if("RenderNormalize"===e.type)return Xh.deserialize(e);if("RenderLinearBlend"===e.type)return hc.deserialize(e);if("RenderBarycentricBlend"===e.type)return yc.deserialize(e);if("RenderBarycentricPerspectiveBlend"===e.type)return Tc.deserialize(e);if("RenderLinearGradient"===e.type)return Bc.deserialize(e);if("RenderRadialBlend"===e.type)return Uc.deserialize(e);if("RenderRadialGradient"===e.type)return Kc.deserialize(e);if("RenderColorSpaceConversion"===e.type)return Uh.deserialize(e);if("RenderPhong"===e.type)return Yu.deserialize(e);if("RenderNormalDebug"===e.type)return Du.deserialize(e);throw new Error("Unrecognized RenderProgram type: "+e.type)}static ensureFace(e,t,i,n,r){return e||SR.fromBoundsValues(t,i,n,r)}static closureIsFullyTransparent(e){return e.isFullyTransparent}static closureIsFullyOpaque(e){return e.isFullyOpaque}static closureSimplified(e){return e.simplified()}}_defineProperty(dh,"simplify",!0),St.register("RenderProgram",dh);let ph=0;class mh{constructor(e,t){_defineProperty(this,"id",ph++),this.fillRule=e,this.subpaths=t}transformed(e){return new mh(this.fillRule,this.subpaths.map(t=>t.map(t=>e.timesVector2(t))))}getBounds(){const e=Zl.NOTHING.copy();for(let t=0;t<this.subpaths.length;t++){const i=this.subpaths[t];for(let t=0;t<i.length;t++)e.addPoint(i[t])}return e}isTriviallyEmpty(){return this.subpaths.every(e=>e.length<3)}serialize(){return{fillRule:this.fillRule,subpaths:this.subpaths.map(e=>e.map(e=>({x:e.x,y:e.y})))}}static deserialize(e){return new mh(e.fillRule,e.subpaths.map(e=>e.map(e=>new al(e.x,e.y))))}static fromBounds(e){return new mh("nonzero",[[new al(e.minX,e.minY),new al(e.maxX,e.minY),new al(e.maxX,e.maxY),new al(e.minX,e.maxY)]])}}St.register("RenderPath",mh);class gh extends dh{constructor(e,t,i){super([t,i],t.isFullyTransparent&&i.isFullyTransparent,t.isFullyOpaque&&i.isFullyOpaque,!1,!1,!0),this.path=e,this.inside=t,this.outside=i}getName(){return"RenderPathBoolean"}withChildren(e){return new gh(this.path,e[0],e[1])}transformed(e){return new gh(this.path.transformed(e),this.inside.transformed(e),this.outside.transformed(e))}equalsTyped(e){return this.path===e.path}isOneSided(){return this.outside.isFullyTransparent||this.inside.isFullyTransparent}getOneSide(){return this.outside.isFullyTransparent?this.inside:this.outside}withOneSide(e){return this.outside.isFullyTransparent?new gh(this.path,e,this.outside):new gh(this.path,this.inside,e)}getSimplified(e){const t=e[0],i=e[1];return t.isFullyTransparent&&i.isFullyTransparent?Fh.TRANSPARENT:t.equals(i)?t:this.path.isTriviallyEmpty()?i:null}evaluate(e){const t=OV.getWindingNumberPolygons(this.path.subpaths,e.centroid);return(rd(t,this.path.fillRule)?this.inside:this.outside).evaluate(e)}getExtraDebugString(){return""+this.path.id}serialize(){return{type:"RenderPathBoolean",path:this.path.serialize(),inside:this.inside.serialize(),outside:this.outside.serialize()}}static deserialize(e){return new gh(mh.deserialize(e.path),dh.deserialize(e.inside),dh.deserialize(e.outside))}static fromInside(e,t){return new gh(e,t,Fh.TRANSPARENT)}}St.register("RenderPathBoolean",gh);class fh extends Map{constructor(e){super(e),fh.caches.push(this)}static clearAll(){fh.caches.forEach(e=>e.clear())}}_defineProperty(fh,"caches",[]),zo.register("IOTypeCache",fh);const yh=fh,Eh=new yh,vh=e=>e.join("|"),Ah=e=>{const t=e.enumeration;if(!Eh.has(t)){const e=t.phetioDocumentation?" "+t.phetioDocumentation:"",i=t.keys,n=t.values,r=`EnumerationIO(${vh(i)})`;Eh.set(t,new el(r,{validValues:n,documentation:`Possible values: ${i.join(", ")}.${e}`,toStateObject:e=>t.getKey(e),fromStateObject:e=>t.getValue(e),stateSchema:Zo.asValue(""+vh(i),{isValidValue:e=>i.includes(e)})}))}return Eh.get(t)};zo.register("EnumerationIO",Ah);const bh=Ah,Sh=new yh,_h=e=>(Sh.has(e)||Sh.set(e,new el(`ArrayIO<${e.typeName}>`,{valueType:Array,isValidValue:t=>_.every(t,t=>Ho.isValueValid(t,e.validator)),parameterTypes:[e],toStateObject:t=>t.map(e.toStateObject),fromStateObject:t=>t.map(e.fromStateObject),documentation:"IO Type for the built-in JS array type, with the element type specified.",stateSchema:Zo.asValue(`Array<${e.typeName}>`,{isValidValue:t=>_.every(t,t=>e.isStateObjectValid(t))})})),Sh.get(e));zo.register("ArrayIO",_h);const xh=_h,wh=window.Float32Array||Array;class Th{constructor(e,t,i,n,r,s,a,o,l,h,u,c,d,p,m,g,f){this.entries=new wh(16),this.type=Ph.OTHER,this.rowMajor(void 0!==e?e:1,void 0!==t?t:0,void 0!==i?i:0,void 0!==n?n:0,void 0!==r?r:0,void 0!==s?s:1,void 0!==a?a:0,void 0!==o?o:0,void 0!==l?l:0,void 0!==h?h:0,void 0!==u?u:1,void 0!==c?c:0,void 0!==d?d:0,void 0!==p?p:0,void 0!==m?m:0,void 0!==g?g:1,f)}rowMajor(e,t,i,n,r,s,a,o,l,h,u,c,d,p,m,g,f){return this.entries[0]=e,this.entries[1]=r,this.entries[2]=l,this.entries[3]=d,this.entries[4]=t,this.entries[5]=s,this.entries[6]=h,this.entries[7]=p,this.entries[8]=i,this.entries[9]=a,this.entries[10]=u,this.entries[11]=m,this.entries[12]=n,this.entries[13]=o,this.entries[14]=c,this.entries[15]=g,this.type=void 0===f?0===d&&0===p&&0===m&&1===g?Ph.AFFINE:Ph.OTHER:f,this}columnMajor(e,t,i,n,r,s,a,o,l,h,u,c,d,p,m,g,f){return this.rowMajor(e,r,l,d,t,s,h,p,i,a,u,m,n,o,c,g,f)}set(e){return this.rowMajor(e.m00(),e.m01(),e.m02(),e.m03(),e.m10(),e.m11(),e.m12(),e.m13(),e.m20(),e.m21(),e.m22(),e.m23(),e.m30(),e.m31(),e.m32(),e.m33(),e.type)}m00(){return this.entries[0]}m01(){return this.entries[4]}m02(){return this.entries[8]}m03(){return this.entries[12]}m10(){return this.entries[1]}m11(){return this.entries[5]}m12(){return this.entries[9]}m13(){return this.entries[13]}m20(){return this.entries[2]}m21(){return this.entries[6]}m22(){return this.entries[10]}m23(){return this.entries[14]}m30(){return this.entries[3]}m31(){return this.entries[7]}m32(){return this.entries[11]}m33(){return this.entries[15]}isFinite(){return isFinite(this.m00())&&isFinite(this.m01())&&isFinite(this.m02())&&isFinite(this.m03())&&isFinite(this.m10())&&isFinite(this.m11())&&isFinite(this.m12())&&isFinite(this.m13())&&isFinite(this.m20())&&isFinite(this.m21())&&isFinite(this.m22())&&isFinite(this.m23())&&isFinite(this.m30())&&isFinite(this.m31())&&isFinite(this.m32())&&isFinite(this.m33())}getTranslation(){return new bl(this.m03(),this.m13(),this.m23())}get translation(){return this.getTranslation()}getScaleVector(){const e=this.m00()+this.m03(),t=this.m10()+this.m13(),i=this.m20()+this.m23(),n=this.m30()+this.m33(),r=this.m01()+this.m03(),s=this.m11()+this.m13(),a=this.m21()+this.m23(),o=this.m31()+this.m33(),l=this.m02()+this.m03(),h=this.m12()+this.m13(),u=this.m22()+this.m23(),c=this.m32()+this.m33();return new bl(Math.sqrt(e*e+t*t+i*i+n*n),Math.sqrt(r*r+s*s+a*a+o*o),Math.sqrt(l*l+h*h+u*u+c*c))}get scaleVector(){return this.getScaleVector()}getCSSTransform(){return`matrix3d(${this.entries[0].toFixed(20)},${this.entries[1].toFixed(20)},${this.entries[2].toFixed(20)},${this.entries[3].toFixed(20)},${this.entries[4].toFixed(20)},${this.entries[5].toFixed(20)},${this.entries[6].toFixed(20)},${this.entries[7].toFixed(20)},${this.entries[8].toFixed(20)},${this.entries[9].toFixed(20)},${this.entries[10].toFixed(20)},${this.entries[11].toFixed(20)},${this.entries[12].toFixed(20)},${this.entries[13].toFixed(20)},${this.entries[14].toFixed(20)},${this.entries[15].toFixed(20)})`}get cssTransform(){return this.getCSSTransform()}equals(e){return this.m00()===e.m00()&&this.m01()===e.m01()&&this.m02()===e.m02()&&this.m03()===e.m03()&&this.m10()===e.m10()&&this.m11()===e.m11()&&this.m12()===e.m12()&&this.m13()===e.m13()&&this.m20()===e.m20()&&this.m21()===e.m21()&&this.m22()===e.m22()&&this.m23()===e.m23()&&this.m30()===e.m30()&&this.m31()===e.m31()&&this.m32()===e.m32()&&this.m33()===e.m33()}equalsEpsilon(e,t){return Math.abs(this.m00()-e.m00())<t&&Math.abs(this.m01()-e.m01())<t&&Math.abs(this.m02()-e.m02())<t&&Math.abs(this.m03()-e.m03())<t&&Math.abs(this.m10()-e.m10())<t&&Math.abs(this.m11()-e.m11())<t&&Math.abs(this.m12()-e.m12())<t&&Math.abs(this.m13()-e.m13())<t&&Math.abs(this.m20()-e.m20())<t&&Math.abs(this.m21()-e.m21())<t&&Math.abs(this.m22()-e.m22())<t&&Math.abs(this.m23()-e.m23())<t&&Math.abs(this.m30()-e.m30())<t&&Math.abs(this.m31()-e.m31())<t&&Math.abs(this.m32()-e.m32())<t&&Math.abs(this.m33()-e.m33())<t}copy(){return new Th(this.m00(),this.m01(),this.m02(),this.m03(),this.m10(),this.m11(),this.m12(),this.m13(),this.m20(),this.m21(),this.m22(),this.m23(),this.m30(),this.m31(),this.m32(),this.m33(),this.type)}plus(e){return new Th(this.m00()+e.m00(),this.m01()+e.m01(),this.m02()+e.m02(),this.m03()+e.m03(),this.m10()+e.m10(),this.m11()+e.m11(),this.m12()+e.m12(),this.m13()+e.m13(),this.m20()+e.m20(),this.m21()+e.m21(),this.m22()+e.m22(),this.m23()+e.m23(),this.m30()+e.m30(),this.m31()+e.m31(),this.m32()+e.m32(),this.m33()+e.m33())}minus(e){return new Th(this.m00()-e.m00(),this.m01()-e.m01(),this.m02()-e.m02(),this.m03()-e.m03(),this.m10()-e.m10(),this.m11()-e.m11(),this.m12()-e.m12(),this.m13()-e.m13(),this.m20()-e.m20(),this.m21()-e.m21(),this.m22()-e.m22(),this.m23()-e.m23(),this.m30()-e.m30(),this.m31()-e.m31(),this.m32()-e.m32(),this.m33()-e.m33())}transposed(){return new Th(this.m00(),this.m10(),this.m20(),this.m30(),this.m01(),this.m11(),this.m21(),this.m31(),this.m02(),this.m12(),this.m22(),this.m32(),this.m03(),this.m13(),this.m23(),this.m33())}negated(){return new Th(-this.m00(),-this.m01(),-this.m02(),-this.m03(),-this.m10(),-this.m11(),-this.m12(),-this.m13(),-this.m20(),-this.m21(),-this.m22(),-this.m23(),-this.m30(),-this.m31(),-this.m32(),-this.m33())}inverted(){let e;switch(this.type){case Ph.IDENTITY:return this;case Ph.TRANSLATION_3D:return new Th(1,0,0,-this.m03(),0,1,0,-this.m13(),0,0,1,-this.m23(),0,0,0,1,Ph.TRANSLATION_3D);case Ph.SCALING:return new Th(1/this.m00(),0,0,0,0,1/this.m11(),0,0,0,0,1/this.m22(),0,0,0,0,1/this.m33(),Ph.SCALING);case Ph.AFFINE:case Ph.OTHER:if(e=this.getDeterminant(),0!==e)return new Th((-this.m31()*this.m22()*this.m13()+this.m21()*this.m32()*this.m13()+this.m31()*this.m12()*this.m23()-this.m11()*this.m32()*this.m23()-this.m21()*this.m12()*this.m33()+this.m11()*this.m22()*this.m33())/e,(this.m31()*this.m22()*this.m03()-this.m21()*this.m32()*this.m03()-this.m31()*this.m02()*this.m23()+this.m01()*this.m32()*this.m23()+this.m21()*this.m02()*this.m33()-this.m01()*this.m22()*this.m33())/e,(-this.m31()*this.m12()*this.m03()+this.m11()*this.m32()*this.m03()+this.m31()*this.m02()*this.m13()-this.m01()*this.m32()*this.m13()-this.m11()*this.m02()*this.m33()+this.m01()*this.m12()*this.m33())/e,(this.m21()*this.m12()*this.m03()-this.m11()*this.m22()*this.m03()-this.m21()*this.m02()*this.m13()+this.m01()*this.m22()*this.m13()+this.m11()*this.m02()*this.m23()-this.m01()*this.m12()*this.m23())/e,(this.m30()*this.m22()*this.m13()-this.m20()*this.m32()*this.m13()-this.m30()*this.m12()*this.m23()+this.m10()*this.m32()*this.m23()+this.m20()*this.m12()*this.m33()-this.m10()*this.m22()*this.m33())/e,(-this.m30()*this.m22()*this.m03()+this.m20()*this.m32()*this.m03()+this.m30()*this.m02()*this.m23()-this.m00()*this.m32()*this.m23()-this.m20()*this.m02()*this.m33()+this.m00()*this.m22()*this.m33())/e,(this.m30()*this.m12()*this.m03()-this.m10()*this.m32()*this.m03()-this.m30()*this.m02()*this.m13()+this.m00()*this.m32()*this.m13()+this.m10()*this.m02()*this.m33()-this.m00()*this.m12()*this.m33())/e,(-this.m20()*this.m12()*this.m03()+this.m10()*this.m22()*this.m03()+this.m20()*this.m02()*this.m13()-this.m00()*this.m22()*this.m13()-this.m10()*this.m02()*this.m23()+this.m00()*this.m12()*this.m23())/e,(-this.m30()*this.m21()*this.m13()+this.m20()*this.m31()*this.m13()+this.m30()*this.m11()*this.m23()-this.m10()*this.m31()*this.m23()-this.m20()*this.m11()*this.m33()+this.m10()*this.m21()*this.m33())/e,(this.m30()*this.m21()*this.m03()-this.m20()*this.m31()*this.m03()-this.m30()*this.m01()*this.m23()+this.m00()*this.m31()*this.m23()+this.m20()*this.m01()*this.m33()-this.m00()*this.m21()*this.m33())/e,(-this.m30()*this.m11()*this.m03()+this.m10()*this.m31()*this.m03()+this.m30()*this.m01()*this.m13()-this.m00()*this.m31()*this.m13()-this.m10()*this.m01()*this.m33()+this.m00()*this.m11()*this.m33())/e,(this.m20()*this.m11()*this.m03()-this.m10()*this.m21()*this.m03()-this.m20()*this.m01()*this.m13()+this.m00()*this.m21()*this.m13()+this.m10()*this.m01()*this.m23()-this.m00()*this.m11()*this.m23())/e,(this.m30()*this.m21()*this.m12()-this.m20()*this.m31()*this.m12()-this.m30()*this.m11()*this.m22()+this.m10()*this.m31()*this.m22()+this.m20()*this.m11()*this.m32()-this.m10()*this.m21()*this.m32())/e,(-this.m30()*this.m21()*this.m02()+this.m20()*this.m31()*this.m02()+this.m30()*this.m01()*this.m22()-this.m00()*this.m31()*this.m22()-this.m20()*this.m01()*this.m32()+this.m00()*this.m21()*this.m32())/e,(this.m30()*this.m11()*this.m02()-this.m10()*this.m31()*this.m02()-this.m30()*this.m01()*this.m12()+this.m00()*this.m31()*this.m12()+this.m10()*this.m01()*this.m32()-this.m00()*this.m11()*this.m32())/e,(-this.m20()*this.m11()*this.m02()+this.m10()*this.m21()*this.m02()+this.m20()*this.m01()*this.m12()-this.m00()*this.m21()*this.m12()-this.m10()*this.m01()*this.m22()+this.m00()*this.m11()*this.m22())/e);throw new Error("Matrix could not be inverted, determinant === 0");default:throw new Error("Matrix4.inverted with unknown type: "+this.type)}}timesMatrix(e){if(this.type===Ph.IDENTITY||e.type===Ph.IDENTITY)return this.type===Ph.IDENTITY?e:this;if(this.type===e.type){if(this.type===Ph.TRANSLATION_3D)return new Th(1,0,0,this.m03()+e.m02(),0,1,0,this.m13()+e.m12(),0,0,1,this.m23()+e.m23(),0,0,0,1,Ph.TRANSLATION_3D);if(this.type===Ph.SCALING)return new Th(this.m00()*e.m00(),0,0,0,0,this.m11()*e.m11(),0,0,0,0,this.m22()*e.m22(),0,0,0,0,1,Ph.SCALING)}return this.type!==Ph.OTHER&&e.type!==Ph.OTHER?new Th(this.m00()*e.m00()+this.m01()*e.m10()+this.m02()*e.m20(),this.m00()*e.m01()+this.m01()*e.m11()+this.m02()*e.m21(),this.m00()*e.m02()+this.m01()*e.m12()+this.m02()*e.m22(),this.m00()*e.m03()+this.m01()*e.m13()+this.m02()*e.m23()+this.m03(),this.m10()*e.m00()+this.m11()*e.m10()+this.m12()*e.m20(),this.m10()*e.m01()+this.m11()*e.m11()+this.m12()*e.m21(),this.m10()*e.m02()+this.m11()*e.m12()+this.m12()*e.m22(),this.m10()*e.m03()+this.m11()*e.m13()+this.m12()*e.m23()+this.m13(),this.m20()*e.m00()+this.m21()*e.m10()+this.m22()*e.m20(),this.m20()*e.m01()+this.m21()*e.m11()+this.m22()*e.m21(),this.m20()*e.m02()+this.m21()*e.m12()+this.m22()*e.m22(),this.m20()*e.m03()+this.m21()*e.m13()+this.m22()*e.m23()+this.m23(),0,0,0,1,Ph.AFFINE):new Th(this.m00()*e.m00()+this.m01()*e.m10()+this.m02()*e.m20()+this.m03()*e.m30(),this.m00()*e.m01()+this.m01()*e.m11()+this.m02()*e.m21()+this.m03()*e.m31(),this.m00()*e.m02()+this.m01()*e.m12()+this.m02()*e.m22()+this.m03()*e.m32(),this.m00()*e.m03()+this.m01()*e.m13()+this.m02()*e.m23()+this.m03()*e.m33(),this.m10()*e.m00()+this.m11()*e.m10()+this.m12()*e.m20()+this.m13()*e.m30(),this.m10()*e.m01()+this.m11()*e.m11()+this.m12()*e.m21()+this.m13()*e.m31(),this.m10()*e.m02()+this.m11()*e.m12()+this.m12()*e.m22()+this.m13()*e.m32(),this.m10()*e.m03()+this.m11()*e.m13()+this.m12()*e.m23()+this.m13()*e.m33(),this.m20()*e.m00()+this.m21()*e.m10()+this.m22()*e.m20()+this.m23()*e.m30(),this.m20()*e.m01()+this.m21()*e.m11()+this.m22()*e.m21()+this.m23()*e.m31(),this.m20()*e.m02()+this.m21()*e.m12()+this.m22()*e.m22()+this.m23()*e.m32(),this.m20()*e.m03()+this.m21()*e.m13()+this.m22()*e.m23()+this.m23()*e.m33(),this.m30()*e.m00()+this.m31()*e.m10()+this.m32()*e.m20()+this.m33()*e.m30(),this.m30()*e.m01()+this.m31()*e.m11()+this.m32()*e.m21()+this.m33()*e.m31(),this.m30()*e.m02()+this.m31()*e.m12()+this.m32()*e.m22()+this.m33()*e.m32(),this.m30()*e.m03()+this.m31()*e.m13()+this.m32()*e.m23()+this.m33()*e.m33())}timesVector4(e){const t=this.m00()*e.x+this.m01()*e.y+this.m02()*e.z+this.m03()*e.w,i=this.m10()*e.x+this.m11()*e.y+this.m12()*e.z+this.m13()*e.w,n=this.m20()*e.x+this.m21()*e.y+this.m22()*e.z+this.m23()*e.w,r=this.m30()*e.x+this.m31()*e.y+this.m32()*e.z+this.m33()*e.w;return new yl(t,i,n,r)}timesVector3(e){return this.timesVector4(e.toVector4()).toVector3()}timesTransposeVector4(e){const t=this.m00()*e.x+this.m10()*e.y+this.m20()*e.z+this.m30()*e.w,i=this.m01()*e.x+this.m11()*e.y+this.m21()*e.z+this.m31()*e.w,n=this.m02()*e.x+this.m12()*e.y+this.m22()*e.z+this.m32()*e.w,r=this.m03()*e.x+this.m13()*e.y+this.m23()*e.z+this.m33()*e.w;return new yl(t,i,n,r)}timesTransposeVector3(e){return this.timesTransposeVector4(e.toVector4()).toVector3()}timesRelativeVector3(e){const t=this.m00()*e.x+this.m10()*e.y+this.m20()*e.z,i=this.m01()*e.y+this.m11()*e.y+this.m21()*e.z,n=this.m02()*e.z+this.m12()*e.y+this.m22()*e.z;return new bl(t,i,n)}getDeterminant(){return this.m03()*this.m12()*this.m21()*this.m30()-this.m02()*this.m13()*this.m21()*this.m30()-this.m03()*this.m11()*this.m22()*this.m30()+this.m01()*this.m13()*this.m22()*this.m30()+this.m02()*this.m11()*this.m23()*this.m30()-this.m01()*this.m12()*this.m23()*this.m30()-this.m03()*this.m12()*this.m20()*this.m31()+this.m02()*this.m13()*this.m20()*this.m31()+this.m03()*this.m10()*this.m22()*this.m31()-this.m00()*this.m13()*this.m22()*this.m31()-this.m02()*this.m10()*this.m23()*this.m31()+this.m00()*this.m12()*this.m23()*this.m31()+this.m03()*this.m11()*this.m20()*this.m32()-this.m01()*this.m13()*this.m20()*this.m32()-this.m03()*this.m10()*this.m21()*this.m32()+this.m00()*this.m13()*this.m21()*this.m32()+this.m01()*this.m10()*this.m23()*this.m32()-this.m00()*this.m11()*this.m23()*this.m32()-this.m02()*this.m11()*this.m20()*this.m33()+this.m01()*this.m12()*this.m20()*this.m33()+this.m02()*this.m10()*this.m21()*this.m33()-this.m00()*this.m12()*this.m21()*this.m33()-this.m01()*this.m10()*this.m22()*this.m33()+this.m00()*this.m11()*this.m22()*this.m33()}get determinant(){return this.getDeterminant()}toString(){return`${this.m00()} ${this.m01()} ${this.m02()} ${this.m03()}\n${this.m10()} ${this.m11()} ${this.m12()} ${this.m13()}\n${this.m20()} ${this.m21()} ${this.m22()} ${this.m23()}\n${this.m30()} ${this.m31()} ${this.m32()} ${this.m33()}`}makeImmutable(){return this}copyToArray(e){return e[0]=this.m00(),e[1]=this.m10(),e[2]=this.m20(),e[3]=this.m30(),e[4]=this.m01(),e[5]=this.m11(),e[6]=this.m21(),e[7]=this.m31(),e[8]=this.m02(),e[9]=this.m12(),e[10]=this.m22(),e[11]=this.m32(),e[12]=this.m03(),e[13]=this.m13(),e[14]=this.m23(),e[15]=this.m33(),e}static identity(){return new Th(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,Ph.IDENTITY)}static translation(e,t,i){return new Th(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1,Ph.TRANSLATION_3D)}static translationFromVector(e){return Th.translation(e.x,e.y,e.z)}static scaling(e,t,i){return new Th(e,0,0,0,0,t=void 0===t?e:t,0,0,0,0,i=void 0===i?e:i,0,0,0,0,1,Ph.SCALING)}static rotationAxisAngle(e,t){const i=Math.cos(t),n=Math.sin(t),r=1-i;return new Th(e.x*e.x*r+i,e.x*e.y*r-e.z*n,e.x*e.z*r+e.y*n,0,e.y*e.x*r+e.z*n,e.y*e.y*r+i,e.y*e.z*r-e.x*n,0,e.z*e.x*r-e.y*n,e.z*e.y*r+e.x*n,e.z*e.z*r+i,0,0,0,0,1,Ph.AFFINE)}static rotationX(e){const t=Math.cos(e),i=Math.sin(e);return new Th(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1,Ph.AFFINE)}static rotationY(e){const t=Math.cos(e),i=Math.sin(e);return new Th(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1,Ph.AFFINE)}static rotationZ(e){const t=Math.cos(e),i=Math.sin(e);return new Th(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1,Ph.AFFINE)}static gluPerspective(e,t,i,n){const r=Math.cos(e)/Math.sin(e);return new Th(r/t,0,0,0,0,r,0,0,0,0,(n+i)/(i-n),2*n*i/(i-n),0,0,-1,0)}}rl.register("Matrix4",Th);class Ph extends Fl{}_defineProperty(Ph,"OTHER",new(c=Ph)),_defineProperty(Ph,"IDENTITY",new c),_defineProperty(Ph,"TRANSLATION_3D",new c),_defineProperty(Ph,"SCALING",new c),_defineProperty(Ph,"AFFINE",new c),_defineProperty(Ph,"enumeration",new Xl(c)),Th.Types=Ph,Th.IDENTITY=(new Th).makeImmutable();const Ch=Th;function Vh(e){return e.toFixed(20)}rl.register("toSVGNumber",Vh);const Rh=Vh;class Nh extends Fl{}_defineProperty(Nh,"OTHER",new(d=Nh)),_defineProperty(Nh,"IDENTITY",new d),_defineProperty(Nh,"TRANSLATION_2D",new d),_defineProperty(Nh,"SCALING",new d),_defineProperty(Nh,"AFFINE",new d),_defineProperty(Nh,"enumeration",new Xl(d));class Mh{constructor(){this.entries=[1,0,0,0,1,0,0,0,1],this.type=Nh.IDENTITY}initialize(){return this}m00(){return this.entries[0]}m01(){return this.entries[3]}m02(){return this.entries[6]}m10(){return this.entries[1]}m11(){return this.entries[4]}m12(){return this.entries[7]}m20(){return this.entries[2]}m21(){return this.entries[5]}m22(){return this.entries[8]}isIdentity(){return this.type===Nh.IDENTITY||this.equals(Mh.IDENTITY)}isFastIdentity(){return this.type===Nh.IDENTITY}isTranslation(){return this.type===Nh.TRANSLATION_2D||1===this.m00()&&1===this.m11()&&1===this.m22()&&0===this.m01()&&0===this.m10()&&0===this.m20()&&0===this.m21()}isAffine(){return this.type===Nh.AFFINE||0===this.m20()&&0===this.m21()&&1===this.m22()}isAligned(){return this.isAffine()&&0===this.m01()&&0===this.m10()}isAxisAligned(){return this.isAffine()&&(0===this.m01()&&0===this.m10()||0===this.m00()&&0===this.m11())}isFinite(){return isFinite(this.m00())&&isFinite(this.m01())&&isFinite(this.m02())&&isFinite(this.m10())&&isFinite(this.m11())&&isFinite(this.m12())&&isFinite(this.m20())&&isFinite(this.m21())&&isFinite(this.m22())}getDeterminant(){return this.m00()*this.m11()*this.m22()+this.m01()*this.m12()*this.m20()+this.m02()*this.m10()*this.m21()-this.m02()*this.m11()*this.m20()-this.m01()*this.m10()*this.m22()-this.m00()*this.m12()*this.m21()}get determinant(){return this.getDeterminant()}getTranslation(){return new al(this.m02(),this.m12())}get translation(){return this.getTranslation()}getScaleVector(){return new al(Math.sqrt(this.m00()*this.m00()+this.m10()*this.m10()),Math.sqrt(this.m01()*this.m01()+this.m11()*this.m11()))}get scaleVector(){return this.getScaleVector()}getSignedScale(){return this.m00()*this.m11()-this.m10()*this.m01()}getRotation(){return Math.atan2(this.m10(),this.m00())}get rotation(){return this.getRotation()}toMatrix4(){return new Ch(this.m00(),this.m01(),this.m02(),0,this.m10(),this.m11(),this.m12(),0,this.m20(),this.m21(),this.m22(),0,0,0,0,1)}toAffineMatrix4(){return new Ch(this.m00(),this.m01(),0,this.m02(),this.m10(),this.m11(),0,this.m12(),0,0,1,0,0,0,0,1)}toString(){return`${this.m00()} ${this.m01()} ${this.m02()}\n${this.m10()} ${this.m11()} ${this.m12()}\n${this.m20()} ${this.m21()} ${this.m22()}`}toSVGMatrix(){const e=document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGMatrix();return e.a=this.m00(),e.b=this.m10(),e.c=this.m01(),e.d=this.m11(),e.e=this.m02(),e.f=this.m12(),e}getCSSTransform(){return`matrix(${this.entries[0].toFixed(20)},${this.entries[1].toFixed(20)},${this.entries[3].toFixed(20)},${this.entries[4].toFixed(20)},${this.entries[6].toFixed(20)},${this.entries[7].toFixed(20)})`}get cssTransform(){return this.getCSSTransform()}getSVGTransform(){switch(this.type){case Nh.IDENTITY:return"";case Nh.TRANSLATION_2D:return`translate(${Rh(this.entries[6])},${Rh(this.entries[7])})`;case Nh.SCALING:return`scale(${Rh(this.entries[0])}${this.entries[0]===this.entries[4]?"":","+Rh(this.entries[4])})`;default:return`matrix(${Rh(this.entries[0])},${Rh(this.entries[1])},${Rh(this.entries[3])},${Rh(this.entries[4])},${Rh(this.entries[6])},${Rh(this.entries[7])})`}}get svgTransform(){return this.getSVGTransform()}getCSSTransformStyles(){const e=this.getCSSTransform();return{"-webkit-perspective":"1000","-webkit-backface-visibility":"hidden","-webkit-transform":e+" translateZ(0)","-moz-transform":e+" translateZ(0)","-ms-transform":e,"-o-transform":e,transform:e,"transform-origin":"top left","-ms-transform-origin":"top left"}}get cssTransformStyles(){return this.getCSSTransformStyles()}equals(e){return this.m00()===e.m00()&&this.m01()===e.m01()&&this.m02()===e.m02()&&this.m10()===e.m10()&&this.m11()===e.m11()&&this.m12()===e.m12()&&this.m20()===e.m20()&&this.m21()===e.m21()&&this.m22()===e.m22()}equalsEpsilon(e,t){return Math.abs(this.m00()-e.m00())<t&&Math.abs(this.m01()-e.m01())<t&&Math.abs(this.m02()-e.m02())<t&&Math.abs(this.m10()-e.m10())<t&&Math.abs(this.m11()-e.m11())<t&&Math.abs(this.m12()-e.m12())<t&&Math.abs(this.m20()-e.m20())<t&&Math.abs(this.m21()-e.m21())<t&&Math.abs(this.m22()-e.m22())<t}copy(){return Lh(this.m00(),this.m01(),this.m02(),this.m10(),this.m11(),this.m12(),this.m20(),this.m21(),this.m22(),this.type)}plus(e){return Lh(this.m00()+e.m00(),this.m01()+e.m01(),this.m02()+e.m02(),this.m10()+e.m10(),this.m11()+e.m11(),this.m12()+e.m12(),this.m20()+e.m20(),this.m21()+e.m21(),this.m22()+e.m22())}minus(e){return Lh(this.m00()-e.m00(),this.m01()-e.m01(),this.m02()-e.m02(),this.m10()-e.m10(),this.m11()-e.m11(),this.m12()-e.m12(),this.m20()-e.m20(),this.m21()-e.m21(),this.m22()-e.m22())}transposed(){return Lh(this.m00(),this.m10(),this.m20(),this.m01(),this.m11(),this.m21(),this.m02(),this.m12(),this.m22(),this.type===Nh.IDENTITY||this.type===Nh.SCALING?this.type:void 0)}negated(){return Lh(-this.m00(),-this.m01(),-this.m02(),-this.m10(),-this.m11(),-this.m12(),-this.m20(),-this.m21(),-this.m22())}inverted(){let e;switch(this.type){case Nh.IDENTITY:return this;case Nh.TRANSLATION_2D:return Lh(1,0,-this.m02(),0,1,-this.m12(),0,0,1,Nh.TRANSLATION_2D);case Nh.SCALING:return Lh(1/this.m00(),0,0,0,1/this.m11(),0,0,0,1/this.m22(),Nh.SCALING);case Nh.AFFINE:if(e=this.getDeterminant(),0!==e)return Lh((-this.m12()*this.m21()+this.m11()*this.m22())/e,(this.m02()*this.m21()-this.m01()*this.m22())/e,(-this.m02()*this.m11()+this.m01()*this.m12())/e,(this.m12()*this.m20()-this.m10()*this.m22())/e,(-this.m02()*this.m20()+this.m00()*this.m22())/e,(this.m02()*this.m10()-this.m00()*this.m12())/e,0,0,1,Nh.AFFINE);throw new Error("Matrix could not be inverted, determinant === 0");case Nh.OTHER:if(e=this.getDeterminant(),0!==e)return Lh((-this.m12()*this.m21()+this.m11()*this.m22())/e,(this.m02()*this.m21()-this.m01()*this.m22())/e,(-this.m02()*this.m11()+this.m01()*this.m12())/e,(this.m12()*this.m20()-this.m10()*this.m22())/e,(-this.m02()*this.m20()+this.m00()*this.m22())/e,(this.m02()*this.m10()-this.m00()*this.m12())/e,(-this.m11()*this.m20()+this.m10()*this.m21())/e,(this.m01()*this.m20()-this.m00()*this.m21())/e,(-this.m01()*this.m10()+this.m00()*this.m11())/e,Nh.OTHER);throw new Error("Matrix could not be inverted, determinant === 0");default:throw new Error("Matrix3.inverted with unknown type: "+this.type)}}timesMatrix(e){if(this.type===Nh.IDENTITY||e.type===Nh.IDENTITY)return this.type===Nh.IDENTITY?e:this;if(this.type===e.type){if(this.type===Nh.TRANSLATION_2D)return Lh(1,0,this.m02()+e.m02(),0,1,this.m12()+e.m12(),0,0,1,Nh.TRANSLATION_2D);if(this.type===Nh.SCALING)return Lh(this.m00()*e.m00(),0,0,0,this.m11()*e.m11(),0,0,0,1,Nh.SCALING)}return this.type!==Nh.OTHER&&e.type!==Nh.OTHER?Lh(this.m00()*e.m00()+this.m01()*e.m10(),this.m00()*e.m01()+this.m01()*e.m11(),this.m00()*e.m02()+this.m01()*e.m12()+this.m02(),this.m10()*e.m00()+this.m11()*e.m10(),this.m10()*e.m01()+this.m11()*e.m11(),this.m10()*e.m02()+this.m11()*e.m12()+this.m12(),0,0,1,Nh.AFFINE):Lh(this.m00()*e.m00()+this.m01()*e.m10()+this.m02()*e.m20(),this.m00()*e.m01()+this.m01()*e.m11()+this.m02()*e.m21(),this.m00()*e.m02()+this.m01()*e.m12()+this.m02()*e.m22(),this.m10()*e.m00()+this.m11()*e.m10()+this.m12()*e.m20(),this.m10()*e.m01()+this.m11()*e.m11()+this.m12()*e.m21(),this.m10()*e.m02()+this.m11()*e.m12()+this.m12()*e.m22(),this.m20()*e.m00()+this.m21()*e.m10()+this.m22()*e.m20(),this.m20()*e.m01()+this.m21()*e.m11()+this.m22()*e.m21(),this.m20()*e.m02()+this.m21()*e.m12()+this.m22()*e.m22())}timesVector2(e){const t=this.m00()*e.x+this.m01()*e.y+this.m02(),i=this.m10()*e.x+this.m11()*e.y+this.m12();return new al(t,i)}timesVector3(e){const t=this.m00()*e.x+this.m01()*e.y+this.m02()*e.z,i=this.m10()*e.x+this.m11()*e.y+this.m12()*e.z,n=this.m20()*e.x+this.m21()*e.y+this.m22()*e.z;return new bl(t,i,n)}timesTransposeVector2(e){const t=this.m00()*e.x+this.m10()*e.y,i=this.m01()*e.x+this.m11()*e.y;return new al(t,i)}timesRelativeVector2(e){const t=this.m00()*e.x+this.m01()*e.y,i=this.m10()*e.y+this.m11()*e.y;return new al(t,i)}rowMajor(e,t,i,n,r,s,a,o,l,h){return this.entries[0]=e,this.entries[1]=n,this.entries[2]=a,this.entries[3]=t,this.entries[4]=r,this.entries[5]=o,this.entries[6]=i,this.entries[7]=s,this.entries[8]=l,this.type=void 0===h?0===a&&0===o&&1===l?Nh.AFFINE:Nh.OTHER:h,this}set(e){return this.rowMajor(e.m00(),e.m01(),e.m02(),e.m10(),e.m11(),e.m12(),e.m20(),e.m21(),e.m22(),e.type)}setArray(e){return this.rowMajor(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8])}set00(e){return this.entries[0]=e,this}set01(e){return this.entries[3]=e,this}set02(e){return this.entries[6]=e,this}set10(e){return this.entries[1]=e,this}set11(e){return this.entries[4]=e,this}set12(e){return this.entries[7]=e,this}set20(e){return this.entries[2]=e,this}set21(e){return this.entries[5]=e,this}set22(e){return this.entries[8]=e,this}makeImmutable(){return this}columnMajor(e,t,i,n,r,s,a,o,l,h){return this.rowMajor(e,n,a,t,r,o,i,s,l,h)}add(e){return this.rowMajor(this.m00()+e.m00(),this.m01()+e.m01(),this.m02()+e.m02(),this.m10()+e.m10(),this.m11()+e.m11(),this.m12()+e.m12(),this.m20()+e.m20(),this.m21()+e.m21(),this.m22()+e.m22())}subtract(e){return this.rowMajor(this.m00()-e.m00(),this.m01()-e.m01(),this.m02()-e.m02(),this.m10()-e.m10(),this.m11()-e.m11(),this.m12()-e.m12(),this.m20()-e.m20(),this.m21()-e.m21(),this.m22()-e.m22())}transpose(){return this.rowMajor(this.m00(),this.m10(),this.m20(),this.m01(),this.m11(),this.m21(),this.m02(),this.m12(),this.m22(),this.type===Nh.IDENTITY||this.type===Nh.SCALING?this.type:void 0)}negate(){return this.rowMajor(-this.m00(),-this.m01(),-this.m02(),-this.m10(),-this.m11(),-this.m12(),-this.m20(),-this.m21(),-this.m22())}invert(){let e;switch(this.type){case Nh.IDENTITY:return this;case Nh.TRANSLATION_2D:return this.rowMajor(1,0,-this.m02(),0,1,-this.m12(),0,0,1,Nh.TRANSLATION_2D);case Nh.SCALING:return this.rowMajor(1/this.m00(),0,0,0,1/this.m11(),0,0,0,1/this.m22(),Nh.SCALING);case Nh.AFFINE:if(e=this.getDeterminant(),0!==e)return this.rowMajor((-this.m12()*this.m21()+this.m11()*this.m22())/e,(this.m02()*this.m21()-this.m01()*this.m22())/e,(-this.m02()*this.m11()+this.m01()*this.m12())/e,(this.m12()*this.m20()-this.m10()*this.m22())/e,(-this.m02()*this.m20()+this.m00()*this.m22())/e,(this.m02()*this.m10()-this.m00()*this.m12())/e,0,0,1,Nh.AFFINE);throw new Error("Matrix could not be inverted, determinant === 0");case Nh.OTHER:if(e=this.getDeterminant(),0!==e)return this.rowMajor((-this.m12()*this.m21()+this.m11()*this.m22())/e,(this.m02()*this.m21()-this.m01()*this.m22())/e,(-this.m02()*this.m11()+this.m01()*this.m12())/e,(this.m12()*this.m20()-this.m10()*this.m22())/e,(-this.m02()*this.m20()+this.m00()*this.m22())/e,(this.m02()*this.m10()-this.m00()*this.m12())/e,(-this.m11()*this.m20()+this.m10()*this.m21())/e,(this.m01()*this.m20()-this.m00()*this.m21())/e,(-this.m01()*this.m10()+this.m00()*this.m11())/e,Nh.OTHER);throw new Error("Matrix could not be inverted, determinant === 0");default:throw new Error("Matrix3.inverted with unknown type: "+this.type)}}multiplyMatrix(e){if(e.type===Nh.IDENTITY)return this;if(this.type===Nh.IDENTITY)return this.set(e);if(this.type===e.type){if(this.type===Nh.TRANSLATION_2D)return this.rowMajor(1,0,this.m02()+e.m02(),0,1,this.m12()+e.m12(),0,0,1,Nh.TRANSLATION_2D);if(this.type===Nh.SCALING)return this.rowMajor(this.m00()*e.m00(),0,0,0,this.m11()*e.m11(),0,0,0,1,Nh.SCALING)}return this.type!==Nh.OTHER&&e.type!==Nh.OTHER?this.rowMajor(this.m00()*e.m00()+this.m01()*e.m10(),this.m00()*e.m01()+this.m01()*e.m11(),this.m00()*e.m02()+this.m01()*e.m12()+this.m02(),this.m10()*e.m00()+this.m11()*e.m10(),this.m10()*e.m01()+this.m11()*e.m11(),this.m10()*e.m02()+this.m11()*e.m12()+this.m12(),0,0,1,Nh.AFFINE):this.rowMajor(this.m00()*e.m00()+this.m01()*e.m10()+this.m02()*e.m20(),this.m00()*e.m01()+this.m01()*e.m11()+this.m02()*e.m21(),this.m00()*e.m02()+this.m01()*e.m12()+this.m02()*e.m22(),this.m10()*e.m00()+this.m11()*e.m10()+this.m12()*e.m20(),this.m10()*e.m01()+this.m11()*e.m11()+this.m12()*e.m21(),this.m10()*e.m02()+this.m11()*e.m12()+this.m12()*e.m22(),this.m20()*e.m00()+this.m21()*e.m10()+this.m22()*e.m20(),this.m20()*e.m01()+this.m21()*e.m11()+this.m22()*e.m21(),this.m20()*e.m02()+this.m21()*e.m12()+this.m22()*e.m22())}prependTranslation(e,t){return this.set02(this.m02()+e),this.set12(this.m12()+t),this.type===Nh.IDENTITY||this.type===Nh.TRANSLATION_2D?this.type=Nh.TRANSLATION_2D:this.type===Nh.OTHER?this.type=Nh.OTHER:this.type=Nh.AFFINE,this}setToIdentity(){return this.rowMajor(1,0,0,0,1,0,0,0,1,Nh.IDENTITY)}setToTranslation(e,t){return this.rowMajor(1,0,e,0,1,t,0,0,1,Nh.TRANSLATION_2D)}setToScale(e,t){return t=void 0===t?e:t,this.rowMajor(e,0,0,0,t,0,0,0,1,Nh.SCALING)}setToAffine(e,t,i,n,r,s){return this.rowMajor(e,t,i,n,r,s,0,0,1,Nh.AFFINE)}setToRotationAxisAngle(e,t){let i=Math.cos(t),n=Math.sin(t);Math.abs(i)<1e-15&&(i=0),Math.abs(n)<1e-15&&(n=0);const r=1-i;return this.rowMajor(e.x*e.x*r+i,e.x*e.y*r-e.z*n,e.x*e.z*r+e.y*n,e.y*e.x*r+e.z*n,e.y*e.y*r+i,e.y*e.z*r-e.x*n,e.z*e.x*r-e.y*n,e.z*e.y*r+e.x*n,e.z*e.z*r+i,Nh.OTHER)}setToRotationX(e){let t=Math.cos(e),i=Math.sin(e);return Math.abs(t)<1e-15&&(t=0),Math.abs(i)<1e-15&&(i=0),this.rowMajor(1,0,0,0,t,-i,0,i,t,Nh.OTHER)}setToRotationY(e){let t=Math.cos(e),i=Math.sin(e);return Math.abs(t)<1e-15&&(t=0),Math.abs(i)<1e-15&&(i=0),this.rowMajor(t,0,i,0,1,0,-i,0,t,Nh.OTHER)}setToRotationZ(e){let t=Math.cos(e),i=Math.sin(e);return Math.abs(t)<1e-15&&(t=0),Math.abs(i)<1e-15&&(i=0),this.rowMajor(t,-i,0,i,t,0,0,0,1,Nh.AFFINE)}setToTranslationRotation(e,t,i){let n=Math.cos(i),r=Math.sin(i);return Math.abs(n)<1e-15&&(n=0),Math.abs(r)<1e-15&&(r=0),this.rowMajor(n,-r,e,r,n,t,0,0,1,Nh.AFFINE)}setToTranslationRotationPoint(e,t){return this.setToTranslationRotation(e.x,e.y,t)}setToSVGMatrix(e){return this.rowMajor(e.a,e.c,e.e,e.b,e.d,e.f,0,0,1,Nh.AFFINE)}setRotationAToB(e,t){const i=e,n=t;let r=i.cross(n);const s=i.dot(n);if((s<0?-s:s)>.9999){let e=new bl(i.x>0?i.x:-i.x,i.y>0?i.y:-i.y,i.z>0?i.z:-i.z);e=e.x<e.y?e.x<e.z?bl.X_UNIT:bl.Z_UNIT:e.y<e.z?bl.Y_UNIT:bl.Z_UNIT;const t=e.minus(i);r=e.minus(n);const s=2/t.dot(t),a=2/r.dot(r),o=s*a*t.dot(r);return this.rowMajor(-s*t.x*t.x-a*r.x*r.x+o*r.x*t.x+1,-s*t.x*t.y-a*r.x*r.y+o*r.x*t.y,-s*t.x*t.z-a*r.x*r.z+o*r.x*t.z,-s*t.y*t.x-a*r.y*r.x+o*r.y*t.x,-s*t.y*t.y-a*r.y*r.y+o*r.y*t.y+1,-s*t.y*t.z-a*r.y*r.z+o*r.y*t.z,-s*t.z*t.x-a*r.z*r.x+o*r.z*t.x,-s*t.z*t.y-a*r.z*r.y+o*r.z*t.y,-s*t.z*t.z-a*r.z*r.z+o*r.z*t.z+1)}{const e=1/(1+s),t=e*r.x,i=e*r.z,n=t*r.y,a=t*r.z,o=i*r.y;return this.rowMajor(s+t*r.x,n-r.z,a+r.y,n+r.z,s+e*r.y*r.y,o-r.x,a-r.y,o+r.x,s+i*r.z)}}multiplyVector2(e){return e.setXY(this.m00()*e.x+this.m01()*e.y+this.m02(),this.m10()*e.x+this.m11()*e.y+this.m12())}multiplyVector3(e){return e.setXYZ(this.m00()*e.x+this.m01()*e.y+this.m02()*e.z,this.m10()*e.x+this.m11()*e.y+this.m12()*e.z,this.m20()*e.x+this.m21()*e.y+this.m22()*e.z)}multiplyTransposeVector2(e){return e.setXY(this.m00()*e.x+this.m10()*e.y,this.m01()*e.x+this.m11()*e.y)}multiplyRelativeVector2(e){return e.setXY(this.m00()*e.x+this.m01()*e.y,this.m10()*e.y+this.m11()*e.y)}canvasSetTransform(e){e.setTransform(this.entries[0],this.entries[1],this.entries[3],this.entries[4],this.entries[6],this.entries[7])}canvasAppendTransform(e){this.type!==Nh.IDENTITY&&e.transform(this.entries[0],this.entries[1],this.entries[3],this.entries[4],this.entries[6],this.entries[7])}copyToArray(e){return e[0]=this.m00(),e[1]=this.m10(),e[2]=this.m20(),e[3]=this.m01(),e[4]=this.m11(),e[5]=this.m21(),e[6]=this.m02(),e[7]=this.m12(),e[8]=this.m22(),e}freeToPool(){Mh.pool.freeToPool(this)}static identity(){return kh().setToIdentity()}static translation(e,t){return kh().setToTranslation(e,t)}static translationFromVector(e){return Mh.translation(e.x,e.y)}static scaling(e,t){return kh().setToScale(e,t)}static scale(e,t){return Mh.scaling(e,t)}static affine(e,t,i,n,r,s){return kh().setToAffine(e,t,i,n,r,s)}static rowMajor(e,t,i,n,r,s,a,o,l,h){return kh().rowMajor(e,t,i,n,r,s,a,o,l,h)}static rotationAxisAngle(e,t){return kh().setToRotationAxisAngle(e,t)}static rotationX(e){return kh().setToRotationX(e)}static rotationY(e){return kh().setToRotationY(e)}static rotationZ(e){return kh().setToRotationZ(e)}static translationRotation(e,t,i){return kh().setToTranslationRotation(e,t,i)}static rotation2(e){return kh().setToRotationZ(e)}static rotationAround(e,t,i){return Mh.translation(t,i).timesMatrix(Mh.rotation2(e)).timesMatrix(Mh.translation(-t,-i))}static rotationAroundPoint(e,t){return Mh.rotationAround(e,t.x,t.y)}static fromSVGMatrix(e){return kh().setToSVGMatrix(e)}static rotateAToB(e,t){return kh().setRotationAToB(e,t)}static translationTimesMatrix(e,t,i){let n;return i.type===Nh.IDENTITY||i.type===Nh.TRANSLATION_2D?Lh(1,0,i.m02()+e,0,1,i.m12()+t,0,0,1,Nh.TRANSLATION_2D):(n=i.type===Nh.OTHER?Nh.OTHER:Nh.AFFINE,Lh(i.m00(),i.m01(),i.m02()+e,i.m10(),i.m11(),i.m12()+t,i.m20(),i.m21(),i.m22(),n))}static toStateObject(e){return{entries:e.entries,type:e.type.name}}static fromStateObject(e){const t=Mh.identity();return t.entries=e.entries,t.type=Nh.enumeration.getValue(e.type),t}}_defineProperty(Mh,"pool",new Mo(p=Mh,{initialize:p.prototype.initialize,useDefaultConstruction:!0,maxSize:300})),rl.register("Matrix3",Mh);const kh=Mh.pool.fetch.bind(Mh.pool),Lh=(e,t,i,n,r,s,a,o,l,h)=>kh().rowMajor(e,t,i,n,r,s,a,o,l,h);rl.register("m3",Lh),Mh.IDENTITY=Mh.identity().makeImmutable(),Mh.X_REFLECTION=Lh(-1,0,0,0,1,0,0,0,1,Nh.AFFINE).makeImmutable(),Mh.Y_REFLECTION=Lh(1,0,0,0,-1,0,0,0,1,Nh.AFFINE).makeImmutable(),Mh.Matrix3IO=new el("Matrix3IO",{valueType:Mh,documentation:"A 3x3 matrix often used for holding transform data.",toStateObject:e=>Mh.toStateObject(e),fromStateObject:Mh.fromStateObject,stateSchema:{entries:xh(il),type:bh(Nh)}});const Ih=new al(.64,.33),Bh=new al(.3,.6),Dh=new al(.15,.06),Oh=new al(.312713,.329016),qh=new al(.68,.32),Yh=new al(.265,.69),Hh=new al(.15,.06),Gh=[];class Fh extends dh{constructor(e){super(Gh,0===e.x&&0===e.y&&0===e.z&&0===e.w,1===e.w,!1,!1,!1),this.color=e,this.isSimplified=!0}getName(){return"RenderColor"}withChildren(e){return this}equalsTyped(e){return this.color.equals(e.color)}evaluate(e){return this.color}static applyProgram(e,t){e.set(t)}writeInstructions(e){e.push(new lh(this.color))}getExtraDebugString(){return`${this.color.x}, ${this.color.y}, ${this.color.z}, ${this.color.w}`}static sRGBToLinear(e){return new yl(e.x<=.0404482362771082?e.x/12.92:Math.pow((e.x+.055)/1.055,2.4),e.y<=.0404482362771082?e.y/12.92:Math.pow((e.y+.055)/1.055,2.4),e.z<=.0404482362771082?e.z/12.92:Math.pow((e.z+.055)/1.055,2.4),e.w)}static linearToSRGB(e){return new yl(e.x<=.00313066844250063?12.92*e.x:1.055*Math.pow(e.x,1/2.4)-.055,e.y<=.00313066844250063?12.92*e.y:1.055*Math.pow(e.y,1/2.4)-.055,e.z<=.00313066844250063?12.92*e.z:1.055*Math.pow(e.z,1/2.4)-.055,e.w)}static linearToOklab(e){const t=.4122214708*e.x+.5363325363*e.y+.0514459929*e.z,i=.2119034982*e.x+.6806995451*e.y+.1073969566*e.z,n=.0883024619*e.x+.2817188376*e.y+.6299787005*e.z,r=Math.cbrt(t),s=Math.cbrt(i),a=Math.cbrt(n);return new yl(.2104542553*r+.793617785*s-.0040720468*a,1.9779984951*r-2.428592205*s+.4505937099*a,.0259040371*r+.7827717662*s-.808675766*a,e.w)}static oklabToLinear(e){const t=e.x+.3963377774*e.y+.2158037573*e.z,i=e.x-.1055613458*e.y-.0638541728*e.z,n=e.x-.0894841775*e.y-1.291485548*e.z,r=t*t*t,s=i*i*i,a=n*n*n;return new yl(4.0767416621*r-3.3077115913*s+.2309699292*a,-1.2684380046*r+2.6097574011*s-.3413193965*a,-.0041960863*r-.7034186147*s+1.707614701*a,e.w)}static multiplyMatrixTimesColor(e,t){return new yl(e.m00()*t.x+e.m01()*t.y+e.m02()*t.z,e.m10()*t.x+e.m11()*t.y+e.m12()*t.z,e.m20()*t.x+e.m21()*t.y+e.m22()*t.z,t.w)}static linearToLinearDisplayP3(e){return Fh.multiplyMatrixTimesColor(Fh.sRGBToDisplayP3Matrix,e)}static linearDisplayP3ToLinear(e){return Fh.multiplyMatrixTimesColor(Fh.displayP3TosRGBMatrix,e)}static linearDisplayP3ToDisplayP3(e){return Fh.linearToSRGB(e)}static displayP3ToLinearDisplayP3(e){return Fh.sRGBToLinear(e)}static oklabToOklch(e){const t=Math.sqrt(e.y*e.y+e.z*e.z),i=Math.atan2(e.z,e.y);return new yl(e.x,t,i,e.w)}static oklchToOklab(e){return new yl(e.x,e.y*Math.cos(e.z),e.y*Math.sin(e.z),e.w)}static linearToOklch(e){return Fh.oklabToOklch(Fh.linearToOklab(e))}static oklchToLinear(e){return Fh.oklabToLinear(Fh.oklchToOklab(e))}static linearDisplayP3ToOklch(e){return Fh.linearToOklch(Fh.linearDisplayP3ToLinear(e))}static oklchToLinearDisplayP3(e){return Fh.linearToLinearDisplayP3(Fh.oklchToLinear(e))}static convert(e,t,i){return t===i?e:t.name===i.name?t.isLinear===i.isLinear?t.isPremultiplied?Fh.unpremultiply(e):Fh.premultiply(e):(t.isPremultiplied&&(e=Fh.unpremultiply(e)),"srgb"!==t.name&&"display-p3"!==t.name||(e=t.isLinear?Fh.linearToSRGB(e):Fh.sRGBToLinear(e)),i.isPremultiplied&&(e=Fh.premultiply(e)),e):(t.isPremultiplied&&(e=Fh.unpremultiply(e)),t===zh.xyY&&(e=0===e.y?new yl(0,0,0,e.w):new yl(e.x*e.z/e.y,e.z,(1-e.x-e.y)*e.z/e.y,e.w)),t!==zh.xyY&&t!==zh.XYZ||(e=Fh.multiplyMatrixTimesColor(Fh.XYZTosRGBMatrix,e)),t!==zh.sRGB&&t!==zh.premultipliedSRGB&&t!==zh.displayP3&&t!==zh.premultipliedDisplayP3||(e=Fh.sRGBToLinear(e)),t!==zh.displayP3&&t!==zh.premultipliedDisplayP3||(e=Fh.linearDisplayP3ToLinear(e)),t!==zh.oklab&&t!==zh.premultipliedOklab||(e=Fh.oklabToLinear(e)),i!==zh.oklab&&i!==zh.premultipliedOklab||(e=Fh.linearToOklab(e)),i!==zh.displayP3&&i!==zh.premultipliedDisplayP3||(e=Fh.linearToLinearDisplayP3(e)),i!==zh.sRGB&&i!==zh.premultipliedSRGB&&i!==zh.displayP3&&i!==zh.premultipliedDisplayP3||(e=Fh.linearToSRGB(e)),i!==zh.xyY&&i!==zh.XYZ||(e=Fh.multiplyMatrixTimesColor(Fh.sRGBToXYZMatrix,e)),i===zh.xyY&&(e=e.x+e.y+e.z===0?new yl(Oh.x,Oh.y,0,e.w):new yl(e.x/(e.x+e.y+e.z),e.y/(e.x+e.y+e.z),e.y,e.w)),i.isPremultiplied&&(e=Fh.premultiply(e)),e)}static isColorInRange(e){return e.x>=0&&e.x<=1&&e.y>=0&&e.y<=1&&e.z>=0&&e.z<=1}static gamutMapColor(e,t,i){if(Fh.isColorInRange(e))return e;const n=t(e).copy();if(n.x<=0)return new yl(0,0,0,e.w);if(n.x>=1)return new yl(1,1,1,e.w);const r=new al(n.y,n.z);let s=0,a=1,o=null;for(;a-s>1e-4;){const e=.5*(s+a);n.y=r.x*e,n.z=r.y*e;const l=i(n),h=Fh.isColorInRange(l);o=h?l:new yl(Math.max(0,Math.min(1,l.x)),Math.max(0,Math.min(1,l.y)),Math.max(0,Math.min(1,l.z)),l.w),h||t(o).distance(n)<=.02?s=e:a=e}const l=i(n);return Fh.isColorInRange(l)?l:o}static gamutMapLinearSRGB(e){return Fh.gamutMapColor(e,Fh.linearToOklab,Fh.oklabToLinear)}static gamutMapLinearDisplayP3(e){return Fh.gamutMapColor(e,Fh.linearDisplayP3ToOklab,Fh.oklabToLinearDisplayP3)}static gamutMapSRGB(e){return Fh.isColorInRange(e)?e:Fh.linearToSRGB(Fh.gamutMapLinearSRGB(Fh.sRGBToLinear(e)))}static gamutMapDisplayP3(e){return Fh.isColorInRange(e)?e:Fh.linearDisplayP3ToDisplayP3(Fh.gamutMapLinearDisplayP3(Fh.displayP3ToLinearDisplayP3(e)))}static gamutMapPremultipliedSRGB(e){if(e.w<=1e-8)return yl.ZERO;const t=Fh.gamutMapSRGB(Fh.unpremultiply(e));return e.w>1?new yl(t.x,t.y,t.z,1):t}static gamutMapPremultipliedDisplayP3(e){if(e.w<=1e-8)return yl.ZERO;const t=Fh.gamutMapDisplayP3(Fh.unpremultiply(e));return e.w>1?new yl(t.x,t.y,t.z,1):t}static oklabToLinearDisplayP3(e){return Fh.linearToLinearDisplayP3(Fh.oklabToLinear(e))}static linearDisplayP3ToOklab(e){return Fh.linearToOklab(Fh.linearDisplayP3ToLinear(e))}static premultiply(e){return new yl(e.x*e.w,e.y*e.w,e.z*e.w,e.w)}static unpremultiply(e){return 0===e.w?yl.ZERO:new yl(e.x/e.w,e.y/e.w,e.z/e.w,e.w)}static xyYToXYZ(e){return new bl(e.x*e.z/e.y,e.z,(1-e.x-e.y)*e.z/e.y)}static xyToXYZ(e){return Fh.xyYToXYZ(new bl(e.x,e.y,1))}static xyzToLinear(e){return Fh.multiplyMatrixTimesColor(Fh.XYZTosRGBMatrix,e)}static linearToXYZ(e){return Fh.multiplyMatrixTimesColor(Fh.sRGBToXYZMatrix,e)}static getMatrixRGBToXYZ(e,t,i,n){const r=Fh.xyToXYZ(n),s=Fh.xyToXYZ(e),a=Fh.xyToXYZ(t),o=Fh.xyToXYZ(i),l=Mh.rowMajor(s.x,a.x,o.x,s.y,a.y,o.y,s.z,a.z,o.z),h=l.inverted().timesVector3(r);return l.timesMatrix(Mh.rowMajor(h.x,0,0,0,h.y,0,0,0,h.z))}static canvasSupportsDisplayP3(){const e=document.createElement("canvas");try{return"display-p3"===e.getContext("2d",{colorSpace:"display-p3"}).getContextAttributes().colorSpace}catch{return!1}}static ratioBlend(e,t,i){const n=1-i;return new yl(e.x*n+t.x*i,e.y*n+t.y*i,e.z*n+t.z*i,e.w*n+t.w*i)}serialize(){return{type:"RenderColor",color:{r:this.color.x,g:this.color.y,b:this.color.z,a:this.color.w}}}static deserialize(e){return new Fh(new yl(e.color.r,e.color.g,e.color.b,e.color.a))}}_defineProperty(Fh,"sRGBToXYZMatrix",(m=Fh).getMatrixRGBToXYZ(Ih,Bh,Dh,Oh)),_defineProperty(Fh,"XYZTosRGBMatrix",m.sRGBToXYZMatrix.inverted()),_defineProperty(Fh,"displayP3ToXYZMatrix",m.getMatrixRGBToXYZ(qh,Yh,Hh,Oh)),_defineProperty(Fh,"XYZToDisplayP3Matrix",m.displayP3ToXYZMatrix.inverted()),_defineProperty(Fh,"sRGBToDisplayP3Matrix",m.XYZToDisplayP3Matrix.timesMatrix(m.sRGBToXYZMatrix)),_defineProperty(Fh,"displayP3TosRGBMatrix",m.sRGBToDisplayP3Matrix.inverted()),_defineProperty(Fh,"TRANSPARENT",new m(yl.ZERO)),St.register("RenderColor",Fh);class zh{constructor(e,t,i,n,r,s,a,o,l,h,u){this.name=e,this.isPremultiplied=t,this.isLinear=i,this.toLinear=n,this.fromLinear=r,this.linearToLinearSRGB=s,this.linearSRGBToLinear=a,this.toLinearRenderProgram=o,this.fromLinearRenderProgram=l,this.linearToLinearSRGBRenderProgram=h,this.linearSRGBToLinearRenderProgram=u}}_defineProperty(zh,"XYZ",new(g=zh)("XYZ",!1,!0,_.identity,_.identity,Fh.xyzToLinear,Fh.linearToXYZ)),_defineProperty(zh,"xyY",new g("xyY",!1,!1)),_defineProperty(zh,"sRGB",new g("srgb",!1,!1,Fh.sRGBToLinear,Fh.linearToSRGB,_.identity,_.identity,e=>new iu(e),e=>new su(e),_.identity,_.identity)),_defineProperty(zh,"premultipliedSRGB",new g("srgb",!0,!1,Fh.sRGBToLinear,Fh.linearToSRGB,_.identity,_.identity,e=>new iu(e),e=>new su(e),_.identity,_.identity)),_defineProperty(zh,"linearSRGB",new g("srgb",!1,!0,Fh.sRGBToLinear,Fh.linearToSRGB,_.identity,_.identity,e=>new iu(e),e=>new su(e),_.identity,_.identity)),_defineProperty(zh,"premultipliedLinearSRGB",new g("srgb",!0,!0,Fh.sRGBToLinear,Fh.linearToSRGB,_.identity,_.identity,e=>new iu(e),e=>new su(e),_.identity,_.identity)),_defineProperty(zh,"displayP3",new g("display-p3",!1,!1,Fh.displayP3ToLinearDisplayP3,Fh.linearDisplayP3ToDisplayP3,Fh.sRGBToLinear,Fh.linearToSRGB,e=>new iu(e),e=>new su(e),e=>new mu(e),e=>new yu(e))),_defineProperty(zh,"premultipliedDisplayP3",new g("display-p3",!0,!1,Fh.displayP3ToLinearDisplayP3,Fh.linearDisplayP3ToDisplayP3,Fh.sRGBToLinear,Fh.linearToSRGB,e=>new iu(e),e=>new su(e),e=>new mu(e),e=>new yu(e))),_defineProperty(zh,"linearDisplayP3",new g("display-p3",!1,!0,Fh.displayP3ToLinearDisplayP3,Fh.linearDisplayP3ToDisplayP3,Fh.sRGBToLinear,Fh.linearToSRGB,e=>new iu(e),e=>new su(e),e=>new mu(e),e=>new yu(e))),_defineProperty(zh,"premultipliedLinearDisplayP3",new g("display-p3",!0,!0,Fh.displayP3ToLinearDisplayP3,Fh.linearDisplayP3ToDisplayP3,Fh.sRGBToLinear,Fh.linearToSRGB,e=>new iu(e),e=>new su(e),e=>new mu(e),e=>new yu(e))),_defineProperty(zh,"oklab",new g("oklab",!1,!1,Fh.oklabToLinear,Fh.linearToOklab,_.identity,_.identity,e=>new lu(e),e=>new cu(e),_.identity,_.identity)),_defineProperty(zh,"premultipliedOklab",new g("oklab",!0,!1,Fh.oklabToLinear,Fh.linearToOklab,_.identity,_.identity,e=>new lu(e),e=>new cu(e),_.identity,_.identity)),St.register("RenderColorSpace",zh);class Uh extends dh{constructor(e,t){super([e],e.isFullyTransparent,e.isFullyOpaque),this.program=e,this.convert=t}static convert(e,t,i){return t===i?e:(t.isPremultiplied&&(e=new $h(e)),t.isLinear||(e=t.toLinearRenderProgram(e)),e=t.linearToLinearSRGBRenderProgram(e),e=i.linearSRGBToLinearRenderProgram(e),i.isLinear||(e=i.fromLinearRenderProgram(e)),i.isPremultiplied&&(e=new Kh(e)),e.simplified())}getSimplified(e){const t=e[0];return t.isFullyTransparent?Fh.TRANSPARENT:t instanceof Fh?new Fh(this.convert(t.color)):this.inverse&&t instanceof this.inverse?t.program:t instanceof gh&&t.isOneSided()?t.withOneSide(this.withChildren([t.getOneSide()])).simplified():null}evaluate(e){const t=this.program.evaluate(e);return this.convert(t)}static displayP3ToSRGB(e){return new su(new mu(new iu(e)))}static sRGBToDisplayP3(e){return new su(new yu(new iu(e)))}static displayP3ToLinearSRGB(e){return new mu(new iu(e))}static linearSRGBToDisplayP3(e){return new su(new yu(e))}static oklabToSRGB(e){return new su(new lu(e))}static sRGBToOklab(e){return new cu(new iu(e))}static oklabToDisplayP3(e){return new su(new yu(new lu(e)))}static displayP3ToOklab(e){return new cu(new mu(new iu(e)))}static premulSRGBToPremulLinearSRGB(e){return new Kh(new iu(new $h(e)))}static premulLinearSRGBToPremulSRGB(e){return new Kh(new su(new $h(e)))}static premulLinearSRGBToPremulDisplayP3(e){return new Kh(Uh.linearSRGBToDisplayP3(new $h(e)))}static premulDisplayP3ToPremulLinearSRGB(e){return new Kh(Uh.displayP3ToLinearSRGB(new $h(e)))}static premulDisplayP3ToPremulSRGB(e){return new Kh(Uh.displayP3ToSRGB(new $h(e)))}static premulSRGBToPremulDisplayP3(e){return new Kh(Uh.sRGBToDisplayP3(new $h(e)))}static premulOklabToPremulSRGB(e){return new Kh(Uh.oklabToSRGB(new $h(e)))}static premulSRGBToPremulOklab(e){return new Kh(Uh.sRGBToOklab(new $h(e)))}static premulOklabToPremulDisplayP3(e){return new Kh(Uh.oklabToDisplayP3(new $h(e)))}static premulDisplayP3ToPremulOklab(e){return new Kh(Uh.displayP3ToOklab(new $h(e)))}serialize(){return{type:"RenderColorSpaceConversion",subtype:this.getName(),program:this.program.serialize()}}static deserialize(e){const t=dh.deserialize(e.program);if("RenderPremultiply"===e.subtype)return new Kh(t);if("RenderUnpremultiply"===e.subtype)return new $h(t);if("RenderLinearSRGBToOklab"===e.subtype)return new cu(t);if("RenderLinearSRGBToSRGB"===e.subtype)return new su(t);if("RenderOklabToLinearSRGB"===e.subtype)return new lu(t);if("RenderSRGBToLinearSRGB"===e.subtype)return new iu(t);if("RenderLinearDisplayP3ToLinearSRGB"===e.subtype)return new mu(t);if("RenderLinearSRGBToLinearDisplayP3"===e.subtype)return new yu(t);throw new Error("Unrecognized subtype: "+e.subtype)}}St.register("RenderColorSpaceConversion",Uh);class Wh extends dh{constructor(e,t){super([e],0===t||e.isFullyTransparent,1===t&&e.isFullyOpaque),this.program=e,this.alpha=t}getName(){return"RenderAlpha"}withChildren(e){return new Wh(e[0],this.alpha)}equalsTyped(e){return this.alpha===e.alpha}getSimplified(e){const t=e[0];return t.isFullyTransparent||0===this.alpha?Fh.TRANSPARENT:1===this.alpha?t:t instanceof Fh?new Fh(t.color.timesScalar(this.alpha)):t instanceof gh&&t.isOneSided()?t.withOneSide(this.withChildren([t.getOneSide()])).simplified():null}evaluate(e){return this.program.evaluate(e).timesScalar(this.alpha)}writeInstructions(e){this.program.writeInstructions(e),e.push(new ch(this.alpha))}getExtraDebugString(){return""+this.alpha}serialize(){return{type:"RenderAlpha",program:this.program.serialize(),alpha:this.alpha}}static deserialize(e){return new Wh(dh.deserialize(e.program),e.alpha)}}St.register("RenderAlpha",Wh);class Xh extends dh{constructor(e){super([e],e.isFullyTransparent,e.isFullyOpaque),this.program=e}getName(){return"RenderNormalize"}withChildren(e){return new Xh(e[0])}getSimplified(e){const t=e[0];return t.isFullyTransparent?Fh.TRANSPARENT:t instanceof Fh?new Fh(t.color.magnitude>0?t.color.normalized():yl.ZERO):t instanceof gh&&t.isOneSided()?t.withOneSide(this.withChildren([t.getOneSide()])).simplified():null}evaluate(e){const t=this.program.evaluate(e);return 0===t.magnitude?yl.ZERO:t.normalized()}writeInstructions(e){this.program.writeInstructions(e),e.push(Qh.INSTANCE)}serialize(){return{type:"RenderNormalize",program:this.program.serialize()}}static deserialize(e){return new Xh(dh.deserialize(e.program))}}St.register("RenderNormalize",Xh);const jh=new yl(0,0,0,0);class Qh extends rh{toString(){return"RenderInstructionNormalize()"}equals(e,t){return e instanceof Qh}execute(e,t,i){e.readTop(jh);const n=jh.magnitude;0===n?e.writeTop(yl.ZERO):e.writeTopValues(jh.x/n,jh.y/n,jh.z/n,jh.w/n)}writeBinary(e,t){e.pushU32(rh.NormalizeCode)}getBinaryLength(){return 1}}_defineProperty(Qh,"INSTANCE",new Qh);class Kh extends Uh{constructor(e){super(e,Fh.premultiply)}getName(){return"RenderPremultiply"}withChildren(e){return new Kh(e[0])}writeInstructions(e){this.program.writeInstructions(e),e.push(Jh.INSTANCE)}}St.register("RenderPremultiply",Kh);const Zh=new yl(0,0,0,0);class Jh extends rh{toString(){return"RenderInstructionPremultiply()"}equals(e,t){return e instanceof Jh}execute(e,t,i){e.readTop(Zh),e.writeTopValues(Zh.x*Zh.w,Zh.y*Zh.w,Zh.z*Zh.w,Zh.w)}writeBinary(e,t){e.pushU32(rh.PremultiplyCode)}getBinaryLength(){return 1}}_defineProperty(Jh,"INSTANCE",new Jh);class $h extends Uh{constructor(e){super(e,Fh.unpremultiply)}getName(){return"RenderUnpremultiply"}withChildren(e){return new $h(e[0])}writeInstructions(e){this.program.writeInstructions(e),e.push(tu.INSTANCE)}}Kh.prototype.inverse=$h,$h.prototype.inverse=Kh,St.register("RenderUnpremultiply",$h);const eu=new yl(0,0,0,0);class tu extends rh{toString(){return"RenderInstructionUnpremultiply()"}equals(e,t){return e instanceof tu}execute(e,t,i){e.readTop(eu);const n=eu.w;0===n?e.writeTop(yl.ZERO):e.writeTopValues(eu.x/n,eu.y/n,eu.z/n,n)}writeBinary(e,t){e.pushU32(rh.UnpremultiplyCode)}getBinaryLength(){return 1}}_defineProperty(tu,"INSTANCE",new tu);class iu extends Uh{constructor(e){super(e,Fh.sRGBToLinear)}getName(){return"RenderSRGBToLinearSRGB"}withChildren(e){return new iu(e[0])}writeInstructions(e){this.program.writeInstructions(e),e.push(ru.INSTANCE)}}St.register("RenderSRGBToLinearSRGB",iu);const nu=new yl(0,0,0,0);class ru extends rh{toString(){return"RenderInstructionSRGBToLinearSRGB()"}equals(e,t){return e instanceof ru}execute(e,t,i){e.readTop(nu),e.writeTopValues(nu.x<=.0404482362771082?nu.x/12.92:Math.pow((nu.x+.055)/1.055,2.4),nu.y<=.0404482362771082?nu.y/12.92:Math.pow((nu.y+.055)/1.055,2.4),nu.z<=.0404482362771082?nu.z/12.92:Math.pow((nu.z+.055)/1.055,2.4),nu.w)}writeBinary(e,t){e.pushU32(rh.SRGBToLinearSRGBCode)}getBinaryLength(){return 1}}_defineProperty(ru,"INSTANCE",new ru);class su extends Uh{constructor(e){super(e,Fh.linearToSRGB)}getName(){return"RenderLinearSRGBToSRGB"}withChildren(e){return new su(e[0])}writeInstructions(e){this.program.writeInstructions(e),e.push(ou.INSTANCE)}}su.prototype.inverse=iu,iu.prototype.inverse=su,St.register("RenderLinearSRGBToSRGB",su);const au=new yl(0,0,0,0);class ou extends rh{toString(){return"RenderInstructionLinearSRGBToSRGB()"}equals(e,t){return e instanceof ou}execute(e,t,i){e.readTop(au),e.writeTopValues(au.x<=.00313066844250063?12.92*au.x:1.055*Math.pow(au.x,1/2.4)-.055,au.y<=.00313066844250063?12.92*au.y:1.055*Math.pow(au.y,1/2.4)-.055,au.z<=.00313066844250063?12.92*au.z:1.055*Math.pow(au.z,1/2.4)-.055,au.w)}writeBinary(e,t){e.pushU32(rh.LinearSRGBToSRGBCode)}getBinaryLength(){return 1}}_defineProperty(ou,"INSTANCE",new ou);class lu extends Uh{constructor(e){super(e,Fh.oklabToLinear)}getName(){return"RenderOklabToLinearSRGB"}withChildren(e){return new lu(e[0])}writeInstructions(e){this.program.writeInstructions(e),e.push(uu.INSTANCE)}}St.register("RenderOklabToLinearSRGB",lu);const hu=new yl(0,0,0,0);class uu extends rh{toString(){return"RenderInstructionOklabToLinearSRGB()"}equals(e,t){return e instanceof uu}execute(e,t,i){e.readTop(hu);const n=hu.x+.3963377774*hu.y+.2158037573*hu.z,r=hu.x-.1055613458*hu.y-.0638541728*hu.z,s=hu.x-.0894841775*hu.y-1.291485548*hu.z,a=n*n*n,o=r*r*r,l=s*s*s;e.writeTopValues(4.0767416621*a-3.3077115913*o+.2309699292*l,-1.2684380046*a+2.6097574011*o-.3413193965*l,-.0041960863*a-.7034186147*o+1.707614701*l,hu.w)}writeBinary(e,t){e.pushU32(rh.OklabToLinearSRGBCode)}getBinaryLength(){return 1}}_defineProperty(uu,"INSTANCE",new uu);class cu extends Uh{constructor(e){super(e,Fh.linearToOklab)}getName(){return"RenderLinearSRGBToOklab"}withChildren(e){return new cu(e[0])}writeInstructions(e){this.program.writeInstructions(e),e.push(pu.INSTANCE)}}cu.prototype.inverse=lu,lu.prototype.inverse=cu,St.register("RenderLinearSRGBToOklab",cu);const du=new yl(0,0,0,0);class pu extends rh{toString(){return"RenderInstructionLinearSRGBToOklab()"}equals(e,t){return e instanceof pu}execute(e,t,i){e.readTop(du);const n=.4122214708*du.x+.5363325363*du.y+.0514459929*du.z,r=.2119034982*du.x+.6806995451*du.y+.1073969566*du.z,s=.0883024619*du.x+.2817188376*du.y+.6299787005*du.z,a=Math.cbrt(n),o=Math.cbrt(r),l=Math.cbrt(s);e.writeTopValues(.2104542553*a+.793617785*o-.0040720468*l,1.9779984951*a-2.428592205*o+.4505937099*l,.0259040371*a+.7827717662*o-.808675766*l,du.w)}writeBinary(e,t){e.pushU32(rh.LinearSRGBToOklabCode)}getBinaryLength(){return 1}}_defineProperty(pu,"INSTANCE",new pu);class mu extends Uh{constructor(e){super(e,Fh.linearDisplayP3ToLinear)}getName(){return"RenderLinearDisplayP3ToLinearSRGB"}withChildren(e){return new mu(e[0])}writeInstructions(e){this.program.writeInstructions(e),e.push(fu.INSTANCE)}}St.register("RenderLinearDisplayP3ToLinearSRGB",mu);const gu=new yl(0,0,0,0);class fu extends rh{toString(){return"RenderInstructionLinearDisplayP3ToLinearSRGB()"}equals(e,t){return e instanceof fu}execute(e,t,i){const n=Fh.displayP3TosRGBMatrix;e.readTop(gu),e.writeTopValues(n.m00()*gu.x+n.m01()*gu.y+n.m02()*gu.z,n.m10()*gu.x+n.m11()*gu.y+n.m12()*gu.z,n.m20()*gu.x+n.m21()*gu.y+n.m22()*gu.z,gu.w)}writeBinary(e,t){e.pushU32(rh.LinearDisplayP3ToLinearSRGBCode)}getBinaryLength(){return 1}}_defineProperty(fu,"INSTANCE",new fu);class yu extends Uh{constructor(e){super(e,Fh.linearToLinearDisplayP3)}getName(){return"RenderLinearSRGBToLinearDisplayP3"}withChildren(e){return new yu(e[0])}writeInstructions(e){this.program.writeInstructions(e),e.push(vu.INSTANCE)}}yu.prototype.inverse=mu,mu.prototype.inverse=yu,St.register("RenderLinearSRGBToLinearDisplayP3",yu);const Eu=new yl(0,0,0,0);class vu extends rh{toString(){return"RenderInstructionLinearSRGBToLinearDisplayP3()"}equals(e,t){return e instanceof vu}execute(e,t,i){const n=Fh.sRGBToDisplayP3Matrix;e.readTop(Eu),e.writeTopValues(n.m00()*Eu.x+n.m01()*Eu.y+n.m02()*Eu.z,n.m10()*Eu.x+n.m11()*Eu.y+n.m12()*Eu.z,n.m20()*Eu.x+n.m21()*Eu.y+n.m22()*Eu.z,Eu.w)}writeBinary(e,t){e.pushU32(rh.LinearSRGBToLinearDisplayP3Code)}getBinaryLength(){return 1}}_defineProperty(vu,"INSTANCE",new vu);class Au extends dh{constructor(e,t,i,n,r){let s=!1,a=!1;const o=i.isFullyTransparent,l=i.isFullyOpaque,h=n.isFullyTransparent,u=n.isFullyOpaque;if(o&&h)s=!0,a=!1;else switch(e){case Nl.Over:a=l||u;break;case Nl.In:s=o||h,a=l&&u;break;case Nl.Out:s=o||u,a=l&&h;break;case Nl.Atop:s=h,a=u;break;case Nl.Xor:s=l&&u,a=l&&h||o&&u;break;case Nl.Plus:case Nl.PlusLighter:a=l&&u}super([i,n],s,a),this.composeType=e,this.blendType=t,this.a=i,this.b=n,this.logic=r||new bu(this.composeType,this.blendType)}getName(){return"RenderBlendCompose"}withChildren(e){return new Au(this.composeType,this.blendType,e[0],e[1],this.logic)}equalsTyped(e){return this.composeType===e.composeType&&this.blendType===e.blendType}getSimplified(e){const t=e[0],i=e[1];if(this.blendType===Cl.Normal&&this.composeType===Nl.Over)return new wu([i,t]).simplified();const n=t.isFullyTransparent,r=t.isFullyOpaque,s=i.isFullyTransparent,a=i.isFullyOpaque;if(n&&s)return Fh.TRANSPARENT;const o=this.blendType===Cl.Normal;switch(this.composeType){case Nl.Over:if(o&&r)return t;if(n)return i;break;case Nl.In:if(n||s)return Fh.TRANSPARENT;if(o&&a)return t;break;case Nl.Out:if(n||a)return Fh.TRANSPARENT;if(o&&s)return t;break;case Nl.Atop:if(s)return Fh.TRANSPARENT;if(o&&r&&a)return t;if(n)return i;break;case Nl.Xor:if(r&&a)return Fh.TRANSPARENT;if(n)return i;if(s)return t;break;case Nl.Plus:case Nl.PlusLighter:if(n)return i;if(s)return t}return t instanceof Fh&&i instanceof Fh?new Fh(Au.blendCompose(t.color,i.color,this.composeType,this.blendType)):null}evaluate(e){const t=this.a.evaluate(e),i=this.b.evaluate(e);return Au.blendCompose(t,i,this.composeType,this.blendType)}writeInstructions(e){this.b.writeInstructions(e),this.a.writeInstructions(e),e.push(new xu(this.logic))}getExtraDebugString(){return`${Nl[this.composeType]}, ${Cl[this.blendType]}`}static blendCompose(e,t,i,n){let r,s,a;if(n===Cl.Normal)r=e;else{const i=Fh.unpremultiply(e).toVector3(),s=Fh.unpremultiply(t).toVector3();let a;switch(n){case Cl.Multiply:a=s.componentTimes(i);break;case Cl.Screen:a=Au.screen(s,i);break;case Cl.Overlay:a=Au.hardLight(i,s);break;case Cl.Darken:a=new bl(Math.min(s.x,i.x),Math.min(s.y,i.y),Math.min(s.z,i.z));break;case Cl.Lighten:a=new bl(Math.max(s.x,i.x),Math.max(s.y,i.y),Math.max(s.z,i.z));break;case Cl.ColorDodge:a=new bl(Au.colorDodge(s.x,i.x),Au.colorDodge(s.y,i.y),Au.colorDodge(s.z,i.z));break;case Cl.ColorBurn:a=new bl(Au.colorBurn(s.x,i.x),Au.colorBurn(s.y,i.y),Au.colorBurn(s.z,i.z));break;case Cl.HardLight:a=Au.hardLight(s,i);break;case Cl.SoftLight:a=Au.softLight(s,i);break;case Cl.Difference:a=new bl(Math.abs(s.x-i.x),Math.abs(s.y-i.y),Math.abs(s.z-i.z));break;case Cl.Exclusion:a=s.plus(i).minus(s.componentTimes(i).timesScalar(2));break;case Cl.Hue:a=Au.setLum(Au.setSat(i,Au.sat(s)),Au.lum(s));break;case Cl.Saturation:a=Au.setLum(Au.setSat(s,Au.sat(i)),Au.lum(s));break;case Cl.Color:a=Au.setLum(i,Au.lum(s));break;case Cl.Luminosity:a=Au.setLum(s,Au.lum(i));break;default:a=i}r=Fh.premultiply(new yl(a.x,a.y,a.z,e.w))}switch(i){case Nl.Over:s=1,a=1-e.w;break;case Nl.In:s=t.w,a=0;break;case Nl.Out:s=1-t.w,a=0;break;case Nl.Atop:s=t.w,a=1-e.w;break;case Nl.Xor:s=1-t.w,a=1-e.w;break;case Nl.Plus:s=1,a=1;break;case Nl.PlusLighter:return new yl(Math.min(e.x+t.x,1),Math.min(e.y+t.y,1),Math.min(e.z+t.z,1),Math.min(e.w+t.w,1));default:throw new Error("unimplemented composeType")}return new yl(s*r.x+a*t.x,s*r.y+a*t.y,s*r.z+a*t.z,s*e.w+a*t.w)}static screen(e,t){return e.plus(t).minus(e.componentTimes(t))}static colorDodge(e,t){return 0===e?0:1===t?1:Math.min(1,e/(1-t))}static colorBurn(e,t){return 1===e?1:0===t?0:1-Math.min(1,(1-e)/t)}static hardLight(e,t){const i=Au.screen(e,t.timesScalar(2).minusScalar(1)),n=e.timesScalar(2).componentTimes(t);return new bl(t.x<=.5?n.x:i.x,t.y<=.5?n.y:i.y,t.z<=.5?n.z:i.z)}static softLight(e,t){const i=new bl(e.x<=.25?(16*e.x-12)*e.x+4:Math.sqrt(e.x),e.y<=.25?(16*e.y-12)*e.y+4:Math.sqrt(e.y),e.z<=.25?(16*e.z-12)*e.z+4:Math.sqrt(e.z));return new bl(t.x>.5?e.x+(2*t.x-1)*(i.x-e.x):e.x-(1-2*t.x)*e.x*(1-e.x),t.y>.5?e.y+(2*t.y-1)*(i.y-e.y):e.y-(1-2*t.y)*e.y*(1-e.y),t.z>.5?e.z+(2*t.z-1)*(i.z-e.z):e.z-(1-2*t.z)*e.z*(1-e.z))}static sat(e){return Math.max(e.x,Math.max(e.y,e.z))-Math.min(e.x,Math.min(e.y,e.z))}static lum(e){return.3*e.x+.59*e.y+.11*e.z}static clipColor(e){const t=Au.lum(e),i=new bl(t,t,t),n=Math.min(e.x,e.y,e.z),r=Math.max(e.x,e.y,e.z);return n<0&&(e=i.plus(e.minus(i).componentTimes(i).dividedScalar(t-n))),r>1&&(e=i.plus(e.minus(i).timesScalar((1-t)/(r-t)))),e}static setLum(e,t){return Au.clipColor(e.plusScalar(t-Au.lum(e)))}static setSatInner(e,t){e.z>e.x?(e.y=(e.y-e.x)*t/(e.z-e.x),e.z=t):(e.y=0,e.z=0),e.x=0}static setSat(e,t){if(e.x<=e.y){if(e.y<=e.z)return Au.setSatInner(e,t),e;if(e.x<=e.z){const i=new bl(e.x,e.z,e.y);return Au.setSatInner(i,t),new bl(i.x,i.z,i.y)}{const i=new bl(e.z,e.x,e.y);return Au.setSatInner(i,t),new bl(i.y,i.z,i.x)}}if(e.x<=e.z){const i=new bl(e.y,e.x,e.z);return Au.setSatInner(i,t),new bl(i.y,i.x,i.z)}if(e.y<=e.z){const i=new bl(e.y,e.z,e.x);return Au.setSatInner(i,t),new bl(i.z,i.x,i.y)}{const i=new bl(e.z,e.y,e.x);return Au.setSatInner(i,t),new bl(i.z,i.y,i.x)}}serialize(){return{type:"RenderBlendCompose",composeType:this.composeType,blendType:this.blendType,a:this.a.serialize(),b:this.b.serialize()}}static deserialize(e){return new Au(e.composeType,e.blendType,dh.deserialize(e.a),dh.deserialize(e.b))}}St.register("RenderBlendCompose",Au);class bu{constructor(e,t){this.composeType=e,this.blendType=t}equals(e){return this.composeType===e.composeType&&this.blendType===e.blendType}}const Su=new yl(0,0,0,0),_u=new yl(0,0,0,0);class xu extends rh{constructor(e){super(),this.logic=e}toString(){return`RenderInstructionBlendCompose(${"compose:"+this.logic.composeType} ${"blend:"+this.logic.blendType})`}equals(e,t){return e instanceof xu&&this.logic.equals(e.logic)}execute(e,t,i){const n=e.popInto(Su),r=e.popInto(_u),s=Au.blendCompose(n,r,this.logic.composeType,this.logic.blendType);e.push(s)}writeBinary(e,t){e.pushU32(rh.BlendComposeCode|this.logic.composeType<<8|this.logic.blendType<<11)}static fromBinary(e,t,i){const n=e.fullU32Array[t]>>8&7,r=e.fullU32Array[t]>>11&15;return new xu(new bu(n,r))}getBinaryLength(){return 1}}class wu extends dh{constructor(e){super(e,_.every(e,dh.closureIsFullyTransparent),_.some(e,dh.closureIsFullyOpaque))}getName(){return"RenderStack"}withChildren(e){return new wu(e)}getSimplified(e){for(let n=(e=e.filter(e=>!e.isFullyTransparent)).length-1;n>=0;n--){if(e[n].isFullyOpaque){e=e.slice(n);break}}const t=[];for(let n=0;n<e.length;n++){const i=e[n];i instanceof wu?t.push(...i.children):t.push(i)}e=t;const i=[];for(let n=0;n<e.length;n++){const t=e[n],r=i[i.length-1];n>0&&t instanceof Fh&&r instanceof Fh?(i.pop(),i.push(new Fh(wu.combine(t.color,r.color)))):i.push(t)}return 0===(e=i).length?Fh.TRANSPARENT:1===e.length?e[0]:this.children.length!==e.length||_.some(this.children,(t,i)=>t!==e[i])?new wu(e):null}static combine(e,t){const i=1-e.w;return new yl(e.x+i*t.x,e.y+i*t.y,e.z+i*t.z,e.w+i*t.w)}evaluate(e){const t=this.children.length;if(0===t)return yl.ZERO;const i=this.children[t-1].evaluate(e).copy();for(let n=this.children.length-2;n>=0&&1!==i.w;n--){const t=this.children[n].evaluate(e),r=1-i.w;i.setXYZW(r*t.x+i.x,r*t.y+i.y,r*t.z+i.z,r*t.w+i.w)}return i}writeInstructions(e){if(!this.children.length)return;const t=new oh,i=new Cu(t),n=Vu.INSTANCE;this.children[this.children.length-1].writeInstructions(e);let r=!1;for(let s=this.children.length-2;s>=0;s--)Cu.SKIP_RENDER_COLOR_JUMPS&&this.children[s]instanceof Fh||(e.push(i),r=!0),this.children[s].writeInstructions(e),e.push(n);r&&e.push(t)}serialize(){return{type:"RenderStack",children:this.children.map(e=>e.serialize())}}static deserialize(e){return new wu(e.children.map(e=>dh.deserialize(e)))}}St.register("RenderStack",wu);const Tu=new yl(0,0,0,0),Pu=new yl(0,0,0,0);class Cu extends rh{constructor(e){super(),this.location=e}toString(){return`RenderInstructionOpaqueJump(${"location:"+this.location.id})`}equals(e,t){return e instanceof Cu&&t(this.location,e.location)}execute(e,t,i){1===e.readTop(Tu).w&&i.jump(this.location)}writeBinary(e,t){const i=t(this.location);e.pushU32(rh.OpaqueJumpCode|i<<8)}static fromBinary(e,t,i){return new Cu(i(e.fullU32Array[t]>>8))}getBinaryLength(){return 1}}_defineProperty(Cu,"SKIP_RENDER_COLOR_JUMPS",!1);class Vu extends rh{toString(){return"RenderInstructionStackBlend()"}equals(e,t){return e instanceof Vu}execute(e,t,i){const n=e.popInto(Tu),r=e.readTop(Pu),s=1-r.w;e.writeTopValues(s*n.x+r.x,s*n.y+r.y,s*n.z+r.z,s*n.w+r.w)}writeBinary(e,t){e.pushU32(rh.StackBlendCode)}getBinaryLength(){return 1}}_defineProperty(Vu,"INSTANCE",new Vu);class Ru{constructor(e,t){this.position=e,this.direction=t}shifted(e){return new Ru(this.pointAtDistance(e),this.direction)}pointAtDistance(e){return this.position.plus(this.direction.timesScalar(e))}distanceToPlane(e){return(e.distance-this.position.dot(e.normal))/this.direction.dot(e.normal)}toString(){return`${this.position.toString()} => ${this.direction.toString()}`}}rl.register("Ray3",Ru);class Nu{constructor(e,t){this.normal=e,this.distance=t}intersectWithRay(e){return e.pointAtDistance(e.distanceToPlane(this))}static fromTriangle(e,t,i){const n=i.minus(e).cross(t.minus(e));return 0===n.magnitude?null:(n.normalize(),new Nu(n,n.dot(e)))}getIntersection(e){const t=this.normal.dot(e.normal),i=1-t*t;if(0===i)return null;const n=(this.distance-e.distance*t)/i,r=(e.distance-this.distance*t)/i;return new Ru(this.normal.timesScalar(n).plus(e.normal.timesScalar(r)),this.normal.cross(e.normal).normalized())}}_defineProperty(Nu,"XY",new(P=Nu)(new bl(0,0,1),0)),_defineProperty(Nu,"XZ",new P(new bl(0,1,0),0)),_defineProperty(Nu,"YZ",new P(new bl(1,0,0),0)),rl.register("Plane3",Nu);class Mu{constructor(e,t,i,n){this.program=e,this.pointA=t,this.pointB=i,this.pointC=n,this.plane=Nu.fromTriangle(t,i,n)}getDepth(e,t){return(this.plane.distance-e*this.plane.normal.x-t*this.plane.normal.y)/this.plane.normal.z}getDepthRange(e){const t=this.plane.normal.toVector2();if(t.magnitude<1e-10){const e=this.getDepth(0,0);return new Hl(e,e)}t.normalize();const i=e.getDotRange(t),n=t.timesScalar(i.min),r=t.timesScalar(i.max),s=this.getDepth(n.x,n.y),a=this.getDepth(r.x,r.y);return new Hl(Math.min(s,a),Math.max(s,a))}getDepthSplit(e,t){const i=this.plane.getIntersection(e.plane);if(i){const n=i.position.toVector2(),r=i.direction.toVector2().normalized(),s=r.perpendicular,a=n.dot(s),o=t instanceof hR?t.getBounds().center.dot(r):0,{minFace:l,maxFace:h}=t.getBinaryLineClip(s,a,o),u=s.timesScalar(a-5),c=this.getDepth(u.x,u.y)<e.getDepth(u.x,u.y);return{ourFaceFront:c?l:h,otherFaceFront:c?h:l}}return this.getDepth(0,0)<e.getDepth(0,0)?{ourFaceFront:t,otherFaceFront:null}:{ourFaceFront:null,otherFaceFront:t}}transformed(e){const t=e.timesVector2(new al(this.pointA.x,this.pointA.y)),i=e.timesVector2(new al(this.pointB.x,this.pointB.y)),n=e.timesVector2(new al(this.pointC.x,this.pointC.y));return new Mu(this.program.transformed(e),new bl(t.x,t.y,this.pointA.z),new bl(i.x,i.y,this.pointB.z),new bl(n.x,n.y,this.pointC.z))}withProgram(e){return e===this.program?this:new Mu(e,this.pointA,this.pointB,this.pointC)}}St.register("RenderPlanar",Mu);const ku=e=>e.program;class Lu extends dh{constructor(e){const t=e.map(ku);super(t,_.every(t,dh.closureIsFullyTransparent),_.some(t,dh.closureIsFullyOpaque),!1,!1,!0),this.items=e}getName(){return"RenderDepthSort"}withChildren(e){return new Lu(e.map((e,t)=>new Mu(e,this.items[t].pointA,this.items[t].pointB,this.items[t].pointC)))}transformed(e){return new Lu(this.items.map(t=>t.transformed(e)))}getSimplified(e){let t=!1;for(let i=0;i<e.length;i++){if(e[i].isFullyTransparent){t=!0;break}}if(t){const t=[];for(let i=0;i<e.length;i++){e[i].isFullyTransparent||t.push(this.items[i].withProgram(e[i]))}return 0===t.length?Fh.TRANSPARENT:1===t.length?t[0].program:new Lu(t)}return e.length<2?1===e.length?e[0]:Fh.TRANSPARENT:null}evaluate(e){const t=_.sortBy(this.items,t=>-t.getDepth(e.centroid.x,e.centroid.y)),i=yl.ZERO.copy();for(let n=0;n<t.length;n++){const r=t[n].program.evaluate(e),s=1-r.w;i.setXYZW(r.x+s*i.x,r.y+s*i.y,r.z+s*i.z,r.w+s*i.w)}return i}isSplittable(){return!0}split(e){if(this.items.length<2)return[e];if(e.face.getArea()<1e-8)return[];let t=1/0;const i=[];for(let s=0;s<this.items.length;s++){const n=this.items[s],r=n.getDepthRange(e.face);i.push(r),n.program.isFullyOpaque&&(t=Math.min(t,r.max))}const n=[];for(let s=0;s<this.items.length;s++){const e=this.items[s];i[s].min<=t&&n.push(e)}let r=[new Iu(e.face,[n[0]])];for(let s=1;s<n.length;s++){const e=n[s],t=[];for(let i=0;i<r.length;i++){const n=r[i];let s=n.face;for(let i=0;i<n.items.length;i++){const r=n.items[i],{ourFaceFront:a,otherFaceFront:o}=e.getDepthSplit(r,s);if(o&&o.getArea()>1e-8&&t.push(new Iu(o,[...n.items.slice(0,i),e,...n.items.slice(i)])),!(a&&a.getArea()>1e-8))break;s=a,i===n.items.length-1&&t.push(new Iu(s,[...n.items,e]))}}r=t}return r.map(t=>new RN(t.face,e.renderProgram.replace(e=>e!==this?null:new wu(t.items.map(e=>e.program))).simplified(),t.face.getBounds()))}serialize(){return{type:"RenderDepthSort",items:this.items.map(e=>({program:e.program.serialize(),pointA:[e.pointA.x,e.pointA.y,e.pointA.z],pointB:[e.pointB.x,e.pointB.y,e.pointB.z],pointC:[e.pointC.x,e.pointC.y,e.pointC.z]}))}}static deserialize(e){return new Lu(e.items.map(e=>new Mu(dh.deserialize(e.program),new bl(e.pointA[0],e.pointA[1],e.pointA[2]),new bl(e.pointB[0],e.pointB[1],e.pointB[2]),new bl(e.pointC[0],e.pointC[1],e.pointC[2]))))}static getProjectionMatrix(e,t,i,n,r,s){const a=r-i,o=s-n,l=t-e;return new Ch(2*e/a,0,-(r+i)/a,0,0,2*e/o,-(s+n)/o,0,0,0,t/l,-e*t/l,0,0,1,0)}}St.register("RenderDepthSort",Lu);class Iu{constructor(e,t){this.face=e,this.items=t}}class Bu{constructor(e,t){this.directionProgram=e,this.colorProgram=t}}St.register("RenderLight",Bu);class Du extends dh{constructor(e){super([e],!1,!1),this.normalProgram=e}getName(){return"RenderNormalDebug"}withChildren(e){return new Du(e[0])}equalsTyped(e){return!0}getSimplified(e){const t=e[0];return t.isFullyTransparent?Fh.TRANSPARENT:t instanceof Fh?new Fh(this.getNormalDebug(t.color)):null}getNormalDebug(e){return new yl(.5*e.x+.5,.5*e.y+.5,.5*e.z+.5,1)}evaluate(e){const t=this.normalProgram.evaluate(e);return this.getNormalDebug(t)}writeInstructions(e){this.normalProgram.writeInstructions(e),e.push(qu.INSTANCE)}serialize(){return{type:"RenderNormalDebug",normalProgram:this.normalProgram.serialize()}}static deserialize(e){return new Du(dh.deserialize(e.normalProgram))}}St.register("RenderNormalDebug",Du);const Ou=new yl(0,0,0,0);class qu extends rh{toString(){return"RenderInstructionNormalDebug(TODO)"}equals(e,t){return e instanceof qu}execute(e,t,i){e.readTop(Ou),e.writeTopValues(.5*Ou.x+.5,.5*Ou.y+.5,.5*Ou.z+.5,1)}writeBinary(e,t){e.pushU32(rh.NormalDebugCode)}getBinaryLength(){return 1}}_defineProperty(qu,"INSTANCE",new qu);class Yu extends dh{constructor(e,t,i,n,r,s,a){super([t,i,n,r,s,...a.map(e=>[e.directionProgram,e.colorProgram]).flat()],!1,!1),this.alpha=e,this.ambientColorProgram=t,this.diffuseColorProgram=i,this.specularColorProgram=n,this.positionProgram=r,this.normalProgram=s,this.lights=a}getName(){return"RenderPhong"}withChildren(e){const t=e.slice(5);return new Yu(this.alpha,e[0],e[1],e[2],e[3],e[4],_.range(0,t.length/2).map(e=>new Bu(t[2*e],t[2*e+1])))}equalsTyped(e){return this.alpha===e.alpha}getSimplified(e){const t=e[0],i=e[1],n=e[2],r=e[3],s=e[4],a=e.slice(5),o=a.length/2,l=_.range(0,o).map(e=>a[2*e]),h=_.range(0,o).map(e=>a[2*e+1]);return s.isFullyTransparent||t.isFullyTransparent&&i.isFullyTransparent&&n.isFullyTransparent?Fh.TRANSPARENT:t instanceof Fh&&i instanceof Fh&&n instanceof Fh&&r instanceof Fh&&s instanceof Fh&&l.every(e=>e instanceof Fh)&&h.every(e=>e instanceof Fh)?new Fh(this.getPhong(t.color,i.color,n.color,r.color,s.color,l.map(e=>e.color),h.map(e=>e.color))):null}getPhong(e,t,i,n,r,s,a){const o=e.copy();for(let l=0;l<s.length;l++){const e=s[l],h=a[l],u=r.dot(e);if(u>0){const s=h.componentTimes(t).times(u);s.w=h.w*t.w,o.add(s);const a=n.negated().normalized(),l=r.timesScalar(2*u).minus(e),c=Math.pow(l.dot(a),this.alpha),d=h.componentTimes(i).times(c);d.w=h.w*i.w,o.add(d)}}return o.x=Math.min(1,o.x),o.y=Math.min(1,o.y),o.z=Math.min(1,o.z),o.w=Math.min(1,o.w),o}evaluate(e){const t=this.ambientColorProgram.evaluate(e),i=this.diffuseColorProgram.evaluate(e),n=this.specularColorProgram.evaluate(e),r=this.positionProgram.evaluate(e),s=this.normalProgram.evaluate(e),a=_.range(0,this.lights.length).map(t=>this.lights[t].directionProgram.evaluate(e)),o=_.range(0,this.lights.length).map(t=>this.lights[t].colorProgram.evaluate(e));return this.getPhong(t,i,n,r,s,a,o)}writeInstructions(e){for(let t=0;t<this.lights.length;t++)this.lights[t].colorProgram.writeInstructions(e),this.lights[t].directionProgram.writeInstructions(e);this.normalProgram.writeInstructions(e),this.positionProgram.writeInstructions(e),this.specularColorProgram.writeInstructions(e),this.diffuseColorProgram.writeInstructions(e),this.ambientColorProgram.writeInstructions(e),e.push(new Zu(this.alpha,this.lights.length))}serialize(){return{type:"RenderPhong",children:this.children.map(e=>e.serialize()),alpha:this.alpha}}static deserialize(e){return new Yu(e.alpha,...e.children.map(dh.deserialize))}}St.register("RenderPhong",Yu);const Hu=new yl(0,0,0,0),Gu=new yl(0,0,0,0),Fu=new yl(0,0,0,0),zu=new yl(0,0,0,0),Uu=new yl(0,0,0,0),Wu=new yl(0,0,0,0),Xu=new yl(0,0,0,0),ju=new yl(0,0,0,0),Qu=new yl(0,0,0,0),Ku=new yl(0,0,0,0);class Zu extends rh{constructor(e,t){super(),this.alpha=e,this.numLights=t}toString(){return`RenderInstructionPhong(${"alpha:"+this.alpha} ${"numLights:"+this.numLights})`}equals(e,t){return e instanceof Zu&&this.alpha===e.alpha&&this.numLights===e.numLights}execute(e,t,i){e.popInto(Hu),e.popInto(Gu),e.popInto(Fu),e.popInto(zu),e.popInto(Uu),ju.set(Hu),Qu.set(zu).negate().normalize();for(let n=0;n<this.numLights;n++){e.popInto(Wu),e.popInto(Xu);const t=Uu.dot(Wu);if(t>0){Ku.set(Uu).multiplyScalar(2*t).subtract(Wu);const e=Math.pow(Ku.dot(Qu),this.alpha);ju.addXYZW(Xu.x*Gu.x*t+Xu.x*Fu.x*e,Xu.y*Gu.y*t+Xu.y*Fu.y*e,Xu.z*Gu.z*t+Xu.z*Fu.z*e,Xu.w*Gu.w+Xu.w*Fu.w)}}e.pushValues(Math.min(1,ju.x),Math.min(1,ju.y),Math.min(1,ju.z),Math.min(1,ju.w))}writeBinary(e,t){e.pushU32(rh.PhongCode),e.pushF32(this.alpha),e.pushU32(this.numLights)}static fromBinary(e,t,i){const n=e.fullF32Array[t+1],r=e.fullU32Array[t+2];return new Zu(n,r)}getBinaryLength(){return 3}}class Ju extends dh{constructor(e,t,i,n){let r,s;0!==t.m30()||0!==t.m31()||0!==t.m32()?(r=!1,s=!1):e.isFullyTransparent?(r=0===i.w,s=1===i.w):e.isFullyOpaque?(r=t.m33()+i.w===0,s=t.m33()+i.w===1):(r=0===t.m33()&&0===i.w,s=0===t.m33()&&1===i.w),super([e],r,s),this.program=e,this.colorMatrix=t,this.colorTranslation=i,this.logic=n||new $u(this.colorMatrix,this.colorTranslation)}getName(){return"RenderFilter"}withChildren(e){return new Ju(e[0],this.colorMatrix,this.colorTranslation,this.logic)}equalsTyped(e){return this.colorMatrix.equals(e.colorMatrix)&&this.colorTranslation.equals(e.colorTranslation)}getSimplified(e){const t=e[0];return t instanceof Fh?new Fh(Ju.applyFilter(t.color,this.colorMatrix,this.colorTranslation)):t instanceof gh&&t.isOneSided()?t.withOneSide(this.withChildren([t.getOneSide()])).simplified():null}evaluate(e){const t=this.program.evaluate(e);return Ju.applyFilter(t,this.colorMatrix,this.colorTranslation)}writeInstructions(e){this.program.writeInstructions(e),e.push(new tc(this.logic))}static applyFilter(e,t,i){return t.timesVector4(e).plus(i)}serialize(){return{type:"RenderFilter",program:this.program.serialize(),colorMatrix:[this.colorMatrix.m00(),this.colorMatrix.m01(),this.colorMatrix.m02(),this.colorMatrix.m03(),this.colorMatrix.m10(),this.colorMatrix.m11(),this.colorMatrix.m12(),this.colorMatrix.m13(),this.colorMatrix.m20(),this.colorMatrix.m21(),this.colorMatrix.m22(),this.colorMatrix.m23(),this.colorMatrix.m30(),this.colorMatrix.m31(),this.colorMatrix.m32(),this.colorMatrix.m33()],colorTranslation:[this.colorTranslation.x,this.colorTranslation.y,this.colorTranslation.z,this.colorTranslation.w]}}static deserialize(e){return new Ju(dh.deserialize(e.program),new Ch(...e.colorMatrix),new yl(e.colorTranslation[0],e.colorTranslation[1],e.colorTranslation[2],e.colorTranslation[3]))}}St.register("RenderFilter",Ju);class $u{constructor(e,t){this.colorMatrix=e,this.colorTranslation=t}equals(e){return this.colorMatrix.equalsEpsilon(e.colorMatrix,1e-6)&&this.colorTranslation.equalsEpsilon(e.colorTranslation,1e-6)}}const ec=new yl(0,0,0,0);class tc extends rh{constructor(e){super(),this.logic=e}toString(){return"RenderInstructionFilter(TODO)"}equals(e,t){return e instanceof tc&&this.logic.equals(e.logic)}execute(e,t,i){e.readTop(ec),Ju.applyFilter(ec,this.logic.colorMatrix,this.logic.colorTranslation),e.writeTop(ec)}writeBinary(e,t){e.pushU32(rh.FilterCode),e.pushF32(this.logic.colorMatrix.m00()),e.pushF32(this.logic.colorMatrix.m01()),e.pushF32(this.logic.colorMatrix.m02()),e.pushF32(this.logic.colorMatrix.m03()),e.pushF32(this.logic.colorMatrix.m10()),e.pushF32(this.logic.colorMatrix.m11()),e.pushF32(this.logic.colorMatrix.m12()),e.pushF32(this.logic.colorMatrix.m13()),e.pushF32(this.logic.colorMatrix.m20()),e.pushF32(this.logic.colorMatrix.m21()),e.pushF32(this.logic.colorMatrix.m22()),e.pushF32(this.logic.colorMatrix.m23()),e.pushF32(this.logic.colorMatrix.m30()),e.pushF32(this.logic.colorMatrix.m31()),e.pushF32(this.logic.colorMatrix.m32()),e.pushF32(this.logic.colorMatrix.m33()),e.pushF32(this.logic.colorTranslation.x),e.pushF32(this.logic.colorTranslation.y),e.pushF32(this.logic.colorTranslation.z),e.pushF32(this.logic.colorTranslation.w)}static fromBinary(e,t,i){return new tc(new $u(new Ch(e.fullF32Array[t+1],e.fullF32Array[t+2],e.fullF32Array[t+3],e.fullF32Array[t+4],e.fullF32Array[t+5],e.fullF32Array[t+6],e.fullF32Array[t+7],e.fullF32Array[t+8],e.fullF32Array[t+9],e.fullF32Array[t+10],e.fullF32Array[t+11],e.fullF32Array[t+12],e.fullF32Array[t+13],e.fullF32Array[t+14],e.fullF32Array[t+15],e.fullF32Array[t+16]),new yl(e.fullF32Array[t+17],e.fullF32Array[t+18],e.fullF32Array[t+19],e.fullF32Array[t+20])))}getBinaryLength(){return 21}}class ic{constructor(e,t){this.ratio=e,this.program=t}static evaluate(e,t,i){let n=-1;for(;n<t.length-1&&t[n+1].ratio<i;)n++;if(-1===n)return t[0].program.evaluate(e);if(n===t.length-1)return t[n].program.evaluate(e);{const r=t[n],s=t[n+1],a=(i-r.ratio)/(s.ratio-r.ratio),o=r.program.evaluate(e),l=s.program.evaluate(e);return Fh.ratioBlend(o,l,a)}}withProgram(e){return e===this.program?this:new ic(this.ratio,e)}serialize(){return{ratio:this.ratio,program:this.program.serialize()}}static deserialize(e){return new ic(e.ratio,dh.deserialize(e.program))}}St.register("RenderGradientStop",ic);class nc{constructor(e,t,i,n){this.start=e,this.end=t,this.startProgram=i,this.endProgram=n}getUnitReversed(){return new nc(1-this.end,1-this.start,this.endProgram,this.startProgram)}withOffset(e){return new nc(this.start+e,this.end+e,this.startProgram,this.endProgram)}static getGradientLinearRanges(e,t,i,n,r){const s=[];r[0].ratio>0&&s.push(new nc(0,r[0].ratio,r[0].program,r[0].program));for(let h=0;h<r.length-1;h++){const e=r[h],t=r[h+1];e.ratio!==t.ratio&&s.push(new nc(e.ratio,t.ratio,e.program,t.program))}r[r.length-1].ratio<1&&s.push(new nc(r[r.length-1].ratio,1,r[r.length-1].program,r[r.length-1].program));const a=s.map(e=>e.getUnitReversed()).reverse(),o=[],l=(n,r)=>{const l=e-n,h=t-n;(r?a:s).forEach(e=>{l<e.end&&h>e.start&&o.push(e.withOffset(n+i))})};if(n===Ll.Pad){if(e<0){const e=r[0].program;o.push(new nc(Number.NEGATIVE_INFINITY,i,e,e))}if(e<=1&&t>=0&&l(0,!1),t>1){const e=r[r.length-1].program;o.push(new nc(1+i,Number.POSITIVE_INFINITY,e,e))}}else{const i=n===Ll.Reflect,r=Math.floor(e),s=Math.ceil(t);for(let e=r;e<s;e++)l(e,!!i&&e%2==0)}for(let h=0;h<o.length-1;h++){const e=o[h],t=o[h+1];e.startProgram===e.endProgram&&t.startProgram===t.endProgram&&e.startProgram===t.startProgram&&(o.splice(h,2,new nc(e.start,t.end,e.startProgram,e.startProgram)),h--)}return o}}St.register("RenderLinearRange",nc);const rc=[];class sc extends dh{constructor(e,t,i,n,r,s){const a=r===nd.AnalyticBox||r===nd.AnalyticBilinear||r===nd.AnalyticMitchellNetravali,o=r===nd.NearestNeighbor||r===nd.Bilinear||r===nd.MitchellNetravali;super(rc,!1,t.isFullyOpaque,a,!1,o),this.transform=e,this.image=t,this.extendX=i,this.extendY=n,this.resampleType=r,this.isSimplified=!0,this.logic=s||new ac(this.transform,this.image,this.extendX,this.extendY,this.resampleType)}getName(){return"RenderImage"}withChildren(e){return this}transformed(e){return new sc(e.timesMatrix(this.transform),this.image,this.extendX,this.extendY,this.resampleType)}equalsTyped(e){return this.transform.equals(e.transform)&&this.image===e.image&&this.extendX===e.extendX&&this.extendY===e.extendY&&this.resampleType===e.resampleType}evaluate(e){return this.logic.evaluate(e)}writeInstructions(e){e.push(new oc(this.logic))}static evaluateAnalyticFilter(e,t,i,n,r,s,a,o){const l=t.getFace(),h=yl.ZERO.copy(),u=l.getTransformed(i),c=u.getBounds().roundedOut(),d=_.range(c.minX+1,c.maxX),p=_.range(c.minY+1,c.maxY),m=d.length+1,g=p.length+1,f=p.length?u.getStripeLineClip(al.Y_UNIT,p,t.getCenterX()):[u],y=[],E=f.map(e=>{const i=d.length?e.getStripeLineClip(al.X_UNIT,d,t.getCenterY()):[e];return y.push(i.map(e=>e.getArea())),i}),v=n+s+1,A=r+s,b=c.minX-v,S=c.minY-v,x=c.maxX+A,w=c.maxY+A;for(let _=S;_<w;_++){const t=sc.extendInteger(_,e.image.height,e.extendY),i=_-n,s=_+r;for(let l=b;l<x;l++){const u=sc.extendInteger(l,e.image.width,e.extendX);let d=0;const p=l-n,f=l+r;for(let e=i;e<s;e++){const t=e-c.minY;if(t>=0&&t<g)for(let i=p;i<f;i++){const n=i-c.minX;if(n>=0&&n<m){const r=y[t][n],s=Math.abs(r);s>1e-8&&(d+=s>1-1e-8?Math.sign(r)*o(l,_,i,e):a(E[t][n],l,_,i,e,r))}}}if(Math.abs(d)>1e-8){const i=e.image.evaluate(u,t);h.add(i.timesScalar(d))}}}return e.image.isFullyOpaque?h.multiplyScalar(1/h.w):h.multiplyScalar(1/u.getArea()),h}static extend(e,t){switch(e){case Ll.Pad:return fl.clamp(t,0,1);case Ll.Repeat:return t-Math.floor(t);case Ll.Reflect:return Math.abs(t-2*fl.roundSymmetric(.5*t));default:throw new Error("Unknown RenderExtend")}}static extendInteger(e,t,i){switch(i){case Ll.Pad:return fl.clamp(e,0,t-1);case Ll.Repeat:return e>=0?e%t:t-(-e-1)%t-1;case Ll.Reflect:{const i=(e<0?-e-1:e)%(2*t);return i<t?i:2*t-i-1}default:throw new Error("Unknown RenderExtend")}}serialize(){return{type:"RenderImage",transform:[this.transform.m00(),this.transform.m01(),this.transform.m02(),this.transform.m10(),this.transform.m11(),this.transform.m12(),this.transform.m20(),this.transform.m21(),this.transform.m22()],image:sc.serializeRenderImageable(this.image),extendX:this.extendX,extendY:this.extendY,resampleType:this.resampleType}}static deserialize(e){return new sc(Mh.rowMajor(e.transform[0],e.transform[1],e.transform[2],e.transform[3],e.transform[4],e.transform[5],e.transform[6],e.transform[7],e.transform[8]),sc.deserializeRenderImageable(e.image),e.extendX,e.extendY,e.resampleType)}static serializeRenderImageable(e){return{width:e.width,height:e.height,isFullyOpaque:e.isFullyOpaque,data:_.range(0,e.height).flatMap(t=>_.range(0,e.width).flatMap(i=>{const n=e.evaluate(i,t);return[n.x,n.y,n.z,n.w]}))}}static deserializeRenderImageable(e){return{width:e.width,height:e.height,isFullyOpaque:e.isFullyOpaque,evaluate:(t,i)=>{const n=4*(i*e.width+t);return new yl(e.data[n],e.data[n+1],e.data[n+2],e.data[n+3])}}}}St.register("RenderImage",sc);class ac{constructor(e,t,i,n,r){this.transform=e,this.image=t,this.extendX=i,this.extendY=n,this.resampleType=r,this.inverseTransform=e.inverted(),this.inverseTransformWithHalfOffset=Mh.translation(-.5,-.5).timesMatrix(this.inverseTransform)}equals(e){return this.transform.equalsEpsilon(e.transform,1e-6)&&this.image===e.image&&this.extendX===e.extendX&&this.extendY===e.extendY&&this.resampleType===e.resampleType}evaluate(e){switch(this.resampleType){case nd.NearestNeighbor:{const t=this.inverseTransformWithHalfOffset.timesVector2(e.centroid),i=fl.roundSymmetric(t.x),n=fl.roundSymmetric(t.y),r=sc.extendInteger(i,this.image.width,this.extendX),s=sc.extendInteger(n,this.image.height,this.extendY);return this.image.evaluate(r,s)}case nd.Bilinear:{const t=this.inverseTransformWithHalfOffset.timesVector2(e.centroid),i=Math.floor(t.x),n=Math.floor(t.y),r=Math.ceil(t.x),s=Math.ceil(t.y),a=sc.extendInteger(i,this.image.width,this.extendX),o=sc.extendInteger(n,this.image.height,this.extendY),l=sc.extendInteger(r,this.image.width,this.extendX),h=sc.extendInteger(s,this.image.height,this.extendY),u=t.x-i,c=t.y-n,d=this.image.evaluate(a,o),p=this.image.evaluate(a,h),m=this.image.evaluate(l,o),g=this.image.evaluate(l,h),f=d.timesScalar(1-c).plus(p.timesScalar(c)),y=m.timesScalar(1-c).plus(g.timesScalar(c));return f.timesScalar(1-u).plus(y.timesScalar(u))}case nd.MitchellNetravali:{const t=this.inverseTransformWithHalfOffset.timesVector2(e.centroid),i=Math.floor(t.x),n=Math.floor(t.y),r=i-1,s=i,a=i+1,o=i+2,l=n-1,h=n,u=n+1,c=n+2,d=sc.extendInteger(r,this.image.width,this.extendX),p=sc.extendInteger(s,this.image.width,this.extendX),m=sc.extendInteger(a,this.image.width,this.extendX),g=sc.extendInteger(o,this.image.width,this.extendX),f=sc.extendInteger(l,this.image.height,this.extendY),y=sc.extendInteger(h,this.image.height,this.extendY),E=sc.extendInteger(u,this.image.height,this.extendY),v=sc.extendInteger(c,this.image.height,this.extendY),A=VN.evaluateFilter(t.x-r),b=VN.evaluateFilter(t.x-s),S=VN.evaluateFilter(t.x-a),_=VN.evaluateFilter(t.x-o),x=VN.evaluateFilter(t.y-l),w=VN.evaluateFilter(t.y-h),T=VN.evaluateFilter(t.y-u),P=VN.evaluateFilter(t.y-c),C=yl.ZERO.copy();return C.add(this.image.evaluate(d,f).timesScalar(A*x)),C.add(this.image.evaluate(d,y).timesScalar(A*w)),C.add(this.image.evaluate(d,E).timesScalar(A*T)),C.add(this.image.evaluate(d,v).timesScalar(A*P)),C.add(this.image.evaluate(p,f).timesScalar(b*x)),C.add(this.image.evaluate(p,y).timesScalar(b*w)),C.add(this.image.evaluate(p,E).timesScalar(b*T)),C.add(this.image.evaluate(p,v).timesScalar(b*P)),C.add(this.image.evaluate(m,f).timesScalar(S*x)),C.add(this.image.evaluate(m,y).timesScalar(S*w)),C.add(this.image.evaluate(m,E).timesScalar(S*T)),C.add(this.image.evaluate(m,v).timesScalar(S*P)),C.add(this.image.evaluate(g,f).timesScalar(_*x)),C.add(this.image.evaluate(g,y).timesScalar(_*w)),C.add(this.image.evaluate(g,E).timesScalar(_*T)),C.add(this.image.evaluate(g,v).timesScalar(_*P)),C}case nd.AnalyticBox:return sc.evaluateAnalyticFilter(this,e,this.inverseTransform,0,1,-1,(e,t,i,n,r,s)=>s,_.constant(1));case nd.AnalyticBilinear:return sc.evaluateAnalyticFilter(this,e,this.inverseTransformWithHalfOffset,1,1,0,(e,t,i,n,r,s)=>e.getBilinearFiltered(t,i,n,r),_.constant(.25));case nd.AnalyticMitchellNetravali:return sc.evaluateAnalyticFilter(this,e,this.inverseTransformWithHalfOffset,2,2,0,(e,t,i,n,r,s)=>e.getMitchellNetravaliFiltered(t,i,n,r),VN.evaluateFull);default:throw new Error("unknown resample type: "+this.resampleType)}}}class oc extends rh{constructor(e){super(),this.logic=e}toString(){return"RenderInstructionImage(TODO)"}equals(e,t){return e instanceof oc&&this.logic.equals(e.logic)}execute(e,t,i){e.push(this.logic.evaluate(t))}writeBinary(e,t){e.pushU32(rh.ImageCode)}getBinaryLength(){return 1}}let lc=function(e){return e[e.Accurate=0]="Accurate",e[e.PixelCenter=1]="PixelCenter",e}({});St.register("RenderLinearBlendAccuracy",lc);class hc extends dh{constructor(e,t,i,n,r,s){super([n,r],n.isFullyTransparent&&r.isFullyTransparent,n.isFullyOpaque&&r.isFullyOpaque,!1,!1,i===lc.Accurate),this.scaledNormal=e,this.offset=t,this.accuracy=i,this.zero=n,this.one=r,this.logic=s||new uc(this.scaledNormal,this.offset,this.accuracy)}getName(){return"RenderLinearBlend"}withChildren(e){return new hc(this.scaledNormal,this.offset,this.accuracy,e[0],e[1],this.logic)}transformed(e){const t=this.scaledNormal.timesScalar(this.offset/this.scaledNormal.magnitudeSquared),i=this.scaledNormal.timesScalar((this.offset+1)/this.scaledNormal.magnitudeSquared),n=e.timesVector2(t),r=e.timesVector2(i),s=r.minus(n),a=s.normalized().timesScalar(1/s.magnitude),o=a.dot(n);return new hc(a,o,this.accuracy,this.zero.transformed(e),this.one.transformed(e))}equalsTyped(e){return this.scaledNormal.equals(e.scaledNormal)&&this.offset===e.offset&&this.accuracy===e.accuracy}getSimplified(e){const t=e[0],i=e[1];return t.isFullyTransparent&&i.isFullyTransparent?Fh.TRANSPARENT:t.equals(i)?t:null}evaluate(e){const t=this.logic.computeLinearValue(e);return t<=0?this.zero.evaluate(e):t>=1?this.one.evaluate(e):Fh.ratioBlend(this.zero.evaluate(e),this.one.evaluate(e),t)}writeInstructions(e){const t=new oh,i=new oh,n=new oh;e.push(new cc(this.logic,t,i,n)),e.push(t),this.zero.writeInstructions(e),e.push(hh.INSTANCE),e.push(i),this.one.writeInstructions(e),e.push(hh.INSTANCE),e.push(n),e.push(mc.INSTANCE)}serialize(){return{type:"RenderLinearBlend",scaledNormal:[this.scaledNormal.x,this.scaledNormal.y],offset:this.offset,accuracy:this.accuracy,zero:this.zero.serialize(),one:this.one.serialize()}}static deserialize(e){return new hc(new al(e.scaledNormal[0],e.scaledNormal[1]),e.offset,e.accuracy,dh.deserialize(e.zero),dh.deserialize(e.one))}}St.register("RenderLinearBlend",hc);class uc{constructor(e,t,i){this.scaledNormal=e,this.offset=t,this.accuracy=i}equals(e){return this.scaledNormal.equalsEpsilon(e.scaledNormal,1e-6)&&Math.abs(this.offset-e.offset)<1e-6&&this.accuracy===e.accuracy}computeLinearValue(e){return(this.accuracy===lc.Accurate?this.scaledNormal.dot(e.centroid):this.scaledNormal.x*e.getCenterX()+this.scaledNormal.y*e.getCenterY())-this.offset}}class cc extends rh{constructor(e,t,i,n){super(),this.logic=e,this.zeroLocation=t,this.oneLocation=i,this.blendLocation=n}toString(){const e="zero:"+this.zeroLocation.id,t="one:"+this.oneLocation.id,i="blend:"+this.blendLocation.id;if(this.logic instanceof uc){return`RenderInstructionComputeBlendRatio(linear, ${`scaledNormal:${this.logic.scaledNormal.x},${this.logic.scaledNormal.y}`} ${"offset:"+this.logic.offset} ${"accuracy:"+this.logic.accuracy} ${e} ${t} ${i})`}return`RenderInstructionComputeBlendRatio(radial, ${`inverseTransform:${this.logic.inverseTransform.m00()},${this.logic.inverseTransform.m01()},${this.logic.inverseTransform.m02()},${this.logic.inverseTransform.m10()},${this.logic.inverseTransform.m11()},${this.logic.inverseTransform.m12()}`} ${"radius0:"+this.logic.radius0} ${"radius1:"+this.logic.radius1} ${"accuracy:"+this.logic.accuracy} ${e} ${t} ${i})`}equals(e,t){return e instanceof cc&&(!!(t(this.zeroLocation,e.zeroLocation)&&t(this.oneLocation,e.oneLocation)&&t(this.blendLocation,e.blendLocation))&&(this.logic instanceof uc?e.logic instanceof uc&&this.logic.equals(e.logic):e.logic instanceof Wc&&this.logic.equals(e.logic)))}execute(e,t,i){const n=this.logic.computeLinearValue(t);e.pushNumber(n),i.jump(this.blendLocation);const r=n<1,s=n>0;r&&s||e.pushValues(0,0,0,0),r&&i.call(this.zeroLocation),s&&i.call(this.oneLocation)}writeBinary(e,t){const i=t(this.zeroLocation),n=t(this.oneLocation),r=t(this.blendLocation);this.logic instanceof uc?(e.pushU32(rh.ComputeLinearBlendRatioCode|this.logic.accuracy<<8),e.pushU32(i),e.pushU32(n),e.pushU32(r),e.pushF32(this.logic.scaledNormal.x),e.pushF32(this.logic.scaledNormal.y),e.pushF32(this.logic.offset)):(e.pushU32(rh.ComputeRadialBlendRatioCode|this.logic.accuracy<<8),e.pushU32(i),e.pushU32(n),e.pushU32(r),e.pushF32(this.logic.inverseTransform.m00()),e.pushF32(this.logic.inverseTransform.m01()),e.pushF32(this.logic.inverseTransform.m02()),e.pushF32(this.logic.inverseTransform.m10()),e.pushF32(this.logic.inverseTransform.m11()),e.pushF32(this.logic.inverseTransform.m12()),e.pushF32(this.logic.radius0),e.pushF32(this.logic.radius1))}static fromBinary(e,t,i){const n=i(e.fullU32Array[t+1]),r=i(e.fullU32Array[t+2]),s=i(e.fullU32Array[t+3]),a=e.fullU32Array[t],o=a>>8&255;if((255&a)===rh.ComputeLinearBlendRatioCode){const i=new al(e.fullF32Array[t+4],e.fullF32Array[t+5]),a=e.fullF32Array[t+6];return new cc(new uc(i,a,o),n,r,s)}{const i=Mh.rowMajor(e.fullF32Array[t+4],e.fullF32Array[t+5],e.fullF32Array[t+6],e.fullF32Array[t+7],e.fullF32Array[t+8],e.fullF32Array[t+9],0,0,1),a=e.fullF32Array[t+10],l=e.fullF32Array[t+11];return new cc(new Wc(i,a,l,o),n,r,s)}}getBinaryLength(){return this.logic instanceof uc?7:12}}const dc=new yl(0,0,0,0),pc=new yl(0,0,0,0);class mc extends rh{toString(){return"RenderInstructionLinearBlend()"}equals(e,t){return e instanceof mc}execute(e,t,i){const n=e.popInto(dc),r=e.popInto(pc),s=e.popNumber();if(s<=0||s>=1)e.push(n);else{const t=1-s;e.pushValues(n.x*t+r.x*s,n.y*t+r.y*s,n.z*t+r.z*s,n.w*t+r.w*s)}}writeBinary(e,t){e.pushU32(rh.LinearBlendCode)}getBinaryLength(){return 1}}_defineProperty(mc,"INSTANCE",new mc);let gc=function(e){return e[e.Accurate=0]="Accurate",e[e.PixelCenter=1]="PixelCenter",e}({});const fc=new al(0,0);St.register("RenderBarycentricBlendAccuracy",gc);class yc extends dh{constructor(e,t,i,n,r,s,a,o){super([r,s,a],r.isFullyTransparent&&s.isFullyTransparent&&a.isFullyTransparent,r.isFullyOpaque&&s.isFullyOpaque&&a.isFullyOpaque,!1,!1,n===gc.Accurate),this.pointA=e,this.pointB=t,this.pointC=i,this.accuracy=n,this.a=r,this.b=s,this.c=a,this.logic=o||Ec.from(this.pointA,this.pointB,this.pointC,this.accuracy)}getName(){return"RenderBarycentricBlend"}withChildren(e){return new yc(this.pointA,this.pointB,this.pointC,this.accuracy,e[0],e[1],e[2],this.logic)}transformed(e){return new yc(e.timesVector2(this.pointA),e.timesVector2(this.pointB),e.timesVector2(this.pointC),this.accuracy,this.a.transformed(e),this.b.transformed(e),this.c.transformed(e))}equalsTyped(e){return this.pointA.equals(e.pointA)&&this.pointB.equals(e.pointB)&&this.pointC.equals(e.pointC)&&this.accuracy===e.accuracy}getSimplified(e){const t=e[0],i=e[1],n=e[2];return t.isFullyTransparent&&i.isFullyTransparent&&n.isFullyTransparent?Fh.TRANSPARENT:t.equals(i)&&t.equals(n)?t:null}evaluate(e){const t=this.a.evaluate(e),i=this.b.evaluate(e),n=this.c.evaluate(e),r=new yl(0,0,0,0);return this.logic.apply(r,e,t,i,n),r}writeInstructions(e){this.c.writeInstructions(e),this.b.writeInstructions(e),this.a.writeInstructions(e),e.push(new _c(this.logic))}serialize(){return{type:"RenderBarycentricBlend",pointA:[this.pointA.x,this.pointA.y],pointB:[this.pointB.x,this.pointB.y],pointC:[this.pointC.x,this.pointC.y],accuracy:this.accuracy,a:this.a.serialize(),b:this.b.serialize(),c:this.c.serialize()}}static deserialize(e){return new yc(new al(e.pointA[0],e.pointA[1]),new al(e.pointB[0],e.pointB[1]),new al(e.pointC[0],e.pointC[1]),e.accuracy,dh.deserialize(e.a),dh.deserialize(e.b),dh.deserialize(e.c))}}St.register("RenderBarycentricBlend",yc);class Ec{constructor(e,t,i,n,r){this.det=e,this.diffA=t,this.diffB=i,this.pointC=n,this.accuracy=r}static from(e,t,i,n){const r=e,s=t,a=i,o=(s.y-a.y)*(r.x-a.x)+(a.x-s.x)*(r.y-a.y),l=new al(s.y-a.y,a.x-s.x),h=new al(a.y-r.y,r.x-a.x);return new Ec(o,l,h,i,n)}equals(e){return Math.abs(this.det-e.det)<1e-6&&this.diffA.equalsEpsilon(e.diffA,1e-6)&&this.diffB.equalsEpsilon(e.diffB,1e-6)&&this.pointC.equalsEpsilon(e.pointC,1e-6)&&this.accuracy===e.accuracy}apply(e,t,i,n,r){const s=this.accuracy===gc.Accurate?t.centroid:t.writeBoundsCentroid(fc),a=this.pointC,o=(this.diffA.x*(s.x-a.x)+this.diffA.y*(s.y-a.y))/this.det,l=(this.diffB.x*(s.x-a.x)+this.diffB.y*(s.y-a.y))/this.det,h=1-o-l;e.setXYZW(i.x*o+n.x*l+r.x*h,i.y*o+n.y*l+r.y*h,i.z*o+n.z*l+r.z*h,i.w*o+n.w*l+r.w*h)}}const vc=new yl(0,0,0,0),Ac=new yl(0,0,0,0),bc=new yl(0,0,0,0),Sc=new yl(0,0,0,0);class _c extends rh{constructor(e){super(),this.logic=e}toString(){return`RenderInstructionBarycentricBlend(${"det:"+this.logic.det} ${`diffA:${this.logic.diffA.x},${this.logic.diffA.y}`} ${`diffB:${this.logic.diffB.x},${this.logic.diffB.y}`} ${`pointC:${this.logic.pointC.x},${this.logic.pointC.y}`})`}equals(e,t){return e instanceof _c&&this.logic.equals(e.logic)}execute(e,t,i){const n=e.popInto(vc),r=e.popInto(Ac),s=e.popInto(bc);this.logic.apply(Sc,t,n,r,s),e.push(Sc)}writeBinary(e,t){e.pushU32(rh.BarycentricBlendCode|this.logic.accuracy<<8),e.pushF32(this.logic.det),e.pushF32(this.logic.diffA.x),e.pushF32(this.logic.diffA.y),e.pushF32(this.logic.diffB.x),e.pushF32(this.logic.diffB.y),e.pushF32(this.logic.pointC.x),e.pushF32(this.logic.pointC.y)}static fromBinary(e,t,i){const n=e.fullU32Array[t]>>8&255,r=e.fullF32Array[t+1],s=new al(e.fullF32Array[t+2],e.fullF32Array[t+3]),a=new al(e.fullF32Array[t+4],e.fullF32Array[t+5]),o=new al(e.fullF32Array[t+6],e.fullF32Array[t+7]);return new _c(new Ec(r,s,a,o,n))}getBinaryLength(){return 8}}let xc=function(e){return e[e.Centroid=0]="Centroid",e[e.PixelCenter=1]="PixelCenter",e}({});const wc=new al(0,0);St.register("RenderBarycentricPerspectiveBlendAccuracy",xc);class Tc extends dh{constructor(e,t,i,n,r,s,a,o){super([r,s,a],r.isFullyTransparent&&s.isFullyTransparent&&a.isFullyTransparent,r.isFullyOpaque&&s.isFullyOpaque&&a.isFullyOpaque,!1,!1,n===xc.Centroid),this.pointA=e,this.pointB=t,this.pointC=i,this.accuracy=n,this.a=r,this.b=s,this.c=a,this.logic=o||Pc.from(this.pointA,this.pointB,this.pointC,this.accuracy)}getName(){return"RenderBarycentricPerspectiveBlend"}withChildren(e){return new Tc(this.pointA,this.pointB,this.pointC,this.accuracy,e[0],e[1],e[2],this.logic)}transformed(e){const t=e.timesVector2(this.pointA.toVector2()),i=e.timesVector2(this.pointB.toVector2()),n=e.timesVector2(this.pointC.toVector2());return new Tc(new bl(t.x,t.y,this.pointA.z),new bl(i.x,i.y,this.pointB.z),new bl(n.x,n.y,this.pointC.z),this.accuracy,this.a.transformed(e),this.b.transformed(e),this.c.transformed(e))}equalsTyped(e){return this.pointA.equals(e.pointA)&&this.pointB.equals(e.pointB)&&this.pointC.equals(e.pointC)&&this.accuracy===e.accuracy}getSimplified(e){const t=e[0],i=e[1],n=e[2];return t.isFullyTransparent&&i.isFullyTransparent&&n.isFullyTransparent?Fh.TRANSPARENT:t.equals(i)&&t.equals(n)?t:null}evaluate(e){const t=this.a.evaluate(e),i=this.b.evaluate(e),n=this.c.evaluate(e),r=new yl(0,0,0,0);return this.logic.apply(r,e,t,i,n),r}writeInstructions(e){this.c.writeInstructions(e),this.b.writeInstructions(e),this.a.writeInstructions(e),e.push(new Mc(this.logic))}serialize(){return{type:"RenderBarycentricPerspectiveBlend",pointA:[this.pointA.x,this.pointA.y,this.pointA.z],pointB:[this.pointB.x,this.pointB.y,this.pointB.z],pointC:[this.pointC.x,this.pointC.y,this.pointC.z],accuracy:this.accuracy,a:this.a.serialize(),b:this.b.serialize(),c:this.c.serialize()}}static deserialize(e){return new Tc(new bl(e.pointA[0],e.pointA[1],e.pointA[2]),new bl(e.pointB[0],e.pointB[1],e.pointB[2]),new bl(e.pointC[0],e.pointC[1],e.pointC[2]),e.accuracy,dh.deserialize(e.a),dh.deserialize(e.b),dh.deserialize(e.c))}}St.register("RenderBarycentricPerspectiveBlend",Tc);class Pc{constructor(e,t,i,n,r,s,a,o){this.det=e,this.diffA=t,this.diffB=i,this.point2C=n,this.zInverseA=r,this.zInverseB=s,this.zInverseC=a,this.accuracy=o}static from(e,t,i,n){const r=e,s=t,a=i,o=(s.y-a.y)*(r.x-a.x)+(a.x-s.x)*(r.y-a.y),l=new al(s.y-a.y,a.x-s.x),h=new al(a.y-r.y,r.x-a.x),u=a.toVector2(),c=1/r.z,d=1/s.z,p=1/a.z;return new Pc(o,l,h,u,c,d,p,n)}equals(e){return Math.abs(this.det-e.det)<1e-6&&this.diffA.equalsEpsilon(e.diffA,1e-6)&&this.diffB.equalsEpsilon(e.diffB,1e-6)&&this.point2C.equalsEpsilon(e.point2C,1e-6)&&Math.abs(this.zInverseA-e.zInverseA)<1e-6&&Math.abs(this.zInverseB-e.zInverseB)<1e-6&&Math.abs(this.zInverseC-e.zInverseC)<1e-6&&this.accuracy===e.accuracy}apply(e,t,i,n,r){const s=this.accuracy===xc.Centroid?t.centroid:t.writeBoundsCentroid(wc),a=(this.diffA.x*(s.x-this.point2C.x)+this.diffA.y*(s.y-this.point2C.y))/this.det,o=(this.diffB.x*(s.x-this.point2C.x)+this.diffB.y*(s.y-this.point2C.y))/this.det,l=1-a-o,h=1/(a*this.zInverseA+o*this.zInverseB+l*this.zInverseC),u=h*a*this.zInverseA,c=h*o*this.zInverseB,d=h*l*this.zInverseC;e.setXYZW(i.x*u+n.x*c+r.x*d,i.y*u+n.y*c+r.y*d,i.z*u+n.z*c+r.z*d,i.w*u+n.w*c+r.w*d)}}const Cc=new yl(0,0,0,0),Vc=new yl(0,0,0,0),Rc=new yl(0,0,0,0),Nc=new yl(0,0,0,0);class Mc extends rh{constructor(e){super(),this.logic=e}toString(){return`RenderInstructionBarycentricPerspectiveBlend(${"det:"+this.logic.det} ${`diffA:${this.logic.diffA.x},${this.logic.diffA.y}`} ${`diffB:${this.logic.diffB.x},${this.logic.diffB.y}`} ${`pointC:${this.logic.point2C.x},${this.logic.point2C.y}`} ${`zInverses:${this.logic.zInverseA},${this.logic.zInverseB},${this.logic.zInverseC}`})`}equals(e,t){return e instanceof Mc&&this.logic.equals(e.logic)}execute(e,t,i){const n=e.popInto(Cc),r=e.popInto(Vc),s=e.popInto(Rc);this.logic.apply(Nc,t,n,r,s),e.push(Nc)}writeBinary(e,t){e.pushU32(rh.BarycentricPerspectiveBlendCode|this.logic.accuracy<<8),e.pushF32(this.logic.det),e.pushF32(this.logic.diffA.x),e.pushF32(this.logic.diffA.y),e.pushF32(this.logic.diffB.x),e.pushF32(this.logic.diffB.y),e.pushF32(this.logic.point2C.x),e.pushF32(this.logic.point2C.y),e.pushF32(this.logic.zInverseA),e.pushF32(this.logic.zInverseB),e.pushF32(this.logic.zInverseC)}static fromBinary(e,t,i){const n=e.fullU32Array[t]>>8&255,r=e.fullF32Array[t+1],s=new al(e.fullF32Array[t+2],e.fullF32Array[t+3]),a=new al(e.fullF32Array[t+4],e.fullF32Array[t+5]),o=new al(e.fullF32Array[t+6],e.fullF32Array[t+7]),l=e.fullF32Array[t+8],h=e.fullF32Array[t+9],u=e.fullF32Array[t+10];return new Mc(new Pc(r,s,a,o,l,h,u,n))}getBinaryLength(){return 11}}let kc=function(e){return e[e.SplitAccurate=0]="SplitAccurate",e[e.SplitPixelCenter=1]="SplitPixelCenter",e[e.UnsplitCentroid=2]="UnsplitCentroid",e[e.UnsplitPixelCenter=3]="UnsplitPixelCenter",e}({});St.register("RenderLinearGradientAccuracy",kc);const Lc=new al(0,0),Ic=e=>e.program;class Bc extends dh{constructor(e,t,i,n,r,s,a){const o=n.map(Ic);super(o,_.every(o,dh.closureIsFullyTransparent),_.every(o,dh.closureIsFullyOpaque),!1,!1,s===kc.UnsplitCentroid||s===kc.SplitAccurate),this.transform=e,this.start=t,this.end=i,this.stops=n,this.extend=r,this.accuracy=s,this.logic=a||Dc.from(this.transform,this.start,this.end,this.stops.map(e=>e.ratio),this.extend,this.accuracy)}getName(){return"RenderLinearGradient"}withChildren(e){return new Bc(this.transform,this.start,this.end,this.stops.map((t,i)=>new ic(t.ratio,e[i])),this.extend,this.accuracy,this.logic)}isSplittable(){return this.accuracy===kc.SplitAccurate||this.accuracy===kc.SplitPixelCenter}transformed(e){return new Bc(e.timesMatrix(this.transform),this.start,this.end,this.stops.map(t=>new ic(t.ratio,t.program.transformed(e))),this.extend,this.accuracy)}equalsTyped(e){return this.transform.equals(e.transform)&&this.start.equals(e.start)&&this.end.equals(e.end)&&this.extend===e.extend&&this.accuracy===e.accuracy&&this.stops.length===e.stops.length&&_.every(this.stops,(t,i)=>t.ratio===e.stops[i].ratio)}getSimplified(e){return this.stops.map((t,i)=>t.withProgram(e[i])).every(e=>e.program.isFullyTransparent)?Fh.TRANSPARENT:null}evaluate(e){return ic.evaluate(e,this.stops,this.logic.computeLinearValue(e))}writeInstructions(e){const t=this.stops.map(e=>new oh),i=new oh;e.push(new Oc(this.logic,t,i));for(let n=0;n<this.stops.length;n++)e.push(t[n]),this.stops[n].program.writeInstructions(e),e.push(hh.INSTANCE);e.push(i),e.push(mc.INSTANCE)}split(e){const t=this.transform.timesVector2(this.start),i=(this.transform.timesVector2(this.end),this.accuracy===kc.SplitAccurate?lc.Accurate:lc.PixelCenter),n=this.end.minus(this.start),r=n.timesScalar(1/n.magnitudeSquared),s=this.transform.inverted().timesTransposeVector2(r),a=s.dot(t),o=e.face.getDotRange(s),l=o.min-a,h=o.max-a,u=nc.getGradientLinearRanges(l,h,a,this.extend,this.stops);if(u.length<2)return[e];{const t=u.map(e=>e.start).slice(1),n=e.face.getStripeLineClip(s,t,0);return u.map((t,r)=>{const a=n[r],o=e=>{if(e!==this)return null;if(t.startProgram===t.endProgram)return t.startProgram.replace(o);{const e=s.timesScalar(1/(t.end-t.start)),n=t.start/(t.end-t.start);return new hc(e,n,i,t.startProgram.replace(o),t.endProgram.replace(o))}};return new RN(a,e.renderProgram.replace(o).simplified(),a.getBounds())}).filter(e=>e.face.getArea()>1e-8)}}serialize(){return{type:"RenderLinearGradient",transform:[this.transform.m00(),this.transform.m01(),this.transform.m02(),this.transform.m10(),this.transform.m11(),this.transform.m12(),this.transform.m20(),this.transform.m21(),this.transform.m22()],start:[this.start.x,this.start.y],end:[this.end.x,this.end.y],stops:this.stops.map(e=>e.serialize()),extend:this.extend,accuracy:this.accuracy}}static deserialize(e){return new Bc(Mh.rowMajor(e.transform[0],e.transform[1],e.transform[2],e.transform[3],e.transform[4],e.transform[5],e.transform[6],e.transform[7],e.transform[8]),new al(e.start[0],e.start[1]),new al(e.end[0],e.end[1]),e.stops.map(e=>ic.deserialize(e)),e.extend,e.accuracy)}}St.register("RenderLinearGradient",Bc);class Dc{constructor(e,t,i,n,r,s){this.inverseTransform=e,this.start=t,this.gradDelta=i,this.ratios=n,this.extend=r,this.accuracy=s,this.isIdentity=e.isIdentity()}static from(e,t,i,n,r,s){const a=e.inverted(),o=i.minus(t);return new Dc(a,t,o,n,r,s)}equals(e){return this.inverseTransform.equalsEpsilon(e.inverseTransform,1e-6)&&this.start.equalsEpsilon(e.start,1e-6)&&this.gradDelta.equalsEpsilon(e.gradDelta,1e-6)&&this.ratios.length===e.ratios.length&&this.ratios.every((t,i)=>Math.abs(t-e.ratios[i])<1e-6)&&this.extend===e.extend&&this.accuracy===e.accuracy}computeLinearValue(e){const t=this.accuracy===kc.UnsplitCentroid||this.accuracy===kc.SplitAccurate,i=t?Lc.set(e.centroid):e.writeBoundsCentroid(Lc);this.isIdentity||this.inverseTransform.multiplyVector2(i);const n=i.subtract(this.start),r=this.gradDelta,s=r.magnitude>0?n.dot(r)/r.dot(r):0;return sc.extend(this.extend,s)}}class Oc extends rh{constructor(e,t,i){super(),this.logic=e,this.stopLocations=t,this.blendLocation=i}toString(){const e="stops:"+this.stopLocations.map(e=>e.id).join(","),t="blend:"+this.blendLocation.id,i="ratios:"+this.logic.ratios.join(",");if(this.logic instanceof Dc){return`RenderInstructionComputeGradientRatio(linear, ${`inverseTransform:${this.logic.inverseTransform.m00()},${this.logic.inverseTransform.m01()},${this.logic.inverseTransform.m02()},${this.logic.inverseTransform.m10()},${this.logic.inverseTransform.m11()},${this.logic.inverseTransform.m12()}`} ${`start:${this.logic.start.x},${this.logic.start.y}`} ${`gradDelta:${this.logic.gradDelta.x},${this.logic.gradDelta.y}`} ${"extend:"+this.logic.extend} ${"accuracy:"+this.logic.accuracy} ${i} ${e} ${t})`}return`RenderInstructionComputeGradientRatio(radial, ${`conicTransform:${this.logic.conicTransform.m00()},${this.logic.conicTransform.m01()},${this.logic.conicTransform.m02()},${this.logic.conicTransform.m10()},${this.logic.conicTransform.m11()},${this.logic.conicTransform.m12()}`} ${"focalX:"+this.logic.focalX} ${"radius:"+this.logic.radius} ${"kind:"+this.logic.kind} ${"isSwapped:"+this.logic.isSwapped} ${"accuracy:"+this.logic.accuracy} ${i} ${e} ${t})`}equals(e,t){if(!(e instanceof Oc))return!1;if(!t(this.blendLocation,e.blendLocation))return!1;if(this.stopLocations.length!==e.stopLocations.length)return!1;for(let i=0;i<this.stopLocations.length;i++)if(!t(this.stopLocations[i],e.stopLocations[i]))return!1;return(this.logic instanceof Dc&&e.logic instanceof Dc||this.logic instanceof td&&e.logic instanceof td)&&this.logic.equals(e.logic)}execute(e,t,i){const n=this.logic.computeLinearValue(t),r=this.logic.ratios;let s=-1;for(;s<r.length-1&&r[s+1]<n;)s++;if(i.jump(this.blendLocation),-1===s)e.pushNumber(0),e.pushValues(0,0,0,0),i.call(this.stopLocations[0]);else if(s===r.length-1)e.pushNumber(1),e.pushValues(0,0,0,0),i.call(this.stopLocations[s]);else{const t=r[s],a=(n-t)/(r[s+1]-t);e.pushNumber(a);const o=a<1,l=a>0;o&&l||e.pushValues(0,0,0,0),o&&i.call(this.stopLocations[s]),l&&i.call(this.stopLocations[s+1])}}writeBinary(e,t){const i=this.stopLocations.map(t),n=t(this.blendLocation),r=this.logic.ratios,s=r.length;if(this.logic instanceof Dc){e.pushU32(rh.ComputeLinearGradientRatioCode|this.logic.accuracy<<8|this.logic.extend<<11|s<<Oc.GRADIENT_BEFORE_RATIO_COUNT_BITS),e.pushF32(this.logic.inverseTransform.m00()),e.pushF32(this.logic.inverseTransform.m01()),e.pushF32(this.logic.inverseTransform.m02()),e.pushF32(this.logic.inverseTransform.m10()),e.pushF32(this.logic.inverseTransform.m11()),e.pushF32(this.logic.inverseTransform.m12()),e.pushF32(this.logic.start.x),e.pushF32(this.logic.start.y),e.pushF32(this.logic.gradDelta.x),e.pushF32(this.logic.gradDelta.y),e.pushU32(n);for(let t=0;t<s;t++)e.pushF32(r[t]),e.pushU32(i[t])}else{e.pushU32(rh.ComputeRadialGradientRatioCode|this.logic.accuracy<<8|this.logic.extend<<11|this.logic.kind<<13|(this.logic.isSwapped?32768:0)|s<<Oc.GRADIENT_BEFORE_RATIO_COUNT_BITS),e.pushF32(this.logic.conicTransform.m00()),e.pushF32(this.logic.conicTransform.m01()),e.pushF32(this.logic.conicTransform.m02()),e.pushF32(this.logic.conicTransform.m10()),e.pushF32(this.logic.conicTransform.m11()),e.pushF32(this.logic.conicTransform.m12()),e.pushF32(this.logic.focalX),e.pushF32(this.logic.radius),e.pushU32(n);for(let t=0;t<s;t++)e.pushF32(r[t]),e.pushU32(i[t])}}static fromBinary(e,t,i){const n=e.fullU32Array[t],r=(255&n)===rh.ComputeLinearGradientRatioCode,s=n>>8&7,a=n>>11&3,o=n>>Oc.GRADIENT_BEFORE_RATIO_COUNT_BITS,l=Mh.rowMajor(e.fullF32Array[t+1],e.fullF32Array[t+2],e.fullF32Array[t+3],e.fullF32Array[t+4],e.fullF32Array[t+5],e.fullF32Array[t+6],0,0,1),h=t+(r?11:9),u=h+1,c=[],d=[],p=i(e.fullU32Array[h]);for(let m=0;m<o;m++)c.push(e.fullF32Array[u+2*m]),d.push(i(e.fullU32Array[u+2*m+1]));if(r){const i=new al(e.fullF32Array[t+7],e.fullF32Array[t+8]),n=new al(e.fullF32Array[t+9],e.fullF32Array[t+10]);return new Oc(new Dc(l,i,n,c,a,s),d,p)}{const i=n>>13&3,r=0!=(32768&n),o=e.fullF32Array[t+7],h=e.fullF32Array[t+8];return new Oc(new td(l,o,h,i,r,c,a,s),d,p)}}getBinaryLength(){return this.logic instanceof Dc?12+2*this.logic.ratios.length:10+2*this.logic.ratios.length}}_defineProperty(Oc,"GRADIENT_BEFORE_RATIO_COUNT_BITS",16);const qc=new al(0,0),Yc=new al(0,0),Hc=new al(0,0),Gc=new al(0,0),Fc=new al(0,0);let zc=function(e){return e[e.Accurate=0]="Accurate",e[e.Centroid=1]="Centroid",e[e.PixelCenter=2]="PixelCenter",e}({});St.register("RenderRadialBlendAccuracy",zc);class Uc extends dh{constructor(e,t,i,n,r,s,a){super([r,s],r.isFullyTransparent&&s.isFullyTransparent,r.isFullyOpaque&&s.isFullyOpaque,n===zc.Accurate,n===zc.Accurate,n===zc.Centroid),this.transform=e,this.radius0=t,this.radius1=i,this.accuracy=n,this.zero=r,this.one=s,this.logic=a||new Wc(this.transform,this.radius0,this.radius1,this.accuracy)}getName(){return"RenderRadialBlend"}withChildren(e){return new Uc(this.transform,this.radius0,this.radius1,this.accuracy,e[0],e[1],this.logic)}transformed(e){return new Uc(e.timesMatrix(this.transform),this.radius0,this.radius1,this.accuracy,this.zero.transformed(e),this.one.transformed(e))}equalsTyped(e){return this.transform.equals(e.transform)&&this.radius0===e.radius0&&this.radius1===e.radius1&&this.accuracy===e.accuracy}getSimplified(e){const t=e[0],i=e[1];return t.isFullyTransparent&&i.isFullyTransparent?Fh.TRANSPARENT:t.equals(i)?t:null}evaluate(e){const t=this.logic.computeLinearValue(e);return t<=0?this.zero.evaluate(e):t>=1?this.one.evaluate(e):Fh.ratioBlend(this.zero.evaluate(e),this.one.evaluate(e),t)}writeInstructions(e){const t=new oh,i=new oh,n=new oh;e.push(new cc(this.logic,t,i,n)),e.push(t),this.zero.writeInstructions(e),e.push(hh.INSTANCE),e.push(i),this.one.writeInstructions(e),e.push(hh.INSTANCE),e.push(n),e.push(mc.INSTANCE)}serialize(){return{type:"RenderRadialBlend",transform:[this.transform.m00(),this.transform.m01(),this.transform.m02(),this.transform.m10(),this.transform.m11(),this.transform.m12(),this.transform.m20(),this.transform.m21(),this.transform.m22()],radius0:this.radius0,radius1:this.radius1,accuracy:this.accuracy,zero:this.zero.serialize(),one:this.one.serialize()}}static deserialize(e){return new Uc(Mh.rowMajor(e.transform[0],e.transform[1],e.transform[2],e.transform[3],e.transform[4],e.transform[5],e.transform[6],e.transform[7],e.transform[8]),e.radius0,e.radius1,e.accuracy,dh.deserialize(e.zero),dh.deserialize(e.one))}}St.register("RenderRadialBlend",Uc);class Wc{constructor(e,t,i,n){this.transform=e,this.radius0=t,this.radius1=i,this.accuracy=n,this.inverseTransform=e.inverted()}equals(e){return this.transform.equalsEpsilon(e.transform,1e-6)&&Math.abs(this.radius0-e.radius0)<1e-6&&Math.abs(this.radius1-e.radius1)<1e-6&&this.accuracy===e.accuracy}computeLinearValue(e){let t;if(this.accuracy===zc.Accurate)if(e.face)t=e.face.getAverageDistanceTransformedToOrigin(this.inverseTransform,e.area);else{const i=this.inverseTransform.multiplyVector2(Yc.setXY(e.minX,e.minY)),n=this.inverseTransform.multiplyVector2(Hc.setXY(e.maxX,e.minY)),r=this.inverseTransform.multiplyVector2(Gc.setXY(e.maxX,e.maxY)),s=this.inverseTransform.multiplyVector2(Fc.setXY(e.minX,e.maxY));t=(OV.evaluateLineIntegralDistance(i.x,i.y,n.x,n.y)+OV.evaluateLineIntegralDistance(n.x,n.y,r.x,r.y)+OV.evaluateLineIntegralDistance(r.x,r.y,s.x,s.y)+OV.evaluateLineIntegralDistance(s.x,s.y,i.x,i.y))/(e.area*this.inverseTransform.getSignedScale())}else if(this.accuracy===zc.Centroid){const i=qc.set(e.centroid);this.inverseTransform.multiplyVector2(i),t=i.magnitude}else{if(this.accuracy!==zc.PixelCenter)throw new Error("unreachable");{const i=e.writeBoundsCentroid(qc);this.inverseTransform.multiplyVector2(i),t=i.magnitude}}const i=(t-this.radius0)/(this.radius1-this.radius0);return i}}let Xc=function(e){return e[e.SplitAccurate=0]="SplitAccurate",e[e.SplitCentroid=1]="SplitCentroid",e[e.SplitPixelCenter=2]="SplitPixelCenter",e[e.UnsplitCentroid=3]="UnsplitCentroid",e[e.UnsplitPixelCenter=4]="UnsplitPixelCenter",e}({});St.register("RenderRadialGradientAccuracy",Xc);const jc=new al(0,0),Qc=e=>e.program;class Kc extends dh{constructor(e,t,i,n,r,s,a,o,l){const h=s.map(Qc);super(h,_.every(h,dh.closureIsFullyTransparent),_.every(h,dh.closureIsFullyOpaque),!1,!1,o===Xc.UnsplitCentroid||o===Xc.SplitCentroid||o===Xc.SplitAccurate),this.transform=e,this.start=t,this.startRadius=i,this.end=n,this.endRadius=r,this.stops=s,this.extend=a,this.accuracy=o,this.logic=l||td.from(this.transform,this.start,this.startRadius,this.end,this.endRadius,this.stops.map(e=>e.ratio),this.extend,this.accuracy)}getName(){return"RenderRadialGradient"}withChildren(e){return new Kc(this.transform,this.start,this.startRadius,this.end,this.endRadius,this.stops.map((t,i)=>new ic(t.ratio,e[i])),this.extend,this.accuracy,this.logic)}isSplittable(){return this.accuracy===Xc.SplitAccurate||this.accuracy===Xc.SplitCentroid||this.accuracy===Xc.SplitPixelCenter}transformed(e){return new Kc(e.timesMatrix(this.transform),this.start,this.startRadius,this.end,this.endRadius,this.stops.map(t=>new ic(t.ratio,t.program.transformed(e))),this.extend,this.accuracy)}equalsTyped(e){return this.transform.equals(e.transform)&&this.start.equals(e.start)&&this.startRadius===e.startRadius&&this.end.equals(e.end)&&this.endRadius===e.endRadius&&this.extend===e.extend&&this.accuracy===e.accuracy&&this.stops.length===e.stops.length&&_.every(this.stops,(t,i)=>t.ratio===e.stops[i].ratio)}getSimplified(e){return this.stops.map((t,i)=>t.withProgram(e[i])).every(e=>e.program.isFullyTransparent)?Fh.TRANSPARENT:null}getLogic(){return this.logic}evaluate(e){return ic.evaluate(e,this.stops,this.getLogic().computeLinearValue(e))}writeInstructions(e){const t=this.stops.map(e=>new oh),i=new oh;e.push(new Oc(this.getLogic(),t,i));for(let n=0;n<this.stops.length;n++)e.push(t[n]),this.stops[n].program.writeInstructions(e),e.push(hh.INSTANCE);e.push(i),e.push(mc.INSTANCE)}split(e){const t=e.face.getTransformed(this.transform.inverted()),i=this.accuracy===Xc.SplitAccurate?zc.Accurate:this.accuracy===Xc.SplitCentroid?zc.Centroid:zc.PixelCenter,n=this.start,r=t.getDistanceRangeToInside(n),s=this.startRadius>this.endRadius,a=s?this.endRadius:this.startRadius,o=s?this.startRadius:this.endRadius,l=s?this.stops.map(e=>new ic(1-e.ratio,e.program)).reverse():this.stops,h=o-a,u=a/h,c=e=>e/h-u,d=e=>(e+u)*h,p=c(r.min),m=c(r.max),g=nc.getGradientLinearRanges(p,m,0,this.extend,l);if(g.length<2)return[e];{const r=g.map(e=>e.start).slice(1).map(d),s=[];let o=t;for(let e=0;e<r.length;e++){const t=r[e],i=Math.PI/64,{insideFace:a,outsideFace:l}=o.getBinaryCircularClip(n,t,i);s.push(a),o=l}s.push(o);const l=this.transform.timesMatrix(Mh.translation(n.x,n.y));return g.map((t,n)=>{const r=s[n].getTransformed(this.transform).getRounded(1e-10),o=e=>{if(e!==this)return null;if(t.startProgram===t.endProgram)return t.startProgram.replace(o);{const e=a+t.start*h,n=a+t.end*h;return new Uc(l,e,n,i,t.startProgram.replace(o),t.endProgram.replace(o))}};return new RN(r,e.renderProgram.replace(o).simplified(),r.getBounds())}).filter(e=>e.face.getArea()>1e-8)}}serialize(){return{type:"RenderRadialGradient",transform:[this.transform.m00(),this.transform.m01(),this.transform.m02(),this.transform.m10(),this.transform.m11(),this.transform.m12(),this.transform.m20(),this.transform.m21(),this.transform.m22()],start:[this.start.x,this.start.y],startRadius:this.startRadius,end:[this.end.x,this.end.y],endRadius:this.endRadius,stops:this.stops.map(e=>e.serialize()),extend:this.extend,accuracy:this.accuracy}}static deserialize(e){return new Kc(Mh.rowMajor(e.transform[0],e.transform[1],e.transform[2],e.transform[3],e.transform[4],e.transform[5],e.transform[6],e.transform[7],e.transform[8]),new al(e.start[0],e.start[1]),e.startRadius,new al(e.end[0],e.end[1]),e.endRadius,e.stops.map(e=>ic.deserialize(e)),e.extend,e.accuracy)}}const Zc=(e,t)=>Mh.affine(t.y-e.y,t.x-e.x,e.x,e.x-t.x,t.y-e.y,e.y),Jc=(e,t)=>Zc(al.ZERO,al.X_UNIT).timesMatrix(Zc(e,t).inverted());var $c=function(e){return e[e.Circular=0]="Circular",e[e.Strip=1]="Strip",e[e.FocalOnCircle=2]="FocalOnCircle",e[e.Cone=3]="Cone",e}($c||{});const ed={GradientTypeCircular:$c.Circular,GradientTypeStrip:$c.Strip,GradientTypeFocalOnCircle:$c.FocalOnCircle,GradientTypeCone:$c.Cone};class td{constructor(e,t,i,n,r,s,a,o){this.conicTransform=e,this.focalX=t,this.radius=i,this.kind=n,this.isSwapped=r,this.ratios=s,this.extend=a,this.accuracy=o}static from(e,t,i,n,r,s,a,o){let l=t,h=n,u=i,c=r;const d=e.inverted();let p,m=null,g=0,f=0,y=!1;if(Math.abs(u-c)<=1/4096){p=$c.Strip;const e=u/l.distance(h);m=Jc(l,h).timesMatrix(d),f=e*e}else{if(p=$c.Cone,l.equals(h)&&(p=$c.Circular,l.addScalar(1/4096)),0===c){y=!0;const e=l;l=h,h=e;const t=u;u=c,c=t}g=u/(u-c);const e=l.timesScalar(1-g).add(h.timesScalar(g));f=c/e.distance(h);const t=Jc(e,h).timesMatrix(d);let i=t;if(Math.abs(f-1)<=1/4096){p=$c.FocalOnCircle;const e=.5*Math.abs(1-g);i=Mh.scaling(e).timesMatrix(t)}else{const e=f*f-1,n=Math.abs(1-g)/e,r=f*n,s=Math.sqrt(Math.abs(e))*n;i=Mh.scaling(r,s).timesMatrix(t)}m=i}return new td(m,g,f,p,y,s,a,o)}equals(e){return this.conicTransform.equalsEpsilon(e.conicTransform,1e-6)&&Math.abs(this.focalX-e.focalX)<1e-6&&Math.abs(this.radius-e.radius)<1e-6&&this.kind===e.kind&&this.isSwapped===e.isSwapped&&this.ratios.length===e.ratios.length&&_.every(this.ratios,(t,i)=>Math.abs(t-e.ratios[i])<1e-6)&&this.extend===e.extend&&this.accuracy===e.accuracy}computeLinearValue(e){const t=this.focalX,i=this.radius,n=this.kind,r=this.isSwapped,s=n===$c.Strip,a=n===$c.Circular,o=n===$c.FocalOnCircle,l=a?0:1/i,h=r||1-t<0?-1:1,u=Math.sign(1-t),c=this.accuracy===Xc.UnsplitCentroid||this.accuracy===Xc.SplitCentroid||this.accuracy===Xc.SplitAccurate?e.centroid:e.writeBoundsCentroid(jc),d=this.conicTransform.timesVector2(c),p=d.x,m=d.y,g=p*p,f=m*m;let y=0,E=!0;if(s){const e=i-f;y=Math.sqrt(e)+p,E=e>=0}else if(o)y=(g+f)/p,E=y>=0&&0!==p;else if(i>1)y=Math.sqrt(g+f)-p*l;else{const e=g-f;y=h*Math.sqrt(e)-p*l,E=e>=0&&y>=0}return E?(y=sc.extend(this.extend,t+u*y),r&&(y=1-y),y):NaN}}St.register("RenderRadialGradient",Kc);var id=function(e){return e[e.NearestNeighbor=0]="NearestNeighbor",e[e.AnalyticMitchellNetravali=1]="AnalyticMitchellNetravali",e[e.Bilinear=2]="Bilinear",e[e.MitchellNetravali=3]="MitchellNetravali",e[e.AnalyticBox=4]="AnalyticBox",e[e.AnalyticBilinear=5]="AnalyticBilinear",e}(id||{});const nd=id;St.register("RenderResampleType",id);const rd=(e,t)=>{switch(t){case"nonzero":return 0!==e;case"evenodd":return e%2!=0;case"positive":return e>0;case"negative":return e<0;default:throw new Error("unknown fill rule")}};class sd{constructor(e,t){this.program=e,this.indices=t}equals(e){return this.indices.length===e.indices.length&&0===this.compare(e)}compare(e){const t=Math.min(this.indices.length,e.indices.length);for(let i=0;i<t;i++){const t=this.indices[i],n=e.indices[i];if(t!==n)return Math.sign(t-n)}return this.indices.length-e.indices.length}static closureCompare(e,t){return e.compare(t)}}St.register("RenderTrail",sd);const ad=[];class od{constructor(e){_defineProperty(this,"trailsMap",new Map),_defineProperty(this,"permanentChildrenMap",new Map),this.program=e,this.initialRecurse(e,[])}replace(e){if(!this.program.hasPathBoolean)return this.program;const t=[];for(const r of e){var i;t.push(...null!==(i=this.trailsMap.get(r))&&void 0!==i?i:[])}t.sort(sd.closureCompare);const n=new ld(-1);for(let r=0;r<t.length;r++)n.add(t[r].indices,0);return this.replaceRecurse(this.program,e,n).simplified()}replaceRecurse(e,t,i){if(!e.hasPathBoolean)return e;if(e instanceof gh){const n=t.has(e.path);return this.replaceRecurse(n?e.inside:e.outside,t,i?i.getAtIndex(n?0:1):null)}if(e instanceof wu||e instanceof Lu){const n=this.permanentChildrenMap.get(e)||ad,r=i?i.children.filter(e=>e.isIncluded).map(e=>e.index):ad,s=[],a=[];let o=n.length-1,l=r.length-1;const h=e instanceof wu;for(;o>=0||l>=0;){const u=o>=0?n[o]:-1,c=l>=0?r[l]:-1;let d;u>c?(d=u,o--):(d=c,l--);const p=this.replaceRecurse(e.children[d],t,i?i.getAtIndex(d):null);if(h?s.push(p):a.push(e.items[d].withProgram(p)),h&&p.isFullyOpaque)break}return h?new wu(s.reverse()):new Lu(a.reverse())}return e.withChildren(e.children.map((e,n)=>this.replaceRecurse(e,t,i?i.getAtIndex(n):null)))}initialRecurse(e,t){if(!e.hasPathBoolean)return;od.isTransparentOutside(e)&&this.addTrail(e.path,new sd(this.program,t.slice()));const i=od.isContainer(e)&&!this.permanentChildrenMap.has(e);for(let n=0;n<e.children.length;n++){t.push(n);const r=e.children[n];this.initialRecurse(r,t),i&&!od.isTransparentOutside(r)&&this.addPermanentChild(e,n),t.pop()}}addTrail(e,t){let i=this.trailsMap.get(e);i||(i=[],this.trailsMap.set(e,i)),i.push(t)}addPermanentChild(e,t){let i=this.permanentChildrenMap.get(e);i||(i=[],this.permanentChildrenMap.set(e,i)),i.push(t)}static isContainer(e){return e instanceof wu||e instanceof Lu}static isTransparentOutside(e){return e instanceof gh&&e.outside.isFullyTransparent}}St.register("RenderPathReplacer",od);class ld{constructor(e){_defineProperty(this,"children",[]),_defineProperty(this,"isIncluded",!1),this.index=e}add(e,t){if(t===e.length)this.isIncluded=!0;else if(0===this.children.length){const i=new ld(e[t]);this.children.push(i),i.add(e,t+1)}else{const i=this.children[this.children.length-1];if(i.index===e[t])i.add(e,t+1);else{const i=new ld(e[t]);this.children.push(i),i.add(e,t+1)}}}getAtIndex(e){for(let t=0;t<this.children.length;t++){const i=this.children[t];if(i.index===e)return i;if(i.index>e)return null}return null}}const hd=new bt("kite"),ud=fl.lineLineIntersection,cd={lineWidth:1,lineCap:"butt",lineJoin:"miter",lineDash:[],lineDashOffset:0,miterLimit:10};class dd{constructor(e){const t=Po({},cd,e);this.lineWidth=t.lineWidth,this.lineCap=t.lineCap,this.lineJoin=t.lineJoin,this.lineDash=t.lineDash,this.lineDashOffset=t.lineDashOffset,this.miterLimit=t.miterLimit}equals(e){if(!(this.lineWidth===e.lineWidth&&this.lineCap===e.lineCap&&this.lineJoin===e.lineJoin&&this.miterLimit===e.miterLimit&&this.lineDashOffset===e.lineDashOffset))return!1;if(this.lineDash.length!==e.lineDash.length)return!1;for(let t=0;t<this.lineDash.length;t++)if(this.lineDash[t]!==e.lineDash[t])return!1;return!0}copy(){return new dd({lineWidth:this.lineWidth,lineCap:this.lineCap,lineJoin:this.lineJoin,lineDash:this.lineDash,lineDashOffset:this.lineDashOffset,miterLimit:this.miterLimit})}leftJoin(e,t,i){t=t.normalized(),i=i.normalized();const n=e.plus(t.perpendicular.negated().times(this.lineWidth/2)),r=e.plus(i.perpendicular.negated().times(this.lineWidth/2)),s=n.equals(r)?[]:[new op(n,r)];let a,o,l;if(!(t.perpendicular.dot(i)>1e-12))return s;switch(this.lineJoin){case"round":return a=t.angle+Math.PI/2,o=i.angle+Math.PI/2,[new bp(e,this.lineWidth/2,a,o,!0)];case"miter":if(l=t.angleBetween(i.negated()),1/Math.sin(l/2)<=this.miterLimit&&l<Math.PI-1e-5){const e=ud(n,n.plus(t),r,r.plus(i));return e?[new op(n,e),new op(e,r)]:[new op(n,r)]}return s;case"bevel":return s;default:throw new Error("invalid lineJoin: "+this.lineJoin)}}rightJoin(e,t,i){return this.leftJoin(e,i.negated(),t.negated())}cap(e,t){t=t.normalized();const i=e.plus(t.perpendicular.times(-this.lineWidth/2)),n=e.plus(t.perpendicular.times(this.lineWidth/2));let r,s,a,o,l,h;switch(this.lineCap){case"butt":return[new op(i,n)];case"round":return r=t.angle,[new bp(e,this.lineWidth/2,r+Math.PI/2,r-Math.PI/2,!0)];case"square":return s=t.perpendicular.negated().times(this.lineWidth/2),a=t.perpendicular.times(this.lineWidth/2),o=t.times(this.lineWidth/2),l=e.plus(s).plus(o),h=e.plus(a).plus(o),[new op(i,l),new op(l,h),new op(h,n)];default:throw new Error("invalid lineCap: "+this.lineCap)}}}hd.register("LineStyles",dd);class pd{constructor(e,t){this.a=e,this.b=t;let i=0,n=1,r=this.apply(i),s=this.apply(n);r>1&&(r=1,i=this.applyInverse(r)),r<0&&(r=0,i=this.applyInverse(r)),s>1&&(s=1,n=this.applyInverse(s)),s<0&&(s=0,n=this.applyInverse(s)),this.t0=i,this.t1=n,e>0?(this.qt0=r,this.qt1=s):(this.qt0=s,this.qt1=r),this.t0<0&&this.t0>-1e-8&&(this.t0=0),this.t0>1&&this.t0<1+1e-8&&(this.t0=1),this.t1<0&&this.t1>-1e-8&&(this.t1=0),this.t1>1&&this.t1<1+1e-8&&(this.t1=1),this.qt0<0&&this.qt0>-1e-8&&(this.qt0=0),this.qt0>1&&this.qt0<1+1e-8&&(this.qt0=1),this.qt1<0&&this.qt1>-1e-8&&(this.qt1=0),this.qt1>1&&this.qt1<1+1e-8&&(this.qt1=1)}apply(e){return this.a*e+this.b}applyInverse(e){return(e-this.b)/this.a}static createLinear(e,t,i,n){const r=(n-t)/(i-e);return new pd(r,t-e*r)}}hd.register("Overlap",pd);class md{constructor(e,t,i,n,r){this.point=t,this.normal=i,this.distance=e,this.wind=n,this.t=fl.clamp(r,0,1)}}hd.register("RayIntersection",md);class gd{constructor(e,t,i){this.point=e,this.aT=fl.clamp(t,0,1),this.bT=fl.clamp(i,0,1)}getSwapped(){return new gd(this.point,this.bT,this.aT)}}hd.register("SegmentIntersection",gd);const fd=e=>e.toFixed(20);hd.register("svgNumber",fd);const yd=fd;function Ed(e){return"[object Array]"===Object.prototype.toString.call(e)}wo.register("isArray",Ed);const vd=Ed,Ad=window.Float64Array||Array;class bd{constructor(e){let t,i;const n=e.entries;this.n=e.getColumnDimension();const r=this.n;for(this.V=new Ad(r*r),this.d=new Ad(r),this.e=new Ad(r),this.issymmetric=!0,i=0;i<r&&this.issymmetric;i++)for(t=0;t<r&&this.issymmetric;t++)this.issymmetric=n[t*this.n+i]===n[i*this.n+t];if(this.issymmetric){for(t=0;t<r;t++)for(i=0;i<r;i++)this.V[t*this.n+i]=n[t*this.n+i];this.tred2(),this.tql2()}else{for(this.H=new Ad(r*r),this.ort=new Ad(r),i=0;i<r;i++)for(t=0;t<r;t++)this.H[t*this.n+i]=n[t*this.n+i];this.orthes(),this.hqr2()}}getV(){return this.V.copy()}getRealEigenvalues(){return this.d}getImagEigenvalues(){return this.e}getD(){const e=this.n,t=this.d,i=this.e,n=new Nd(e,e),r=n.entries;for(let s=0;s<e;s++){for(let t=0;t<e;t++)r[s*this.n+t]=0;r[s*this.n+s]=t[s],i[s]>0?r[s*this.n+s+1]=i[s]:i[s]<0&&(r[s*this.n+s-1]=i[s])}return n}tred2(){const e=this.n,t=this.V,i=this.d,n=this.e;let r,s,a,o,l,h;for(s=0;s<e;s++)i[s]=t[(e-1)*e+s];for(r=e-1;r>0;r--){let u=0;for(h=0,a=0;a<r;a++)u+=Math.abs(i[a]);if(0===u)for(n[r]=i[r-1],s=0;s<r;s++)i[s]=t[(r-1)*e+s],t[r*this.n+s]=0,t[s*this.n+r]=0;else{for(a=0;a<r;a++)i[a]/=u,h+=i[a]*i[a];for(o=i[r-1],l=Math.sqrt(h),o>0&&(l=-l),n[r]=u*l,h-=o*l,i[r-1]=o-l,s=0;s<r;s++)n[s]=0;for(s=0;s<r;s++){for(o=i[s],t[s*this.n+r]=o,l=n[s]+t[s*e+s]*o,a=s+1;a<=r-1;a++)l+=t[a*e+s]*i[a],n[a]+=t[a*e+s]*o;n[s]=l}for(o=0,s=0;s<r;s++)n[s]/=h,o+=n[s]*i[s];const c=o/(h+h);for(s=0;s<r;s++)n[s]-=c*i[s];for(s=0;s<r;s++){for(o=i[s],l=n[s],a=s;a<=r-1;a++)t[a*e+s]-=o*n[a]+l*i[a];i[s]=t[(r-1)*e+s],t[r*this.n+s]=0}}i[r]=h}for(r=0;r<e-1;r++){if(t[(e-1)*e+r]=t[r*e+r],t[r*e+r]=1,h=i[r+1],0!==h){for(a=0;a<=r;a++)i[a]=t[a*e+(r+1)]/h;for(s=0;s<=r;s++){for(l=0,a=0;a<=r;a++)l+=t[a*e+(r+1)]*t[a*e+s];for(a=0;a<=r;a++)t[a*e+s]-=l*i[a]}}for(a=0;a<=r;a++)t[a*e+(r+1)]=0}for(s=0;s<e;s++)i[s]=t[(e-1)*e+s],t[(e-1)*e+s]=0;t[(e-1)*e+(e-1)]=1,n[0]=0}tql2(){const e=this.n,t=this.V,i=this.d,n=this.e;let r,s,a,o,l,h,u;for(r=1;r<e;r++)n[r-1]=n[r];n[e-1]=0;let c=0,d=0;const p=Math.pow(2,-52);for(o=0;o<e;o++){d=Math.max(d,Math.abs(i[o])+Math.abs(n[o]));let s=o;for(;s<e&&!(Math.abs(n[s])<=p*d);)s++;if(s>o){u=0;do{u+=1,l=i[o],h=(i[o+1]-l)/(2*n[o]);let d=Nd.hypot(h,1);h<0&&(d=-d),i[o]=n[o]/(h+d),i[o+1]=n[o]*(h+d);const p=i[o+1];let m=l-i[o];for(r=o+2;r<e;r++)i[r]-=m;c+=m,h=i[s];let g=1,f=g,y=g;const E=n[o+1];let v=0,A=0;for(r=s-1;r>=o;r--)for(y=f,f=g,A=v,l=g*n[r],m=g*h,d=Nd.hypot(h,n[r]),n[r+1]=v*d,v=n[r]/d,g=h/d,h=g*i[r]-v*l,i[r+1]=m+v*(g*l+v*i[r]),a=0;a<e;a++)m=t[a*e+(r+1)],t[a*e+(r+1)]=v*t[a*e+r]+g*m,t[a*e+r]=g*t[a*e+r]-v*m;h=-v*A*y*E*n[o]/p,n[o]=v*h,i[o]=g*h}while(Math.abs(n[o])>p*d)}i[o]=i[o]+c,n[o]=0}for(r=0;r<e-1;r++){for(a=r,h=i[r],s=r+1;s<e;s++)i[s]<h&&(a=s,h=i[s]);if(a!==r)for(i[a]=i[r],i[r]=h,s=0;s<e;s++)h=t[s*this.n+r],t[s*this.n+r]=t[s*e+a],t[s*e+a]=h}}orthes(){const e=this.n,t=this.V,i=this.H,n=this.ort;let r,s,a,o,l;const h=e-1;for(a=1;a<=h-1;a++){let t=0;for(r=a;r<=h;r++)t+=Math.abs(i[r*e+(a-1)]);if(0!==t){let u=0;for(r=h;r>=a;r--)n[r]=i[r*e+(a-1)]/t,u+=n[r]*n[r];for(l=Math.sqrt(u),n[a]>0&&(l=-l),u-=n[a]*l,n[a]=n[a]-l,s=a;s<e;s++){for(o=0,r=h;r>=a;r--)o+=n[r]*i[r*this.n+s];for(o/=u,r=a;r<=h;r++)i[r*this.n+s]-=o*n[r]}for(r=0;r<=h;r++){for(o=0,s=h;s>=a;s--)o+=n[s]*i[r*this.n+s];for(o/=u,s=a;s<=h;s++)i[r*this.n+s]-=o*n[s]}n[a]=t*n[a],i[a*e+(a-1)]=t*l}}for(r=0;r<e;r++)for(s=0;s<e;s++)t[r*this.n+s]=r===s?1:0;for(a=h-1;a>=1;a--)if(0!==i[a*e+(a-1)]){for(r=a+1;r<=h;r++)n[r]=i[r*e+(a-1)];for(s=a;s<=h;s++){for(l=0,r=a;r<=h;r++)l+=n[r]*t[r*this.n+s];for(l=l/n[a]/i[a*e+(a-1)],r=a;r<=h;r++)t[r*this.n+s]+=l*n[r]}}}cdiv(e,t,i,n){let r,s;Math.abs(i)>Math.abs(n)?(r=n/i,s=i+r*n,this.cdivr=(e+r*t)/s,this.cdivi=(t-r*e)/s):(r=i/n,s=n+r*i,this.cdivr=(r*e+t)/s,this.cdivi=(r*t-e)/s)}hqr2(){let e;const t=this.V,i=this.d,n=this.e,r=this.H;let s,a,o,l,h,u;const c=this.n;e=c-1;const d=c-1,p=Math.pow(2,-52);let m,g,f,y,E=0,v=0,A=0,b=0,S=0,_=0,x=0;for(s=0;s<c;s++)for((s<0||s>d)&&(i[s]=r[s*e+s],n[s]=0),a=Math.max(s-1,0);a<c;a++)x+=Math.abs(r[s*this.n+a]);for(u=0;e>=0;){for(l=e;l>0&&(S=Math.abs(r[(l-1)*e+(l-1)])+Math.abs(r[l*e+l]),0===S&&(S=x),!(Math.abs(r[l*e+(l-1)])<p*S));)l--;if(l===e)r[e*e+e]=r[e*e+e]+E,i[e]=r[e*e+e],n[e]=0,e--,u=0;else if(l===e-1){if(g=r[e*e+e-1]*r[(e-1)*e+e],v=(r[(e-1)*e+(e-1)]-r[e*e+e])/2,A=v*v+g,_=Math.sqrt(Math.abs(A)),r[e*e+e]=r[e*e+e]+E,r[(e-1)*e+(e-1)]=r[(e-1)*e+(e-1)]+E,f=r[e*e+e],A>=0){for(_=v>=0?v+_:v-_,i[e-1]=f+_,i[e]=i[e-1],0!==_&&(i[e]=f-g/_),n[e-1]=0,n[e]=0,f=r[e*e+e-1],S=Math.abs(f)+Math.abs(_),v=f/S,A=_/S,b=Math.sqrt(v*v+A*A),v/=b,A/=b,a=e-1;a<c;a++)_=r[(e-1)*e+a],r[(e-1)*e+a]=A*_+v*r[e*e+a],r[e*e+a]=A*r[e*e+a]-v*_;for(s=0;s<=e;s++)_=r[s*e+e-1],r[s*e+e-1]=A*_+v*r[s*e+e],r[s*e+e]=A*r[s*e+e]-v*_;for(s=0;s<=d;s++)_=t[s*e+e-1],t[s*e+e-1]=A*_+v*t[s*e+e],t[s*e+e]=A*t[s*e+e]-v*_}else i[e-1]=f+v,i[e]=f+v,n[e-1]=_,n[e]=-_;e-=2,u=0}else{if(f=r[e*e+e],y=0,g=0,l<e&&(y=r[(e-1)*e+(e-1)],g=r[e*e+e-1]*r[(e-1)*e+e]),10===u){for(E+=f,s=0;s<=e;s++)r[s*e+s]-=f;S=Math.abs(r[e*e+e-1])+Math.abs(r[(e-1)*e+e-2]),f=y=.75*S,g=-.4375*S*S}if(30===u&&(S=(y-f)/2,S=S*S+g,S>0)){for(S=Math.sqrt(S),y<f&&(S=-S),S=f-g/((y-f)/2+S),s=0;s<=e;s++)r[s*e+s]-=S;E+=S,f=y=g=.964}for(u+=1,h=e-2;h>=l&&(_=r[h*e+h],b=f-_,S=y-_,v=(b*S-g)/r[(h+1)*e+h]+r[h*e+h+1],A=r[(h+1)*e+h+1]-_-b-S,b=r[(h+2)*e+h+1],S=Math.abs(v)+Math.abs(A)+Math.abs(b),v/=S,A/=S,b/=S,h!==l)&&!(Math.abs(r[h*e+(h-1)])*(Math.abs(A)+Math.abs(b))<p*(Math.abs(v)*(Math.abs(r[(h-1)*e+h-1])+Math.abs(_)+Math.abs(r[(h+1)*e+h+1]))));)h--;for(s=h+2;s<=e;s++)r[s*e+s-2]=0,s>h+2&&(r[s*e+s-3]=0);for(o=h;o<=e-1;o++){const i=o!==e-1;if(o!==h&&(v=r[o*e+o-1],A=r[(o+1)*e+o-1],b=i?r[(o+2)*e+o-1]:0,f=Math.abs(v)+Math.abs(A)+Math.abs(b),0!==f&&(v/=f,A/=f,b/=f)),0===f)break;if(S=Math.sqrt(v*v+A*A+b*b),v<0&&(S=-S),0!==S){for(o!==h?r[o*e+o-1]=-S*f:l!==h&&(r[o*e+o-1]=-r[o*e+o-1]),v+=S,f=v/S,y=A/S,_=b/S,A/=v,b/=v,a=o;a<c;a++)v=r[o*e+a]+A*r[(o+1)*e+a],i&&(v+=b*r[(o+2)*e+a],r[(o+2)*e+a]=r[(o+2)*e+a]-v*_),r[o*e+a]=r[o*e+a]-v*f,r[(o+1)*e+a]=r[(o+1)*e+a]-v*y;for(s=0;s<=Math.min(e,o+3);s++)v=f*r[s*e+o]+y*r[s*e+o+1],i&&(v+=_*r[s*e+o+2],r[s*e+o+2]=r[s*e+o+2]-v*b),r[s*e+o]=r[s*e+o]-v,r[s*e+o+1]=r[s*e+o+1]-v*A;for(s=0;s<=d;s++)v=f*t[s*e+o]+y*t[s*e+o+1],i&&(v+=_*t[s*e+o+2],t[s*e+o+2]=t[s*e+o+2]-v*b),t[s*e+o]=t[s*e+o]-v,t[s*e+o+1]=t[s*e+o+1]-v*A}}}}if(0!==x){for(e=c-1;e>=0;e--)if(v=i[e],A=n[e],0===A)for(l=e,r[e*e+e]=1,s=e-1;s>=0;s--){for(g=r[s*e+s]-v,b=0,a=l;a<=e;a++)b+=r[s*this.n+a]*r[a*e+e];if(n[s]<0)_=g,S=b;else if(l=s,0===n[s]?r[s*e+e]=0!==g?-b/g:-b/(p*x):(f=r[s*e+s+1],y=r[(s+1)*e+s],A=(i[s]-v)*(i[s]-v)+n[s]*n[s],m=(f*S-_*b)/A,r[s*e+e]=m,Math.abs(f)>Math.abs(_)?r[(s+1)*e+e]=(-b-g*m)/f:r[(s+1)*e+e]=(-S-y*m)/_),m=Math.abs(r[s*e+e]),p*m*m>1)for(a=s;a<=e;a++)r[a*e+e]=r[a*e+e]/m}else if(A<0)for(l=e-1,Math.abs(r[e*e+e-1])>Math.abs(r[(e-1)*e+e])?(r[(e-1)*e+(e-1)]=A/r[e*e+e-1],r[(e-1)*e+e]=-(r[e*e+e]-v)/r[e*e+e-1]):(this.cdiv(0,-r[(e-1)*e+e],r[(e-1)*e+(e-1)]-v,A),r[(e-1)*e+(e-1)]=this.cdivr,r[(e-1)*e+e]=this.cdivi),r[e*e+e-1]=0,r[e*e+e]=1,s=e-2;s>=0;s--){let t,o,h,u;for(t=0,o=0,a=l;a<=e;a++)t+=r[s*this.n+a]*r[a*e+e-1],o+=r[s*this.n+a]*r[a*e+e];if(g=r[s*e+s]-v,n[s]<0)_=g,b=t,S=o;else if(l=s,0===n[s]?(this.cdiv(-t,-o,g,A),r[s*e+e-1]=this.cdivr,r[s*e+e]=this.cdivi):(f=r[s*e+s+1],y=r[(s+1)*e+s],h=(i[s]-v)*(i[s]-v)+n[s]*n[s]-A*A,u=2*(i[s]-v)*A,0===h&&0===u&&(h=p*x*(Math.abs(g)+Math.abs(A)+Math.abs(f)+Math.abs(y)+Math.abs(_))),this.cdiv(f*b-_*t+A*o,f*S-_*o-A*t,h,u),r[s*e+e-1]=this.cdivr,r[s*e+e]=this.cdivi,Math.abs(f)>Math.abs(_)+Math.abs(A)?(r[(s+1)*e+e-1]=(-t-g*r[s*e+e-1]+A*r[s*e+e])/f,r[(s+1)*e+e]=(-o-g*r[s*e+e]-A*r[s*e+e-1])/f):(this.cdiv(-b-y*r[s*e+e-1],-S-y*r[s*e+e],_,A),r[(s+1)*e+e-1]=this.cdivr,r[(s+1)*e+e]=this.cdivi)),m=Math.max(Math.abs(r[s*e+e-1]),Math.abs(r[s*e+e])),p*m*m>1)for(a=s;a<=e;a++)r[a*e+e-1]=r[a*e+e-1]/m,r[a*e+e]=r[a*e+e]/m}for(s=0;s<c;s++)if(s<0||s>d)for(a=s;a<c;a++)t[s*this.n+a]=r[s*this.n+a];for(a=c-1;a>=0;a--)for(s=0;s<=d;s++){for(_=0,o=0;o<=Math.min(a,d);o++)_+=t[s*e+o]*r[o*e+a];t[s*this.n+a]=_}}}}rl.register("EigenvalueDecomposition",bd);const Sd=bd,_d=window.Float64Array||Array;class xd{constructor(e){let t,i,n;this.matrix=e,this.LU=e.getArrayCopy();const r=this.LU;this.m=e.getRowDimension();const s=this.m;this.n=e.getColumnDimension();const a=this.n;for(this.piv=new Uint32Array(s),t=0;t<s;t++)this.piv[t]=t;this.pivsign=1;const o=new _d(s);for(i=0;i<a;i++){for(t=0;t<s;t++)o[t]=r[e.index(t,i)];for(t=0;t<s;t++){const s=Math.min(t,i);let a=0;for(n=0;n<s;n++){a+=r[e.index(t,n)]*o[n]}o[t]-=a,r[e.index(t,i)]=o[t]}let l=i;for(t=i+1;t<s;t++)Math.abs(o[t])>Math.abs(o[l])&&(l=t);if(l!==i){for(n=0;n<a;n++){const t=e.index(l,n),s=e.index(i,n),a=r[t];r[t]=r[s],r[s]=a}n=this.piv[l],this.piv[l]=this.piv[i],this.piv[i]=n,this.pivsign=-this.pivsign}if(i<s&&0!==r[this.matrix.index(i,i)])for(t=i+1;t<s;t++)r[e.index(t,i)]/=r[e.index(i,i)]}}isNonsingular(){for(let e=0;e<this.n;e++){const t=this.matrix.index(e,e);if(0===this.LU[t])return!1}return!0}getL(){const e=new Nd(this.m,this.n);for(let t=0;t<this.m;t++)for(let i=0;i<this.n;i++)e.entries[e.index(t,i)]=t>i?this.LU[this.matrix.index(t,i)]:t===i?1:0;return e}getU(){const e=new Nd(this.n,this.n);for(let t=0;t<this.n;t++)for(let i=0;i<this.n;i++)e.entries[e.index(t,i)]=t<=i?this.LU[this.matrix.index(t,i)]:0;return e}getPivot(){const e=new Uint32Array(this.m);for(let t=0;t<this.m;t++)e[t]=this.piv[t];return e}getDoublePivot(){const e=new _d(this.m);for(let t=0;t<this.m;t++)e[t]=this.piv[t];return e}det(){if(this.m!==this.n)throw new Error("Matrix must be square.");let e=this.pivsign;for(let t=0;t<this.n;t++)e*=this.LU[this.matrix.index(t,t)];return e}solve(e){let t,i,n;if(e.getRowDimension()!==this.m)throw new Error("Matrix row dimensions must agree.");if(!this.isNonsingular())throw new Error("Matrix is singular.");const r=e.getColumnDimension(),s=e.getArrayRowMatrix(this.piv,0,r-1);for(n=0;n<this.n;n++)for(t=n+1;t<this.n;t++)for(i=0;i<r;i++)s.entries[s.index(t,i)]-=s.entries[s.index(n,i)]*this.LU[this.matrix.index(t,n)];for(n=this.n-1;n>=0;n--){for(i=0;i<r;i++)s.entries[s.index(n,i)]/=this.LU[this.matrix.index(n,n)];for(t=0;t<n;t++)for(i=0;i<r;i++)s.entries[s.index(t,i)]-=s.entries[s.index(n,i)]*this.LU[this.matrix.index(t,n)]}return s}}rl.register("LUDecomposition",xd);const wd=xd,Td=window.Float64Array||Array;class Pd{constructor(e){this.matrix=e,this.QR=e.getArrayCopy();const t=this.QR;this.m=e.getRowDimension();const i=this.m;this.n=e.getColumnDimension();const n=this.n;let r,s,a;for(this.Rdiag=new Td(n),a=0;a<n;a++){let e=0;for(r=a;r<i;r++)e=Nd.hypot(e,t[this.matrix.index(r,a)]);if(0!==e){for(t[this.matrix.index(a,a)]<0&&(e=-e),r=a;r<i;r++)t[this.matrix.index(r,a)]/=e;for(t[this.matrix.index(a,a)]+=1,s=a+1;s<n;s++){let e=0;for(r=a;r<i;r++)e+=t[this.matrix.index(r,a)]*t[this.matrix.index(r,s)];for(e=-e/t[this.matrix.index(a,a)],r=a;r<i;r++)t[this.matrix.index(r,s)]+=e*t[this.matrix.index(r,a)]}}this.Rdiag[a]=-e}}isFullRank(){for(let e=0;e<this.n;e++)if(0===this.Rdiag[e])return!1;return!0}getH(){const e=new Nd(this.m,this.n);for(let t=0;t<this.m;t++)for(let i=0;i<this.n;i++)e.entries[e.index(t,i)]=t>=i?this.QR[this.matrix.index(t,i)]:0;return e}getR(){const e=new Nd(this.n,this.n);for(let t=0;t<this.n;t++)for(let i=0;i<this.n;i++)e.entries[e.index(t,i)]=t<i?this.QR[this.matrix.index(t,i)]:t===i?this.Rdiag[t]:0;return e}getQ(){let e,t,i;const n=new Nd(this.m,this.n);for(i=this.n-1;i>=0;i--){for(e=0;e<this.m;e++)n.entries[n.index(e,i)]=0;for(n.entries[n.index(i,i)]=1,t=i;t<this.n;t++)if(0!==this.QR[this.matrix.index(i,i)]){let r=0;for(e=i;e<this.m;e++)r+=this.QR[this.matrix.index(e,i)]*n.entries[n.index(e,t)];for(r=-r/this.QR[this.matrix.index(i,i)],e=i;e<this.m;e++)n.entries[n.index(e,t)]+=r*this.QR[this.matrix.index(e,i)]}}return n}solve(e){if(e.getRowDimension()!==this.m)throw new Error("Matrix row dimensions must agree.");if(!this.isFullRank())throw new Error("Matrix is rank deficient.");let t,i,n;const r=e.getColumnDimension(),s=e.getArrayCopy();for(n=0;n<this.n;n++)for(i=0;i<r;i++){let r=0;for(t=n;t<this.m;t++)r+=this.QR[this.matrix.index(t,n)]*s[e.index(t,i)];for(r=-r/this.QR[this.matrix.index(n,n)],t=n;t<this.m;t++)s[e.index(t,i)]+=r*this.QR[this.matrix.index(t,n)]}for(n=this.n-1;n>=0;n--){for(i=0;i<r;i++)s[e.index(n,i)]/=this.Rdiag[n];for(t=0;t<n;t++)for(i=0;i<r;i++)s[e.index(t,i)]-=s[e.index(n,i)]*this.QR[this.matrix.index(t,n)]}return new Nd(this.n,r,s,!0).getMatrix(0,this.n-1,0,r-1)}}rl.register("QRDecomposition",Pd);const Cd=Pd,Vd=window.Float64Array||Array;class Rd{constructor(e,t,i,n){this.m=e,this.n=t;const r=e*t;let s;if(this.size=r,n)this.entries=i;else if(i||(i=0),this.entries=new Vd(r),vd(i))for(s=0;s<r;s++)this.entries[s]=i[s];else for(s=0;s<r;s++)this.entries[s]=i}copy(){const e=new Rd(this.m,this.n);for(let t=0;t<this.size;t++)e.entries[t]=this.entries[t];return e}getArray(){return this.entries}getArrayCopy(){return new Vd(this.entries)}getRowDimension(){return this.m}getColumnDimension(){return this.n}index(e,t){return e*this.n+t}get(e,t){return this.entries[this.index(e,t)]}set(e,t,i){this.entries[this.index(e,t)]=i}getMatrix(e,t,i,n){const r=new Rd(t-e+1,n-i+1);for(let s=e;s<=t;s++)for(let t=i;t<=n;t++)r.entries[r.index(s-e,t-i)]=this.entries[this.index(s,t)];return r}getArrayRowMatrix(e,t,i){const n=new Rd(e.length,i-t+1);for(let r=0;r<e.length;r++)for(let s=t;s<=i;s++)n.entries[n.index(r,s-t)]=this.entries[this.index(e[r],s)];return n}transpose(e){e=e||new Rd(this.n,this.m);for(let t=0;t<this.m;t++)for(let i=0;i<this.n;i++)e.entries[e.index(i,t)]=this.entries[this.index(t,i)];return e}norm1(){let e=0;for(let t=0;t<this.n;t++){let i=0;for(let e=0;e<this.m;e++)i+=Math.abs(this.entries[this.index(e,t)]);e=Math.max(e,i)}return e}norm2(){return new Ld(this).norm2()}normInf(){let e=0;for(let t=0;t<this.m;t++){let i=0;for(let e=0;e<this.n;e++)i+=Math.abs(this.entries[this.index(t,e)]);e=Math.max(e,i)}return e}normF(){let e=0;for(let t=0;t<this.m;t++)for(let i=0;i<this.n;i++)e=Rd.hypot(e,this.entries[this.index(t,i)]);return e}uminus(){const e=new Rd(this.m,this.n);for(let t=0;t<this.m;t++)for(let i=0;i<this.n;i++)e.entries[e.index(t,i)]=-this.entries[this.index(t,i)];return e}plus(e){this.checkMatrixDimensions(e);const t=new Rd(this.m,this.n);for(let i=0;i<this.m;i++)for(let n=0;n<this.n;n++){const r=t.index(i,n);t.entries[r]=this.entries[r]+e.entries[r]}return t}plusEquals(e){this.checkMatrixDimensions(e);for(let t=0;t<this.m;t++)for(let i=0;i<this.n;i++){const n=this.index(t,i);this.entries[n]=this.entries[n]+e.entries[n]}return this}blendEquals(e,t){this.checkMatrixDimensions(e);for(let i=0;i<this.m;i++)for(let n=0;n<this.n;n++){const r=this.index(i,n),s=this.entries[r],a=e.entries[r];this.entries[r]=s+(a-s)*t}return this}minus(e){this.checkMatrixDimensions(e);const t=new Rd(this.m,this.n);for(let i=0;i<this.m;i++)for(let n=0;n<this.n;n++){const r=this.index(i,n);t.entries[r]=this.entries[r]-e.entries[r]}return t}minusEquals(e){this.checkMatrixDimensions(e);for(let t=0;t<this.m;t++)for(let i=0;i<this.n;i++){const n=this.index(t,i);this.entries[n]=this.entries[n]-e.entries[n]}return this}arrayTimes(e){this.checkMatrixDimensions(e);const t=new Rd(this.m,this.n);for(let i=0;i<this.m;i++)for(let n=0;n<this.n;n++){const r=t.index(i,n);t.entries[r]=this.entries[r]*e.entries[r]}return t}arrayTimesEquals(e){this.checkMatrixDimensions(e);for(let t=0;t<this.m;t++)for(let i=0;i<this.n;i++){const n=this.index(t,i);this.entries[n]=this.entries[n]*e.entries[n]}return this}arrayRightDivide(e){this.checkMatrixDimensions(e);const t=new Rd(this.m,this.n);for(let i=0;i<this.m;i++)for(let n=0;n<this.n;n++){const r=this.index(i,n);t.entries[r]=this.entries[r]/e.entries[r]}return t}arrayRightDivideEquals(e){this.checkMatrixDimensions(e);for(let t=0;t<this.m;t++)for(let i=0;i<this.n;i++){const n=this.index(t,i);this.entries[n]=this.entries[n]/e.entries[n]}return this}arrayLeftDivide(e){this.checkMatrixDimensions(e);const t=new Rd(this.m,this.n);for(let i=0;i<this.m;i++)for(let n=0;n<this.n;n++){const r=this.index(i,n);t.entries[r]=e.entries[r]/this.entries[r]}return t}arrayLeftDivideEquals(e){this.checkMatrixDimensions(e);for(let t=0;t<this.m;t++)for(let i=0;i<this.n;i++){const n=this.index(t,i);this.entries[n]=e.entries[n]/this.entries[n]}return this}times(e){let t,i,n,r,s,a;if(e.isMatrix){if(a=e,a.m!==this.n)throw new Error("Matrix inner dimensions must agree.");t=new Rd(this.m,a.n);const o=new Vd(this.n);for(n=0;n<a.n;n++){for(r=0;r<this.n;r++)o[r]=a.entries[a.index(r,n)];for(i=0;i<this.m;i++){for(s=0,r=0;r<this.n;r++)s+=this.entries[this.index(i,r)]*o[r];t.entries[t.index(i,n)]=s}}return t}for(s=e,t=new Rd(this.m,this.n),i=0;i<this.m;i++)for(n=0;n<this.n;n++)t.entries[t.index(i,n)]=s*this.entries[this.index(i,n)];return t}timesEquals(e){for(let t=0;t<this.m;t++)for(let i=0;i<this.n;i++){const n=this.index(t,i);this.entries[n]=e*this.entries[n]}return this}solve(e){return this.m===this.n?new wd(this).solve(e):new Cd(this).solve(e)}solveTranspose(e){return this.transpose().solve(e.transpose())}inverse(){return this.solve(Rd.identity(this.m,this.m))}det(){return new wd(this).det()}rank(){return new Ld(this).rank()}cond(){return new Ld(this).cond()}trace(){let e=0;for(let t=0;t<Math.min(this.m,this.n);t++)e+=this.entries[this.index(t,t)];return e}checkMatrixDimensions(e){if(e.m!==this.m||e.n!==this.n)throw new Error("Matrix dimensions must agree.")}toString(){let e="";e+=`dim: ${this.getRowDimension()}x${this.getColumnDimension()}\n`;for(let t=0;t<this.getRowDimension();t++){for(let i=0;i<this.getColumnDimension();i++)e+=this.get(t,i)+" ";e+="\n"}return e}extractVector2(e){return new al(this.get(0,e),this.get(1,e))}extractVector3(e){return new bl(this.get(0,e),this.get(1,e),this.get(2,e))}extractVector4(e){return new yl(this.get(0,e),this.get(1,e),this.get(2,e),this.get(3,e))}setVectors3(e){const t=e.length;for(let i=0;i<t;i++){const n=e[i];this.entries[i]=n.x,this.entries[i+t]=n.y,this.entries[i+2*t]=n.z}return this}static hypot(e,t){let i;return Math.abs(e)>Math.abs(t)?(i=t/e,i=Math.abs(e)*Math.sqrt(1+i*i)):0!==t?(i=e/t,i=Math.abs(t)*Math.sqrt(1+i*i)):i=0,i}static identity(e,t){const i=new Rd(e,t);for(let n=0;n<e;n++)for(let e=0;e<t;e++)i.entries[i.index(n,e)]=n===e?1:0;return i}static diagonalMatrix(e){const t=e.length,i=new Rd(t,t);for(let n=0;n<t;n++)i.entries[i.index(n,n)]=e[n];return i}static rowVector2(e){return new Rd(1,2,[e.x,e.y])}static rowVector3(e){return new Rd(1,3,[e.x,e.y,e.z])}static rowVector4(e){return new Rd(1,4,[e.x,e.y,e.z,e.w])}static rowVector(e){if(e.isVector2)return Rd.rowVector2(e);if(e.isVector3)return Rd.rowVector3(e);if(e.isVector4)return Rd.rowVector4(e);throw new Error("undetected type of vector: "+e.toString())}static columnVector2(e){return new Rd(2,1,[e.x,e.y])}static columnVector3(e){return new Rd(3,1,[e.x,e.y,e.z])}static columnVector4(e){return new Rd(4,1,[e.x,e.y,e.z,e.w])}static columnVector(e){if(e.isVector2)return Rd.columnVector2(e);if(e.isVector3)return Rd.columnVector3(e);if(e.isVector4)return Rd.columnVector4(e);throw new Error("undetected type of vector: "+e.toString())}static fromVectors2(e){const t=e.length,i=new Vd(2*t);for(let n=0;n<t;n++){const r=e[n];i[n]=r.x,i[n+t]=r.y}return new Rd(2,t,i,!0)}static fromVectors3(e){const t=e.length,i=new Vd(3*t);for(let n=0;n<t;n++){const r=e[n];i[n]=r.x,i[n+t]=r.y,i[n+2*t]=r.z}return new Rd(3,t,i,!0)}static fromVectors4(e){const t=e.length,i=new Vd(4*t);for(let n=0;n<t;n++){const r=e[n];i[n]=r.x,i[n+t]=r.y,i[n+2*t]=r.z,i[n+3*t]=r.w}return new Rd(4,t,i,!0)}}Rd.prototype.isMatrix=!0,rl.register("Matrix",Rd);const Nd=Rd,Md=window.Float64Array||Array;class kd{constructor(e){this.matrix=e;const t=e,i=t.getArrayCopy();this.m=t.getRowDimension(),this.n=t.getColumnDimension();const n=this.m,r=this.n,s=Math.min,a=Math.max,o=Math.pow,l=Math.abs,h=s(n,r);this.s=new Md(s(n+1,r));const u=this.s;this.U=new Md(n*h);const c=this.U;this.V=new Md(r*r);const d=this.V,p=new Md(r),m=new Md(n);let g,f,y,E,v,A,b;const S=Nd.hypot,_=s(n-1,r),x=a(0,s(r-2,n));for(y=0;y<a(_,x);y++){if(y<_){for(u[y]=0,g=y;g<n;g++)u[y]=S(u[y],i[g*r+y]);if(0!==u[y]){for(i[y*r+y]<0&&(u[y]=-u[y]),g=y;g<n;g++)i[g*r+y]/=u[y];i[y*r+y]+=1}u[y]=-u[y]}for(f=y+1;f<r;f++){if(y<_&&0!==u[y]){for(E=0,g=y;g<n;g++)E+=i[g*r+y]*i[g*r+f];for(E=-E/i[y*r+y],g=y;g<n;g++)i[g*r+f]+=E*i[g*r+y]}p[f]=i[y*r+f]}if(y<_)for(g=y;g<n;g++)c[g*h+y]=i[g*r+y];if(y<x){for(p[y]=0,g=y+1;g<r;g++)p[y]=S(p[y],p[g]);if(0!==p[y]){for(p[y+1]<0&&(p[y]=-p[y]),g=y+1;g<r;g++)p[g]/=p[y];p[y+1]+=1}if(p[y]=-p[y],y+1<n&&0!==p[y]){for(g=y+1;g<n;g++)m[g]=0;for(f=y+1;f<r;f++)for(g=y+1;g<n;g++)m[g]+=p[f]*i[g*r+f];for(f=y+1;f<r;f++)for(E=-p[f]/p[y+1],g=y+1;g<n;g++)i[g*r+f]+=E*m[g]}for(g=y+1;g<r;g++)d[g*r+y]=p[g]}}let w=s(r,n+1);for(_<r&&(u[_]=i[_*r+_]),n<w&&(u[w-1]=0),x+1<w&&(p[x]=i[x*r+w-1]),p[w-1]=0,f=_;f<h;f++){for(g=0;g<n;g++)c[g*h+f]=0;c[f*h+f]=1}for(y=_-1;y>=0;y--)if(0!==u[y]){for(f=y+1;f<h;f++){for(E=0,g=y;g<n;g++)E+=c[g*h+y]*c[g*h+f];for(E=-E/c[y*h+y],g=y;g<n;g++)c[g*h+f]+=E*c[g*h+y]}for(g=y;g<n;g++)c[g*h+y]=-c[g*h+y];for(c[y*h+y]=1+c[y*h+y],g=0;g<y-1;g++)c[g*h+y]=0}else{for(g=0;g<n;g++)c[g*h+y]=0;c[y*h+y]=1}for(y=r-1;y>=0;y--){if(y<x&&0!==p[y])for(f=y+1;f<h;f++){for(E=0,g=y+1;g<r;g++)E+=d[g*r+y]*d[g*r+f];for(E=-E/d[(y+1)*r+y],g=y+1;g<r;g++)d[g*r+f]+=E*d[g*r+y]}for(g=0;g<r;g++)d[g*r+y]=0;d[y*r+y]=1}const T=w-1;let P=0;const C=o(2,-52),V=o(2,-966);for(;w>0;){let e;if(P>500)break;for(y=w-2;y>=-1&&-1!==y;y--)if(l(p[y])<=V+C*(l(u[y])+l(u[y+1]))){p[y]=0;break}if(y===w-2)e=4;else{let t;for(t=w-1;t>=y&&t!==y;t--)if(E=(t!==w?l(p[t]):0)+(t!==y+1?l(p[t-1]):0),l(u[t])<=V+C*E){u[t]=0;break}t===y?e=3:t===w-1?e=1:(e=2,y=t)}switch(y++,e){case 1:for(v=p[w-2],p[w-2]=0,f=w-2;f>=y;f--)for(E=S(u[f],v),A=u[f]/E,b=v/E,u[f]=E,f!==y&&(v=-b*p[f-1],p[f-1]=A*p[f-1]),g=0;g<r;g++)E=A*d[g*r+f]+b*d[g*r+w-1],d[g*r+w-1]=-b*d[g*r+f]+A*d[g*r+w-1],d[g*r+f]=E;break;case 2:for(v=p[y-1],p[y-1]=0,f=y;f<w;f++)for(E=S(u[f],v),A=u[f]/E,b=v/E,u[f]=E,v=-b*p[f],p[f]=A*p[f],g=0;g<n;g++)E=A*c[g*h+f]+b*c[g*h+y-1],c[g*h+y-1]=-b*c[g*h+f]+A*c[g*h+y-1],c[g*h+f]=E;break;case 3:{const e=a(a(a(a(l(u[w-1]),l(u[w-2])),l(p[w-2])),l(u[y])),l(p[y])),t=u[w-1]/e,i=u[w-2]/e,s=p[w-2]/e,o=u[y]/e,m=p[y]/e,_=((i+t)*(i-t)+s*s)/2,x=t*s*(t*s);let T=0;0===_&&0===x||(T=Math.sqrt(_*_+x),_<0&&(T=-T),T=x/(_+T)),v=(o+t)*(o-t)+T;let C=o*m;for(f=y;f<w-1;f++){for(E=S(v,C),A=v/E,b=C/E,f!==y&&(p[f-1]=E),v=A*u[f]+b*p[f],p[f]=A*p[f]-b*u[f],C=b*u[f+1],u[f+1]=A*u[f+1],g=0;g<r;g++)E=A*d[g*r+f]+b*d[g*r+f+1],d[g*r+f+1]=-b*d[g*r+f]+A*d[g*r+f+1],d[g*r+f]=E;if(E=S(v,C),A=v/E,b=C/E,u[f]=E,v=A*p[f]+b*u[f+1],u[f+1]=-b*p[f]+A*u[f+1],C=b*p[f+1],p[f+1]=A*p[f+1],f<n-1)for(g=0;g<n;g++)E=A*c[g*h+f]+b*c[g*h+f+1],c[g*h+f+1]=-b*c[g*h+f]+A*c[g*h+f+1],c[g*h+f]=E}p[w-2]=v,P+=1}break;case 4:if(u[y]<=0)for(u[y]=u[y]<0?-u[y]:0,g=0;g<=T;g++)d[g*r+y]=-d[g*r+y];for(;y<T&&!(u[y]>=u[y+1]);){if(E=u[y],u[y]=u[y+1],u[y+1]=E,y<r-1)for(g=0;g<r;g++)E=d[g*r+y+1],d[g*r+y+1]=d[g*r+y],d[g*r+y]=E;if(y<n-1)for(g=0;g<n;g++)E=c[g*h+y+1],c[g*h+y+1]=c[g*h+y],c[g*h+y]=E;y++}P=0,w--;break;default:throw new Error("invalid kase: "+e)}}}getU(){return new Nd(this.m,Math.min(this.m+1,this.n),this.U,!0)}getV(){return new Nd(this.n,this.n,this.V,!0)}getSingularValues(){return this.s}getS(){const e=new Nd(this.n,this.n);for(let t=0;t<this.n;t++){for(let i=0;i<this.n;i++)e.entries[e.index(t,i)]=0;e.entries[e.index(t,t)]=this.s[t]}return e}norm2(){return this.s[0]}cond(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}rank(){const e=Math.pow(2,-23),t=Math.max(this.m,this.n)*this.s[0]*e;let i=0;for(let n=0;n<this.s.length;n++)this.s[n]>t&&i++;return i}static pseudoinverse(e){const t=new kd(e),i=Nd.diagonalMatrix(t.getSingularValues().map(e=>Math.abs(e)<1e-300?0:1/e));return t.getV().times(i).times(t.getU().transpose())}}rl.register("SingularValueDecomposition",kd);const Ld=kd;class Id{constructor(e,t){this.real=e,this.imaginary=t}copy(e){return e?e.set(this):new Id(this.real,this.imaginary)}phase(){return Math.atan2(this.imaginary,this.real)}getMagnitude(){return Math.sqrt(this.magnitudeSquared)}get magnitude(){return this.getMagnitude()}getMagnitudeSquared(){return this.real*this.real+this.imaginary*this.imaginary}get magnitudeSquared(){return this.getMagnitudeSquared()}getArgument(){return Math.atan2(this.imaginary,this.real)}get argument(){return this.getArgument()}equals(e){return this.real===e.real&&this.imaginary===e.imaginary}equalsEpsilon(e,t){return t||(t=0),Math.max(Math.abs(this.real-e.real),Math.abs(this.imaginary-e.imaginary))<=t}plus(e){return new Id(this.real+e.real,this.imaginary+e.imaginary)}minus(e){return new Id(this.real-e.real,this.imaginary-e.imaginary)}times(e){return new Id(this.real*e.real-this.imaginary*e.imaginary,this.real*e.imaginary+this.imaginary*e.real)}dividedBy(e){const t=e.magnitudeSquared;return new Id((this.real*e.real+this.imaginary*e.imaginary)/t,(this.imaginary*e.real-this.real*e.imaginary)/t)}negated(){return new Id(-this.real,-this.imaginary)}sqrtOf(){const e=this.magnitude;return new Id(Math.sqrt((e+this.real)/2),(this.imaginary>=0?1:-1)*Math.sqrt((e-this.real)/2))}powerByReal(e){const t=Math.pow(this.magnitude,e),i=e*this.phase();return new Id(t*Math.cos(i),t*Math.sin(i))}sinOf(){return new Id(Math.sin(this.real)*fl.cosh(this.imaginary),Math.cos(this.real)*fl.sinh(this.imaginary))}cosOf(){return new Id(Math.cos(this.real)*fl.cosh(this.imaginary),-Math.sin(this.real)*fl.sinh(this.imaginary))}squared(){return this.times(this)}conjugated(){return new Id(this.real,-this.imaginary)}exponentiated(){return Id.createPolar(Math.exp(this.real),this.imaginary)}setRealImaginary(e,t){return this.real=e,this.imaginary=t,this}setReal(e){return this.real=e,this}setImaginary(e){return this.imaginary=e,this}set(e){return this.setRealImaginary(e.real,e.imaginary)}setPolar(e,t){return this.setRealImaginary(e*Math.cos(t),e*Math.sin(t))}add(e){return this.setRealImaginary(this.real+e.real,this.imaginary+e.imaginary)}subtract(e){return this.setRealImaginary(this.real-e.real,this.imaginary-e.imaginary)}multiply(e){return this.setRealImaginary(this.real*e.real-this.imaginary*e.imaginary,this.real*e.imaginary+this.imaginary*e.real)}divide(e){const t=e.magnitudeSquared;return this.setRealImaginary((this.real*e.real+this.imaginary*e.imaginary)/t,(this.imaginary*e.real-this.real*e.imaginary)/t)}negate(){return this.setRealImaginary(-this.real,-this.imaginary)}exponentiate(){return this.setPolar(Math.exp(this.real),this.imaginary)}square(){return this.multiply(this)}sqrt(){const e=this.magnitude;return this.setRealImaginary(Math.sqrt((e+this.real)/2),(this.imaginary>=0?1:-1)*Math.sqrt((e-this.real)/2))}sin(){return this.setRealImaginary(Math.sin(this.real)*fl.cosh(this.imaginary),Math.cos(this.real)*fl.sinh(this.imaginary))}cos(){return this.setRealImaginary(Math.cos(this.real)*fl.cosh(this.imaginary),-Math.sin(this.real)*fl.sinh(this.imaginary))}conjugate(){return this.setRealImaginary(this.real,-this.imaginary)}getCubeRoots(){const e=this.argument/3,t=this.magnitude,i=Id.real(Math.cbrt(t));return[i.times(Id.imaginary(e).exponentiate()),i.times(Id.imaginary(e+2*Math.PI/3).exponentiate()),i.times(Id.imaginary(e-2*Math.PI/3).exponentiate())]}toString(){return`Complex(${this.real}, ${this.imaginary})`}static real(e){return new Id(e,0)}static imaginary(e){return new Id(0,e)}static createPolar(e,t){return new Id(e*Math.cos(t),e*Math.sin(t))}static solveLinearRoots(e,t){return e.equals(Id.ZERO)?t.equals(Id.ZERO)?null:[]:[t.dividedBy(e).negate()]}static solveQuadraticRoots(e,t,i){if(e.equals(Id.ZERO))return Id.solveLinearRoots(t,i);const n=Id.real(2).multiply(e),r=t.times(t),s=Id.real(4).multiply(e).multiply(i),a=r.subtract(s).sqrt();return[a.minus(t).divide(n),a.negated().subtract(t).divide(n)]}static solveCubicRoots(e,t,i,n){if(e.equals(Id.ZERO))return Id.solveQuadraticRoots(t,i,n);const r=e.times(Id.real(3)).negate(),s=e.times(e),a=t.times(t),o=a.times(t),l=i.times(i),h=l.times(i),u=e.times(t).times(i),c=a,d=e.times(i).times(Id.real(3)),p=o.times(Id.real(2)).add(s.times(n).multiply(Id.real(27))),m=u.times(Id.real(9));if(c.equals(d)&&p.equals(m)){const e=t.divide(r);return[e,e,e]}const g=c.minus(d),f=p.minus(m),y=u.times(n).multiply(Id.real(18)).add(a.times(l)),E=o.times(n).multiply(Id.real(4)).add(h.times(e).multiply(Id.real(4))).add(s.times(n).multiply(n).multiply(Id.real(27)));if(y.equals(E)){const r=u.times(Id.real(4)).subtract(o.plus(s.times(n).multiply(Id.real(9)))).divide(e.times(g)),a=e.times(n).multiply(Id.real(9)).subtract(t.times(i)).divide(g.times(Id.real(2)));return[r,a,a]}let v;return v=c.equals(d)?f:f.plus(f.times(f).subtract(g.times(g).multiply(g).multiply(Id.real(4))).sqrt()).divide(Id.real(2)),v.getCubeRoots().map(e=>t.plus(e).add(g.dividedBy(e)).divide(r))}}rl.register("Complex",Id),Id.ZERO=new Id(0,0),Id.ONE=new Id(1,0),Id.I=Id.imaginary(1);const Bd=Id;class Dd{constructor(e,t){this.position=e,this.direction=t}shifted(e){return new Dd(this.pointAtDistance(e),this.direction)}pointAtDistance(e){return this.position.plus(this.direction.timesScalar(e))}toString(){return`${this.position.toString()} => ${this.direction.toString()}`}}rl.register("Ray2",Dd);const Od=(e,t,i,n)=>e.times(n).minus(t.times(i)),qd=e=>[e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8]],Yd=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return _.sortBy([e.slice(0,3),e.slice(3,6),e.slice(6,9)],e=>-(e[0].magnitude+e[1].magnitude+(t?e[2].magnitude:0)))[0]},Hd=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Yd(qd(e),t)},Gd=e=>{const t=(e=>{const t=e[0],i=e[1],n=e[2],r=e[3],s=e[4],a=e[5],o=e[6],l=e[7],h=e[8];return[Od(s,a,l,h),Od(i,n,l,h).negate(),Od(i,n,s,a),Od(r,a,o,h).negate(),Od(t,n,o,h),Od(t,n,r,a).negate(),Od(r,s,o,l),Od(t,i,o,l).negate(),Od(t,i,r,s)]})(e),i=Yd(t);return[Bd.ZERO,i[2],i[1].negated(),i[2].negated(),Bd.ZERO,i[0],i[1],i[0].negated(),Bd.ZERO]},Fd=e=>{const t=Gd(e),i=((e,t)=>{const i=e[0],n=e[1],r=e[3],s=e[4],a=t[0],o=t[1],l=t[3],h=t[4],u=o.times(l).minus(a.times(h)),c=h.negated().times(i).plus(l.times(n)).plus(o.times(r)).minus(a.times(s)),d=n.times(r).minus(i.times(s)),p=Bd.solveQuadraticRoots(u,c,d);return null===p?null:p[0]})(e,t);return null===i?e:[e[0].plus(i.times(t[0])),e[1].plus(i.times(t[1])),e[2].plus(i.times(t[2])),e[3].plus(i.times(t[3])),e[4].plus(i.times(t[4])),e[5].plus(i.times(t[5])),e[6].plus(i.times(t[6])),e[7].plus(i.times(t[7])),e[8].plus(i.times(t[8]))]},zd=e=>{const t=[],i=e[0],n=e[1].times(Bd.real(2)),r=e[4],s=e[2].times(Bd.real(2)),a=e[5].times(Bd.real(2)),o=e[8];let l=[];const h=new Bd(-2.51653525696959,1.5292850284402),u=r,c=n.times(h).plus(a),d=i.times(h).times(h).plus(s.times(h)).plus(o),p=Bd.solveQuadraticRoots(u,c,d);if(p&&p.length>=2)l=[[h,p[0]],[h,p[1]]];else{const e=i,t=n.times(h).plus(s),u=r.times(h).times(h).plus(a.times(h)).plus(o),c=Bd.solveQuadraticRoots(e,t,u);if(c&&c.length>=2)l=[[c[0],h],[c[1],h]];else if(p&&1===p.length)l=[[h,p[0]]];else{if(!c||1!==c.length)throw new Error("Implement more advanced initialization to find two solutions");l=[[c[0],h]]}}return l.forEach(e=>{const o=e[0].real,l=e[1].real,h=e[0].imaginary,u=e[1].imaginary,c=i.real,d=n.real,p=r.real,m=s.real,g=a.real,f=i.imaginary,y=n.imaginary,E=r.imaginary,v=s.imaginary,A=a.imaginary,b=new yl(-2*f*h-y*u+m+2*c*o+d*l,-y*h-2*E*u+g+d*o+2*p*l,-v-2*h*c-u*d-2*f*o-y*l,-A-h*d-2*u*p-y*o-2*E*l),S=new yl(v+2*h*c+u*d+2*f*o+y*l,A+h*d+2*u*p+y*o+2*E*l,-2*f*h-y*u+m+2*c*o+d*l,-y*h-2*E*u+g+d*o+2*p*l),_=new yl(6.1951068548253,-1.159268950386,.1602918829294,3.205818692048202),x=new yl(-5.420628549296924,-15.2069583028685,.159590602048868,5.10688288040682),w=(e,t)=>t.timesScalar(e.dot(t)/t.dot(t)),T=b,P=S.minus(w(S,T)),C=_.minus(w(_,T)).minus(w(_,P)),V=x.minus(w(x,T)).minus(w(x,P)).minus(w(x,C)),R=new Nd(2,2,[C.z,V.z,C.w,V.w]),N=new Ld(R).getSingularValues();let M=null;if(Math.abs(h)<1e-10&&Math.abs(u)<1e-10)M=new al(o,l);else{if(Math.abs(N[1])>1e-10){const e=R.solve(new Nd(2,1,[-h,-u])).extractVector2(0);M=new al(o+e.x*C.z+e.y*V.z,l+e.x*C.w+e.y*V.w)}else if(Math.abs(N[0])>1e-10){const e=Math.abs(C.z)+Math.abs(C.w)>Math.abs(V.z)+Math.abs(V.w)?C:V,t=new al(e.z,e.w),i=new al(h,u).dot(t)/t.dot(t),n=new yl(o,l,h,u).minus(e.timesScalar(i));Math.abs(n.z)<1e-8&&Math.abs(n.w)<1e-8&&(M=new al(n.x,n.y))}else M=null;if(M)if(Math.abs(N[1])>1e-10)t.push(M);else if(Math.abs(N[0])>1e-10){const e=Math.abs(C.z)+Math.abs(C.w)>Math.abs(V.z)+Math.abs(V.w),i=e?V:C,n=e?C:V,r=Math.abs(n.z)>Math.abs(n.w)?i.z/n.z:i.w/n.w,s=n.timesScalar(r).minus(i);t.push(new Dd(M,new al(s.x,s.y).normalized()))}}}),t},Ud=e=>{const t=Fd(e);return[Yd(t),Hd(t)]},Wd=(e,t)=>{const i=e[0],n=e[1],r=e[2],s=t[0],a=t[1],o=t[2],l=s.times(n).minus(i.times(a));if(l.equalsEpsilon(Bd.ZERO,1e-8))return null;{const e=a.times(r).minus(n.times(o)).dividedBy(l);let t;if(n.equalsEpsilon(Bd.ZERO,1e-8)){if(a.equalsEpsilon(Bd.ZERO,1e-8))return null;t=s.negated().times(e).minus(o).dividedBy(a)}else t=i.negated().times(e).minus(r).dividedBy(n);return Math.abs(e.imaginary)<1e-8&&Math.abs(t.imaginary)<1e-8?new al(e.real,t.real):null}},Xd=(e,t)=>{const i=e.m00(),n=e.m01(),r=e.m02(),s=e.m10(),a=e.m11(),o=e.m12(),l=e.m20(),h=e.m21(),u=e.m22(),c=t.m00(),d=t.m01(),p=t.m02(),m=t.m10(),g=t.m11(),f=t.m12(),y=t.m20(),E=t.m21(),v=t.m22(),A=-r*a*l+n*o*l+r*s*h-i*o*h-n*s*u+i*a*u,b=-s*u*d+s*h*p+r*h*m-n*u*m-r*l*g+i*u*g+n*l*f-i*h*f+r*s*E+o*(-h*c+l*d+n*y-i*E)-n*s*v+a*(u*c-l*p-r*y+i*v),S=-u*d*m+h*p*m+u*c*g-l*p*g-h*c*f+l*d*f+o*d*y-a*p*y-r*g*y+n*f*y-o*c*E+s*p*E+r*m*E-i*f*E+a*c*v-s*d*v-n*m*v+i*g*v,x=-p*g*y+d*f*y+p*m*E-c*f*E-d*m*v+c*g*v,w=Bd.solveCubicRoots(Bd.real(A),Bd.real(b),Bd.real(S),Bd.real(x));if(!w||0===w.length)return{degenerateConicMatrices:[],intersectionCollections:[],points:[],lines:[]};const T=_.uniqWith(w,(e,t)=>e.equals(t)).map(e=>[Bd.real(i).multiply(e).add(Bd.real(c)),Bd.real(n).multiply(e).add(Bd.real(d)),Bd.real(r).multiply(e).add(Bd.real(p)),Bd.real(s).multiply(e).add(Bd.real(m)),Bd.real(a).multiply(e).add(Bd.real(g)),Bd.real(o).multiply(e).add(Bd.real(f)),Bd.real(l).multiply(e).add(Bd.real(y)),Bd.real(h).multiply(e).add(Bd.real(E)),Bd.real(u).multiply(e).add(Bd.real(v))]);console.log("determinant magnitudes",T.map(e=>(e=>{const t=e[0],i=e[1],n=e[2],r=e[3],s=e[4],a=e[5],o=e[6],l=e[7],h=e[8];return t.times(s).times(h).plus(i.times(a).times(o)).plus(n.times(r).times(l)).minus(n.times(s).times(o)).minus(i.times(r).times(h)).minus(t.times(a).times(l))})(e).magnitude));const P=[],C=T.map(Ud);console.log(C);const V=T.map(zd);console.log(V);for(let _=0;_<C.length;_++){const e=C[_],t=Wd(e[0],e[1]);t&&P.push(t);for(let i=_+1;i<C.length;i++){const t=C[i],n=[Wd(e[0],t[0]),Wd(e[0],t[1]),Wd(e[1],t[0]),Wd(e[1],t[1])];for(let e=0;e<4;e++){const t=n[e];t&&P.push(t)}}}return{points:P,degenerateConicMatrices:T,lines:_.flatten(C),intersectionCollections:V}};function jd(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}hd.register("intersectConicMatrices",Xd);const Qd={parse:function(e,t){const i={svgPath:function(){let e,t,i,r,s,a;s=n,a=n,e=[],t=W();for(;null!==t;)e.push(t),t=W();if(null!==e)if(t=o(),t=null!==t?t:"",null!==t){for(i=[],r=W();null!==r;)i.push(r),r=W();null!==i?e=[e,t,i]:(e=null,n=a)}else e=null,n=a;else e=null,n=a;null!==e&&(l=e[1],e=l||[]);var l;null===e&&(n=s);return e},movetoDrawtoCommandGroups:o,movetoDrawtoCommandGroup:l,drawtoCommands:h,drawtoCommand:u,moveto:c,movetoArgumentSequence:d,closepath:p,lineto:m,linetoArgumentSequence:g,horizontalLineto:f,horizontalLinetoArgumentSequence:y,verticalLineto:E,verticalLinetoArgumentSequence:v,curveto:A,curvetoArgumentSequence:b,curvetoArgument:S,smoothCurveto:_,smoothCurvetoArgumentSequence:x,smoothCurvetoArgument:w,quadraticBezierCurveto:T,quadraticBezierCurvetoArgumentSequence:P,quadraticBezierCurvetoArgument:C,smoothQuadraticBezierCurveto:V,smoothQuadraticBezierCurvetoArgumentSequence:R,ellipticalArc:N,ellipticalArcArgumentSequence:M,ellipticalArcArgument:k,coordinatePair:L,nonnegativeNumber:I,number:B,flag:D,commaWsp:O,comma:q,floatingPointConstant:Y,fractionalConstant:H,exponent:G,sign:F,digitSequence:z,digit:U,wsp:W};if(void 0!==t){if(void 0===i[t])throw new Error("Invalid rule name: "+jd(t)+".")}else t="svgPath";let n=0;let r=0,s=[];function a(e){n<r||(n>r&&(r=n,s=[]),s.push(e))}function o(){let e,t,i,r,s;if(r=n,s=n,e=l(),null!==e){for(t=[],i=W();null!==i;)t.push(i),i=W();null!==t?(i=o(),null!==i?e=[e,t,i]:(e=null,n=s)):(e=null,n=s)}else e=null,n=s;var a,h;return null!==e&&(a=e[0],h=e[2],e=a.concat(h)),null===e&&(n=r),null===e&&(r=n,e=l(),null!==e&&(e=function(e,t){return t}(0,e)),null===e&&(n=r)),e}function l(){let e,t,i,r,s;if(r=n,s=n,e=c(),null!==e){for(t=[],i=W();null!==i;)t.push(i),i=W();null!==t?(i=h(),i=null!==i?i:"",null!==i?e=[e,t,i]:(e=null,n=s)):(e=null,n=s)}else e=null,n=s;var a,o;return null!==e&&(a=e[0],e=(o=e[2]).length?a.concat(o):a),null===e&&(n=r),e}function h(){let e,t,i,r,s;if(r=n,s=n,e=u(),null!==e){for(t=[],i=W();null!==i;)t.push(i),i=W();null!==t?(i=h(),null!==i?e=[e,t,i]:(e=null,n=s)):(e=null,n=s)}else e=null,n=s;var a,o;return null!==e&&(a=e[0],o=e[2],e=a.concat(o)),null===e&&(n=r),null===e&&(r=n,e=u(),null!==e&&(e=function(e,t){return t}(0,e)),null===e&&(n=r)),e}function u(){let e;return e=p(),null===e&&(e=m(),null===e&&(e=f(),null===e&&(e=E(),null===e&&(e=A(),null===e&&(e=_(),null===e&&(e=T(),null===e&&(e=V(),null===e&&(e=N())))))))),e}function c(){let t,i,r,s,o;if(s=n,o=n,77===e.charCodeAt(n)?(t="M",n++):(t=null,a('"M"')),null!==t){for(i=[],r=W();null!==r;)i.push(r),r=W();null!==i?(r=d(),null!==r?t=[t,i,r]:(t=null,n=o)):(t=null,n=o)}else t=null,n=o;if(null!==t&&(t=X(t[2],!1)),null===t&&(n=s),null===t){if(s=n,o=n,109===e.charCodeAt(n)?(t="m",n++):(t=null,a('"m"')),null!==t){for(i=[],r=W();null!==r;)i.push(r),r=W();null!==i?(r=d(),null!==r?t=[t,i,r]:(t=null,n=o)):(t=null,n=o)}else t=null,n=o;null!==t&&(t=function(e,t){return X(t,!0)}(0,t[2])),null===t&&(n=s)}return t}function d(){let e,t,i,r,s;var a,o;return r=n,s=n,e=L(),null!==e?(t=O(),t=null!==t?t:"",null!==t?(i=g(),null!==i?e=[e,t,i]:(e=null,n=s)):(e=null,n=s)):(e=null,n=s),null!==e&&(a=e[0],o=e[2],e=[a].concat(o)),null===e&&(n=r),null===e&&(r=n,e=L(),null!==e&&(e=function(e,t){return[t]}(0,e)),null===e&&(n=r)),e}function p(){let t,i;return i=n,90===e.charCodeAt(n)?(t="Z",n++):(t=null,a('"Z"')),null===t&&(122===e.charCodeAt(n)?(t="z",n++):(t=null,a('"z"'))),null!==t&&(t={cmd:"close"}),null===t&&(n=i),t}function m(){let t,i,r,s,o;if(s=n,o=n,76===e.charCodeAt(n)?(t="L",n++):(t=null,a('"L"')),null!==t){for(i=[],r=W();null!==r;)i.push(r),r=W();null!==i?(r=g(),null!==r?t=[t,i,r]:(t=null,n=o)):(t=null,n=o)}else t=null,n=o;if(null!==t&&(t=t[2].map(e=>({cmd:"lineTo",args:[e.x,e.y]}))),null===t&&(n=s),null===t){if(s=n,o=n,108===e.charCodeAt(n)?(t="l",n++):(t=null,a('"l"')),null!==t){for(i=[],r=W();null!==r;)i.push(r),r=W();null!==i?(r=g(),null!==r?t=[t,i,r]:(t=null,n=o)):(t=null,n=o)}else t=null,n=o;null!==t&&(t=function(e,t){return t.map(e=>({cmd:"lineToRelative",args:[e.x,e.y]}))}(0,t[2])),null===t&&(n=s)}return t}function g(){let e,t,i,r,s;var a,o;return r=n,s=n,e=L(),null!==e?(t=O(),t=null!==t?t:"",null!==t?(i=g(),null!==i?e=[e,t,i]:(e=null,n=s)):(e=null,n=s)):(e=null,n=s),null!==e&&(a=e[0],o=e[2],e=[a].concat(o)),null===e&&(n=r),null===e&&(r=n,e=L(),null!==e&&(e=function(e,t){return[t]}(0,e)),null===e&&(n=r)),e}function f(){let t,i,r,s,o;if(s=n,o=n,72===e.charCodeAt(n)?(t="H",n++):(t=null,a('"H"')),null!==t){for(i=[],r=W();null!==r;)i.push(r),r=W();null!==i?(r=y(),null!==r?t=[t,i,r]:(t=null,n=o)):(t=null,n=o)}else t=null,n=o;if(null!==t&&(t=t[2].map(e=>({cmd:"horizontalLineTo",args:[e]}))),null===t&&(n=s),null===t){if(s=n,o=n,104===e.charCodeAt(n)?(t="h",n++):(t=null,a('"h"')),null!==t){for(i=[],r=W();null!==r;)i.push(r),r=W();null!==i?(r=y(),null!==r?t=[t,i,r]:(t=null,n=o)):(t=null,n=o)}else t=null,n=o;null!==t&&(t=function(e,t){return t.map(e=>({cmd:"horizontalLineToRelative",args:[e]}))}(0,t[2])),null===t&&(n=s)}return t}function y(){let e,t,i,r,s;var a,o;return r=n,s=n,e=B(),null!==e?(t=O(),t=null!==t?t:"",null!==t?(i=y(),null!==i?e=[e,t,i]:(e=null,n=s)):(e=null,n=s)):(e=null,n=s),null!==e&&(a=e[0],o=e[2],e=[a].concat(o)),null===e&&(n=r),null===e&&(r=n,e=B(),null!==e&&(e=function(e,t){return[t]}(0,e)),null===e&&(n=r)),e}function E(){let t,i,r,s,o;if(s=n,o=n,86===e.charCodeAt(n)?(t="V",n++):(t=null,a('"V"')),null!==t){for(i=[],r=W();null!==r;)i.push(r),r=W();null!==i?(r=v(),null!==r?t=[t,i,r]:(t=null,n=o)):(t=null,n=o)}else t=null,n=o;if(null!==t&&(t=t[2].map(e=>({cmd:"verticalLineTo",args:[e]}))),null===t&&(n=s),null===t){if(s=n,o=n,118===e.charCodeAt(n)?(t="v",n++):(t=null,a('"v"')),null!==t){for(i=[],r=W();null!==r;)i.push(r),r=W();null!==i?(r=v(),null!==r?t=[t,i,r]:(t=null,n=o)):(t=null,n=o)}else t=null,n=o;null!==t&&(t=function(e,t){return t.map(e=>({cmd:"verticalLineToRelative",args:[e]}))}(0,t[2])),null===t&&(n=s)}return t}function v(){let e,t,i,r,s;var a,o;return r=n,s=n,e=B(),null!==e?(t=O(),t=null!==t?t:"",null!==t?(i=v(),null!==i?e=[e,t,i]:(e=null,n=s)):(e=null,n=s)):(e=null,n=s),null!==e&&(a=e[0],o=e[2],e=[a].concat(o)),null===e&&(n=r),null===e&&(r=n,e=B(),null!==e&&(e=function(e,t){return[t]}(0,e)),null===e&&(n=r)),e}function A(){let t,i,r,s,o;if(s=n,o=n,67===e.charCodeAt(n)?(t="C",n++):(t=null,a('"C"')),null!==t){for(i=[],r=W();null!==r;)i.push(r),r=W();null!==i?(r=b(),null!==r?t=[t,i,r]:(t=null,n=o)):(t=null,n=o)}else t=null,n=o;if(null!==t&&(t=t[2].map(e=>({cmd:"cubicCurveTo",args:e}))),null===t&&(n=s),null===t){if(s=n,o=n,99===e.charCodeAt(n)?(t="c",n++):(t=null,a('"c"')),null!==t){for(i=[],r=W();null!==r;)i.push(r),r=W();null!==i?(r=b(),null!==r?t=[t,i,r]:(t=null,n=o)):(t=null,n=o)}else t=null,n=o;null!==t&&(t=function(e,t){return t.map(e=>({cmd:"cubicCurveToRelative",args:e}))}(0,t[2])),null===t&&(n=s)}return t}function b(){let e,t,i,r,s;var a,o;return r=n,s=n,e=S(),null!==e?(t=O(),t=null!==t?t:"",null!==t?(i=b(),null!==i?e=[e,t,i]:(e=null,n=s)):(e=null,n=s)):(e=null,n=s),null!==e&&(a=e[0],o=e[2],e=[a].concat(o)),null===e&&(n=r),null===e&&(r=n,e=S(),null!==e&&(e=function(e,t){return[t]}(0,e)),null===e&&(n=r)),e}function S(){let e,t,i,r,s,a,o;var l,h,u;return a=n,o=n,e=L(),null!==e?(t=O(),t=null!==t?t:"",null!==t?(i=L(),null!==i?(r=O(),r=null!==r?r:"",null!==r?(s=L(),null!==s?e=[e,t,i,r,s]:(e=null,n=o)):(e=null,n=o)):(e=null,n=o)):(e=null,n=o)):(e=null,n=o),null!==e&&(l=e[0],h=e[2],u=e[4],e=[l.x,l.y,h.x,h.y,u.x,u.y]),null===e&&(n=a),e}function _(){let t,i,r,s,o;if(s=n,o=n,83===e.charCodeAt(n)?(t="S",n++):(t=null,a('"S"')),null!==t){for(i=[],r=W();null!==r;)i.push(r),r=W();null!==i?(r=x(),null!==r?t=[t,i,r]:(t=null,n=o)):(t=null,n=o)}else t=null,n=o;if(null!==t&&(t=t[2].map(e=>({cmd:"smoothCubicCurveTo",args:e}))),null===t&&(n=s),null===t){if(s=n,o=n,115===e.charCodeAt(n)?(t="s",n++):(t=null,a('"s"')),null!==t){for(i=[],r=W();null!==r;)i.push(r),r=W();null!==i?(r=x(),null!==r?t=[t,i,r]:(t=null,n=o)):(t=null,n=o)}else t=null,n=o;null!==t&&(t=function(e,t){return t.map(e=>({cmd:"smoothCubicCurveToRelative",args:e}))}(0,t[2])),null===t&&(n=s)}return t}function x(){let e,t,i,r,s;var a,o;return r=n,s=n,e=w(),null!==e?(t=O(),t=null!==t?t:"",null!==t?(i=x(),null!==i?e=[e,t,i]:(e=null,n=s)):(e=null,n=s)):(e=null,n=s),null!==e&&(a=e[0],o=e[2],e=[a].concat(o)),null===e&&(n=r),null===e&&(r=n,e=w(),null!==e&&(e=function(e,t){return[t]}(0,e)),null===e&&(n=r)),e}function w(){let e,t,i,r,s;var a,o;return r=n,s=n,e=L(),null!==e?(t=O(),t=null!==t?t:"",null!==t?(i=L(),null!==i?e=[e,t,i]:(e=null,n=s)):(e=null,n=s)):(e=null,n=s),null!==e&&(a=e[0],o=e[2],e=[a.x,a.y,o.x,o.y]),null===e&&(n=r),e}function T(){let t,i,r,s,o;if(s=n,o=n,81===e.charCodeAt(n)?(t="Q",n++):(t=null,a('"Q"')),null!==t){for(i=[],r=W();null!==r;)i.push(r),r=W();null!==i?(r=P(),null!==r?t=[t,i,r]:(t=null,n=o)):(t=null,n=o)}else t=null,n=o;if(null!==t&&(t=t[2].map(e=>({cmd:"quadraticCurveTo",args:e}))),null===t&&(n=s),null===t){if(s=n,o=n,113===e.charCodeAt(n)?(t="q",n++):(t=null,a('"q"')),null!==t){for(i=[],r=W();null!==r;)i.push(r),r=W();null!==i?(r=P(),null!==r?t=[t,i,r]:(t=null,n=o)):(t=null,n=o)}else t=null,n=o;null!==t&&(t=function(e,t){return t.map(e=>({cmd:"quadraticCurveToRelative",args:e}))}(0,t[2])),null===t&&(n=s)}return t}function P(){let e,t,i,r,s;var a,o;return r=n,s=n,e=C(),null!==e?(t=O(),t=null!==t?t:"",null!==t?(i=P(),null!==i?e=[e,t,i]:(e=null,n=s)):(e=null,n=s)):(e=null,n=s),null!==e&&(a=e[0],o=e[2],e=[a].concat(o)),null===e&&(n=r),null===e&&(r=n,e=C(),null!==e&&(e=function(e,t){return[t]}(0,e)),null===e&&(n=r)),e}function C(){let e,t,i,r,s;var a,o;return r=n,s=n,e=L(),null!==e?(t=O(),t=null!==t?t:"",null!==t?(i=L(),null!==i?e=[e,t,i]:(e=null,n=s)):(e=null,n=s)):(e=null,n=s),null!==e&&(a=e[0],o=e[2],e=[a.x,a.y,o.x,o.y]),null===e&&(n=r),e}function V(){let t,i,r,s,o;if(s=n,o=n,84===e.charCodeAt(n)?(t="T",n++):(t=null,a('"T"')),null!==t){for(i=[],r=W();null!==r;)i.push(r),r=W();null!==i?(r=R(),null!==r?t=[t,i,r]:(t=null,n=o)):(t=null,n=o)}else t=null,n=o;if(null!==t&&(t=t[2].map(e=>({cmd:"smoothQuadraticCurveTo",args:[e.x,e.y]}))),null===t&&(n=s),null===t){if(s=n,o=n,116===e.charCodeAt(n)?(t="t",n++):(t=null,a('"t"')),null!==t){for(i=[],r=W();null!==r;)i.push(r),r=W();null!==i?(r=R(),null!==r?t=[t,i,r]:(t=null,n=o)):(t=null,n=o)}else t=null,n=o;null!==t&&(t=function(e,t){return t.map(e=>({cmd:"smoothQuadraticCurveToRelative",args:[e.x,e.y]}))}(0,t[2])),null===t&&(n=s)}return t}function R(){let e,t,i,r,s;var a,o;return r=n,s=n,e=L(),null!==e?(t=O(),t=null!==t?t:"",null!==t?(i=R(),null!==i?e=[e,t,i]:(e=null,n=s)):(e=null,n=s)):(e=null,n=s),null!==e&&(a=e[0],o=e[2],e=[a].concat(o)),null===e&&(n=r),null===e&&(r=n,e=L(),null!==e&&(e=function(e,t){return[t]}(0,e)),null===e&&(n=r)),e}function N(){let t,i,r,s,o;if(s=n,o=n,65===e.charCodeAt(n)?(t="A",n++):(t=null,a('"A"')),null!==t){for(i=[],r=W();null!==r;)i.push(r),r=W();null!==i?(r=M(),null!==r?t=[t,i,r]:(t=null,n=o)):(t=null,n=o)}else t=null,n=o;if(null!==t&&(t=t[2].map(e=>(e[2]*=Math.PI/180,{cmd:"ellipticalArcTo",args:e}))),null===t&&(n=s),null===t){if(s=n,o=n,97===e.charCodeAt(n)?(t="a",n++):(t=null,a('"a"')),null!==t){for(i=[],r=W();null!==r;)i.push(r),r=W();null!==i?(r=M(),null!==r?t=[t,i,r]:(t=null,n=o)):(t=null,n=o)}else t=null,n=o;null!==t&&(t=function(e,t){return t.map(e=>(e[2]*=Math.PI/180,{cmd:"ellipticalArcToRelative",args:e}))}(0,t[2])),null===t&&(n=s)}return t}function M(){let e,t,i,r,s;var a,o;return r=n,s=n,e=k(),null!==e?(t=O(),t=null!==t?t:"",null!==t?(i=M(),null!==i?e=[e,t,i]:(e=null,n=s)):(e=null,n=s)):(e=null,n=s),null!==e&&(a=e[0],o=e[2],e=[a].concat(o)),null===e&&(n=r),null===e&&(r=n,e=k(),null!==e&&(e=function(e,t){return[t]}(0,e)),null===e&&(n=r)),e}function k(){let e,t,i,r,s,a,o,l,h,u,c,d,p;var m,g,f,y,E,v;return d=n,p=n,e=I(),null!==e?(t=O(),t=null!==t?t:"",null!==t?(i=I(),null!==i?(r=O(),r=null!==r?r:"",null!==r?(s=B(),null!==s?(a=O(),null!==a?(o=D(),null!==o?(l=O(),l=null!==l?l:"",null!==l?(h=D(),null!==h?(u=O(),u=null!==u?u:"",null!==u?(c=L(),null!==c?e=[e,t,i,r,s,a,o,l,h,u,c]:(e=null,n=p)):(e=null,n=p)):(e=null,n=p)):(e=null,n=p)):(e=null,n=p)):(e=null,n=p)):(e=null,n=p)):(e=null,n=p)):(e=null,n=p)):(e=null,n=p)):(e=null,n=p),null!==e&&(m=e[0],g=e[2],f=e[4],y=e[6],E=e[8],v=e[10],e=[m,g,f,y,E,v.x,v.y]),null===e&&(n=d),e}function L(){let e,t,i,r,s;var a,o;return r=n,s=n,e=B(),null!==e?(t=O(),t=null!==t?t:"",null!==t?(i=B(),null!==i?e=[e,t,i]:(e=null,n=s)):(e=null,n=s)):(e=null,n=s),null!==e&&(a=e[0],o=e[2],e={x:a,y:o}),null===e&&(n=r),e}function I(){let e,t;return t=n,e=Y(),null!==e&&(e=parseFloat(e)),null===e&&(n=t),null===e&&(t=n,e=z(),null!==e&&(e=function(e,t){return Number(t)}(0,e)),null===e&&(n=t)),e}function B(){let e,t,i,r;var s,a;return i=n,r=n,e=F(),e=null!==e?e:"",null!==e?(t=Y(),null!==t?e=[e,t]:(e=null,n=r)):(e=null,n=r),null!==e&&(s=e[0],a=e[1],e=parseFloat(s+a)),null===e&&(n=i),null===e&&(i=n,r=n,e=F(),e=null!==e?e:"",null!==e?(t=z(),null!==t?e=[e,t]:(e=null,n=r)):(e=null,n=r),null!==e&&(e=function(e,t,i){return Number(t+i)}(0,e[0],e[1])),null===e&&(n=i)),e}function D(){let t,i;return i=n,48===e.charCodeAt(n)?(t="0",n++):(t=null,a('"0"')),null!==t&&(t=!1),null===t&&(n=i),null===t&&(i=n,49===e.charCodeAt(n)?(t="1",n++):(t=null,a('"1"')),null!==t&&(t=!0),null===t&&(n=i)),t}function O(){let e,t,i,r,s;if(s=n,t=W(),null!==t)for(e=[];null!==t;)e.push(t),t=W();else e=null;if(null!==e)if(t=q(),t=null!==t?t:"",null!==t){for(i=[],r=W();null!==r;)i.push(r),r=W();null!==i?e=[e,t,i]:(e=null,n=s)}else e=null,n=s;else e=null,n=s;if(null===e)if(s=n,e=q(),null!==e){for(t=[],i=W();null!==i;)t.push(i),i=W();null!==t?e=[e,t]:(e=null,n=s)}else e=null,n=s;return e}function q(){let t;return 44===e.charCodeAt(n)?(t=",",n++):(t=null,a('","')),t}function Y(){let e,t,i,r;var s,a;return i=n,r=n,e=H(),null!==e?(t=G(),t=null!==t?t:"",null!==t?e=[e,t]:(e=null,n=r)):(e=null,n=r),null!==e&&(s=e[0],a=e[1],e=s+a),null===e&&(n=i),null===e&&(i=n,r=n,e=z(),null!==e?(t=G(),null!==t?e=[e,t]:(e=null,n=r)):(e=null,n=r),null!==e&&(e=function(e,t,i){return t+i}(0,e[0],e[1])),null===e&&(n=i)),e}function H(){let t,i,r,s,o;var l,h;return s=n,o=n,t=z(),t=null!==t?t:"",null!==t?(46===e.charCodeAt(n)?(i=".",n++):(i=null,a('"."')),null!==i?(r=z(),null!==r?t=[t,i,r]:(t=null,n=o)):(t=null,n=o)):(t=null,n=o),null!==t&&(l=t[0],h=t[2],t=l+"."+h),null===t&&(n=s),null===t&&(s=n,o=n,t=z(),null!==t?(46===e.charCodeAt(n)?(i=".",n++):(i=null,a('"."')),null!==i?t=[t,i]:(t=null,n=o)):(t=null,n=o),null!==t&&(t=function(e,t){return t}(0,t[0])),null===t&&(n=s)),t}function G(){let t,i,r,s,o;var l,h,u;return s=n,o=n,101===e.charCodeAt(n)?(t="e",n++):(t=null,a('"e"')),null===t&&(69===e.charCodeAt(n)?(t="E",n++):(t=null,a('"E"'))),null!==t?(i=F(),i=null!==i?i:"",null!==i?(r=z(),null!==r?t=[t,i,r]:(t=null,n=o)):(t=null,n=o)):(t=null,n=o),null!==t&&(l=t[0],h=t[1],u=t[2],t=l+h+u),null===t&&(n=s),t}function F(){let t;return 43===e.charCodeAt(n)?(t="+",n++):(t=null,a('"+"')),null===t&&(45===e.charCodeAt(n)?(t="-",n++):(t=null,a('"-"'))),t}function z(){let e,t,i,r;var s,a;return i=n,r=n,e=U(),null!==e?(t=z(),null!==t?e=[e,t]:(e=null,n=r)):(e=null,n=r),null!==e&&(s=e[0],a=e[1],e=s+a),null===e&&(n=i),null===e&&(e=U()),e}function U(){let t;return/^[0-9]/.test(e.charAt(n))?(t=e.charAt(n),n++):(t=null,a("[0-9]")),t}function W(){let t;return 32===e.charCodeAt(n)?(t=" ",n++):(t=null,a('" "')),null===t&&(9===e.charCodeAt(n)?(t="\t",n++):(t=null,a('"\\t"')),null===t&&(13===e.charCodeAt(n)?(t="\r",n++):(t=null,a('"\\r"')),null===t&&(10===e.charCodeAt(n)?(t="\n",n++):(t=null,a('"\\n"'))))),t}function X(e,t){const i=[{cmd:t?"moveToRelative":"moveTo",args:[e[0].x,e[0].y]}];if(e.length>1)for(let n=1;n<e.length;n++)i.push({cmd:t?"lineToRelative":"lineTo",args:[e[n].x,e[n].y]});return i}const j=i[t]();if(null===j||n!==e.length){const t=Math.max(n,r),i=t<e.length?e.charAt(t):null,a=function(){let t=1,i=1,s=!1;for(let a=0;a<Math.max(n,r);a++){const n=e.charAt(a);"\n"===n?(s||t++,i=1,s=!1):"\r"===n||"\u2028"===n||"\u2029"===n?(t++,i=1,s=!0):(i++,s=!1)}return{line:t,column:i}}();throw new this.SyntaxError(function(e){e.sort();let t=null;const i=[];for(let n=0;n<e.length;n++)e[n]!==t&&(i.push(e[n]),t=e[n]);return i}(s),i,t,a.line,a.column)}return j},toSource:function(){return this._source},SyntaxError:function(e,t,i,n,r){this.name="SyntaxError",this.expected=e,this.found=t,this.message=function(e,t){let i,n;switch(e.length){case 0:i="end of input";break;case 1:i=e[0];break;default:i=e.slice(0,e.length-1).join(", ")+" or "+e[e.length-1]}return n=t?jd(t):"end of input","Expected "+i+" but "+n+" found."}(e,t),this.offset=i,this.line=n,this.column=r}};Qd.SyntaxError.prototype=Error.prototype,hd.register("svgPath",Qd);const Kd=hd.svgPath;class Zd{constructor(e){e=Po({seed:null},e),this.seed=null,this.seedrandom=null,this.setSeed(e.seed),this.numberOfCalls=0,Zd.allRandomInstances.add(this)}dispose(){Zd.allRandomInstances.delete(this)}getSeed(){return this.seed}nextBoolean(){return this.nextDouble()>=.5}nextInt(e){const t=this.nextDouble()*e;return Math.floor(t)}nextIntBetween(e,t){const i=t-e;return this.nextInt(i+1)+e}sample(e){return e[this.nextIntBetween(0,e.length-1)]}shuffle(e){let t=-1;const i=new Array(e.length);return _.forEach(e,e=>{const n=this.nextIntBetween(0,++t);i[t]=i[n],i[n]=e}),i}nextDouble(){return this.numberOfCalls++,this.seedrandom()}nextDoubleBetween(e,t){const i=e+this.nextDouble()*(t-e);return i}nextGaussian(){return fl.boxMullerTransform(0,1,this)}nextDoubleInRange(e){return e.min<e.max?this.nextDoubleBetween(e.min,e.max):e.min}nextPointInBounds(e){return new al(this.nextDoubleBetween(e.minX,e.maxX),this.nextDoubleBetween(e.minY,e.maxY))}setSeed(e){"number"==typeof e||(e=Math.random()),this.seed=e,this.seedrandom=Math.seedrandom?new Math.seedrandom(""+e):()=>Math.random()}sampleProbabilities(e){const t=_.sum(e)*this.nextDouble();let i=0;for(let n=0;n<e.length;n++)if(i+=e[n],i>=t)return n;return e.length-1}}Zd.allRandomInstances=new Set,Zd.isNormalized=e=>{},rl.register("Random",Zd);const Jd=Zd,$d=new Jd({seed:_.hasIn(window,"phet.chipper.queryParameters.randomSeed")?window.phet.chipper.queryParameters.randomSeed:null});rl.register("dotRandom",$d);const ep=$d,tp=_.hasIn(window,"phet.chipper.queryParameters")&&phet.chipper.queryParameters.listenerOrder;_.hasIn(window,"phet.chipper.queryParameters")&&phet.chipper.queryParameters.listenerLimit;let ip=null;if(tp&&tp.startsWith("random")){const e=tp.match(/random(?:%28|\()(\d+)(?:%29|\))/),t=e?Number(e[1]):ep.nextInt(1e6);ip=new Jd({seed:t}),console.log("listenerOrder random seed: "+ip.seed)}class np{constructor(e,t){e&&(this.onBeforeNotify=e),t&&(this.hasListenerOrderDependencies=t),this.listeners=new Set,this.emitContexts=[]}dispose(){this.removeAllListeners()}emit(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];if(this.onBeforeNotify&&this.onBeforeNotify.apply(null,t),this.listeners.size>0){const e={index:0};this.emitContexts.push(e);for(const i of this.listeners)if(i(...t),e.index++,e.listenerArray)break;if(e.listenerArray)for(let i=e.index;i<e.listenerArray.length;i++)e.listenerArray[i](...t);this.emitContexts.pop()}}addListener(e){this.guardListeners(),this.listeners.add(e),this.changeCount&&this.changeCount(1)}removeListener(e){this.guardListeners(),this.listeners.delete(e),this.changeCount&&this.changeCount(-1)}removeAllListeners(){const e=this.listeners.size;this.guardListeners(),this.listeners.clear(),this.changeCount&&this.changeCount(-e)}guardListeners(){for(let e=this.emitContexts.length-1;e>=0&&!this.emitContexts[e].listenerArray;e--)this.emitContexts[e].listenerArray=Array.from(this.listeners)}hasListener(e){return this.listeners.has(e)}hasListeners(){return this.listeners.size>0}getListenerCount(){return this.listeners.size}forEachListener(e){this.listeners.forEach(e)}}ko.register("TinyEmitter",np);class rp{constructor(){this.invalidationEmitter=new np}areStrokedBoundsDilated(){return Math.abs(this.startTangent.x*this.startTangent.y)<1e-7&&Math.abs(this.endTangent.x*this.endTangent.y)<1e-7}getBoundsWithTransform(e){return this.transformed(e).getBounds()}slice(e,t){let i=this;return t<1&&(i=i.subdivided(t)[0]),e>0&&(i=i.subdivided(fl.linear(0,t,0,1,e))[1]),i}subdivisions(e){let t=this;const i=[];for(let n=0;n<e.length;n++){const r=e[n],s=t.subdivided(r);i.push(s[0]),t=s[1];for(let t=n+1;t<e.length;t++)e[t]=fl.linear(r,1,0,1,e[t])}return i.push(t),i}subdividedIntoMonotone(){return this.subdivisions(this.getInteriorExtremaTs())}isSufficientlyFlat(e,t){const i=this.start,n=this.positionAt(.5),r=this.end;return rp.isSufficientlyFlat(e,t,i,n,r)}getArcLength(e,t,i){if(e=void 0===e?1e-10:e,t=void 0===t?1e-8:t,(i=void 0===i?15:i)<=0||this.isSufficientlyFlat(e,t))return this.start.distance(this.end);{const n=this.subdivided(.5);return n[0].getArcLength(e,t,i-1)+n[1].getArcLength(e,t,i-1)}}getDashValues(e,t,i,n){const r=this,s=[];let a=0;const o=_.sum(e);(t%=o)<0&&(t+=o);let l=0,h=0,u=!0;function c(){l=(l+1)%e.length,u=!u}for(;t>0;)t>=e[l]?(t-=e[l],c()):(h=t,t=0);const d=u;return function t(o,u,d,p,m){const g=(o+u)/2,f=r.positionAt(g);if(m>14||rp.isSufficientlyFlat(i,n,d,f,p)){const t=d.distance(f)+f.distance(p);a+=t;let i=t;for(;h+i>=e[l];){const n=fl.linear(0,t,o,u,t-i+e[l]-h);s.push(n),i-=e[l]-h,h=0,c()}h+=i}else t(o,g,d,f,m+1),t(g,u,f,p,m+1)}(0,1,this.start,this.end,0),{values:s,arcLength:a,initiallyInside:d}}toPiecewiseLinearSegments(e,t,i,n,r,s){t=void 0===t?e.minLevels:t,i=void 0===i?e.maxLevels:i,n=n||[];const a=e.pointMap||_.identity;r=r||a(this.start),s=s||a(this.end);const o=a(this.positionAt(.5));let l=0===i;if(!l&&t<=0&&(l=this.isSufficientlyFlat(null===e.distanceEpsilon||void 0===e.distanceEpsilon?Number.POSITIVE_INFINITY:e.distanceEpsilon,null===e.curveEpsilon||void 0===e.curveEpsilon?Number.POSITIVE_INFINITY:e.curveEpsilon)),l)n.push(new op(r,s));else{const a=this.subdivided(.5);a[0].toPiecewiseLinearSegments(e,t-1,i-1,n,r,o),a[1].toPiecewiseLinearSegments(e,t-1,i-1,n,o,s)}return n}toPiecewiseLinearOrArcSegments(e){const t=Vo()({minLevels:2,maxLevels:7,curvatureThreshold:.02,errorThreshold:10,errorPoints:[.25,.75]},e),i=[];return this.toPiecewiseLinearOrArcRecursion(t,t.minLevels,t.maxLevels,i,0,1,this.positionAt(0),this.positionAt(1),this.curvatureAt(0),this.curvatureAt(1)),i}toPiecewiseLinearOrArcRecursion(e,t,i,n,r,s,a,o,l,h){const u=(r+s)/2,c=this.positionAt(u),d=this.curvatureAt(u);if(i<=0||t<=0&&Math.abs(l-d)+Math.abs(d-h)<2*e.curvatureThreshold){const t=bp.createFromPoints(a,c,o);let i=!1;if(t instanceof bp){const n=t.radius*t.radius;for(let a=0;a<e.errorPoints.length;a++){const o=e.errorPoints[a],l=this.positionAt(r*(1-o)+s*o);if(Math.abs(l.distanceSquared(t.center)-n)>e.errorThreshold){i=!0;break}}}if(!i)return void n.push(t)}this.toPiecewiseLinearOrArcRecursion(e,t-1,i-1,n,r,u,a,c,l,d),this.toPiecewiseLinearOrArcRecursion(e,t-1,i-1,n,u,s,c,o,d,h)}toShape(){return new Ip([new Rp([this])])}getClosestPoints(e){return rp.closestToPoint([this],e,1e-7)}static closestToPoint(e,t,i){const n=i*i;let r=[],s=[],a=Number.POSITIVE_INFINITY,o=!1;for(_.each(e,e=>{if(e instanceof op){const i=e.explicitClosestToPoint(t);_.each(i,e=>{e.distanceSquared<a?(s=[e],a=e.distanceSquared):e.distanceSquared===a&&s.push(e)})}else{const i=[0].concat(e.getInteriorExtremaTs()).concat([1]);for(let n=0;n<i.length-1;n++){const o=i[n],l=i[n+1],h=e.positionAt(o),u=e.positionAt(l),c=Zl.point(h).addPoint(u),d=c.minimumDistanceToPointSquared(t);if(d<=a){const i=c.maximumDistanceToPointSquared(t);i<a&&(a=i,s=[]),r.push({ta:o,tb:l,pa:h,pb:u,segment:e,bounds:c,min:d,max:i})}}}});r.length&&!o;){const e=r;r=[],o=!0;for(const i of e){if(i.min>a)continue;o&&i.pa.distanceSquared(i.pb)>n&&(o=!1);const e=(i.ta+i.tb)/2,l=i.segment.positionAt(e),h=Zl.point(i.pa).addPoint(l),u=Zl.point(i.pb).addPoint(l),c=h.minimumDistanceToPointSquared(t),d=u.minimumDistanceToPointSquared(t);if(c<=a){const n=h.maximumDistanceToPointSquared(t);n<a&&(a=n,s=[]),r.push({ta:i.ta,tb:e,pa:i.pa,pb:l,segment:i.segment,bounds:h,min:c,max:n})}if(d<=a){const n=u.maximumDistanceToPointSquared(t);n<a&&(a=n,s=[]),r.push({ta:e,tb:i.tb,pa:l,pb:i.pb,segment:i.segment,bounds:u,min:d,max:n})}}}return _.each(r,e=>{const i=(e.ta+e.tb)/2,n=e.segment.positionAt(i);s.push({segment:e.segment,t:i,closestPoint:n,distanceSquared:t.distanceSquared(n)})}),s}static polynomialGetOverlapCubic(e,t,i,n,r,s,a,o){if(0===o)return rp.polynomialGetOverlapQuadratic(e,t,i,r,s,a);const l=Math.sign(n/o)*Math.pow(Math.abs(n/o),1/3);return 0===l?null:{a:l,b:(i-l*l*a)/(3*l*l*o)}}static polynomialGetOverlapQuadratic(e,t,i,n,r,s){if(0===s)return rp.polynomialGetOverlapLinear(e,t,n,r);if(i/s<0)return null;const a=Math.sqrt(i/s);return 0===a?null:{a:a,b:(t-a*r)/(2*a*s)}}static polynomialGetOverlapLinear(e,t,i,n){if(0===n)return e===i||null;const r=t/n;return 0===r?null:{a:r,b:(e-i)/n}}static intersect(e,t){if(op&&e instanceof op&&t instanceof op)return op.intersect(e,t);if(op&&e instanceof op)return op.intersectOther(e,t);if(op&&t instanceof op)return op.intersectOther(t,e).map(sp);if(bp&&e instanceof bp&&t instanceof bp)return bp.intersect(e,t);if(Pp&&e instanceof Pp&&t instanceof Pp)return Pp.intersect(e,t);if(cp&&vp&&(e instanceof cp||e instanceof vp)&&(t instanceof cp||t instanceof vp)){const i=e instanceof vp?e:e.degreeElevated(),n=t instanceof vp?t:t.degreeElevated(),r=new paper.Curve(i.start.x,i.start.y,i.control1.x,i.control1.y,i.control2.x,i.control2.y,i.end.x,i.end.y),s=new paper.Curve(n.start.x,n.start.y,n.control1.x,n.control1.y,n.control2.x,n.control2.y,n.end.x,n.end.y);return r.getIntersections(s).map(e=>{const t=new al(e.point.x,e.point.y);return new gd(t,e.time,e.intersection.time)})}return im.intersect(e,t)}static deserialize(e){return hd[e.type].deserialize(e)}static isSufficientlyFlat(e,t,i,n,r){return!(fl.distToSegmentSquared(n,i,r)/i.distanceSquared(r)>t)&&!(fl.distToSegmentSquared(n,i,r)>e)}static filterClosestToPointResult(e){if(0===e.length)return[];const t=_.minBy(e,e=>e.distanceSquared).distanceSquared;return _.uniqWith(e.filter(e=>Math.abs(e.distanceSquared-t)<1e-11),(e,t)=>e.closestPoint.distanceSquared(t.closestPoint)<1e-11)}}function sp(e){return e.getSwapped()}hd.register("Segment",rp);const ap=new al(0,0);class op extends rp{constructor(e,t){super(),this._start=e,this._end=t,this.invalidate()}setStart(e){return this._start.equals(e)||(this._start=e,this.invalidate()),this}set start(e){this.setStart(e)}get start(){return this.getStart()}getStart(){return this._start}setEnd(e){return this._end.equals(e)||(this._end=e,this.invalidate()),this}set end(e){this.setEnd(e)}get end(){return this.getEnd()}getEnd(){return this._end}positionAt(e){return this._start.plus(this._end.minus(this._start).times(e))}tangentAt(e){return this.getStartTangent()}curvatureAt(e){return 0}subdivided(e){if(0===e||1===e)return[this];const t=this.positionAt(e);return[new op(this._start,t),new op(t,this._end)]}invalidate(){this._tangent=null,this._bounds=null,this._svgPathFragment=null,this.invalidationEmitter.emit()}getStartTangent(){return null===this._tangent&&(this._tangent=this._end.minus(this._start).normalized()),this._tangent}get startTangent(){return this.getStartTangent()}getEndTangent(){return this.getStartTangent()}get endTangent(){return this.getEndTangent()}getBounds(){return null===this._bounds&&(this._bounds=Zl.NOTHING.copy().addPoint(this._start).addPoint(this._end)),this._bounds}get bounds(){return this.getBounds()}getBoundsWithTransform(e){const t=Zl.NOTHING.copy();return t.addPoint(e.multiplyVector2(ap.set(this._start))),t.addPoint(e.multiplyVector2(ap.set(this._end))),t}getNondegenerateSegments(){return this._start.equals(this._end)?[]:[this]}getSVGPathFragment(){return this._svgPathFragment||(this._svgPathFragment=`L ${yd(this._end.x)} ${yd(this._end.y)}`),this._svgPathFragment}strokeLeft(e){const t=this.getEndTangent().perpendicular.negated().times(e/2);return[new op(this._start.plus(t),this._end.plus(t))]}strokeRight(e){const t=this.getStartTangent().perpendicular.times(e/2);return[new op(this._end.plus(t),this._start.plus(t))]}getInteriorExtremaTs(){return[]}intersection(e){const t=[],i=this._start,n=this._end.minus(i);if(0===n.magnitudeSquared)return t;const r=e.direction.y*n.x-e.direction.x*n.y;if(0===r)return t;const s=(e.direction.x*(i.y-e.position.y)-e.direction.y*(i.x-e.position.x))/r;if(s<0||s>=1)return t;const a=(n.x*(i.y-e.position.y)-n.y*(i.x-e.position.x))/r;if(a<1e-8)return t;const o=n.perpendicular,l=i.plus(n.times(s)),h=(o.dot(e.direction)>0?o.negated():o).normalized(),u=e.direction.perpendicular.dot(n)<0?1:-1;return t.push(new md(a,l,h,u,s)),t}windingIntersection(e){const t=this.intersection(e);return t.length?t[0].wind:0}writeToContext(e){e.lineTo(this._end.x,this._end.y)}transformed(e){return new op(e.timesVector2(this._start),e.timesVector2(this._end))}explicitClosestToPoint(e){const t=this._end.minus(this._start);let i=e.minus(this._start).dot(t)/t.magnitudeSquared;i=fl.clamp(i,0,1);const n=this.positionAt(i);return[{segment:this,t:i,closestPoint:n,distanceSquared:e.distanceSquared(n)}]}getSignedAreaFragment(){return.5*(this._start.x*this._end.y-this._start.y*this._end.x)}reparameterized(e,t){return new op(this.positionAt(t),this.positionAt(e+t))}reversed(){return new op(this._end,this._start)}polarToCartesian(e){return this._start.x===this._end.x?[new op(al.createPolar(this._start.y,this._start.x),al.createPolar(this._end.y,this._end.x))]:this._start.y===this._end.y?[new bp(al.ZERO,this._start.y,this._start.x,this._end.x,this._start.x>this._end.x)]:this.toPiecewiseLinearSegments(e)}getArcLength(){return this.start.distance(this.end)}toPiecewiseLinearOrArcSegments(){return[this]}serialize(){return{type:"Line",startX:this._start.x,startY:this._start.y,endX:this._end.x,endY:this._end.y}}getOverlaps(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e instanceof op?op.getOverlaps(this,e):null}getClosestPoints(e){const t=this._end.minus(this._start),i=t.normalized(),n=e.minus(this._start).dot(i),r=fl.clamp(n/t.magnitude,0,1),s=this.positionAt(r);return[{segment:this,t:r,closestPoint:s,distanceSquared:s.distanceSquared(e)}]}static deserialize(e){return new op(new al(e.startX,e.startY),new al(e.endX,e.endY))}static getOverlaps(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-6;const n=[],r=e._start.x,s=-1*e._start.x+e._end.x,a=e._start.y,o=-1*e._start.y+e._end.y,l=t._start.x,h=-1*t._start.x+t._end.x,u=t._start.y,c=-1*t._start.y+t._end.y,d=Math.abs(Math.max(e._start.x,e._end.x,t._start.x,t._end.x)-Math.min(e._start.x,e._end.x,t._start.x,t._end.x)),p=Math.abs(Math.max(e._start.y,e._end.y,t._start.y,t._end.y)-Math.min(e._start.y,e._end.y,t._start.y,t._end.y)),m=rp.polynomialGetOverlapLinear(r,s,l,h),g=rp.polynomialGetOverlapLinear(a,o,u,c);let f;if(f=d>p?null===m||!0===m?g:m:null===g||!0===g?m:g,null===f||!0===f)return n;const y=f.a,E=f.b,v=l+E*h-r,A=y*h-s,b=u+E*c-a,S=y*c-o;if(Math.abs(v)>i||Math.abs(A+v)>i||Math.abs(b)>i||Math.abs(S+b)>i)return n;const _=y+E;return E>1&&_>1||E<0&&_<0?n:[new pd(y,E)]}static intersect(e,t){const i=fl.lineSegmentIntersection(e.start.x,e.start.y,e.end.x,e.end.y,t.start.x,t.start.y,t.end.x,t.end.y);if(null!==i){const n=e.explicitClosestToPoint(i)[0].t,r=t.explicitClosestToPoint(i)[0].t;return[new gd(i,n,r)]}return[]}static intersectOther(e,t){const i=e.end.minus(e.start),n=i.magnitude,r=new Dd(e.start,i.normalize()),s=t.intersection(r),a=[];for(let o=0;o<s.length;o++){const e=s[o],t=e.distance/n;t>1e-8&&t<1-1e-8&&a.push(new gd(e.point,t,e.t))}return a}}hd.register("Line",op);const lp=fl.solveQuadraticRootsReal,hp=fl.arePointsCollinear;function up(e){return e>=0&&e<=1}class cp extends rp{constructor(e,t,i){super(),this._start=e,this._control=t,this._end=i,this.invalidate()}setStart(e){return this._start.equals(e)||(this._start=e,this.invalidate()),this}set start(e){this.setStart(e)}get start(){return this.getStart()}getStart(){return this._start}setControl(e){return this._control.equals(e)||(this._control=e,this.invalidate()),this}set control(e){this.setControl(e)}get control(){return this.getControl()}getControl(){return this._control}setEnd(e){return this._end.equals(e)||(this._end=e,this.invalidate()),this}set end(e){this.setEnd(e)}get end(){return this.getEnd()}getEnd(){return this._end}positionAt(e){const t=1-e;return this._start.times(t*t).plus(this._control.times(2*t*e)).plus(this._end.times(e*e))}tangentAt(e){return this._control.minus(this._start).times(2*(1-e)).plus(this._end.minus(this._control).times(2*e))}curvatureAt(e){if(Math.abs(e-.5)>.5-1e-7){const t=e<.5,i=t?this._start:this._end,n=this._control,r=t?this._end:this._start,s=n.minus(i),a=s.magnitude;return(t?-1:1)*s.perpendicular.normalized().dot(r.minus(n))*(this.degree-1)/(this.degree*a*a)}return this.subdivided(e)[0].curvatureAt(1)}subdivided(e){if(0===e||1===e)return[this];const t=this._start.blend(this._control,e),i=this._control.blend(this._end,e),n=t.blend(i,e);return[new cp(this._start,t,n),new cp(n,i,this._end)]}invalidate(){this._startTangent=null,this._endTangent=null,this._tCriticalX=null,this._tCriticalY=null,this._bounds=null,this._svgPathFragment=null,this.invalidationEmitter.emit()}getStartTangent(){if(null===this._startTangent){const e=this._start.equals(this._control);this._startTangent=e?this._end.minus(this._start).normalized():this._control.minus(this._start).normalized()}return this._startTangent}get startTangent(){return this.getStartTangent()}getEndTangent(){if(null===this._endTangent){const e=this._end.equals(this._control);this._endTangent=e?this._end.minus(this._start).normalized():this._end.minus(this._control).normalized()}return this._endTangent}get endTangent(){return this.getEndTangent()}getTCriticalX(){return null===this._tCriticalX&&(this._tCriticalX=cp.extremaT(this._start.x,this._control.x,this._end.x)),this._tCriticalX}get tCriticalX(){return this.getTCriticalX()}getTCriticalY(){return null===this._tCriticalY&&(this._tCriticalY=cp.extremaT(this._start.y,this._control.y,this._end.y)),this._tCriticalY}get tCriticalY(){return this.getTCriticalY()}getNondegenerateSegments(){const e=this._start,t=this._control,i=this._end,n=e.equals(i),r=e.equals(t),s=e.equals(t);if(n&&r)return[];if(n){const t=this.positionAt(.5);return[new op(e,t),new op(t,i)]}if(hp(e,t,i)){if(r||s)return[new op(e,i)];const n=i.minus(e),a=t.minus(e).dot(n.normalized())/n.magnitude,o=cp.extremaT(0,a,1);if(!isNaN(o)&&o>0&&o<1){const t=this.positionAt(o);return _.flatten([new op(e,t).getNondegenerateSegments(),new op(t,i).getNondegenerateSegments()])}return[new op(e,i)]}return[this]}getBounds(){if(null===this._bounds){this._bounds=new Zl(Math.min(this._start.x,this._end.x),Math.min(this._start.y,this._end.y),Math.max(this._start.x,this._end.x),Math.max(this._start.y,this._end.y));const e=this.getTCriticalX(),t=this.getTCriticalY();!isNaN(e)&&e>0&&e<1&&(this._bounds=this._bounds.withPoint(this.positionAt(e))),!isNaN(t)&&t>0&&t<1&&(this._bounds=this._bounds.withPoint(this.positionAt(t)))}return this._bounds}get bounds(){return this.getBounds()}offsetTo(e,t){let i=[this];for(let r=0;r<5;r++)i=_.flatten(_.map(i,e=>e.subdivided(.5)));let n=_.map(i,t=>t.approximateOffset(e));return t&&(n.reverse(),n=_.map(n,e=>e.reversed())),n}degreeElevated(){return new vp(this._start,this._start.plus(this._control.timesScalar(2)).dividedScalar(3),this._end.plus(this._control.timesScalar(2)).dividedScalar(3),this._end)}approximateOffset(e){return new cp(this._start.plus((this._start.equals(this._control)?this._end.minus(this._start):this._control.minus(this._start)).perpendicular.normalized().times(e)),this._control.plus(this._end.minus(this._start).perpendicular.normalized().times(e)),this._end.plus((this._end.equals(this._control)?this._end.minus(this._start):this._end.minus(this._control)).perpendicular.normalized().times(e)))}getSVGPathFragment(){return this._svgPathFragment||(this._svgPathFragment=`Q ${yd(this._control.x)} ${yd(this._control.y)} ${yd(this._end.x)} ${yd(this._end.y)}`),this._svgPathFragment}strokeLeft(e){return this.offsetTo(-e/2,!1)}strokeRight(e){return this.offsetTo(e/2,!0)}getInteriorExtremaTs(){const e=[],t=this.getTCriticalX(),i=this.getTCriticalY();return!isNaN(t)&&t>1e-10&&t<1-1e-10&&e.push(this.tCriticalX),!isNaN(i)&&i>1e-10&&i<1-1e-10&&e.push(this.tCriticalY),e.sort()}intersection(e){const t=[],i=Mh.rotation2(-e.direction.angle).timesMatrix(Mh.translation(-e.position.x,-e.position.y)),n=i.timesVector2(this._start),r=i.timesVector2(this._control),s=i.timesVector2(this._end),a=n.y-2*r.y+s.y,o=-2*n.y+2*r.y,l=n.y,h=lp(a,o,l);return _.each(h,i=>{if(i>=0&&i<=1){const n=this.positionAt(i),r=this.tangentAt(i).normalized(),s=r.perpendicular,a=n.minus(e.position);if(a.dot(e.direction)>0){const o=s.dot(e.direction)>0?s.negated():s,l=e.direction.perpendicular.dot(r)<0?1:-1;t.push(new md(a.magnitude,n,o,l,i))}}}),t}windingIntersection(e){let t=0;const i=this.intersection(e);return _.each(i,e=>{t+=e.wind}),t}writeToContext(e){e.quadraticCurveTo(this._control.x,this._control.y,this._end.x,this._end.y)}transformed(e){return new cp(e.timesVector2(this._start),e.timesVector2(this._control),e.timesVector2(this._end))}getSignedAreaFragment(){return 1/6*(this._start.x*(2*this._control.y+this._end.y)+this._control.x*(-2*this._start.y+2*this._end.y)+this._end.x*(-this._start.y-2*this._control.y))}reparameterized(e,t){const i=this._start.plus(this._end.plus(this._control.timesScalar(-2))),n=this._control.minus(this._start).timesScalar(2),r=this._start,s=i.timesScalar(e*e),a=i.timesScalar(e*t).timesScalar(2).plus(n.timesScalar(e)),o=i.timesScalar(t*t).plus(n.timesScalar(t)).plus(r);return new cp(o,a.timesScalar(.5).plus(o),s.plus(a).plus(o))}reversed(){return new cp(this._end,this._control,this._start)}serialize(){return{type:"Quadratic",startX:this._start.x,startY:this._start.y,controlX:this._control.x,controlY:this._control.y,endX:this._end.x,endY:this._end.y}}getOverlaps(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e instanceof cp?cp.getOverlaps(this,e):null}static deserialize(e){return new cp(new al(e.startX,e.startY),new al(e.controlX,e.controlY),new al(e.endX,e.endY))}static extremaT(e,t,i){const n=2*(i-2*t+e);return 0!==n?-2*(t-e)/n:NaN}static getOverlaps(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-6;const n=[],r=e._start.x,s=-2*e._start.x+2*e._control.x,a=e._start.x-2*e._control.x+e._end.x,o=e._start.y,l=-2*e._start.y+2*e._control.y,h=e._start.y-2*e._control.y+e._end.y,u=t._start.x,c=-2*t._start.x+2*t._control.x,d=t._start.x-2*t._control.x+t._end.x,p=t._start.y,m=-2*t._start.y+2*t._control.y,g=t._start.y-2*t._control.y+t._end.y,f=Math.abs(Math.max(e._start.x,e._control.x,e._end.x,t._start.x,t._control.x,t._end.x)-Math.min(e._start.x,e._control.x,e._end.x,t._start.x,t._control.x,t._end.x)),y=Math.abs(Math.max(e._start.y,e._control.y,e._end.y,t._start.y,t._control.y,t._end.y)-Math.min(e._start.y,e._control.y,e._end.y,t._start.y,t._control.y,t._end.y)),E=rp.polynomialGetOverlapQuadratic(r,s,a,u,c,d),v=rp.polynomialGetOverlapQuadratic(o,l,h,p,m,g);let A;if(A=f>y?null===E||!0===E?v:E:null===v||!0===v?E:v,null===A||!0===A)return n;const b=A.a,S=A.b,x=b*b,w=S*S,T=2*b*S,P=u+S*c+w*d-r,C=b*c+T*d-s,V=x*d-a,R=p+S*m+w*g-o,N=b*m+T*g-l,M=x*g-h,k=fl.solveLinearRootsReal(2*V,C),L=fl.solveLinearRootsReal(2*M,N),I=_.uniq([0,1].concat(k?k.filter(up):[])),B=_.uniq([0,1].concat(L?L.filter(up):[]));for(let _=0;_<I.length;_++){const e=I[_];if(Math.abs((V*e+C)*e+P)>i)return n}for(let _=0;_<B.length;_++){const e=B[_];if(Math.abs((M*e+N)*e+R)>i)return n}const D=b+S;return S>1&&D>1||S<0&&D<0?n:[new pd(b,S)]}}cp.prototype.degree=2,hd.register("Quadratic",cp);const dp=fl.solveQuadraticRootsReal,pp=fl.solveCubicRootsReal,mp=fl.arePointsCollinear,gp=new al(0,0),fp=new al(0,0),yp=new al(0,0);function Ep(e){return e>=0&&e<=1}class vp extends rp{constructor(e,t,i,n){super(),this._start=e,this._control1=t,this._control2=i,this._end=n,this.invalidate()}setStart(e){return this._start.equals(e)||(this._start=e,this.invalidate()),this}set start(e){this.setStart(e)}get start(){return this.getStart()}getStart(){return this._start}setControl1(e){return this._control1.equals(e)||(this._control1=e,this.invalidate()),this}set control1(e){this.setControl1(e)}get control1(){return this.getControl1()}getControl1(){return this._control1}setControl2(e){return this._control2.equals(e)||(this._control2=e,this.invalidate()),this}set control2(e){this.setControl2(e)}get control2(){return this.getControl2()}getControl2(){return this._control2}setEnd(e){return this._end.equals(e)||(this._end=e,this.invalidate()),this}set end(e){this.setEnd(e)}get end(){return this.getEnd()}getEnd(){return this._end}positionAt(e){const t=1-e,i=t*t*t,n=3*t*t*e,r=3*t*e*e,s=e*e*e;return new al(this._start.x*i+this._control1.x*n+this._control2.x*r+this._end.x*s,this._start.y*i+this._control1.y*n+this._control2.y*r+this._end.y*s)}tangentAt(e){const t=1-e;return new al(0,0).set(this._start).multiplyScalar(-3*t*t).add(gp.set(this._control1).multiplyScalar(3*t*t-6*t*e)).add(gp.set(this._control2).multiplyScalar(6*t*e-3*e*e)).add(gp.set(this._end).multiplyScalar(3*e*e))}curvatureAt(e){if(Math.abs(e-.5)>.5-1e-7){const t=e<.5,i=t?this._start:this._end,n=t?this._control1:this._control2,r=t?this._control2:this._control1,s=n.minus(i),a=s.magnitude;return(t?-1:1)*s.perpendicular.normalized().dot(r.minus(n))*(this.degree-1)/(this.degree*a*a)}return this.subdivided(e)[0].curvatureAt(1)}subdivided(e){if(0===e||1===e)return[this];const t=this._start.blend(this._control1,e),i=this._control2.blend(this._end,e),n=this._control1.blend(this._control2,e),r=t.blend(n,e),s=n.blend(i,e),a=r.blend(s,e);return[new vp(this._start,t,r,a),new vp(a,s,i,this._end)]}invalidate(){this._startTangent=null,this._endTangent=null,this._r=null,this._s=null,this._tCusp=null,this._tDeterminant=null,this._tInflection1=null,this._tInflection2=null,this._quadratics=null,this._xExtremaT=null,this._yExtremaT=null,this._bounds=null,this._svgPathFragment=null,this.invalidationEmitter.emit()}getStartTangent(){return null===this._startTangent&&(this._startTangent=this.tangentAt(0).normalized()),this._startTangent}get startTangent(){return this.getStartTangent()}getEndTangent(){return null===this._endTangent&&(this._endTangent=this.tangentAt(1).normalized()),this._endTangent}get endTangent(){return this.getEndTangent()}getR(){return null===this._r&&(this._r=this._control1.minus(this._start).normalized()),this._r}get r(){return this.getR()}getS(){return null===this._s&&(this._s=this.getR().perpendicular),this._s}get s(){return this.getS()}getTCusp(){return null===this._tCusp&&this.computeCuspInfo(),this._tCusp}get tCusp(){return this.getTCusp()}getTDeterminant(){return null===this._tDeterminant&&this.computeCuspInfo(),this._tDeterminant}get tDeterminant(){return this.getTDeterminant()}getTInflection1(){return null===this._tInflection1&&this.computeCuspInfo(),this._tInflection1}get tInflection1(){return this.getTInflection1()}getTInflection2(){return null===this._tInflection2&&this.computeCuspInfo(),this._tInflection2}get tInflection2(){return this.getTInflection2()}getQuadratics(){return null===this._quadratics&&this.computeCuspSegments(),this._quadratics}getXExtremaT(){return null===this._xExtremaT&&(this._xExtremaT=vp.extremaT(this._start.x,this._control1.x,this._control2.x,this._end.x)),this._xExtremaT}get xExtremaT(){return this.getXExtremaT()}getYExtremaT(){return null===this._yExtremaT&&(this._yExtremaT=vp.extremaT(this._start.y,this._control1.y,this._control2.y,this._end.y)),this._yExtremaT}get yExtremaT(){return this.getYExtremaT()}getBounds(){return null===this._bounds&&(this._bounds=Zl.NOTHING,this._bounds=this._bounds.withPoint(this._start),this._bounds=this._bounds.withPoint(this._end),_.each(this.getXExtremaT(),e=>{e>=0&&e<=1&&(this._bounds=this._bounds.withPoint(this.positionAt(e)))}),_.each(this.getYExtremaT(),e=>{e>=0&&e<=1&&(this._bounds=this._bounds.withPoint(this.positionAt(e)))}),this.hasCusp()&&(this._bounds=this._bounds.withPoint(this.positionAt(this.getTCusp())))),this._bounds}get bounds(){return this.getBounds()}computeCuspInfo(){const e=this._start.times(-1).plus(this._control1.times(3)).plus(this._control2.times(-3)).plus(this._end),t=this._start.times(3).plus(this._control1.times(-6)).plus(this._control2.times(3)),i=this._start.times(-3).plus(this._control1.times(3)),n=e.perpendicular,r=t.perpendicular,s=n.dot(t);if(this._tCusp=n.dot(i)/s*-.5,this._tDeterminant=this._tCusp*this._tCusp-1/3*(r.dot(i)/s),this._tDeterminant>=0){const e=Math.sqrt(this._tDeterminant);this._tInflection1=this._tCusp-e,this._tInflection2=this._tCusp+e}else this._tInflection1=NaN,this._tInflection2=NaN}computeCuspSegments(){if(this.hasCusp()){this._quadratics=[];const e=this.getTCusp();if(0===e)this._quadratics.push(new cp(this.start,this.control2,this.end));else if(1===e)this._quadratics.push(new cp(this.start,this.control1,this.end));else{const t=this.subdivided(e);this._quadratics.push(new cp(t[0].start,t[0].control1,t[0].end)),this._quadratics.push(new cp(t[1].start,t[1].control2,t[1].end))}}else this._quadratics=null}getNondegenerateSegments(){const e=this._start,t=this._control1,i=this._control2,n=this._end,r=this.degreeReduced(1e-9);if(e.equals(n)&&e.equals(t)&&e.equals(i))return[];if(this.hasCusp())return _.flatten(this.getQuadratics().map(e=>e.getNondegenerateSegments()));if(r)return r.getNondegenerateSegments();if(mp(e,t,n)&&mp(e,i,n)&&!e.equalsEpsilon(n,1e-7)){const t=this.getXExtremaT().concat(this.getYExtremaT()).sort().map(e=>this.positionAt(e)),i=[];let r=e;t.length&&(i.push(new op(e,t[0])),r=t[0]);for(let e=1;e<t.length;e++)i.push(new op(t[e-1],t[e])),r=t[e];return i.push(new op(r,n)),_.flatten(i.map(e=>e.getNondegenerateSegments()))}return[this]}hasCusp(){const e=this.getTCusp();return e>=0&&e<=1&&this.tangentAt(e).magnitude<1e-7}toRS(e){const t=e.minus(this._start);return new al(t.dot(this.getR()),t.dot(this.getS()))}offsetTo(e,t){const i=[],n=[];for(let r=0;r<32;r++){let s=r/31;t&&(s=1-s),i.push(this.positionAt(s).plus(this.tangentAt(s).perpendicular.normalized().times(e))),r>0&&n.push(new op(i[r-1],i[r]))}return n}getSVGPathFragment(){return this._svgPathFragment||(this._svgPathFragment=`C ${yd(this._control1.x)} ${yd(this._control1.y)} ${yd(this._control2.x)} ${yd(this._control2.y)} ${yd(this._end.x)} ${yd(this._end.y)}`),this._svgPathFragment}strokeLeft(e){return this.offsetTo(-e/2,!1)}strokeRight(e){return this.offsetTo(e/2,!0)}getInteriorExtremaTs(){const e=this.getXExtremaT().concat(this.getYExtremaT()),t=[];return _.each(e,e=>{e>1e-10&&e<1-1e-10&&_.every(t,t=>Math.abs(e-t)>1e-10)&&t.push(e)}),t.sort()}intersection(e){const t=[],i=Mh.rotation2(-e.direction.angle).timesMatrix(Mh.translation(-e.position.x,-e.position.y)),n=i.timesVector2(this._start),r=i.timesVector2(this._control1),s=i.timesVector2(this._control2),a=i.timesVector2(this._end),o=-n.y+3*r.y-3*s.y+a.y,l=3*n.y-6*r.y+3*s.y,h=-3*n.y+3*r.y,u=n.y,c=pp(o,l,h,u);return _.each(c,i=>{if(i>=0&&i<=1){const n=this.positionAt(i),r=this.tangentAt(i).normalized(),s=r.perpendicular,a=n.minus(e.position);if(a.dot(e.direction)>0){const o=s.dot(e.direction)>0?s.negated():s,l=e.direction.perpendicular.dot(r)<0?1:-1;t.push(new md(a.magnitude,n,o,l,i))}}}),t}windingIntersection(e){let t=0;const i=this.intersection(e);return _.each(i,e=>{t+=e.wind}),t}writeToContext(e){e.bezierCurveTo(this._control1.x,this._control1.y,this._control2.x,this._control2.y,this._end.x,this._end.y)}transformed(e){return new vp(e.timesVector2(this._start),e.timesVector2(this._control1),e.timesVector2(this._control2),e.timesVector2(this._end))}degreeReduced(e){e=e||0;const t=gp.set(this._control1).multiplyScalar(3).subtract(this._start).divideScalar(2),i=fp.set(this._control2).multiplyScalar(3).subtract(this._end).divideScalar(2);return yp.set(t).subtract(i).magnitude<=e?new cp(this._start,t.average(i),this._end):null}getSignedAreaFragment(){return.05*(this._start.x*(6*this._control1.y+3*this._control2.y+this._end.y)+this._control1.x*(-6*this._start.y+3*this._control2.y+3*this._end.y)+this._control2.x*(-3*this._start.y-3*this._control1.y+6*this._end.y)+this._end.x*(-this._start.y-3*this._control1.y-6*this._control2.y))}reversed(){return new vp(this._end,this._control2,this._control1,this._start)}getSelfIntersection(){const e=this.getInteriorExtremaTs(),t=[0].concat(e).concat([1]),i=this.subdivisions(e);if(i.length<3)return null;for(let n=0;n<i.length;n++){const e=i[n];for(let r=n+1;r<i.length;r++){const s=i[r],a=im.intersect(e,s);if(a.length){const e=a[0];if(e.aT>1e-7&&e.aT<1-1e-7&&e.bT>1e-7&&e.bT<1-1e-7){const i=t[n]+e.aT*(t[n+1]-t[n]),s=t[r]+e.bT*(t[r+1]-t[r]);return new gd(e.point,i,s)}}}}return null}serialize(){return{type:"Cubic",startX:this._start.x,startY:this._start.y,control1X:this._control1.x,control1Y:this._control1.y,control2X:this._control2.x,control2Y:this._control2.y,endX:this._end.x,endY:this._end.y}}getOverlaps(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e instanceof vp?vp.getOverlaps(this,e):null}static deserialize(e){return new vp(new al(e.startX,e.startY),new al(e.control1X,e.control1Y),new al(e.control2X,e.control2Y),new al(e.endX,e.endY))}static extremaT(e,t,i,n){if(e===t&&e===i&&e===n)return[];const r=-3*e+9*t-9*i+3*n,s=6*e-12*t+6*i,a=-3*e+3*t;return _.filter(dp(r,s,a),Ep)}static getOverlaps(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-6;const n=[],r=e._start.x,s=-3*e._start.x+3*e._control1.x,a=3*e._start.x-6*e._control1.x+3*e._control2.x,o=-1*e._start.x+3*e._control1.x-3*e._control2.x+e._end.x,l=e._start.y,h=-3*e._start.y+3*e._control1.y,u=3*e._start.y-6*e._control1.y+3*e._control2.y,c=-1*e._start.y+3*e._control1.y-3*e._control2.y+e._end.y,d=t._start.x,p=-3*t._start.x+3*t._control1.x,m=3*t._start.x-6*t._control1.x+3*t._control2.x,g=-1*t._start.x+3*t._control1.x-3*t._control2.x+t._end.x,f=t._start.y,y=-3*t._start.y+3*t._control1.y,E=3*t._start.y-6*t._control1.y+3*t._control2.y,v=-1*t._start.y+3*t._control1.y-3*t._control2.y+t._end.y,A=Math.abs(Math.max(e._start.x,e._control1.x,e._control2.x,e._end.x,e._start.x,e._control1.x,e._control2.x,e._end.x)-Math.min(e._start.x,e._control1.x,e._control2.x,e._end.x,e._start.x,e._control1.x,e._control2.x,e._end.x)),b=Math.abs(Math.max(e._start.y,e._control1.y,e._control2.y,e._end.y,e._start.y,e._control1.y,e._control2.y,e._end.y)-Math.min(e._start.y,e._control1.y,e._control2.y,e._end.y,e._start.y,e._control1.y,e._control2.y,e._end.y)),S=rp.polynomialGetOverlapCubic(r,s,a,o,d,p,m,g),x=rp.polynomialGetOverlapCubic(l,h,u,c,f,y,E,v);let w;if(w=A>b?null===S||!0===S?x:S:null===x||!0===x?S:x,null===w||!0===w)return n;const T=w.a,P=w.b,C=T*T,V=T*T*T,R=P*P,N=P*P*P,M=2*T*P,k=3*T*R,L=3*C*P,I=d+P*p+R*m+N*g-r,B=T*p+M*m+k*g-s,D=C*m+L*g-a,O=V*g-o,q=f+P*y+R*E+N*v-l,Y=T*y+M*E+k*v-h,H=C*E+L*v-u,G=V*v-c,F=fl.solveQuadraticRootsReal(3*O,2*D,B),z=fl.solveQuadraticRootsReal(3*G,2*H,Y),U=_.uniq([0,1].concat(null!==F?F.filter(Ep):[])),W=_.uniq([0,1].concat(null!==z?z.filter(Ep):[]));for(let _=0;_<U.length;_++){const e=U[_];if(Math.abs(((O*e+D)*e+B)*e+I)>i)return n}for(let _=0;_<W.length;_++){const e=W[_];if(Math.abs(((G*e+H)*e+Y)*e+q)>i)return n}const X=T+P;return P>1&&X>1||P<0&&X<0?n:[new pd(T,P)]}}vp.prototype.degree=3,hd.register("Cubic",vp);const Ap=2*Math.PI;class bp extends rp{constructor(e,t,i,n,r){super(),this._center=e,this._radius=t,this._startAngle=i,this._endAngle=n,this._anticlockwise=r,this.invalidate()}setCenter(e){return this._center.equals(e)||(this._center=e,this.invalidate()),this}set center(e){this.setCenter(e)}get center(){return this.getCenter()}getCenter(){return this._center}setRadius(e){return this._radius!==e&&(this._radius=e,this.invalidate()),this}set radius(e){this.setRadius(e)}get radius(){return this.getRadius()}getRadius(){return this._radius}setStartAngle(e){return this._startAngle!==e&&(this._startAngle=e,this.invalidate()),this}set startAngle(e){this.setStartAngle(e)}get startAngle(){return this.getStartAngle()}getStartAngle(){return this._startAngle}setEndAngle(e){return this._endAngle!==e&&(this._endAngle=e,this.invalidate()),this}set endAngle(e){this.setEndAngle(e)}get endAngle(){return this.getEndAngle()}getEndAngle(){return this._endAngle}setAnticlockwise(e){return this._anticlockwise!==e&&(this._anticlockwise=e,this.invalidate()),this}set anticlockwise(e){this.setAnticlockwise(e)}get anticlockwise(){return this.getAnticlockwise()}getAnticlockwise(){return this._anticlockwise}positionAt(e){return this.positionAtAngle(this.angleAt(e))}tangentAt(e){return this.tangentAtAngle(this.angleAt(e))}curvatureAt(e){return(this._anticlockwise?-1:1)/this._radius}subdivided(e){if(0===e||1===e)return[this];const t=this.angleAt(0),i=this.angleAt(e),n=this.angleAt(1);return[new bp(this._center,this._radius,t,i,this._anticlockwise),new bp(this._center,this._radius,i,n,this._anticlockwise)]}invalidate(){this._start=null,this._end=null,this._startTangent=null,this._endTangent=null,this._actualEndAngle=null,this._isFullPerimeter=null,this._angleDifference=null,this._bounds=null,this._svgPathFragment=null,this._radius<0&&(this._radius=-this._radius,this._startAngle+=Math.PI,this._endAngle+=Math.PI),this.invalidationEmitter.emit()}getStart(){return null===this._start&&(this._start=this.positionAtAngle(this._startAngle)),this._start}get start(){return this.getStart()}getEnd(){return null===this._end&&(this._end=this.positionAtAngle(this._endAngle)),this._end}get end(){return this.getEnd()}getStartTangent(){return null===this._startTangent&&(this._startTangent=this.tangentAtAngle(this._startAngle)),this._startTangent}get startTangent(){return this.getStartTangent()}getEndTangent(){return null===this._endTangent&&(this._endTangent=this.tangentAtAngle(this._endAngle)),this._endTangent}get endTangent(){return this.getEndTangent()}getActualEndAngle(){return null===this._actualEndAngle&&(this._actualEndAngle=bp.computeActualEndAngle(this._startAngle,this._endAngle,this._anticlockwise)),this._actualEndAngle}get actualEndAngle(){return this.getActualEndAngle()}getIsFullPerimeter(){return null===this._isFullPerimeter&&(this._isFullPerimeter=!this._anticlockwise&&this._endAngle-this._startAngle>=2*Math.PI||this._anticlockwise&&this._startAngle-this._endAngle>=2*Math.PI),this._isFullPerimeter}get isFullPerimeter(){return this.getIsFullPerimeter()}getAngleDifference(){return null===this._angleDifference&&(this._angleDifference=this._anticlockwise?this._startAngle-this._endAngle:this._endAngle-this._startAngle,this._angleDifference<0&&(this._angleDifference+=2*Math.PI)),this._angleDifference}get angleDifference(){return this.getAngleDifference()}getBounds(){return null===this._bounds&&(this._bounds=Zl.NOTHING.copy().withPoint(this.getStart()).withPoint(this.getEnd()),this._startAngle!==this._endAngle&&(this.includeBoundsAtAngle(0),this.includeBoundsAtAngle(Math.PI/2),this.includeBoundsAtAngle(Math.PI),this.includeBoundsAtAngle(3*Math.PI/2))),this._bounds}get bounds(){return this.getBounds()}getNondegenerateSegments(){return this._radius<=0||this._startAngle===this._endAngle?[]:[this]}includeBoundsAtAngle(e){this.containsAngle(e)&&(this._bounds=this._bounds.withPoint(this._center.plus(al.createPolar(this._radius,e))))}mapAngle(e){return Math.abs(fl.moduloBetweenDown(e-this._startAngle,-Math.PI,Math.PI))<1e-8?this._startAngle:Math.abs(fl.moduloBetweenDown(e-this.getActualEndAngle(),-Math.PI,Math.PI))<1e-8?this.getActualEndAngle():this._startAngle>this.getActualEndAngle()?fl.moduloBetweenUp(e,this._startAngle-2*Math.PI,this._startAngle):fl.moduloBetweenDown(e,this._startAngle,this._startAngle+2*Math.PI)}tAtAngle(e){const t=(this.mapAngle(e)-this._startAngle)/(this.getActualEndAngle()-this._startAngle);return t}angleAt(e){return this._startAngle+(this.getActualEndAngle()-this._startAngle)*e}positionAtAngle(e){return this._center.plus(al.createPolar(this._radius,e))}tangentAtAngle(e){const t=al.createPolar(1,e);return this._anticlockwise?t.perpendicular:t.perpendicular.negated()}containsAngle(e){const t=this._anticlockwise?e-this._endAngle:e-this._startAngle;return fl.moduloBetweenDown(t,0,2*Math.PI)<=this.angleDifference}getSVGPathFragment(){if(!this._svgPathFragment){const e=.01,t=this._anticlockwise?"0":"1";let i;if(this.angleDifference<2*Math.PI-e)i=this.angleDifference<Math.PI?"0":"1",this._svgPathFragment=`A ${yd(this._radius)} ${yd(this._radius)} 0 ${i} ${t} ${yd(this.end.x)} ${yd(this.end.y)}`;else{const e=(this._startAngle+this._endAngle)/2,n=this._center.plus(al.createPolar(this._radius,e));i="0";const r=`A ${yd(this._radius)} ${yd(this._radius)} 0 ${i} ${t} ${yd(n.x)} ${yd(n.y)}`,s=`A ${yd(this._radius)} ${yd(this._radius)} 0 ${i} ${t} ${yd(this.end.x)} ${yd(this.end.y)}`;this._svgPathFragment=`${r} ${s}`}}return this._svgPathFragment}strokeLeft(e){return[new bp(this._center,this._radius+(this._anticlockwise?1:-1)*e/2,this._startAngle,this._endAngle,this._anticlockwise)]}strokeRight(e){return[new bp(this._center,this._radius+(this._anticlockwise?-1:1)*e/2,this._endAngle,this._startAngle,!this._anticlockwise)]}getInteriorExtremaTs(){const e=[];return _.each([0,Math.PI/2,Math.PI,3*Math.PI/2],t=>{if(this.containsAngle(t)){const i=this.tAtAngle(t),n=1e-10;i>n&&i<1-n&&e.push(i)}}),e.sort()}intersection(e){const t=[],i=e.position.minus(this._center),n=e.direction.dot(i),r=4*n*n-4*(i.magnitudeSquared-this._radius*this._radius);if(r<0)return t;const s=e.direction.dot(this._center)-e.direction.dot(e.position),a=Math.sqrt(r)/2,o=s-a,l=s+a;if(l<0)return t;const h=e.pointAtDistance(l),u=h.minus(this._center).normalized(),c=u.angle;if(o<0)this.containsAngle(c)&&t.push(new md(l,h,u.negated(),this._anticlockwise?-1:1,this.tAtAngle(c)));else{const i=e.pointAtDistance(o),n=i.minus(this._center).normalized(),r=n.angle;this.containsAngle(r)&&t.push(new md(o,i,n,this._anticlockwise?1:-1,this.tAtAngle(r))),this.containsAngle(c)&&t.push(new md(l,h,u.negated(),this._anticlockwise?-1:1,this.tAtAngle(c)))}return t}windingIntersection(e){let t=0;const i=this.intersection(e);return _.each(i,e=>{t+=e.wind}),t}writeToContext(e){e.arc(this._center.x,this._center.y,this._radius,this._startAngle,this._endAngle,this._anticlockwise)}transformed(e){const t=e.timesVector2(al.createPolar(1,this._startAngle)).minus(e.timesVector2(al.ZERO)).angle;let i=e.timesVector2(al.createPolar(1,this._endAngle)).minus(e.timesVector2(al.ZERO)).angle;const n=e.getDeterminant()>=0?this._anticlockwise:!this._anticlockwise;Math.abs(this._endAngle-this._startAngle)===2*Math.PI&&(i=n?t-2*Math.PI:t+2*Math.PI);const r=e.getScaleVector();if(r.x!==r.y){const s=r.x*this._radius,a=r.y*this._radius;return new Pp(e.timesVector2(this._center),s,a,0,t,i,n)}{const s=r.x*this._radius;return new bp(e.timesVector2(this._center),s,t,i,n)}}getSignedAreaFragment(){const e=this._startAngle,t=this.getActualEndAngle();return.5*this._radius*(this._radius*(t-e)+this._center.x*(Math.sin(t)-Math.sin(e))-this._center.y*(Math.cos(t)-Math.cos(e)))}reversed(){return new bp(this._center,this._radius,this._endAngle,this._startAngle,!this._anticlockwise)}getArcLength(){return this.getAngleDifference()*this._radius}toPiecewiseLinearOrArcSegments(){return[this]}serialize(){return{type:"Arc",centerX:this._center.x,centerY:this._center.y,radius:this._radius,startAngle:this._startAngle,endAngle:this._endAngle,anticlockwise:this._anticlockwise}}getOverlaps(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e instanceof bp?bp.getOverlaps(this,e):null}getConicMatrix(){const e=this.center.x,t=this.center.y,i=-2*e,n=-2*t,r=e*e+t*t-this.radius*this.radius;return Mh.rowMajor(1,0,i/2,0,1,n/2,i/2,n/2,r)}static deserialize(e){return new bp(new al(e.centerX,e.centerY),e.radius,e.startAngle,e.endAngle,e.anticlockwise)}static computeActualEndAngle(e,t,i){return i?e>t?t:e<t?t-2*Math.PI:e:e<t?t:e>t?t+2*Math.PI:e}static getPartialOverlap(e,t,i,n,r){const s=i<t,a=s?t:i,o=s?i:t,l=Math.min(e,a);return l<o+1e-8?[]:[pd.createLinear(fl.clamp(fl.linear(0,e,0,1,o),0,1),fl.clamp(fl.linear(t,i,n,r,o),0,1),fl.clamp(fl.linear(0,e,0,1,l),0,1),fl.clamp(fl.linear(t,i,n,r,l),0,1))]}static getAngularOverlaps(e,t,i,n){let r=t-e;const s=r<0?-1:1;r*=s;const a=fl.moduloBetweenDown(s*(i-e),0,Ap),o=s*(n-i)+a;let l;return o<-1e-10?(l=-a/(o-a),bp.getPartialOverlap(r,a,0,0,l).concat(bp.getPartialOverlap(r,Ap,o+Ap,l,1))):o>Ap+1e-10?(l=(Ap-a)/(o-a),bp.getPartialOverlap(r,a,Ap,0,l).concat(bp.getPartialOverlap(r,0,o-Ap,l,1))):bp.getPartialOverlap(r,a,o,0,1)}static getOverlaps(e,t){return e._center.distance(t._center)>1e-4||Math.abs(e._radius-t._radius)>1e-4?[]:bp.getAngularOverlaps(e._startAngle,e.getActualEndAngle(),t._startAngle,t.getActualEndAngle())}static getCircleIntersectionPoint(e,t,i,n){const r=i.minus(e),s=r.magnitude;let a=[];if(s<1e-10||s>t+n+1e-10);else if(s>t+n-1e-10)a=[e.blend(i,t/s)];else{const o=.5*(s*s-n*n+t*t)/s,l=s*s-n*n+t*t,h=4*s*s*t*t-l*l,u=e.blend(i,o/s);if(h>=1e-10){const e=Math.sqrt(h)/s/2,t=r.perpendicular.setMagnitude(e);a=[u.plus(t),u.minus(t)]}else h>-1e-10&&(a=[u])}return a}static intersect(e,t){const i=[];if(e._center.equalsEpsilon(t._center,1e-8)&&Math.abs(e._radius-t._radius)<1e-8){const n=e.positionAt(0),r=e.positionAt(1),s=t.positionAt(0),a=t.positionAt(1);n.equalsEpsilon(s,1e-8)&&i.push(new gd(n.average(s),0,0)),n.equalsEpsilon(a,1e-8)&&i.push(new gd(n.average(a),0,1)),r.equalsEpsilon(s,1e-8)&&i.push(new gd(r.average(s),1,0)),r.equalsEpsilon(a,1e-8)&&i.push(new gd(r.average(a),1,1))}else{const n=bp.getCircleIntersectionPoint(e._center,e._radius,t._center,t._radius);for(let r=0;r<n.length;r++){const s=n[r],a=s.minus(e._center).angle,o=s.minus(t._center).angle;e.containsAngle(a)&&t.containsAngle(o)&&i.push(new gd(s,e.tAtAngle(a),t.tAtAngle(o)))}}return i}static createFromPoints(e,t,i){const n=fl.circleCenterFromPoints(e,t,i);if(null===n)return new op(e,i);{const r=e.minus(n),s=t.minus(n),a=i.minus(n),o=r.angle,l=s.angle,h=a.angle,u=(r.magnitude+s.magnitude+a.magnitude)/3,c=new bp(n,u,o,h,!1);return c.containsAngle(l)?c:new bp(n,u,o,h,!0)}}}hd.register("Arc",bp);const Sp=new Mh;class _p{constructor(e){this.matrix=Mh.IDENTITY.copy(),this.inverse=Mh.IDENTITY.copy(),this.matrixTransposed=Mh.IDENTITY.copy(),this.inverseTransposed=Mh.IDENTITY.copy(),this.inverseValid=!0,this.transposeValid=!0,this.inverseTransposeValid=!0,this.changeEmitter=new np,e&&this.setMatrix(e)}setMatrix(e){this.matrix.set(e),this.invalidate()}validateMatrix(e){}invalidate(){this.inverseValid=!1,this.transposeValid=!1,this.inverseTransposeValid=!1,this.changeEmitter.emit()}prepend(e){Sp.set(this.matrix),this.matrix.set(e),this.matrix.multiplyMatrix(Sp),this.invalidate()}prependTranslation(e,t){this.matrix.prependTranslation(e,t),this.invalidate()}append(e){this.matrix.multiplyMatrix(e),this.invalidate()}prependTransform(e){this.prepend(e.matrix)}appendTransform(e){this.append(e.matrix)}applyToCanvasContext(e){e.setTransform(this.matrix.m00(),this.matrix.m10(),this.matrix.m01(),this.matrix.m11(),this.matrix.m02(),this.matrix.m12())}copy(){const e=new _p(this.matrix);e.inverse=this.inverse,e.matrixTransposed=this.matrixTransposed,e.inverseTransposed=this.inverseTransposed,e.inverseValid=this.inverseValid,e.transposeValid=this.transposeValid,e.inverseTransposeValid=this.inverseTransposeValid}getMatrix(){return this.matrix}getInverse(){return this.inverseValid||(this.inverseValid=!0,this.inverse.set(this.matrix),this.inverse.invert()),this.inverse}getMatrixTransposed(){return this.transposeValid||(this.transposeValid=!0,this.matrixTransposed.set(this.matrix),this.matrixTransposed.transpose()),this.matrixTransposed}getInverseTransposed(){return this.inverseTransposeValid||(this.inverseTransposeValid=!0,this.inverseTransposed.set(this.getInverse()),this.inverseTransposed.transpose()),this.inverseTransposed}isIdentity(){return this.matrix.isFastIdentity()}isFinite(){return this.matrix.isFinite()}transformPosition2(e){return this.matrix.timesVector2(e)}transformDelta2(e){const t=this.getMatrix();return new al(t.m00()*e.x+t.m01()*e.y,t.m10()*e.x+t.m11()*e.y)}transformNormal2(e){return this.getInverse().timesTransposeVector2(e).normalize()}transformX(e){const t=this.getMatrix();return t.m00()*e+t.m02()}transformY(e){const t=this.getMatrix();return t.m11()*e+t.m12()}transformDeltaX(e){return this.getMatrix().m00()*e}transformDeltaY(e){return this.getMatrix().m11()*e}transformBounds2(e){return e.transformed(this.matrix)}transformShape(e){return e.transformed(this.matrix)}transformRay2(e){return new Dd(this.transformPosition2(e.position),this.transformDelta2(e.direction).normalized())}inversePosition2(e){return this.getInverse().timesVector2(e)}inverseDelta2(e){const t=this.getInverse();return new al(t.m00()*e.x+t.m01()*e.y,t.m10()*e.x+t.m11()*e.y)}inverseNormal2(e){return this.matrix.timesTransposeVector2(e).normalize()}inverseX(e){const t=this.getInverse();return t.m00()*e+t.m02()}inverseY(e){const t=this.getInverse();return t.m11()*e+t.m12()}inverseDeltaX(e){const t=this.getInverse();return t.m00()*e}inverseDeltaY(e){const t=this.getInverse();return t.m11()*e}inverseBounds2(e){return e.transformed(this.getInverse())}inverseShape(e){return e.transformed(this.getInverse())}inverseRay2(e){return new Dd(this.inversePosition2(e.position),this.inverseDelta2(e.direction).normalized())}}rl.register("Transform3",_p);const xp=_p,wp=fl.toDegrees,Tp=Mh.rowMajor(1,0,0,0,1,0,0,0,-1);class Pp extends rp{constructor(e,t,i,n,r,s,a){super(),this._center=e,this._radiusX=t,this._radiusY=i,this._rotation=n,this._startAngle=r,this._endAngle=s,this._anticlockwise=a,this.invalidate()}setCenter(e){return this._center.equals(e)||(this._center=e,this.invalidate()),this}set center(e){this.setCenter(e)}get center(){return this.getCenter()}getCenter(){return this._center}setRadiusX(e){return this._radiusX!==e&&(this._radiusX=e,this.invalidate()),this}set radiusX(e){this.setRadiusX(e)}get radiusX(){return this.getRadiusX()}getRadiusX(){return this._radiusX}setRadiusY(e){return this._radiusY!==e&&(this._radiusY=e,this.invalidate()),this}set radiusY(e){this.setRadiusY(e)}get radiusY(){return this.getRadiusY()}getRadiusY(){return this._radiusY}setRotation(e){return this._rotation!==e&&(this._rotation=e,this.invalidate()),this}set rotation(e){this.setRotation(e)}get rotation(){return this.getRotation()}getRotation(){return this._rotation}setStartAngle(e){return this._startAngle!==e&&(this._startAngle=e,this.invalidate()),this}set startAngle(e){this.setStartAngle(e)}get startAngle(){return this.getStartAngle()}getStartAngle(){return this._startAngle}setEndAngle(e){return this._endAngle!==e&&(this._endAngle=e,this.invalidate()),this}set endAngle(e){this.setEndAngle(e)}get endAngle(){return this.getEndAngle()}getEndAngle(){return this._endAngle}setAnticlockwise(e){return this._anticlockwise!==e&&(this._anticlockwise=e,this.invalidate()),this}set anticlockwise(e){this.setAnticlockwise(e)}get anticlockwise(){return this.getAnticlockwise()}getAnticlockwise(){return this._anticlockwise}positionAt(e){return this.positionAtAngle(this.angleAt(e))}tangentAt(e){return this.tangentAtAngle(this.angleAt(e))}curvatureAt(e){const t=this.angleAt(e),i=this._radiusX*Math.sin(t),n=this._radiusY*Math.cos(t),r=Math.pow(n*n+i*i,1.5);return(this._anticlockwise?-1:1)*this._radiusX*this._radiusY/r}subdivided(e){if(0===e||1===e)return[this];const t=this.angleAt(0),i=this.angleAt(e),n=this.angleAt(1);return[new Pp(this._center,this._radiusX,this._radiusY,this._rotation,t,i,this._anticlockwise),new Pp(this._center,this._radiusX,this._radiusY,this._rotation,i,n,this._anticlockwise)]}invalidate(){if(this._unitTransform=null,this._start=null,this._end=null,this._startTangent=null,this._endTangent=null,this._actualEndAngle=null,this._isFullPerimeter=null,this._angleDifference=null,this._unitArcSegment=null,this._bounds=null,this._svgPathFragment=null,this._radiusX<0&&(this._radiusX=-this._radiusX,this._startAngle=Math.PI-this._startAngle,this._endAngle=Math.PI-this._endAngle,this._anticlockwise=!this._anticlockwise),this._radiusY<0&&(this._radiusY=-this._radiusY,this._startAngle=-this._startAngle,this._endAngle=-this._endAngle,this._anticlockwise=!this._anticlockwise),this._radiusX<this._radiusY){this._rotation+=Math.PI/2,this._startAngle-=Math.PI/2,this._endAngle-=Math.PI/2;const e=this._radiusX;this._radiusX=this._radiusY,this._radiusY=e}if(this._radiusX<this._radiusY)throw new Error("Not verified to work if radiusX < radiusY");this.invalidationEmitter.emit()}getUnitTransform(){return null===this._unitTransform&&(this._unitTransform=Pp.computeUnitTransform(this._center,this._radiusX,this._radiusY,this._rotation)),this._unitTransform}get unitTransform(){return this.getUnitTransform()}getStart(){return null===this._start&&(this._start=this.positionAtAngle(this._startAngle)),this._start}get start(){return this.getStart()}getEnd(){return null===this._end&&(this._end=this.positionAtAngle(this._endAngle)),this._end}get end(){return this.getEnd()}getStartTangent(){return null===this._startTangent&&(this._startTangent=this.tangentAtAngle(this._startAngle)),this._startTangent}get startTangent(){return this.getStartTangent()}getEndTangent(){return null===this._endTangent&&(this._endTangent=this.tangentAtAngle(this._endAngle)),this._endTangent}get endTangent(){return this.getEndTangent()}getActualEndAngle(){return null===this._actualEndAngle&&(this._actualEndAngle=bp.computeActualEndAngle(this._startAngle,this._endAngle,this._anticlockwise)),this._actualEndAngle}get actualEndAngle(){return this.getActualEndAngle()}getIsFullPerimeter(){return null===this._isFullPerimeter&&(this._isFullPerimeter=!this._anticlockwise&&this._endAngle-this._startAngle>=2*Math.PI||this._anticlockwise&&this._startAngle-this._endAngle>=2*Math.PI),this._isFullPerimeter}get isFullPerimeter(){return this.getIsFullPerimeter()}getAngleDifference(){return null===this._angleDifference&&(this._angleDifference=this._anticlockwise?this._startAngle-this._endAngle:this._endAngle-this._startAngle,this._angleDifference<0&&(this._angleDifference+=2*Math.PI)),this._angleDifference}get angleDifference(){return this.getAngleDifference()}getUnitArcSegment(){return null===this._unitArcSegment&&(this._unitArcSegment=new bp(al.ZERO,1,this._startAngle,this._endAngle,this._anticlockwise)),this._unitArcSegment}get unitArcSegment(){return this.getUnitArcSegment()}getBounds(){if(null===this._bounds&&(this._bounds=Zl.NOTHING.withPoint(this.getStart()).withPoint(this.getEnd()),this._startAngle!==this._endAngle)){const e=Math.atan(-this._radiusY/this._radiusX*Math.tan(this._rotation)),t=Math.atan(this._radiusY/this._radiusX/Math.tan(this._rotation));this.possibleExtremaAngles=[e,e+Math.PI,t,t+Math.PI],_.each(this.possibleExtremaAngles,this.includeBoundsAtAngle.bind(this))}return this._bounds}get bounds(){return this.getBounds()}getNondegenerateSegments(){if(this._radiusX<=0||this._radiusY<=0||this._startAngle===this._endAngle)return[];if(this._radiusX===this._radiusY){const e=this._startAngle+this._rotation;let t=this._endAngle+this._rotation;return Math.abs(this._endAngle-this._startAngle)===2*Math.PI&&(t=this._anticlockwise?e-2*Math.PI:e+2*Math.PI),[new bp(this._center,this._radiusX,e,t,this._anticlockwise)]}return[this]}includeBoundsAtAngle(e){this.unitArcSegment.containsAngle(e)&&(this._bounds=this._bounds.withPoint(this.positionAtAngle(e)))}mapAngle(e){return Math.abs(fl.moduloBetweenDown(e-this._startAngle,-Math.PI,Math.PI))<1e-8?this._startAngle:Math.abs(fl.moduloBetweenDown(e-this.getActualEndAngle(),-Math.PI,Math.PI))<1e-8?this.getActualEndAngle():this._startAngle>this.getActualEndAngle()?fl.moduloBetweenUp(e,this._startAngle-2*Math.PI,this._startAngle):fl.moduloBetweenDown(e,this._startAngle,this._startAngle+2*Math.PI)}tAtAngle(e){return(this.mapAngle(e)-this._startAngle)/(this.getActualEndAngle()-this._startAngle)}angleAt(e){return this._startAngle+(this.getActualEndAngle()-this._startAngle)*e}positionAtAngle(e){return this.getUnitTransform().transformPosition2(al.createPolar(1,e))}tangentAtAngle(e){const t=this.getUnitTransform().transformNormal2(al.createPolar(1,e));return this._anticlockwise?t.perpendicular:t.perpendicular.negated()}offsetTo(e,t){const i=[],n=[];for(let r=0;r<32;r++){let s=r/31;t&&(s=1-s);const a=this.angleAt(s);i.push(this.positionAtAngle(a).plus(this.tangentAtAngle(a).perpendicular.normalized().times(e))),r>0&&n.push(new op(i[r-1],i[r]))}return n}getSVGPathFragment(){if(!this._svgPathFragment){const e=.01,t=this._anticlockwise?"0":"1";let i;const n=wp(this._rotation);if(this.getAngleDifference()<2*Math.PI-e)i=this.getAngleDifference()<Math.PI?"0":"1",this._svgPathFragment=`A ${yd(this._radiusX)} ${yd(this._radiusY)} ${n} ${i} ${t} ${yd(this.getEnd().x)} ${yd(this.getEnd().y)}`;else{const e=(this._startAngle+this._endAngle)/2,r=this.positionAtAngle(e);i="0";const s=`A ${yd(this._radiusX)} ${yd(this._radiusY)} ${n} ${i} ${t} ${yd(r.x)} ${yd(r.y)}`,a=`A ${yd(this._radiusX)} ${yd(this._radiusY)} ${n} ${i} ${t} ${yd(this.getEnd().x)} ${yd(this.getEnd().y)}`;this._svgPathFragment=`${s} ${a}`}}return this._svgPathFragment}strokeLeft(e){return this.offsetTo(-e/2,!1)}strokeRight(e){return this.offsetTo(e/2,!0)}getInteriorExtremaTs(){const e=[];return _.each(this.possibleExtremaAngles,t=>{if(this.unitArcSegment.containsAngle(t)){const i=this.tAtAngle(t),n=1e-10;i>n&&i<1-n&&e.push(i)}}),e.sort()}intersection(e){const t=this.getUnitTransform(),i=t.inverseRay2(e),n=this.getUnitArcSegment().intersection(i);return _.map(n,i=>{const n=t.transformPosition2(i.point),r=e.position.distance(n),s=t.inverseNormal2(i.normal);return new md(r,n,s,i.wind,i.t)})}windingIntersection(e){const t=this.getUnitTransform().inverseRay2(e);return this.getUnitArcSegment().windingIntersection(t)}writeToContext(e){e.ellipse?e.ellipse(this._center.x,this._center.y,this._radiusX,this._radiusY,this._rotation,this._startAngle,this._endAngle,this._anticlockwise):(this.getUnitTransform().getMatrix().canvasAppendTransform(e),e.arc(0,0,1,this._startAngle,this._endAngle,this._anticlockwise),this.getUnitTransform().getInverse().canvasAppendTransform(e))}transformed(e){const t=e.timesVector2(al.createPolar(this._radiusX,this._rotation)).minus(e.timesVector2(al.ZERO)),i=e.timesVector2(al.createPolar(this._radiusY,this._rotation+Math.PI/2)).minus(e.timesVector2(al.ZERO)),n=t.angle,r=t.magnitude,s=i.magnitude,a=e.getDeterminant()<0,o=a?!this._anticlockwise:this._anticlockwise,l=a?-this._startAngle:this._startAngle;let h=a?-this._endAngle:this._endAngle;return Math.abs(this._endAngle-this._startAngle)===2*Math.PI&&(h=o?l-2*Math.PI:l+2*Math.PI),new Pp(e.timesVector2(this._center),r,s,n,l,h,o)}getSignedAreaFragment(){const e=this._startAngle,t=this.getActualEndAngle(),i=Math.sin(e),n=Math.sin(t),r=Math.cos(e),s=Math.cos(t);return.5*(this._radiusX*this._radiusY*(t-e)+Math.cos(this._rotation)*(this._radiusX*this._center.y*(r-s)+this._radiusY*this._center.x*(n-i))+Math.sin(this._rotation)*(this._radiusX*this._center.x*(s-r)+this._radiusY*this._center.y*(n-i)))}reversed(){return new Pp(this._center,this._radiusX,this._radiusY,this._rotation,this._endAngle,this._startAngle,!this._anticlockwise)}serialize(){return{type:"EllipticalArc",centerX:this._center.x,centerY:this._center.y,radiusX:this._radiusX,radiusY:this._radiusY,rotation:this._rotation,startAngle:this._startAngle,endAngle:this._endAngle,anticlockwise:this._anticlockwise}}getOverlaps(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e instanceof Pp?Pp.getOverlaps(this,e):null}getConicMatrix(){const e=Pp.computeUnitMatrix(this._center,this._radiusX,this._radiusY,this._rotation).inverted();return e.transposed().multiplyMatrix(Tp).multiplyMatrix(e)}static deserialize(e){return new Pp(new al(e.centerX,e.centerY),e.radiusX,e.radiusY,e.rotation,e.startAngle,e.endAngle,e.anticlockwise)}static getOverlapType(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-4;if(e._center.distance(t._center)<i){const n=Math.abs(e._radiusX-t._radiusX)<i&&Math.abs(e._radiusY-t._radiusY)<i,r=Math.abs(e._radiusX-t._radiusY)<i&&Math.abs(e._radiusY-t._radiusX)<i;if(n&&Math.abs(fl.moduloBetweenDown(e._rotation-t._rotation+Math.PI/2,0,Math.PI)-Math.PI/2)<i)return Cp.MATCHING_OVERLAP;if(r&&Math.abs(fl.moduloBetweenDown(e._rotation-t._rotation,0,Math.PI)-Math.PI/2)<i)return Cp.OPPOSITE_OVERLAP}return Cp.NONE}static getOverlaps(e,t){return Pp.getOverlapType(e,t)===Cp.NONE?[]:bp.getAngularOverlaps(e._startAngle+e._rotation,e.getActualEndAngle()+e._rotation,t._startAngle+t._rotation,t.getActualEndAngle()+t._rotation)}static intersect(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-10;if(Pp.getOverlapType(e,t,i)===Cp.NONE)return im.intersect(e,t);{const n=[],r=e.positionAt(0),s=e.positionAt(1),a=t.positionAt(0),o=t.positionAt(1);return r.equalsEpsilon(a,i)&&n.push(new gd(r.average(a),0,0)),r.equalsEpsilon(o,i)&&n.push(new gd(r.average(o),0,1)),s.equalsEpsilon(a,i)&&n.push(new gd(s.average(a),1,0)),s.equalsEpsilon(o,i)&&n.push(new gd(s.average(o),1,1)),n}}static computeUnitMatrix(e,t,i,n){return Mh.translationFromVector(e).timesMatrix(Mh.rotation2(n)).timesMatrix(Mh.scaling(t,i))}static computeUnitTransform(e,t,i,n){return new xp(Pp.computeUnitMatrix(e,t,i,n))}}class Cp extends Fl{}_defineProperty(Cp,"MATCHING_OVERLAP",new(R=Cp)),_defineProperty(Cp,"OPPOSITE_OVERLAP",new R),_defineProperty(Cp,"NONE",new R),_defineProperty(Cp,"enumeration",new Xl(R)),hd.register("EllipticalArc",Pp);class Vp{constructor(e,t,i){if(_defineProperty(this,"segments",[]),_defineProperty(this,"invalidatedEmitter",new np),_defineProperty(this,"_bounds",null),_defineProperty(this,"_strokedSubpaths",null),_defineProperty(this,"_strokedSubpathsComputed",!1),_defineProperty(this,"_strokedStyles",null),_defineProperty(this,"_invalidatingPoints",!1),this.points=t||(e&&e.length?_.map(e,e=>e.start).concat(e[e.length-1].end):[]),this.closed=!!i,this._invalidateListener=this.invalidate.bind(this),e)for(let n=0;n<e.length;n++)_.each(e[n].getNondegenerateSegments(),e=>{this.addSegmentDirectly(e)})}getBounds(){if(null===this._bounds){const e=Zl.NOTHING.copy();_.each(this.segments,t=>{e.includeBounds(t.getBounds())}),this._bounds=e}return this._bounds}get bounds(){return this.getBounds()}getArcLength(e,t,i){let n=0;for(let r=0;r<this.segments.length;r++)n+=this.segments[r].getArcLength(e,t,i);return n}copy(){return new Vp(this.segments.slice(0),this.points.slice(0),this.closed)}invalidatePoints(){this._invalidatingPoints=!0;const e=this.segments.length;for(let t=0;t<e;t++)this.segments[t].invalidate();this._invalidatingPoints=!1,this.invalidate()}invalidate(){this._invalidatingPoints||(this._bounds=null,this._strokedSubpathsComputed=!1,this.invalidatedEmitter.emit())}addPoint(e){return this.points.push(e),this}addSegmentDirectly(e){return this.segments.push(e),e.invalidationEmitter.addListener(this._invalidateListener),this}addSegment(e){const t=e.getNondegenerateSegments().length;for(let i=0;i<t;i++)this.addSegmentDirectly(e);return this.invalidate(),this}addClosingSegment(){if(this.hasClosingSegment()){const e=this.getClosingSegment();this.addSegmentDirectly(e),this.invalidate(),this.addPoint(this.getFirstPoint()),this.closed=!0}}close(){this.closed=!0,this.addClosingSegment()}getLength(){return this.points.length}getFirstPoint(){return _.first(this.points)}getLastPoint(){return _.last(this.points)}getFirstSegment(){return _.first(this.segments)}getLastSegment(){return _.last(this.segments)}getFillSegments(){const e=this.segments.slice();return this.hasClosingSegment()&&e.push(this.getClosingSegment()),e}isDrawable(){return this.segments.length>0}isClosed(){return this.closed}hasClosingSegment(){return!this.getFirstPoint().equalsEpsilon(this.getLastPoint(),1e-9)}getClosingSegment(){return new op(this.getLastPoint(),this.getFirstPoint())}getClosestPoints(e){return rp.filterClosestToPointResult(_.flatten(this.segments.map(t=>t.getClosestPoints(e))))}writeToContext(e){if(this.isDrawable()){const t=this.getFirstSegment().start;e.moveTo(t.x,t.y);let i=this.segments.length;this.closed&&i>=2&&this.segments[i-1]instanceof op&&i--;for(let n=0;n<i;n++)this.segments[n].writeToContext(e);this.closed&&e.closePath()}}toPiecewiseLinear(e){return new Vp(_.flatten(_.map(this.segments,t=>t.toPiecewiseLinearSegments(e))),void 0,this.closed)}transformed(e){return new Vp(_.map(this.segments,t=>t.transformed(e)),_.map(this.points,t=>e.timesVector2(t)),this.closed)}nonlinearTransformed(e){return new Vp(_.flatten(_.map(this.segments,t=>e.methodName&&t[e.methodName]?t[e.methodName](e):t.toPiecewiseLinearSegments(e))),void 0,this.closed)}getBoundsWithTransform(e){const t=Zl.NOTHING.copy(),i=this.segments.length;for(let n=0;n<i;n++)t.includeBounds(this.segments[n].getBoundsWithTransform(e));return t}offset(e){if(!this.isDrawable())return new Vp([],void 0,this.closed);if(0===e)return new Vp(this.segments.slice(),void 0,this.closed);let t;const i=this.segments.slice(),n=[];for(t=0;t<i.length;t++)n.push(i[t].strokeLeft(2*e));let r=[];for(t=0;t<i.length;t++){if(this.closed||t>0){const n=(t>0?t:i.length)-1,s=i[t].start,a=i[n].endTangent,o=i[t].startTangent,l=a.perpendicular.negated().times(e).angle,h=o.perpendicular.negated().times(e).angle,u=a.perpendicular.dot(o)>0;r.push(new bp(s,Math.abs(e),l,h,u))}r=r.concat(n[t])}return new Vp(r,void 0,this.closed)}stroked(e){if(!this.isDrawable())return[];if(void 0===e&&(e=new dd),this._strokedSubpathsComputed&&this._strokedStyles.equals(e))return this._strokedSubpaths;const t=e.lineWidth;let i,n=[],r=[];const s=this.getFirstSegment(),a=this.getLastSegment(),o=e=>{n=n.concat(e)},l=e=>{r=r.concat(e)},h=a.end.equals(s.start),u=h?null:new op(this.segments[this.segments.length-1].end,this.segments[0].start);for(i=0;i<this.segments.length;i++)i>0&&o(e.leftJoin(this.segments[i].start,this.segments[i-1].endTangent,this.segments[i].startTangent)),o(this.segments[i].strokeLeft(t));for(i=this.segments.length-1;i>=0;i--)i<this.segments.length-1&&l(e.rightJoin(this.segments[i].end,this.segments[i].endTangent,this.segments[i+1].startTangent)),l(this.segments[i].strokeRight(t));let c;return this.closed?(h?(o(e.leftJoin(a.end,a.endTangent,s.startTangent)),l(e.rightJoin(a.end,a.endTangent,s.startTangent))):(o(e.leftJoin(u.start,a.endTangent,u.startTangent)),o(u.strokeLeft(t)),o(e.leftJoin(u.end,u.endTangent,s.startTangent)),l(e.rightJoin(u.end,u.endTangent,s.startTangent)),l(u.strokeRight(t)),l(e.rightJoin(u.start,a.endTangent,u.startTangent))),c=[new Vp(n,void 0,!0),new Vp(r,void 0,!0)]):c=[new Vp(n.concat(e.cap(a.end,a.endTangent)).concat(r).concat(e.cap(s.start,s.startTangent.negated())),void 0,!0)],this._strokedSubpaths=c,this._strokedSubpathsComputed=!0,this._strokedStyles=e.copy(),c}dashed(e,t,i,n){const r=(e,t)=>{const i=e[e.length-1].concat(t[0]),n=e.slice(0,e.length-1).concat([i]).concat(t.slice(1));return n},s=(e,t)=>{if(!e.hasRightFilled||!t.hasLeftFilled)return!1;const i=_.last(_.last(e.segmentArrays)),n=t.segmentArrays[0][0];return i.end.distance(n.start)<1e-5},a=[];for(let o=0;o<this.segments.length;o++){const r=this.segments[o],s=r.getDashValues(e,t,i,n);a.push(s),t+=s.arcLength;const l=[0].concat(s.values).concat([1]),h=s.initiallyInside;s.hasLeftFilled=h,s.hasRightFilled=l.length%2==0?h:!h,s.segmentArrays=[];for(let e=h?0:1;e<l.length-1;e+=2)l[e]!==l[e+1]&&s.segmentArrays.push([r.slice(l[e],l[e+1])])}for(let o=a.length-1;o>=1;o--){const e=a[o-1],t=a[o];s(e,t)&&a.splice(o-1,2,{segmentArrays:r(e.segmentArrays,t.segmentArrays),hasLeftFilled:e.hasLeftFilled,hasRightFilled:t.hasRightFilled})}if(a.length>1&&s(a[a.length-1],a[0])){const e=a.pop(),t=a.shift();a.push({segmentArrays:r(e.segmentArrays,t.segmentArrays),hasLeftFilled:e.hasLeftFilled,hasRightFilled:t.hasRightFilled})}return this.closed&&1===a.length&&1===a[0].segmentArrays.length&&a[0].hasLeftFilled&&a[0].hasRightFilled?[new Vp(a[0].segmentArrays[0],void 0,!0)]:_.flatten(a.map(e=>e.segmentArrays)).map(e=>new Vp(e))}serialize(){return{type:"Subpath",segments:this.segments.map(e=>e.serialize()),points:this.points.map(e=>({x:e.x,y:e.y})),closed:this.closed}}static deserialize(e){return new Vp(e.segments.map(rp.deserialize),e.points.map(e=>new al(e.x,e.y)),e.closed)}}hd.register("Subpath",Vp);const Rp=Vp,Np=Math.random,Mp=(e,t)=>new al(e,t),kp=(e,t,i,n)=>i.copy().subtract(e).multiplyScalar((1-n)/6).add(t);class Lp{constructor(e,t){if(_defineProperty(this,"subpaths",[]),_defineProperty(this,"_invalidatingPoints",!1),_defineProperty(this,"_immutable",!1),_defineProperty(this,"invalidatedEmitter",new np),_defineProperty(this,"lastQuadraticControlPoint",null),_defineProperty(this,"lastCubicControlPoint",null),this._bounds=t?t.copy():null,this.resetControlPoints(),this._invalidateListener=this.invalidate.bind(this),"object"==typeof e)for(let i=0;i<e.length;i++)this.addSubpath(e[i]);e&&"object"!=typeof e&&_.each(Kd.parse(e),e=>{this[e.cmd].apply(this,e.args)}),this.invalidate()}resetControlPoints(){this.lastQuadraticControlPoint=null,this.lastCubicControlPoint=null}setQuadraticControlPoint(e){this.lastQuadraticControlPoint=e,this.lastCubicControlPoint=null}setCubicControlPoint(e){this.lastQuadraticControlPoint=null,this.lastCubicControlPoint=e}moveTo(e,t){return this.moveToPoint(Mp(e,t))}moveToRelative(e,t){return this.moveToPointRelative(Mp(e,t))}moveToPointRelative(e){return this.moveToPoint(this.getRelativePoint().plus(e))}moveToPoint(e){return this.addSubpath((new Rp).addPoint(e)),this.resetControlPoints(),this}lineTo(e,t){return this.lineToPoint(Mp(e,t))}lineToRelative(e,t){return this.lineToPointRelative(Mp(e,t))}lineToPointRelative(e){return this.lineToPoint(this.getRelativePoint().plus(e))}lineToPoint(e){if(this.hasSubpaths()){const t=this.getLastSubpath().getLastPoint(),i=e,n=new op(t,i);this.getLastSubpath().addPoint(i),this.addSegmentAndBounds(n)}else this.ensure(e);return this.resetControlPoints(),this}horizontalLineTo(e){return this.lineTo(e,this.getRelativePoint().y)}horizontalLineToRelative(e){return this.lineToRelative(e,0)}verticalLineTo(e){return this.lineTo(this.getRelativePoint().x,e)}verticalLineToRelative(e){return this.lineToRelative(0,e)}zigZagTo(e,t,i,n,r){return this.zigZagToPoint(new al(e,t),i,n,r)}zigZagToPoint(e,t,i,n){this.ensure(e);const r=this.getLastPoint(),s=e.minus(r),a=s.normalized(),o=a.perpendicular.times(t);let l;l=n?s.magnitude/(i+.5):s.magnitude/i;for(let h=0;h<i;h++){const e=a.times(h*l).plus(r),t=e.plus(a.times(l/4)).plus(o),i=e.plus(a.times(3*l/4)).minus(o);this.lineToPoint(t),this.lineToPoint(i)}if(n){const e=a.times(i*l).plus(r).plus(a.times(l/4)).plus(o);this.lineToPoint(e)}return this.lineToPoint(e)}quadraticCurveTo(e,t,i,n){return this.quadraticCurveToPoint(Mp(e,t),Mp(i,n))}quadraticCurveToRelative(e,t,i,n){return this.quadraticCurveToPointRelative(Mp(e,t),Mp(i,n))}quadraticCurveToPointRelative(e,t){const i=this.getRelativePoint();return this.quadraticCurveToPoint(i.plus(e),i.plus(t))}smoothQuadraticCurveTo(e,t){return this.quadraticCurveToPoint(this.getSmoothQuadraticControlPoint(),Mp(e,t))}smoothQuadraticCurveToRelative(e,t){return this.quadraticCurveToPoint(this.getSmoothQuadraticControlPoint(),Mp(e,t).plus(this.getRelativePoint()))}quadraticCurveToPoint(e,t){this.ensure(e);const i=this.getLastSubpath().getLastPoint(),n=new cp(i,e,t);this.getLastSubpath().addPoint(t);const r=n.getNondegenerateSegments();return _.each(r,e=>{this.addSegmentAndBounds(e)}),this.setQuadraticControlPoint(e),this}cubicCurveTo(e,t,i,n,r,s){return this.cubicCurveToPoint(Mp(e,t),Mp(i,n),Mp(r,s))}cubicCurveToRelative(e,t,i,n,r,s){return this.cubicCurveToPointRelative(Mp(e,t),Mp(i,n),Mp(r,s))}cubicCurveToPointRelative(e,t,i){const n=this.getRelativePoint();return this.cubicCurveToPoint(n.plus(e),n.plus(t),n.plus(i))}smoothCubicCurveTo(e,t,i,n){return this.cubicCurveToPoint(this.getSmoothCubicControlPoint(),Mp(e,t),Mp(i,n))}smoothCubicCurveToRelative(e,t,i,n){return this.cubicCurveToPoint(this.getSmoothCubicControlPoint(),Mp(e,t).plus(this.getRelativePoint()),Mp(i,n).plus(this.getRelativePoint()))}cubicCurveToPoint(e,t,i){this.ensure(e);const n=this.getLastSubpath().getLastPoint(),r=new vp(n,e,t,i).getNondegenerateSegments();return _.each(r,e=>{this.addSegmentAndBounds(e)}),this.getLastSubpath().addPoint(i),this.setCubicControlPoint(t),this}arc(e,t,i,n,r,s){return this.arcPoint(Mp(e,t),i,n,r,s)}arcPoint(e,t,i,n,r){void 0===r&&(r=!1);const s=new bp(e,t,i,n,r),a=s.getStart(),o=s.getEnd();return this.hasSubpaths()&&this.getLastSubpath().getLength()>0&&!a.equals(this.getLastSubpath().getLastPoint())&&this.addSegmentAndBounds(new op(this.getLastSubpath().getLastPoint(),a)),this.hasSubpaths()||this.addSubpath(new Rp),this.getLastSubpath().addPoint(a),this.getLastSubpath().addPoint(o),this.addSegmentAndBounds(s),this.resetControlPoints(),this}ellipticalArc(e,t,i,n,r,s,a,o){return this.ellipticalArcPoint(Mp(e,t),i,n,r,s,a,o)}ellipticalArcPoint(e,t,i,n,r,s,a){void 0===a&&(a=!1);const o=new Pp(e,t,i,n,r,s,a),l=o.start,h=o.end;return this.hasSubpaths()&&this.getLastSubpath().getLength()>0&&!l.equals(this.getLastSubpath().getLastPoint())&&this.addSegmentAndBounds(new op(this.getLastSubpath().getLastPoint(),l)),this.hasSubpaths()||this.addSubpath(new Rp),this.getLastSubpath().addPoint(l),this.getLastSubpath().addPoint(h),this.addSegmentAndBounds(o),this.resetControlPoints(),this}close(){if(this.hasSubpaths()){const e=this.getLastSubpath(),t=new Rp;e.close(),this.addSubpath(t),t.addPoint(e.getFirstPoint())}return this.resetControlPoints(),this}newSubpath(){return this.addSubpath(new Rp),this.resetControlPoints(),this}makeImmutable(){return this._immutable=!0,this.notifyInvalidationListeners(),this}isImmutable(){return this._immutable}ellipticalArcToRelative(e,t,i,n,r,s,a){const o=this.getRelativePoint();return this.ellipticalArcTo(e,t,i,n,r,s+o.x,a+o.y)}ellipticalArcTo(e,t,i,n,r,s,a){const o=new al(s,a);this.ensure(o);const l=this.getLastSubpath().getLastPoint();this.getLastSubpath().addPoint(o),e<0&&(e*=-1),t<0&&(t*=-1);let h=e*e,u=t*t;const c=l.minus(o).dividedScalar(2).rotated(-i),d=c.x*c.x,p=c.y*c.y;let m=new al(e*c.y/t,-t*c.x/e);const g=d/h+p/u;g>1&&(h=(e*=Math.sqrt(g))*e,u=(t*=Math.sqrt(g))*t,m=new al(e*c.y/t,-t*c.x/e)),m.multiplyScalar(Math.sqrt(Math.max(0,(h*u-h*p-u*d)/(h*p+u*d)))),n===r&&m.multiplyScalar(-1);const f=l.blend(o,.5).plus(m.rotated(i)),y=(e,t)=>(e.x*t.y-e.y*t.x>0?1:-1)*e.angleBetween(t),E=new al((c.x-m.x)/e,(c.y-m.y)/t),v=new al((-c.x-m.x)/e,(-c.y-m.y)/t),A=y(al.X_UNIT,E);let b=y(E,v)%(2*Math.PI);!r&&b>0&&(b-=2*Math.PI),r&&b<0&&(b+=2*Math.PI);const S=new Pp(f,e,t,i,A,A+b,!r).getNondegenerateSegments();return _.each(S,e=>{this.addSegmentAndBounds(e)}),this}circle(e,t,i){if("object"==typeof e){const n=e;return i=t,this.arcPoint(n,i,0,2*Math.PI,!1).close()}return this.arcPoint(Mp(e,t),i,0,2*Math.PI,!1).close()}ellipse(e,t,i,n,r){if("object"==typeof e){const s=e;return r=n,n=i,i=t,this.ellipticalArcPoint(s,i,n,r||0,0,2*Math.PI,!1).close()}return this.ellipticalArcPoint(Mp(e,t),i,n,r||0,0,2*Math.PI,!1).close()}rect(e,t,i,n){const r=new Rp;return this.addSubpath(r),r.addPoint(Mp(e,t)),r.addPoint(Mp(e+i,t)),r.addPoint(Mp(e+i,t+n)),r.addPoint(Mp(e,t+n)),this.addSegmentAndBounds(new op(r.points[0],r.points[1])),this.addSegmentAndBounds(new op(r.points[1],r.points[2])),this.addSegmentAndBounds(new op(r.points[2],r.points[3])),r.close(),this.addSubpath(new Rp),this.getLastSubpath().addPoint(Mp(e,t)),this.resetControlPoints(),this}roundRect(e,t,i,n,r,s){const a=e+r,o=e+i-r,l=t+s,h=t+n-s;return r===s?this.arc(o,l,r,-Math.PI/2,0,!1).arc(o,h,r,0,Math.PI/2,!1).arc(a,h,r,Math.PI/2,Math.PI,!1).arc(a,l,r,Math.PI,3*Math.PI/2,!1).close():this.ellipticalArc(o,l,r,s,0,-Math.PI/2,0,!1).ellipticalArc(o,h,r,s,0,0,Math.PI/2,!1).ellipticalArc(a,h,r,s,0,Math.PI/2,Math.PI,!1).ellipticalArc(a,l,r,s,0,Math.PI,3*Math.PI/2,!1).close(),this}polygon(e){const t=e.length;if(t>0){this.moveToPoint(e[0]);for(let i=1;i<t;i++)this.lineToPoint(e[i])}return this.close()}cardinalSpline(e,t){const i=Vo()({tension:0,isClosedLineSegments:!1},t),n=e.length,r=i.isClosedLineSegments?n:n-1;for(let s=0;s<r;s++){let t;t=0!==s||i.isClosedLineSegments?s!==r-1||i.isClosedLineSegments?[e[(s-1+n)%n],e[s%n],e[(s+1)%n],e[(s+2)%n]]:[e[s-1],e[s],e[s+1],e[s+1]]:[e[0],e[0],e[1],e[2]];const a=[t[1],kp(t[0],t[1],t[2],i.tension),kp(t[3],t[2],t[1],i.tension),t[2]];0===s&&(this.ensure(a[0]),this.getLastSubpath().addPoint(a[0])),this.cubicCurveToPoint(a[1],a[2],a[3])}return this}copy(){return new Lp(_.map(this.subpaths,e=>e.copy()),this.bounds)}writeToContext(e){const t=this.subpaths.length;for(let i=0;i<t;i++)this.subpaths[i].writeToContext(e)}getSVGPath(){let e="";const t=this.subpaths.length;for(let i=0;i<t;i++){const t=this.subpaths[i];if(t.isDrawable()){const i=t.segments[0].start;e+=`M ${yd(i.x)} ${yd(i.y)} `;for(let n=0;n<t.segments.length;n++)e+=t.segments[n].getSVGPathFragment()+" ";t.isClosed()&&(e+="Z ")}}return e}transformed(e){const t=_.map(this.subpaths,t=>t.transformed(e)),i=_.reduce(t,(e,t)=>e.union(t.bounds),Zl.NOTHING);return new Lp(t,i)}nonlinearTransformed(e){const t=No({minLevels:0,maxLevels:7,distanceEpsilon:.16,curveEpsilon:e&&e.includeCurvature?.002:null},e),i=_.map(this.subpaths,e=>e.nonlinearTransformed(t)),n=_.reduce(i,(e,t)=>e.union(t.bounds),Zl.NOTHING);return new Lp(i,n)}polarToCartesian(e){return this.nonlinearTransformed(No({pointMap:e=>al.createPolar(e.y,e.x),methodName:"polarToCartesian"},e))}toPiecewiseLinear(e){return this.nonlinearTransformed(e)}containsPoint(e){const t=al.X_UNIT.copy();let i=0;for(;i<5;){if(i++,!_.some(this.subpaths,i=>_.some(i.segments,i=>{const n=i.start.minus(e),r=n.magnitude;return 0!==r&&(n.divideScalar(r),n.subtract(t),n.magnitudeSquared<1e-9)})))break;t.rotate(ep.nextDouble())}return 0!==this.windingIntersection(new Dd(e,t))}intersection(e){let t=[];const i=this.subpaths.length;for(let n=0;n<i;n++){const i=this.subpaths[n];if(i.isDrawable()){const n=i.segments.length;for(let r=0;r<n;r++){const n=i.segments[r];t=t.concat(n.intersection(e))}i.hasClosingSegment()&&(t=t.concat(i.getClosingSegment().intersection(e)))}}return _.sortBy(t,e=>e.distance)}interiorIntersectsLineSegment(e,t){const i=e.blend(t,.5);if(this.containsPoint(i))return!0;const n=t.minus(e),r=n.magnitude;if(0===r)return!1;n.normalize();const s=this.intersection(new Dd(e,n));for(let a=0;a<s.length;a++)if(s[a].distance<=r)return!0;return!1}windingIntersection(e){let t=0;const i=this.subpaths.length;for(let n=0;n<i;n++){const i=this.subpaths[n];if(i.isDrawable()){const n=i.segments.length;for(let r=0;r<n;r++)t+=i.segments[r].windingIntersection(e);i.hasClosingSegment()&&(t+=i.getClosingSegment().windingIntersection(e))}}return t}intersectsBounds(e){if(this.bounds.intersection(e).equals(this.bounds))return!0;const t=new Dd(new al(e.minX,e.minY),new al(1,0)),i=new Dd(new al(e.minX,e.minY),new al(0,1)),n=new Dd(new al(e.maxX,e.maxY),new al(-1,0)),r=new Dd(new al(e.maxX,e.maxY),new al(0,-1));let s,a;const o=this.intersection(t).concat(this.intersection(n));for(a=0;a<o.length;a++)if(s=o[a].point,s.x>=e.minX&&s.x<=e.maxX)return!0;const l=this.intersection(i).concat(this.intersection(r));for(a=0;a<l.length;a++)if(s=l[a].point,s.y>=e.minY&&s.y<=e.maxY)return!0;return!1}getStrokedShape(e){let t=[];const i=Zl.NOTHING.copy();let n=this.subpaths.length;for(let r=0;r<n;r++){const i=this.subpaths[r].stroked(e);t=t.concat(i)}n=t.length;for(let r=0;r<n;r++)i.includeBounds(t[r].bounds);return new Lp(t,i)}getOffsetShape(e){const t=[],i=Zl.NOTHING.copy();let n=this.subpaths.length;for(let r=0;r<n;r++)t.push(this.subpaths[r].offset(e));n=t.length;for(let r=0;r<n;r++)i.includeBounds(t[r].bounds);return new Lp(t,i)}getDashedShape(e,t,i){const n=Vo()({distanceEpsilon:1e-10,curveEpsilon:1e-8},i);return new Lp(_.flatten(this.subpaths.map(i=>i.dashed(e,t,n.distanceEpsilon,n.curveEpsilon))))}getBounds(){if(null===this._bounds){const e=Zl.NOTHING.copy();_.each(this.subpaths,t=>{e.includeBounds(t.getBounds())}),this._bounds=e}return this._bounds}get bounds(){return this.getBounds()}getStrokedBounds(e){let t=!0;for(let i=0;i<this.subpaths.length;i++){const e=this.subpaths[i];if(e.isDrawable()&&!e.isClosed()){t=!1;break}for(let i=0;i<e.segments.length;i++){if(!e.segments[i].areStrokedBoundsDilated()){t=!1;break}}}if(t)return this.bounds.dilated(e.lineWidth/2);{const t=this.bounds.copy();for(let i=0;i<this.subpaths.length;i++){const n=this.subpaths[i].stroked(e);for(let e=0;e<n.length;e++)t.includeBounds(n[e].bounds)}return t}}getSimplifiedAreaShape(){return mm.simplifyNonZero(this)}getBoundsWithTransform(e,t){const i=Zl.NOTHING.copy(),n=this.subpaths.length;for(let r=0;r<n;r++){const t=this.subpaths[r];i.includeBounds(t.getBoundsWithTransform(e))}return t&&i.includeBounds(this.getStrokedShape(t).getBoundsWithTransform(e)),i}getApproximateArea(e){const t=this.bounds.minX,i=this.bounds.minY,n=this.bounds.width,r=this.bounds.height,s=n*r;let a=0;const o=new al(0,0);for(let l=0;l<e;l++)o.x=t+Np()*n,o.y=i+Np()*r,this.containsPoint(o)&&a++;return s*a/e}getNonoverlappingArea(){return Math.abs(_.sum(this.subpaths.map(e=>_.sum(e.getFillSegments().map(e=>e.getSignedAreaFragment())))))}getArea(){return this.getSimplifiedAreaShape().getNonoverlappingArea()}getApproximateCentroid(e){const t=this.bounds.minX,i=this.bounds.minY,n=this.bounds.width,r=this.bounds.height;let s=0;const a=new al(0,0),o=new al(0,0);for(let l=0;l<e;l++)o.x=t+Np()*n,o.y=i+Np()*r,this.containsPoint(o)&&(a.add(o),s++);return a.dividedScalar(s)}getClosestPoints(e){return rp.filterClosestToPointResult(_.flatten(this.subpaths.map(t=>t.getClosestPoints(e))))}getClosestPoint(e){return this.getClosestPoints(e)[0].closestPoint}invalidatePoints(){this._invalidatingPoints=!0;const e=this.subpaths.length;for(let t=0;t<e;t++)this.subpaths[t].invalidatePoints();this._invalidatingPoints=!1,this.invalidate()}toString(){return`new phet.kite.Shape( '${this.getSVGPath()}' )`}invalidate(){this._invalidatingPoints||(this._bounds=null,this.notifyInvalidationListeners())}notifyInvalidationListeners(){this.invalidatedEmitter.emit()}addSegmentAndBounds(e){this.getLastSubpath().addSegment(e),this.invalidate()}ensure(e){this.hasSubpaths()||(this.addSubpath(new Rp),this.getLastSubpath().addPoint(e))}addSubpath(e){return this.subpaths.push(e),e.invalidatedEmitter.addListener(this._invalidateListener),this.invalidate(),this}hasSubpaths(){return this.subpaths.length>0}getLastSubpath(){return _.last(this.subpaths)}getLastPoint(){return this.getLastSubpath().getLastPoint()}getLastSegment(){if(!this.hasSubpaths())return null;const e=this.getLastSubpath();return e.isDrawable()?e.getLastSegment():null}getSmoothQuadraticControlPoint(){const e=this.getLastPoint();return this.lastQuadraticControlPoint?e.plus(e.minus(this.lastQuadraticControlPoint)):e}getSmoothCubicControlPoint(){const e=this.getLastPoint();return this.lastCubicControlPoint?e.plus(e.minus(this.lastCubicControlPoint)):e}getRelativePoint(){let e=al.ZERO;if(this.hasSubpaths()){const t=this.getLastSubpath();t.points.length&&(e=t.getLastPoint())}return e}shapeUnion(e){return mm.binaryResult(this,e,mm.BINARY_NONZERO_UNION)}shapeIntersection(e){return mm.binaryResult(this,e,mm.BINARY_NONZERO_INTERSECTION)}shapeDifference(e){return mm.binaryResult(this,e,mm.BINARY_NONZERO_DIFFERENCE)}shapeXor(e){return mm.binaryResult(this,e,mm.BINARY_NONZERO_XOR)}shapeClip(e,t){return mm.clipShape(e,this,t)}getArcLength(e,t,i){let n=0;for(let r=0;r<this.subpaths.length;r++)n+=this.subpaths[r].getArcLength(e,t,i);return n}serialize(){return{type:"Shape",subpaths:this.subpaths.map(e=>e.serialize())}}static deserialize(e){return new Lp(e.subpaths.map(Rp.deserialize))}static rectangle(e,t,i,n){return(new Lp).rect(e,t,i,n)}static roundRect(e,t,i,n,r,s){return(new Lp).roundRect(e,t,i,n,r,s)}static roundedRectangleWithRadii(e,t,i,n,r){let s=r&&r.topLeft||0,a=r&&r.topRight||0,o=r&&r.bottomLeft||0,l=r&&r.bottomRight||0;const h=s+a;h>i&&h>0&&(s=s/h*i,a=a/h*i);const u=o+l;u>i&&u>0&&(o=o/u*i,l=l/u*i);const c=s+o;c>n&&c>0&&(s=s/c*n,o=o/c*n);const d=a+l;d>n&&d>0&&(a=a/d*n,l=l/d*n);const p=new Lp,m=e+i,g=t+n;return l>0?p.arc(m-l,g-l,l,0,Math.PI/2,!1):p.moveTo(m,g),o>0?p.arc(e+o,g-o,o,Math.PI/2,Math.PI,!1):p.lineTo(e,g),s>0?p.arc(e+s,t+s,s,Math.PI,3*Math.PI/2,!1):p.lineTo(e,t),a>0?p.arc(m-a,t+a,a,3*Math.PI/2,2*Math.PI,!1):p.lineTo(m,t),p.close(),p}static boundsOffsetWithRadii(e,t,i){const n=e.withOffsets(t.left,t.top,t.right,t.bottom);return Lp.roundedRectangleWithRadii(n.minX,n.minY,n.width,n.height,i)}static polygon(e){return(new Lp).polygon(e)}static bounds(e){return(new Lp).rect(e.minX,e.minY,e.maxX-e.minX,e.maxY-e.minY)}static lineSegment(e,t,i,n){return"number"==typeof e?(new Lp).moveTo(e,t).lineTo(i,n):(new Lp).moveToPoint(e).lineToPoint(t)}static regularPolygon(e,t){const i=new Lp;return _.each(_.range(e),n=>{const r=al.createPolar(t,2*Math.PI*n/e);0===n?i.moveToPoint(r):i.lineToPoint(r)}),i.close()}static circle(e,t,i){return void 0===t?(new Lp).circle(0,0,e):(new Lp).circle(e,t,i)}static ellipse(e,t,i,n,r){return void 0===n?(new Lp).ellipse(0,0,e,t,i):(new Lp).ellipse(e,t,i,n,r)}static arc(e,t,i,n,r,s){return(new Lp).arc(e,t,i,n,r,s)}static union(e){return mm.unionNonZero(e)}static intersection(e){return mm.intersectionNonZero(e)}static xor(e){return mm.xorNonZero(e)}static segments(e,t){return new Lp([new Rp(e,void 0,!!t)])}}_defineProperty(Lp,"rect",(N=Lp).rectangle),_defineProperty(Lp,"roundRectangle",N.roundRect),hd.register("Shape",Lp);const Ip=Lp;let Bp=0;class Dp{constructor(e,t){this.id=++Bp,this.initialize(e,t)}initialize(e,t){return this.edge=e,this.face=null,this.isReversed=t,this.signedAreaFragment=e.signedAreaFragment*(t?-1:1),this.startVertex=null,this.endVertex=null,this.sortVector=this.sortVector||new al(0,0),this.data=null,this.updateReferences(),this}serialize(){return{type:"HalfEdge",id:this.id,edge:this.edge.id,face:null===this.face?null:this.face.id,isReversed:this.isReversed,signedAreaFragment:this.signedAreaFragment,startVertex:null===this.startVertex?null:this.startVertex.id,endVertex:null===this.endVertex?null:this.endVertex.id,sortVector:al.Vector2IO.toStateObject(this.sortVector),data:this.data}}dispose(){this.edge=null,this.face=null,this.startVertex=null,this.endVertex=null,this.data=null,this.freeToPool()}getNext(e){for(let t=1;;t++){let i=this.endVertex.incidentHalfEdges.indexOf(this)-t;i<0&&(i+=this.endVertex.incidentHalfEdges.length);const n=this.endVertex.incidentHalfEdges[i].getReversed();if(!e||e(n.edge))return n}}updateReferences(){this.startVertex=this.isReversed?this.edge.endVertex:this.edge.startVertex,this.endVertex=this.isReversed?this.edge.startVertex:this.edge.endVertex}getEndTangent(){return this.isReversed?this.edge.segment.startTangent:this.edge.segment.endTangent.negated()}getEndCurvature(){return this.isReversed?-this.edge.segment.curvatureAt(0):this.edge.segment.curvatureAt(1)}getReversed(){return this.isReversed?this.edge.forwardHalf:this.edge.reversedHalf}getDirectionalSegment(){return this.isReversed?this.edge.segment.reversed():this.edge.segment}freeToPool(){Dp.pool.freeToPool(this)}}_defineProperty(Dp,"pool",new Mo(Dp)),hd.register("HalfEdge",Dp);const Op=Dp;function qp(e){if(e){for(;e.length;)e.pop();return e}return[]}wo.register("cleanArray",qp);const Yp=qp;let Hp=0;class Gp{constructor(e){this.id=++Hp,this.initialize(e)}initialize(e){return this.point=e,this.incidentHalfEdges=Yp(this.incidentHalfEdges),this.visited=!1,this.visitIndex=0,this.lowIndex=0,this.data=null,this.internalData={},this}serialize(){return{type:"Vertex",id:this.id,point:al.Vector2IO.toStateObject(this.point),incidentHalfEdges:this.incidentHalfEdges.map(e=>e.id),visited:this.visited,visitIndex:this.visitIndex,lowIndex:this.lowIndex}}dispose(){this.point=al.ZERO,Yp(this.incidentHalfEdges),this.freeToPool()}sortEdges(){const e=[];for(let n=0;n<this.incidentHalfEdges.length;n++){const t=this.incidentHalfEdges[n];e.push(t.sortVector.setXY(t.getEndTangent().angle,t.getEndCurvature()))}const t=1e-4-Math.PI;let i=!1;for(;!i;){i=!0;for(let n=0;n<e.length;n++)e[n].x<t&&(i=!1);if(!i)for(let t=0;t<e.length;t++){const i=e[t];i.x-=1.62594024516,i.x<-Math.PI-1e-4&&(i.x+=2*Math.PI)}}this.incidentHalfEdges.sort(Gp.edgeComparison)}static edgeComparison(e,t){const i=e.sortVector.x,n=t.sortVector.x;if(Math.abs(i-n)>1e-5||i!==n&&e.edge.segment instanceof op&&t.edge.segment instanceof op)return i<n?-1:1;{const i=e.sortVector.y,n=t.sortVector.y;if(Math.abs(i-n)>1e-5)return i<n?1:-1;{const i=.999;return e.getDirectionalSegment().subdivided(i)[1].curvatureAt(0)<t.getDirectionalSegment().subdivided(i)[1].curvatureAt(0)?1:-1}}}freeToPool(){Gp.pool.freeToPool(this)}}_defineProperty(Gp,"pool",new Mo(Gp)),hd.register("Vertex",Gp);const Fp=Gp;let zp=0;class Up{constructor(e,t,i){this.id=++zp,this.initialize(e,t,i)}initialize(e,t,i){return this.segment=e,this.startVertex=t,this.endVertex=i,this.signedAreaFragment=e.getSignedAreaFragment(),this.forwardHalf=Op.pool.create(this,!1),this.reversedHalf=Op.pool.create(this,!0),this.visited=!1,this.data=null,this.internalData={},this}serialize(){return{type:"Edge",id:this.id,segment:this.segment.serialize(),startVertex:null===this.startVertex?null:this.startVertex.id,endVertex:null===this.endVertex?null:this.endVertex.id,signedAreaFragment:this.signedAreaFragment,forwardHalf:this.forwardHalf.serialize(),reversedHalf:this.reversedHalf.serialize(),visited:this.visited,data:this.data}}dispose(){this.segment=null,this.startVertex=null,this.endVertex=null,this.forwardHalf.dispose(),this.reversedHalf.dispose(),this.forwardHalf=null,this.reversedHalf=null,this.data=null,this.freeToPool()}getOtherVertex(e){return this.startVertex===e?this.endVertex:this.startVertex}updateReferences(){this.forwardHalf.updateReferences(),this.reversedHalf.updateReferences()}freeToPool(){Up.pool.freeToPool(this)}}_defineProperty(Up,"pool",new Mo(Up)),hd.register("Edge",Up);const Wp=Up;let Xp=0;class jp{constructor(e){this.id=++Xp,this.initialize(e)}initialize(e){return this.boundary=e,this.holes=Yp(this.holes),this.windingMap=null,this.filled=null,e&&this.addBoundaryFaceReferences(e),this}serialize(){return{type:"Face",id:this.id,boundary:null===this.boundary?null:this.boundary.id,holes:this.holes.map(e=>e.id),windingMap:this.windingMap,filled:this.filled}}dispose(){this.boundary=null,Yp(this.holes),this.windingMap=null,this.filled=null,this.freeToPool()}addBoundaryFaceReferences(e){for(let t=0;t<e.halfEdges.length;t++)e.halfEdges[t].face=this}recursivelyAddHoles(e){this.holes.push(e),this.addBoundaryFaceReferences(e);for(let t=0;t<e.childBoundaries.length;t++)this.recursivelyAddHoles(e.childBoundaries[t])}freeToPool(){jp.pool.freeToPool(this)}}_defineProperty(jp,"pool",new Mo(jp)),hd.register("Face",jp);const Qp=jp;let Kp=0;class Zp{constructor(e,t){this.id=++Kp,this.initialize(e,t)}initialize(e,t){return this.shapeId=e,this.closed=t,this.halfEdges=Yp(this.halfEdges),this}serialize(){return{type:"Loop",id:this.id,shapeId:this.shapeId,closed:this.closed,halfEdges:this.halfEdges.map(e=>e.id)}}toSubpath(){const e=[];for(let t=0;t<this.halfEdges.length;t++)e.push(this.halfEdges[t].getDirectionalSegment());return new Rp(e,void 0,this.closed)}dispose(){Yp(this.halfEdges),this.freeToPool()}freeToPool(){Zp.pool.freeToPool(this)}}_defineProperty(Zp,"pool",new Mo(Zp)),hd.register("Loop",Zp);const Jp=Zp;let $p=0;class em{constructor(e){this.id=++$p,this.initialize(e)}initialize(e){return this.halfEdges=e,this.signedArea=this.computeSignedArea(),this.bounds=this.computeBounds(),this.childBoundaries=Yp(this.childBoundaries),this}serialize(){return{type:"Boundary",id:this.id,halfEdges:this.halfEdges.map(e=>e.id),signedArea:this.signedArea,bounds:Zl.Bounds2IO.toStateObject(this.bounds),childBoundaries:this.childBoundaries.map(e=>e.id)}}dispose(){this.halfEdges=[],Yp(this.childBoundaries),this.freeToPool()}isInner(){return this.signedArea>0}computeSignedArea(){let e=0;for(let t=0;t<this.halfEdges.length;t++)e+=this.halfEdges[t].signedAreaFragment;return e}computeBounds(){const e=Zl.NOTHING.copy();for(let t=0;t<this.halfEdges.length;t++)e.includeBounds(this.halfEdges[t].edge.segment.getBounds());return e}computeExtremePoint(e){const t=[];for(let n=0;n<this.halfEdges.length;n++)t.push(this.halfEdges[n].edge.segment.transformed(e.getMatrix()));const i=Zl.NOTHING.copy();for(let n=0;n<t.length;n++)i.includeBounds(t[n].getBounds());for(let n=0;n<t.length;n++){const r=t[n];if(r.getBounds().top===i.top){let t=new al(0,Number.POSITIVE_INFINITY);const i=[0,1].concat(r.getInteriorExtremaTs());for(let e=0;e<i.length;e++){const n=r.positionAt(i[e]);n.y<t.y&&(t=n)}return e.inversePosition2(t)}}throw new Error("Should not reach here if we have segments")}computeExtremeRay(e){const t=this.computeExtremePoint(e),i=e.inverseDelta2(new al(0,-1)).normalized();return new Dd(t.plus(i.timesScalar(1e-4)),i)}hasHalfEdge(e){for(let t=0;t<this.halfEdges.length;t++)if(this.halfEdges[t]===e)return!0;return!1}toSubpath(){const e=[];for(let t=0;t<this.halfEdges.length;t++)e.push(this.halfEdges[t].getDirectionalSegment());return new Rp(e,null,!0)}freeToPool(){em.pool.freeToPool(this)}}_defineProperty(em,"pool",new Mo(em)),hd.register("Boundary",em);const tm=em;class im{constructor(e,t,i,n,r,s,a,o,l,h){this.initialize(e,t,i,n,r,s,a,o,l,h)}initialize(e,t,i,n,r,s,a,o,l,h){return this.a=e,this.b=t,this.atMin=i,this.atMax=n,this.btMin=r,this.btMax=s,this.aMin=a,this.aMax=o,this.bMin=l,this.bMax=h,this}pushSubdivisions(e){const t=this,i=(t.atMax+t.atMin)/2,n=(t.btMax+t.btMin)/2;if(i===this.atMin||i===this.atMax||n===this.btMin||n===this.btMax)return void e.push(this);const r=t.a.positionAt(i),s=t.b.positionAt(n);im.boxIntersects(t.aMin,r,t.bMin,s)&&e.push(im.pool.create(t.a,t.b,t.atMin,i,t.btMin,n,t.aMin,r,t.bMin,s)),im.boxIntersects(r,t.aMax,t.bMin,s)&&e.push(im.pool.create(t.a,t.b,i,t.atMax,t.btMin,n,r,t.aMax,t.bMin,s)),im.boxIntersects(t.aMin,r,s,t.bMax)&&e.push(im.pool.create(t.a,t.b,t.atMin,i,n,t.btMax,t.aMin,r,s,t.bMax)),im.boxIntersects(r,t.aMax,s,t.bMax)&&e.push(im.pool.create(t.a,t.b,i,t.atMax,n,t.btMax,r,t.aMax,s,t.bMax)),this.freeToPool()}distance(e){const t=this.atMin-e.atMin,i=this.atMax-e.atMax,n=this.btMin-e.btMin,r=this.btMax-e.btMax;return t*t+i*i+n*n+r*r}clean(){this.a=null,this.b=null,this.aMin=null,this.aMax=null,this.bMin=null,this.bMax=null}static intersect(e,t){if(!e.bounds.intersectsBounds(t.bounds))return[];const i=im.getIntersectionRanges(e,t),n=[];for(let s=0;s<i.length;s++){const e=i[s];let t=!1;e:for(let i=0;i<n.length;i++){const r=n[i];for(let i=0;i<r.length;i++){const n=r[i];if(e.distance(n)<1e-13){r.push(e),t=!0;break e}}}t||n.push([e])}const r=[];for(let s=0;s<n.length;s++){const i=n[s];let a=0,o=0;for(let e=0;e<i.length;e++)a+=i[e].atMin+i[e].atMax,o+=i[e].btMin+i[e].btMax;a/=2*i.length,o/=2*i.length;const l=e.positionAt(a),h=t.positionAt(o);r.push(new gd(l.average(h),a,o))}for(let s=0;s<i.length;s++)i[s].freeToPool();return im.cleanPool(),r}static getIntersectionRanges(e,t){const i=e.getInteriorExtremaTs(),n=t.getInteriorExtremaTs(),r=_.zip([0].concat(i),i.concat([1])),s=_.zip([0].concat(n),n.concat([1]));let a=[];for(let o=0;o<r.length;o++)for(let i=0;i<s.length;i++){const n=r[o][0],l=r[o][1],h=s[i][0],u=s[i][1],c=e.positionAt(n),d=e.positionAt(l),p=t.positionAt(h),m=t.positionAt(u);im.boxIntersects(c,d,p,m)&&a.push(im.pool.create(e,t,n,l,h,u,c,d,p,m))}for(let o=0;o<50;o++){const e=[];for(let t=a.length-1;t>=0;t--)a[t].pushSubdivisions(e);a=e}return a}static boxIntersects(e,t,i,n){const r=Math.max(Math.min(e.x,t.x),Math.min(i.x,n.x)),s=Math.max(Math.min(e.y,t.y),Math.min(i.y,n.y)),a=Math.min(Math.max(e.x,t.x),Math.max(i.x,n.x)),o=Math.min(Math.max(e.y,t.y),Math.max(i.y,n.y));return a-r>=0&&o-s>=0}static cleanPool(){im.pool.forEach(e=>e.clean())}freeToPool(){im.pool.freeToPool(this)}}function nm(e,t){const i=_.indexOf(e,t);e.splice(i,1)}_defineProperty(im,"pool",new Mo(im)),hd.register("BoundsIntersection",im),wo.register("arrayRemove",nm);const rm=nm;let sm=1;const am=[];class om{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e-6;this.rootNode=lm.pool.create(this,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY),this.rootNode.isBlack=!0,this.epsilon=e,this.items=new Set}query(e,t){const i=sm++;return!!this.rootNode&&this.rootNode.query(e,this.getMinX(e,this.epsilon),this.getMaxX(e,this.epsilon),i,t)}addItem(e){const t=this.getMinX(e,this.epsilon),i=this.getMaxX(e,this.epsilon);this.rootNode.split(t,this),this.rootNode.split(i,this),this.rootNode.addItem(e,t,i),this.items.add(e)}removeItem(e){this.rootNode.removeItem(e,this.getMinX(e,this.epsilon),this.getMaxX(e,this.epsilon)),this.items.delete(e)}audit(){this.rootNode.audit(this.epsilon,this.items,[])}toString(){let e=0,t="";return function i(n){t+=`${_.repeat("  ",e)}${n.toString()}\n`,e++,n.hasChildren()&&(i(n.left),i(n.right)),e--}(this.rootNode),t}}class lm{constructor(e,t,i){this.items=[],this.initialize(e,t,i)}initialize(e,t,i){return this.min=t,this.max=i,this.splitValue=null,this.left=null,this.right=null,this.parent=null,this.tree=e,this.isBlack=!1,Yp(this.items),this}contains(e){return e>=this.min&&e<=this.max}hasChildren(){return null!==this.splitValue}query(e,t,i,n,r){let s=!1;if(this.min<=i&&this.max>=t){for(let e=0;e<this.items.length;e++){var a,o;const t=this.items[e];if((null===(a=t.internalData)||void 0===a||!a.segmentId||(null===(o=t.internalData)||void 0===o?void 0:o.segmentId)<n)&&(t.internalData.segmentId=n,s=r(t),s))return!0}this.hasChildren()&&(s||(s=this.left.query(e,t,i,n,r)),s||(s=this.right.query(e,t,i,n,r)))}return s}swapChild(e,t){this.left===e?this.left=t:this.right=t}hasChild(e){return this.left===e||this.right===e}otherChild(e){return this.left===e?this.right:this.left}leftRotate(e){if(this.right.hasChildren()){const t=this.right,i=this.left,n=t.left,r=t.right;t.parent=this.parent,this.parent?this.parent.swapChild(this,t):e.rootNode=t,this.parent=t,n.parent=this,t.left=this,this.left=i,this.right=n,this.max=n.max,this.splitValue=i.max,t.min=this.min,t.splitValue=this.max;const s=Yp(am);s.push(...this.items),Yp(this.items);for(let e=i.items.length-1;e>=0;e--){const t=i.items[e],r=n.items.indexOf(t);r>=0&&(i.items.splice(e,1),n.items.splice(r,1),this.items.push(t))}n.items.push(...t.items),r.items.push(...t.items),Yp(t.items),t.items.push(...s)}}rightRotate(e){const t=this.left,i=this.right,n=t.left,r=t.right;t.parent=this.parent,this.parent?this.parent.swapChild(this,t):e.rootNode=t,this.parent=t,r.parent=this,t.right=this,this.left=r,this.right=i,this.min=r.min,this.splitValue=i.min,t.max=this.max,t.splitValue=this.min;const s=Yp(am);s.push(...this.items),Yp(this.items);for(let a=i.items.length-1;a>=0;a--){const e=i.items[a],t=r.items.indexOf(e);t>=0&&(i.items.splice(a,1),r.items.splice(t,1),this.items.push(e))}n.items.push(...t.items),r.items.push(...t.items),Yp(t.items),t.items.push(...s)}fixRedBlack(e){if(this.parent){const t=this.parent;if(!t.isBlack){const i=t.parent,n=i.otherChild(t);n.isBlack?t===i.left?this===t.right?(t.leftRotate(e),t.parent.isBlack=!0,t.parent.parent.isBlack=!1,t.parent.parent.rightRotate(e)):(t.isBlack=!0,i.isBlack=!1,i.rightRotate(e)):this===t.left?(t.rightRotate(e),t.parent.isBlack=!0,t.parent.parent.isBlack=!1,t.parent.parent.leftRotate(e)):(t.isBlack=!0,i.isBlack=!1,i.leftRotate(e)):(t.isBlack=!0,n.isBlack=!0,i.isBlack=!1,i.fixRedBlack(e))}}else this.isBlack=!0}split(e,t){if(e!==this.min&&e!==this.max)if(this.hasChildren())this.splitValue!==e&&(e>this.splitValue?this.right:this.left).split(e,t);else{this.splitValue=e;const i=lm.pool.create(this.tree,this.min,e);i.parent=this,this.left=i;const n=lm.pool.create(this.tree,e,this.max);if(n.parent=this,this.right=n,!this.isBlack&&this.parent){const e=this.parent,r=e.otherChild(this);r.isBlack?(this===e.left?(e.rightRotate(t),i.isBlack=!0):(e.leftRotate(t),n.isBlack=!0),this.fixRedBlack(t)):(this.isBlack=!0,r.isBlack=!0,e.isBlack=!1,e.fixRedBlack(t))}}}addItem(e,t,i){this.min>i||this.max<t||(this.min>=t&&this.max<=i?this.items.push(e):this.hasChildren()&&(this.left.addItem(e,t,i),this.right.addItem(e,t,i)))}removeItem(e,t,i){this.min>i||this.max<t||(this.min>=t&&this.max<=i?rm(this.items,e):this.hasChildren()&&(this.left.removeItem(e,t,i),this.right.removeItem(e,t,i)))}audit(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2]}toString(){return`[${this.min} ${this.max}] split:${this.splitValue} ${this.isBlack?"black":"red"} ${this.items}`}freeToPool(){lm.pool.freeToPool(this)}}_defineProperty(lm,"pool",new Mo(lm)),hd.register("SegmentTree",om);class hm extends om{getMinX(e,t){return e.segment.bounds.left-t}getMaxX(e,t){return e.segment.bounds.right+t}}hd.register("EdgeSegmentTree",hm);class um extends om{getMinX(e,t){return e.point.x-t}getMaxX(e,t){return e.point.x+t}}hd.register("VertexSegmentTree",um);let cm=0,dm=0;class pm{constructor(){this.vertices=[],this.edges=[],this.innerBoundaries=[],this.outerBoundaries=[],this.boundaries=[],this.shapeIds=[],this.loops=[],this.unboundedFace=Qp.pool.create(null),this.faces=[this.unboundedFace]}serialize(){return{type:"Graph",vertices:this.vertices.map(e=>e.serialize()),edges:this.edges.map(e=>e.serialize()),boundaries:this.boundaries.map(e=>e.serialize()),innerBoundaries:this.innerBoundaries.map(e=>e.id),outerBoundaries:this.outerBoundaries.map(e=>e.id),shapeIds:this.shapeIds,loops:this.loops.map(e=>e.serialize()),unboundedFace:this.unboundedFace.id,faces:this.faces.map(e=>e.serialize())}}static deserialize(e){const t=new pm,i={},n={},r={},s={},a={},o={};return t.vertices=e.vertices.map(e=>{const t=new Fp(al.Vector2IO.fromStateObject(e.point));return i[e.id]=t,t.visited=e.visited,t.visitIndex=e.visitIndex,t.lowIndex=e.lowIndex,t}),t.edges=e.edges.map(e=>{const t=new Wp(rp.deserialize(e.segment),i[e.startVertex],i[e.endVertex]);n[e.id]=t,t.signedAreaFragment=e.signedAreaFragment;const s=(e,t)=>{r[t.id]=e,e.isReversed=t.isReversed,e.signedAreaFragment=t.signedAreaFragment,e.startVertex=i[t.startVertex.id],e.endVertex=i[t.endVertex.id],e.sortVector=al.Vector2IO.fromStateObject(t.sortVector),e.data=t.data};return s(t.forwardHalf,e.forwardHalf),s(t.reversedHalf,e.reversedHalf),t.visited=e.visited,t.data=e.data,t}),e.vertices.forEach((e,i)=>{t.vertices[i].incidentHalfEdges=e.incidentHalfEdges.map(e=>r[e])}),t.boundaries=e.boundaries.map(e=>{const t=tm.pool.create(e.halfEdges.map(e=>r[e]));return s[e.id]=t,t.signedArea=e.signedArea,t.bounds=Zl.Bounds2IO.fromStateObject(e.bounds),t}),e.boundaries.forEach((e,i)=>{t.boundaries[i].childBoundaries=e.childBoundaries.map(e=>s[e])}),t.innerBoundaries=e.innerBoundaries.map(e=>s[e]),t.outerBoundaries=e.outerBoundaries.map(e=>s[e]),t.shapeIds=e.shapeIds,t.loops=e.loops.map(e=>{const t=new Jp(e.shapeId,e.closed);return a[e.id]=t,t.halfEdges=e.halfEdges.map(e=>r[e]),t}),t.faces=e.faces.map((e,i)=>{const n=0===i?t.unboundedFace:new Qp(s[e.boundary]);return o[e.id]=n,n.holes=e.holes.map(e=>s[e]),n.windingMap=e.windingMap,n.filled=e.filled,n}),e.edges.forEach((e,i)=>{const n=t.edges[i];n.forwardHalf.face=null===e.forwardHalf.face?null:o[e.forwardHalf.face],n.reversedHalf.face=null===e.reversedHalf.face?null:o[e.reversedHalf.face]}),t}addShape(e,t,i){for(let n=0;n<t.subpaths.length;n++)this.addSubpath(e,t.subpaths[n],i)}addSubpath(e,t,i){if(i=Po({ensureClosed:!0},i),this.shapeIds.indexOf(e)<0&&this.shapeIds.push(e),0===t.segments.length)return;const n=t.closed||i.ensureClosed,r=i.ensureClosed?t.getFillSegments():t.segments;let s;const a=[];for(s=0;s<r.length;s++){let e=s-1;e<0&&(e=r.length-1);let t=r[e].end;const i=r[s].start;n||0!==s||(t=i),i.equals(t)?a.push(Fp.pool.create(i)):a.push(Fp.pool.create(i.average(t)))}n||a.push(Fp.pool.create(r[r.length-1].end));const o=Jp.pool.create(e,n);for(s=0;s<r.length;s++){let e=s+1;n&&e===r.length&&(e=0);const t=Wp.pool.create(r[s],a[s],a[e]);o.halfEdges.push(t.forwardHalf),this.addEdge(t)}this.loops.push(o),this.vertices.push(...a)}computeSimplifiedFaces(){this.eliminateOverlap(),this.eliminateSelfIntersection(),this.eliminateIntersection(),this.collapseVertices(),this.removeBridges(),this.removeLowOrderVertices(),this.orderVertexEdges(),this.extractFaces(),this.computeBoundaryTree(),this.computeWindingMap()}computeFaceInclusion(e){for(let t=0;t<this.faces.length;t++){const i=this.faces[t];i.filled=e(i.windingMap)}}createFilledSubGraph(){const e=new pm,t={};for(let i=0;i<this.edges.length;i++){const n=this.edges[i];if(n.forwardHalf.face.filled!==n.reversedHalf.face.filled){if(!t[n.startVertex.id]){const i=Fp.pool.create(n.startVertex.point);e.vertices.push(i),t[n.startVertex.id]=i}if(!t[n.endVertex.id]){const i=Fp.pool.create(n.endVertex.point);e.vertices.push(i),t[n.endVertex.id]=i}const i=t[n.startVertex.id],r=t[n.endVertex.id];e.addEdge(Wp.pool.create(n.segment,i,r))}}return e.collapseAdjacentEdges(),e.orderVertexEdges(),e.extractFaces(),e.computeBoundaryTree(),e.fillAlternatingFaces(),e}facesToShape(){const e=[];for(let t=0;t<this.faces.length;t++){const i=this.faces[t];if(i.filled){e.push(i.boundary.toSubpath());for(let t=0;t<i.holes.length;t++)e.push(i.holes[t].toSubpath())}}return new hd.Shape(e)}dispose(){for(;this.boundaries.length;)this.boundaries.pop().dispose();for(Yp(this.innerBoundaries),Yp(this.outerBoundaries);this.loops.length;)this.loops.pop().dispose();for(;this.faces.length;)this.faces.pop().dispose();for(;this.vertices.length;)this.vertices.pop().dispose();for(;this.edges.length;)this.edges.pop().dispose()}addEdge(e){this.edges.push(e),e.startVertex.incidentHalfEdges.push(e.reversedHalf),e.endVertex.incidentHalfEdges.push(e.forwardHalf)}removeEdge(e){rm(this.edges,e),rm(e.startVertex.incidentHalfEdges,e.reversedHalf),rm(e.endVertex.incidentHalfEdges,e.forwardHalf)}replaceEdgeInLoops(e,t){const i=[];for(let n=0;n<t.length;n++)i.push(t[t.length-1-n].getReversed());for(let n=0;n<this.loops.length;n++){const r=this.loops[n];for(let n=r.halfEdges.length-1;n>=0;n--){const s=r.halfEdges[n];if(s.edge===e){const a=s===e.forwardHalf?t:i;Array.prototype.splice.apply(r.halfEdges,[n,1].concat(a))}}}}collapseAdjacentEdges(){let e=!0;for(;e;){e=!1;for(let t=0;t<this.vertices.length;t++){const i=this.vertices[t];if(2===i.incidentHalfEdges.length){const t=i.incidentHalfEdges[0].edge,n=i.incidentHalfEdges[1].edge;let r=t.segment,s=n.segment;const a=t.getOtherVertex(i),o=n.getOtherVertex(i);if(t.startVertex===i&&(r=r.reversed()),n.endVertex===i&&(s=s.reversed()),r instanceof op&&s instanceof op&&r.tangentAt(0).normalized().distance(s.tangentAt(0).normalized())<1e-6){this.removeEdge(t),this.removeEdge(n),t.dispose(),n.dispose(),rm(this.vertices,i),i.dispose();const r=new op(a.point,o.point);this.addEdge(new Wp(r,a,o)),e=!0;break}}}}}eliminateOverlap(){const e=new window.FlatQueue,t=new hm(1e-4),i=dm++,n=t=>{const i=t.segment.bounds;e.push({start:!0,edge:t},i.minY-1e-4),e.push({start:!1,edge:t},i.maxY+1e-4)},r=e=>{e.internalData.removedId=i};for(let a=0;a<this.edges.length;a++)n(this.edges[a]);const s=[];for(;e.length;){const a=e.pop(),o=a.edge;if(o.internalData.removedId!==i)if(a.start){let e,i,a=!1;if(t.query(o,t=>{const n=o.segment.getOverlaps(t.segment);if(null!==n&&n.length)for(let r=0;r<n.length;r++){const s=n[r];if(Math.abs(s.t1-s.t0)>1e-5&&Math.abs(s.qt1-s.qt0)>1e-5)return i=this.splitOverlap(o,t,s),a=!0,e=t,!0}return!1}),a){t.removeItem(e),r(e),r(o);for(let e=0;e<i.length;e++)n(i[e]);s.push(o),s.push(e)}else t.addItem(o)}else t.removeItem(o)}for(let a=0;a<s.length;a++)s[a].dispose()}splitOverlap(e,t,i){const n=[],r=e.segment,s=t.segment;this.removeEdge(e),this.removeEdge(t);let a=i.t0,o=i.t1,l=i.qt0,h=i.qt1;a<1e-5&&(a=0),o>.99999&&(o=1),l<1e-5&&(l=0),h>.99999&&(h=1);const u=a>0?r.subdivided(a)[0]:null,c=l>0?s.subdivided(l)[0]:null,d=o<1?r.subdivided(o)[1]:null,p=h<1?s.subdivided(h)[1]:null;let m,g,f=r;a>0&&(f=f.subdivided(a)[1]),o<1&&(f=f.subdivided(fl.linear(a,1,0,1,o))[0]),u&&c?(m=Fp.pool.create(f.start),this.vertices.push(m)):m=u?i.a>0?t.startVertex:t.endVertex:e.startVertex,d&&p?(g=Fp.pool.create(f.end),this.vertices.push(g)):g=d?i.a>0?t.endVertex:t.startVertex:e.endVertex;const y=Wp.pool.create(f,m,g);let E,v,A,b;n.push(y),u&&(E=Wp.pool.create(u,e.startVertex,m),n.push(E)),d&&(v=Wp.pool.create(d,g,e.endVertex),n.push(v)),c&&(A=Wp.pool.create(c,t.startVertex,i.a>0?m:g),n.push(A)),p&&(b=Wp.pool.create(p,i.a>0?g:m,t.endVertex),n.push(b));for(let T=0;T<n.length;T++)this.addEdge(n[T]);const S=(u?[E]:[]).concat([y]).concat(d?[v]:[]),_=(c?[A]:[]).concat([y]).concat(p?[b]:[]),x=[],w=[];for(let T=0;T<S.length;T++)x.push(S[T].forwardHalf);for(let T=0;T<_.length;T++){const e=_[T]!==y||i.a>0;w.push(e?_[T].forwardHalf:_[T].reversedHalf)}return this.replaceEdgeInLoops(e,x),this.replaceEdgeInLoops(t,w),n}eliminateSelfIntersection(){for(let e=this.edges.length-1;e>=0;e--){const t=this.edges[e],i=t.segment;if(i instanceof vp){const e=i.getSelfIntersection();if(e){const n=i.subdivisions([e.aT,e.bT]),r=Fp.pool.create(e.point);this.vertices.push(r);const s=Wp.pool.create(n[0],t.startVertex,r),a=Wp.pool.create(n[1],r,r),o=Wp.pool.create(n[2],r,t.endVertex);this.removeEdge(t),this.addEdge(s),this.addEdge(a),this.addEdge(o),this.replaceEdgeInLoops(t,[s.forwardHalf,a.forwardHalf,o.forwardHalf]),t.dispose()}}}}eliminateIntersection(){const e=new window.FlatQueue,t=new hm(1e-4),i=dm++,n=t=>{const i=t.segment.bounds;e.push({start:!0,edge:t},i.minY-1e-4),e.push({start:!1,edge:t},i.maxY+1e-4)},r=e=>{e.internalData.removedId=i};for(let a=0;a<this.edges.length;a++)n(this.edges[a]);const s=[];for(;e.length;){const a=e.pop(),o=a.edge;if(o.internalData.removedId!==i)if(a.start){let e,i,a,l=!1;if(t.query(o,t=>{const n=o.segment,r=t.segment;let s=rp.intersect(n,r);if(s=s.filter(e=>{const t=e.point;return pm.isInternal(t,e.aT,n,.1*1e-5,1e-6)||pm.isInternal(t,e.bT,r,.1*1e-5,1e-6)}),s.length){const n=s[0],r=this.simpleSplit(o,t,n.aT,n.bT,n.point);if(r)return l=!0,e=t,i=r.addedEdges,a=r.removedEdges,!0}return!1}),l){a.includes(o)?(r(o),s.push(o)):t.addItem(o),a.includes(e)&&(t.removeItem(e),r(e),s.push(e));for(let e=0;e<i.length;e++)n(i[e])}else t.addItem(o)}else t.removeItem(o)}for(let a=0;a<s.length;a++)s[a].dispose()}simpleSplit(e,t,i,n,r){const s=pm.isInternal(r,i,e.segment,.01*1e-5,1e-6),a=pm.isInternal(r,n,t.segment,.01*1e-5,1e-6);let o=null;s?a?(o=Fp.pool.create(r),this.vertices.push(o)):o=n<.5?t.startVertex:t.endVertex:o=i<.5?e.startVertex:e.endVertex;let l=!1;const h=[],u=[];return s&&o!==e.startVertex&&o!==e.endVertex&&(h.push(...this.splitEdge(e,i,o)),u.push(e),l=!0),a&&o!==t.startVertex&&o!==t.endVertex&&(h.push(...this.splitEdge(t,n,o)),u.push(t),l=!0),l?{addedEdges:h,removedEdges:u}:null}splitEdge(e,t,i){const n=e.segment.subdivided(t),r=Wp.pool.create(n[0],e.startVertex,i),s=Wp.pool.create(n[1],i,e.endVertex);return this.removeEdge(e),this.addEdge(r),this.addEdge(s),this.replaceEdgeInLoops(e,[r.forwardHalf,s.forwardHalf]),[r,s]}collapseVertices(){const e=new window.FlatQueue,t=new um(1e-4),i=dm++,n=t=>{e.push({start:!0,vertex:t},t.point.y-1e-4),e.push({start:!1,vertex:t},t.point.y+1e-4)},r=e=>{e.internalData.removedId=i};for(let a=0;a<this.vertices.length;a++)n(this.vertices[a]);const s=[];for(;e.length;){const a=e.pop(),o=a.vertex;if(o.internalData.removedId!==i)if(a.start){let e,i,a=!1;if(t.query(o,t=>{const n=o.point.distance(t.point);if(n<1e-5){const r=Fp.pool.create(0===n?o.point:o.point.average(t.point));this.vertices.push(r),rm(this.vertices,o),rm(this.vertices,t);for(let e=this.edges.length-1;e>=0;e--){const i=this.edges[e],n=i.startVertex===o||i.startVertex===t,s=i.endVertex===o||i.endVertex===t;if(n&&s){if((i.segment.bounds.width>1e-5||i.segment.bounds.height>1e-5)&&(i.segment instanceof vp||i.segment instanceof bp||i.segment instanceof Pp)){const e=Wp.pool.create(i.segment,r,r);this.addEdge(e),this.replaceEdgeInLoops(i,[e.forwardHalf])}else this.replaceEdgeInLoops(i,[]);this.removeEdge(i),i.dispose()}else n?(i.startVertex=r,r.incidentHalfEdges.push(i.reversedHalf),i.updateReferences()):s&&(i.endVertex=r,r.incidentHalfEdges.push(i.forwardHalf),i.updateReferences())}return i=[r],a=!0,e=t,!0}return!1}),a){t.removeItem(e),r(e),r(o);for(let e=0;e<i.length;e++)n(i[e]);s.push(o),s.push(e)}else t.addItem(o)}else t.removeItem(o)}for(let a=0;a<s.length;a++)s[a].dispose()}markBridges(e,t){t.visited=!0,t.visitIndex=t.lowIndex=cm++;for(let i=0;i<t.incidentHalfEdges.length;i++){const n=t.incidentHalfEdges[i].edge,r=t.incidentHalfEdges[i].startVertex;r.visited?n.visited||(t.lowIndex=Math.min(t.lowIndex,r.visitIndex)):(n.visited=!0,r.parent=t,this.markBridges(e,r),t.lowIndex=Math.min(t.lowIndex,r.lowIndex),r.lowIndex>t.visitIndex&&e.push(n))}}removeBridges(){const e=[];for(let t=0;t<this.vertices.length;t++){const i=this.vertices[t];i.visited||this.markBridges(e,i)}for(let t=0;t<e.length;t++){const i=e[t];this.removeEdge(i),this.replaceEdgeInLoops(i,[]),i.dispose()}}removeLowOrderVertices(){let e=!0;for(;e;){e=!1;for(let t=this.vertices.length-1;t>=0;t--){const i=this.vertices[t];if(i.incidentHalfEdges.length<2){for(let e=0;e<i.incidentHalfEdges.length;e++){const t=i.incidentHalfEdges[e].edge;this.removeEdge(t),this.replaceEdgeInLoops(t,[]),t.dispose()}this.vertices.splice(t,1),i.dispose(),e=!0;break}}}}orderVertexEdges(){for(let e=0;e<this.vertices.length;e++)this.vertices[e].sortEdges()}extractFaces(){const e=[];for(let t=0;t<this.edges.length;t++)e.push(this.edges[t].forwardHalf),e.push(this.edges[t].reversedHalf);for(;e.length;){const t=[];let i=e[0];const n=i;for(;i&&(rm(e,i),t.push(i),i=i.getNext(),i!==n););const r=tm.pool.create(t);(r.signedArea>0?this.innerBoundaries:this.outerBoundaries).push(r),this.boundaries.push(r)}for(let t=0;t<this.innerBoundaries.length;t++)this.faces.push(Qp.pool.create(this.innerBoundaries[t]))}computeBoundaryTree(){const e=[],t=new xp(Mh.rotation2(1.5729657));for(let i=0;i<this.outerBoundaries.length;i++){const n=this.outerBoundaries[i],r=n.computeExtremeRay(t);let s=null,a=Number.POSITIVE_INFINITY,o=!1;for(let e=0;e<this.edges.length;e++){const t=this.edges[e],i=t.segment.intersection(r);for(let e=0;e<i.length;e++){const n=i[e];n.distance<a&&(s=t,a=n.distance,o=n.wind)}}if(null===s)e.push(n);else{const e=o<0?s.reversedHalf:s.forwardHalf;this.getBoundaryOfHalfEdge(e).childBoundaries.push(n)}}e.forEach(this.unboundedFace.recursivelyAddHoles.bind(this.unboundedFace));for(let i=0;i<this.faces.length;i++){const e=this.faces[i];null!==e.boundary&&e.boundary.childBoundaries.forEach(e.recursivelyAddHoles.bind(e))}}computeWindingMap(){const e=this.edges.slice(),t={};for(let i=0;i<this.shapeIds.length;i++)t[this.shapeIds[i]]=0;for(this.unboundedFace.windingMap=t;e.length;)for(let t=e.length-1;t>=0;t--){const i=e[t],n=i.forwardHalf,r=i.reversedHalf,s=n.face,a=r.face,o=null!==s.windingMap,l=null!==a.windingMap;if(o&&l)e.splice(t,1);else{if(!o&&!l)continue;{const e=o?s:a,t=o?a:s,n={};for(let r=0;r<this.shapeIds.length;r++){const t=this.shapeIds[r],s=this.computeDifferential(i,t);n[t]=e.windingMap[t]+s*(o?-1:1)}t.windingMap=n}}}}computeDifferential(e,t){let i=0;for(let n=0;n<this.loops.length;n++){const r=this.loops[n];if(r.shapeId===t)for(let t=0;t<r.halfEdges.length;t++){const n=r.halfEdges[t];n===e.forwardHalf?i++:n===e.reversedHalf&&i--}}return i}fillAlternatingFaces(){let e=0;for(let t=0;t<this.faces.length;t++)this.faces[t].filled=null,e++;for(this.unboundedFace.filled=!1,e--;e;)for(let t=0;t<this.edges.length;t++){const i=this.edges[t],n=i.forwardHalf.face,r=i.reversedHalf.face,s=null===n.filled,a=null===r.filled;s&&!a?(n.filled=!r.filled,e--):!s&&a&&(r.filled=!n.filled,e--)}}getBoundaryOfHalfEdge(e){for(let t=0;t<this.boundaries.length;t++){const i=this.boundaries[t];if(i.hasHalfEdge(e))return i}throw new Error("Could not find boundary")}static isInternal(e,t,i,n,r){return t>r&&t<1-r&&e.distance(i.start)>n&&e.distance(i.end)>n}static BINARY_NONZERO_UNION(e){return 0!==e[0]||0!==e[1]}static BINARY_NONZERO_INTERSECTION(e){return 0!==e[0]&&0!==e[1]}static BINARY_NONZERO_DIFFERENCE(e){return 0!==e[0]&&0===e[1]}static BINARY_NONZERO_XOR(e){return 1==(0!==e[0]^0!==e[1])}static binaryResult(e,t,i){const n=new pm;n.addShape(0,e),n.addShape(1,t),n.computeSimplifiedFaces(),n.computeFaceInclusion(i);const r=n.createFilledSubGraph(),s=r.facesToShape();return n.dispose(),r.dispose(),s}static unionNonZero(e){const t=new pm;for(let r=0;r<e.length;r++)t.addShape(r,e[r]);t.computeSimplifiedFaces(),t.computeFaceInclusion(t=>{for(let i=0;i<e.length;i++)if(0!==t[i])return!0;return!1});const i=t.createFilledSubGraph(),n=i.facesToShape();return t.dispose(),i.dispose(),n}static intersectionNonZero(e){const t=new pm;for(let r=0;r<e.length;r++)t.addShape(r,e[r]);t.computeSimplifiedFaces(),t.computeFaceInclusion(t=>{for(let i=0;i<e.length;i++)if(0===t[i])return!1;return!0});const i=t.createFilledSubGraph(),n=i.facesToShape();return t.dispose(),i.dispose(),n}static xorNonZero(e){const t=new pm;for(let r=0;r<e.length;r++)t.addShape(r,e[r]);t.computeSimplifiedFaces(),t.computeFaceInclusion(t=>{let i=!1;for(let n=0;n<e.length;n++)0!==t[n]&&(i=!i);return i});const i=t.createFilledSubGraph(),n=i.facesToShape();return t.dispose(),i.dispose(),n}static simplifyNonZero(e){const t=new pm;t.addShape(0,e),t.computeSimplifiedFaces(),t.computeFaceInclusion(e=>0!==e[0]);const i=t.createFilledSubGraph(),n=i.facesToShape();return t.dispose(),i.dispose(),n}static clipShape(e,t,i){let n,r,s;i=Po({includeExterior:!1,includeBoundary:!0,includeInterior:!0},i);const a=pm.simplifyNonZero(e),o=new pm;for(o.addShape(0,t,{ensureClosed:!1}),o.addShape(1,a),o.eliminateOverlap(),o.eliminateSelfIntersection(),o.eliminateIntersection(),o.collapseVertices(),n=0;n<o.loops.length;n++)if(s=o.loops[n],1===s.shapeId)for(r=0;r<s.halfEdges.length;r++)s.halfEdges[r].edge.data=!0;const l=[];for(n=0;n<o.loops.length;n++)if(s=o.loops[n],0===s.shapeId){let e=[];for(r=0;r<s.halfEdges.length;r++){const t=s.halfEdges[r];(t.edge.data?i.includeBoundary:a.containsPoint(t.edge.segment.positionAt(.5))?i.includeInterior:i.includeExterior)?e.push(t.getDirectionalSegment()):e.length&&(l.push(new Rp(e,void 0,s.closed)),e=[])}e.length&&l.push(new Rp(e,void 0,s.closed))}return o.dispose(),new hd.Shape(l)}}hd.register("Graph",pm);const mm=pm;class gm extends np{setTimeout(e,t){let i=0;const n=r=>{i+=r,1e3*i>=t&&this.hasListener(n)&&(e(),this.removeListener(n))};return this.addListener(n),n}clearTimeout(e){this.hasListener(e)&&this.removeListener(e)}setInterval(e,t){let i=0;const n=r=>{for(i+=r;1e3*i>=t&&this.hasListener(n);)e(),i-=t/1e3};return this.addListener(n),n}clearInterval(e){this.hasListener(e)&&this.removeListener(e)}runOnNextTick(e){this.setTimeout(e,0)}}ko.register("Timer",gm);const fm=new gm;ko.register("animationFrameTimer",fm);const ym=fm;Y=jo.EVENT_TYPE_MODEL;class Em extends Fl{}_defineProperty(Em,"USER",new(H=Em)),_defineProperty(Em,Y,new H),_defineProperty(Em,"WRAPPER",new H),_defineProperty(Em,"OPT_OUT",new H),_defineProperty(Em,"enumeration",new Xl(H)),_defineProperty(Em,"phetioType",bh(H)),zo.register("EventType",Em);const vm=Em,Am=_.hasIn(window,"phet.chipper.packageObject")?phet.chipper.packageObject:{name:"placeholder"},bm=_.hasIn(window,"phet.preloads.phetio"),Sm=bm&&phet.preloads.phetio.queryParameters.phetioPrintMissingTandems,_m=!_.hasIn(Am,"phet.phet-io.validation")||!!Am.phet["phet-io"].validation,xm=window.QueryStringMachine&&QueryStringMachine.containsKey("phetioValidation"),wm=bm&&xm?!!phet.preloads.phetio.queryParameters.phetioValidation:bm&&_m,Tm=bm&&wm&&!Sm,Pm=phetio.PhetioIDUtils.INTER_TERM_SEPARATOR,Cm=phetio.PhetioIDUtils.ARCHETYPE,Vm={required:[],optional:[]},Rm=[],Nm=[];class Mm{constructor(e,t,i){_defineProperty(this,"children",{}),_defineProperty(this,"isDisposed",!1),this.parentTandem=e,this.name=t,this.phetioID=this.parentTandem?window.phetio.PhetioIDUtils.append(this.parentTandem.phetioID,this.name):this.name;const n=Vo()({required:!0,supplied:!0,isValidTandemName:e=>Mm.getRegexFromCharacterClass().test(e)},i);this.children={},this.parentTandem&&this.parentTandem.addChild(t,this),this.required=n.required,this.supplied=n.supplied}static getRegexFromCharacterClass(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jo.BASE_TANDEM_CHARACTER_CLASS;return new RegExp(`^[${e}]+$`)}static onMissingTandem(e){if(Sm&&!e.supplied){const t=Mm.captureStackTrace();e.required?Vm.required.push({phetioID:e.phetioID,stack:t}):t.includes("Font")||Vm.optional.push({phetioID:e.phetioID,stack:t})}}static captureStackTrace(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0;const t=Object.getOwnPropertyDescriptor(Error,"stackTraceLimit");if(t&&(t.writable||t.set&&"function"==typeof t.set)){const t=Error.stackTraceLimit;Error.stackTraceLimit=e;const i=(new Error).stack;return Error.stackTraceLimit=t,i}return(new Error).stack}addPhetioObject(e){if(bm){if(!this.required&&!this.supplied)return;if(Mm.launched)for(let t=0;t<Rm.length;t++)Rm[t].addPhetioObject(e);else Mm.bufferedPhetioObjects.push(e)}}hasAncestor(e){return this.parentTandem===e||!(!this.parentTandem||!this.parentTandem.hasAncestor(e))}removePhetioObject(e){if(this.supplied){if(bm)if(Mm.launched)for(let t=0;t<Rm.length;t++)Rm[t].removePhetioObject(e);else rm(Mm.bufferedPhetioObjects,e);e.tandem.dispose()}}getExtendedOptions(e){return Po({supplied:this.supplied,required:this.required},e)}createTandem(e,t){if(t=this.getExtendedOptions(t),this.hasChild(e)){const t=this.children[e];return t}return new Mm(this,e,t)}createTandem1Indexed(e,t,i){return this.createTandem(`${e}${t+1}`,i)}hasChild(e){return this.children.hasOwnProperty(e)}addChild(e,t){this.children[e]=t}iterateDescendants(e){for(const t in this.children)this.children.hasOwnProperty(t)&&(e(this.children[t]),this.children[t].iterateDescendants(e))}removeChild(e){delete this.children[e]}dispose(){this.parentTandem.removeChild(this.name),this.parentTandem=null,this.isDisposed=!0}getArchetypalPhetioID(){return window.phetio.PhetioIDUtils.getArchetypalPhetioID(this.phetioID)}createGroupTandem(e){return this.children[e]?this.children[e]:new km(this,e)}equals(e){return this.phetioID===e.phetioID}static addPhetioObjectListener(e){Rm.push(e)}static launch(){for(Mm.launched=!0;Nm.length>0;)Nm.shift()()}static unlaunch(){Mm.launched=!1,Mm.bufferedPhetioObjects.length=0,Nm.length=0}static addLaunchListener(e){Nm.push(e)}createTandemFromPhetioID(e){return this.createTandem(e.split(window.phetio.PhetioIDUtils.SEPARATOR).join(Pm),{isValidTandemName:e=>Mm.getRegexFromCharacterClass(jo.BASE_DERIVED_TANDEM_CHARACTER_CLASS).test(e)})}static getStringsTandem(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mm.ROOT.name;return Mm.STRINGS.createTandem(e)}static getDerivedStringsTandem(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mm.ROOT.name;return Mm.getStringsTandem(e).createTandem("derivedStrings")}}G=Mm,_defineProperty(Mm,"SCREEN_TANDEM_NAME_SUFFIX","Screen"),_defineProperty(Mm,"missingTandems",Vm),_defineProperty(Mm,"PHET_IO_ENABLED",bm),_defineProperty(Mm,"API_GENERATION",G.PHET_IO_ENABLED&&(phet.preloads.phetio.queryParameters.phetioPrintAPI||phet.preloads.phetio.queryParameters.phetioCompareAPI)),_defineProperty(Mm,"VALIDATION",Tm),_defineProperty(Mm,"METADATA_KEY","_metadata"),_defineProperty(Mm,"DATA_KEY","_data"),_defineProperty(Mm,"launched",!1),_defineProperty(Mm,"bufferedPhetioObjects",[]),_defineProperty(Mm,"RootTandem",class extends G{createTandem(e,t){if(G.VALIDATION){e===window.phetio.PhetioIDUtils.GLOBAL_COMPONENT_NAME||"requiredTandem"===e||"optionalTandem"===e||"test"===e||e===window.phetio.PhetioIDUtils.GENERAL_COMPONENT_NAME||_.endsWith(e,G.SCREEN_TANDEM_NAME_SUFFIX)}return super.createTandem(e,t)}}),_defineProperty(Mm,"ROOT",new G.RootTandem(null,_.camelCase(Am.name))),_defineProperty(Mm,"GENERAL",G.ROOT.createTandem(window.phetio.PhetioIDUtils.GENERAL_COMPONENT_NAME)),_defineProperty(Mm,"ROOT_TEST",G.ROOT.createTandem("test")),_defineProperty(Mm,"GENERAL_MODEL",G.GENERAL.createTandem(window.phetio.PhetioIDUtils.MODEL_COMPONENT_NAME)),_defineProperty(Mm,"GENERAL_VIEW",G.GENERAL.createTandem(window.phetio.PhetioIDUtils.VIEW_COMPONENT_NAME)),_defineProperty(Mm,"GENERAL_CONTROLLER",G.GENERAL.createTandem(window.phetio.PhetioIDUtils.CONTROLLER_COMPONENT_NAME)),_defineProperty(Mm,"GLOBAL",G.ROOT.createTandem(window.phetio.PhetioIDUtils.GLOBAL_COMPONENT_NAME)),_defineProperty(Mm,"GLOBAL_MODEL",G.GLOBAL.createTandem(window.phetio.PhetioIDUtils.MODEL_COMPONENT_NAME)),_defineProperty(Mm,"GLOBAL_VIEW",G.GLOBAL.createTandem(window.phetio.PhetioIDUtils.VIEW_COMPONENT_NAME)),_defineProperty(Mm,"COLORS",G.GLOBAL_VIEW.createTandem(window.phetio.PhetioIDUtils.COLORS_COMPONENT_NAME)),_defineProperty(Mm,"STRINGS",G.GENERAL_MODEL.createTandem(window.phetio.PhetioIDUtils.STRINGS_COMPONENT_NAME)),_defineProperty(Mm,"OPTIONAL",G.ROOT.createTandem("optionalTandem",{required:!1,supplied:!1})),_defineProperty(Mm,"OPT_OUT",G.OPTIONAL),_defineProperty(Mm,"REQUIRED",G.ROOT.createTandem("requiredTandem",{required:Tm||Sm,supplied:!1})),_defineProperty(Mm,"PREFERENCES",G.GLOBAL_MODEL.createTandem("preferences")),Mm.addLaunchListener(()=>{for(;Mm.bufferedPhetioObjects.length>0;){const e=Mm.bufferedPhetioObjects.shift();e.tandem.addPhetioObject(e)}});class km extends Mm{constructor(e,t){super(e,t),this.groupName=t,this.groupMemberIndex=0}createNextTandem(){const e=this.parentTandem.createTandem(`${this.groupName}${this.groupMemberIndex}`);return this.groupMemberIndex++,e}}zo.register("Tandem",Mm);const Lm=Mm,Im=new el("ValueIO",{isValidValue:_.stubTrue,supertype:el.ObjectIO,toStateObject:e=>e,fromStateObject:e=>e,stateSchema:Zo.asValue("*",{isValidValue:_.stubTrue})});zo.register("ValueIO",Im);const Bm=Im,Dm=new el("StringIO",{supertype:Bm,valueType:"string",documentation:"IO Type for Javascript's string primitive type",stateSchema:Zo.asValue("string",{valueType:"string"}),toStateObject:_.identity});zo.register("StringIO",Dm);const Om=Dm,qm=new el("LinkedElementIO",{isValidValue:()=>!0,documentation:"A LinkedElement",toStateObject:e=>({elementID:e.element.tandem.phetioID}),applyState:_.noop,stateSchema:{elementID:Om}});zo.register("LinkedElementIO",qm);const Ym=qm,Hm=["phetioDynamicElement","phetioEventType","phetioIsArchetype","phetioPlayback","phetioReadOnly","phetioState","phetioTypeName"];const Gm=new class{constructor(){_defineProperty(this,"apiMismatches",[]),_defineProperty(this,"simHasStarted",!1),_defineProperty(this,"enabled",!1),_defineProperty(this,"everyPhetioType",{})}onSimStarted(){this.enabled&&phet.joist.sim.allScreensCreated&&(this.validateOverridesFile(),this.validatePreferencesModel()),phet.preloads.phetio.queryParameters.phetioPrintAPIProblems&&this.apiMismatches&&console.log("PhET-iO API problems detected: ",this.apiMismatches),this.simHasStarted=!0}validatePreferencesModel(){Object.keys(phet.phetio.phetioEngine.phetioElementMap).filter(e=>e.includes(".preferencesModel.")).forEach(e=>{let t=phet.phetio.phetioEngine.phetioElementMap[e];for(;t instanceof Zm;)t=t.element})}onPhetioObjectRemoved(e){if(!this.enabled)return;const t=e.tandem.phetioID;e.phetioDynamicElement||this.assertAPIError({phetioID:t,ruleInViolation:"2. Any static, registered PhetioObject can never be deregistered."})}onPhetioObjectAdded(e){if(!this.enabled)return;const t=e.phetioType;this.everyPhetioType[t.typeName]||(this.everyPhetioType[t.typeName]=t),this.simHasStarted&&phet.axon.animationFrameTimer.runOnNextTick(()=>{if(e.phetioDynamicElement){if(phet.preloads.phetio.createArchetypes&&!e.isDisposed){const t=e.tandem.getArchetypalPhetioID(),i=phet.phetio.phetioEngine.getPhetioElement(t).getMetadata();this.checkDynamicInstanceAgainstArchetype(e,i,"simulation archetype")}}else this.assertAPIError({phetioID:e.tandem.phetioID,ruleInViolation:"1. After startup, only dynamic instances prescribed by the baseline file can be registered."})})}validateOverridesFile(){const e=phet.phetio.phetioEngine.getPhetioElementsBaseline();for(const t in window.phet.preloads.phetio.phetioElementsOverrides){t.includes(Cm);if(phet.preloads.phetio.createArchetypes||e.hasOwnProperty(t))if(e.hasOwnProperty(t)){const i=window.phet.preloads.phetio.phetioElementsOverrides[t],n=e[t];0===Object.keys(i).length&&this.assertAPIError({phetioID:t,ruleInViolation:"4. Any schema entries in the overrides file must be different from its baseline counterpart.",message:"no metadata keys found for this override."});for(const e in i)n.hasOwnProperty(e)||this.assertAPIError({phetioID:t,ruleInViolation:"8. Any schema entries in the overrides file must be different from its baseline counterpart.",message:"phetioID metadata key not found in the baseline: "+e}),i[e]===n[e]&&this.assertAPIError({phetioID:t,ruleInViolation:"8. Any schema entries in the overrides file must be different from its baseline counterpart.",message:"phetioID metadata override value is the same as the corresponding metadata value in the baseline."})}else this.assertAPIError({phetioID:t,ruleInViolation:"3. Any schema entries in the overrides file must exist in the baseline file.",message:"phetioID expected in the baseline file but does not exist"});else;}}assertAPIError(e){e.phetioID?(e.phetioID,e.ruleInViolation):e.ruleInViolation;this.apiMismatches.push(e),this.simHasStarted||phet.preloads.phetio.queryParameters.phetioPrintAPIProblems}checkDynamicInstanceAgainstArchetype(e,t,i){const n=e.getMetadata();Hm.forEach(r=>{"phetioDynamicElement"!==r&&"phetioArchetypePhetioID"!==r&&"phetioIsArchetype"!==r&&t[r]!==n[r]&&e.tandem&&this.assertAPIError({phetioID:e.tandem.phetioID,ruleInViolation:"5. Dynamic element metadata should match the archetype in the API.",source:i,message:"mismatched metadata: "+r})})}};zo.register("phetioAPIValidation",Gm);const Fm=Gm;class zm{constructor(e){_defineProperty(this,"_disposeEmitter",new np),_defineProperty(this,"_isDisposable",!0),_defineProperty(this,"_isDisposed",!1),e&&this.initializeDisposable(e)}getDisposeEmitter(){return this._disposeEmitter}get disposeEmitter(){return this.getDisposeEmitter()}get isDisposed(){return this._isDisposed}get isDisposable(){return this._isDisposable}set isDisposable(e){this._isDisposable=e}initializeDisposable(e){e&&e.hasOwnProperty("isDisposable")&&(this._isDisposable=e.isDisposable)}dispose(){this._disposeEmitter.emit(),this._disposeEmitter.dispose(),this._isDisposed=!0}static assertNotDisposable(){}}ko.register("Disposable",zm);const Um=zm;class Wm{static add(e,t){Wm.map.set(e.phetioID,t),Wm.inverseMap.set(t,e.phetioID);const i=e.phetioID.split(".");let n=Wm.root;for(let r=0;r<i.length;r++){const e=i[r];n[e]||(n[e]={}),n=n[e]}n._value=t,Wm.addedEmitter.emit(e.phetioID,t)}static remove(e){if(Wm.inverseMap.has(e)){const t=Wm.inverseMap.get(e);Wm.removedEmitter.emit(t,e),Wm.inverseMap.delete(e),Wm.map.delete(t);const i=t.split("."),n=[];let r=Wm.root;for(let e=0;e<i.length;e++){const t=i[e];r&&(r=r[t],r&&n.push(r))}n.length===i.length&&delete r._value;for(let e=n.length-1;e>=0;e--){const t=n[e];t&&0===Object.keys(t).length&&delete n[e]}}}}_defineProperty(Wm,"root",{}),_defineProperty(Wm,"map",new Map),_defineProperty(Wm,"inverseMap",new Map),_defineProperty(Wm,"addedEmitter",new np),_defineProperty(Wm,"removedEmitter",new np),zo.register("DescriptionRegistry",Wm);const Xm=Lm.PHET_IO_ENABLED,jm=e=>e.tandem.phetioID,Qm={tandem:Lm.OPTIONAL,descriptionTandem:Lm.OPTIONAL,phetioType:el.ObjectIO,phetioDocumentation:jo.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioDocumentation,phetioState:jo.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioState,phetioReadOnly:jo.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioReadOnly,phetioEventType:vm.MODEL,phetioHighFrequency:jo.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioHighFrequency,phetioPlayback:jo.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioPlayback,phetioFeatured:jo.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioFeatured,phetioDynamicElement:jo.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioDynamicElement,phetioDesigned:jo.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioDesigned,phetioEventMetadata:null,tandemNameSuffix:null};class Km extends Um{constructor(e){super(),this.tandem=Qm.tandem,this.phetioID=this.tandem.phetioID,this.phetioObjectInitialized=!1,e&&this.initializePhetioObject({},e)}initializePhetioObject(e,t){if(this.initializeDisposable(t),t.tandem&&Lm.onMissingTandem(t.tandem),t.tandem&&t.tandem.supplied&&Wm.add(t.tandem,this),!(Xm&&t.tandem&&t.tandem.supplied))return void(t.tandem&&(this.tandem=t.tandem,this.phetioID=this.tandem.phetioID));const i=No({},Qm,e);let n=Vo()(i,t);this.phetioIsArchetype=!1,this.phetioBaselineMetadata=Fm.enabled||phet.preloads.phetio.queryParameters.phetioEmitAPIBaseline?this.getMetadata(Po({phetioIsArchetype:this.phetioIsArchetype,phetioArchetypePhetioID:this.phetioArchetypePhetioID},n)):null;const r=n.tandem.getArchetypalPhetioID();if(window.phet.preloads.phetio.phetioElementsOverrides){const e=window.phet.preloads.phetio.phetioElementsOverrides[r];e&&(n=Vo()(n,e))}this.tandem=n.tandem,this.phetioID=this.tandem.phetioID,this._phetioType=n.phetioType,this._phetioState=n.phetioState,this._phetioReadOnly=n.phetioReadOnly,this._phetioDocumentation=n.phetioDocumentation,this._phetioEventType=n.phetioEventType,this._phetioHighFrequency=n.phetioHighFrequency,this._phetioPlayback=n.phetioPlayback,this._phetioDynamicElement=n.phetioDynamicElement,this._phetioFeatured=n.phetioFeatured,this._phetioEventMetadata=n.phetioEventMetadata,this._phetioDesigned=n.phetioDesigned,this.phetioArchetypePhetioID=null,this.linkedElements=[],this.phetioNotifiedObjectCreated=!1,this.phetioMessageStack=[],this._phetioPlayback&&(this._phetioEventMetadata=this._phetioEventMetadata||{},this._phetioEventMetadata.playback=!0),this.tandem.addPhetioObject(this),this.phetioObjectInitialized=!0}static swapCaseOfFirstCharacter(e){const t=e[0];return(t===t.toLowerCase()?t.toUpperCase():t.toLowerCase())+e.substring(1)}get phetioType(){return this._phetioType}get phetioState(){return this._phetioState}get phetioReadOnly(){return this._phetioReadOnly}get phetioDocumentation(){return this._phetioDocumentation}get phetioEventType(){return this._phetioEventType}get phetioHighFrequency(){return this._phetioHighFrequency}get phetioPlayback(){return this._phetioPlayback}get phetioDynamicElement(){return this._phetioDynamicElement}get phetioFeatured(){return this._phetioFeatured}get phetioEventMetadata(){return this._phetioEventMetadata}get phetioDesigned(){return this._phetioDesigned}phetioStartEvent(e,t){if(Xm&&this.isPhetioInstrumented()){const i=Vo()({data:null,getData:null},t);if(!_.hasIn(window,"phet.phetio.dataStream"))return void this.phetioMessageStack.push(-1);const n=this.phetioHighFrequency&&_.hasIn(window,"phet.preloads.phetio.queryParameters")&&!window.phet.preloads.phetio.queryParameters.phetioEmitHighFrequencyEvents&&!phet.phetio.dataStream.isEmittingLowFrequencyEvent(),r=!_.hasIn(window,"phet.phetio.dataStream");if(n||this.phetioEventType===vm.OPT_OUT||r)return void this.phetioMessageStack.push(-1);const s=i.getData?i.getData():i.data;this.phetioMessageStack.push(phet.phetio.dataStream.start(this.phetioEventType,this.tandem.phetioID,this.phetioType,e,s,this.phetioEventMetadata,this.phetioHighFrequency)),this.phetioPlayback&&phet.phetio.dataStream.pushNonPlaybackable()}}phetioEndEvent(){if(Xm&&this.isPhetioInstrumented()){const e=this.phetioMessageStack.pop();if(-1===e)return;this.phetioPlayback&&phet.phetio.dataStream.popNonPlaybackable(),phet.phetio.dataStream.end(e)}}propagateDynamicFlagsToDescendants(){const e=phet.phetio.phetioEngine,t=Lm.launched?[]:Lm.bufferedPhetioObjects.map(jm);this.tandem.iterateDescendants(i=>{const n=i.phetioID;if(e.hasPhetioObject(n)||!Lm.launched&&t.includes(n)){const i=e.hasPhetioObject(n)?e.getPhetioElement(n):Lm.bufferedPhetioObjects[t.indexOf(n)];i.phetioIsArchetype=this.phetioIsArchetype,i.setPhetioDynamicElement(this.phetioDynamicElement),i.phetioBaselineMetadata&&(i.phetioBaselineMetadata.phetioIsArchetype=this.phetioIsArchetype)}})}setPhetioDynamicElement(e){this._phetioDynamicElement=!this.phetioIsArchetype&&e,this.phetioArchetypePhetioID=e?this.tandem.getArchetypalPhetioID():null,this.phetioBaselineMetadata&&(this.phetioBaselineMetadata.phetioDynamicElement=this.phetioDynamicElement)}markDynamicElementArchetype(){this.phetioIsArchetype=!0,this.setPhetioDynamicElement(!1),this.phetioBaselineMetadata&&(this.phetioBaselineMetadata.phetioIsArchetype=this.phetioIsArchetype),Lm.PHET_IO_ENABLED&&this.propagateDynamicFlagsToDescendants()}isPhetioInstrumented(){return this.tandem&&this.tandem.supplied}addLinkedElement(e,t){if(this.isPhetioInstrumented()){if(Xm&&e.isPhetioInstrumented()){const i=Vo()({phetioFeatured:this.phetioFeatured&&e.phetioFeatured},t);let n=null;t&&t.tandem?n=t.tandem:t&&t.tandemName?n=this.tandem.createTandem(t.tandemName):!t&&e.tandem&&(n=this.tandem.createTandem(e.tandem.name)),n&&(i.tandem=n),this.linkedElements.push(new Zm(e,i))}}else this.linkedElements=null}removeLinkedElements(e){if(this.isPhetioInstrumented()&&this.linkedElements){this.linkedElements.filter(t=>t.element===e).forEach(e=>{e.dispose(),rm(this.linkedElements,e)})}}onSimulationConstructionCompleted(){this.phetioBaselineMetadata=null}getPhetioMouseHitTarget(){if(!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&"linked"===phet.tandem.phetioElementSelectionProperty.value){const e=this.getCorrespondingLinkedElement();if("noCorrespondingLinkedElement"!==e)return e.getPhetioMouseHitTarget(!0);if(this.tandem.parentTandem){const e=phet.phetio.phetioEngine.phetioElementMap[this.tandem.parentTandem.phetioID];if(e){const t=e.getCorrespondingLinkedElement();if("noCorrespondingLinkedElement"!==t)return t.getPhetioMouseHitTarget(!0)}}}return"string"===phet.tandem.phetioElementSelectionProperty.value?"phetioNotSelectable":this.getPhetioMouseHitTargetSelf()}getPhetioMouseHitTargetSelf(){return this.isPhetioMouseHitSelectable()?this:"phetioNotSelectable"}isPhetioMouseHitSelectable(){const e="featured"!==phet.tandem.phetioElementsDisplayProperty.value||this.isDisplayedInFeaturedTree();return this.isPhetioInstrumented()&&e}isDisplayedInFeaturedTree(){if(this.isPhetioInstrumented()&&this.phetioFeatured)return!0;let e=!1;return this.tandem.iterateDescendants(t=>{const i=phet.phetio.phetioEngine.phetioElementMap[t.phetioID];i&&i.isPhetioInstrumented()&&i.phetioFeatured&&(e=!0)}),e}getCorrespondingLinkedElement(){const e=Object.keys(this.tandem.children),t=[];e.forEach(e=>{const i=phetio.PhetioIDUtils.append(this.tandem.phetioID,e),n=phet.phetio.phetioEngine.phetioElementMap[i];n instanceof Zm&&t.push(n)});const i=t.map(e=>phetio.PhetioIDUtils.getComponentName(e.phetioID));let n=null;if(1===t.length)n=t[0];else if(i.includes("property"))n=t[i.indexOf("property")];else{if(!i.includes("valueProperty"))return"noCorrespondingLinkedElement";n=t[i.indexOf("valueProperty")]}return n.element}dispose(){Wm.remove(this),this.tandem.removePhetioObject(this),this.linkedElements&&(this.linkedElements.forEach(e=>e.dispose()),this.linkedElements.length=0),super.dispose()}getMetadata(e){const t={phetioTypeName:(e=e||this).phetioType.typeName,phetioDocumentation:e.phetioDocumentation,phetioState:e.phetioState,phetioReadOnly:e.phetioReadOnly,phetioEventType:vm.phetioType.toStateObject(e.phetioEventType),phetioHighFrequency:e.phetioHighFrequency,phetioPlayback:e.phetioPlayback,phetioDynamicElement:e.phetioDynamicElement,phetioIsArchetype:e.phetioIsArchetype,phetioFeatured:e.phetioFeatured,phetioDesigned:e.phetioDesigned};return e.phetioArchetypePhetioID&&(t.phetioArchetypePhetioID=e.phetioArchetypePhetioID),t}static create(e){return new Km(e)}}_defineProperty(Km,"DEFAULT_OPTIONS",Qm),_defineProperty(Km,"METADATA_DOCUMENTATION","Get metadata about the PhET-iO Element. This includes the following keys:<ul><li><strong>phetioTypeName:</strong> The name of the PhET-iO Type\n</li><li><strong>phetioDocumentation:</strong> default - null. Useful notes about a PhET-iO Element, shown in the PhET-iO Studio Wrapper</li><li><strong>phetioState:</strong> default - true. When true, includes the PhET-iO Element in the PhET-iO state\n</li><li><strong>phetioReadOnly:</strong> default - false. When true, you can only get values from the PhET-iO Element; no setting allowed.\n</li><li><strong>phetioEventType:</strong> default - MODEL. The category of event that this element emits to the PhET-iO Data Stream.\n</li><li><strong>phetioDynamicElement:</strong> default - false. If this element is a \"dynamic element\" that can be created and destroyed throughout the lifetime of the sim (as opposed to existing forever).\n</li><li><strong>phetioIsArchetype:</strong> default - false. If this element is an archetype for a dynamic element.\n</li><li><strong>phetioFeatured:</strong> default - false. If this is a featured PhET-iO Element.\n</li><li><strong>phetioArchetypePhetioID:</strong> default - ''. If an applicable dynamic element, this is the phetioID of its archetype.\n</li></ul>");class Zm extends Km{constructor(e,t){const i=Vo()({phetioType:Ym,phetioState:!0,phetioFeatured:e.phetioFeatured},t);i.phetioReadOnly=!0,super(i),this.element=e}}zo.register("PhetioObject",Km);const Jm=new yh,$m=(e,t)=>{for(let n=0;n<t.length;n++);const i=`${e.typeName}.${t.map(e=>e.typeName).join(",")}`;if(!Jm.has(i)){let n=t.map(e=>e.typeName).join(", ");""===n&&(n="none");const r=t.map(e=>e.typeName).join(",");Jm.set(i,new el(`FunctionIO(${r})=>${e.typeName}`,{valueType:"function",isFunctionType:!0,parameterTypes:t.concat([e]),documentation:`Wrapper for the built-in JS function type.<br><strong>Arguments:</strong> ${n}<br><strong>Return Type:</strong> `+e.typeName}))}return Jm.get(i)};zo.register("FunctionIO",$m);const eg=$m,tg=new yh,ig=e=>(tg.has(e)||tg.set(e,new el(`NullableIO<${e.typeName}>`,{documentation:"An IOType adding support for null in addition to the behavior of its parameter.",isValidValue:t=>null===t||Ho.isValueValid(t,e.validator),parameterTypes:[e],toStateObject:t=>null===t?null:e.toStateObject(t),fromStateObject:t=>null===t?null:e.fromStateObject(t),stateSchema:Zo.asValue(`null|<${e.typeName}>`,{isValidValue:t=>null===t||e.isStateObjectValid(t)})})),tg.get(e));zo.register("NullableIO",ig);const ng=ig,rg=new el("VoidIO",{isValidValue:()=>!0,documentation:"Type for which there is no instance, usually to mark functions without a return value",toStateObject:()=>{}});zo.register("VoidIO",rg);const sg=rg;class ag extends Fl{}_defineProperty(ag,"UNDEFER",new(F=ag)),_defineProperty(ag,"NOTIFY",new F),_defineProperty(ag,"enumeration",new Xl(F)),ko.register("PropertyStatePhase",ag);const og=ag;class lg{constructor(){_defineProperty(this,"initialized",!1),this.phaseCallbackSets=new cg,this.undeferBeforeUndeferMapPair=new ug(og.UNDEFER,og.UNDEFER),this.undeferBeforeNotifyMapPair=new ug(og.UNDEFER,og.NOTIFY),this.notifyBeforeUndeferMapPair=new ug(og.NOTIFY,og.UNDEFER),this.notifyBeforeNotifyMapPair=new ug(og.NOTIFY,og.NOTIFY),this.mapPairs=[this.undeferBeforeUndeferMapPair,this.undeferBeforeNotifyMapPair,this.notifyBeforeUndeferMapPair,this.notifyBeforeNotifyMapPair]}initialize(e){e.onBeforeApplyStateEmitter.addListener(e=>{if(e instanceof _g&&!e.isDeferred){e.setDeferred(!0);const t=e.tandem.phetioID,i=()=>{const i=e.setDeferred(!1);this.phaseCallbackSets.addNotifyPhaseCallback(new hg(t,og.NOTIFY,i||_.noop))};this.phaseCallbackSets.addUndeferPhaseCallback(new hg(t,og.UNDEFER,i))}}),e.undeferEmitter.addListener(e=>{this.undeferAndNotifyProperties(new Set(Object.keys(e)))}),e.isSettingStateProperty.lazyLink(e=>{}),this.initialized=!0}static validateInstrumentedProperty(e){}validatePropertyPhasePair(e,t){lg.validateInstrumentedProperty(e)}getMapPairFromPhases(e,t){const i=this.mapPairs.filter(i=>e===i.beforePhase&&t===i.afterPhase);return i[0]}registerPhetioOrderDependency(e,t,i,n){if(Lm.PHET_IO_ENABLED){this.validatePropertyPhasePair(e,t),this.validatePropertyPhasePair(i,n),this.getMapPairFromPhases(t,n).addOrderDependency(e.tandem.phetioID,i.tandem.phetioID)}}propertyInAnOrderDependency(e){return lg.validateInstrumentedProperty(e),_.some(this.mapPairs,t=>t.usesPhetioID(e.tandem.phetioID))}unregisterOrderDependenciesForProperty(e){Lm.PHET_IO_ENABLED&&(lg.validateInstrumentedProperty(e),this.propertyInAnOrderDependency(e)&&this.mapPairs.forEach(t=>t.unregisterOrderDependenciesForProperty(e)))}undeferAndNotifyProperties(e){const t={};let i=0;for(;this.phaseCallbackSets.size>0;)i++,i>5e3&&this.errorInUndeferAndNotifyStep(t),this.attemptToApplyPhases(og.UNDEFER,t,e),this.attemptToApplyPhases(og.NOTIFY,t,e)}errorInUndeferAndNotifyStep(e){const t=[];this.phaseCallbackSets.forEach(e=>t.push(e.getTerm()));const i=[];this.mapPairs.forEach(e=>{const n=e.beforeMap;for(const[r,s]of n)s.forEach(e=>{const s=r+n.beforePhase,a=e+n.afterPhase;(t.includes(s)||t.includes(a))&&i.push({beforeTerm:s,afterTerm:a})})});let n="";console.log("still to be undeferred",this.phaseCallbackSets.undeferSet),console.log("still to be notified",this.phaseCallbackSets.notifySet),console.log("order dependencies that apply to the still todos",i),i.forEach(e=>{n+=`${e.beforeTerm}\t${e.afterTerm}\n`}),console.log("\n\nin graphable form:\n\n",n);const r="Impossible set state: from undeferAndNotifyProperties; ordering constraints cannot be satisfied";throw new Error(r)}getNumberOfOrderDependencies(){let e=0;return this.mapPairs.forEach(t=>{t.afterMap.forEach(t=>{e+=t.size})}),e}attemptToApplyPhases(e,t,i){const n=this.phaseCallbackSets.getSetFromPhase(e);for(const r of n)this.phetioIDCanApplyPhase(r.phetioID,e,t,i)&&(r.listener(),n.delete(r),t[r.getTerm()]=!0)}phetioIDCanApplyPhase(e,t,i,n){if(t===og.NOTIFY&&!i[e+og.UNDEFER])return!1;const r=[];this.mapPairs.forEach(e=>{e.afterPhase===t&&r.push(e.afterMap)});for(let s=0;s<r.length;s++){const t=r[s];if(!t.has(e))return!0;const a=t.get(e);for(const r of a)if(!i[r+t.beforePhase]&&n.has(r)&&n.has(e))return!1}return!0}}class hg{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_.noop;this.phetioID=e,this.phase=t,this.listener=i}getTerm(){return this.phetioID+this.phase}}class ug{constructor(e,t){this.beforeMap=new Map,this.beforeMap.beforePhase=e,this.beforeMap.afterPhase=t,this.afterMap=new Map,this.afterMap.beforePhase=e,this.afterMap.afterPhase=t,this.beforeMap.otherMap=this.afterMap,this.afterMap.otherMap=this.beforeMap,this.beforePhase=e,this.afterPhase=t}addOrderDependency(e,t){this.beforeMap.has(e)||this.beforeMap.set(e,new Set),this.beforeMap.get(e).add(t),this.afterMap.has(t)||this.afterMap.set(t,new Set),this.afterMap.get(t).add(e)}unregisterOrderDependenciesForProperty(e){const t=e.tandem.phetioID;[this.beforeMap,this.afterMap].forEach(e=>{e.has(t)&&e.get(t).forEach(i=>{const n=e.otherMap.get(i);n&&n.delete(t),0===n.size&&e.otherMap.delete(i)}),e.delete(t)})}usesPhetioID(e){return this.beforeMap.has(e)||this.afterMap.has(e)}}class cg{constructor(){_defineProperty(this,"undeferSet",new Set),_defineProperty(this,"notifySet",new Set)}get size(){return this.undeferSet.size+this.notifySet.size}forEach(e){this.undeferSet.forEach(e),this.notifySet.forEach(e)}addUndeferPhaseCallback(e){this.undeferSet.add(e)}addNotifyPhaseCallback(e){this.notifySet.add(e)}getSetFromPhase(e){return e===og.NOTIFY?this.notifySet:this.undeferSet}}ko.register("PropertyStateHandler",lg);const dg=new lg;ko.register("propertyStateHandlerSingleton",dg);const pg=dg;class mg extends np{constructor(e,t,i){super(t,i),this._value=e}get(){return this._value}get value(){return this.get()}set value(e){this.set(e)}set(e){if(!this.equalsValue(e)){const t=this._value;this.setPropertyValue(e),this.notifyListeners(t)}}setPropertyValue(e){this._value=e}equalsValue(e){return this.areValuesEqual(e,this._value)}areValuesEqual(e,t){if(this.useDeepEquality){const i=e,n=t;if(i&&n&&i.constructor===n.constructor)return i.equals(n)}return e===t}notifyListeners(e){this.emit(this._value,e,this)}link(e){this.addListener(e),e(this._value,null,this)}lazyLink(e){this.addListener(e)}unlink(e){this.removeListener(e)}unlinkAll(){this.removeAllListeners()}linkAttribute(e,t){const i=i=>{e[t]=i};return this.link(i),i}isSettable(){return!0}dispose(){this.unlinkAll(),super.dispose()}}ko.register("TinyProperty",mg);const gg={values:["1/(cm*M)","%","A","AMU","atm","AU","cm","cm^2","C","°","°C","F","°F","g","G","Hz","J","K","kg","kg/m^3","kg·m/s","km/s","kPa","L","L/s","m","m^3","m/s","m/s/s","m/s^2","mA","mm","mol","mol/L","mol/s","M","N","N/m","nm","nm/ps","N·s/m","Ω","Ω·cm","Pa·s","particles/ps","pm","pm/ps","pm/s","pm/s^2","pm^3","ps","radians","radians/s","s","V","view-coordinates/s","W","years"],isValidUnits:function(e){return _.includes(gg.values,e)}};ko.register("units",gg);const fg=new mg(!1);zo.register("isClearingPhetioDynamicElementsProperty",fg);const yg=fg,Eg=new mg(!1);zo.register("isPhetioStateEngineManagingPropertyValuesProperty",Eg);const vg=Eg,Ag={validateValidator:!1};let bg=0;const Sg=new yh;class _g extends Km{constructor(e,t){const i=Vo()({units:null,reentrant:!1,hasListenerOrderDependencies:!1,phetioOuterType:_g.PropertyIO,phetioValueType:el.ObjectIO},t);i.units&&(i.phetioEventMetadata=i.phetioEventMetadata||{},i.phetioEventMetadata.units=i.units),i.phetioOuterType&&i.phetioValueType&&(i.phetioType=i.phetioOuterType(i.phetioValueType)),Ho.containsValidatorKey(i)||(i.isValidValue=()=>!0),super(i),this.id=bg++,this.units=i.units,this.isPhetioInstrumented(),this.validValues=i.validValues,this.tinyProperty=new mg(e,null,i.hasListenerOrderDependencies),this.tinyProperty.useDeepEquality=i.valueComparisonStrategy&&"equalsFunction"===i.valueComparisonStrategy,this.notifying=!1,this.reentrant=i.reentrant,this.isDeferred=!1,this.deferredValue=null,this.hasDeferredValue=!1,this.valueValidator=_.pick(i,Ho.VALIDATOR_KEYS),this.valueValidator.validationMessage=this.valueValidator.validationMessage||"Property value not valid",this.valueValidator.phetioType&&(this.valueValidator.phetioType=this.valueValidator.phetioType.parameterTypes[0])}isSettable(){return!1}get(){return this.tinyProperty.get()}set(e){vg.value&&!yg.value&&this.isPhetioInstrumented()&&this.phetioState&&this.isSettable()||this.unguardedSet(e)}unguardedSet(e){if(!this.isDisposed)if(this.isDeferred)this.deferredValue=e,this.hasDeferredValue=!0;else if(!this.equalsValue(e)){const t=this.get();this.setPropertyValue(e),this._notifyListeners(t)}}setPropertyValue(e){this.tinyProperty.setPropertyValue(e)}equalsValue(e){return this.areValuesEqual(e,this.get())}areValuesEqual(e,t){return this.tinyProperty.areValuesEqual(e,t)}_notifyListeners(e){const t=this.get();Lm.PHET_IO_ENABLED&&this.isPhetioInstrumented()&&this.phetioStartEvent(_g.CHANGED_EVENT_NAME,{getData:()=>{const i=this.phetioType.parameterTypes[0];return{oldValue:ng(i).toStateObject(e),newValue:i.toStateObject(t)}}}),this.notifying=!0,this.tinyProperty.emit(t,e,this),this.notifying=!1,Lm.PHET_IO_ENABLED&&this.isPhetioInstrumented()&&this.phetioEndEvent()}notifyListenersStatic(){this._notifyListeners(null)}setDeferred(e){if(e)this.isDeferred=!0;else{this.isDeferred=!1;const e=this.get();if(this.hasDeferredValue&&(this.setPropertyValue(this.deferredValue),this.hasDeferredValue=!1,this.deferredValue=null),!this.equalsValue(e))return()=>!this.isDisposed&&this._notifyListeners(e)}return null}get value(){return this.get()}set value(e){this.set(e)}addPhetioStateDependencies(e){for(let t=0;t<e.length;t++){const i=e[t];i instanceof _g&&i.isPhetioInstrumented()&&this.isPhetioInstrumented()&&pg.registerPhetioOrderDependency(i,og.UNDEFER,this,og.NOTIFY)}}link(e,t){t&&t.phetioDependencies&&this.addPhetioStateDependencies(t.phetioDependencies),this.tinyProperty.addListener(e),e(this.get(),null,this)}lazyLink(e,t){t&&t.phetioDependencies&&this.addPhetioStateDependencies(t.phetioDependencies),this.tinyProperty.lazyLink(e)}unlink(e){this.tinyProperty.unlink(e)}unlinkAll(){this.tinyProperty.unlinkAll()}linkAttribute(e,t){const i=i=>{e[t]=i};return this.link(i),i}toString(){return`Property#${this.id}{${this.get()}}`}debug(e){const t=t=>console.log(e,t);return this.link(t),t}isValueValid(e){return null===this.getValidationError(e)}getValidationError(e){return Ho.getValidationError(e,this.valueValidator,Ag)}dispose(){this.isPhetioInstrumented()&&pg.unregisterOrderDependenciesForProperty(this),super.dispose(),this.tinyProperty.dispose()}hasListener(e){return this.tinyProperty.hasListener(e)}getListenerCount(){return this.tinyProperty.getListenerCount()}forEachListener(e){this.tinyProperty.forEachListener(e)}hasListeners(){return this.tinyProperty.hasListeners()}static PropertyIO(e){return Sg.has(e)||Sg.set(e,new el(`PropertyIO<${e.typeName}>`,{valueType:_g,documentation:"Observable values that send out notifications when the value changes. This differs from the traditional listener pattern in that added listeners also receive a callback with the current value when the listeners are registered. This is a widely-used pattern in PhET-iO simulations.",methodOrder:["link","lazyLink"],events:[_g.CHANGED_EVENT_NAME],parameterTypes:[e],toStateObject:t=>({value:e.toStateObject(t.value),validValues:ng(xh(e)).toStateObject(void 0===t.validValues?null:t.validValues),units:ng(Om).toStateObject(t.units)}),applyState:(t,i)=>{ng(Om).fromStateObject(i.units);t.unguardedSet(e.fromStateObject(i.value)),i.validValues&&(t.validValues=i.validValues.map(t=>e.fromStateObject(t)))},stateSchema:{value:e,validValues:ng(xh(e)),units:ng(Om)},methods:{getValue:{returnType:e,parameterTypes:[],implementation:_g.prototype.get,documentation:"Gets the current value."},getValidationError:{returnType:ng(Om),parameterTypes:[e],implementation:_g.prototype.getValidationError,documentation:"Checks to see if a proposed value is valid. Returns the first validation error, or null if the value is valid."},setValue:{returnType:sg,parameterTypes:[e],implementation:function(e){this.set(e)},documentation:"Sets the value of the Property. If the value differs from the previous value, listeners are notified with the new value.",invocableForReadOnlyElements:!1},link:{returnType:sg,parameterTypes:[eg(sg,[e,ng(e)])],implementation:_g.prototype.link,documentation:"Adds a listener which will be called when the value changes. On registration, the listener is also called with the current value. The listener takes two arguments, the new value and the previous value."},lazyLink:{returnType:sg,parameterTypes:[eg(sg,[e,ng(e)])],implementation:_g.prototype.lazyLink,documentation:'Adds a listener which will be called when the value changes. This method is like "link", but without the current-value callback on registration. The listener takes two arguments, the new value and the previous value.'},unlink:{returnType:sg,parameterTypes:[eg(sg,[e])],implementation:_g.prototype.unlink,documentation:"Removes a listener."}}})),Sg.get(e)}getPhetioMouseHitTarget(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return"string"===phet.tandem.phetioElementSelectionProperty.value?this.getPhetioMouseHitTargetSelf():super.getPhetioMouseHitTarget(e)}}function xg(e){return e instanceof _g||e instanceof mg}function wg(e){return _.each(Array.prototype.slice.call(arguments,1),t=>{if(t)for(const i in t)Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))}),e}_defineProperty(_g,"TANDEM_NAME_SUFFIX","Property"),_defineProperty(_g,"CHANGED_EVENT_NAME","changed"),ko.register("ReadOnlyProperty",_g),wo.register("extend",wg);const Tg=wg;window.sceneryLog=null;const Pg=document.createElement("canvas"),Cg=Pg.getContext("2d");let Vg="";const Rg=new bt("scenery");function Ng(e){Rg.logString+=e.replace(/%c/g,"")+"\n"}function Mg(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];window.console&&window.console.log&&window.console.log(...Array.prototype.slice.call(t,0))}Rg.register("scratchCanvas",Pg),Rg.register("scratchContext",Cg);const kg={dirty:{name:"dirty",style:"color: #888;"},bounds:{name:"bounds",style:"color: #888;"},hitTest:{name:"hitTest",style:"color: #888;"},hitTestInternal:{name:"hitTestInternal",style:"color: #888;"},PerfCritical:{name:"Perf",style:"color: #f00;"},PerfMajor:{name:"Perf",style:"color: #aa0;"},PerfMinor:{name:"Perf",style:"color: #088;"},PerfVerbose:{name:"Perf",style:"color: #888;"},Cursor:{name:"Cursor",style:""},Stitch:{name:"Stitch",style:""},StitchDrawables:{name:"Stitch",style:""},GreedyStitcher:{name:"Greedy",style:"color: #088;"},GreedyVerbose:{name:"Greedy",style:"color: #888;"},RelativeTransform:{name:"RelativeTransform",style:"color: #606;"},BackboneDrawable:{name:"Backbone",style:"color: #a00;"},CanvasBlock:{name:"Canvas",style:""},WebGLBlock:{name:"WebGL",style:""},Display:{name:"Display",style:""},DOMBlock:{name:"DOM",style:""},Drawable:{name:"",style:""},FittedBlock:{name:"FittedBlock",style:""},Instance:{name:"Instance",style:""},InstanceTree:{name:"InstanceTree",style:""},ChangeInterval:{name:"ChangeInterval",style:"color: #0a0;"},SVGBlock:{name:"SVG",style:""},SVGGroup:{name:"SVGGroup",style:""},ImageSVGDrawable:{name:"ImageSVGDrawable",style:""},Paints:{name:"Paints",style:""},Filters:{name:"Filters",style:""},AlignBox:{name:"AlignBox",style:""},AlignGroup:{name:"AlignGroup",style:""},RichText:{name:"RichText",style:""},Sim:{name:"Sim",style:""},ParallelDOM:{name:"ParallelDOM",style:""},PDOMInstance:{name:"PDOMInstance",style:""},PDOMTree:{name:"PDOMTree",style:""},PDOMDisplaysInfo:{name:"PDOMDisplaysInfo",style:""},KeyboardFuzzer:{name:"KeyboardFuzzer",style:""},InputListener:{name:"InputListener",style:""},InputEvent:{name:"InputEvent",style:""},OnInput:{name:"OnInput",style:""},Pointer:{name:"Pointer",style:""},Input:{name:"Input",style:""},EventDispatch:{name:"EventDispatch",style:""},EventPath:{name:"EventPath",style:""}};Tg(Rg,{logString:"",logFunction:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];window.console&&window.console.log&&window.console.log(...Array.prototype.slice.call(t,0))},switchLogToConsole:function(){Rg.logFunction=Mg},switchLogToString:function(){window.console&&window.console.log("switching to string log"),Rg.logFunction=Ng},enableIndividualLog:function(e){return"stitch"===e?(this.enableIndividualLog("Stitch"),this.enableIndividualLog("StitchDrawables"),this.enableIndividualLog("GreedyStitcher"),void this.enableIndividualLog("GreedyVerbose")):"perf"===e?(this.enableIndividualLog("PerfCritical"),this.enableIndividualLog("PerfMajor"),this.enableIndividualLog("PerfMinor"),void this.enableIndividualLog("PerfVerbose")):"input"===e?(this.enableIndividualLog("InputListener"),this.enableIndividualLog("InputEvent"),this.enableIndividualLog("OnInput"),this.enableIndividualLog("Pointer"),this.enableIndividualLog("Input"),this.enableIndividualLog("EventDispatch"),void this.enableIndividualLog("EventPath")):"a11y"===e||"pdom"===e?(this.enableIndividualLog("ParallelDOM"),this.enableIndividualLog("PDOMInstance"),this.enableIndividualLog("PDOMTree"),void this.enableIndividualLog("PDOMDisplaysInfo")):void(e&&(window.sceneryLog[e]=window.sceneryLog[e]||function(t,i){const n=kg[e],r=n.name?`[${n.name}] `:"";Rg.logFunction(`%c${Vg}%c${r}${t}`,"color: #ddd;",i||n.style)}))},disableIndividualLog:function(e){e&&delete window.sceneryLog[e]},enableLogging:function(e){window.sceneryLog=function(e){Rg.logFunction(e)},window.sceneryLog.push=function(){Vg+="| "},window.sceneryLog.pop=function(){Vg=Vg.slice(0,-2)},window.sceneryLog.getDepth=function(){return Vg.length/2};for(let t=0;t<e.length;t++)this.enableIndividualLog(e[t])},disableLogging:function(){window.sceneryLog=null},isLoggingPerformance:function(){return window.sceneryLog.PerfCritical||window.sceneryLog.PerfMajor||window.sceneryLog.PerfMinor||window.sceneryLog.PerfVerbose}});const Lg=Rg,Ig={DISABLED_OPACITY:.45,DEFAULT_COLOR_PROFILE:"default",PROJECTOR_COLOR_PROFILE:"projector"};Lg.register("SceneryConstants",Ig);const Bg=Ig,Dg=fl.clamp,Og=fl.linear,qg="(-?\\d{1,3}%?)";function Yg(e){let t=1;return e.endsWith("%")&&(t=2.55,e=e.slice(0,e.length-1)),fl.roundSymmetric(Number(e)*t)}class Hg{constructor(e,t,i,n){this.changeEmitter=new np,this.set(e,t,i,n)}copy(){return new Hg(this.r,this.g,this.b,this.a)}set(e,t,i,n){if(null===e)this.setRGBA(0,0,0,0);else if("string"==typeof e)this.setCSS(e);else if(e instanceof Hg)this.setRGBA(e.r,e.g,e.b,e.a);else if(void 0===i){const i=e>>16&255,n=e>>8&255,r=e>>0&255,s=void 0===t?1:t;this.setRGBA(i,n,r,s)}else this.setRGBA(e,t,i,void 0===n?1:n);return this}getRed(){return this.r}get red(){return this.getRed()}set red(e){this.setRed(e)}setRed(e){return this.setRGBA(e,this.g,this.b,this.a)}getGreen(){return this.g}get green(){return this.getGreen()}set green(e){this.setGreen(e)}setGreen(e){return this.setRGBA(this.r,e,this.b,this.a)}getBlue(){return this.b}get blue(){return this.getBlue()}set blue(e){this.setBlue(e)}setBlue(e){return this.setRGBA(this.r,this.g,e,this.a)}getAlpha(){return this.a}get alpha(){return this.getAlpha()}set alpha(e){this.setAlpha(e)}setAlpha(e){return this.setRGBA(this.r,this.g,this.b,e)}setRGBA(e,t,i,n){return this.r=fl.roundSymmetric(Dg(e,0,255)),this.g=fl.roundSymmetric(Dg(t,0,255)),this.b=fl.roundSymmetric(Dg(i,0,255)),this.a=Dg(n,0,1),this.updateColor(),this}blend(e,t){const i=Math.pow(this.r,2.4),n=Math.pow(e.r,2.4),r=Math.pow(this.g,2.4),s=Math.pow(e.g,2.4),a=Math.pow(this.b,2.4),o=Math.pow(e.b,2.4),l=Math.pow(i+(n-i)*t,1/2.4),h=Math.pow(r+(s-r)*t,1/2.4),u=Math.pow(a+(o-a)*t,1/2.4),c=this.a+(e.a-this.a)*t;return new Hg(l,h,u,c)}computeCSS(){if(1===this.a)return`rgb(${this.r},${this.g},${this.b})`;{let e=this.a.toFixed(20);for(;e.length>=2&&e.endsWith("0")&&"."!==e[e.length-2];)e=e.slice(0,e.length-1);const t=0===this.a||1===this.a?this.a:e;return`rgba(${this.r},${this.g},${this.b},${t})`}}toCSS(){return this._css}setCSS(e){let t=!1;const i=Hg.preprocessCSS(e);for(let n=0;n<Hg.formatParsers.length;n++){const e=Hg.formatParsers[n],r=e.regexp.exec(i);if(r){e.apply(this,r),t=!0;break}}if(!t)throw new Error("Color unable to parse color string: "+e);return this.updateColor(),this}toNumber(){return(this.r<<16)+(this.g<<8)+this.b}updateColor(){const e=this._css;this._css=this.computeCSS(),e!==this._css&&this.changeEmitter.emit()}setImmutable(){return this}getCanvasStyle(){return this.toCSS()}setHSLA(e,t,i,n){let r;e=e%360/360,t=Dg(t/100,0,1),r=(i=Dg(i/100,0,1))<.5?i*(t+1):i+t-i*t;const s=2*i-r;return this.r=fl.roundSymmetric(255*Hg.hueToRGB(s,r,e+1/3)),this.g=fl.roundSymmetric(255*Hg.hueToRGB(s,r,e)),this.b=fl.roundSymmetric(255*Hg.hueToRGB(s,r,e-1/3)),this.a=Dg(n,0,1),this.updateColor(),this}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}withAlpha(e){return new Hg(this.r,this.g,this.b,e)}checkFactor(e){return void 0===e?.7:e}brighterColor(e){e=this.checkFactor(e);const t=Math.min(255,Math.floor(this.r/e)),i=Math.min(255,Math.floor(this.g/e)),n=Math.min(255,Math.floor(this.b/e));return new Hg(t,i,n,this.a)}colorUtilsBrighter(e){e=this.checkFactor(e);const t=Math.min(255,this.getRed()+Math.floor(e*(255-this.getRed()))),i=Math.min(255,this.getGreen()+Math.floor(e*(255-this.getGreen()))),n=Math.min(255,this.getBlue()+Math.floor(e*(255-this.getBlue())));return new Hg(t,i,n,this.getAlpha())}darkerColor(e){e=this.checkFactor(e);const t=Math.max(0,Math.floor(e*this.r)),i=Math.max(0,Math.floor(e*this.g)),n=Math.max(0,Math.floor(e*this.b));return new Hg(t,i,n,this.a)}colorUtilsDarker(e){e=this.checkFactor(e);const t=Math.max(0,this.getRed()-Math.floor(e*this.getRed())),i=Math.max(0,this.getGreen()-Math.floor(e*this.getGreen())),n=Math.max(0,this.getBlue()-Math.floor(e*this.getBlue()));return new Hg(t,i,n,this.getAlpha())}colorUtilsBrightness(e){return 0===e?this:e>0?this.colorUtilsBrighter(e):this.colorUtilsDarker(-e)}toString(){return`${this.constructor.name}[r:${this.r} g:${this.g} b:${this.b} a:${this.a}]`}toHexString(){let e=this.toNumber().toString(16);for(;e.length<6;)e="0"+e;return"#"+e}toStateObject(){return{r:this.r,g:this.g,b:this.b,a:this.a}}static hueToRGB(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),6*i<1?e+(t-e)*i*6:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e}static toColor(e){return null===e?Hg.TRANSPARENT:e instanceof Hg?e:"string"==typeof e?new Hg(e):Hg.toColor(e.value)}static interpolateRGBA(e,t,i){if(i<0||i>1)throw new Error("distance must be between 0 and 1: "+i);const n=Math.floor(Og(0,1,e.r,t.r,i)),r=Math.floor(Og(0,1,e.g,t.g,i)),s=Math.floor(Og(0,1,e.b,t.b,i)),a=Og(0,1,e.a,t.a,i);return new Hg(n,r,s,a)}static supersampleBlend(e){const t=e.map(e=>Math.pow(e.r/255,2.2)),i=e.map(e=>Math.pow(e.g/255,2.2)),n=e.map(e=>Math.pow(e.b/255,2.2)),r=e.map(e=>Math.pow(e.a,2.2)),s=_.sum(r);if(0===s)return new Hg(0,0,0,0);const a=_.sum(_.range(0,e.length).map(e=>t[e]*r[e]))/s,o=_.sum(_.range(0,e.length).map(e=>i[e]*r[e]))/s,l=_.sum(_.range(0,e.length).map(e=>n[e]*r[e]))/s,h=s/e.length;return new Hg(Math.floor(255*Math.pow(a,1/2.2)),Math.floor(255*Math.pow(o,1/2.2)),Math.floor(255*Math.pow(l,1/2.2)),Math.pow(h,1/2.2))}static fromStateObject(e){return new Hg(e.r,e.g,e.b,e.a)}static hsla(e,t,i,n){return new Hg(0,0,0,1).setHSLA(e,t,i,n)}static checkPaintString(e){0}static checkPaint(e){"string"==typeof e?Hg.checkPaintString(e):e instanceof _g&&"string"==typeof e.value&&Hg.checkPaintString(e.value)}static getLuminance(e){const t=Hg.toColor(e),i=.2126*t.red+.7152*t.green+.0722*t.blue;return i}static toGrayscale(e){const t=Hg.getLuminance(e);return new Hg(t,t,t)}static isDarkColor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:186;return Hg.getLuminance(e)<t}static isLightColor(e,t){return!Hg.isDarkColor(e,t)}static grayColor(e,t){return new Hg(e,e,e,t)}static preprocessCSS(e){let t=e.replace(/ /g,"").toLowerCase();const i=Hg.colorKeywords[t];return i&&(t="#"+i),t}static isCSSColorString(e){const t=Hg.preprocessCSS(e);for(let i=0;i<Hg.formatParsers.length;i++){if(Hg.formatParsers[i].regexp.exec(t))return!0}return!1}}_defineProperty(Hg,"formatParsers",[{regexp:/^transparent$/,apply:(e,t)=>{e.setRGBA(0,0,0,0)}},{regexp:/^#(\w{1})(\w{1})(\w{1})$/,apply:(e,t)=>{e.setRGBA(parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16),1)}},{regexp:/^#(\w{2})(\w{2})(\w{2})$/,apply:(e,t)=>{e.setRGBA(parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16),1)}},{regexp:new RegExp(`^rgb\\(${qg},${qg},${qg}\\)$`),apply:(e,t)=>{e.setRGBA(Yg(t[1]),Yg(t[2]),Yg(t[3]),1)}},{regexp:new RegExp(`^rgba\\(${qg},${qg},${qg},(\\d+|\\d*\\.\\d+)\\)$`),apply:(e,t)=>{e.setRGBA(Yg(t[1]),Yg(t[2]),Yg(t[3]),Number(t[4]))}},{regexp:new RegExp("^hsl\\((\\d{1,3}),(\\d{1,3})%,(\\d{1,3})%\\)$"),apply:(e,t)=>{e.setHSLA(Number(t[1]),Number(t[2]),Number(t[3]),1)}},{regexp:new RegExp("^hsla\\((\\d{1,3}),(\\d{1,3})%,(\\d{1,3})%,(\\d+|\\d*\\.\\d+)\\)$"),apply:(e,t)=>{e.setHSLA(Number(t[1]),Number(t[2]),Number(t[3]),Number(t[4]))}}]),_defineProperty(Hg,"basicColorKeywords",{aqua:"00ffff",black:"000000",blue:"0000ff",fuchsia:"ff00ff",gray:"808080",green:"008000",lime:"00ff00",maroon:"800000",navy:"000080",olive:"808000",purple:"800080",red:"ff0000",silver:"c0c0c0",teal:"008080",white:"ffffff",yellow:"ffff00"}),_defineProperty(Hg,"colorKeywords",{aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"778899",lightslategrey:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}),Lg.register("Color",Hg),Hg.BLACK=Hg.black=new Hg(0,0,0).setImmutable(),Hg.BLUE=Hg.blue=new Hg(0,0,255).setImmutable(),Hg.CYAN=Hg.cyan=new Hg(0,255,255).setImmutable(),Hg.DARK_GRAY=Hg.darkGray=new Hg(64,64,64).setImmutable(),Hg.GRAY=Hg.gray=new Hg(128,128,128).setImmutable(),Hg.GREEN=Hg.green=new Hg(0,255,0).setImmutable(),Hg.LIGHT_GRAY=Hg.lightGray=new Hg(192,192,192).setImmutable(),Hg.MAGENTA=Hg.magenta=new Hg(255,0,255).setImmutable(),Hg.ORANGE=Hg.orange=new Hg(255,200,0).setImmutable(),Hg.PINK=Hg.pink=new Hg(255,175,175).setImmutable(),Hg.RED=Hg.red=new Hg(255,0,0).setImmutable(),Hg.WHITE=Hg.white=new Hg(255,255,255).setImmutable(),Hg.YELLOW=Hg.yellow=new Hg(255,255,0).setImmutable(),Hg.TRANSPARENT=Hg.transparent=new Hg(0,0,0,0).setImmutable();new Hg("blue");function Gg(e,t){return void 0!==e[t]?t:void 0!==e["moz"+(t=t.charAt(0).toUpperCase()+t.slice(1))]?"moz"+t:void 0!==e["Moz"+t]?"Moz"+t:void 0!==e["webkit"+t]?"webkit"+t:void 0!==e["ms"+t]?"ms"+t:void 0!==e["o"+t]?"o"+t:void 0}Hg.ColorIO=new el("ColorIO",{valueType:Hg,documentation:"A color, with rgba",toStateObject:e=>e.toStateObject(),fromStateObject:e=>new Hg(e.r,e.g,e.b,e.a),stateSchema:{r:il,g:il,b:il,a:il}}),wo.register("detectPrefix",Gg);const Fg=Gg,zg={};function Ug(e){try{const t=document.createElement("canvas");t.width=1,t.height=1;const i=t.getContext("2d");i.fillStyle="black",i.fillRect(0,0,1,1);const n=t.toDataURL([e]),r="data:"+e;return n.slice(0,r.length)===r}catch(t){return!1}}function Wg(e,t){const i=document.createElement("canvas");i.width=1,i.height=1;const n=i.getContext("2d"),r=document.createElement("img");r.crossOrigin="Anonymous";const s=()=>{try{n.drawImage(r,0,0),i.toDataURL(),zg[e]=!0}catch(t){zg[e]=!1}};r.onload=s;try{r.src=t,r.complete&&s()}catch(a){zg[e]=!1}}Lg.register("Features",zg),zg.canvasPNGOutput=Ug("image/png"),zg.canvasJPEGOutput=Ug("image/jpeg"),zg.canvasGIFOutput=Ug("image/gif"),zg.canvasICONOutput=Ug("image/x-icon"),Wg("canvasPNGInput","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQIW2NkYGD4DwABCQEBtxmN7wAAAABJRU5ErkJggg=="),Wg("canvasJPEGInput","data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAMCAgICAgMCAgIDAwMDBAYEBAQEBAgGBgUGCQgKCgkICQkKDA8MCgsOCwkJDRENDg8QEBEQCgwSExIQEw8QEBD/2wBDAQMDAwQDBAgEBAgQCwkLEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBD/wAARCAABAAEDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD8qqKKKAP/2Q=="),Wg("canvasSVGInput","data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIj8+DQo8c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3cG9ydD0iMCAwIDEgMSIgd2lkdGg9IjEiIGhlaWdodD0iMSIgPg0KICA8cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMSIgaGVpZ2h0PSIxIiByeD0iMCIgcnk9IjAiIHN0eWxlPSJmaWxsOiBibGFjazsgc3Ryb2tlOiBub25lOyI+PC9yZWN0Pg0KPC9zdmc+DQo="),Wg("canvasGIFInput","data:image/gif;base64,R0lGODlhAQABAJEAAAAAAP///////wAAACH5BAEAAAIALAAAAAABAAEAAAICRAEAOw==");const Xg=document.createElement("canvas"),jg=Xg.getContext("2d");zg.toDataURLHD=Fg(Xg,"toDataURLHD"),zg.createImageDataHD=Fg(jg,"createImageDataHD"),zg.getImageDataHD=Fg(jg,"getImageDataHD"),zg.putImageDataHD=Fg(jg,"putImageDataHD"),zg.currentTransform=Fg(jg,"currentTransform"),zg.canvasFilter=Fg(jg,"filter");const Qg=document.createElement("span"),Kg=document.createElement("div");zg.textStroke=Fg(Qg.style,"textStroke"),zg.textStrokeColor=Fg(Qg.style,"textStrokeColor"),zg.textStrokeWidth=Fg(Qg.style,"textStrokeWidth"),zg.transform=Fg(Kg.style,"transform"),zg.transformOrigin=Fg(Kg.style,"transformOrigin"),zg.backfaceVisibility=Fg(Kg.style,"backfaceVisibility"),zg.borderRadius=Fg(Kg.style,"borderRadius"),zg.userSelect=Fg(Kg.style,"userSelect"),zg.touchAction=Fg(Kg.style,"touchAction"),zg.touchCallout=Fg(Kg.style,"touchCallout"),zg.userDrag=Fg(Kg.style,"userDrag"),zg.tapHighlightColor=Fg(Kg.style,"tapHighlightColor"),zg.fontSmoothing=Fg(Kg.style,"fontSmoothing"),zg.requestAnimationFrame=Fg(window,"requestAnimationFrame"),zg.cancelAnimationFrame=Fg(window,"cancelAnimationFrame"),zg.setStyle=(e,t,i)=>{void 0!==t&&(e.style[t]=i)},zg.passive=!1,window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>{zg.passive=!0}}));const Zg=zg,Jg=["normal","italic","oblique"],$g=["normal","small-caps"],ef=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"],tf=["normal","ultra-condensed","extra-condensed","condensed","semi-condensed","semi-expanded","expanded","extra-expanded","ultra-expanded"];class nf extends Km{constructor(e){const t=Vo()({style:"normal",variant:"normal",weight:"normal",stretch:"normal",size:"10px",lineHeight:"normal",family:"sans-serif",phetioType:nf.FontIO},e);super(t),this._style=t.style,this._variant=t.variant,this._weight=""+t.weight,this._stretch=t.stretch,this._size=nf.castSize(t.size),this._lineHeight=t.lineHeight,this._family=t.family,this._font=this.computeShorthand()}getFont(){return this._font}get font(){return this.getFont()}getStyle(){return this._style}get style(){return this.getStyle()}getVariant(){return this._variant}get variant(){return this.getVariant()}getWeight(){return this._weight}get weight(){return this.getWeight()}getStretch(){return this._stretch}get stretch(){return this.getStretch()}getSize(){return this._size}get size(){return this.getSize()}getNumericSize(){const e=this._size.match(/^(\d+)px$/);if(e)return Number(e[1]);const t=this._size.match(/^(\d+)pt$/);if(t)return.75*Number(t[1]);const i=this._size.match(/^(\d+)em$/);return i?Number(i[1])/16:12}get numericSize(){return this.getNumericSize()}getLineHeight(){return this._lineHeight}get lineHeight(){return this.getLineHeight()}getFamily(){return this._family}get family(){return this.getFamily()}copy(e){return new nf(No({style:this._style,variant:this._variant,weight:this._weight,stretch:this._stretch,size:this._size,lineHeight:this._lineHeight,family:this._family},e))}computeShorthand(){let e="";return"normal"!==this._style&&(e+=this._style+" "),"normal"!==this._variant&&(e+=this._variant+" "),"normal"!==this._weight&&(e+=this._weight+" "),"normal"!==this._stretch&&(e+=this._stretch+" "),e+=this._size,"normal"!==this._lineHeight&&(e+="/"+this._lineHeight),e+=" "+this._family,e}toCSS(){return this.getFont()}static castSize(e){return"number"==typeof e?e+"px":e}static isFontStyle(e){return Jg.includes(e)}static isFontVariant(e){return $g.includes(e)}static isFontWeight(e){return ef.includes(e)}static isFontStretch(e){return tf.includes(e)}static fromCSS(e){const t={},i=_.filter(e.split(/[\x09\x0A\x0C\x0D\x20]/),e=>e.length>0);for(let n=0;n<i.length;n++){const e=i[n];if("normal"===e);else if(nf.isFontStyle(e))t.style=e;else if(nf.isFontVariant(e))t.variant=e;else if(nf.isFontWeight(e))t.weight=e;else{if(!nf.isFontStretch(e)){const r=e.split(/\//);t.size=r[0],r[1]&&(t.lineHeight=r[1]),t.family=i.slice(n+1).join(" ");break}t.stretch=e}}return new nf(t)}}_defineProperty(nf,"DEFAULT",new nf),Lg.register("Font",nf),nf.FontIO=new el("FontIO",{valueType:nf,documentation:"Font handling for text drawing. Options:<ul><li><strong>style:</strong> normal      &mdash; normal | italic | oblique </li><li><strong>variant:</strong> normal    &mdash; normal | small-caps </li><li><strong>weight:</strong> normal     &mdash; normal | bold | bolder | lighter | 100 | 200 | 300 | 400 | 500 | 600 | 700 | 800 | 900 </li><li><strong>stretch:</strong> normal    &mdash; normal | ultra-condensed | extra-condensed | condensed | semi-condensed | semi-expanded | expanded | extra-expanded | ultra-expanded </li><li><strong>size:</strong> 10px         &mdash; absolute-size | relative-size | length | percentage -- unitless number interpreted as px. absolute suffixes: cm, mm, in, pt, pc, px. relative suffixes: em, ex, ch, rem, vw, vh, vmin, vmax. </li><li><strong>lineHeight:</strong> normal &mdash; normal | number | length | percentage -- NOTE: Canvas spec forces line-height to normal </li><li><strong>family:</strong> sans-serif &mdash; comma-separated list of families, including generic families (serif, sans-serif, cursive, fantasy, monospace). ideally escape with double-quotes</li></ul>",toStateObject:e=>({style:e.getStyle(),variant:e.getVariant(),weight:e.getWeight(),stretch:e.getStretch(),size:e.getSize(),lineHeight:e.getLineHeight(),family:e.getFamily()}),fromStateObject:e=>new nf(e),stateSchema:{style:Om,variant:Om,weight:Om,stretch:Om,size:Om,lineHeight:Om,family:Om}});const rf={};Lg.register("Renderer",rf),rf.numActiveRenderers=4,rf.bitsPerRenderer=5,rf.bitmaskRendererArea=255,rf.bitmaskCurrentRendererArea=15,rf.bitmaskLacksOffset=65536,rf.bitmaskLacksShift=16,rf.bitmaskNodeDefault=rf.bitmaskRendererArea,rf.bitmaskCanvas=1,rf.bitmaskSVG=2,rf.bitmaskDOM=4,rf.bitmaskWebGL=8,rf.bitmaskSingleCanvas=256,rf.bitmaskSingleSVG=512,rf.bitmaskNotPainted=4096,rf.bitmaskBoundsValid=8192,rf.bitmaskNoPDOM=16384,rf.bitmaskLacksCanvas=rf.bitmaskCanvas<<rf.bitmaskLacksShift,rf.bitmaskLacksSVG=rf.bitmaskSVG<<rf.bitmaskLacksShift,rf.bitmaskLacksDOM=rf.bitmaskDOM<<rf.bitmaskLacksShift,rf.bitmaskLacksWebGL=rf.bitmaskWebGL<<rf.bitmaskLacksShift,rf.isCanvas=function(e){return 0!=(e&rf.bitmaskCanvas)},rf.isSVG=function(e){return 0!=(e&rf.bitmaskSVG)},rf.isDOM=function(e){return 0!=(e&rf.bitmaskDOM)},rf.isWebGL=function(e){return 0!=(e&rf.bitmaskWebGL)};const sf={canvas:rf.bitmaskCanvas,svg:rf.bitmaskSVG,dom:rf.bitmaskDOM,webgl:rf.bitmaskWebGL};rf.fromName=function(e){return sf[e]},rf.stripBitmask=function(e){return e&rf.bitmaskRendererArea},rf.createOrderBitmask=function(e,t,i,n){return(e=e||0)|(t=t||0)<<5|(i=i||0)<<10|(n=n||0)<<15},rf.bitmaskOrder=function(e,t){return t>0&&(e>>=5*t),e&rf.bitmaskCurrentRendererArea},rf.bitmaskOrderFirst=function(e){return e&rf.bitmaskCurrentRendererArea},rf.bitmaskOrderSecond=function(e){return e>>5&rf.bitmaskCurrentRendererArea},rf.bitmaskOrderThird=function(e){return e>>10&rf.bitmaskCurrentRendererArea},rf.bitmaskOrderFourth=function(e){return e>>15&rf.bitmaskCurrentRendererArea},rf.pushOrderBitmask=function(e,t){let i=t;const n=rf.bitsPerRenderer*rf.numActiveRenderers;for(let r=0;r<=n;r+=rf.bitsPerRenderer){const n=e>>r&rf.bitmaskCurrentRendererArea;if(n===i)return e;if(0===n)return e|=i<<r;if(e&=~(rf.bitmaskCurrentRendererArea<<r),e|=i<<r,i=n,i===t)return e}throw new Error("pushOrderBitmask overflow")},rf.createSelfDrawable=function(e,t,i,n){let r;if(rf.isCanvas(i))r=t.createCanvasDrawable(i,e);else if(rf.isSVG(i))r=t.createSVGDrawable(i,e);else if(rf.isDOM(i))r=t.createDOMDrawable(i,e);else{if(!rf.isWebGL(i))throw new Error("Unrecognized renderer: "+i);r=t.createWebGLDrawable(i,e)}return r.setFittable(n),r},rf.webglCustom=1,rf.webglTexturedTriangles=2,rf.webglVertexColorPolygons=3;const af=rf,of="http://www.w3.org/2000/svg";Lg.register("svgns",of);const lf=of,hf="http://www.w3.org/1999/xlink";Lg.register("xlinkns",hf);const uf=hf,cf=navigator.userAgent;function df(e){return mf()===e}function pf(){return!!(window.phet&&phet.chipper&&phet.chipper.queryParameters&&phet.chipper.queryParameters["phet-app"]||(cf.match(/(iPod|iPhone|iPad)/)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>=2)&&cf.match(/AppleWebKit/))}function mf(){let e=-1,t=null;return"Microsoft Internet Explorer"===navigator.appName?(t=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),null!==t.exec(cf)&&(e=parseFloat(RegExp.$1))):"Netscape"===navigator.appName&&(t=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),null!==t.exec(cf)&&(e=parseFloat(RegExp.$1))),e}const gf={firefox:cf.toLowerCase().indexOf("firefox")>-1,mobileSafari:pf(),safari5:!!(cf.match(/Version\/5\./)&&cf.match(/Safari\//)&&cf.match(/AppleWebKit/)),safari6:!!(cf.match(/Version\/6\./)&&cf.match(/Safari\//)&&cf.match(/AppleWebKit/)),safari7:!!(cf.match(/Version\/7\./)&&cf.match(/Safari\//)&&cf.match(/AppleWebKit/)),safari10:!!(cf.match(/Version\/10\./)&&cf.match(/Safari\//)&&cf.match(/AppleWebKit/)),safari11:!!(cf.match(/Version\/11\./)&&cf.match(/Safari\//)&&cf.match(/AppleWebKit/)),safari9:!!(cf.match(/Version\/9\./)&&cf.match(/Safari\//)&&cf.match(/AppleWebKit/)),safari:pf()||!!(cf.match(/Version\//)&&cf.match(/Safari\//)&&cf.match(/AppleWebKit/)),ie:-1!==mf(),ie9:df(9),ie10:df(10),ie11:df(11),android:cf.indexOf("Android")>0,edge:!!cf.match(/Edge\//),chromium:/chrom(e|ium)/.test(cf.toLowerCase())&&!cf.match(/Edge\//),chromeOS:cf.indexOf("CrOS")>0,mac:navigator.platform.includes("Mac")};wo.register("platform",gf);const ff=gf;function yf(e,t){return new al(e,t)}const Ef=Zg.transform,vf=Zg.transformOrigin||"transformOrigin";let Af,bf=!0;const Sf={prepareForTransform(e){e.style[vf]="top left"},applyPreparedTransform(e,t){t.style[Ef]=e.getCSSTransform()},setTransform(e,t){t.style[Ef]=e},unsetTransform(e){e.style[Ef]=""},polyfillRequestAnimationFrame(){window.requestAnimationFrame&&window.cancelAnimationFrame||(Zg.requestAnimationFrame&&Zg.cancelAnimationFrame?(window.requestAnimationFrame=window[Zg.requestAnimationFrame],window.cancelAnimationFrame=window[Zg.cancelAnimationFrame]):(window.requestAnimationFrame=e=>{const t=Date.now();return window.setTimeout(()=>{e(Date.now()-t)},16)},window.cancelAnimationFrame=clearTimeout))},backingStorePixelRatio:e=>e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1,backingScale(e){if("devicePixelRatio"in window){const t=Sf.backingStorePixelRatio(e);return window.devicePixelRatio/t}return 1},supportsNativeCanvasFilter:()=>!!Zg.canvasFilter,supportsImageDataCanvasFilter:()=>1===Sf.backingStorePixelRatio(Lg.scratchContext),scanBounds(e,t,i){const n=_.map(_.range(t),()=>!1),r=_.map(_.range(t),()=>!1);for(let u=0;u<t;u++)for(let i=0;i<t;i++){const s=4*(i*t+u);0===e.data[s]&&0===e.data[s+1]&&0===e.data[s+2]&&0===e.data[s+3]||(n[u]=!0,r[i]=!0)}const s=_.indexOf(n,!0),a=_.lastIndexOf(n,!0),o=_.indexOf(r,!0),l=_.lastIndexOf(r,!0),h=t/16;return{minBounds:new Zl(s<1||s>=t-1?Number.POSITIVE_INFINITY:i.inversePosition2(yf(s+1+h,0)).x,o<1||o>=t-1?Number.POSITIVE_INFINITY:i.inversePosition2(yf(0,o+1+h)).y,a<1||a>=t-1?Number.NEGATIVE_INFINITY:i.inversePosition2(yf(a-h,0)).x,l<1||l>=t-1?Number.NEGATIVE_INFINITY:i.inversePosition2(yf(0,l-h)).y),maxBounds:new Zl(s<1||s>=t-1?Number.NEGATIVE_INFINITY:i.inversePosition2(yf(s-1-h,0)).x,o<1||o>=t-1?Number.NEGATIVE_INFINITY:i.inversePosition2(yf(0,o-1-h)).y,a<1||a>=t-1?Number.POSITIVE_INFINITY:i.inversePosition2(yf(a+2+h,0)).x,l<1||l>=t-1?Number.POSITIVE_INFINITY:i.inversePosition2(yf(0,l+2+h)).y)}},canvasAccurateBounds(e,t){const i=t&&t.precision?t.precision:.001,n=t&&t.resolution?t.resolution:128,r=t&&t.initialScale?t.initialScale:1/16;let s=Zl.NOTHING,a=Zl.EVERYTHING;const o=document.createElement("canvas");o.width=n,o.height=n;const l=o.getContext("2d");function h(t){l.save(),t.matrix.canvasSetTransform(l),e(l),l.restore();const i=l.getImageData(0,0,n,n),r=Sf.scanBounds(i,n,t);return l.clearRect(0,0,n,n),r}function u(e){const t=(n-4)/(e.maxX-e.minX),i=(n-4)/(e.maxY-e.minY),r=-t*e.minX+2,s=-i*e.minY+2;return new xp(Mh.translation(r,s).timesMatrix(Mh.scaling(t,i)))}const c=new xp;c.append(Mh.translation(n/2,n/2)),c.append(Mh.scaling(r));const d=h(c);let p,m,g;for(s=s.union(d.minBounds),a=a.intersection(d.maxBounds),p=a.minY,m=a.maxY;isFinite(s.minX)&&isFinite(a.minX)&&Math.abs(s.minX-a.minX)>i;){if(g=h(u(new Zl(a.minX,p,s.minX,m))),s.minX<=g.minBounds.minX&&a.minX>=g.maxBounds.minX){0;break}s=s.withMinX(Math.min(s.minX,g.minBounds.minX)),a=a.withMinX(Math.max(a.minX,g.maxBounds.minX)),p=Math.max(p,g.maxBounds.minY),m=Math.min(m,g.maxBounds.maxY)}for(p=a.minY,m=a.maxY;isFinite(s.maxX)&&isFinite(a.maxX)&&Math.abs(s.maxX-a.maxX)>i;){if(g=h(u(new Zl(s.maxX,p,a.maxX,m))),s.maxX>=g.minBounds.maxX&&a.maxX<=g.maxBounds.maxX){0;break}s=s.withMaxX(Math.max(s.maxX,g.minBounds.maxX)),a=a.withMaxX(Math.min(a.maxX,g.maxBounds.maxX)),p=Math.max(p,g.maxBounds.minY),m=Math.min(m,g.maxBounds.maxY)}for(p=a.minX,m=a.maxX;isFinite(s.minY)&&isFinite(a.minY)&&Math.abs(s.minY-a.minY)>i;){if(g=h(u(new Zl(p,a.minY,m,s.minY))),s.minY<=g.minBounds.minY&&a.minY>=g.maxBounds.minY){0;break}s=s.withMinY(Math.min(s.minY,g.minBounds.minY)),a=a.withMinY(Math.max(a.minY,g.maxBounds.minY)),p=Math.max(p,g.maxBounds.minX),m=Math.min(m,g.maxBounds.maxX)}for(p=a.minX,m=a.maxX;isFinite(s.maxY)&&isFinite(a.maxY)&&Math.abs(s.maxY-a.maxY)>i;){if(g=h(u(new Zl(p,s.maxY,m,a.maxY))),s.maxY>=g.minBounds.maxY&&a.maxY<=g.maxBounds.maxY){0;break}s=s.withMaxY(Math.max(s.maxY,g.minBounds.maxY)),a=a.withMaxY(Math.min(a.maxY,g.maxBounds.maxY)),p=Math.max(p,g.maxBounds.minX),m=Math.min(m,g.maxBounds.maxX)}const f=new Zl(isFinite(s.minX)&&isFinite(a.minX)?(s.minX+a.minX)/2:Number.POSITIVE_INFINITY,isFinite(s.minY)&&isFinite(a.minY)?(s.minY+a.minY)/2:Number.POSITIVE_INFINITY,isFinite(s.maxX)&&isFinite(a.maxX)?(s.maxX+a.maxX)/2:Number.NEGATIVE_INFINITY,isFinite(s.maxY)&&isFinite(a.maxY)?(s.maxY+a.maxY)/2:Number.NEGATIVE_INFINITY);return f.minBounds=s,f.maxBounds=a,f.isConsistent=a.containsBounds(s),f.precision=Math.max(Math.abs(s.minX-a.minX),Math.abs(s.minY-a.minY),Math.abs(s.maxX-a.maxX),Math.abs(s.maxY-a.maxY)),f},toPowerOf2(e){let t=1;for(;t<e;)t*=2;return t},createShader(e,t,i){const n=e.createShader(i);return e.shaderSource(n,t),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS)||(console.log("GLSL compile error:"),console.log(e.getShaderInfoLog(n)),console.log(t)),n},applyWebGLContextDefaults(e){e.clearColor(0,0,0,0),e.enable(e.BLEND),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA)},setWebGLEnabled(e){bf=e},checkWebGLSupport(e){if(!bf)return!1;const t=document.createElement("canvas"),i={failIfMajorPerformanceCaveat:!0};try{const n=!!window.WebGLRenderingContext&&(t.getContext("webgl",i)||t.getContext("experimental-webgl",i));if(!n)return!1;if(e)for(let t=0;t<e.length;t++)if(null===n.getExtension(e[t]))return!1;return!0}catch(n){return!1}},checkIE11StencilSupport(){const e=document.createElement("canvas");try{const t=!!window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl"));return!!t&&(t.clearStencil(0),0===t.getError())}catch(t){return!1}},get isWebGLSupported(){return void 0===Af&&(Af=Sf.checkWebGLSupport()),Af},loseContext(e){const t=e.getExtension("WEBGL_lose_context");t&&(t.loseContext(),setTimeout(()=>{t.restoreContext()},1e3))},safariEmbeddingMarkWorkaround:e=>ff.safari?e.split("").join("​"):e};Lg.register("Utils",Sf);const _f=Sf;class xf{constructor(e,t){this.display=e,this.trail=t}}_defineProperty(xf,"FocusIO",new el("FocusIO",{valueType:xf,documentation:"A IO Type for the instance in the simulation which currently has keyboard focus. FocusIO is serialized into and Object with key `focusedPhetioElement` that is a list of PhET-iO Elements, from parent-most to child-most corresponding to the PhET-iO Element that was instrumented.",toStateObject:e=>{const t=[];return e.trail.nodes.forEach((e,i)=>{e.isPhetioInstrumented()&&t.push(e.tandem.phetioID)}),{focusedPhetioElement:t}},stateSchema:{focusedPhetioElement:xh(Om)}})),Lg.register("Focus",xf);const wf=xf,Tf=["ArrowRight","ArrowLeft","ArrowUp","ArrowDown"],Pf=["KeyW","KeyS","KeyA","KeyD"],Cf=["Digit0","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9"],Vf=["ShiftLeft","ShiftRight"],Rf=["ControlLeft","ControlRight"],Nf=["AltLeft","AltRight"],Mf=["MetaLeft","MetaRight","OSLeft","OSRight"],kf=["Alt","Control","Shift"],Lf=["AltLeft","AltRight","ControlLeft","ControlRight","ShiftLeft","ShiftRight","MetaLeft","MetaRight","OSLeft","OSRight"],If={valueType:Event},Bf=[],Df={KEY_SPACE:"Space",KEY_ENTER:"Enter",KEY_TAB:"Tab",KEY_RIGHT_ARROW:"ArrowRight",KEY_LEFT_ARROW:"ArrowLeft",KEY_UP_ARROW:"ArrowUp",KEY_DOWN_ARROW:"ArrowDown",KEY_SHIFT_LEFT:"ShiftLeft",KEY_SHIFT_RIGHT:"ShiftRight",KEY_ALT_LEFT:"AltLeft",KEY_ALT_RIGHT:"AltRight",KEY_CONTROL_LEFT:"ControlLeft",KEY_CONTROL_RIGHT:"ControlRight",KEY_META_LEFT:"MetaLeft",KEY_META_RIGHT:"MetaRight",KEY_META_LEFT_FIREFOX:"OSLeft",KEY_META_RIGHT_FIREFOX:"OSRight",KEY_SHIFT:"Shift",KEY_ALT:"Alt",KEY_CONTROL:"Control",KEY_ESCAPE:"Escape",KEY_DELETE:"Delete",KEY_BACKSPACE:"Backspace",KEY_PAGE_UP:"PageUp",KEY_PAGE_DOWN:"PageDown",KEY_END:"End",KEY_HOME:"Home",KEY_0:"Digit0",KEY_1:"Digit1",KEY_2:"Digit2",KEY_3:"Digit3",KEY_4:"Digit4",KEY_5:"Digit5",KEY_6:"Digit6",KEY_7:"Digit7",KEY_8:"Digit8",KEY_9:"Digit9",KEY_NUMPAD_0:"Numpad0",KEY_NUMPAD_1:"Numpad1",KEY_NUMPAD_2:"Numpad2",KEY_NUMPAD_3:"Numpad3",KEY_NUMPAD_4:"Numpad4",KEY_NUMPAD_5:"Numpad5",KEY_NUMPAD_6:"Numpad6",KEY_NUMPAD_7:"Numpad7",KEY_NUMPAD_8:"Numpad8",KEY_NUMPAD_9:"Numpad9",KEY_NUMPAD_DECIMAL:"NumpadDecimal",KEY_NUMPAD_PLUS:"NumpadAdd",KEY_NUMPAD_MINUS:"NumpadSubtract",KEY_A:"KeyA",KEY_B:"KeyB",KEY_C:"KeyC",KEY_D:"KeyD",KEY_E:"KeyE",KEY_F:"KeyF",KEY_G:"KeyG",KEY_H:"KeyH",KEY_I:"KeyI",KEY_J:"KeyJ",KEY_K:"KeyK",KEY_L:"KeyL",KEY_M:"KeyM",KEY_N:"KeyN",KEY_O:"KeyO",KEY_P:"KeyP",KEY_Q:"KeyQ",KEY_R:"KeyR",KEY_S:"KeyS",KEY_T:"KeyT",KEY_U:"KeyU",KEY_V:"KeyV",KEY_W:"KeyW",KEY_X:"KeyX",KEY_Y:"KeyY",KEY_Z:"KeyZ",KEY_EQUALS:"Equal",KEY_PLUS:"Equal",KEY_MINUS:"Minus",KEY_PERIOD:"Period",ARROW_KEYS:Tf,WASD_KEYS:Pf,MOVEMENT_KEYS:Tf.concat(Pf),SHIFT_KEYS:Vf,CONTROL_KEYS:Rf,ALT_KEYS:Nf,META_KEYS:Mf,MODIFIER_KEY_CODES:Lf,MODIFIER_KEY_TO_CODE_MAP:new Map([["Alt",Nf],["Shift",Vf],["Control",Rf]]),isArrowKey:e=>Df.isAnyKeyEvent(e,Tf),isRangeKey:e=>Df.isArrowKey(e)||Df.isAnyKeyEvent(e,[Df.KEY_PAGE_UP,Df.KEY_PAGE_DOWN,Df.KEY_HOME,Df.KEY_END]),isNumberKey:e=>Df.isAnyKeyEvent(e,Cf),getNumberFromCode:e=>Df.isNumberKey(e)&&e instanceof KeyboardEvent?Number(e.code.replace("Digit","")):null,isShiftKey:e=>Df.isAnyKeyEvent(e,Vf),isAltKey:e=>Df.isAnyKeyEvent(e,Nf),isControlKey:e=>Df.isAnyKeyEvent(e,Rf),isMetaKey:e=>Df.isAnyKeyEvent(e,Mf),isWASDKey:e=>Df.isAnyKeyEvent(e,Pf),isMovementKey:e=>Df.isAnyKeyEvent(e,Df.MOVEMENT_KEYS),isAnyKeyEvent(e,t){Fo(e,If);const i=Df.getEventCode(e);return!!i&&t.includes(i)},isKeyEvent:(e,t)=>Df.getEventCode(e)===t,getEventCode(e){let t=null;return e instanceof KeyboardEvent&&e.code&&(t=e.code,t.startsWith("Numpad")&&Bf.includes(e.key)&&(t=e.key)),t},isModifierKey:e=>kf.includes(e),ALL_KEYS:Bf};for(const e in Df)Df.hasOwnProperty(e)&&"string"==typeof Df[e]&&Bf.push(Df[e]);Lg.register("KeyboardUtils",Df);const Of=Df,qf={q:[Of.KEY_Q],w:[Of.KEY_W],e:[Of.KEY_E],r:[Of.KEY_R],t:[Of.KEY_T],y:[Of.KEY_Y],u:[Of.KEY_U],i:[Of.KEY_I],o:[Of.KEY_O],p:[Of.KEY_P],a:[Of.KEY_A],s:[Of.KEY_S],d:[Of.KEY_D],f:[Of.KEY_F],g:[Of.KEY_G],h:[Of.KEY_H],j:[Of.KEY_J],k:[Of.KEY_K],l:[Of.KEY_L],z:[Of.KEY_Z],x:[Of.KEY_X],c:[Of.KEY_C],v:[Of.KEY_V],b:[Of.KEY_B],n:[Of.KEY_N],m:[Of.KEY_M],0:[Of.KEY_0,Of.KEY_NUMPAD_0],1:[Of.KEY_1,Of.KEY_NUMPAD_1],2:[Of.KEY_2,Of.KEY_NUMPAD_2],3:[Of.KEY_3,Of.KEY_NUMPAD_3],4:[Of.KEY_4,Of.KEY_NUMPAD_4],5:[Of.KEY_5,Of.KEY_NUMPAD_5],6:[Of.KEY_6,Of.KEY_NUMPAD_6],7:[Of.KEY_7,Of.KEY_NUMPAD_7],8:[Of.KEY_8,Of.KEY_NUMPAD_8],9:[Of.KEY_9,Of.KEY_NUMPAD_9],enter:[Of.KEY_ENTER],tab:[Of.KEY_TAB],equals:[Of.KEY_EQUALS],plus:[Of.KEY_PLUS,Of.KEY_NUMPAD_PLUS],minus:[Of.KEY_MINUS,Of.KEY_NUMPAD_MINUS],period:[Of.KEY_PERIOD,Of.KEY_NUMPAD_DECIMAL],escape:[Of.KEY_ESCAPE],delete:[Of.KEY_DELETE],backspace:[Of.KEY_BACKSPACE],pageUp:[Of.KEY_PAGE_UP],pageDown:[Of.KEY_PAGE_DOWN],end:[Of.KEY_END],home:[Of.KEY_HOME],space:[Of.KEY_SPACE],arrowLeft:[Of.KEY_LEFT_ARROW],arrowRight:[Of.KEY_RIGHT_ARROW],arrowUp:[Of.KEY_UP_ARROW],arrowDown:[Of.KEY_DOWN_ARROW],ctrl:[Of.KEY_CONTROL_LEFT,Of.KEY_CONTROL_RIGHT],alt:[Of.KEY_ALT_LEFT,Of.KEY_ALT_RIGHT],shift:[Of.KEY_SHIFT_LEFT,Of.KEY_SHIFT_RIGHT]};Lg.register("EnglishStringToCodeMap",qf);const Yf=qf,Hf=["arrowLeft","arrowRight","arrowUp","arrowDown"],Gf=new el("BooleanIO",{supertype:Bm,valueType:"boolean",documentation:"IO Type for Javascript's boolean primitive type",stateSchema:Zo.asValue("boolean",{valueType:"boolean"}),toStateObject:_.identity});zo.register("BooleanIO",Gf);const Ff=Gf,zf=e=>Object.getPrototypeOf(e)===Object.prototype,Uf=new el("ObjectLiteralIO",{documentation:"IO Type for object literals",isValidValue:zf,supertype:Bm,stateSchema:Zo.asValue("object",{valueType:Object,isValidValue:zf}),toStateObject:_.identity});zo.register("ObjectLiteralIO",Uf);const Wf=Uf,Xf=new el("EventIO",{valueType:window.Event,documentation:"A DOM Event",toStateObject:e=>ex.serializeDomEvent(e),fromStateObject:e=>ex.deserializeDomEvent(e),stateSchema:()=>({constructorName:Om,altKey:ng(Ff),button:ng(il),charCode:ng(il),clientX:ng(il),clientY:ng(il),code:ng(Om),ctrlKey:ng(Ff),deltaMode:ng(il),deltaX:ng(il),deltaY:ng(il),deltaZ:ng(il),key:ng(Om),keyCode:ng(il),metaKey:ng(Ff),pageX:ng(il),pageY:ng(il),pointerId:ng(il),pointerType:ng(Om),scale:ng(il),shiftKey:ng(Ff),target:ng(Wf),type:ng(Om),relatedTarget:ng(Wf),which:ng(il)})});Lg.register("EventIO",Xf);const jf=Xf,Qf=document.createElement("style");Qf.type="text/css",document.head.appendChild(Qf);const Kf=document.styleSheets[document.styleSheets.length-1],Zf={stylesheet:Kf,styleElement:Qf,addRule(e){this.stylesheet.insertRule(e,0)}};Lg.register("SceneryStyle",Zf);const Jf=Zf;class $f{constructor(e,t){this.canvas=e,this.context=t,this.resetStyles()}resetStyles(){this.fillStyle=void 0,this.strokeStyle=void 0,this.lineWidth=void 0,this.lineCap=void 0,this.lineJoin=void 0,this.lineDash=void 0,this.lineDashOffset=void 0,this.miterLimit=void 0,this.font=void 0,this.direction=void 0}setDimensions(e,t){this.canvas.width=e,this.canvas.height=t,this.resetStyles()}setFillStyle(e){e&&e instanceof _g&&(e=e.value),e&&e.getCanvasStyle&&(e=e.getCanvasStyle()),this.fillStyle!==e&&(this.fillStyle=e,this.context.fillStyle=e)}setStrokeStyle(e){e&&e instanceof _g&&(e=e.value),e&&e.getCanvasStyle&&(e=e.getCanvasStyle()),this.strokeStyle!==e&&(this.strokeStyle=e,this.context.strokeStyle=e)}setLineWidth(e){this.lineWidth!==e&&(this.lineWidth=e,this.context.lineWidth=e)}setLineCap(e){this.lineCap!==e&&(this.lineCap=e,this.context.lineCap=e)}setLineJoin(e){this.lineJoin!==e&&(this.lineJoin=e,this.context.lineJoin=e)}setMiterLimit(e){this.miterLimit!==e&&(this.miterLimit=e,this.context.miterLimit=e)}setLineDash(e){this.lineDash!==e&&(this.lineDash=e,this.context.setLineDash?this.context.setLineDash(null===e?[]:e):void 0!==this.context.mozDash?this.context.mozDash=e:void 0!==this.context.webkitLineDash&&(this.context.webkitLineDash=e||[]))}setLineDashOffset(e){this.lineDashOffset!==e&&(this.lineDashOffset=e,void 0!==this.context.lineDashOffset?this.context.lineDashOffset=e:void 0!==this.context.webkitLineDashOffset&&(this.context.webkitLineDashOffset=e))}setFont(e){this.font!==e&&(this.font=e,this.context.font=e)}setDirection(e){this.direction!==e&&(this.direction=e,this.context.direction=e)}}Lg.register("CanvasContextWrapper",$f);const ey=$f;class ty extends _g{constructor(e,t){super(e,t),this._initialValue=e}getInitialValue(){return this._initialValue}get initialValue(){return this.getInitialValue()}setInitialValue(e){this._initialValue=e}get value(){return super.value}set value(e){super.set(e)}reset(){this.set(this._initialValue)}set(e){super.set(e)}isSettable(){return!0}}function iy(e,t,i){return void 0!==e["on"+t]?t:void 0!==e["onmoz"+t]?"moz"+t:void 0!==e["onMoz"+t]?"Moz"+t:void 0!==e["onwebkit"+t]?"webkit"+t:void 0!==e["onms"+t]?"ms"+t:void 0!==e["ono"+t]?"o"+t:void 0}ko.register("Property",ty),wo.register("detectPrefixEvent",iy);const ny=iy,ry=Fg(document,"exitFullscreen")||Fg(document,"cancelFullScreen"),sy=Fg(document,"fullscreenElement")||Fg(document,"fullScreenElement"),ay=Fg(document,"fullscreenEnabled")||Fg(document,"fullScreenEnabled");let oy=ny(document,"fullscreenchange");"msfullscreenchange"===oy&&(oy="MSFullscreenChange");const ly={isFullScreen:()=>!!document[sy],isFullScreenEnabled:()=>document[ay]&&!ff.safari7,enterFullScreen(e){const t=Fg(document.body,"requestFullscreen")||Fg(document.body,"requestFullScreen");e.domElement[t]&&e.domElement[t]()},exitFullScreen(){document[ry]&&document[ry]()},toggleFullScreen(e){ly.isFullScreen()?ly.exitFullScreen():ly.enterFullScreen(e)},isFullScreenProperty:new ty(!1)};document.addEventListener(oy,e=>{ly.isFullScreenProperty.set(ly.isFullScreen())}),Lg.register("FullScreen",ly);const hy=ly,uy={mixInto(e,t){const i=Vo()({defaultArguments:[],initialize:e.prototype.initialize,maxSize:100,initialSize:0,useDefaultConstruction:!1},t),n=[];let r=i.maxSize;const s=Function.prototype.bind.bind(e,e),a=s(...i.defaultArguments),o=i.initialize,l=i.useDefaultConstruction,h=e.prototype;for(Tg(e,{pool:n,dirtyFromPool:()=>n.length?n.pop():new a,createFromPool(){let e;for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return n.length?(e=n.pop(),o.apply(e,i)):l?(e=new a,o.apply(e,i)):e=new(s(...i)),e},get poolSize(){return n.length},set maxPoolSize(e){r=e},get maxPoolSize(){return r}}),Tg(h,{freeToPool(){n.length<r&&n.push(this)}});n.length<i.initialSize;)n.push(new a);return e}};wo.register("Poolable",uy);const cy=uy;class dy{constructor(e,t){this.create=e,this.destroy=t,this.map=new Map}increment(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this.map.has(e))this.map.get(e).count+=t;else{const i=this.create(e),n=py.createFromPool(t,e,i);this.map.set(e,n)}}decrement(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const i=this.map.get(e);i&&(i.count-=t,i.count<1&&(this.destroy(e,i.value),this.map.delete(e),i.dispose()))}get(e){return this.map.get(e).value}clear(){this.map.clear()}}class py{constructor(e,t,i){this.initialize(e,t,i)}initialize(e,t,i){this.count=e,this.key=t,this.value=i}dispose(){this.key=null,this.value=null,this.freeToPool()}}cy.mixInto(py,{initialize:py.prototype.initialize}),Lg.register("CountMap",dy);const my=dy;class gy extends ty{constructor(e,t){super(e,Vo()({valueType:"boolean",phetioValueType:Ff},t))}toggle(){this.value=!this.value}}ko.register("BooleanProperty",gy);class fy extends gy{constructor(e,t){super(!1,t=Po({display:null},t)),this.node=e,this.display=t.display,this.updateListener=this.updateValue.bind(this),this.changedInstanceListener=this.changedInstance.bind(this),e.changedInstanceEmitter.addListener(this.changedInstanceListener);const i=e.instances;for(let n=0;n<i.length;n++)this.changedInstance(i[n],!0)}updateValue(){this.value=this.node.wasVisuallyDisplayed(this.display)}changedInstance(e,t){t?e.visibleEmitter.addListener(this.updateListener):e.visibleEmitter.removeListener(this.updateListener),this.updateValue()}dispose(){const e=this.node.instances;for(let t=0;t<e.length;t++)this.changedInstance(e[t],!1);this.node.changedInstanceEmitter.removeListener(this.changedInstanceListener),super.dispose()}}Lg.register("DisplayedProperty",fy);const yy=fy;class Ey{constructor(e){this.scene=e,this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.img=document.createElement("img"),this.update()}update(e){this.scene.updateScene(),this.canvas.width=this.scene.getSceneWidth(),this.canvas.height=this.scene.getSceneHeight(),this.scene.renderToCanvas(this.canvas,this.context,()=>{const t=this.toDataURL();this.img.onload=()=>{e(),delete this.img.onload},this.img.src=t})}}Lg.register("SceneImage",Ey);const vy=new gy(!(null!==(W=window)&&void 0!==W&&null!==(X=W.phet)&&void 0!==X&&null!==(j=X.chipper)&&void 0!==j&&j.queryParameters)||(null===(Q=window)||void 0===Q||null===(K=Q.phet)||void 0===K||null===(Z=K.chipper)||void 0===Z||null===(J=Z.queryParameters)||void 0===J?void 0:J.allowLinks),{tandem:Lm.GENERAL_MODEL.createTandem("allowLinksProperty")});Lg.register("allowLinksProperty",vy);const Ay=vy;function by(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ay.value;const i=phet&&phet.chipper&&phet.chipper.isFuzzEnabled();if(t&&!i){const t=window.open(e,"_blank");t&&t.focus()}}Lg.register("openPopup",by);const Sy=by,_y=(e,t)=>{const i=Vo()({requiredOnly:!1},t),n=[],r=new LineBreaker(e);r[Symbol.iterator]=()=>({next(){const e=r.nextBreak();return null!==e?{value:e,done:!1}:{done:!0}}});let s=0;for(const a of r){const e=a.position;i.requiredOnly&&!a.required||(s!==e&&n.push(new Hl(s,e)),s=a.position)}return s<e.length&&n.push(new Hl(s,e.length)),n};Lg.register("getLineBreakRanges",_y);const xy=_y,wy=new al(0,0),Ty=Mh.IDENTITY.copy();class Py extends Fl{}_defineProperty(Py,"TRANSLATION",new(ee=Py)),_defineProperty(Py,"TRANSLATION_AND_SCALE",new ee),_defineProperty(Py,"TRANSLATION_AND_ROTATION",new ee),_defineProperty(Py,"AFFINE",new ee),_defineProperty(Py,"enumeration",new Xl(ee,{phetioDocumentation:"Defines the available transform type for a SpriteInstance"}));class Cy{constructor(){this.sprite=null,this.matrix=(new Mh).setToAffine(1,0,0,0,1,0),this.transformType=Py.TRANSLATION,this.alpha=1}initialize(){return this}getShape(){return this.sprite?this.sprite.getShape().transformed(this.matrix):new Ip}containsPoint(e){if(!this.sprite)return!1;const t=wy.set(e);return this.transformType===Py.AFFINE?Ty.set(this.matrix).invert().multiplyVector2(t):(t.x-=this.matrix.m02(),t.y-=this.matrix.m12(),this.transformType===Py.TRANSLATION_AND_SCALE?(t.x/=this.matrix.m00(),t.y/=this.matrix.m11()):this.transformType===Py.TRANSLATION_AND_ROTATION&&t.rotate(-this.matrix.rotation)),this.sprite.containsPoint(t)}freeToPool(){Cy.pool.freeToPool(this)}}_defineProperty(Cy,"pool",new Mo(Cy,{maxSize:1e3})),Lg.register("SpriteInstance",Cy);class Vy{constructor(e){this.rootBin=new Ry(e,null)}allocate(e,t){const i=this.rootBin.findAvailableBin(e,t);if(i){const n=i.split(e,t);return n.use(),n}return null}deallocate(e){e.unuse()}toString(){let e="",t="";return function i(n){e+=t+n.toString()+"\n",t+="  ",_.each(n.children,i),t=t.substring(2)}(this.rootBin),e}}rl.register("BinPacker",Vy);class Ry{constructor(e,t){this.bounds=e,this.parent=t,this.isSplit=!1,this.isUsed=!1,this.children=[]}findAvailableBin(e,t){if(this.isUsed)return null;if(this.bounds.width<e||this.bounds.height<t)return null;if(this.isSplit){for(let i=0;i<this.children.length;i++){const n=this.children[i].findAvailableBin(e,t);if(n)return n}return null}return this}split(e,t){if(e===this.bounds.width&&t===this.bounds.height)return this;this.isSplit=!0;const i=this.bounds.minX+e,n=this.bounds.minY+t,r=new Zl(this.bounds.minX,this.bounds.minY,i,n),s=new Zl(i,this.bounds.minY,this.bounds.maxX,n),a=new Zl(this.bounds.minX,n,this.bounds.maxX,this.bounds.maxY),o=new Ry(r,this);return this.children.push(o),s.hasNonzeroArea()&&this.children.push(new Ry(s,this)),a.hasNonzeroArea()&&this.children.push(new Ry(a,this)),o}use(){this.isUsed=!0}unuse(){this.isUsed=!1,this.parent&&this.parent.attemptToCollapse()}attemptToCollapse(){for(let e=0;e<this.children.length;e++){const t=this.children[e];if(t.isSplit||t.isUsed)return}this.children=[],this.isSplit=!1,this.parent&&this.parent.attemptToCollapse()}toString(){return this.bounds.toString()+(this.isUsed?" used":"")}}Vy.Bin=Ry;const Ny={width:Ol,height:Ol};class My{constructor(e,t){this.width=e,this.height=t}toString(){return`[${this.width}w, ${this.height}h]`}set(e){return this.width=e.width,this.height=e.height,this}setWidth(e){return this.width=e,this}setHeight(e){return this.height=e,this}copy(e){return e?e.set(this):new My(this.width,this.height)}swapped(){return new My(this.height,this.width)}toBounds(e,t){return new Zl(e=void 0!==e?e:0,t=void 0!==t?t:0,this.width+e,this.height+t)}equals(e){return this.width===e.width&&this.height===e.height}toStateObject(){return{width:Ol.toStateObject(this.width),height:Ol.toStateObject(this.height)}}static fromStateObject(e){return new My(Ol.fromStateObject(e.width),Ol.fromStateObject(e.height))}}_defineProperty(My,"Dimension2IO",new el("Dimension2IO",{valueType:ie=My,documentation:'A dimension with "width" and "height" members.',stateSchema:Ny,toStateObject:e=>e.toStateObject(),fromStateObject:e=>ie.fromStateObject(e)})),rl.register("Dimension2",My);const ky=new My(1024,1024);class Ly{constructor(e){this.useMipmaps=e,this.gl=null,this.texture=null,this.bounds=new Zl(0,0,ky.width,ky.height),this.width=this.bounds.width,this.height=this.bounds.height,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.context=this.canvas.getContext("2d"),this.binPacker=new Vy(this.bounds),this.dirty=!0,this.usedSprites=[],this.unusedSprites=[]}initializeContext(e){this.gl=e,this.createTexture()}createTexture(){const e=this.gl;this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,this.useMipmaps?e.LINEAR_MIPMAP_LINEAR:e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this.canvas),this.useMipmaps&&(e.hint(e.GENERATE_MIPMAP_HINT,e.NICEST),e.generateMipmap(e.TEXTURE_2D)),e.bindTexture(e.TEXTURE_2D,null),this.dirty=!1}updateTexture(){if(this.dirty){this.dirty=!1;const e=this.gl;e.bindTexture(e.TEXTURE_2D,this.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this.canvas),this.useMipmaps&&(e.hint(e.GENERATE_MIPMAP_HINT,e.NICEST),e.generateMipmap(e.TEXTURE_2D)),e.bindTexture(e.TEXTURE_2D,null)}}addImage(e,t,i){let n,r;for(n=0;n<this.usedSprites.length;n++){const t=this.usedSprites[n];if(t.image===e)return t.count++,t}for(n=0;n<this.unusedSprites.length;n++){const t=this.unusedSprites[n];if(t.image===e)return t.count++,this.unusedSprites.splice(n,1),this.usedSprites.push(t),t}for(;!(r=this.binPacker.allocate(t+2+1,i+2+1))&&this.unusedSprites.length;){const e=this.unusedSprites.shift();this.dirty=!0;const t=e.bin.bounds;this.context.clearRect(t.x,t.y,t.width,t.height),this.binPacker.deallocate(e.bin)}if(r){const n=new Zl((r.bounds.minX+1)/this.width,(r.bounds.minY+1)/this.height,(r.bounds.maxX-1-1)/this.width,(r.bounds.maxY-1-1)/this.height),s=new Iy(this,r,n,e,1);return this.copyImageWithGutter(e,t,i,r.bounds.x,r.bounds.y),this.dirty=!0,this.usedSprites.push(s),s}return null}removeImage(e){let t,i;for(i=0;i<this.usedSprites.length;i++)if(this.usedSprites[i].image===e){t=this.usedSprites[i];break}--t.count<=0&&(this.usedSprites.splice(i,1),this.unusedSprites.push(t))}containsImage(e){let t;for(t=0;t<this.usedSprites.length;t++)if(this.usedSprites[t].image===e)return!0;for(t=0;t<this.unusedSprites.length;t++)if(this.unusedSprites[t].image===e)return!0;return!1}copyImageWithGutter(e,t,i,n,r){this.copyImageRegion(e,1,1,0,0,n,r),this.copyImageRegion(e,1,1,t-1,0,n+1+t,r),this.copyImageRegion(e,1,1,t-1,i-1,n+1+t,r+1+i),this.copyImageRegion(e,1,1,0,i-1,n,r+1+i),this.copyImageRegion(e,t,1,0,0,n+1,r),this.copyImageRegion(e,t,1,0,i-1,n+1,r+1+i),this.copyImageRegion(e,1,i,0,0,n,r+1),this.copyImageRegion(e,1,i,t-1,0,n+1+t,r+1),this.context.drawImage(e,n+1,r+1)}copyImageRegion(e,t,i,n,r,s,a){this.context.drawImage(e,n,r,t,i,s,a,t,i)}}_defineProperty(Ly,"MAX_DIMENSION",ky),Lg.register("SpriteSheet",Ly);class Iy{constructor(e,t,i,n,r){this.spriteSheet=e,this.bin=t,this.uvBounds=i,this.image=n,this.count=r}}Ly.Sprite=Iy;class By{constructor(e,t,i,n){const r=Vo()({attributes:[],uniforms:[]},n);this.vertexSource=t,this.fragmentSource=i,this.attributeNames=r.attributes,this.uniformNames=r.uniforms,this.initialize(e)}initialize(e){this.gl=e,this.used=!1,this.program=this.gl.createProgram(),this.vertexShader=_f.createShader(this.gl,this.vertexSource,this.gl.VERTEX_SHADER),this.fragmentShader=_f.createShader(this.gl,this.fragmentSource,this.gl.FRAGMENT_SHADER),this.gl.attachShader(this.program,this.vertexShader),this.gl.attachShader(this.program,this.fragmentShader),this.gl.linkProgram(this.program),this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS)||(console.log("GLSL link error:"),console.log(this.gl.getProgramInfoLog(this.program)),console.log("for vertex shader"),console.log(this.vertexSource),console.log("for fragment shader"),console.log(this.fragmentSource)),this.gl.deleteShader(this.vertexShader),this.gl.deleteShader(this.fragmentShader),this.uniformLocations={},this.attributeLocations={},this.activeAttributes={},_.each(this.attributeNames,e=>{this.attributeLocations[e]=this.gl.getAttribLocation(this.program,e),this.activeAttributes[e]=!0}),_.each(this.uniformNames,e=>{this.uniformLocations[e]=this.gl.getUniformLocation(this.program,e)}),this.isInitialized=!0}use(){this.used||(this.used=!0,this.gl.useProgram(this.program),_.each(this.attributeNames,e=>{this.activeAttributes[e]&&this.enableVertexAttribArray(e)}))}activateAttribute(e){this.activeAttributes[e]||(this.activeAttributes[e]=!0,this.used&&this.enableVertexAttribArray(e))}enableVertexAttribArray(e){this.gl.enableVertexAttribArray(this.attributeLocations[e])}unuse(){this.used&&(this.used=!1,_.each(this.attributeNames,e=>{this.activeAttributes[e]&&this.disableVertexAttribArray(e)}))}disableVertexAttribArray(e){this.gl.disableVertexAttribArray(this.attributeLocations[e])}deactivateAttribute(e){this.activeAttributes[e]&&(this.activeAttributes[e]=!1,this.used&&this.disableVertexAttribArray(e))}dispose(){this.gl.deleteProgram(this.program)}}Lg.register("ShaderProgram",By);class Dy extends ty{constructor(e,t){super(e,Vo()({valueType:Hg,phetioValueType:Hg.ColorIO},t))}}Lg.register("ColorProperty",Dy);let Oy,qy;const Yy={};let Hy=!1;const Gy={approximateSVGBounds(e,t){if(!Oy.parentNode){if(!document.body)throw new Error("No document.body and trying to get approximate SVG bounds of a Text node");document.body.appendChild(Oy)}Gy.setSVGTextAttributes(qy,e,t);const i=qy.getBBox();return 0===i.width&&0===i.height&&t.length>0?(Hy||(Hy=!0,console.log("WARNING: Guessing text bounds, is the simulation hidden? See https://github.com/phetsims/chipper/issues/768")),Gy.guessSVGBounds(e,t)):new Zl(i.x,i.y,i.x+i.width,i.y+i.height)},guessSVGBounds(e,t){const i=e.getNumericSize(),n="bold"===e.weight;return new Zl(0,-.9*i,(n?.435:.4)*i*t.length,.22*i)},accurateCanvasBounds(e){const t=Lg.scratchContext;t.font=e._font.toCSS(),t.direction="ltr";const i=t.measureText(e.renderedText);return new Zl(-i.actualBoundingBoxLeft,-i.actualBoundingBoxAscent,i.actualBoundingBoxRight,i.actualBoundingBoxDescent)},accurateCanvasBoundsFallback(e){const t=Gy.approximateSVGBounds(e._font,e.renderedText);if(!e.renderedText.length||0===t.width)return t;const i=_f.canvasAccurateBounds(t=>{if(t.font=e._font.toCSS(),t.direction="ltr",t.fillText(e.renderedText,0,0),e.hasPaintableStroke()){const i=new ey(null,t);e.beforeCanvasStroke(i),t.strokeText(e.renderedText,0,0),e.afterCanvasStroke(i)}},{precision:.5,resolution:128,initialScale:32/Math.max(Math.abs(t.minX),Math.abs(t.minY),Math.abs(t.maxX),Math.abs(t.maxY))});return i.isFinite()?i:t},getVerticalBounds(e){const t=e.toCSS();let i=Yy[t];return i||(i=Yy[t]=Gy.approximateSVGBounds(e,"m")),i},approximateCanvasWidth(e,t){const i=Lg.scratchContext;return i.font=e.toCSS(),i.direction="ltr",i.measureText(t).width},approximateHybridBounds(e,t){const i=Gy.getVerticalBounds(e),n=Gy.approximateCanvasWidth(e,t);return new Zl(0,i.minY,n,i.maxY)},approximateDOMBounds(e,t){const i=document.createElement("div");$(i).css({position:"absolute",left:0,top:0,padding:"0 !important",margin:"0 !important",display:"hidden"});const n=document.createElement("span");$(n).css("font",e.toCSS()),n.appendChild(t),n.setAttribute("direction","ltr");const r=document.createElement("div");$(r).css({"vertical-align":"baseline",display:"inline-block",width:0,height:"1024px",margin:"0 !important",padding:"0 !important"}),i.appendChild(n),i.appendChild(r),document.body.appendChild(i);const s=n.getBoundingClientRect(),a=i.getBoundingClientRect(),o=new Zl(s.left,s.top-1024,s.right+1,s.bottom-1024).shiftedXY(-a.left,-a.top);return document.body.removeChild(i),o},approximateImprovedDOMBounds(e,t){const i=document.createElement("div");i.style.display="inline-block",i.style.font=e.toCSS(),i.style.color="transparent",i.style.padding="0 !important",i.style.margin="0 !important",i.style.position="absolute",i.style.left="0",i.style.top="0",i.setAttribute("direction","ltr"),i.appendChild(t),document.body.appendChild(i);const n=new Zl(i.offsetLeft,i.offsetTop,i.offsetLeft+i.offsetWidth+1,i.offsetTop+i.offsetHeight+1);document.body.removeChild(i);const r=Gy.getVerticalBounds(e);return n.shiftedY(r.minY)},setSVGTextAttributes(e,t,i){e.setAttribute("direction","ltr"),e.setAttribute("font-family",t.getFamily()),e.setAttribute("font-size",t.getSize()),e.setAttribute("font-style",t.getStyle()),e.setAttribute("font-weight",t.getWeight()),e.setAttribute("font-stretch",t.getStretch()),e.lastChild.nodeValue=i},initializeTextBounds(){Oy=document.getElementById("sceneryTextSizeContainer"),Oy||(Oy=document.createElementNS(lf,"svg"),Oy.setAttribute("width","2"),Oy.setAttribute("height","2"),Oy.setAttribute("id","sceneryTextSizeContainer"),Oy.setAttribute("style","visibility: hidden; pointer-events: none; position: absolute; left: -65535px; right: -65535px;")),qy=document.getElementById("sceneryTextSizeElement"),qy||(qy=document.createElementNS(lf,"text"),qy.appendChild(document.createTextNode("")),qy.setAttribute("dominant-baseline","alphabetic"),qy.setAttribute("text-rendering","geometricPrecision"),qy.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),qy.setAttribute("id","sceneryTextSizeElement"),Oy.appendChild(qy))}};Lg.register("TextBounds",Gy);const Fy=Gy;class zy{constructor(e,t,i){this.pdomInstance=e,this.trail=t,this.isRoot=i,this.fullTrail=this.pdomInstance.trail.copy();for(let n=this.isRoot?0:1;n<this.trail.length;n++)this.fullTrail.addDescendant(this.trail.nodes[n])}}Lg.register("PartialPDOMTrail",zy);const Uy=zy;Jf.addRule(".a11y-pdom-element{position: fixed;pointer-events: none;top: 0px;left: 0px;transform-origin: left top 0px;border-width: 0px;border: 0px;padding: 1px 1px;margin: 0px;white-space: nowrap;outline: none;box-shadow:none;border-color:transparent;font-size: 1px;clip: rect(1px, 1px, 1px, 1px);}"),Jf.addRule(".a11y-pdom-root{position: absolute;z-index: 1;opacity: 0.0001;}"),Jf.addRule(".a11y-pdom-list-item{list-style: none;");const Wy={SIBLING_CLASS_NAME:"a11y-pdom-element",ROOT_CLASS_NAME:"a11y-pdom-root",LIST_ITEM_CLASS_NAME:"a11y-pdom-list-item"};Lg.register("PDOMSiblingStyle",Wy);const Xy=Wy;function jy(e){return e.replace(/\u202a|\u202b|\u202c/g,"")}wo.register("stripEmbeddingMarks",jy);const Qy=jy,Ky=["A","AREA","INPUT","SELECT","TEXTAREA","BUTTON","IFRAME"],Zy=["B","STRONG","I","EM","MARK","SMALL","DEL","INS","SUB","SUP","BR"],Jy=["INPUT"];function $y(e){const t=e.getElementsByTagName("*"),i=[];for(let n=0;n<t.length;n++)t[n].nodeType===Node.ELEMENT_NODE&&(i[n]=t[n]);return i}function eE(e,t){const i=$y(t||document.body),n=document.activeElement,r="NEXT"===e?1:-1;let s=i.indexOf(n)+r;for(;s<i.length&&s>=0;){const e=i[s];if(s+=r,iE.isElementFocusable(e))return e}return n}function tE(e){return!_.includes(Jy,e.toUpperCase())}const iE={unwrapStringProperty(e){const t=null===e?null:"string"==typeof e?e:e.value;return t},getNextFocusable:e=>eE("NEXT",e),getPreviousFocusable:e=>eE("PREVIOUS",e),getFirstFocusable(e){const t=$y(e||document.body);let i=document.body,n=0;for(;n<t.length;){const e=t[n];if(n++,iE.isElementFocusable(e)){i=e;break}}return i},getRandomFocusable(e){const t=$y(document.body),i=[];for(let n=0;n<t.length;n++)iE.isElementFocusable(t[n])&&i.push(t[n]);return i[e.nextInt(i.length)]},containsFormattingTags(e){if(null===e)return!1;let t=0;const i=[],n=[];for(;t<e.length;){const r=e.indexOf("<",t),s=e.indexOf(">",t);r>-1&&(i.push(r),t=r+1),s>-1?(n.push(s),t=s+1):t++}if(i.length!==n.length||0===i.length)return!1;let r=!0;const s=e.toUpperCase();for(let a=0;a<i.length;a++){let e=s.substring(i[a]+1,n[a]);e=e.replace("/","");const t=e.replace(/^\s+/,"");e.length-t.length>0||(_.includes(Zy,e)||(r=!1))}return r},setTextContent(e,t){if(null===t)e.innerHTML="";else{const i=t.replaceAll("<br>","<br/>"),n=Qy(i);Fo(n,Ho.STRING_WITHOUT_TEMPLATE_VARS_VALIDATOR),tE(e.tagName)&&(iE.containsFormattingTags(n)?e.innerHTML=n:e.textContent=n)}},tagIsDefaultFocusable:e=>_.includes(Ky,e.toUpperCase()),isElementFocusable:e=>!!document.body.contains(e)&&(!function e(t){return!!t.hidden||t!==document.body&&e(t.parentElement)}(e)&&(!_.includes(Zy,e.tagName)&&"true"===e.getAttribute("data-focusable"))),tagNameSupportsContent:e=>tE(e),removeElements(e,t){for(let i=0;i<t.length;i++){const n=t[i];e.removeChild(n)}},insertElements(e,t,i){for(let n=0;n<t.length;n++){const r=t[n];e.insertBefore(r,i||null)}},createElement(e,t,i){const n=(i=Po({namespace:null,id:null},i)).namespace?document.createElementNS(i.namespace,e):document.createElement(e);return i.id&&(n.id=i.id),iE.overrideFocusWithTabIndex(n,t),n.classList.add(Xy.SIBLING_CLASS_NAME),n},overrideFocusWithTabIndex(e,t){iE.tagIsDefaultFocusable(e.tagName)!==t?e.tabIndex=t?0:-1:e.removeAttribute("tabindex"),e.setAttribute("data-focusable",t)},TAGS:{INPUT:"INPUT",LABEL:"LABEL",BUTTON:"BUTTON",TEXTAREA:"TEXTAREA",SELECT:"SELECT",OPTGROUP:"OPTGROUP",DATALIST:"DATALIST",OUTPUT:"OUTPUT",DIV:"DIV",A:"A",P:"P",B:"B",STRONG:"STRONG",I:"I",EM:"EM",MARK:"MARK",SMALL:"SMALL",DEL:"DEL",INS:"INS",SUB:"SUB",SUP:"SUP"},FORM_ELEMENTS:["INPUT","BUTTON","TEXTAREA","SELECT","OPTGROUP","DATALIST","OUTPUT","A"],DEFAULT_CONTAINER_TAG_NAME:"DIV",DEFAULT_DESCRIPTION_TAG_NAME:"P",DEFAULT_LABEL_TAG_NAME:"P",ASSOCIATION_ATTRIBUTES:["aria-labelledby","aria-describedby","aria-activedescendant"],INPUT_TYPES_THAT_SUPPORT_CHECKED:["RADIO","CHECKBOX"],DOM_EVENTS:["focusin","focusout","input","change","click","keydown","keyup"],USER_GESTURE_EVENTS:["input","change","click","keydown","keyup"],BLOCKED_DOM_EVENTS:["touchstart","touchend","touchmove","touchcancel","mousedown","mouseup","mousemove","mouseover","mouseout","pointerdown","pointerup","pointermove","pointerover","pointerout","pointercancel","gotpointercapture","lostpointercapture"],DATA_PDOM_UNIQUE_ID:"data-unique-id",PDOM_UNIQUE_ID_SEPARATOR:"-",DATA_EXCLUDE_FROM_INPUT:"data-exclude-from-input"};Lg.register("PDOMUtils",iE);const nE=iE;class rE extends ty{constructor(e,t){super(e,Vo()({valueType:"string",phetioValueType:Om},t))}}ko.register("StringProperty",rE);const sE=_.hasIn(window,"phet.chipper.queryParameters.colorProfile")?phet.chipper.queryParameters.colorProfile:Bg.DEFAULT_COLOR_PROFILE,aE=_.hasIn(window,"phet.chipper.colorProfiles")?phet.chipper.colorProfiles:[Bg.DEFAULT_COLOR_PROFILE],oE=new rE(sE,{tandem:Lm.GENERAL_VIEW.createTandem("colorProfileProperty"),phetioFeatured:!0,validValues:aE});Lg.register("colorProfileProperty",oE);const lE=oE,hE=[];class uE extends Dy{constructor(e,t,i,n){const r=Vo()({valueComparisonStrategy:"equalsFunction"},n);r.tandem;i=_.mapValues(i,e=>Hg.toColor(e).setImmutable()),super(Hg.toColor(i[lE.value]||i[Bg.DEFAULT_COLOR_PROFILE]),r),this.colorProfileMap=i,lE.link(e=>{this.value=Hg.toColor(this.colorProfileMap[e]||this.colorProfileMap[Bg.DEFAULT_COLOR_PROFILE])}),this.name=`${e.name}.${t}`,this.link(e=>{window.parent!==window&&window.parent.postMessage(JSON.stringify({type:"reportColor",name:this.name,value:e.toHexString(),alpha:e.getAlpha()}),"*")}),hE.push(this)}dispose(){rm(hE,this),super.dispose()}}ne=uE,_defineProperty(uE,"TANDEM_NAME_SUFFIX","ColorProperty"),_defineProperty(uE,"TANDEM_NAME_SUFFIXES",[ne.TANDEM_NAME_SUFFIX,"FillProperty","StrokeProperty"]),window.addEventListener("message",e=>{let t;try{t=JSON.parse(e.data)}catch(i){}if(t&&"setColor"===t.type)for(let n=0;n<hE.length;n++){const e=hE[n];e.name===t.name&&(e.colorProfileMap[lE.value]=new Hg(t.value).withAlpha(t.alpha),e.value=Hg.toColor(e.colorProfileMap[lE.value]))}}),Lg.register("ProfileColorProperty",uE);let cE=1;class dE{constructor(){this.id="paint"+cE++,this.transformMatrix=null}setTransformMatrix(e){return this.transformMatrix!==e&&(this.transformMatrix=e),this}toString(){return this.id}}dE.prototype.isPaint=!0,Lg.register("Paint",dE);class pE extends dE{constructor(){super(),this.stops=[],this.lastStopRatio=0,this.canvasGradient=null,this.colorStopsDirty=!1,this.lastColorStopValues=[]}addColorStop(e,t){if(this.lastStopRatio>e)throw new Error("Color stops not specified in the order of increasing ratios");return this.lastStopRatio=e,this.stops.push({ratio:e,color:t}),this.lastColorStopValues.push(""),this}getSVGStops(){return this.stops}invalidateCanvasGradient(){this.colorStopsDirty=!0}haveCanvasColorStopsChanged(){if(null===this.lastColorStopValues)return!0;for(let e=0;e<this.stops.length;e++)if(pE.colorToString(this.stops[e].color)!==this.lastColorStopValues[e])return!0;return!1}getCanvasStyle(){if(!this.canvasGradient||this.colorStopsDirty&&this.haveCanvasColorStopsChanged()){this.colorStopsDirty=!1,Yp(this.lastColorStopValues),this.canvasGradient=this.createCanvasGradient();for(let e=0;e<this.stops.length;e++){const t=this.stops[e],i=pE.colorToString(t.color);this.canvasGradient.addColorStop(t.ratio,i),this.lastColorStopValues.push(i)}}return this.canvasGradient}static colorToString(e){return e instanceof _g&&(e=e.value),null===e&&(e="transparent"),e instanceof Hg&&(e=e.toCSS()),e}}pE.prototype.isGradient=!0,Lg.register("Gradient",pE);class mE extends pE{constructor(e,t,i,n){super(),this.start=new al(e,t),this.end=new al(i,n)}createCanvasGradient(){return Lg.scratchContext.createLinearGradient(this.start.x,this.start.y,this.end.x,this.end.y)}createSVGPaint(e){return UA.pool.create(e,this)}toString(){let e=`new phet.scenery.LinearGradient( ${this.start.x}, ${this.start.y}, ${this.end.x}, ${this.end.y} )`;return _.each(this.stops,t=>{e+=`.addColorStop( ${t.ratio}, ${VE.scenerySerialize(t.color)} )`}),e}}mE.prototype.isLinearGradient=!0,Lg.register("LinearGradient",mE);class gE extends pE{constructor(e,t,i,n,r,s){if(super(),this.start=new al(e,t),this.end=new al(n,r),ff.safari){const i=(e+n)/2,s=(t+r)/2;this.start.x=i,this.start.y=s,this.end.x=i,this.end.y=s}this.startRadius=i,this.endRadius=s,this.focalPoint=this.start.plus(this.end.minus(this.start).times(this.startRadius/(this.startRadius-this.endRadius))),this.startIsLarger=this.startRadius>this.endRadius,this.largePoint=this.startIsLarger?this.start:this.end,this.maxRadius=Math.max(this.startRadius,this.endRadius),this.minRadius=Math.min(this.startRadius,this.endRadius),this.startRadius,this.endRadius}createCanvasGradient(){return Lg.scratchContext.createRadialGradient(this.start.x,this.start.y,this.startRadius,this.end.x,this.end.y,this.endRadius)}createSVGPaint(e){return WA.pool.create(e,this)}getSVGStops(){const e=this.startIsLarger,t=this.maxRadius,i=this.minRadius;const n=this.stops.map((function(n){let r=e?1-n.ratio:n.ratio;return i>0&&(r=function(e,t,i,n,r){return i+(r-e)*(n-i)/(t-e)}(0,1,i/t,1,r)),{ratio:r,color:n.color}}));return e&&n.reverse(),n}toString(){let e=`new phet.scenery.RadialGradient( ${this.start.x}, ${this.start.y}, ${this.startRadius}, ${this.end.x}, ${this.end.y}, ${this.endRadius} )`;return _.each(this.stops,t=>{e+=`.addColorStop( ${t.ratio}, ${VE.scenerySerialize(t.color)} )`}),e}}gE.prototype.isRadialGradient=!0,Lg.register("RadialGradient",gE);class fE extends dE{constructor(e){super(),this.image=e,this.canvasPattern=Lg.scratchContext.createPattern(e,"repeat")}getCanvasStyle(){return this.canvasPattern}createSVGPaint(e){return XA.pool.create(this)}toString(){return`new phet.scenery.Pattern( $( '<img src="${this.image.src}"/>' )[0] )`}}fE.prototype.isPattern=!0,Lg.register("Pattern",fE);class yE extends fE{constructor(e,t,i,n,r,s){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Mh.IDENTITY;const o=document.createElement("img");new cv({scale:t,children:[e]}).toCanvas((function(e,t,i,n,r){o.src=e.toDataURL()}),-i*t,-n*t,r*t,s*t),super(o),this.setTransformMatrix(a.timesMatrix(Mh.scaling(1/t)))}}Lg.register("NodePattern",yE);let EE=1;class vE{constructor(){this.id="filter"+EE++,this.filterRegionPercentageIncrease=0}isDOMCompatible(){return!1}isSVGCompatible(){return!1}isCanvasCompatible(){return!!Zg.canvasFilter&&this.isDOMCompatible()}isWebGLCompatible(){return!1}toString(){return this.id}static applyColorMatrix(e,t,i,n){const r=document.createElementNS(lf,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values",e),r.setAttribute("in",i),r.setAttribute("color-interpolation-filters","sRGB"),n&&r.setAttribute("result",n),t.appendChild(r)}}Lg.register("Filter",vE);const AE=new yh,bE=e=>{const t=e.map(e=>e.typeName),i=t.join(",");if(!AE.has(i)){const n=t=>{for(let i=0;i<e.length;i++){const n=e[i];if(Ho.isValueValid(t,n.validator))return!0}return!1};AE.set(i,new el(`OrIO<${t.join(", ")}>`,{documentation:"An IOType adding support for a composite type that can be any of its parameters.",parameterTypes:e,isValidValue:n,toStateObject:t=>{for(let i=0;i<e.length;i++){const n=e[i];if(Ho.isValueValid(t,n.validator))return{index:i,state:n.toStateObject(t)}}throw new Error("somehow the instance was not valid, we should not get here. Why was isValidValue not used before this step?")},fromStateObject:t=>e[t.index].fromStateObject(t.state),stateSchema:Zo.asValue(""+t.join("|"),{isValidValue:t=>"number"==typeof t.index&&e[t.index].isStateObjectValid(t.state)})}))}return AE.get(i)};zo.register("OrIO",bE);const SE=bE;class _E extends Error{constructor(){super("CouldNotYetDeserializeError")}}zo.register("CouldNotYetDeserializeError",_E);const xE=_E,wE=new yh,TE=e=>{const t=e;return wE.has(t)||wE.set(t,new el(`ReferenceIO<${e.typeName}>`,{isValidValue:t=>Ho.isValueValid(t,e.validator),documentation:"Uses reference identity for serializing and deserializing, and validates based on its parameter IO Type.",parameterTypes:[e],toStateObject:e=>({phetioID:e.tandem.phetioID}),stateSchema:{phetioID:Om},fromStateObject(e){if(phet.phetio.phetioEngine.hasPhetioObject(e.phetioID))return phet.phetio.phetioEngine.getPhetioElement(e.phetioID);throw new xE},applyState(e){}})),wE.get(t)};zo.register("ReferenceIO",TE);const PE=TE,CE={isColorDef:e=>null===e||"string"==typeof e||e instanceof Hg||e instanceof _g&&(null===e.value||"string"==typeof e.value||e.value instanceof Hg),scenerySerialize:e=>null===e?"null":e instanceof Hg?`'${e.toCSS()}'`:"string"==typeof e?`'${e}'`:CE.scenerySerialize(e.value),ColorDefIO:null};CE.ColorDefIO=new el("ColorDefIO",{isValidValue:CE.isColorDef,supertype:ng(SE([Om,Hg.ColorIO,PE(ty.PropertyIO(ng(SE([Om,Hg.ColorIO]))))]))}),Lg.register("ColorDef",CE);const VE=CE,RE={isPaintDef:e=>null===e||"string"==typeof e||e instanceof Hg||e instanceof dE||e instanceof _g&&(null===e.value||"string"==typeof e.value||e.value instanceof Hg),toColor(e){if("string"==typeof e)return new Hg(e);if(e instanceof Hg)return e.copy();if(e instanceof _g)return RE.toColor(e.value);if(e instanceof pE){let t=Hg.TRANSPARENT;const i=0;return e.stops.forEach(e=>{t=t.blend(RE.toColor(e.color),1/(i+1))}),t}return Hg.TRANSPARENT}};Lg.register("PaintDef",RE);const NE=RE,ME=_f.supportsImageDataCanvasFilter(),kE=ff.chromium;class LE extends vE{constructor(e,t,i,n,r,s,a,o,l,h,u,c,d,p,m,g,f,y,E,v){super(),this.m00=e,this.m01=t,this.m02=i,this.m03=n,this.m04=r,this.m10=s,this.m11=a,this.m12=o,this.m13=l,this.m14=h,this.m20=u,this.m21=c,this.m22=d,this.m23=p,this.m24=m,this.m30=g,this.m31=f,this.m32=y,this.m33=E,this.m34=v}applySVGFilter(e,t,i){vE.applyColorMatrix(`${Rh(this.m00)} ${Rh(this.m01)} ${Rh(this.m02)} ${Rh(this.m03)} ${Rh(this.m04)} ${Rh(this.m10)} ${Rh(this.m11)} ${Rh(this.m12)} ${Rh(this.m13)} ${Rh(this.m14)} ${Rh(this.m20)} ${Rh(this.m21)} ${Rh(this.m22)} ${Rh(this.m23)} ${Rh(this.m24)} ${Rh(this.m30)} ${Rh(this.m31)} ${Rh(this.m32)} ${Rh(this.m33)} ${Rh(this.m34)}`,e,t,i)}applyCanvasFilter(e){const t=e.canvas.width,i=e.canvas.height,n=e.context.getImageData(0,0,t,i),r=t*i;for(let s=0;s<r;s++){const e=4*s;if(kE){const t=1.45,i=Math.pow(n.data[e+0]/255,t),r=Math.pow(n.data[e+1]/255,t),s=Math.pow(n.data[e+2]/255,t),a=Math.pow(n.data[e+3]/255,t);n.data[e+0]=255*Math.pow(i*this.m00+r*this.m01+s*this.m02+a*this.m03+this.m04,1/t),n.data[e+1]=255*Math.pow(i*this.m10+r*this.m11+s*this.m12+a*this.m13+this.m14,1/t),n.data[e+2]=255*Math.pow(i*this.m20+r*this.m21+s*this.m22+a*this.m23+this.m24,1/t),n.data[e+3]=255*Math.pow(i*this.m30+r*this.m31+s*this.m32+a*this.m33+this.m34,1/t)}else{const t=n.data[e+0],i=n.data[e+1],r=n.data[e+2],s=n.data[e+3];n.data[e+0]=t*this.m00+i*this.m01+r*this.m02+s*this.m03+this.m04,n.data[e+1]=t*this.m10+i*this.m11+r*this.m12+s*this.m13+this.m14,n.data[e+2]=t*this.m20+i*this.m21+r*this.m22+s*this.m23+this.m24,n.data[e+3]=t*this.m30+i*this.m31+r*this.m32+s*this.m33+this.m34}}e.context.putImageData(n,0,0)}isSVGCompatible(){return!0}isCanvasCompatible(){return super.isCanvasCompatible()||ME}getCSSFilterString(){throw new Error("unimplemented")}}Lg.register("ColorMatrixFilter",LE);class IE extends LE{constructor(e){super(e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0),this.amount=e}getCSSFilterString(){return`brightness(${Rh(this.amount)})`}isDOMCompatible(){return!0}}_defineProperty(IE,"BLACKEN",new IE(0)),Lg.register("Brightness",IE);class BE extends LE{constructor(e){super(e,0,0,0,-.5*e+.5,0,e,0,0,-.5*e+.5,0,0,e,0,-.5*e+.5,0,0,0,1,0),this.amount=e}getCSSFilterString(){return`contrast(${Rh(this.amount)})`}isDOMCompatible(){return!0}}_defineProperty(BE,"GRAY",new BE(0)),Lg.register("Contrast",BE);Lg.register("DropShadow",class extends vE{constructor(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:15;super(),this.offset=e,this.blurRadius=t,this.color=i,this.colorCSS=NE.toColor(i).toCSS(),this.filterRegionPercentageIncrease=n}getCSSFilterString(){return`drop-shadow(${Rh(this.offset.x)}px ${Rh(this.offset.y)}px ${Rh(this.blurRadius)}px ${this.colorCSS})`}isDOMCompatible(){return!0}applyCanvasFilter(){throw new Error("unimplemented")}applySVGFilter(e,t,i){throw new Error("unimplemented")}});Lg.register("GaussianBlur",class extends vE{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15;super(),this.standardDeviation=e,this.filterRegionPercentageIncrease=t}getCSSFilterString(){return`blur(${Rh(this.standardDeviation)}px)`}applySVGFilter(e,t,i){const n=document.createElementNS(lf,"feGaussianBlur");n.setAttribute("stdDeviation",Rh(this.standardDeviation)),n.setAttribute("edgeMode","none"),e.appendChild(n),n.setAttribute("in",t),i&&n.setAttribute("result",i),e.appendChild(n)}isDOMCompatible(){return!0}isSVGCompatible(){return!0}applyCanvasFilter(e){throw new Error("unimplemented")}});class DE extends LE{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=1-e;super(.2126+.7874*t,.7152-.7152*t,.0722-.0722*t,0,0,.2126-.2126*t,.7152+.2848*t,.0722-.0722*t,0,0,.2126-.2126*t,.7152-.7152*t,.0722+.9278*t,0,0,0,0,0,1,0),this.amount=e}getCSSFilterString(){return`grayscale(${Rh(this.amount)})`}isDOMCompatible(){return!0}}_defineProperty(DE,"FULL",new DE(1)),Lg.register("Grayscale",DE);Lg.register("HueRotate",class extends LE{constructor(e){const t=Math.cos(e),i=Math.sin(e);super(.213+.787*t-.213*i,.715-.715*t-.715*i,.072-.072*t+.928*i,0,0,.213-.213*t+.143*i,.715+.285*t+.14*i,.072-.072*t-.283*i,0,0,.213-.213*t-.787*i,.715-.715*t+.715*i,.072+.928*t+.072*i,0,0,0,0,0,1,0),this.amount=e}getCSSFilterString(){return`hue-rotate(${Rh(fl.toDegrees(this.amount))}deg)`}isDOMCompatible(){return!0}});class OE extends vE{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;super(),this.amount=e}getCSSFilterString(){return`invert(${Rh(this.amount)})`}isDOMCompatible(){return!0}applyCanvasFilter(e){throw new Error("unimplemented")}applySVGFilter(e,t,i){throw new Error("unimplemented")}}_defineProperty(OE,"FULL",new OE(1)),Lg.register("Invert",OE);Lg.register("Opacity",class extends vE{constructor(e){super(),this.amount=e}getCSSFilterString(){return`opacity(${Rh(this.amount)})`}isDOMCompatible(){return!0}applyCanvasFilter(e){throw new Error("unimplemented")}applySVGFilter(e,t,i){throw new Error("unimplemented")}});Lg.register("Saturate",class extends LE{constructor(e){super(.213+.787*e,.715-.715*e,.072-.072*e,0,0,.213-.213*e,.715-.285*e,.072-.072*e,0,0,.213-.213*e,.715-.715*e,.072-.928*e,0,0,0,0,0,1,0),this.amount=e}getCSSFilterString(){return`saturate(${Rh(this.amount)})`}isDOMCompatible(){return!0}});class qE extends LE{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;super(.393+.607*(1-e),.769-.769*(1-e),.189-.189*(1-e),0,0,.349-.349*(1-e),.686+.314*(1-e),.168-.168*(1-e),0,0,.272-.272*(1-e),.534-.534*(1-e),.131+.869*(1-e),0,0,0,0,0,1,0),this.amount=e}getCSSFilterString(){return`sepia(${Rh(this.amount)})`}isDOMCompatible(){return!0}}function YE(e,t,i,n,r){i=i||[],n=n||[],r=r||[],Array.prototype.push.apply(i,e),Array.prototype.push.apply(n,t);e:for(let s=0;s<i.length;s++){const e=i[s];for(let t=0;t<n.length;t++){if(e===n[t]){if(r.push(e),i.splice(s,1),n.splice(t,1),t=0,s===i.length)break e;s-=1}}}return i}_defineProperty(qE,"FULL",new qE(1)),Lg.register("Sepia",qE),wo.register("arrayDifference",YE);const HE=YE;class GE extends mg{constructor(e,t,i){super(e,i),t&&(this.targetPropertyInstrumented=t)}setValueOrTargetProperty(e,t,i){if(xg(i))this.setTargetProperty(e,t,i);else{const e=this.get();this.clearTargetProperty(),this.setPropertyValue(i),this.areValuesEqual(e,i)||this.notifyListeners(e)}}setTargetProperty(e,t,i){if(this.targetProperty===i)return e;this.targetProperty&&this.targetProperty instanceof _g&&this.targetProperty.isPhetioInstrumented();const n=this.targetProperty;this.ownedPhetioProperty&&i!==this.ownedPhetioProperty&&this.disposeOwnedPhetioProperty(),e&&null!==t&&e.updateLinkedElementForProperty(t,n,i);const r=this.get();return this.clearTargetProperty(),this.targetProperty=i,this.targetProperty?(this.targetProperty.lazyLink(this.forwardingListener),this.setPropertyValue(this.targetProperty.value)):this.setPropertyValue(r),this.areValuesEqual(r,this.get())||this.notifyListeners(r),e}clearTargetProperty(){this.forwardingListener=this.forwardingListener||this.onTargetPropertyChange.bind(this),this.targetProperty&&this.targetProperty.unlink(this.forwardingListener),this.targetProperty=null}onTargetPropertyChange(e){super.set(e)}set(e){return this.targetProperty?this.targetProperty.set(e):super.set(e),this}setTargetPropertyInstrumented(e,t){return this.targetPropertyInstrumented=e,t}getTargetPropertyInstrumented(){return this.targetPropertyInstrumented||!1}initializePhetio(e,t,i){!this.targetProperty&&this.targetPropertyInstrumented?(this.ownedPhetioProperty=i(),this.setTargetProperty(e,t,this.ownedPhetioProperty)):this.targetProperty&&this.targetProperty instanceof _g&&this.targetProperty.isPhetioInstrumented()&&e.updateLinkedElementForProperty(t,null,this.targetProperty)}getTargetProperty(){return this.targetProperty||null}disposeOwnedPhetioProperty(){this.ownedPhetioProperty&&(this.ownedPhetioProperty.dispose(),delete this.ownedPhetioProperty)}dispose(){this.clearTargetProperty(),this.disposeOwnedPhetioProperty(),super.dispose()}}ko.register("TinyForwardingProperty",GE);const FE=new mg(!1);zo.register("isSettingPhetioStateProperty",FE);const zE=FE,UE=(nE.TAGS.INPUT,nE.TAGS.P),WE=UE,XE=UE,jE=(e,t,i)=>(t.labelTagName="h"+e.headingLevel,t.labelContent=i,t),QE=e=>{const t=null===e?null:"string"==typeof e?e:e.value;return t},KE=(nE.FORM_ELEMENTS,nE.INPUT_TYPES_THAT_SUPPORT_CHECKED,nE.ASSOCIATION_ATTRIBUTES,["focusable","tagName","accessibleName","accessibleNameBehavior","helpText","helpTextBehavior","pdomHeading","pdomHeadingBehavior","containerTagName","containerAriaRole","innerContent","inputType","inputValue","pdomChecked","pdomNamespace","ariaLabel","ariaRole","ariaValueText","labelTagName","labelContent","appendLabel","descriptionTagName","descriptionContent","appendDescription","focusHighlight","focusHighlightLayerable","groupFocusHighlight","pdomVisible","pdomOrder","ariaLabelledbyAssociations","ariaDescribedbyAssociations","activeDescendantAssociations","focusPanTargetBoundsProperty","limitPanDirection","positionInPDOM","pdomTransformSourceNode"]);class ZE extends Km{constructor(e){super(e),this._tagName=null,this._containerTagName=null,this._labelTagName=null,this._descriptionTagName=null,this._inputType=null,this._inputValue=null,this._pdomChecked=!1,this._appendLabel=!1,this._appendDescription=!1,this._pdomAttributes=[],this._pdomClasses=[],this._labelContent=null,this._innerContentProperty=new GE(null,!1),this._innerContentProperty.lazyLink(this.onInnerContentPropertyChange.bind(this)),this._descriptionContent=null,this._pdomNamespace=null,this._ariaLabel=null,this._ariaRole=null,this._containerAriaRole=null,this._ariaValueText=null,this._ariaLabelledbyAssociations=[],this._nodesThatAreAriaLabelledbyThisNode=[],this._ariaDescribedbyAssociations=[],this._nodesThatAreAriaDescribedbyThisNode=[],this._activeDescendantAssociations=[],this._nodesThatAreActiveDescendantToThisNode=[],this._focusableOverride=null,this._focusHighlight=null,this._focusHighlightLayerable=!1,this._groupFocusHighlight=!1,this._pdomVisible=!0,this._pdomOrder=null,this._pdomParent=null,this._pdomTransformSourceNode=null,this._focusPanTargetBoundsProperty=null,this._limitPanDirection=null,this._pdomDisplaysInfo=new vv(this),this._pdomInstances=[],this._positionInPDOM=!1,this.excludeLabelSiblingFromInput=!1,this._accessibleName=null,this._accessibleNameBehavior=ZE.BASIC_ACCESSIBLE_NAME_BEHAVIOR,this._helpText=null,this._helpTextBehavior=ZE.HELP_TEXT_AFTER_CONTENT,this._pdomHeading=null,this._headingLevel=null,this._pdomHeadingBehavior=jE,this.focusHighlightChangedEmitter=new np,this.pdomDisplaysEmitter=new np,this.pdomBoundInputEnabledListener=this.pdomInputEnabledListener.bind(this)}disposeParallelDOM(){this.inputEnabledProperty.unlink(this.pdomBoundInputEnabledListener),this.pdomOrder=null,this.setPDOMTransformSourceNode(null),this.setAriaLabelledbyAssociations([]),this.setAriaDescribedbyAssociations([]),this.setActiveDescendantAssociations([]),this._innerContentProperty.dispose()}pdomInputEnabledListener(e){this.setPDOMAttribute("aria-disabled",!e),this.setPDOMAttribute("onclick",e?"":"return false")}isFocused(){for(let e=0;e<this._pdomInstances.length;e++){if(this._pdomInstances[e].peer.isFocused())return!0}return!1}get focused(){return this.isFocused()}focus(){if(this._pdomInstances.length>0){const e=this._pdomInstances[0].peer;e.focus()}}blur(){if(this._pdomInstances.length>0){const e=this._pdomInstances[0].peer;e.blur()}}pdomAudit(){this.hasPDOMContent;for(let e=0;e<this.children.length;e++)this.children[e].pdomAudit()}setAccessibleName(e){const t=QE(e);this._accessibleName!==t&&(this._accessibleName=t,this.onPDOMContentChange())}set accessibleName(e){this.setAccessibleName(e)}get accessibleName(){return this.getAccessibleName()}getAccessibleName(){return this._accessibleName}removeFromPDOM(){this.tagName=null}setAccessibleNameBehavior(e){this._accessibleNameBehavior!==e&&(this._accessibleNameBehavior=e,this.onPDOMContentChange())}set accessibleNameBehavior(e){this.setAccessibleNameBehavior(e)}get accessibleNameBehavior(){return this.getAccessibleNameBehavior()}getAccessibleNameBehavior(){return this._accessibleNameBehavior}setPDOMHeading(e){const t=QE(e);this._pdomHeading!==t&&(this._pdomHeading=t,this.onPDOMContentChange())}set pdomHeading(e){this.setPDOMHeading(e)}get pdomHeading(){return this.getPDOMHeading()}getPDOMHeading(){return this._pdomHeading}setPDOMHeadingBehavior(e){this._pdomHeadingBehavior!==e&&(this._pdomHeadingBehavior=e,this.onPDOMContentChange())}set pdomHeadingBehavior(e){this.setPDOMHeadingBehavior(e)}get pdomHeadingBehavior(){return this.getPDOMHeadingBehavior()}getPDOMHeadingBehavior(){return this._pdomHeadingBehavior}getHeadingLevel(){return this._headingLevel}get headingLevel(){return this.getHeadingLevel()}computeHeadingLevel(){if(!this._pdomParent)return this._pdomHeading?(this._headingLevel=1,1):0;if(this._pdomHeading){const e=this._pdomParent.computeHeadingLevel()+1;return this._headingLevel=e,e}return this._pdomParent.computeHeadingLevel()}setHelpText(e){const t=QE(e);this._helpText!==t&&(this._helpText=t,this.onPDOMContentChange())}set helpText(e){this.setHelpText(e)}get helpText(){return this.getHelpText()}getHelpText(){return this._helpText}setHelpTextBehavior(e){this._helpTextBehavior!==e&&(this._helpTextBehavior=e,this.onPDOMContentChange())}set helpTextBehavior(e){this.setHelpTextBehavior(e)}get helpTextBehavior(){return this.getHelpTextBehavior()}getHelpTextBehavior(){return this._helpTextBehavior}setTagName(e){e!==this._tagName&&(this._tagName=e,this.onPDOMContentChange())}set tagName(e){this.setTagName(e)}get tagName(){return this.getTagName()}getTagName(){return this._tagName}setLabelTagName(e){e!==this._labelTagName&&(this._labelTagName=e,this.onPDOMContentChange())}set labelTagName(e){this.setLabelTagName(e)}get labelTagName(){return this.getLabelTagName()}getLabelTagName(){return this._labelTagName}setDescriptionTagName(e){e!==this._descriptionTagName&&(this._descriptionTagName=e,this.onPDOMContentChange())}set descriptionTagName(e){this.setDescriptionTagName(e)}get descriptionTagName(){return this.getDescriptionTagName()}getDescriptionTagName(){return this._descriptionTagName}setInputType(e){if(e!==this._inputType){this._inputType=e;for(let t=0;t<this._pdomInstances.length;t++){const i=this._pdomInstances[t].peer;null===e?i.removeAttributeFromElement("type"):i.setAttributeToElement("type",e)}}}set inputType(e){this.setInputType(e)}get inputType(){return this.getInputType()}getInputType(){return this._inputType}setAppendLabel(e){this._appendLabel!==e&&(this._appendLabel=e,this.onPDOMContentChange())}set appendLabel(e){this.setAppendLabel(e)}get appendLabel(){return this.getAppendLabel()}getAppendLabel(){return this._appendLabel}setAppendDescription(e){this._appendDescription!==e&&(this._appendDescription=e,this.onPDOMContentChange())}set appendDescription(e){this.setAppendDescription(e)}get appendDescription(){return this.getAppendDescription()}getAppendDescription(){return this._appendDescription}setContainerTagName(e){this._containerTagName!==e&&(this._containerTagName=e,this.onPDOMContentChange())}set containerTagName(e){this.setContainerTagName(e)}get containerTagName(){return this.getContainerTagName()}getContainerTagName(){return this._containerTagName}setLabelContent(e){const t=QE(e);if(this._labelContent!==t){this._labelContent=t,this._labelTagName||this.setLabelTagName(XE);for(let e=0;e<this._pdomInstances.length;e++){this._pdomInstances[e].peer.setLabelSiblingContent(this._labelContent)}}}set labelContent(e){this.setLabelContent(e)}get labelContent(){return this.getLabelContent()}getLabelContent(){return this._labelContent}setInnerContent(e){this._innerContentProperty.setValueOrTargetProperty(this,null,e)}set innerContent(e){this.setInnerContent(e)}get innerContent(){return this.getInnerContent()}getInnerContent(){return this._innerContentProperty.value}onInnerContentPropertyChange(e){for(let t=0;t<this._pdomInstances.length;t++){this._pdomInstances[t].peer.setPrimarySiblingContent(e)}}setDescriptionContent(e){const t=QE(e);if(this._descriptionContent!==t){this._descriptionContent=t,this._descriptionTagName||this.setDescriptionTagName(WE);for(let e=0;e<this._pdomInstances.length;e++){this._pdomInstances[e].peer.setDescriptionSiblingContent(this._descriptionContent)}}}set descriptionContent(e){this.setDescriptionContent(e)}get descriptionContent(){return this.getDescriptionContent()}getDescriptionContent(){return this._descriptionContent}setAriaRole(e){this._ariaRole!==e&&(this._ariaRole=e,null!==e?this.setPDOMAttribute("role",e):this.removePDOMAttribute("role"))}set ariaRole(e){this.setAriaRole(e)}get ariaRole(){return this.getAriaRole()}getAriaRole(){return this._ariaRole}setContainerAriaRole(e){this._containerAriaRole!==e&&(this._containerAriaRole=e,null===e?this.removePDOMAttribute("role",{elementName:C_.CONTAINER_PARENT}):this.setPDOMAttribute("role",e,{elementName:C_.CONTAINER_PARENT}))}set containerAriaRole(e){this.setContainerAriaRole(e)}get containerAriaRole(){return this.getContainerAriaRole()}getContainerAriaRole(){return this._containerAriaRole}setAriaValueText(e){const t=QE(e);this._ariaValueText!==t&&(this._ariaValueText=t,null===t?this.removePDOMAttribute("aria-valuetext"):this.setPDOMAttribute("aria-valuetext",t))}set ariaValueText(e){this.setAriaValueText(e)}get ariaValueText(){return this.getAriaValueText()}getAriaValueText(){return this._ariaValueText}setPDOMNamespace(e){return this._pdomNamespace!==e&&(this._pdomNamespace=e,this.onPDOMContentChange()),this}set pdomNamespace(e){this.setPDOMNamespace(e)}get pdomNamespace(){return this.getPDOMNamespace()}getPDOMNamespace(){return this._pdomNamespace}setAriaLabel(e){const t=QE(e);this._ariaLabel!==t&&(this._ariaLabel=t,null===t?this.removePDOMAttribute("aria-label"):this.setPDOMAttribute("aria-label",t))}set ariaLabel(e){this.setAriaLabel(e)}get ariaLabel(){return this.getAriaLabel()}getAriaLabel(){return this._ariaLabel}setFocusHighlight(e){this._focusHighlight!==e&&(this._focusHighlight=e,this._focusHighlightLayerable&&(e.visible=!1),this.focusHighlightChangedEmitter.emit())}set focusHighlight(e){this.setFocusHighlight(e)}get focusHighlight(){return this.getFocusHighlight()}getFocusHighlight(){return this._focusHighlight}setFocusHighlightLayerable(e){this._focusHighlightLayerable!==e&&(this._focusHighlightLayerable=e,this._focusHighlight&&(this._focusHighlight.visible=!1,this.focusHighlightChangedEmitter.emit()))}set focusHighlightLayerable(e){this.setFocusHighlightLayerable(e)}get focusHighlightLayerable(){return this.getFocusHighlightLayerable()}getFocusHighlightLayerable(){return this._focusHighlightLayerable}setGroupFocusHighlight(e){this._groupFocusHighlight=e}set groupFocusHighlight(e){this.setGroupFocusHighlight(e)}get groupFocusHighlight(){return this.getGroupFocusHighlight()}getGroupFocusHighlight(){return this._groupFocusHighlight}setAriaLabelledbyAssociations(e){let t,i;if(0===e.length&&0===this._ariaLabelledbyAssociations.length)return;const n=[],r=[],s=[];for(HE(e,this._ariaLabelledbyAssociations,r,n,s),i=0;i<n.length;i++)t=n[i],this.removeAriaLabelledbyAssociation(t);for(i=0;i<r.length;i++){const t=e[i];this.addAriaLabelledbyAssociation(t)}}set ariaLabelledbyAssociations(e){this.setAriaLabelledbyAssociations(e)}get ariaLabelledbyAssociations(){return this.getAriaLabelledbyAssociations()}getAriaLabelledbyAssociations(){return this._ariaLabelledbyAssociations}addAriaLabelledbyAssociation(e){this._ariaLabelledbyAssociations.push(e),e.otherNode._nodesThatAreAriaLabelledbyThisNode.push(this),this.updateAriaLabelledbyAssociationsInPeers()}removeAriaLabelledbyAssociation(e){this._ariaLabelledbyAssociations.splice(_.indexOf(this._ariaLabelledbyAssociations,e),1)[0].otherNode.removeNodeThatIsAriaLabelledByThisNode(this),this.updateAriaLabelledbyAssociationsInPeers()}removeNodeThatIsAriaLabelledByThisNode(e){const t=_.indexOf(this._nodesThatAreAriaLabelledbyThisNode,e);this._nodesThatAreAriaLabelledbyThisNode.splice(t,1)}updateAriaLabelledbyAssociationsInPeers(){for(let e=0;e<this.pdomInstances.length;e++){this.pdomInstances[e].peer.onAriaLabelledbyAssociationChange()}}updateOtherNodesAriaLabelledby(){for(let e=0;e<this._nodesThatAreAriaLabelledbyThisNode.length;e++){this._nodesThatAreAriaLabelledbyThisNode[e].updateAriaLabelledbyAssociationsInPeers()}}getNodesThatAreAriaLabelledbyThisNode(){return this._nodesThatAreAriaLabelledbyThisNode}get nodesThatAreAriaLabelledbyThisNode(){return this.getNodesThatAreAriaLabelledbyThisNode()}setAriaDescribedbyAssociations(e){let t;if(0===e.length&&0===this._ariaDescribedbyAssociations.length)return;const i=[],n=[],r=[];let s;for(HE(e,this._ariaDescribedbyAssociations,n,i,r),s=0;s<i.length;s++)t=i[s],this.removeAriaDescribedbyAssociation(t);for(s=0;s<n.length;s++){const t=e[s];this.addAriaDescribedbyAssociation(t)}}set ariaDescribedbyAssociations(e){this.setAriaDescribedbyAssociations(e)}get ariaDescribedbyAssociations(){return this.getAriaDescribedbyAssociations()}getAriaDescribedbyAssociations(){return this._ariaDescribedbyAssociations}addAriaDescribedbyAssociation(e){this._ariaDescribedbyAssociations.push(e),e.otherNode._nodesThatAreAriaDescribedbyThisNode.push(this),this.updateAriaDescribedbyAssociationsInPeers()}hasAriaDescribedbyAssociation(e){return _.includes(this._ariaDescribedbyAssociations,e)}removeAriaDescribedbyAssociation(e){this._ariaDescribedbyAssociations.splice(_.indexOf(this._ariaDescribedbyAssociations,e),1)[0].otherNode.removeNodeThatIsAriaDescribedByThisNode(this),this.updateAriaDescribedbyAssociationsInPeers()}removeNodeThatIsAriaDescribedByThisNode(e){const t=_.indexOf(this._nodesThatAreAriaDescribedbyThisNode,e);this._nodesThatAreAriaDescribedbyThisNode.splice(t,1)}updateAriaDescribedbyAssociationsInPeers(){for(let e=0;e<this.pdomInstances.length;e++){this.pdomInstances[e].peer.onAriaDescribedbyAssociationChange()}}updateOtherNodesAriaDescribedby(){for(let e=0;e<this._nodesThatAreAriaDescribedbyThisNode.length;e++){this._nodesThatAreAriaDescribedbyThisNode[e].updateAriaDescribedbyAssociationsInPeers()}}getNodesThatAreAriaDescribedbyThisNode(){return this._nodesThatAreAriaDescribedbyThisNode}get nodesThatAreAriaDescribedbyThisNode(){return this.getNodesThatAreAriaDescribedbyThisNode()}setActiveDescendantAssociations(e){let t;if(0===e.length&&0===this._activeDescendantAssociations.length)return;const i=[],n=[],r=[];let s;for(HE(e,this._activeDescendantAssociations,n,i,r),s=0;s<i.length;s++)t=i[s],this.removeActiveDescendantAssociation(t);for(s=0;s<n.length;s++){const t=e[s];this.addActiveDescendantAssociation(t)}}set activeDescendantAssociations(e){this.setActiveDescendantAssociations(e)}get activeDescendantAssociations(){return this.getActiveDescendantAssociations()}getActiveDescendantAssociations(){return this._activeDescendantAssociations}addActiveDescendantAssociation(e){this._activeDescendantAssociations.push(e),e.otherNode._nodesThatAreActiveDescendantToThisNode.push(this),this.updateActiveDescendantAssociationsInPeers()}removeActiveDescendantAssociation(e){this._activeDescendantAssociations.splice(_.indexOf(this._activeDescendantAssociations,e),1)[0].otherNode.removeNodeThatIsActiveDescendantThisNode(this),this.updateActiveDescendantAssociationsInPeers()}removeNodeThatIsActiveDescendantThisNode(e){const t=_.indexOf(this._nodesThatAreActiveDescendantToThisNode,e);this._nodesThatAreActiveDescendantToThisNode.splice(t,1)}updateActiveDescendantAssociationsInPeers(){for(let e=0;e<this.pdomInstances.length;e++){this.pdomInstances[e].peer.onActiveDescendantAssociationChange()}}updateOtherNodesActiveDescendant(){for(let e=0;e<this._nodesThatAreActiveDescendantToThisNode.length;e++){this._nodesThatAreActiveDescendantToThisNode[e].updateActiveDescendantAssociationsInPeers()}}getNodesThatAreActiveDescendantToThisNode(){return this._nodesThatAreActiveDescendantToThisNode}get nodesThatAreActiveDescendantToThisNode(){return this.getNodesThatAreActiveDescendantToThisNode()}setPDOMOrder(e){if(this._pdomOrder!==e){const t=this._pdomOrder;this._pdomOrder=null===e?null:e.slice(),B_.pdomOrderChange(this,t,e),this.rendererSummaryRefreshEmitter.emit()}}set pdomOrder(e){this.setPDOMOrder(e)}get pdomOrder(){return this.getPDOMOrder()}getPDOMOrder(){return this._pdomOrder?this._pdomOrder.slice(0):this._pdomOrder}hasPDOMOrder(){return null!==this._pdomOrder&&0!==this._pdomOrder.length&&(this._pdomOrder.length>1||null!==this._pdomOrder[0])}getPDOMParent(){return this._pdomParent}get pdomParent(){return this.getPDOMParent()}getEffectiveChildren(){const e=[];for(let t=0;t<this._children.length;t++){const i=this._children[t];i._pdomParent||e.push(i)}if(this.hasPDOMOrder()){const t=this.pdomOrder.slice(),i=t.indexOf(null);return i>=0?(e.unshift(i,1),Array.prototype.splice.apply(t,e)):Array.prototype.push.apply(t,e),t}return e}setPDOMVisible(e){this._pdomVisible!==e&&(this._pdomVisible=e,this._pdomDisplaysInfo.onPDOMVisibilityChange(e))}set pdomVisible(e){this.setPDOMVisible(e)}get pdomVisible(){return this.isPDOMVisible()}isPDOMVisible(){return this._pdomVisible}isPDOMDisplayed(){for(let e=0;e<this._pdomInstances.length;e++)if(this._pdomInstances[e].isGloballyVisible())return!0;return!1}get pdomDisplayed(){return this.isPDOMDisplayed()}setInputValue(e){if((e instanceof _g||e instanceof mg)&&(e=e.value),(e=""+e)!==this._inputValue){this._inputValue=e;for(let e=0;e<this.pdomInstances.length;e++){this.pdomInstances[e].peer.onInputValueChange()}}}set inputValue(e){this.setInputValue(e)}get inputValue(){return this.getInputValue()}getInputValue(){return this._inputValue}setPDOMChecked(e){this._tagName,this._inputType,this._pdomChecked!==e&&(this._pdomChecked=e,this.setPDOMAttribute("checked",e,{asProperty:!0}))}set pdomChecked(e){this.setPDOMChecked(e)}get pdomChecked(){return this.getPDOMChecked()}getPDOMChecked(){return this._pdomChecked}getPDOMAttributes(){return this._pdomAttributes.slice(0)}get pdomAttributes(){return this.getPDOMAttributes()}setPDOMAttribute(e,t,i){"boolean"!=typeof t&&"number"!=typeof t&&(t=QE(t));const n=Vo()({namespace:null,asProperty:!1,elementName:C_.PRIMARY_SIBLING},i);for(let r=0;r<this._pdomAttributes.length;r++){const t=this._pdomAttributes[r];t.attribute===e&&t.options.namespace===n.namespace&&t.options.elementName===n.elementName&&(t.options.asProperty===n.asProperty?this._pdomAttributes.splice(r,1):this.removePDOMAttribute(t.attribute,t.options))}this._pdomAttributes.push({attribute:e,value:t,options:n});for(let r=0;r<this._pdomInstances.length;r++){this._pdomInstances[r].peer.setAttributeToElement(e,t,n)}}removePDOMAttribute(e,t){const i=Vo()({namespace:null,elementName:C_.PRIMARY_SIBLING},t);let n=!1;for(let r=0;r<this._pdomAttributes.length;r++)this._pdomAttributes[r].attribute===e&&this._pdomAttributes[r].options.namespace===i.namespace&&this._pdomAttributes[r].options.elementName===i.elementName&&(this._pdomAttributes.splice(r,1),n=!0);for(let r=0;r<this._pdomInstances.length;r++){this._pdomInstances[r].peer.removeAttributeFromElement(e,i)}}removePDOMAttributes(){const e=this.getPDOMAttributes();for(let t=0;t<e.length;t++){const i=e[t].attribute;this.removePDOMAttribute(i)}}hasPDOMAttribute(e,t){const i=Vo()({namespace:null,elementName:C_.PRIMARY_SIBLING},t);let n=!1;for(let r=0;r<this._pdomAttributes.length;r++)this._pdomAttributes[r].attribute===e&&this._pdomAttributes[r].options.namespace===i.namespace&&this._pdomAttributes[r].options.elementName===i.elementName&&(n=!0);return n}setPDOMClass(e,t){const i=Vo()({elementName:C_.PRIMARY_SIBLING},t);for(let n=0;n<this._pdomClasses.length;n++){const t=this._pdomClasses[n];if(t.className===e&&t.options.elementName===i.elementName)return}this._pdomClasses.push({className:e,options:i});for(let n=0;n<this._pdomInstances.length;n++){this._pdomInstances[n].peer.setClassToElement(e,i)}}removePDOMClass(e,t){const i=Vo()({elementName:C_.PRIMARY_SIBLING},t);let n=!1;for(let r=0;r<this._pdomClasses.length;r++)this._pdomClasses[r].className===e&&this._pdomClasses[r].options.elementName===i.elementName&&(this._pdomClasses.splice(r,1),n=!0);for(let r=0;r<this._pdomClasses.length;r++){this.pdomInstances[r].peer.removeClassFromElement(e,i)}}getPDOMClasses(){return this._pdomClasses.slice(0)}get pdomClasses(){return this.getPDOMClasses()}setFocusable(e){if(this._focusableOverride!==e){this._focusableOverride=e;for(let e=0;e<this._pdomInstances.length;e++)this._pdomInstances[e].peer.setFocusable(this.focusable)}}set focusable(e){this.setFocusable(e)}get focusable(){return this.isFocusable()}isFocusable(){return null!==this._focusableOverride?this._focusableOverride:null!==this._tagName&&nE.tagIsDefaultFocusable(this._tagName)}setPDOMTransformSourceNode(e){this._pdomTransformSourceNode=e;for(let t=0;t<this._pdomInstances.length;t++)this._pdomInstances[t].peer.setPDOMTransformSourceNode(this._pdomTransformSourceNode)}set pdomTransformSourceNode(e){this.setPDOMTransformSourceNode(e)}get pdomTransformSourceNode(){return this.getPDOMTransformSourceNode()}getPDOMTransformSourceNode(){return this._pdomTransformSourceNode}setFocusPanTargetBoundsProperty(e){e!==this._focusPanTargetBoundsProperty&&(this._focusPanTargetBoundsProperty=e)}getFocusPanTargetBoundsProperty(){return this._focusPanTargetBoundsProperty}set focusPanTargetBoundsProperty(e){this.setFocusPanTargetBoundsProperty(e)}get focusPanTargetBoundsProperty(){return this.getFocusPanTargetBoundsProperty()}setLimitPanDirection(e){this._limitPanDirection=e}getLimitPanDirection(){return this._limitPanDirection}set limitPanDirection(e){this.setLimitPanDirection(e)}get limitPanDirection(){return this.getLimitPanDirection()}setPositionInPDOM(e){this._positionInPDOM=e;for(let t=0;t<this._pdomInstances.length;t++)this._pdomInstances[t].peer.setPositionInPDOM(e)}set positionInPDOM(e){this.setPositionInPDOM(e)}get positionInPDOM(){return this.getPositionInPDOM()}getPositionInPDOM(){return this._positionInPDOM}setExcludeLabelSiblingFromInput(){this.excludeLabelSiblingFromInput=!0,this.onPDOMContentChange()}isInsidePhetioArchetype(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;if(e.isPhetioInstrumented())return e.phetioIsArchetype;for(let t=0;t<e.parents.length;t++)if(this.isInsidePhetioArchetype(e.parents[t]))return!0;return!1}alertDescriptionUtterance(e){if(zE.value)return;if(Lm.PHET_IO_ENABLED&&this.isInsidePhetioArchetype())return;const t=this.getConnectedDisplays();for(let i=0;i<t.length;i++){const n=t[i];n.isAccessible()&&n.descriptionUtteranceQueue.addToBack(e)}}forEachUtteranceQueue(e){const t=this.getConnectedDisplays();for(let i=0;i<t.length;i++){const n=t[i];n.isAccessible()&&e(n.descriptionUtteranceQueue)}}getBaseOptions(){const e={};for(let t=0;t<KE.length;t++){const i=KE[t];e[i]=this[i]}return e}getNestedPDOMOrder(){const e=new Dv(this);let t=[];const i=[],n=[i];return function i(r,s){let a=0;if(_.each(t,e=>{r===e&&a++}),a>1||1===a&&!s)return;if(r.hasPDOMContent){const t={trail:e.copy(),children:[]};n[n.length-1].push(t),n.push(t.children)}const o=null===r._pdomOrder?[]:r._pdomOrder;t=t.concat(o),_.each(o,t=>{_.each(r.getLeafTrailsTo(t),n=>{n.removeAncestor(),e.addDescendantTrail(n),i(t,!0),e.removeDescendantTrail(n)})});const l=r._children.length;for(let t=0;t<l;t++){const n=r._children[t];e.addDescendant(n,t),i(n,!1),e.removeDescendant()}_.each(o,()=>{t.pop()}),r.hasPDOMContent&&n.pop()}(this,!1),i}onPDOMContentChange(){B_.pdomContentChange(this),this._pdomHeading&&this.computeHeadingLevel(),this.rendererSummaryRefreshEmitter.emit()}get hasPDOMContent(){return!!this._tagName}onPDOMAddChild(e){this._pdomDisplaysInfo.onAddChild(e),B_.addChild(this,e)}onPDOMRemoveChild(e){this._pdomDisplaysInfo.onRemoveChild(e),B_.removeChild(this,e),e.updateOtherNodesAriaLabelledby(),e.updateOtherNodesAriaDescribedby(),e.updateOtherNodesActiveDescendant()}onPDOMReorderedChildren(){B_.childrenOrderChange(this)}updateLinkedElementForProperty(e,t,i){if(this.isPhetioInstrumented()){t&&t instanceof _g&&t.isPhetioInstrumented()&&t instanceof Km&&this.removeLinkedElements(t);const n=this.tandem.createTandem(e);i&&i instanceof _g&&i.isPhetioInstrumented()&&i instanceof Km&&n!==i.tandem&&this.addLinkedElement(i,{tandemName:e})}}getPDOMInstances(){return this._pdomInstances}get pdomInstances(){return this.getPDOMInstances()}addPDOMInstance(e){this._pdomInstances.push(e)}removePDOMInstance(e){const t=_.indexOf(this._pdomInstances,e);this._pdomInstances.splice(t,1)}static BASIC_ACCESSIBLE_NAME_BEHAVIOR(e,t,i){return"input"===e.tagName?(t.labelTagName="label",t.labelContent=i):nE.tagNameSupportsContent(e.tagName)?t.innerContent=i:t.ariaLabel=i,t}static HELP_TEXT_BEFORE_CONTENT(e,t,i){return t.descriptionTagName=nE.DEFAULT_DESCRIPTION_TAG_NAME,t.descriptionContent=i,t.appendDescription=!1,t}static HELP_TEXT_AFTER_CONTENT(e,t,i){return t.descriptionTagName=nE.DEFAULT_DESCRIPTION_TAG_NAME,t.descriptionContent=i,t.appendDescription=!0,t}}Lg.register("ParallelDOM",ZE);class JE extends gy{constructor(e,t){const i=Vo()({phetioDocumentation:"Determines whether the element is enabled (true) or disabled (false).",phetioFeatured:!0,checkTandemName:!0},t);super(e,i)}static get TANDEM_NAME(){return"enabledProperty"}}ko.register("EnabledProperty",JE);class $E extends mg{constructor(e,t){super(e),this.onAccessAttempt=t}get(){return this.onAccessAttempt(),super.get()}set(e){throw new Error("Cannot set a TinyStaticProperty value")}isSettable(){return!1}notifyListeners(e){this.emit(this.get(),e,this)}link(e){this.addListener(e),e(this.get(),null,this)}equalsValue(e){return this.areValuesEqual(e,this.get())}}ko.register("TinyStaticProperty",$E);let ev=1;const tv=Zl.NOTHING.copy(),iv=Zl.NOTHING.copy(),nv=new Mh,rv=JE.TANDEM_NAME;const sv=["leftTop","centerTop","rightTop","leftCenter","center","rightCenter","leftBottom","centerBottom","rightBottom","left","right","top","bottom","centerX","centerY"],av=["children","cursor","phetioVisiblePropertyInstrumented","visibleProperty","visible","pickableProperty","pickable","phetioEnabledPropertyInstrumented","enabledProperty","enabled","phetioInputEnabledPropertyInstrumented","inputEnabledProperty","inputEnabled","inputListeners","opacity","disabledOpacity","filters","matrix","translation","x","y","rotation","scale","excludeInvisibleChildrenFromBounds","layoutOptions","localBounds","maxWidth","maxHeight","renderer","layerSplit","usesOpacity","cssTransform","excludeInvisible","webglScale","preventFit","mouseArea","touchArea","clipArea","transformBounds",...sv],ov={phetioVisiblePropertyInstrumented:!0,visible:!0,opacity:1,disabledOpacity:1,pickable:null,enabled:!0,phetioEnabledPropertyInstrumented:!1,inputEnabled:!0,phetioInputEnabledPropertyInstrumented:!1,clipArea:null,mouseArea:null,touchArea:null,cursor:null,transformBounds:!1,maxWidth:null,maxHeight:null,renderer:null,usesOpacity:!1,layerSplit:!1,cssTransform:!1,excludeInvisible:!1,webglScale:null,preventFit:!1},lv=null===ov.renderer?0:af.fromName(ov.renderer);class hv extends ZE{constructor(e){super(),_defineProperty(this,"parentAddedEmitter",new np),_defineProperty(this,"parentRemovedEmitter",new np),_defineProperty(this,"_activeParentLayoutConstraint",null),this._id=ev++,this._instances=[],this._rootedDisplays=[],this._drawables=[],this._visibleProperty=new GE(ov.visible,ov.phetioVisiblePropertyInstrumented,this.onVisiblePropertyChange.bind(this)),this.opacityProperty=new mg(ov.opacity,this.onOpacityPropertyChange.bind(this)),this.disabledOpacityProperty=new mg(ov.disabledOpacity,this.onDisabledOpacityPropertyChange.bind(this)),this._pickableProperty=new GE(ov.pickable,!1,this.onPickablePropertyChange.bind(this)),this._enabledProperty=new GE(ov.enabled,ov.phetioEnabledPropertyInstrumented,this.onEnabledPropertyChange.bind(this)),this._inputEnabledProperty=new GE(ov.inputEnabled,ov.phetioInputEnabledPropertyInstrumented),this.clipAreaProperty=new mg(ov.clipArea),this.voicingVisibleProperty=new mg(!0),this._mouseArea=ov.mouseArea,this._touchArea=ov.touchArea,this._cursor=ov.cursor,this._children=[],this._parents=[],this._transformBounds=ov.transformBounds,this._transform=new xp,this._transformListener=this.onTransformChange.bind(this),this._transform.changeEmitter.addListener(this._transformListener),this._maxWidth=ov.maxWidth,this._maxHeight=ov.maxHeight,this._appliedScaleFactor=1,this._inputListeners=[],this._renderer=lv,this._usesOpacity=ov.usesOpacity,this._layerSplit=ov.layerSplit,this._cssTransform=ov.cssTransform,this._excludeInvisible=ov.excludeInvisible,this._webglScale=ov.webglScale,this._preventFit=ov.preventFit,this.inputEnabledProperty.lazyLink(this.pdomBoundInputEnabledListener);const t=this.onBoundsListenersAddedOrRemoved.bind(this),i=this.validateBounds.bind(this),n=this.validateSelfBounds.bind(this);this.boundsProperty=new $E(Zl.NOTHING.copy(),i),this.boundsProperty.changeCount=t,this.localBoundsProperty=new $E(Zl.NOTHING.copy(),i),this.localBoundsProperty.changeCount=t,this.childBoundsProperty=new $E(Zl.NOTHING.copy(),i),this.childBoundsProperty.changeCount=t,this.selfBoundsProperty=new $E(Zl.NOTHING.copy(),n),this._localBoundsOverridden=!1,this._excludeInvisibleChildrenFromBounds=!1,this._layoutOptions=null,this._boundsDirty=!0,this._localBoundsDirty=!0,this._selfBoundsDirty=!0,this._childBoundsDirty=!0,this._filters=[],this.childrenChangedEmitter=new np,this.childInsertedEmitter=new np,this.childRemovedEmitter=new np,this.childrenReorderedEmitter=new np,this.transformEmitter=new np,this.instanceRefreshEmitter=new np,this.rendererSummaryRefreshEmitter=new np,this.filterChangeEmitter=new np,this.changedInstanceEmitter=new np,this.layoutOptionsChangedEmitter=new np,this._rendererBitmask=af.bitmaskNodeDefault,this._rendererSummary=new Ev(this),this._boundsEventCount=0,this._boundsEventSelfCount=0,this._picker=new dv(this),this._isGettingRemovedFromParent=!1,e&&this.mutate(e)}insertChild(e,t,i){return this._picker.onInsertChild(t),this.changeBoundsEventCount(t._boundsEventCount>0?1:0),this._rendererSummary.summaryChange(Ev.bitmaskAll,t._rendererSummary.bitmask),t._parents.push(this),this._children.splice(e,0,t),t._rendererSummary.hasNoPDOM()||this.onPDOMAddChild(t),t.invalidateBounds(),this._boundsDirty=!0,this.childInsertedEmitter.emit(t,e),t.parentAddedEmitter.emit(this),!i&&this.childrenChangedEmitter.emit(),this}addChild(e,t){return this.insertChild(this._children.length,e,t),this}removeChild(e,t){const i=_.indexOf(this._children,e);return this.removeChildWithIndex(e,i,t),this}removeChildAt(e,t){const i=this._children[e];return this.removeChildWithIndex(i,e,t),this}removeChildWithIndex(e,t,i){const n=_.indexOf(e._parents,this);e._isGettingRemovedFromParent=!0,e._rendererSummary.hasNoPDOM()||this.onPDOMRemoveChild(e),this._picker.onRemoveChild(e),this.changeBoundsEventCount(e._boundsEventCount>0?-1:0),this._rendererSummary.summaryChange(e._rendererSummary.bitmask,Ev.bitmaskAll),e._parents.splice(n,1),this._children.splice(t,1),e._isGettingRemovedFromParent=!1,this.invalidateBounds(),this._childBoundsDirty=!0,this.childRemovedEmitter.emit(e,t),e.parentRemovedEmitter.emit(this),!i&&this.childrenChangedEmitter.emit()}moveChildToIndex(e,t){const i=this.indexOfChild(e);return this._children[t]!==e&&(this._children.splice(i,1),this._children.splice(t,0,e),this._rendererSummary.hasNoPDOM()||this.onPDOMReorderedChildren(),this.childrenReorderedEmitter.emit(Math.min(i,t),Math.max(i,t)),this.childrenChangedEmitter.emit()),this}removeAllChildren(){return this.setChildren([]),this}setChildren(e){const t=[],i=[],n=[];let r;for(HE(e,this._children,i,t,n),r=t.length-1;r>=0;r--)this.removeChild(t[r],!0);let s=-1,a=-1;for(r=0;r<n.length;r++){const e=n[r];this._children[r]!==e&&(this._children[r]=e,-1===s&&(s=r),a=r)}const o=-1!==s;if(o&&(this._rendererSummary.hasNoPDOM()||this.onPDOMReorderedChildren(),this.childrenReorderedEmitter.emit(s,a)),i.length){let t=0,n=i[t];for(r=0;r<e.length;r++)e[r]===n&&(this.insertChild(r,n,!0),n=i[++t])}return(0!==t.length||0!==i.length||o)&&this.childrenChangedEmitter.emit(),this}set children(e){this.setChildren(e)}get children(){return this.getChildren()}getChildren(){return this._children.slice(0)}getChildrenCount(){return this._children.length}getParents(){return this._parents.slice(0)}get parents(){return this.getParents()}getParent(){return this._parents.length?this._parents[0]:null}get parent(){return this.getParent()}getChildAt(e){return this._children[e]}indexOfParent(e){return _.indexOf(this._parents,e)}indexOfChild(e){return _.indexOf(this._children,e)}moveToFront(){return _.each(this.parents,e=>e.moveChildToFront(this)),this}moveChildToFront(e){return this.moveChildToIndex(e,this._children.length-1)}moveForward(){return this.parents.forEach(e=>e.moveChildForward(this)),this}moveChildForward(e){const t=this.indexOfChild(e);return t<this.getChildrenCount()-1&&this.moveChildToIndex(e,t+1),this}moveBackward(){return this.parents.forEach(e=>e.moveChildBackward(this)),this}moveChildBackward(e){const t=this.indexOfChild(e);return t>0&&this.moveChildToIndex(e,t-1),this}moveToBack(){return _.each(this.parents,e=>e.moveChildToBack(this)),this}moveChildToBack(e){return this.moveChildToIndex(e,0)}replaceChild(e,t){const i=this.indexOfChild(e),n=e.focused;return this.removeChild(e,!0),this.insertChild(i,t,!0),this.childrenChangedEmitter.emit(),n&&t.focusable&&t.focus(),this}detach(){return _.each(this._parents.slice(0),e=>e.removeChild(this)),this}changeBoundsEventCount(e){if(0!==e){const t=0===this._boundsEventCount;if(this._boundsEventCount+=e,t!==(0===this._boundsEventCount)){const e=t?1:-1,i=this._parents.length;for(let t=0;t<i;t++)this._parents[t].changeBoundsEventCount(e)}}}validateSelfBounds(){if(this._selfBoundsDirty){const e=tv.set(this.selfBoundsProperty._value),t=this.updateSelfBounds();return this._selfBoundsDirty=!1,t&&this.selfBoundsProperty.notifyListeners(e),!0}return!1}validateBounds(){let e;let t=this.validateSelfBounds();const i=this.childBoundsProperty._value,n=this.localBoundsProperty._value,r=this.selfBoundsProperty._value,s=this.boundsProperty._value;if(this._childBoundsDirty){for(t=!0,e=this._children.length;e--;){const t=this._children[e];t&&t.validateBounds()}const n=tv.set(i);for(i.set(Zl.NOTHING),e=this._children.length;e--;){const t=this._children[e];(t&&!this._excludeInvisibleChildrenFromBounds||t.isVisible())&&i.includeBounds(t.bounds)}this._childBoundsDirty=!1,i.equals(n)||i.equalsEpsilon(n,1e-13)||this.childBoundsProperty.notifyListeners(n)}if(this._localBoundsDirty){t=!0,this._localBoundsDirty=!1;const e=tv.set(n);if(!this._localBoundsOverridden){n.set(r).includeBounds(i);const e=this.clipArea;e&&n.constrainBounds(e.bounds)}null===this._maxWidth&&null===this._maxHeight||this.updateMaxDimension(n),n.equals(e)||(this._boundsDirty=!0,n.equalsEpsilon(e,1e-13)||this.localBoundsProperty.notifyListeners(e))}if(this._boundsDirty){t=!0,this._boundsDirty=!1;const i=tv.set(s);if(this._transformBounds&&!this._transform.getMatrix().isAxisAligned()){const e=nv.set(this.getMatrix());s.set(Zl.NOTHING),this._includeTransformedSubtreeBounds(e,s);const t=this.clipArea;t&&s.constrainBounds(t.getBoundsWithTransform(e))}else s.set(n),this.transformBoundsFromLocalToParent(s);if(!s.equals(i)){for(e=this._parents.length;e--;)this._parents[e].invalidateBounds();s.equalsEpsilon(i,1e-13)||this.boundsProperty.notifyListeners(i)}}return(this._childBoundsDirty||this._boundsDirty)&&this.validateBounds(),t}_includeTransformedSubtreeBounds(e,t){this.selfBounds.isEmpty()||t.includeBounds(this.getTransformedSelfBounds(e));const i=this._children.length;for(let n=0;n<i;n++){const i=this._children[n];e.multiplyMatrix(i._transform.getMatrix()),i._includeTransformedSubtreeBounds(e,t),e.multiplyMatrix(i._transform.getInverse())}return t}validateWatchedBounds(){for(;this.watchedBoundsScan(););}watchedBoundsScan(){if(0!==this._boundsEventSelfCount)return this.validateBounds();if(this._boundsEventCount>0&&this._childBoundsDirty){let e=!1;const t=this._children.length;for(let i=0;i<t;i++)e=this._children[i].watchedBoundsScan()||e;return e}return!1}invalidateBounds(){this._boundsDirty=!0,this._localBoundsDirty=!0;let e=this._parents.length;for(;e--;)this._parents[e].invalidateChildBounds()}invalidateChildBounds(){if(!this._childBoundsDirty){this._childBoundsDirty=!0,this._localBoundsDirty=!0;let e=this._parents.length;for(;e--;)this._parents[e].invalidateChildBounds()}}invalidateSelf(e){const t=this.selfBoundsProperty._value;if(e){if(this._selfBoundsDirty=!1,!t.equals(e)){const i=tv.set(t);this.invalidateBounds(),this._picker.onSelfBoundsDirty(),t.set(e),this.selfBoundsProperty.notifyListeners(i)}}else this._selfBoundsDirty=!0,this.invalidateBounds(),this._picker.onSelfBoundsDirty()}updateSelfBounds(){return!1}hasChild(e){const t=_.includes(this._children,e);return t}getSelfShape(){return this.selfBounds.isEmpty()?new Ip:Ip.bounds(this.selfBounds)}getSelfBounds(){return this.selfBoundsProperty.value}get selfBounds(){return this.getSelfBounds()}getSafeSelfBounds(){return this.selfBoundsProperty.value}get safeSelfBounds(){return this.getSafeSelfBounds()}getChildBounds(){return this.childBoundsProperty.value}get childBounds(){return this.getChildBounds()}getLocalBounds(){return this.localBoundsProperty.value}get localBounds(){return this.getLocalBounds()}set localBounds(e){this.setLocalBounds(e)}get localBoundsOverridden(){return this._localBoundsOverridden}setLocalBounds(e){const t=this.localBoundsProperty._value,i=t.copy();if(null===e)this._localBoundsOverridden&&(this._localBoundsOverridden=!1,this.localBoundsProperty.notifyListeners(i),this.invalidateBounds());else{const n=!e.equals(t)||!this._localBoundsOverridden;n&&t.set(e),this._localBoundsOverridden||(this._localBoundsOverridden=!0),n&&(this.localBoundsProperty.notifyListeners(i),this.invalidateBounds())}return this}getTransformedSelfBounds(e){return this.selfBounds.transformed(e)}getTransformedSafeSelfBounds(e){return this.safeSelfBounds.transformed(e)}getSafeTransformedVisibleBounds(e){const t=(e||Mh.IDENTITY).timesMatrix(this.matrix),i=Zl.NOTHING.copy();if(this.visibleProperty.value&&(this.selfBounds.isEmpty()||i.includeBounds(this.getTransformedSafeSelfBounds(t)),this._children.length))for(let n=0;n<this._children.length;n++)i.includeBounds(this._children[n].getSafeTransformedVisibleBounds(t));return i}get safeTransformedVisibleBounds(){return this.getSafeTransformedVisibleBounds()}setTransformBounds(e){return this._transformBounds!==e&&(this._transformBounds=e,this.invalidateBounds()),this}set transformBounds(e){this.setTransformBounds(e)}get transformBounds(){return this.getTransformBounds()}getTransformBounds(){return this._transformBounds}getBounds(){return this.boundsProperty.value}get bounds(){return this.getBounds()}getVisibleLocalBounds(){const e=this.selfBounds.copy();let t=this._children.length;for(;t--;)e.includeBounds(this._children[t].getVisibleBounds());return e}get visibleLocalBounds(){return this.getVisibleLocalBounds()}getVisibleBounds(){return this.isVisible()?this.getVisibleLocalBounds().transform(this.getMatrix()):Zl.NOTHING}get visibleBounds(){return this.getVisibleBounds()}hitTest(e,t,i){return this._picker.hitTest(e,!!t,!!i)}trailUnderPointer(e){return null===e.point?null:this.hitTest(e.point,e instanceof G_,e.isTouchLike())}containsPoint(e){return null!==this.hitTest(e)}containsPointSelf(e){return this.selfBounds.containsPoint(e)}intersectsBoundsSelf(e){return this.selfBounds.intersectsBounds(e)}isPhetioMouseHittable(e){return!(!1===this.pickable&&!this.isAnyDescendantAPhetioMouseHitTarget())&&(this.visible&&(null===this.clipArea||this.clipArea.containsPoint(this._transform.getInverse().timesVector2(e))))}isAnyDescendantAPhetioMouseHitTarget(){return"phetioNotSelectable"!==this.getPhetioMouseHitTarget()||_.some(this.children,e=>e.isAnyDescendantAPhetioMouseHitTarget())}getPhetioMouseHit(e){if(!this.isPhetioMouseHittable(e))return null;const t=this._transform.getInverse().timesVector2(e);let i=null;for(let n=this._children.length-1;n>=0;n--){const e=this._children[n].getPhetioMouseHit(t);if(e instanceof Km)return e;"phetioNotSelectable"===e&&(i=!0)}return i?this.getPhetioMouseHitTarget():this._mouseArea?this._mouseArea.containsPoint(t)?this.getPhetioMouseHitTarget():null:this.selfBounds.containsPoint(t)&&this.containsPointSelf(t)?this.getPhetioMouseHitTarget():null}isPainted(){return!1}areSelfBoundsValid(){return!0}hasParent(){return 0!==this._parents.length}hasChildren(){return this._children.length>0}isChildIncludedInLayout(e){return e.bounds.isValid()&&(!this._excludeInvisibleChildrenFromBounds||e.visible)}walkDepthFirst(e){e(this);const t=this._children.length;for(let i=0;i<t;i++)this._children[i].walkDepthFirst(e)}addInputListener(e){return _.includes(this._inputListeners,e)||(this._inputListeners.push(e),this._picker.onAddInputListener()),this}removeInputListener(e){const t=_.indexOf(this._inputListeners,e);return t>=0&&(this._inputListeners.splice(t,1),this._picker.onRemoveInputListener()),this}hasInputListener(e){for(let t=0;t<this._inputListeners.length;t++)if(this._inputListeners[t]===e)return!0;return!1}interruptInput(){const e=this.inputListeners;for(let t=0;t<e.length;t++){const i=e[t];i.interrupt&&i.interrupt()}return this}interruptSubtreeInput(){this.interruptInput();const e=this._children.slice();for(let t=0;t<e.length;t++)e[t].interruptSubtreeInput();return this}translate(e,t,i){if("number"==typeof e){if(Math.abs(e)<1e-12&&Math.abs(t)<1e-12)return;i?this.prependTranslation(e,t):this.appendMatrix(nv.setToTranslation(e,t))}else{const i=e;if(!i.x&&!i.y)return;this.translate(i.x,i.y,t)}}scale(e,t,i){if("number"==typeof e)if(void 0===t||"boolean"==typeof t)this.scale(e,e,t);else{if(1===e&&1===t)return;i?this.prependMatrix(Mh.scaling(e,t)):this.appendMatrix(Mh.scaling(e,t))}else{const i=e;this.scale(i.x,i.y,t)}}rotate(e,t){e%(2*Math.PI)!=0&&(t?this.prependMatrix(Mh.rotation2(e)):this.appendMatrix(Mh.rotation2(e)))}rotateAround(e,t){let i=Mh.translation(-e.x,-e.y);return i=Mh.rotation2(t).timesMatrix(i),i=Mh.translation(e.x,e.y).timesMatrix(i),this.prependMatrix(i),this}setX(e){return this.translate(e-this.getX(),0,!0),this}set x(e){this.setX(e)}get x(){return this.getX()}getX(){return this._transform.getMatrix().m02()}setY(e){return this.translate(0,e-this.getY(),!0),this}set y(e){this.setY(e)}get y(){return this.getY()}getY(){return this._transform.getMatrix().m12()}setScaleMagnitude(e,t){const i=this.getScaleVector();return"number"==typeof e?(void 0===t&&(t=e),this.appendMatrix(Mh.scaling(e/i.x,t/i.y))):this.appendMatrix(Mh.scaling(e.x/i.x,e.y/i.y)),this}getScaleVector(){return this._transform.getMatrix().getScaleVector()}setRotation(e){return this.appendMatrix(nv.setToRotationZ(e-this.getRotation())),this}set rotation(e){this.setRotation(e)}get rotation(){return this.getRotation()}getRotation(){return this._transform.getMatrix().getRotation()}setTranslation(e,t){const i=this._transform.getMatrix(),n=i.m02(),r=i.m12();let s,a;return"number"==typeof e?(s=e-n,a=t-r):(s=e.x-n,a=e.y-r),this.translate(s,a,!0),this}set translation(e){this.setTranslation(e)}get translation(){return this.getTranslation()}getTranslation(){const e=this._transform.getMatrix();return new al(e.m02(),e.m12())}appendMatrix(e){this._transform.append(e)}prependMatrix(e){this._transform.prepend(e)}prependTranslation(e,t){(e||t)&&this._transform.prependTranslation(e,t)}setMatrix(e){this._transform.setMatrix(e)}set matrix(e){this.setMatrix(e)}get matrix(){return this.getMatrix()}getMatrix(){return this._transform.getMatrix()}getTransform(){return this._transform}get transform(){return this.getTransform()}resetTransform(){this.setMatrix(Mh.IDENTITY)}onTransformChange(){this.invalidateBounds(),this._picker.onTransformChange(),this.transformEmitter.emit()}onSummaryChange(e,t){this._pdomDisplaysInfo.onSummaryChange(e,t)}updateMaxDimension(e){const t=this._appliedScaleFactor;let i=1;if(null!==this._maxWidth){const t=e.width;t>this._maxWidth&&(i=Math.min(i,this._maxWidth/t))}if(null!==this._maxHeight){const t=e.height;t>this._maxHeight&&(i=Math.min(i,this._maxHeight/t))}const n=i/t;1!==n&&(this._appliedScaleFactor=i,this.scale(n))}auditMaxDimensions(){}onMaxDimensionChange(e,t){null===e&&null!==t?(this.changeBoundsEventCount(1),this._boundsEventSelfCount++):null!==e&&null===t&&(this.changeBoundsEventCount(-1),this._boundsEventSelfCount--)}setMaxWidth(e){this._maxWidth!==e&&(this.onMaxDimensionChange(this._maxWidth,e),this._maxWidth=e,this.updateMaxDimension(this.localBoundsProperty.value))}set maxWidth(e){this.setMaxWidth(e)}get maxWidth(){return this.getMaxWidth()}getMaxWidth(){return this._maxWidth}setMaxHeight(e){this._maxHeight!==e&&(this.onMaxDimensionChange(this._maxHeight,e),this._maxHeight=e,this.updateMaxDimension(this.localBoundsProperty.value))}set maxHeight(e){this.setMaxHeight(e)}get maxHeight(){return this.getMaxHeight()}getMaxHeight(){return this._maxHeight}setLeft(e){const t=this.getLeft();return isFinite(t)&&this.translate(e-t,0,!0),this}set left(e){this.setLeft(e)}get left(){return this.getLeft()}getLeft(){return this.getBounds().minX}setRight(e){const t=this.getRight();return isFinite(t)&&this.translate(e-t,0,!0),this}set right(e){this.setRight(e)}get right(){return this.getRight()}getRight(){return this.getBounds().maxX}setCenterX(e){const t=this.getCenterX();return isFinite(t)&&this.translate(e-t,0,!0),this}set centerX(e){this.setCenterX(e)}get centerX(){return this.getCenterX()}getCenterX(){return this.getBounds().getCenterX()}setCenterY(e){const t=this.getCenterY();return isFinite(t)&&this.translate(0,e-t,!0),this}set centerY(e){this.setCenterY(e)}get centerY(){return this.getCenterY()}getCenterY(){return this.getBounds().getCenterY()}setTop(e){const t=this.getTop();return isFinite(t)&&this.translate(0,e-t,!0),this}set top(e){this.setTop(e)}get top(){return this.getTop()}getTop(){return this.getBounds().minY}setBottom(e){const t=this.getBottom();return isFinite(t)&&this.translate(0,e-t,!0),this}set bottom(e){this.setBottom(e)}get bottom(){return this.getBottom()}getBottom(){return this.getBounds().maxY}setLeftTop(e){const t=this.getLeftTop();return t.isFinite()&&this.translate(e.minus(t),!0),this}set leftTop(e){this.setLeftTop(e)}get leftTop(){return this.getLeftTop()}getLeftTop(){return this.getBounds().getLeftTop()}setCenterTop(e){const t=this.getCenterTop();return t.isFinite()&&this.translate(e.minus(t),!0),this}set centerTop(e){this.setCenterTop(e)}get centerTop(){return this.getCenterTop()}getCenterTop(){return this.getBounds().getCenterTop()}setRightTop(e){const t=this.getRightTop();return t.isFinite()&&this.translate(e.minus(t),!0),this}set rightTop(e){this.setRightTop(e)}get rightTop(){return this.getRightTop()}getRightTop(){return this.getBounds().getRightTop()}setLeftCenter(e){const t=this.getLeftCenter();return t.isFinite()&&this.translate(e.minus(t),!0),this}set leftCenter(e){this.setLeftCenter(e)}get leftCenter(){return this.getLeftCenter()}getLeftCenter(){return this.getBounds().getLeftCenter()}setCenter(e){const t=this.getCenter();return t.isFinite()&&this.translate(e.minus(t),!0),this}set center(e){this.setCenter(e)}get center(){return this.getCenter()}getCenter(){return this.getBounds().getCenter()}setRightCenter(e){const t=this.getRightCenter();return t.isFinite()&&this.translate(e.minus(t),!0),this}set rightCenter(e){this.setRightCenter(e)}get rightCenter(){return this.getRightCenter()}getRightCenter(){return this.getBounds().getRightCenter()}setLeftBottom(e){const t=this.getLeftBottom();return t.isFinite()&&this.translate(e.minus(t),!0),this}set leftBottom(e){this.setLeftBottom(e)}get leftBottom(){return this.getLeftBottom()}getLeftBottom(){return this.getBounds().getLeftBottom()}setCenterBottom(e){const t=this.getCenterBottom();return t.isFinite()&&this.translate(e.minus(t),!0),this}set centerBottom(e){this.setCenterBottom(e)}get centerBottom(){return this.getCenterBottom()}getCenterBottom(){return this.getBounds().getCenterBottom()}setRightBottom(e){const t=this.getRightBottom();return t.isFinite()&&this.translate(e.minus(t),!0),this}set rightBottom(e){this.setRightBottom(e)}get rightBottom(){return this.getRightBottom()}getRightBottom(){return this.getBounds().getRightBottom()}getWidth(){return this.getBounds().getWidth()}get width(){return this.getWidth()}getHeight(){return this.getBounds().getHeight()}get height(){return this.getHeight()}getLocalWidth(){return this.getLocalBounds().getWidth()}get localWidth(){return this.getLocalWidth()}getLocalHeight(){return this.getLocalBounds().getHeight()}get localHeight(){return this.getLocalHeight()}getLocalLeft(){return this.getLocalBounds().minX}get localLeft(){return this.getLocalLeft()}getLocalRight(){return this.getLocalBounds().maxX}get localRight(){return this.getLocalRight()}getLocalCenterX(){return this.getLocalBounds().getCenterX()}get localCenterX(){return this.getLocalCenterX()}getLocalCenterY(){return this.getLocalBounds().getCenterY()}get localCenterY(){return this.getLocalCenterY()}getLocalTop(){return this.getLocalBounds().minY}get localTop(){return this.getLocalTop()}getLocalBottom(){return this.getLocalBounds().maxY}get localBottom(){return this.getLocalBottom()}getLocalLeftTop(){return this.getLocalBounds().getLeftTop()}get localLeftTop(){return this.getLocalLeftTop()}getLocalCenterTop(){return this.getLocalBounds().getCenterTop()}get localCenterTop(){return this.getLocalCenterTop()}getLocalRightTop(){return this.getLocalBounds().getRightTop()}get localRightTop(){return this.getLocalRightTop()}getLocalLeftCenter(){return this.getLocalBounds().getLeftCenter()}get localLeftCenter(){return this.getLocalLeftCenter()}getLocalCenter(){return this.getLocalBounds().getCenter()}get localCenter(){return this.getLocalCenter()}getLocalRightCenter(){return this.getLocalBounds().getRightCenter()}get localRightCenter(){return this.getLocalRightCenter()}getLocalLeftBottom(){return this.getLocalBounds().getLeftBottom()}get localLeftBottom(){return this.getLocalLeftBottom()}getLocalCenterBottom(){return this.getLocalBounds().getCenterBottom()}get localCenterBottom(){return this.getLocalCenterBottom()}getLocalRightBottom(){return this.getLocalBounds().getRightBottom()}get localRightBottom(){return this.getLocalRightBottom()}getId(){return this._id}get id(){return this.getId()}onVisiblePropertyChange(e){this._picker.onVisibilityChange(),this._pdomDisplaysInfo.onVisibilityChange(e);for(let t=0;t<this._parents.length;t++){const e=this._parents[t];e._excludeInvisibleChildrenFromBounds&&e.invalidateChildBounds()}}setVisibleProperty(e){return this._visibleProperty.setTargetProperty(this,"visibleProperty",e)}set visibleProperty(e){this.setVisibleProperty(e)}get visibleProperty(){return this.getVisibleProperty()}getVisibleProperty(){return this._visibleProperty}setVisible(e){return this.visibleProperty.set(e),this}set visible(e){this.setVisible(e)}get visible(){return this.isVisible()}isVisible(){return this.visibleProperty.value}setPhetioVisiblePropertyInstrumented(e){return this._visibleProperty.setTargetPropertyInstrumented(e,this)}set phetioVisiblePropertyInstrumented(e){this.setPhetioVisiblePropertyInstrumented(e)}get phetioVisiblePropertyInstrumented(){return this.getPhetioVisiblePropertyInstrumented()}getPhetioVisiblePropertyInstrumented(){return this._visibleProperty.getTargetPropertyInstrumented()}swapVisibility(e){const t=this.visible?this:e,i=this.visible?e:this,n=t.focused;return t.visible=!1,i.visible=!0,n&&i.focusable&&i.focus(),this}setOpacity(e){if(e<0||e>1)throw new Error("opacity out of range: "+e);this.opacityProperty.value=e}set opacity(e){this.setOpacity(e)}get opacity(){return this.getOpacity()}getOpacity(){return this.opacityProperty.value}setDisabledOpacity(e){if(e<0||e>1)throw new Error("disabledOpacity out of range: "+e);return this.disabledOpacityProperty.value=e,this}set disabledOpacity(e){this.setDisabledOpacity(e)}get disabledOpacity(){return this.getDisabledOpacity()}getDisabledOpacity(){return this.disabledOpacityProperty.value}getEffectiveOpacity(){return this.opacityProperty.value*(this.enabledProperty.value?1:this.disabledOpacityProperty.value)}get effectiveOpacity(){return this.getEffectiveOpacity()}onOpacityPropertyChange(){this.filterChangeEmitter.emit()}onDisabledOpacityPropertyChange(){this._enabledProperty.value||this.filterChangeEmitter.emit()}setFilters(e){this._filters.length=0,this._filters.push(...e),this.invalidateHint(),this.filterChangeEmitter.emit()}set filters(e){this.setFilters(e)}get filters(){return this.getFilters()}getFilters(){return this._filters.slice()}setPickableProperty(e){return this._pickableProperty.setTargetProperty(this,null,e)}set pickableProperty(e){this.setPickableProperty(e)}get pickableProperty(){return this.getPickableProperty()}getPickableProperty(){return this._pickableProperty}setPickable(e){return this._pickableProperty.set(e),this}set pickable(e){this.setPickable(e)}get pickable(){return this.isPickable()}isPickable(){return this._pickableProperty.value}onPickablePropertyChange(e,t){this._picker.onPickableChange(t,e)}setEnabledProperty(e){return this._enabledProperty.setTargetProperty(this,rv,e)}set enabledProperty(e){this.setEnabledProperty(e)}get enabledProperty(){return this.getEnabledProperty()}getEnabledProperty(){return this._enabledProperty}setPhetioEnabledPropertyInstrumented(e){return this._enabledProperty.setTargetPropertyInstrumented(e,this)}set phetioEnabledPropertyInstrumented(e){this.setPhetioEnabledPropertyInstrumented(e)}get phetioEnabledPropertyInstrumented(){return this.getPhetioEnabledPropertyInstrumented()}getPhetioEnabledPropertyInstrumented(){return this._enabledProperty.getTargetPropertyInstrumented()}setEnabled(e){return this._enabledProperty.set(e),this}set enabled(e){this.setEnabled(e)}get enabled(){return this.isEnabled()}isEnabled(){return this._enabledProperty.value}onEnabledPropertyChange(e){!e&&this.interruptSubtreeInput(),this.inputEnabled=e,1!==this.disabledOpacityProperty.value&&this.filterChangeEmitter.emit()}setInputEnabledProperty(e){return this._inputEnabledProperty.setTargetProperty(this,"inputEnabledProperty",e)}set inputEnabledProperty(e){this.setInputEnabledProperty(e)}get inputEnabledProperty(){return this.getInputEnabledProperty()}getInputEnabledProperty(){return this._inputEnabledProperty}setPhetioInputEnabledPropertyInstrumented(e){return this._inputEnabledProperty.setTargetPropertyInstrumented(e,this)}set phetioInputEnabledPropertyInstrumented(e){this.setPhetioInputEnabledPropertyInstrumented(e)}get phetioInputEnabledPropertyInstrumented(){return this.getPhetioInputEnabledPropertyInstrumented()}getPhetioInputEnabledPropertyInstrumented(){return this._inputEnabledProperty.getTargetPropertyInstrumented()}setInputEnabled(e){this.inputEnabledProperty.value=e}set inputEnabled(e){this.setInputEnabled(e)}get inputEnabled(){return this.isInputEnabled()}isInputEnabled(){return this.inputEnabledProperty.value}setInputListeners(e){for(;this._inputListeners.length;)this.removeInputListener(this._inputListeners[0]);for(let t=0;t<e.length;t++)this.addInputListener(e[t]);return this}set inputListeners(e){this.setInputListeners(e)}get inputListeners(){return this.getInputListeners()}getInputListeners(){return this._inputListeners.slice(0)}setCursor(e){this._cursor="auto"===e?null:e}set cursor(e){this.setCursor(e)}get cursor(){return this.getCursor()}getCursor(){return this._cursor}getEffectiveCursor(){if(this._cursor)return this._cursor;for(let e=0;e<this._inputListeners.length;e++){const t=this._inputListeners[e];if(t.cursor)return t.cursor}return null}setMouseArea(e){return this._mouseArea!==e&&(this._mouseArea=e,this._picker.onMouseAreaChange()),this}set mouseArea(e){this.setMouseArea(e)}get mouseArea(){return this.getMouseArea()}getMouseArea(){return this._mouseArea}setTouchArea(e){return this._touchArea!==e&&(this._touchArea=e,this._picker.onTouchAreaChange()),this}set touchArea(e){this.setTouchArea(e)}get touchArea(){return this.getTouchArea()}getTouchArea(){return this._touchArea}setClipArea(e){this.clipArea!==e&&(this.clipAreaProperty.value=e,this.invalidateBounds(),this._picker.onClipAreaChange())}set clipArea(e){this.setClipArea(e)}get clipArea(){return this.getClipArea()}getClipArea(){return this.clipAreaProperty.value}hasClipArea(){return null!==this.clipArea}setRendererBitmask(e){e!==this._rendererBitmask&&(this._rendererBitmask=e,this._rendererSummary.selfChange(),this.instanceRefreshEmitter.emit())}invalidateSupportedRenderers(){}invalidateHint(){this.rendererSummaryRefreshEmitter.emit(),this.instanceRefreshEmitter.emit()}setRenderer(e){let t=0;"canvas"===e?t=af.bitmaskCanvas:"svg"===e?t=af.bitmaskSVG:"dom"===e?t=af.bitmaskDOM:"webgl"===e&&(t=af.bitmaskWebGL),this._renderer!==t&&(this._renderer=t,this.invalidateHint())}set renderer(e){this.setRenderer(e)}get renderer(){return this.getRenderer()}getRenderer(){return 0===this._renderer?null:this._renderer===af.bitmaskCanvas?"canvas":this._renderer===af.bitmaskSVG?"svg":this._renderer===af.bitmaskDOM?"dom":this._renderer===af.bitmaskWebGL?"webgl":null}setLayerSplit(e){e!==this._layerSplit&&(this._layerSplit=e,this.invalidateHint())}set layerSplit(e){this.setLayerSplit(e)}get layerSplit(){return this.isLayerSplit()}isLayerSplit(){return this._layerSplit}setUsesOpacity(e){e!==this._usesOpacity&&(this._usesOpacity=e,this.invalidateHint())}set usesOpacity(e){this.setUsesOpacity(e)}get usesOpacity(){return this.getUsesOpacity()}getUsesOpacity(){return this._usesOpacity}setCSSTransform(e){e!==this._cssTransform&&(this._cssTransform=e,this.invalidateHint())}set cssTransform(e){this.setCSSTransform(e)}get cssTransform(){return this.isCSSTransformed()}isCSSTransformed(){return this._cssTransform}setExcludeInvisible(e){e!==this._excludeInvisible&&(this._excludeInvisible=e,this.invalidateHint())}set excludeInvisible(e){this.setExcludeInvisible(e)}get excludeInvisible(){return this.isExcludeInvisible()}isExcludeInvisible(){return this._excludeInvisible}setExcludeInvisibleChildrenFromBounds(e){e!==this._excludeInvisibleChildrenFromBounds&&(this._excludeInvisibleChildrenFromBounds=e,this.invalidateBounds())}set excludeInvisibleChildrenFromBounds(e){this.setExcludeInvisibleChildrenFromBounds(e)}get excludeInvisibleChildrenFromBounds(){return this.isExcludeInvisibleChildrenFromBounds()}isExcludeInvisibleChildrenFromBounds(){return this._excludeInvisibleChildrenFromBounds}setLayoutOptions(e){e!==this._layoutOptions&&(this._layoutOptions=e,this.layoutOptionsChangedEmitter.emit())}set layoutOptions(e){this.setLayoutOptions(e)}get layoutOptions(){return this.getLayoutOptions()}getLayoutOptions(){return this._layoutOptions}mutateLayoutOptions(e){this.layoutOptions=Ro()({},this.layoutOptions||{},e)}get widthSizable(){return!1}get heightSizable(){return!1}get extendsWidthSizable(){return!1}get extendsHeightSizable(){return!1}get extendsSizable(){return!1}setPreventFit(e){e!==this._preventFit&&(this._preventFit=e,this.invalidateHint())}set preventFit(e){this.setPreventFit(e)}get preventFit(){return this.isPreventFit()}isPreventFit(){return this._preventFit}setWebGLScale(e){e!==this._webglScale&&(this._webglScale=e,this.invalidateHint())}set webglScale(e){this.setWebGLScale(e)}get webglScale(){return this.getWebGLScale()}getWebGLScale(){return this._webglScale}getUniqueTrail(e){if(e){const t=this.getTrails(e);return t[0]}{const e=new Dv;let t=this;for(;t;)e.addAncestor(t),t=t._parents[0];return e}}getUniqueTrailTo(e){return this.getUniqueTrail(t=>e===t)}getTrails(e){e=e||hv.defaultTrailPredicate;const t=[],i=new Dv(this);return Dv.appendAncestorTrailsWithPredicate(t,i,e),t}getTrailsTo(e){return this.getTrails(t=>t===e)}getLeafTrails(e){e=e||hv.defaultLeafTrailPredicate;const t=[],i=new Dv(this);return Dv.appendDescendantTrailsWithPredicate(t,i,e),t}getLeafTrailsTo(e){return this.getLeafTrails(t=>t===e)}getUniqueLeafTrail(e){const t=this.getLeafTrails(e);return t[0]}getUniqueLeafTrailTo(e){return this.getUniqueLeafTrail(t=>t===e)}getConnectedNodes(){const e=[];let t=this._children.concat(this._parents).concat(this);for(;t.length;){const i=t.pop();_.includes(e,i)||(e.push(i),t=t.concat(i._children,i._parents))}return e}getSubtreeNodes(){const e=[];let t=this._children.concat(this);for(;t.length;){const i=t.pop();_.includes(e,i)||(e.push(i),t=t.concat(i._children))}return e}getTopologicallySortedNodes(){const e={},t=[],i=[];let n;function r(i){delete e[n.id][i.id],_.every(e,e=>!e[i.id])&&t.push(i)}for(_.each(this.getConnectedNodes(),i=>{e[i.id]={},_.each(i._children,t=>{e[i.id][t.id]=!0}),i.parents.length||t.push(i)});t.length;)n=t.pop(),i.push(n),_.each(n._children,r);return i}canAddChild(e){if(this===e||_.includes(this._children,e))return!1;const t={},i=[],n=[];let r;function s(e){delete t[r.id][e.id],_.every(t,t=>!t[e.id])&&i.push(e)}for(_.each(this.getConnectedNodes().concat(e.getConnectedNodes()),n=>{t[n.id]={},_.each(n._children,e=>{t[n.id][e.id]=!0}),n.parents.length||n===e||i.push(n)}),t[this.id][e.id]=!0;i.length;)r=i.pop(),n.push(r),_.each(r._children,s),r===this&&s(e);return _.every(t,e=>_.every(e,e=>!1))}canvasPaintSelf(e,t){}renderToCanvasSelf(e,t){this.isPainted()&&this._rendererBitmask&af.bitmaskCanvas&&this.canvasPaintSelf(e,t)}renderToCanvasSubtree(e,t){t=t||Mh.identity(),e.resetStyles(),this.renderToCanvasSelf(e,t);for(let i=0;i<this._children.length;i++){const n=this._children[i];if(n.isVisible()&&n.bounds.isValid()){const i=1!==n.effectiveOpacity||n.clipArea||n._filters.length;if(e.context.save(),t.multiplyMatrix(n._transform.getMatrix()),t.canvasSetTransform(e.context),i){const i=n.localBounds.transformed(t).dilate(4).roundOut().constrainBounds(iv.setMinMax(0,0,e.canvas.width,e.canvas.height));if(i.width>0&&i.height>0){const r=document.createElement("canvas");r.width=i.width,r.height=i.height;const s=r.getContext("2d"),a=new ey(r,s),o=t.copy().prependTranslation(-i.minX,-i.minY);o.canvasSetTransform(s),n.renderToCanvasSubtree(a,o),e.context.save(),n.clipArea&&(e.context.beginPath(),n.clipArea.writeToContext(e.context),e.context.clip()),e.context.setTransform(1,0,0,1,0,0),e.context.globalAlpha=n.effectiveOpacity;let l=!1;n._filters.length&&(Zg.canvasFilter&&_.every(n._filters,e=>e.isDOMCompatible())?(e.context.filter=n._filters.map(e=>e.getCSSFilterString()).join(" "),l=!0):n._filters.forEach(e=>e.applyCanvasFilter(a))),e.context.drawImage(r,i.minX,i.minY),e.context.restore(),l&&(e.context.filter="none")}}else n.renderToCanvasSubtree(e,t);t.multiplyMatrix(n._transform.getInverse()),e.context.restore()}}}renderToCanvas(e,t,i,n){e.width=e.width,n&&(t.fillStyle=n,t.fillRect(0,0,e.width,e.height));const r=new ey(e,t);this.renderToCanvasSubtree(r,Mh.identity()),i&&i()}toCanvas(e,t,i,n,r){const s=this.getBounds().union(this.localToParentBounds(this.getSafeSelfBounds()));t=void 0!==t?t:Math.ceil(2-s.minX),i=void 0!==i?i:Math.ceil(2-s.minY),n=void 0!==n?n:Math.ceil(s.getWidth()+4),r=void 0!==r?r:Math.ceil(s.getHeight()+4);const a=document.createElement("canvas");a.width=n,a.height=r;const o=a.getContext("2d");o.translate(t,i),this._transform.getMatrix().canvasAppendTransform(o);const l=new ey(a,o);this.renderToCanvasSubtree(l,Mh.translation(t,i).timesMatrix(this._transform.getMatrix())),e(a,t,i,n,r)}toDataURL(e,t,i,n,r){this.toCanvas((t,i,n,r,s)=>{e(t.toDataURL(),i,n,r,s)},t,i,n,r)}toImage(e,t,i,n,r){this.toDataURL((t,i,n)=>{const r=document.createElement("img");r.onload=()=>{e(r,i,n);try{delete r.onload}catch(t){}},r.src=t},t,i,n,r)}toImageNodeAsynchronous(e,t,i,n,r){this.toImage((t,i,n)=>{e(new hv({children:[new rA(t,{x:-i,y:-n})]}))},t,i,n,r)}toCanvasNodeSynchronous(e,t,i,n){let r=null;return this.toCanvas((e,t,i)=>{r=new hv({children:[new rA(e,{x:-t,y:-i})]})},e,t,i,n),r}toDataURLImageSynchronous(e,t,i,n){let r=null;return this.toDataURL((e,t,i,n,s)=>{r=new rA(e,{x:-t,y:-i,initialWidth:n,initialHeight:s})},e,t,i,n),r}toDataURLNodeSynchronous(e,t,i,n){return new hv({children:[this.toDataURLImageSynchronous(e,t,i,n)]})}rasterized(e){const t=Vo()({resolution:1,sourceBounds:null,useTargetBounds:!0,wrap:!0,useCanvas:!1,imageOptions:{}},e),i=t.resolution,n=t.sourceBounds;const r=new hv({scale:i,children:[this]});let s=n||this.getSafeTransformedVisibleBounds().dilated(2).roundedOut();1!==i&&(s=new Zl(i*s.minX,i*s.minY,i*s.maxX,i*s.maxY),s.width%1!=0&&(s.maxX+=1-s.width%1),s.height%1!=0&&(s.maxY+=1-s.height%1));let a=null;r.toCanvas((function(e,n,r,s,o){const l=t.useCanvas?e:e.toDataURL();a=new rA(l,No({},t.imageOptions,{x:-n,y:-r,initialWidth:s,initialHeight:o})),a.scale(1/i,1/i,!0)}),-s.minX,-s.minY,fl.roundSymmetric(s.width),fl.roundSymmetric(s.height)),r.dispose();let o=this.getVisibleBounds();if(n&&(o=n.intersection(o)),t.useTargetBounds&&(a.imageBounds=a.parentToLocalBounds(o)),t.wrap){const e=new hv({children:[a]});return t.useTargetBounds&&(e.localBounds=o),e}return t.useTargetBounds&&(a.localBounds=a.parentToLocalBounds(o)),a}createDOMDrawable(e,t){throw new Error("createDOMDrawable is abstract. The subtype should either override this method, or not support the DOM renderer")}createSVGDrawable(e,t){throw new Error("createSVGDrawable is abstract. The subtype should either override this method, or not support the DOM renderer")}createCanvasDrawable(e,t){throw new Error("createCanvasDrawable is abstract. The subtype should either override this method, or not support the DOM renderer")}createWebGLDrawable(e,t){throw new Error("createWebGLDrawable is abstract. The subtype should either override this method, or not support the DOM renderer")}getInstances(){return this._instances}get instances(){return this.getInstances()}addInstance(e){this._instances.push(e),this.changedInstanceEmitter.emit(e,!0)}removeInstance(e){const t=_.indexOf(this._instances,e);this._instances.splice(t,1),this.changedInstanceEmitter.emit(e,!1)}wasVisuallyDisplayed(e){for(let t=0;t<this._instances.length;t++){const i=this._instances[t];if(i.visible&&(!e||i.display===e))return!0}return!1}getRootedDisplays(){return this._rootedDisplays}get rootedDisplays(){return this.getRootedDisplays()}addRootedDisplay(e){this._rootedDisplays.push(e),this._pdomDisplaysInfo.onAddedRootedDisplay(e)}removeRootedDisplay(e){const t=_.indexOf(this._rootedDisplays,e);this._rootedDisplays.splice(t,1),this._pdomDisplaysInfo.onRemovedRootedDisplay(e)}getRecursiveConnectedDisplays(e){this.rootedDisplays.length&&e.push(...this.rootedDisplays);for(let t=0;t<this._parents.length;t++)e.push(...this._parents[t].getRecursiveConnectedDisplays(e));return _.uniq(e)}getConnectedDisplays(){return _.uniq(this.getRecursiveConnectedDisplays([]))}localToParentPoint(e){return this._transform.transformPosition2(e)}localToParentBounds(e){return this._transform.transformBounds2(e)}parentToLocalPoint(e){return this._transform.inversePosition2(e)}parentToLocalBounds(e){return this._transform.inverseBounds2(e)}transformBoundsFromLocalToParent(e){return e.transform(this._transform.getMatrix())}transformBoundsFromParentToLocal(e){return e.transform(this._transform.getInverse())}getLocalToGlobalMatrix(){let e=this;const t=[];for(;e;)t.push(e._transform.getMatrix()),e=e._parents[0];const i=Mh.identity();for(let n=t.length-1;n>=0;n--)i.multiplyMatrix(t[n]);return i}getUniqueTransform(){return new xp(this.getLocalToGlobalMatrix())}getGlobalToLocalMatrix(){return this.getLocalToGlobalMatrix().invert()}localToGlobalPoint(e){let t=this;const i=e.copy();for(;t;)t._transform.getMatrix().multiplyVector2(i),t=t._parents[0];return i}globalToLocalPoint(e){let t=this;const i=[];for(;t;)i.push(t._transform),t=t._parents[0];const n=e.copy();for(let r=i.length-1;r>=0;r--)i[r].getInverse().multiplyVector2(n);return n}localToGlobalBounds(e){return e.transformed(this.getLocalToGlobalMatrix())}globalToLocalBounds(e){return e.transformed(this.getGlobalToLocalMatrix())}parentToGlobalPoint(e){return this.parents.length?this.parents[0].localToGlobalPoint(e):e}parentToGlobalBounds(e){return this.parents.length?this.parents[0].localToGlobalBounds(e):e}globalToParentPoint(e){return this.parents.length?this.parents[0].globalToLocalPoint(e):e}globalToParentBounds(e){return this.parents.length?this.parents[0].globalToLocalBounds(e):e}getGlobalBounds(){return this.parentToGlobalBounds(this.getBounds())}get globalBounds(){return this.getGlobalBounds()}boundsOf(e){return this.globalToLocalBounds(e.getGlobalBounds())}boundsTo(e){return e.globalToLocalBounds(this.getGlobalBounds())}attachDrawable(e){return this._drawables.push(e),this}detachDrawable(e){const t=_.indexOf(this._drawables,e);return this._drawables.splice(t,1),this}mutate(e){if(!e)return this;const t=this._mutatorKeys;for(let i=0;i<t.length;i++){const n=t[i];if(void 0!==e[n]){const t=Object.getOwnPropertyDescriptor(hv.prototype,n);t&&"function"==typeof t.value?this[n](e[n]):this[n]=e[n]}}return this.initializePhetioObject(uv,e),this}initializePhetioObject(e,t){const i=this.isPhetioInstrumented();super.initializePhetioObject(e,t),Lm.PHET_IO_ENABLED&&!i&&this.isPhetioInstrumented()&&(this._visibleProperty.initializePhetio(this,"visibleProperty",()=>new gy(this.visible,No({phetioReadOnly:this.phetioReadOnly,tandem:this.tandem.createTandem("visibleProperty"),phetioDocumentation:"Controls whether the Node will be visible (and interactive)."},t.visiblePropertyOptions))),this._enabledProperty.initializePhetio(this,rv,()=>new JE(this.enabled,No({phetioReadOnly:this.phetioReadOnly,phetioDocumentation:'Sets whether the node is enabled. This will set whether input is enabled for this Node and most often children as well. It will also control and toggle the "disabled look" of the node.',tandem:this.tandem.createTandem(rv)},t.enabledPropertyOptions))),this._inputEnabledProperty.initializePhetio(this,"inputEnabledProperty",()=>new ty(this.inputEnabled,No({phetioReadOnly:this.phetioReadOnly,tandem:this.tandem.createTandem("inputEnabledProperty"),phetioValueType:Ff,phetioFeatured:!0,phetioDocumentation:"Sets whether the element will have input enabled, and hence be interactive."},t.inputEnabledPropertyOptions))))}setVoicingVisible(e){this.voicingVisibleProperty.value!==e&&(this.voicingVisibleProperty.value=e)}set voicingVisible(e){this.setVoicingVisible(e)}get voicingVisible(){return this.isVoicingVisible()}isVoicingVisible(){return this.voicingVisibleProperty.value}getDebugHTMLExtras(){return""}inspect(){localStorage.scenerySnapshot=JSON.stringify({type:"Subtree",rootNodeId:this.id,nodes:MT(this)})}toString(e,t){return`${this.constructor.name}#${this.id}`}auditInstanceSubtreeForDisplay(e){0}onBoundsListenersAddedOrRemoved(e){this.changeBoundsEventCount(e),this._boundsEventSelfCount+=e}dispose(){this.disposeParallelDOM(),this.removeAllChildren(),this.detach(),this._inputEnabledProperty.dispose(),this._enabledProperty.dispose(),this._pickableProperty.dispose(),this._visibleProperty.dispose(),super.dispose()}disposeSubtree(){if(!this.isDisposed){const e=this.children;this.dispose();for(let t=0;t<e.length;t++)e[t].disposeSubtree()}}static defaultTrailPredicate(e){return 0===e._parents.length}static defaultLeafTrailPredicate(e){return 0===e._children.length}}_defineProperty(hv,"REQUIRES_BOUNDS_OPTION_KEYS",sv),_defineProperty(hv,"DEFAULT_NODE_OPTIONS",ov),hv.prototype._mutatorKeys=KE.concat(av),hv.prototype.drawableMarkFlags=[],Lg.register("Node",hv),hv.NodeIO=new el("NodeIO",{valueType:hv,documentation:"The base type for graphical and potentially interactive objects.",metadataDefaults:{phetioState:!1}});const uv={phetioType:hv.NodeIO,phetioState:!1},cv=hv;class dv{constructor(e){this.node=e,this.selfPruned=!1,this.selfInclusive=!1,this.subtreePrunable=!0,this.subtreePickableCount=0,this.mouseInclusiveBounds=Zl.NOTHING.copy(),this.mouseExclusiveBounds=Zl.NOTHING.copy(),this.touchInclusiveBounds=Zl.NOTHING.copy(),this.touchExclusiveBounds=Zl.NOTHING.copy(),this.mouseInclusiveDirty=!0,this.mouseExclusiveDirty=!0,this.touchInclusiveDirty=!0,this.touchExclusiveDirty=!0,this.scratchVector=new al(0,0)}hitTest(e,t,i){const n=this.selfInclusive;return t?n?this.validateMouseInclusive():this.validateMouseExclusive():i?n?this.validateTouchInclusive():this.validateTouchExclusive():this.node.validateBounds(),this.recursiveHitTest(e,t,i,!1)}recursiveHitTest(e,t,i,n){if(n=n||this.selfInclusive,this.selfPruned||!n&&this.subtreePrunable)return null;let r;if(r=t?n?this.mouseInclusiveBounds:this.mouseExclusiveBounds:i?n?this.touchInclusiveBounds:this.touchExclusiveBounds:this.node.bounds,!r.containsPoint(e))return null;const s=this.node._transform.getInverse().multiplyVector2(this.scratchVector.set(e)),a=this.node.clipArea;if(null!==a&&!a.containsPoint(s))return null;for(let o=this.node._children.length-1;o>=0;o--){const e=this.node._children[o]._picker.recursiveHitTest(s,t,i,n);if(e)return e.addAncestor(this.node,o)}return t&&this.node._mouseArea?this.node._mouseArea.containsPoint(s)?new Dv(this.node):null:i&&this.node._touchArea?this.node._touchArea.containsPoint(s)?new Dv(this.node):null:this.node.selfBounds.containsPoint(s)&&this.node.containsPointSelf(s)?new Dv(this.node):null}invalidate(e,t){let i=!!t||!this.mouseInclusiveDirty||!this.touchInclusiveDirty;if(this.mouseInclusiveDirty=!0,this.touchInclusiveDirty=!0,e&&(i=i||!this.mouseExclusiveDirty||!this.touchExclusiveDirty,this.mouseExclusiveDirty=!0,this.touchExclusiveDirty=!0),!this.selfPruned&&i){const t=this.node._parents;for(let i=0;i<t.length;i++)t[i]._picker.invalidate(e||this.selfInclusive,!1)}}validateMouseInclusive(){if(!this.mouseInclusiveDirty)return;this.mouseInclusiveBounds.set(this.node.selfBounds);const e=this.node._children;for(let t=0;t<e.length;t++){const i=e[t]._picker;i.selfPruned||(i.validateMouseInclusive(),this.mouseInclusiveBounds.includeBounds(i.mouseInclusiveBounds))}this.applyAreasAndTransform(this.mouseInclusiveBounds,this.node._mouseArea),this.mouseInclusiveDirty=!1}validateMouseExclusive(){if(!this.mouseExclusiveDirty)return;this.mouseExclusiveBounds.set(this.node.selfBounds);const e=this.node._children;for(let t=0;t<e.length;t++){const i=e[t]._picker;i.subtreePrunable||(i.selfInclusive?(i.validateMouseInclusive(),this.mouseExclusiveBounds.includeBounds(i.mouseInclusiveBounds)):(i.validateMouseExclusive(),this.mouseExclusiveBounds.includeBounds(i.mouseExclusiveBounds)))}this.applyAreasAndTransform(this.mouseExclusiveBounds,this.node._mouseArea),this.mouseExclusiveDirty=!1}validateTouchInclusive(){if(!this.touchInclusiveDirty)return;this.touchInclusiveBounds.set(this.node.selfBounds);const e=this.node._children;for(let t=0;t<e.length;t++){const i=e[t]._picker;i.selfPruned||(i.validateTouchInclusive(),this.touchInclusiveBounds.includeBounds(i.touchInclusiveBounds))}this.applyAreasAndTransform(this.touchInclusiveBounds,this.node._touchArea),this.touchInclusiveDirty=!1}validateTouchExclusive(){if(!this.touchExclusiveDirty)return;this.touchExclusiveBounds.set(this.node.selfBounds);const e=this.node._children;for(let t=0;t<e.length;t++){const i=e[t]._picker;i.subtreePrunable||(i.selfInclusive?(i.validateTouchInclusive(),this.touchExclusiveBounds.includeBounds(i.touchInclusiveBounds)):(i.validateTouchExclusive(),this.touchExclusiveBounds.includeBounds(i.touchExclusiveBounds)))}this.applyAreasAndTransform(this.touchExclusiveBounds,this.node._touchArea),this.touchExclusiveDirty=!1}applyAreasAndTransform(e,t){t&&e.includeBounds(t instanceof Zl?t:t.bounds);const i=this.node.clipArea;if(i){const t=i.bounds;e.minX=Math.max(e.minX,t.minX),e.minY=Math.max(e.minY,t.minY),e.maxX=Math.min(e.maxX,t.maxX),e.maxY=Math.min(e.maxY,t.maxY)}this.node.transformBoundsFromLocalToParent(e)}onInsertChild(e){if(!e._picker.selfPruned){const t=e._picker.subtreePickableCount>0;t&&this.changePickableCount(1),this.invalidate(t,!0)}}onRemoveChild(e){if(!e._picker.selfPruned){const t=e._picker.subtreePickableCount>0;t&&this.changePickableCount(-1),this.invalidate(t,!0)}}onAddInputListener(){this.checkSelfInclusive(),this.checkSubtreePrunable(),this.changePickableCount(1)}onRemoveInputListener(){this.checkSelfInclusive(),this.checkSubtreePrunable(),this.changePickableCount(-1)}onPickableChange(e,t){this.checkSelfPruned(),this.checkSelfInclusive(),this.checkSubtreePrunable();const i=(!0===e?-1:0)+(!0===t?1:0);i&&this.changePickableCount(i)}onVisibilityChange(){this.checkSelfPruned(),this.checkSubtreePrunable()}onMouseAreaChange(){this.invalidate(!0)}onTouchAreaChange(){this.invalidate(!0)}onTransformChange(){this.invalidate(!0)}onSelfBoundsDirty(){this.invalidate(!0)}onClipAreaChange(){this.invalidate(!0)}checkSelfPruned(){const e=!1===this.node.pickableProperty.value||!this.node.isVisible();if(this.selfPruned!==e){this.selfPruned=e;const t=this.node._parents;for(let e=0;e<t.length;e++){const i=t[e]._picker;this.subtreePickableCount>0?(i.invalidate(!0,!0),i.changePickableCount(this.selfPruned?-1:1)):i.invalidate(!1,!0)}}}checkSelfInclusive(){const e=!0===this.node.pickableProperty.value||this.node._inputListeners.length>0;this.selfInclusive!==e&&(this.selfInclusive=e,this.invalidate(!0,!0))}checkSubtreePrunable(){const e=!1===this.node.pickableProperty.value||!this.node.isVisible()||!0!==this.node.pickableProperty.value&&0===this.subtreePickableCount;this.subtreePrunable!==e&&(this.subtreePrunable=e,this.invalidate(!0,!0))}changePickableCount(e){if(0===e)return;const t=0===this.subtreePickableCount;this.subtreePickableCount+=e;const i=0===this.subtreePickableCount;if(this.checkSubtreePrunable(),!this.selfPruned&&t!==i){const e=this.node._parents.length;for(let i=0;i<e;i++)this.node._parents[i]._picker.changePickableCount(t?1:-1)}}audit(){0}}Lg.register("Picker",dv);const pv=[af.bitmaskCanvas,af.bitmaskSVG,af.bitmaskDOM,af.bitmaskWebGL,af.bitmaskSingleCanvas,af.bitmaskSingleSVG,af.bitmaskNotPainted,af.bitmaskBoundsValid,af.bitmaskNoPDOM,af.bitmaskLacksCanvas,af.bitmaskLacksSVG,af.bitmaskLacksDOM,af.bitmaskLacksWebGL],mv={};pv.forEach((e,t)=>{mv[e]=t});const gv=pv.length;let fv=0;for(let e=0;e<gv;e++)fv|=pv[e];class yv{constructor(e){this.node=e,this._counts=new Int16Array(gv),this.bitmask=fv,this.selfBitmask=yv.summaryBitmaskForNodeSelf(e),this.summaryChange(this.bitmask,this.selfBitmask);const t=this.selfChange.bind(this);this.node.filterChangeEmitter.addListener(t),this.node.clipAreaProperty.lazyLink(t),this.node.rendererSummaryRefreshEmitter.addListener(t)}summaryChange(e,t){const i=e^t;let n=0,r=0;for(let s=0;s<gv;s++){const e=pv[s],a=mv[e];e&i&&(e&t?(this._counts[a]--,0===this._counts[a]&&(r|=e)):(this._counts[a]++,1===this._counts[a]&&(n|=e)))}if(n||r){const e=this.bitmask;for(let i=0;i<gv;i++){const e=pv[i];r&e&&(this.bitmask|=e),n&e&&(this.bitmask^=e)}this.node.instanceRefreshEmitter.emit(),this.node.onSummaryChange(e,this.bitmask);const t=this.node._parents.length;for(let i=0;i<t;i++)this.node._parents[i]._rendererSummary.summaryChange(n,r)}}selfChange(){const e=this.selfBitmask,t=yv.summaryBitmaskForNodeSelf(this.node);e!==t&&(this.summaryChange(e,t),this.selfBitmask=t)}computeBitmask(){let e=0;for(let t=0;t<gv;t++)0===this._counts[t]&&(e|=pv[t]);return e}isSubtreeFullyCompatible(e){return!!(e&this.bitmask)}isSubtreeContainingCompatible(e){return!(e<<af.bitmaskLacksShift&this.bitmask)}isSingleCanvasSupported(){return!!(af.bitmaskSingleCanvas&this.bitmask)}isSingleSVGSupported(){return!!(af.bitmaskSingleSVG&this.bitmask)}isNotPainted(){return!!(af.bitmaskNotPainted&this.bitmask)}hasNoPDOM(){return!!(af.bitmaskNoPDOM&this.bitmask)}areBoundsValid(){return!!(af.bitmaskBoundsValid&this.bitmask)}isSubtreeRenderedExclusivelySVG(e){if(!this.isSingleSVGSupported())return!1;for(let t=0;t<af.numActiveRenderers;t++){const i=af.bitmaskOrder(e,t);if(af.bitmaskSVG&i)return!0;if(this.isSubtreeContainingCompatible(i))return!1}return!1}isSubtreeRenderedExclusivelyCanvas(e){if(!this.isSingleCanvasSupported())return!1;for(let t=0;t<af.numActiveRenderers;t++){const i=af.bitmaskOrder(e,t);if(af.bitmaskCanvas&i)return!0;if(this.isSubtreeContainingCompatible(i))return!1}return!1}audit(){0}toString(){let e=yv.bitmaskToString(this.bitmask);for(let t=0;t<gv;t++){const i=pv[t],n=this._counts[t];0!==n&&(e+=` ${yv.bitToString(i)}:${n}`)}return e}static summaryBitmaskForNodeSelf(e){let t=e._rendererBitmask;e.isPainted()?t|=(e._rendererBitmask&af.bitmaskCurrentRendererArea^af.bitmaskCurrentRendererArea)<<af.bitmaskLacksShift:t|=af.bitmaskCurrentRendererArea<<af.bitmaskLacksShift;const i=e._cssTransform||e._layerSplit,n=e._renderer;return i||!af.isSVG(e._rendererBitmask)||n&&!af.isSVG(n)||(t|=af.bitmaskSingleSVG),i||!af.isCanvas(e._rendererBitmask)||n&&!af.isCanvas(n)||(t|=af.bitmaskSingleCanvas),e.isPainted()||(t|=af.bitmaskNotPainted),e.areSelfBoundsValid()&&(t|=af.bitmaskBoundsValid),e.hasPDOMContent||e.hasPDOMOrder()||(t|=af.bitmaskNoPDOM),t}static bitToString(e){return e===af.bitmaskCanvas?"Canvas":e===af.bitmaskSVG?"SVG":e===af.bitmaskDOM?"DOM":e===af.bitmaskWebGL?"WebGL":e===af.bitmaskLacksCanvas?"(-Canvas)":e===af.bitmaskLacksSVG?"(-SVG)":e===af.bitmaskLacksDOM?"(-DOM)":e===af.bitmaskLacksWebGL?"(-WebGL)":e===af.bitmaskSingleCanvas?"SingleCanvas":e===af.bitmaskSingleSVG?"SingleSVG":e===af.bitmaskNotPainted?"NotPainted":e===af.bitmaskBoundsValid?"BoundsValid":e===af.bitmaskNoPDOM?"NotAccessible":"?"}static bitmaskToString(e){let t="";for(let i=0;i<gv;i++){const n=pv[i];e&n&&(t+=yv.bitToString(n)+" ")}return t}}yv.bitmaskAll=fv,Lg.register("RendererSummary",yv);const Ev=yv;class vv{constructor(e){this.node=e,this.pdomDisplays=[]}onAddChild(e){e._pdomDisplaysInfo.canHavePDOMDisplays()&&e._pdomDisplaysInfo.addPDOMDisplays(this.pdomDisplays)}onRemoveChild(e){e._pdomDisplaysInfo.canHavePDOMDisplays()&&e._pdomDisplaysInfo.removePDOMDisplays(this.pdomDisplays)}onSummaryChange(e,t){if(this.node.visible&&this.node.pdomVisible){const i=!(af.bitmaskNoPDOM&e),n=!(af.bitmaskNoPDOM&t);n&&!i&&this.addAllPDOMDisplays(),!n&&i&&this.removeAllPDOMDisplays()}}onVisibilityChange(e){this.node.pdomVisible&&!this.node._rendererSummary.hasNoPDOM()&&(e?this.addAllPDOMDisplays():this.removeAllPDOMDisplays())}onPDOMVisibilityChange(e){this.node.visible&&!this.node._rendererSummary.hasNoPDOM()&&(e?this.addAllPDOMDisplays():this.removeAllPDOMDisplays())}onAddedRootedDisplay(e){e._accessible&&this.canHavePDOMDisplays()&&this.addPDOMDisplays([e])}onRemovedRootedDisplay(e){e._accessible&&this.canHavePDOMDisplays()&&this.removePDOMDisplays([e])}canHavePDOMDisplays(){return this.node.visible&&this.node.pdomVisible&&!this.node._rendererSummary.hasNoPDOM()}addAllPDOMDisplays(){let e;const t=[];for(e=0;e<this.node._parents.length;e++)Array.prototype.push.apply(t,this.node._parents[e]._pdomDisplaysInfo.pdomDisplays);for(e=0;e<this.node._rootedDisplays.length;e++){const i=this.node._rootedDisplays[e];i._accessible&&t.push(i)}this.addPDOMDisplays(t)}removeAllPDOMDisplays(){this.removePDOMDisplays(this.pdomDisplays.slice())}addPDOMDisplays(e){if(0!==e.length){Array.prototype.push.apply(this.pdomDisplays,e);for(let t=0;t<this.node._children.length;t++){this.node._children[t]._pdomDisplaysInfo.canHavePDOMDisplays()&&this.node._children[t]._pdomDisplaysInfo.addPDOMDisplays(e)}this.node.pdomDisplaysEmitter.emit()}}removePDOMDisplays(e){if(0!==e.length){let t;for(t=e.length-1;t>=0;t--){this.pdomDisplays.lastIndexOf(e[t]);this.pdomDisplays.splice(t,1)}for(t=0;t<this.node._children.length;t++){const i=this.node._children[t];i._pdomDisplaysInfo.canHavePDOMDisplays()&&!i._isGettingRemovedFromParent&&i._pdomDisplaysInfo.removePDOMDisplays(e)}this.node.pdomDisplaysEmitter.emit()}}}function Av(e){const t=new Map;return i=>{if(t.has(i))return t.get(i);{const n=e(i);return t.set(i,n),n}}}Lg.register("PDOMDisplaysInfo",vv),wo.register("memoize",Av);const bv=Av,Sv=["preferredWidth","minimumWidth","localPreferredWidth","localMinimumWidth","widthSizable"],_v=bv(e=>{const t=nA("WidthSizable",Sv,class extends e{constructor(){super(...arguments),_defineProperty(this,"preferredWidthProperty",new mg(null)),_defineProperty(this,"minimumWidthProperty",new mg(null)),_defineProperty(this,"localPreferredWidthProperty",new mg(null)),_defineProperty(this,"localMinimumWidthProperty",new mg(null)),_defineProperty(this,"isWidthResizableProperty",new mg(!0)),_defineProperty(this,"_preferredSizeChanging",!1),_defineProperty(this,"_minimumSizeChanging",!1),_defineProperty(this,"_preferredSizeChangeAttemptDuringLock",!1),_defineProperty(this,"_minimumSizeChangeAttemptDuringLock",!1),this._updatePreferredWidthListener=this._updatePreferredWidth.bind(this),this._updateLocalPreferredWidthListener=this._updateLocalPreferredWidth.bind(this),this._updateMinimumWidthListener=this._updateMinimumWidth.bind(this),this._updateLocalMinimumWidthListener=this._updateLocalMinimumWidth.bind(this),this.preferredWidthProperty.lazyLink(this._updateLocalPreferredWidthListener),this.localPreferredWidthProperty.lazyLink(this._updatePreferredWidthListener),this.minimumWidthProperty.lazyLink(this._updateLocalMinimumWidthListener),this.localMinimumWidthProperty.lazyLink(this._updateMinimumWidthListener),this.transformEmitter.addListener(this._updateLocalPreferredWidthListener),this.transformEmitter.addListener(this._updateMinimumWidthListener)}get preferredWidth(){return this.preferredWidthProperty.value}set preferredWidth(e){this.preferredWidthProperty.value=e}get localPreferredWidth(){return this.localPreferredWidthProperty.value}set localPreferredWidth(e){this.localPreferredWidthProperty.value=e}get minimumWidth(){return this.minimumWidthProperty.value}set minimumWidth(e){this.minimumWidthProperty.value=e}get localMinimumWidth(){return this.localMinimumWidthProperty.value}set localMinimumWidth(e){this.localMinimumWidthProperty.value=e}get widthSizable(){return this.isWidthResizableProperty.value}set widthSizable(e){this.isWidthResizableProperty.value=e}get extendsWidthSizable(){return!0}validateLocalPreferredWidth(){0}_calculateLocalPreferredWidth(){return this.matrix.isAligned()&&null!==this.preferredWidth?Math.abs(this.transform.inverseDeltaX(this.preferredWidth)):null}_onReentrantPreferredWidth(){this._updateLocalPreferredWidthListener()}_updateLocalPreferredWidth(){if(this._preferredSizeChanging)this._preferredSizeChangeAttemptDuringLock=!0;else{this._preferredSizeChanging=!0;do{this._preferredSizeChangeAttemptDuringLock=!1;const e=this._calculateLocalPreferredWidth();(null===this.localPreferredWidthProperty.value||null===e||Math.abs(this.localPreferredWidthProperty.value-e)>1e-9)&&(this.localPreferredWidthProperty.value=e)}while(this._preferredSizeChangeAttemptDuringLock);this._preferredSizeChanging=!1}}_calculatePreferredWidth(){return this.matrix.isAligned()&&null!==this.localPreferredWidth?Math.abs(this.transform.transformDeltaX(this.localPreferredWidth)):null}_updatePreferredWidth(){if(this._preferredSizeChanging)this._preferredSizeChangeAttemptDuringLock=!0;else{this._preferredSizeChanging=!0,this._preferredSizeChangeAttemptDuringLock=!1;const e=this._calculatePreferredWidth();(null===this.preferredWidthProperty.value||null===e||Math.abs(this.preferredWidthProperty.value-e)>1e-9)&&(this.preferredWidthProperty.value=e),this._preferredSizeChanging=!1,this._preferredSizeChangeAttemptDuringLock&&this._onReentrantPreferredWidth()}}_calculateLocalMinimumWidth(){return this.matrix.isAligned()&&null!==this.minimumWidth?Math.abs(this.transform.inverseDeltaX(this.minimumWidth)):null}_onReentrantLocalMinimumWidth(){this._updateMinimumWidthListener()}_updateLocalMinimumWidth(){if(this._minimumSizeChanging)this._minimumSizeChangeAttemptDuringLock=!0;else{this._minimumSizeChanging=!0;const e=this._calculateLocalMinimumWidth();this._minimumSizeChangeAttemptDuringLock=!1,(null===this.localMinimumWidthProperty.value||null===e||Math.abs(this.localMinimumWidthProperty.value-e)>1e-9)&&(this.localMinimumWidthProperty.value=e),this._minimumSizeChanging=!1,this._minimumSizeChangeAttemptDuringLock&&this._onReentrantLocalMinimumWidth()}}_calculateMinimumWidth(){return this.matrix.isAligned()&&null!==this.localMinimumWidth?Math.abs(this.transform.transformDeltaX(this.localMinimumWidth)):null}_updateMinimumWidth(){if(this._minimumSizeChanging)this._minimumSizeChangeAttemptDuringLock=!0;else{this._minimumSizeChanging=!0;do{this._minimumSizeChangeAttemptDuringLock=!1;const e=this._calculateMinimumWidth();(null===this.minimumWidthProperty.value||null===e||Math.abs(this.minimumWidthProperty.value-e)>1e-9)&&(this.minimumWidthProperty.value=e)}while(this._minimumSizeChangeAttemptDuringLock);this._minimumSizeChanging=!1}}mutate(e){return super.mutate(e)}});if(e.prototype._mutatorKeys){const i=e.prototype._mutatorKeys,n=Sv,r=i.indexOf(sv[0]);t.prototype._mutatorKeys=[...i.slice(0,r),...n,...i.slice(r)]}return t}),xv=e=>e.widthSizable,wv=e=>e.extendsWidthSizable;Lg.register("WidthSizable",_v);const Tv=_v,Pv=["preferredHeight","minimumHeight","localPreferredHeight","localMinimumHeight","heightSizable"],Cv=bv(e=>{const t=nA("HeightSizable",Pv,class extends e{constructor(){super(...arguments),_defineProperty(this,"preferredHeightProperty",new mg(null)),_defineProperty(this,"minimumHeightProperty",new mg(null)),_defineProperty(this,"localPreferredHeightProperty",new mg(null)),_defineProperty(this,"localMinimumHeightProperty",new mg(null)),_defineProperty(this,"isHeightResizableProperty",new mg(!0)),_defineProperty(this,"_preferredSizeChanging",!1),_defineProperty(this,"_minimumSizeChanging",!1),_defineProperty(this,"_preferredSizeChangeAttemptDuringLock",!1),_defineProperty(this,"_minimumSizeChangeAttemptDuringLock",!1),this._updatePreferredHeightListener=this._updatePreferredHeight.bind(this),this._updateLocalPreferredHeightListener=this._updateLocalPreferredHeight.bind(this),this._updateMinimumHeightListener=this._updateMinimumHeight.bind(this),this._updateLocalMinimumHeightListener=this._updateLocalMinimumHeight.bind(this),this.preferredHeightProperty.lazyLink(this._updateLocalPreferredHeightListener),this.localPreferredHeightProperty.lazyLink(this._updatePreferredHeightListener),this.minimumHeightProperty.lazyLink(this._updateLocalMinimumHeightListener),this.localMinimumHeightProperty.lazyLink(this._updateMinimumHeightListener),this.transformEmitter.addListener(this._updateLocalPreferredHeightListener),this.transformEmitter.addListener(this._updateMinimumHeightListener)}get preferredHeight(){return this.preferredHeightProperty.value}set preferredHeight(e){this.preferredHeightProperty.value=e}get localPreferredHeight(){return this.localPreferredHeightProperty.value}set localPreferredHeight(e){this.localPreferredHeightProperty.value=e}get minimumHeight(){return this.minimumHeightProperty.value}set minimumHeight(e){this.minimumHeightProperty.value=e}get localMinimumHeight(){return this.localMinimumHeightProperty.value}set localMinimumHeight(e){this.localMinimumHeightProperty.value=e}get heightSizable(){return this.isHeightResizableProperty.value}set heightSizable(e){this.isHeightResizableProperty.value=e}get extendsHeightSizable(){return!0}validateLocalPreferredHeight(){0}_calculateLocalPreferredHeight(){return this.matrix.isAligned()&&null!==this.preferredHeight?Math.abs(this.transform.inverseDeltaY(this.preferredHeight)):null}_onReentrantPreferredHeight(){this._updateLocalPreferredHeightListener()}_updateLocalPreferredHeight(){if(this._preferredSizeChanging)this._preferredSizeChangeAttemptDuringLock=!0;else{this._preferredSizeChanging=!0;do{this._preferredSizeChangeAttemptDuringLock=!1;const e=this._calculateLocalPreferredHeight();(null===this.localPreferredHeightProperty.value||null===e||Math.abs(this.localPreferredHeightProperty.value-e)>1e-9)&&(this.localPreferredHeightProperty.value=e)}while(this._preferredSizeChangeAttemptDuringLock);this._preferredSizeChanging=!1}}_calculatePreferredHeight(){return this.matrix.isAligned()&&null!==this.localPreferredHeight?Math.abs(this.transform.transformDeltaY(this.localPreferredHeight)):null}_updatePreferredHeight(){if(this._preferredSizeChanging)this._preferredSizeChangeAttemptDuringLock=!0;else{this._preferredSizeChanging=!0,this._preferredSizeChangeAttemptDuringLock=!1;const e=this._calculatePreferredHeight();(null===this.preferredHeightProperty.value||null===e||Math.abs(this.preferredHeightProperty.value-e)>1e-9)&&(this.preferredHeightProperty.value=e),this._preferredSizeChanging=!1,this._preferredSizeChangeAttemptDuringLock&&this._onReentrantPreferredHeight()}}_calculateLocalMinimumHeight(){return this.matrix.isAligned()&&null!==this.minimumHeight?Math.abs(this.transform.inverseDeltaY(this.minimumHeight)):null}_onReentrantLocalMinimumHeight(){this._updateMinimumHeight()}_updateLocalMinimumHeight(){if(this._minimumSizeChanging)this._minimumSizeChangeAttemptDuringLock=!0;else{this._minimumSizeChanging=!0,this._minimumSizeChangeAttemptDuringLock=!1;const e=this._calculateLocalMinimumHeight();(null===this.localMinimumHeightProperty.value||null===e||Math.abs(this.localMinimumHeightProperty.value-e)>1e-9)&&(this.localMinimumHeightProperty.value=e),this._minimumSizeChanging=!1,this._minimumSizeChangeAttemptDuringLock&&this._onReentrantLocalMinimumHeight()}}_calculateMinimumHeight(){return this.matrix.isAligned()&&null!==this.localMinimumHeight?Math.abs(this.transform.transformDeltaY(this.localMinimumHeight)):null}_updateMinimumHeight(){if(!this._minimumSizeChanging){this._minimumSizeChanging=!0;do{this._minimumSizeChangeAttemptDuringLock=!1;const e=this._calculateMinimumHeight();(null===this.minimumHeightProperty.value||null===e||Math.abs(this.minimumHeightProperty.value-e)>1e-9)&&(this.minimumHeightProperty.value=e)}while(this._minimumSizeChangeAttemptDuringLock);this._minimumSizeChanging=!1}}mutate(e){return super.mutate(e)}});if(e.prototype._mutatorKeys){const i=e.prototype._mutatorKeys,n=Pv,r=i.indexOf(sv[0]);t.prototype._mutatorKeys=[...i.slice(0,r),...n,...i.slice(r)]}return t}),Vv=e=>e.heightSizable,Rv=e=>e.extendsHeightSizable;Lg.register("HeightSizable",Cv);const Nv=Cv,Mv=["preferredSize","minimumSize","localPreferredSize","localMinimumSize","sizable"],kv=["preferredSize","minimumSize","localPreferredSize","localMinimumSize","sizable",...Sv,...Pv],Lv=bv(e=>{const t=Tv(Nv(e)),i=nA("Sizable",Mv,class extends t{constructor(){super(...arguments),this.preferredWidthProperty.lazyLink(this._updateLocalPreferredHeightListener),this.preferredHeightProperty.lazyLink(this._updateLocalPreferredWidthListener),this.localPreferredWidthProperty.lazyLink(this._updatePreferredHeightListener),this.localPreferredHeightProperty.lazyLink(this._updatePreferredWidthListener),this.minimumWidthProperty.lazyLink(this._updateLocalMinimumHeightListener),this.minimumHeightProperty.lazyLink(this._updateLocalMinimumWidthListener),this.localMinimumWidthProperty.lazyLink(this._updateMinimumHeightListener),this.localMinimumHeightProperty.lazyLink(this._updateMinimumWidthListener)}get preferredSize(){return null===this.preferredWidth||null===this.preferredHeight?null:new My(this.preferredWidth,this.preferredHeight)}set preferredSize(e){this.preferredWidth=null===e?null:e.width,this.preferredHeight=null===e?null:e.height}get localPreferredSize(){return null===this.localPreferredWidth||null===this.localPreferredHeight?null:new My(this.localPreferredWidth,this.localPreferredHeight)}set localPreferredSize(e){this.localPreferredWidth=null===e?null:e.width,this.localPreferredHeight=null===e?null:e.height}get minimumSize(){return null===this.minimumWidth||null===this.minimumHeight?null:new My(this.minimumWidth,this.minimumHeight)}set minimumSize(e){this.minimumWidth=null===e?null:e.width,this.minimumHeight=null===e?null:e.height}get localMinimumSize(){return null===this.localMinimumWidth||null===this.localMinimumHeight?null:new My(this.localMinimumWidth,this.localMinimumHeight)}set localMinimumSize(e){this.localMinimumWidth=null===e?null:e.width,this.localMinimumHeight=null===e?null:e.height}get sizable(){return this.widthSizable}set sizable(e){this.widthSizable=e,this.heightSizable=e}get extendsSizable(){return!0}validateLocalPreferredSize(){0}mutate(e){return Ko(e,["preferredSize"],["preferredWidth","preferredHeight"]),Ko(e,["localPreferredSize"],["localPreferredWidth","localPreferredHeight"]),Ko(e,["minimumSize"],["minimumWidth","minimumHeight"]),Ko(e,["localMinimumSize"],["localMinimumWidth","localMinimumHeight"]),Ko(e,["sizable"],["widthSizable","heightSizable"]),super.mutate(e)}_calculateLocalPreferredWidth(){if(this.matrix.isAxisAligned())if(this.matrix.isAligned()){if(null!==this.preferredWidth)return Math.abs(this.transform.inverseDeltaX(this.preferredWidth))}else if(null!==this.preferredHeight)return Math.abs(this.transform.getInverse().m01()*this.preferredHeight);return null}_calculateLocalPreferredHeight(){if(this.matrix.isAxisAligned())if(this.matrix.isAligned()){if(null!==this.preferredHeight)return Math.abs(this.transform.inverseDeltaY(this.preferredHeight))}else if(null!==this.preferredWidth)return Math.abs(this.transform.getInverse().m10()*this.preferredWidth);return null}_calculatePreferredWidth(){if(this.matrix.isAxisAligned())if(this.matrix.isAligned()){if(null!==this.localPreferredWidth)return Math.abs(this.transform.transformDeltaX(this.localPreferredWidth))}else if(null!==this.localPreferredHeight)return Math.abs(this.transform.matrix.m01()*this.localPreferredHeight);return null}_calculatePreferredHeight(){if(this.matrix.isAxisAligned())if(this.matrix.isAligned()){if(null!==this.localPreferredHeight)return Math.abs(this.transform.transformDeltaY(this.localPreferredHeight))}else if(null!==this.localPreferredWidth)return Math.abs(this.transform.matrix.m10()*this.localPreferredWidth);return null}_onReentrantLocalMinimumWidth(){this._updateMinimumWidthListener(),this._updateMinimumHeightListener()}_onReentrantLocalMinimumHeight(){this._updateMinimumWidthListener(),this._updateMinimumHeightListener()}_onReentrantPreferredWidth(){this._updateLocalPreferredWidthListener(),this._updateLocalPreferredHeightListener()}_onReentrantPreferredHeight(){this._updateLocalPreferredWidthListener(),this._updateLocalPreferredHeightListener()}_calculateLocalMinimumWidth(){if(this.matrix.isAxisAligned())if(this.matrix.isAligned()){if(null!==this.minimumWidth)return Math.abs(this.transform.inverseDeltaX(this.minimumWidth))}else if(null!==this.minimumHeight)return Math.abs(this.transform.getInverse().m01()*this.minimumHeight);return null}_calculateLocalMinimumHeight(){if(this.matrix.isAxisAligned())if(this.matrix.isAligned()){if(null!==this.minimumHeight)return Math.abs(this.transform.inverseDeltaY(this.minimumHeight))}else if(null!==this.minimumWidth)return Math.abs(this.transform.getInverse().m10()*this.minimumWidth);return null}_calculateMinimumWidth(){if(this.matrix.isAxisAligned())if(this.matrix.isAligned()){if(null!==this.localMinimumWidth)return Math.abs(this.transform.transformDeltaX(this.localMinimumWidth))}else if(null!==this.localMinimumHeight)return Math.abs(this.transform.matrix.m01()*this.localMinimumHeight);return null}_calculateMinimumHeight(){if(this.matrix.isAxisAligned())if(this.matrix.isAligned()){if(null!==this.localMinimumHeight)return Math.abs(this.transform.transformDeltaY(this.localMinimumHeight))}else if(null!==this.localMinimumWidth)return Math.abs(this.transform.matrix.m10()*this.localMinimumWidth);return null}});if(t.prototype._mutatorKeys){const e=t.prototype._mutatorKeys,n=Mv,r=e.indexOf(sv[0]);i.prototype._mutatorKeys=[...e.slice(0,r),...n,...e.slice(r)]}return i});Lg.register("Sizable",Lv);const Iv=Lv,Bv=nE.PDOM_UNIQUE_ID_SEPARATOR;class Dv{constructor(e){if(e instanceof Dv){const t=e;return this.nodes=t.nodes.slice(0),this.length=t.length,this.uniqueId=t.uniqueId,void(this.indices=t.indices.slice(0))}if(this.nodes=[],this.length=0,this.uniqueId="",this.indices=[],e)if(e instanceof cv){const t=e;this.addDescendant(t)}else{const t=e.length;for(let i=0;i<t;i++)this.addDescendant(e[i])}}copy(){return new Dv(this)}isPainted(){return this.lastNode().isPainted()}isValid(){this.reindex();const e=this.indices.length;for(let t=0;t<e;t++)if(this.indices[t]<0)return!1;return!0}isVisible(){let e=this.nodes.length;for(;e--;)if(!this.nodes[e].isVisible())return!1;return!0}isPDOMVisible(){let e=this.nodes.length;for(;e--;)if(!this.nodes[e].isVisible()||!this.nodes[e].isPDOMVisible())return!1;return!0}getOpacity(){let e=1,t=this.nodes.length;for(;t--;)e*=this.nodes[t].getOpacity();return e}isPickable(){return!_.some(this.nodes,e=>!1===e.pickable||!e.visible)&&!!_.some(this.nodes,e=>e._inputListeners.length>0||!0===e.pickableProperty.value)}get(e){return e>=0?this.nodes[e]:this.nodes[this.nodes.length+e]}slice(e,t){return new Dv(this.nodes.slice(e,t))}subtrailTo(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.slice(0,_.indexOf(this.nodes,e)+(t?0:1))}isEmpty(){return 0===this.nodes.length}getMatrixConcatenation(e,t){const i=Mh.identity(),n=this.nodes;for(let r=e;r<t;r++)i.multiplyMatrix(n[r].getMatrix());return i}getMatrix(){return this.getMatrixConcatenation(0,this.nodes.length)}getAncestorMatrix(){return this.getMatrixConcatenation(1,this.nodes.length)}getParentMatrix(){return this.getMatrixConcatenation(0,this.nodes.length-1)}getAncestorParentMatrix(){return this.getMatrixConcatenation(1,this.nodes.length-1)}getTransform(){return new xp(this.getMatrix())}getParentTransform(){return new xp(this.getParentMatrix())}addAncestor(e,t){if(this.nodes.length){const i=this.nodes[0];this.indices.unshift(void 0===t?_.indexOf(e._children,i):t)}return this.nodes.unshift(e),this.length++,this.uniqueId=this.uniqueId?e.id+Bv+this.uniqueId:""+e.id,this}removeAncestor(){return this.nodes.shift(),this.indices.length&&this.indices.shift(),this.length--,this.updateUniqueId(),this}addDescendant(e,t){if(this.nodes.length){const i=this.lastNode();this.indices.push(void 0===t?_.indexOf(i._children,e):t)}return this.nodes.push(e),this.length++,this.uniqueId=this.uniqueId?this.uniqueId+Bv+e.id:""+e.id,this}removeDescendant(){return this.nodes.pop(),this.indices.length&&this.indices.pop(),this.length--,this.updateUniqueId(),this}addDescendantTrail(e){const t=e.length;t&&this.addDescendant(e.nodes[0]);for(let i=1;i<t;i++)this.addDescendant(e.nodes[i],this.indices[i-1])}removeDescendantTrail(e){for(let t=e.length-1;t>=0;t--)this.removeDescendant()}reindex(){const e=this.length;for(let t=1;t<e;t++){const e=this.indices[t-1],i=this.nodes[t-1];i._children[e]!==this.nodes[t]&&(this.indices[t-1]=_.indexOf(i._children,this.nodes[t]))}}setImmutable(){return this}setMutable(){return this}areIndicesValid(){for(let e=1;e<this.length;e++){const t=this.indices[e-1];if(this.nodes[e-1]._children[t]!==this.nodes[e])return!1}return!0}equals(e){if(this.length!==e.length)return!1;for(let t=0;t<this.nodes.length;t++)if(this.nodes[t]!==e.nodes[t])return!1;return!0}upToNode(e){_.indexOf(this.nodes,e);return this.slice(0,_.indexOf(this.nodes,e)+1)}isExtensionOf(e,t){if(this.length<=e.length-(t?1:0))return!1;for(let i=0;i<e.nodes.length;i++)if(this.nodes[i]!==e.nodes[i])return!1;return!0}containsNode(e){return _.includes(this.nodes,e)}getTransformTo(e){return new xp(this.getMatrixTo(e))}getMatrixTo(e){this.reindex(),e.reindex();const t=this.getBranchIndexTo(e);let i,n=Mh.IDENTITY;for(i=this.length-1;i>=t;i--)n=this.nodes[i].getMatrix().timesMatrix(n);for(i=t;i<e.length;i++)n=e.nodes[i].getTransform().getInverse().timesMatrix(n);return n}getBranchIndexTo(e){let t;const i=Math.min(this.length,e.length);for(t=0;t<i&&this.nodes[t]===e.nodes[t];t++);return t}getLastInputEnabledIndex(){let e=-1;for(let t=0;t<this.length&&this.nodes[t].inputEnabled;t++)e=t;return e}getCursorCheckIndex(){return this.getLastInputEnabledIndex()}nodeFromTop(e){return this.nodes[this.length-1-e]}lastNode(){return this.nodeFromTop(0)}rootNode(){return this.nodes[0]}previous(){if(this.nodes.length<=1)return null;const e=this.nodeFromTop(0),t=this.nodeFromTop(1),i=_.indexOf(t._children,e),n=this.nodes.slice(0,this.nodes.length-1);if(0===i)return new Dv(n);for(n.push(t._children[i-1]);0!==n[n.length-1]._children.length;){const e=n[n.length-1];n.push(e._children[e._children.length-1])}return new Dv(n)}previousPainted(){let e=this.previous();for(;e&&!e.isPainted();)e=e.previous();return e}next(){const e=this.nodes.slice(0),t=this.nodeFromTop(0);if(t._children.length>0)return e.push(t._children[0]),new Dv(e);{let t=this.nodes.length-1;for(;t>0;){const i=this.nodes[t],n=this.nodes[t-1];e.pop();const r=_.indexOf(n._children,i);if(r!==n._children.length-1)return e.push(n._children[r+1]),new Dv(e);t--}return null}}nextPainted(){let e=this.next();for(;e&&!e.isPainted();)e=e.next();return e}eachTrailUnder(e){new Ov(this,!0).eachTrailBetween(new Ov(this,!1),e)}compare(e){const t=Math.min(this.nodes.length,e.nodes.length);for(let i=0;i<t;i++)if(this.nodes[i]!==e.nodes[i])return this.nodes[i-1].children.indexOf(this.nodes[i])<e.nodes[i-1].children.indexOf(e.nodes[i])?-1:1;return this.nodes.length<e.nodes.length?-1:this.nodes.length>e.nodes.length?1:0}isBefore(e){return-1===this.compare(e)}isAfter(e){return 1===this.compare(e)}localToGlobalPoint(e){return this.getMatrix().timesVector2(e)}localToGlobalBounds(e){return e.transformed(this.getMatrix())}globalToLocalPoint(e){return this.getTransform().inversePosition2(e)}globalToLocalBounds(e){return this.getTransform().inverseBounds2(e)}parentToGlobalPoint(e){return this.getParentMatrix().timesVector2(e)}parentToGlobalBounds(e){return e.transformed(this.getParentMatrix())}globalToParentPoint(e){return this.getParentTransform().inversePosition2(e)}globalToParentBounds(e){return this.getParentTransform().inverseBounds2(e)}updateUniqueId(){let e="";const t=this.nodes.length;t>0&&(e+=this.nodes[0]._id);for(let i=1;i<t;i++)e+=Bv+this.nodes[i]._id;this.uniqueId=e}getUniqueId(){return this.uniqueId}toString(){return this.reindex(),this.length?`[Trail ${this.indices.join(".")} ${this.getUniqueId()}]`:"Empty Trail"}toPathString(){return _.map(this.nodes,e=>{let t=e.constructor.name;return"Node"===t&&(t="."),t}).join("/")}toDebugString(){return`${this.toString()} ${this.toPathString()}`}static eachPaintedTrailBetween(e,t,i,n,r){Dv.eachTrailBetween(e,t,e=>!!e.isPainted()&&i(e),n,r)}static eachTrailBetween(e,t,i,n,r){const s=new Ov(e?e.copy():new Dv(r),!0),a=t?new Ov(t.copy(),!0):new Ov(new Dv(r),!1);n&&(s.nestedForwards(),a.nestedBackwards(),1===s.compareNested(a))||s.depthFirstUntil(a,e=>!!e.isBefore&&i(e.trail),!1)}static branchIndex(e,t){let i;const n=Math.min(e.length,t.length);for(i=0;i<n&&e.nodes[i]===t.nodes[i];i++);return i}static sharedTrail(e,t){return e.slice(0,Dv.branchIndex(e,t))}static appendAncestorTrailsWithPredicate(e,t,i){const n=t.rootNode();i(n)&&e.push(t.copy());const r=n._parents.length;for(let s=0;s<r;s++){const r=n._parents[s];t.addAncestor(r),Dv.appendAncestorTrailsWithPredicate(e,t,i),t.removeAncestor()}}static appendDescendantTrailsWithPredicate(e,t,i){const n=t.lastNode();i(n)&&e.push(t.copy());const r=n._children.length;for(let s=0;s<r;s++){const r=n._children[s];t.addDescendant(r,s),Dv.appendDescendantTrailsWithPredicate(e,t,i),t.removeDescendant()}}static spannedSubtrees(e,t){}static fromUniqueId(e,t){const i=t.split(Bv).map(e=>Number(e));let n=e;i.shift();const r=[n];for(;i.length>0;){const e=i.shift(),t=(n.pdomOrder||[]).concat(n.children);for(let i=0;i<t.length;i++)if(null!==t[i]&&t[i].id===e){const e=t[i];r.push(e),n=e;break}}return new Dv(r)}}Lg.register("Trail",Dv);class Ov{constructor(e,t){this.trail=e,this.setBefore(t)}isActive(){return!!this.trail}copy(){return new Ov(this.trail.copy(),this.isBefore)}setBefore(e){this.isBefore=e,this.isAfter=!e}getRenderSwappedPointer(){const e=this.isBefore?this.trail.previous():this.trail.next();return null===e?null:new Ov(e,!this.isBefore)}getRenderBeforePointer(){return this.isBefore?this:this.getRenderSwappedPointer()}getRenderAfterPointer(){return this.isAfter?this:this.getRenderSwappedPointer()}compareRender(e){const t=this.getRenderBeforePointer(),i=e.getRenderBeforePointer();return null!==t&&null!==i?t.trail.compare(i.trail):t===i?0:null===t?1:-1}compareNested(e){const t=this,i=e,n=t.trail.compare(i.trail);return 0===n?this.isBefore===e.isBefore?0:this.isBefore?-1:1:t.trail.isExtensionOf(i.trail)?e.isBefore?1:-1:i.trail.isExtensionOf(t.trail)?this.isBefore?-1:1:n}equalsRender(e){return 0===this.compareRender(e)}equalsNested(e){return 0===this.compareNested(e)}hasTrail(){return!!this.trail}nestedForwards(){const e=this;if(this.isBefore){const t=e.trail.lastNode()._children;t.length>0?e.trail.addDescendant(t[0],0):this.setBefore(!1)}else{if(0===e.trail.indices.length)return this.trail=null,null;{const t=e.trail.indices[e.trail.indices.length-1];e.trail.removeDescendant();const i=e.trail.lastNode()._children;i.length>t+1&&(e.trail.addDescendant(i[t+1],t+1),this.setBefore(!0))}}return this}nestedBackwards(){const e=this;if(this.isBefore){if(0===e.trail.indices.length)return this.trail=null,null;{const t=e.trail.indices[e.trail.indices.length-1];e.trail.removeDescendant(),t-1>=0&&(e.trail.addDescendant(e.trail.lastNode()._children[t-1],t-1),this.setBefore(!1))}}else if(e.trail.lastNode()._children.length>0){const t=e.trail.lastNode()._children;e.trail.addDescendant(t[t.length-1],t.length-1)}else this.setBefore(!0);return this}eachNodeBetween(e,t){this.eachTrailBetween(e,e=>t(e.lastNode()))}eachTrailBetween(e,t){this.isBefore&&t(this.trail),this.depthFirstUntil(e,e=>!!e.isBefore&&t(e.trail),!0)}depthFirstUntil(e,t,i){const n=e;this.trail.reindex(),n.trail.reindex();const r=this.copy();r.trail.setMutable();let s=!0;for(;!r.equalsNested(e);){let n=!1;if(s?(i||(n=t(r)),s=!1):n=t(r),n&&r.isBefore){if(r.setBefore(!1),1===r.compareNested(e))break}else r.nestedForwards()}i||t(r)}toString(){return`[${this.isBefore?"before":"after"} ${this.trail.toString().slice(1)}`}static compareNested(e,t,i,n){const r=e.compare(i);return 0===r?t===n?0:t?-1:1:e.isExtensionOf(i)?n?1:-1:i.isExtensionOf(e)?t?-1:1:r}}Lg.register("TrailPointer",Ov);class qv extends mg{constructor(e){super(new Set),_defineProperty(this,"listenedNodeSet",new Set),_defineProperty(this,"updateEmitter",new np),this.node=e,this._nodeUpdateListener=this.update.bind(this),this.addNodeListener(e),this.update()}areValuesEqual(e,t){return e.size===t.size&&_.every([...e],e=>t.has(e))}update(){const e=new Set;!function t(i){i.parents.forEach(i=>{e.add(i),t(i)})}(this.node),e.forEach(e=>{this.listenedNodeSet.has(e)||this.addNodeListener(e)}),this.listenedNodeSet.forEach(t=>{e.has(t)||t===this.node||this.removeNodeListener(t)}),this.value=e,this.updateEmitter.emit()}addNodeListener(e){this.listenedNodeSet.add(e),e.parentAddedEmitter.addListener(this._nodeUpdateListener),e.parentRemovedEmitter.addListener(this._nodeUpdateListener)}removeNodeListener(e){this.listenedNodeSet.delete(e),e.parentAddedEmitter.removeListener(this._nodeUpdateListener),e.parentRemovedEmitter.removeListener(this._nodeUpdateListener)}dispose(){this.listenedNodeSet.forEach(e=>this.removeNodeListener(e)),super.dispose()}}Lg.register("AncestorNodesProperty",qv);class Yv extends mg{constructor(e,t){super([]),_defineProperty(this,"listenedNodeSet",new Set),this.rootNode=e,this.leafNode=t,this._trailUpdateListener=this.update.bind(this),this.update()}update(){const e=[],t=new Set,i=new Dv(this.leafNode),n=this.rootNode;!function r(){const s=i.rootNode();t.add(s),s===n&&e.push(i.copy()),s.parents.forEach(e=>{i.addAncestor(e),r(),i.removeAncestor()})}(),t.forEach(e=>{this.listenedNodeSet.has(e)||this.addNodeListener(e)}),this.listenedNodeSet.forEach(e=>{t.has(e)||this.removeNodeListener(e)});const r=this.value;let s=r.length===e.length;if(s)for(let a=0;a<e.length;a++)if(!r[a].equals(e[a])){s=!1;break}s||(this.value=e)}addNodeListener(e){this.listenedNodeSet.add(e),e.parentAddedEmitter.addListener(this._trailUpdateListener),e.parentRemovedEmitter.addListener(this._trailUpdateListener)}removeNodeListener(e){this.listenedNodeSet.delete(e),e.parentAddedEmitter.removeListener(this._trailUpdateListener),e.parentRemovedEmitter.removeListener(this._trailUpdateListener)}dispose(){this.listenedNodeSet.forEach(e=>this.removeNodeListener(e)),super.dispose()}}Lg.register("TrailsBetweenProperty",Yv);class Hv extends mg{constructor(e,t,i){const n=Vo()({fromCoordinateFrame:"local",toCoordinateFrame:"local"},i);super(Mh.IDENTITY),_defineProperty(this,"rootNode",null),_defineProperty(this,"fromTrail",null),_defineProperty(this,"toTrail",null),_defineProperty(this,"listenedNodeSet",new Set),this.from=e,this.to=t,this.fromCoordinateFrame=n.fromCoordinateFrame,this.toCoordinateFrame=n.toCoordinateFrame,this.useDeepEquality=!0,this.fromAncestorsProperty=new qv(e),this.toAncestorsProperty=new qv(t);const r=this.update.bind(this);this._nodeTransformListener=this.updateMatrix.bind(this),this.fromAncestorsProperty.updateEmitter.addListener(r),this.toAncestorsProperty.updateEmitter.addListener(r),this.update()}update(){const e=[...this.fromAncestorsProperty.value,this.from],t=[...this.toAncestorsProperty.value,this.to],i=e.filter(e=>t.includes(e));let n=!1;const r=i.filter(i=>{const r=e.filter(e=>i.hasChild(e)),s=t.filter(e=>i.hasChild(e)),a=[],o=[];HE(r,s,a,o,[]),(r.length>1||s.length>1)&&(a.length||o.length)&&(n=!0);const l=a.length>0||this.from===i,h=o.length>0||this.to===i;return l&&h});n||1!==r.length?(this.rootNode=null,this.fromTrail=null,this.toTrail=null):(this.rootNode=r[0],this.fromTrail=this.from.getUniqueTrailTo(this.rootNode),this.toTrail=this.to.getUniqueTrailTo(this.rootNode));const s=new Set;this.fromTrail&&this.fromTrail.nodes.forEach(e=>s.add(e)),this.toTrail&&this.toTrail.nodes.forEach(e=>s.add(e)),s.forEach(e=>{this.listenedNodeSet.has(e)||this.addNodeListener(e)}),this.listenedNodeSet.forEach(e=>{s.has(e)||e===this.from||e===this.to||this.removeNodeListener(e)}),this.updateMatrix()}updateMatrix(){if(this.rootNode&&this.fromTrail&&this.toTrail){const e=1===this.fromTrail.nodes.length,t=1===this.toTrail.nodes.length,i=e&&"parent"===this.fromCoordinateFrame||t&&"parent"===this.toCoordinateFrame,n=this.fromTrail.getMatrixConcatenation(i?0:1,this.fromTrail.nodes.length-("parent"===this.fromCoordinateFrame?1:0)),r=this.toTrail.getMatrixConcatenation(i?0:1,this.toTrail.nodes.length-("parent"===this.toCoordinateFrame?1:0));this.value=r.inverted().timesMatrix(n)}else this.value=null}addNodeListener(e){this.listenedNodeSet.add(e),e.transformEmitter.addListener(this._nodeTransformListener)}removeNodeListener(e){this.listenedNodeSet.delete(e),e.transformEmitter.removeListener(this._nodeTransformListener)}dispose(){this.fromAncestorsProperty.dispose(),this.toAncestorsProperty.dispose(),super.dispose()}}Lg.register("MatrixBetweenProperty",Hv);const Gv=(e,t)=>{0};wo.register("assertHasProperties",Gv);const Fv=Gv,zv=ff.safari5,Uv=["fill","fillPickable","stroke","strokePickable","lineWidth","lineCap","lineJoin","miterLimit","lineDash","lineDashOffset","cachedPaints"],Wv={fill:null,fillPickable:!0,stroke:null,strokePickable:!1,lineWidth:cd.lineWidth,lineCap:cd.lineCap,lineJoin:cd.lineJoin,lineDashOffset:cd.lineDashOffset,miterLimit:cd.miterLimit},Xv=["fill","stroke","lineWidth","lineOptions","cachedPaints"],jv=bv(e=>class extends e{constructor(){super(...arguments),Fv(this,["_drawables"]),this._fill=Wv.fill,this._fillPickable=Wv.fillPickable,this._stroke=Wv.stroke,this._strokePickable=Wv.strokePickable,this._cachedPaints=[],this._lineDrawingStyles=new dd}setFill(e){return this._fill!==e&&(this._fill=e,this.invalidateFill()),this}set fill(e){this.setFill(e)}get fill(){return this.getFill()}getFill(){return this._fill}hasFill(){return null!==this.getFillValue()}getFillValue(){const e=this.getFill();return e instanceof _g?e.get():e}get fillValue(){return this.getFillValue()}setStroke(e){return this._stroke!==e&&(this._stroke=e,this.invalidateStroke()),this}set stroke(e){this.setStroke(e)}get stroke(){return this.getStroke()}getStroke(){return this._stroke}hasStroke(){return null!==this.getStrokeValue()}hasPaintableStroke(){return this.hasStroke()&&this.getLineWidth()>0}getStrokeValue(){const e=this.getStroke();return e instanceof _g?e.get():e}get strokeValue(){return this.getStrokeValue()}setFillPickable(e){return this._fillPickable!==e&&(this._fillPickable=e,this.invalidateFill()),this}set fillPickable(e){this.setFillPickable(e)}get fillPickable(){return this.isFillPickable()}isFillPickable(){return this._fillPickable}setStrokePickable(e){return this._strokePickable!==e&&(this._strokePickable=e,this.invalidateStroke()),this}set strokePickable(e){this.setStrokePickable(e)}get strokePickable(){return this.isStrokePickable()}isStrokePickable(){return this._strokePickable}setLineWidth(e){if(this.getLineWidth()!==e){this._lineDrawingStyles.lineWidth=e,this.invalidateStroke();const t=this._drawables.length;for(let e=0;e<t;e++)this._drawables[e].markDirtyLineWidth()}return this}set lineWidth(e){this.setLineWidth(e)}get lineWidth(){return this.getLineWidth()}getLineWidth(){return this._lineDrawingStyles.lineWidth}setLineCap(e){if(this._lineDrawingStyles.lineCap!==e){this._lineDrawingStyles.lineCap=e,this.invalidateStroke();const t=this._drawables.length;for(let e=0;e<t;e++)this._drawables[e].markDirtyLineOptions()}return this}set lineCap(e){this.setLineCap(e)}get lineCap(){return this.getLineCap()}getLineCap(){return this._lineDrawingStyles.lineCap}setLineJoin(e){if(this._lineDrawingStyles.lineJoin!==e){this._lineDrawingStyles.lineJoin=e,this.invalidateStroke();const t=this._drawables.length;for(let e=0;e<t;e++)this._drawables[e].markDirtyLineOptions()}return this}set lineJoin(e){this.setLineJoin(e)}get lineJoin(){return this.getLineJoin()}getLineJoin(){return this._lineDrawingStyles.lineJoin}setMiterLimit(e){if(this._lineDrawingStyles.miterLimit!==e){this._lineDrawingStyles.miterLimit=e,this.invalidateStroke();const t=this._drawables.length;for(let e=0;e<t;e++)this._drawables[e].markDirtyLineOptions()}return this}set miterLimit(e){this.setMiterLimit(e)}get miterLimit(){return this.getMiterLimit()}getMiterLimit(){return this._lineDrawingStyles.miterLimit}setLineDash(e){if(this._lineDrawingStyles.lineDash!==e){this._lineDrawingStyles.lineDash=e||[],this.invalidateStroke();const t=this._drawables.length;for(let e=0;e<t;e++)this._drawables[e].markDirtyLineOptions()}return this}set lineDash(e){this.setLineDash(e)}get lineDash(){return this.getLineDash()}getLineDash(){return this._lineDrawingStyles.lineDash}hasLineDash(){return!!this._lineDrawingStyles.lineDash.length}setLineDashOffset(e){if(this._lineDrawingStyles.lineDashOffset!==e){this._lineDrawingStyles.lineDashOffset=e,this.invalidateStroke();const t=this._drawables.length;for(let e=0;e<t;e++)this._drawables[e].markDirtyLineOptions()}return this}set lineDashOffset(e){this.setLineDashOffset(e)}get lineDashOffset(){return this.getLineDashOffset()}getLineDashOffset(){return this._lineDrawingStyles.lineDashOffset}setLineStyles(e){return this._lineDrawingStyles=e,this.invalidateStroke(),this}set lineStyles(e){this.setLineStyles(e)}get lineStyles(){return this.getLineStyles()}getLineStyles(){return this._lineDrawingStyles}setCachedPaints(e){this._cachedPaints=e.filter(e=>e instanceof dE);const t=this._drawables.length;for(let i=0;i<t;i++)this._drawables[i].markDirtyCachedPaints();return this}set cachedPaints(e){this.setCachedPaints(e)}get cachedPaints(){return this.getCachedPaints()}getCachedPaints(){return this._cachedPaints}addCachedPaint(e){if(e instanceof dE){this._cachedPaints.push(e);const t=this._drawables.length;for(let e=0;e<t;e++)this._drawables[e].markDirtyCachedPaints()}}removeCachedPaint(e){if(e instanceof dE){rm(this._cachedPaints,e);const t=this._drawables.length;for(let e=0;e<t;e++)this._drawables[e].markDirtyCachedPaints()}}beforeCanvasFill(e){const t=this.getFillValue();e.setFillStyle(t),t.transformMatrix&&(e.context.save(),t.transformMatrix.canvasAppendTransform(e.context))}afterCanvasFill(e){this.getFillValue().transformMatrix&&e.context.restore()}beforeCanvasStroke(e){const t=this.getStrokeValue();if(e.setStrokeStyle(this._stroke),e.setLineCap(this.getLineCap()),e.setLineJoin(this.getLineJoin()),t.transformMatrix){const i=t.transformMatrix.getScaleVector(),n=1/i.x;e.context.save(),t.transformMatrix.canvasAppendTransform(e.context),e.setLineWidth(this.getLineWidth()*n),e.setMiterLimit(this.getMiterLimit()*n),e.setLineDash(this.getLineDash().map(e=>e*n)),e.setLineDashOffset(this.getLineDashOffset()*n)}else e.setLineWidth(this.getLineWidth()),e.setMiterLimit(this.getMiterLimit()),e.setLineDash(this.getLineDash()),e.setLineDashOffset(this.getLineDashOffset())}afterCanvasStroke(e){this.getStrokeValue().transformMatrix&&e.context.restore()}getCSSFill(){const e=this.getFillValue();return e?e.toCSS?e.toCSS():e:"transparent"}getSimpleCSSStroke(){const e=this.getStrokeValue();return e?e.toCSS?e.toCSS():e:"transparent"}appendFillablePropString(e,t){return this._fill&&(t&&(t+=",\n"),"string"==typeof this.getFillValue()?t+=`${e}fill: '${this.getFillValue()}'`:t+=`${e}fill: ${this.getFillValue()}`),t}appendStrokablePropString(e,t){function i(i,n,r){t&&(t+=",\n"),t+=r||"string"!=typeof n?`${e+i}: ${n}`:`${e+i}: '${n}'`}if(this._stroke){const e=new dd,t=this.getStrokeValue();"string"==typeof t?i("stroke",t):i("stroke",t?t.toString():"null",!0),_.each(["lineWidth","lineCap","miterLimit","lineJoin","lineDashOffset"],t=>{this[t]!==e[t]&&i(t,this[t])}),this.lineDash.length&&i("lineDash",JSON.stringify(this.lineDash),!0)}return t}getFillRendererBitmask(){let e=0;return zv&&this._fill instanceof pE||(e|=af.bitmaskSVG),e|=af.bitmaskCanvas,this.hasFill()&&(this._fill instanceof fE||this._fill instanceof pE)||(e|=af.bitmaskDOM,e|=af.bitmaskWebGL),e}getStrokeRendererBitmask(){let e=0;return e|=af.bitmaskCanvas,e|=af.bitmaskSVG,this.hasStroke()||(e|=af.bitmaskDOM,e|=af.bitmaskWebGL),e}invalidateFill(){this.invalidateSupportedRenderers();const e=this._drawables.length;for(let t=0;t<e;t++)this._drawables[t].markDirtyFill()}invalidateStroke(){this.invalidateSupportedRenderers();const e=this._drawables.length;for(let t=0;t<e;t++)this._drawables[t].markDirtyStroke()}});Lg.register("Paintable",jv),jv.DEFAULT_OPTIONS=Wv;const Qv=Math.log2||function(e){return Math.log(e)/Math.LN2},Kv={imageOpacity:1,initialWidth:0,initialHeight:0,mipmap:!1,mipmapBias:0,mipmapInitialLevel:4,mipmapMaxLevel:5,hitTestPixels:!1};let Zv=null,Jv=null;const $v=()=>(Zv||(Zv=document.createElement("canvas")),Zv),eA=e=>class extends e{constructor(){super(...arguments),this._image=null,this._initialWidth=Kv.initialWidth,this._initialHeight=Kv.initialHeight,this._imageOpacity=Kv.imageOpacity,this._mipmap=Kv.mipmap,this._mipmapBias=Kv.mipmapBias,this._mipmapInitialLevel=Kv.mipmapInitialLevel,this._mipmapMaxLevel=Kv.mipmapMaxLevel,this._hitTestPixels=Kv.hitTestPixels,this._mipmapCanvases=[],this._mipmapURLs=[],this._mipmapData=null,this._imageLoadListener=this._onImageLoad.bind(this),this._imageLoadListenerAttached=!1,this._hitTestImageData=null,this.mipmapEmitter=new np}setImage(e){let t=this._image!==e;if(t&&"string"==typeof e&&this._image&&this._image instanceof HTMLImageElement&&e===this._image.src&&(t=!1),t&&e===this._mipmapData&&(t=!1),t){if(this._initialWidth=0,this._initialHeight=0,this._image&&this._imageLoadListenerAttached&&this._detachImageLoadListener(),this._mipmapData=null,"string"==typeof e){const t=e;(e=document.createElement("img")).src=t}else Array.isArray(e)&&(this._mipmapData=e,e=e[0].img,this._mipmapInitialLevel=this._mipmapMaxLevel=this._mipmapData.length,this._mipmap=!0);this._image=e,!(this._image instanceof HTMLImageElement)||this._image.width&&this._image.height||this._attachImageLoadListener(),this.invalidateImage()}return this}set image(e){this.setImage(e)}get image(){return this.getImage()}getImage(){return this._image}invalidateImage(){this.invalidateMipmaps(),this._invalidateHitTestData()}setImageWithSize(e,t,i){return this.setImage(e),this.setInitialWidth(t),this.setInitialHeight(i),this}setImageOpacity(e){this._imageOpacity!==e&&(this._imageOpacity=e)}set imageOpacity(e){this.setImageOpacity(e)}get imageOpacity(){return this.getImageOpacity()}getImageOpacity(){return this._imageOpacity}setInitialWidth(e){return e!==this._initialWidth&&(this._initialWidth=e,this.invalidateImage()),this}set initialWidth(e){this.setInitialWidth(e)}get initialWidth(){return this.getInitialWidth()}getInitialWidth(){return this._initialWidth}setInitialHeight(e){return e!==this._initialHeight&&(this._initialHeight=e,this.invalidateImage()),this}set initialHeight(e){this.setInitialHeight(e)}get initialHeight(){return this.getInitialHeight()}getInitialHeight(){return this._initialHeight}setMipmap(e){return this._mipmap!==e&&(this._mipmap=e,this.invalidateMipmaps()),this}set mipmap(e){this.setMipmap(e)}get mipmap(){return this.isMipmap()}isMipmap(){return this._mipmap}setMipmapBias(e){return this._mipmapBias!==e&&(this._mipmapBias=e,this.invalidateMipmaps()),this}set mipmapBias(e){this.setMipmapBias(e)}get mipmapBias(){return this.getMipmapBias()}getMipmapBias(){return this._mipmapBias}setMipmapInitialLevel(e){return this._mipmapInitialLevel!==e&&(this._mipmapInitialLevel=e,this.invalidateMipmaps()),this}set mipmapInitialLevel(e){this.setMipmapInitialLevel(e)}get mipmapInitialLevel(){return this.getMipmapInitialLevel()}getMipmapInitialLevel(){return this._mipmapInitialLevel}setMipmapMaxLevel(e){return this._mipmapMaxLevel!==e&&(this._mipmapMaxLevel=e,this.invalidateMipmaps()),this}set mipmapMaxLevel(e){this.setMipmapMaxLevel(e)}get mipmapMaxLevel(){return this.getMipmapMaxLevel()}getMipmapMaxLevel(){return this._mipmapMaxLevel}setHitTestPixels(e){return this._hitTestPixels!==e&&(this._hitTestPixels=e,this._invalidateHitTestData()),this}set hitTestPixels(e){this.setHitTestPixels(e)}get hitTestPixels(){return this.getHitTestPixels()}getHitTestPixels(){return this._hitTestPixels}_constructNextMipmap(){const e=this._mipmapCanvases.length,t=this._mipmapCanvases[e-1];if(t.width*t.height>2){const e=document.createElement("canvas");if(e.width=Math.ceil(t.width/2),e.height=Math.ceil(t.height/2),e.width>0&&e.height>0){const i=e.getContext("2d");i.scale(.5,.5),i.drawImage(t,0,0),this._mipmapCanvases.push(e),this._mipmapURLs.push(e.toDataURL())}}}invalidateMipmaps(){if(Yp(this._mipmapCanvases),Yp(this._mipmapURLs),this._image&&this._mipmap)if(this._mipmapData)for(let e=0;e<this._mipmapData.length;e++){const t=this._mipmapData[e].url;this._mipmapURLs.push(t);const i=this._mipmapData[e].updateCanvas;i&&i(),this._mipmapCanvases.push(this._mipmapData[e].canvas)}else{const e=document.createElement("canvas");if(e.width=this.getImageWidth(),e.height=this.getImageHeight(),e.width&&e.height){e.getContext("2d").drawImage(this._image,0,0),this._mipmapCanvases.push(e),this._mipmapURLs.push(e.toDataURL());let t=0;for(;++t<this._mipmapInitialLevel;)this._constructNextMipmap()}}this.mipmapEmitter.emit()}getMipmapLevel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=eA.getApproximateMatrixScale(e)*(window.devicePixelRatio||1);return this.getMipmapLevelFromScale(i,t)}getMipmapLevelFromScale(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e>=1)return 0;let i=Qv(1/e);if(i=fl.roundSymmetric(i+this._mipmapBias+t-.7),i<0&&(i=0),i>this._mipmapMaxLevel&&(i=this._mipmapMaxLevel),this.mipmap&&!this._mipmapCanvases[i]){let e=this._mipmapCanvases.length-1;for(;++e<=i;)this._constructNextMipmap();return Math.min(i,this._mipmapCanvases.length-1)}return i}getMipmapCanvas(e){if(this._mipmapData){const t=this._mipmapData[e]&&this._mipmapData[e].updateCanvas;t&&t()}return this._mipmapCanvases[e]}getMipmapURL(e){return this._mipmapURLs[e]}hasMipmaps(){return this._mipmapCanvases.length>0}_invalidateHitTestData(){this._hitTestPixels&&null!==this._image&&(this._hitTestImageData=eA.getHitTestData(this._image,this.imageWidth,this.imageHeight))}getImageWidth(){if(null===this._image)return 0;const e=this._mipmapData?this._mipmapData[0].width:("naturalWidth"in this._image?this._image.naturalWidth:0)||this._image.width;return 0===e?this._initialWidth:e}get imageWidth(){return this.getImageWidth()}getImageHeight(){if(null===this._image)return 0;const e=this._mipmapData?this._mipmapData[0].height:("naturalHeight"in this._image?this._image.naturalHeight:0)||this._image.height;return 0===e?this._initialHeight:e}get imageHeight(){return this.getImageHeight()}getImageURL(){return this._image.src}_attachImageLoadListener(){this.isDisposed||(this._image.addEventListener("load",this._imageLoadListener),this._imageLoadListenerAttached=!0)}_detachImageLoadListener(){this._image.removeEventListener("load",this._imageLoadListener),this._imageLoadListenerAttached=!1}_onImageLoad(){this.invalidateImage(),this._detachImageLoadListener()}dispose(){this._image&&this._imageLoadListenerAttached&&this._detachImageLoadListener(),super.dispose&&super.dispose()}};eA.getHitTestData=(e,t,i)=>{if(!("naturalWidth"in e&&e.naturalWidth||e.width)||!("naturalHeight"in e&&e.naturalHeight||e.height))return null;const n=$v(),r=(Jv||(Jv=$v().getContext("2d",{willReadFrequently:!0})),Jv);return n.width=t,n.height=i,r.drawImage(e,0,0),r.getImageData(0,0,t,i)},eA.testHitTestData=(e,t,i,n)=>{const r=4*(fl.clamp(Math.floor(n.x/t*e.width),0,e.width-1)+fl.clamp(Math.floor(n.y/i*e.height),0,e.height-1)*e.width)+3;return 0!==e.data[r]},eA.hitTestDataToShape=(e,t,i)=>{const n=t/e.width,r=i/e.height,s=new Ip;let a=!1,o=0;for(let l=0;l<e.height;l++){for(let t=0;t<e.width;t++){const i=4*(t+l*e.width)+3;0!==e.data[i]?a||(a=!0,o=t):a&&(a=!1,s.rect(o*n,l*n,n*(t-o),r))}a&&(a=!1,s.rect(o*n,l*n,n*(e.width-o),r))}return s.getSimplifiedAreaShape()},eA.createSVGImage=(e,t,i)=>{const n=document.createElementNS(lf,"image");return n.setAttribute("x","0"),n.setAttribute("y","0"),n.setAttribute("width",t+"px"),n.setAttribute("height",i+"px"),n.setAttributeNS(uf,"xlink:href",e),n},eA.createFastMipmapFromCanvas=e=>{const t=[],i=e.toDataURL(),n=new window.Image;n.src=i,t.push({img:n,url:i,width:e.width,height:e.height,canvas:e});let r=e;for(;r.width>=2&&r.height>=2;){const e=document.createElement("canvas");e.width=Math.ceil(r.width/2),e.height=Math.ceil(r.height/2);const i=e.getContext("2d");i.setTransform(.5,0,0,.5,0,0),i.drawImage(r,0,0);const n={width:e.width,height:e.height,canvas:e,url:e.toDataURL(),img:new window.Image};n.img.src=n.url,r=e,t.push(n)}return t},eA.getApproximateMatrixScale=e=>(Math.sqrt(e.m00()*e.m00()+e.m10()*e.m10())+Math.sqrt(e.m01()*e.m01()+e.m11()*e.m11()))/2,eA.CANVAS_MIPMAP_BIAS_ADJUSTMENT=.5,eA.DEFAULT_OPTIONS=Kv,Lg.register("Imageable",eA);const tA=eA,iA=(e,t,i)=>{const n=`_${e}PendingOptions`,r=`_${e}IsConstructed`;return class extends i{constructor(){super(...arguments),this[r]=!0,this.mutate(this[n]),this[n]=void 0}mutate(e){return e&&!this[r]&&(this[n]=No(this[n]||{},_.pick(e,t)),e=_.omit(e,t)),super.mutate(e)}}};Lg.register("DelayedMutate",iA);const nA=iA;class rA extends(tA(cv)){constructor(e,t){const i=Vo()({image:e},t);super(),this._imageBounds=null,this.mutate(i),this.invalidateSupportedRenderers()}invalidateImage(){this._image?this.invalidateSelf(this._imageBounds||new Zl(0,0,this.getImageWidth(),this.getImageHeight())):this.invalidateSelf(Zl.NOTHING);const e=this._drawables.length;for(let t=0;t<e;t++)this._drawables[t].markDirtyImage();super.invalidateImage(),this.invalidateSupportedRenderers()}invalidateSupportedRenderers(){let e=af.bitmaskCanvas;this.getImageWidth()<=Ly.MAX_DIMENSION.width&&this.getImageHeight()<=Ly.MAX_DIMENSION.height&&(e|=af.bitmaskWebGL),this._image instanceof HTMLCanvasElement||(e|=af.bitmaskSVG|af.bitmaskDOM),this.setRendererBitmask(e)}setImageOpacity(e){const t=this._imageOpacity!==e;if(super.setImageOpacity(e),t){const e=this._drawables.length;for(let t=0;t<e;t++)this._drawables[t].markDirtyImageOpacity()}}setImageBounds(e){this._imageBounds!==e&&(this._imageBounds=e,this.invalidateImage())}set imageBounds(e){this.setImageBounds(e)}get imageBounds(){return this._imageBounds}getImageBounds(){return this._imageBounds}isPainted(){return!0}canvasPaintSelf(e,t){wP.prototype.paintCanvas(e,this,t)}createDOMDrawable(e,t){return PP.createFromPool(e,t)}createSVGDrawable(e,t){return VP.createFromPool(e,t)}createCanvasDrawable(e,t){return wP.createFromPool(e,t)}createWebGLDrawable(e,t){return NP.createFromPool(e,t)}containsPointSelf(e){const t=cv.prototype.containsPointSelf.call(this,e);return t&&this._hitTestPixels&&this._hitTestImageData?tA.testHitTestData(this._hitTestImageData,this.imageWidth,this.imageHeight,e):t}getSelfShape(){return this._hitTestPixels&&this._hitTestImageData?tA.hitTestDataToShape(this._hitTestImageData,this.imageWidth,this.imageHeight):cv.prototype.getSelfShape.call(this)}invalidateMipmaps(){const e=this._image&&this._mipmap&&!this._mipmapData;if(super.invalidateMipmaps(),e){const e=this._drawables.length;for(let t=0;t<e;t++)this._drawables[t].markDirtyMipmap()}}mutate(e){return super.mutate(e)}}_defineProperty(rA,"DEFAULT_IMAGE_OPTIONS",No({},cv.DEFAULT_NODE_OPTIONS,tA.DEFAULT_OPTIONS)),rA.prototype._mutatorKeys=["image","imageOpacity","imageBounds","initialWidth","initialHeight","mipmap","mipmapBias","mipmapInitialLevel","mipmapMaxLevel","hitTestPixels",...cv.prototype._mutatorKeys],rA.prototype.drawableMarkFlags=[...cv.prototype.drawableMarkFlags,"image","imageOpacity","mipmap"],rA.ImageIO=new el("ImageIO",{valueType:rA,supertype:cv.NodeIO,events:["changed"],methods:{setImage:{returnType:sg,parameterTypes:[Om],implementation:function(e){const t=new window.Image;t.src=e,this.image=t},documentation:"Set the image from a base64 string",invocableForReadOnlyElements:!1}}}),Lg.register("Image",rA);const sA={shape:null,boundsMethod:"accurate"};class aA extends(jv(cv)){constructor(e,t){e||null!=t&&t.shape;const i=Vo()({shape:e,boundsMethod:sA.boundsMethod},t);super(),this._shape=sA.shape,this._strokedShape=null,this._boundsMethod=sA.boundsMethod,this._invalidShapeListener=this.invalidateShape.bind(this),this._invalidShapeListenerAttached=!1,this.invalidateSupportedRenderers(),this.mutate(i)}setShape(e){return this._shape!==e&&(this._invalidShapeListenerAttached&&this.detachShapeListener(),"string"==typeof e&&(e=new Ip(e)),this._shape=e,this.invalidateShape(),this._shape&&!this._shape.isImmutable()&&this.attachShapeListener()),this}set shape(e){this.setShape(e)}get shape(){return this.getShape()}getShape(){return this._shape}getStrokedShape(){return this._strokedShape||(this._strokedShape=this.getShape().getStrokedShape(this._lineDrawingStyles)),this._strokedShape}getPathRendererBitmask(){return af.bitmaskCanvas|af.bitmaskSVG}invalidateSupportedRenderers(){this.setRendererBitmask(this.getFillRendererBitmask()&this.getStrokeRendererBitmask()&this.getPathRendererBitmask())}invalidateShape(){this.invalidatePath();const e=this._drawables.length;for(let t=0;t<e;t++)this._drawables[t].markDirtyShape();this._invalidShapeListenerAttached&&this._shape&&this._shape.isImmutable()&&this.detachShapeListener()}invalidatePath(){this._strokedShape=null,this.invalidateSelf()}attachShapeListener(){this.isDisposed||(this._shape.invalidatedEmitter.addListener(this._invalidShapeListener),this._invalidShapeListenerAttached=!0)}detachShapeListener(){this._shape.invalidatedEmitter.removeListener(this._invalidShapeListener),this._invalidShapeListenerAttached=!1}updateSelfBounds(){const e=this.hasShape()?this.computeShapeBounds():Zl.NOTHING,t=!e.equals(this.selfBoundsProperty._value);return t&&this.selfBoundsProperty._value.set(e),t}setBoundsMethod(e){return this._boundsMethod!==e&&(this._boundsMethod=e,this.invalidatePath(),this.rendererSummaryRefreshEmitter.emit()),this}set boundsMethod(e){this.setBoundsMethod(e)}get boundsMethod(){return this.getBoundsMethod()}getBoundsMethod(){return this._boundsMethod}computeShapeBounds(){const e=this.getShape();if("none"!==this._boundsMethod&&e){if(this.hasPaintableStroke()&&"unstroked"!==this._boundsMethod){if("accurate"===this._boundsMethod)return e.getStrokedBounds(this.getLineStyles());{let t;return t="safePadding"===this._boundsMethod&&"miter"===this.getLineJoin()?this.getMiterLimit():"square"===this.getLineCap()?Math.SQRT2:1,e.bounds.dilated(t*this.getLineWidth()/2)}}return e.bounds}return Zl.NOTHING}areSelfBoundsValid(){return"accurate"===this._boundsMethod||"safePadding"===this._boundsMethod||"none"!==this._boundsMethod&&!this.hasStroke()}getTransformedSelfBounds(e){return(this._stroke?this.getStrokedShape():this.getShape()).getBoundsWithTransform(e)}getTransformedSafeSelfBounds(e){return this.getTransformedSelfBounds(e)}invalidateStroke(){this.invalidatePath(),this.rendererSummaryRefreshEmitter.emit(),super.invalidateStroke()}hasShape(){return!!this._shape}canvasPaintSelf(e,t){DP.prototype.paintCanvas(e,this,t)}createSVGDrawable(e,t){return qP.createFromPool(e,t)}createCanvasDrawable(e,t){return DP.createFromPool(e,t)}isPainted(){return!0}containsPointSelf(e){let t=!1;return this.hasShape()?(this._fillPickable&&(t=this.getShape().containsPoint(e)),!t&&this._strokePickable&&(t=this.getStrokedShape().containsPoint(e)),t):t}getSelfShape(){return Ip.union([...this.hasShape()&&this._fillPickable?[this.getShape()]:[],...this.hasShape()&&this._strokePickable?[this.getStrokedShape()]:[]])}intersectsBoundsSelf(e){return!!this._shape&&this._shape.intersectsBounds(e)}requiresSVGBoundsWorkaround(){if(!(this._stroke&&this._stroke instanceof dE&&this.hasShape()))return!1;const e=this.computeShapeBounds();return e.x*e.y==0}getDebugHTMLExtras(){return this._shape?` (<span style="color: #88f" onclick="window.open( 'data:text/plain;charset=utf-8,' + encodeURIComponent( '${this._shape.getSVGPath()}' ) );">path</span>)`:""}dispose(){this._invalidShapeListenerAttached&&this.detachShapeListener(),super.dispose()}mutate(e){return super.mutate(e)}}function oA(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")}_defineProperty(aA,"DEFAULT_PATH_OPTIONS",No({},cv.DEFAULT_NODE_OPTIONS,sA)),aA.prototype._mutatorKeys=[...Uv,"boundsMethod","shape",...cv.prototype._mutatorKeys],aA.prototype.drawableMarkFlags=[...cv.prototype.drawableMarkFlags,...Xv,"shape"],Lg.register("Path",aA),wo.register("escapeHTML",oA);const lA=oA;function hA(e){return _.each(Array.prototype.slice.call(arguments,1),t=>{if(t)for(const i in t){const n=Object.getOwnPropertyDescriptor(t,i);!n||"function"!=typeof n.get&&void 0===t[i]||Object.defineProperty(e,i,n)}}),e}wo.register("extendDefined",hA);const uA=hA,cA=new ty("none",{tandem:Lm.GENERAL_VIEW.createTandem("phetioElementSelectionProperty"),phetioValueType:Om,validValues:["view","linked","string","none"],phetioState:!1,phetioDocumentation:'Specifies how PhET-iO Elements are being selected. "view": the target view element, "linked": the corresponding linked element of the view element (if there is one), "string": select only string elements in the sim, "none": no active selection.'});zo.register("phetioElementSelectionProperty",cA);const dA=cA,pA=["boundsMethod","stringProperty","string","font","fontWeight","fontFamily","fontStretch","fontStyle","fontSize"],mA=window.navigator.userAgent.includes("like Gecko) Version/5")&&window.navigator.userAgent.includes("Safari/");class gA extends(jv(cv)){constructor(e,t){super(),this._stringProperty=new GE("",!0,this.onStringPropertyChange.bind(this)),this._font=nf.DEFAULT,this._boundsMethod="hybrid",this._isHTML=!1,this._cachedRenderedText=null;const i=uA({fill:"#000000",tandemNameSuffix:"Text",phetioType:gA.TextIO,phetioVisiblePropertyInstrumented:!1},t);"string"==typeof e||"number"==typeof e?i.string=e:i.stringProperty=e,this.mutate(i),this.invalidateSupportedRenderers()}mutate(e){return super.mutate(e)}setString(e){return e=""+e,this._stringProperty.set(e),this}set string(e){this.setString(e)}get string(){return this.getString()}getString(){return this._stringProperty.value}getRenderedText(){return null===this._cachedRenderedText&&(this._cachedRenderedText=this.string.replace(" "," "),ff.edge&&(this._cachedRenderedText=gA.simplifyEmbeddingMarks(this._cachedRenderedText))),this._cachedRenderedText}get renderedText(){return this.getRenderedText()}onStringPropertyChange(){this._cachedRenderedText=null;const e=this._drawables.length;for(let t=0;t<e;t++)this._drawables[t].markDirtyText();this.invalidateText()}setStringProperty(e){return this._stringProperty.setTargetProperty(this,gA.STRING_PROPERTY_TANDEM_NAME,e)}set stringProperty(e){this.setStringProperty(e)}get stringProperty(){return this.getStringProperty()}getStringProperty(){return this._stringProperty}initializePhetioObject(e,t){const i=this.isPhetioInstrumented();super.initializePhetioObject(e,t),Lm.PHET_IO_ENABLED&&!i&&this.isPhetioInstrumented()&&this._stringProperty.initializePhetio(this,gA.STRING_PROPERTY_TANDEM_NAME,()=>new rE(this.string,No({phetioReadOnly:!0,tandem:this.tandem.createTandem(gA.STRING_PROPERTY_TANDEM_NAME),phetioDocumentation:"Property for the displayed text"},t.stringPropertyOptions)))}getPhetioMouseHitTarget(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return"string"===dA.value?this.getStringPropertyPhetioMouseHitTarget(e):super.getPhetioMouseHitTarget(e)}getStringPropertyPhetioMouseHitTarget(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this._stringProperty.getTargetProperty();return t instanceof Km?t.getPhetioMouseHitTarget(e):"phetioNotSelectable"}setBoundsMethod(e){if(e!==this._boundsMethod){this._boundsMethod=e,this.invalidateSupportedRenderers();const t=this._drawables.length;for(let e=0;e<t;e++)this._drawables[e].markDirtyBounds();this.invalidateText(),this.rendererSummaryRefreshEmitter.emit()}return this}set boundsMethod(e){this.setBoundsMethod(e)}get boundsMethod(){return this.getBoundsMethod()}getBoundsMethod(){return this._boundsMethod}getTextRendererBitmask(){let e=0;return"fast"===this._boundsMethod||this._isHTML||(e|=af.bitmaskCanvas),this._isHTML||(e|=af.bitmaskSVG),e|=af.bitmaskDOM,e}invalidateSupportedRenderers(){this.setRendererBitmask(this.getFillRendererBitmask()&this.getStrokeRendererBitmask()&this.getTextRendererBitmask())}invalidateText(){this.invalidateSelf();const e=this._drawables.length;for(let t=0;t<e;t++)this._drawables[t].markDirtyBounds();this.invalidateSupportedRenderers()}updateSelfBounds(){let e;e=this._isHTML||mA&&"accurate"!==this._boundsMethod?Fy.approximateDOMBounds(this._font,this.getDOMTextNode()):"hybrid"===this._boundsMethod?Fy.approximateHybridBounds(this._font,this.renderedText):"accurate"===this._boundsMethod?Fy.accurateCanvasBounds(this):Fy.approximateSVGBounds(this._font,this.renderedText),this.hasStroke()&&e.dilate(this.getLineWidth()/2);const t=!e.equals(this.selfBoundsProperty._value);return t&&this.selfBoundsProperty._value.set(e),t}invalidateStroke(){this.invalidateText(),super.invalidateStroke()}invalidateFill(){this.invalidateText(),super.invalidateFill()}canvasPaintSelf(e,t){sC.prototype.paintCanvas(e,this,t)}createDOMDrawable(e,t){return lC.createFromPool(e,t)}createSVGDrawable(e,t){return cC.createFromPool(e,t)}createCanvasDrawable(e,t){return sC.createFromPool(e,t)}getDOMTextNode(){if(this._isHTML){const e=document.createElement("span");return e.innerHTML=this.string,e}return document.createTextNode(this.renderedText)}getSafeSelfBounds(){const e=this.getSelfBounds();return e.dilatedXY(1*e.width,1*e.height)}setFont(e){if(e!==("string"==typeof e?this._font.toCSS():this._font)){this._font="string"==typeof e?nf.fromCSS(e):e;const t=this._drawables.length;for(let e=0;e<t;e++)this._drawables[e].markDirtyFont();this.invalidateText()}return this}set font(e){this.setFont(e)}get font(){return this.getFont()}getFont(){return this._font.getFont()}setFontWeight(e){return this.setFont(this._font.copy({weight:e}))}set fontWeight(e){this.setFontWeight(e)}get fontWeight(){return this.getFontWeight()}getFontWeight(){return this._font.getWeight()}setFontFamily(e){return this.setFont(this._font.copy({family:e}))}set fontFamily(e){this.setFontFamily(e)}get fontFamily(){return this.getFontFamily()}getFontFamily(){return this._font.getFamily()}setFontStretch(e){return this.setFont(this._font.copy({stretch:e}))}set fontStretch(e){this.setFontStretch(e)}get fontStretch(){return this.getFontStretch()}getFontStretch(){return this._font.getStretch()}setFontStyle(e){return this.setFont(this._font.copy({style:e}))}set fontStyle(e){this.setFontStyle(e)}get fontStyle(){return this.getFontStyle()}getFontStyle(){return this._font.getStyle()}setFontSize(e){return this.setFont(this._font.copy({size:e}))}set fontSize(e){this.setFontSize(e)}get fontSize(){return this.getFontSize()}getFontSize(){return this._font.getSize()}isPainted(){return!0}areSelfBoundsValid(){return"accurate"===this._boundsMethod}getDebugHTMLExtras(){return` "${lA(this.renderedText)}"${this._isHTML?" (html)":""}`}dispose(){super.dispose(),this._stringProperty.dispose()}static embeddedDebugString(e){return e.replace(/\u202a/g,"[LTR]").replace(/\u202b/g,"[RTL]").replace(/\u202c/g,"[POP]")}static simplifyEmbeddingMarks(e){const t={dir:null,children:[],parent:null};let i=t;for(let n=0;n<e.length;n++){const t=e.charAt(n);if(t===fA||t===yA){const e={dir:t,children:[],parent:i};i.children.push(e),i=e}else t===EA?i=i.parent:i.children.push(t)}return function e(t){if("string"==typeof t)return t;const i=t.children.map(e).join("");return t.dir?t.dir+i+"‬":i}(function e(t){if("string"!=typeof t){for(let i=0;i<t.children.length;i++)e(t.children[i]);!function(e){1===e.children.length&&"string"!=typeof e.children[0]&&e.children[0].dir&&(e.dir=e.children[0].dir,e.children=e.children[0].children)}(t),function(e){for(let t=e.children.length-1;t>=0;t--){const i=e.children[t];"string"!=typeof i&&e.dir===i.dir&&e.children.splice(t,1,...i.children)}}(t),function e(t){for(let i=t.children.length-1;i>=1;i--){const n=t.children[i-1],r=t.children[i];"string"!=typeof r&&"string"!=typeof n&&r.dir&&n.dir===r.dir&&(n.children=n.children.concat(r.children),t.children.splice(i,1),e(n))}}(t)}return t}(t))}}_defineProperty(gA,"STRING_PROPERTY_NAME","stringProperty"),_defineProperty(gA,"STRING_PROPERTY_TANDEM_NAME","stringProperty"),gA.prototype._mutatorKeys=[...Uv,...pA,...cv.prototype._mutatorKeys],gA.prototype.drawableMarkFlags=[...cv.prototype.drawableMarkFlags,...Xv,"text","font","bounds"],Lg.register("Text",gA);const fA="‪",yA="‫",EA="‬";Fy.initializeTextBounds(),gA.TextIO=new el("TextIO",{valueType:gA,supertype:cv.NodeIO,documentation:"Text that is displayed in the simulation. TextIO has a nested PropertyIO.&lt;String&gt; for the current string value."});class vA extends cv{constructor(e){super(e),this.setRendererBitmask(af.bitmaskCanvas)}setCanvasBounds(e){this.invalidateSelf(e)}set canvasBounds(e){this.setCanvasBounds(e)}get canvasBounds(){return this.getCanvasBounds()}getCanvasBounds(){return this.getSelfBounds()}isPainted(){return!0}invalidatePaint(){const e=this._drawables.length;for(let t=0;t<e;t++)this._drawables[t].markDirty()}canvasPaintSelf(e,t){this.paintCanvas(e.context)}containsPointSelf(e){return!1}getSelfShape(){return new Ip}createCanvasDrawable(e,t){return gP.createFromPool(e,t)}mutate(e){return super.mutate(e)}}vA.prototype._mutatorKeys=["canvasBounds"].concat(cv.prototype._mutatorKeys),Lg.register("CanvasNode",vA);class AA extends aA{constructor(e,t){super(null),this._radius=0,t="object"==typeof e?e:uA({radius:e},t),this.mutate(t)}getStrokeRendererBitmask(){let e=super.getStrokeRendererBitmask();return this.hasStroke()&&!this.getStroke().isGradient&&!this.getStroke().isPattern&&this.getLineWidth()<=this.getRadius()&&(e|=af.bitmaskDOM),e}getPathRendererBitmask(){return af.bitmaskCanvas|af.bitmaskSVG|(Zg.borderRadius?af.bitmaskDOM:0)}invalidateCircle(){this._shape=null,this.invalidatePath()}createCircleShape(){return Ip.circle(0,0,this._radius).makeImmutable()}intersectsBoundsSelf(e){let t=Math.abs(e.centerX),i=Math.abs(e.centerY);const n=e.maxX-t,r=e.maxY-i;return!(t>n+this._radius||i>r+this._radius)&&(t<=n||i<=r||(t-=n,i-=r,t*t+i*i<=this._radius*this._radius))}canvasPaintSelf(e,t){yP.prototype.paintCanvas(e,this,t)}createDOMDrawable(e,t){return vP.createFromPool(e,t)}createSVGDrawable(e,t){return bP.createFromPool(e,t)}createCanvasDrawable(e,t){return yP.createFromPool(e,t)}setRadius(e){if(this._radius!==e){this._radius=e,this.invalidateCircle();const t=this._drawables.length;for(let e=0;e<t;e++)this._drawables[e].markDirtyRadius()}return this}set radius(e){this.setRadius(e)}get radius(){return this.getRadius()}getRadius(){return this._radius}computeShapeBounds(){let e=new Zl(-this._radius,-this._radius,this._radius,this._radius);return this._stroke&&(e=e.dilated(this.getLineWidth()/2)),e}containsPointSelf(e){const t=e.x*e.x+e.y*e.y;let i,n=!0;if(this._strokePickable){i=this.getLineWidth()/2;const e=this._radius+i;n=n&&t<=e*e}if(this._fillPickable)return this._strokePickable?n:t<=this._radius*this._radius;if(this._strokePickable){const e=this._radius-i;return n&&t>=e*e}return!1}setShape(e){if(null!==e)throw new Error("Cannot set the shape of a Circle to something non-null");return this.invalidatePath(),this}getShape(){return this._shape||(this._shape=this.createCircleShape()),this._shape}hasShape(){return!0}mutate(e){return super.mutate(e)}}AA.prototype._mutatorKeys=["radius"].concat(aA.prototype._mutatorKeys),AA.prototype.drawableMarkFlags=aA.prototype.drawableMarkFlags.concat(["radius"]).filter(e=>"shape"!==e),Lg.register("Circle",AA);class bA extends cv{constructor(e,t){(e=>!(!e||!e.jquery))(e)&&(e=e[0]),super(),this._container=document.createElement("div"),this._$container=$(this._container),this._$container.css("position","absolute"),this._$container.css("left",0),this._$container.css("top",0),this.invalidateDOMLock=!1,this._preventTransform=!1,t=uA({element:e},t),this.mutate(t),this.setRendererBitmask(af.bitmaskDOM)}calculateDOMBounds(){const e=$(this._element);return new Zl(0,0,e.width(),e.height())}invalidateDOM(){if(this.invalidateDOMLock)return;this.invalidateDOMLock=!0;const e=document.createElement("div");$(e).css({display:"hidden",padding:"0 !important",margin:"0 !important",position:"absolute",left:0,top:0,width:65535,height:65535}),this._container.removeChild(this._element),e.appendChild(this._element),document.body.appendChild(e);const t=this.calculateDOMBounds();this.invalidateSelf(t),this._$container.width(t.getWidth()),this._$container.height(t.getHeight()),document.body.removeChild(e),e.removeChild(this._element),this._container.appendChild(this._element),this.invalidateDOMLock=!1}createDOMDrawable(e,t){return _P.createFromPool(e,t)}isPainted(){return!0}setElement(e){return this._element!==e&&(this._element&&this._container.removeChild(this._element),this._element=e,this._container.appendChild(this._element),this.invalidateDOM()),this}set element(e){this.setElement(e)}get element(){return this.getElement()}getElement(){return this._element}setPreventTransform(e){this._preventTransform!==e&&(this._preventTransform=e)}set preventTransform(e){this.setPreventTransform(e)}get preventTransform(){return this.isTransformPrevented()}isTransformPrevented(){return this._preventTransform}mutate(e){return super.mutate(e)}}bA.prototype._mutatorKeys=["element","preventTransform"].concat(cv.prototype._mutatorKeys),Lg.register("DOM",bA);class SA extends aA{constructor(e,t,i,n,r){super(null),this._x1=0,this._y1=0,this._x2=0,this._y2=0,r="object"==typeof e?e instanceof al?uA({x1:e.x,y1:e.y,x2:t.x,y2:t.y,strokePickable:!0},i):uA({strokePickable:!0},e):uA({x1:e,y1:t,x2:i,y2:n,strokePickable:!0},r),this.mutate(r)}setLine(e,t,i,n){this._x1=e,this._y1=t,this._x2=i,this._y2=n;const r=this._drawables.length;for(let s=0;s<r;s++){this._drawables[s].markDirtyLine()}return this.invalidateLine(),this}setPoint1(e,t){"number"==typeof e?(this._x1=e,this._y1=t):(this._x1=e.x,this._y1=e.y);const i=this._drawables.length;for(let n=0;n<i;n++)this._drawables[n].markDirtyP1();return this.invalidateLine(),this}set p1(e){this.setPoint1(e)}get p1(){return new al(this._x1,this._y1)}setPoint2(e,t){"number"==typeof e?(this._x2=e,this._y2=t):(this._x2=e.x,this._y2=e.y);const i=this._drawables.length;for(let n=0;n<i;n++)this._drawables[n].markDirtyP2();return this.invalidateLine(),this}set p2(e){this.setPoint2(e)}get p2(){return new al(this._x2,this._y2)}setX1(e){if(this._x1!==e){this._x1=e;const t=this._drawables.length;for(let e=0;e<t;e++)this._drawables[e].markDirtyX1();this.invalidateLine()}return this}set x1(e){this.setX1(e)}get x1(){return this.getX1()}getX1(){return this._x1}setY1(e){if(this._y1!==e){this._y1=e;const t=this._drawables.length;for(let e=0;e<t;e++)this._drawables[e].markDirtyY1();this.invalidateLine()}return this}set y1(e){this.setY1(e)}get y1(){return this.getY1()}getY1(){return this._y1}setX2(e){if(this._x2!==e){this._x2=e;const t=this._drawables.length;for(let e=0;e<t;e++)this._drawables[e].markDirtyX2();this.invalidateLine()}return this}set x2(e){this.setX2(e)}get x2(){return this.getX2()}getX2(){return this._x2}setY2(e){if(this._y2!==e){this._y2=e;const t=this._drawables.length;for(let e=0;e<t;e++)this._drawables[e].markDirtyY2();this.invalidateLine()}return this}set y2(e){this.setY2(e)}get y2(){return this.getY2()}getY2(){return this._y2}createLineShape(){return Ip.lineSegment(this._x1,this._y1,this._x2,this._y2).makeImmutable()}invalidateLine(){this._shape=null,this.invalidatePath()}containsPointSelf(e){return!!this._strokePickable&&super.containsPointSelf(e)}canvasPaintSelf(e,t){kP.prototype.paintCanvas(e,this,t)}computeShapeBounds(){if(this._stroke){const e=this.getLineCap(),t=this.getLineWidth()/2;if("round"===e)return new Zl(Math.min(this._x1,this._x2)-t,Math.min(this._y1,this._y2)-t,Math.max(this._x1,this._x2)+t,Math.max(this._y1,this._y2)+t);{const i=this._x2-this._x1,n=this._y2-this._y1,r=Math.sqrt(i*i+n*n);if(0===r)return new Zl(this._x1-t,this._y1-t,this._x2+t,this._y2+t);const s=t*i/r,a=t*n/r,o=Zl.NOTHING.copy();return"butt"===e?(o.addCoordinates(this._x1-a,this._y1+s),o.addCoordinates(this._x1+a,this._y1-s),o.addCoordinates(this._x2-a,this._y2+s),o.addCoordinates(this._x2+a,this._y2-s)):(o.addCoordinates(this._x1-s-a,this._y1-a+s),o.addCoordinates(this._x1-s+a,this._y1-a-s),o.addCoordinates(this._x2+s-a,this._y2+a+s),o.addCoordinates(this._x2+s+a,this._y2+a-s)),o}}{const e=Zl.NOTHING.copy();return e.addCoordinates(this._x1,this._y1),e.addCoordinates(this._x2,this._y2),e}}createSVGDrawable(e,t){return IP.createFromPool(e,t)}createCanvasDrawable(e,t){return kP.createFromPool(e,t)}setShape(e){if(null!==e)throw new Error("Cannot set the shape of a Line to something non-null");return this.invalidatePath(),this}getShape(){return this._shape||(this._shape=this.createLineShape()),this._shape}hasShape(){return!0}mutate(e){return super.mutate(e)}getFillRendererBitmask(){return af.bitmaskCanvas|af.bitmaskSVG|af.bitmaskDOM|af.bitmaskWebGL}}SA.prototype._mutatorKeys=["p1","p2","x1","y1","x2","y2"].concat(aA.prototype._mutatorKeys),SA.prototype.drawableMarkFlags=aA.prototype.drawableMarkFlags.concat(["line","p1","p2","x1","x2","y1","y2"]).filter(e=>"shape"!==e),Lg.register("Line",SA);const _A=Iv(aA);class xA extends _A{constructor(e,t,i,n,r,s,a){super(null,{sizable:!1});let o={};this._rectX=0,this._rectY=0,this._rectWidth=0,this._rectHeight=0,this._cornerXRadius=0,this._cornerYRadius=0,o="object"==typeof e?e instanceof Zl?"number"!=typeof t?No(o,{rectBounds:e},t):No(o,{rectBounds:e,cornerXRadius:t,cornerYRadius:i},n):No(o,e):void 0===s?No(o,{rectX:e,rectY:t,rectWidth:i,rectHeight:n},r):No(o,{rectX:e,rectY:t,rectWidth:i,rectHeight:n,cornerXRadius:r,cornerYRadius:s},a),this.localPreferredWidthProperty.lazyLink(this.updatePreferredSizes.bind(this)),this.localPreferredHeightProperty.lazyLink(this.updatePreferredSizes.bind(this)),this.localMinimumWidthProperty.lazyLink(this.updatePreferredSizes.bind(this)),this.localMinimumHeightProperty.lazyLink(this.updatePreferredSizes.bind(this)),this.mutate(o)}getMaximumArcSize(){return Math.min(this._rectWidth/2,this._rectHeight/2)}getStrokeRendererBitmask(){let e=super.getStrokeRendererBitmask();const t=this.getStroke();return!t||t instanceof pE||t instanceof fE||this.hasLineDash()||("miter"===this.getLineJoin()||"round"===this.getLineJoin()&&Zg.borderRadius)&&(e|=af.bitmaskDOM),this.hasStroke()||(e|=af.bitmaskWebGL),e}getPathRendererBitmask(){let e=af.bitmaskCanvas|af.bitmaskSVG;const t=this.getMaximumArcSize();return(!this.hasStroke()||this.getLineWidth()<=this._rectHeight&&this.getLineWidth()<=this._rectWidth)&&(!this.isRounded()||Zg.borderRadius&&this._cornerXRadius===this._cornerYRadius)&&this._cornerYRadius<=t&&this._cornerXRadius<=t&&(e|=af.bitmaskDOM),this.hasStroke()||this.isRounded()||(e|=af.bitmaskWebGL),e}setRect(e,t,i,n,r,s){const a=void 0!==r,o=void 0!==s;if(!(this._rectX!==e||this._rectY!==t||this._rectWidth!==i||this._rectHeight!==n||a&&this._cornerXRadius!==r||o&&this._cornerYRadius!==s))return this;this._rectX=e,this._rectY=t,this._rectWidth=i,this._rectHeight=n,this._cornerXRadius=a?r:this._cornerXRadius,this._cornerYRadius=o?s:this._cornerYRadius;const l=this._drawables.length;for(let h=0;h<l;h++)this._drawables[h].markDirtyRectangle();return this.invalidateRectangle(),this}setRectX(e){if(this._rectX!==e){this._rectX=e;const t=this._drawables.length;for(let e=0;e<t;e++)this._drawables[e].markDirtyX();this.invalidateRectangle()}return this}set rectX(e){this.setRectX(e)}get rectX(){return this.getRectX()}getRectX(){return this._rectX}setRectY(e){if(this._rectY!==e){this._rectY=e;const t=this._drawables.length;for(let e=0;e<t;e++)this._drawables[e].markDirtyY();this.invalidateRectangle()}return this}set rectY(e){this.setRectY(e)}get rectY(){return this.getRectY()}getRectY(){return this._rectY}setRectWidth(e){if(this._rectWidth!==e){this._rectWidth=e;const t=this._drawables.length;for(let e=0;e<t;e++)this._drawables[e].markDirtyWidth();this.invalidateRectangle()}return this}set rectWidth(e){this.setRectWidth(e)}get rectWidth(){return this.getRectWidth()}getRectWidth(){return this._rectWidth}setRectHeight(e){if(this._rectHeight!==e){this._rectHeight=e;const t=this._drawables.length;for(let e=0;e<t;e++)this._drawables[e].markDirtyHeight();this.invalidateRectangle()}return this}set rectHeight(e){this.setRectHeight(e)}get rectHeight(){return this.getRectHeight()}getRectHeight(){return this._rectHeight}setCornerXRadius(e){if(this._cornerXRadius!==e){this._cornerXRadius=e;const t=this._drawables.length;for(let e=0;e<t;e++)this._drawables[e].markDirtyCornerXRadius();this.invalidateRectangle()}return this}set cornerXRadius(e){this.setCornerXRadius(e)}get cornerXRadius(){return this.getCornerXRadius()}getCornerXRadius(){return this._cornerXRadius}setCornerYRadius(e){if(this._cornerYRadius!==e){this._cornerYRadius=e;const t=this._drawables.length;for(let e=0;e<t;e++)this._drawables[e].markDirtyCornerYRadius();this.invalidateRectangle()}return this}set cornerYRadius(e){this.setCornerYRadius(e)}get cornerYRadius(){return this.getCornerYRadius()}getCornerYRadius(){return this._cornerYRadius}setRectBounds(e){return this.setRect(e.x,e.y,e.width,e.height),this}set rectBounds(e){this.setRectBounds(e)}get rectBounds(){return this.getRectBounds()}getRectBounds(){return Zl.rect(this._rectX,this._rectY,this._rectWidth,this._rectHeight)}setRectSize(e){return this.setRectWidth(e.width),this.setRectHeight(e.height),this}set rectSize(e){this.setRectSize(e)}get rectSize(){return this.getRectSize()}getRectSize(){return new My(this._rectWidth,this._rectHeight)}setRectWidthFromRight(e){if(this._rectWidth!==e){const t=this._rectX+this._rectWidth;this.setRectWidth(e),this.setRectX(t-e)}return this}set rectWidthFromRight(e){this.setRectWidthFromRight(e)}get rectWidthFromRight(){return this.getRectWidth()}setRectHeightFromBottom(e){if(this._rectHeight!==e){const t=this._rectY+this._rectHeight;this.setRectHeight(e),this.setRectY(t-e)}return this}set rectHeightFromBottom(e){this.setRectHeightFromBottom(e)}get rectHeightFromBottom(){return this.getRectHeight()}isRounded(){return 0!==this._cornerXRadius&&0!==this._cornerYRadius}computeShapeBounds(){let e=new Zl(this._rectX,this._rectY,this._rectX+this._rectWidth,this._rectY+this._rectHeight);return this._stroke&&(e=e.dilated(this.getLineWidth()/2)),e}createRectangleShape(){if(this.isRounded()){const e=Math.min(this._rectWidth/2,this._rectHeight/2);return Ip.roundRectangle(this._rectX,this._rectY,this._rectWidth,this._rectHeight,Math.min(e,this._cornerXRadius),Math.min(e,this._cornerYRadius)).makeImmutable()}return Ip.rectangle(this._rectX,this._rectY,this._rectWidth,this._rectHeight).makeImmutable()}invalidateRectangle(){this._shape=null,this.invalidatePath(),this.invalidateSupportedRenderers()}updatePreferredSizes(){let e=this.localPreferredWidth,t=this.localPreferredHeight;null!==e&&(e=Math.max(e,this.localMinimumWidth||0)),null!==t&&(t=Math.max(t,this.localMinimumHeight||0)),null!==e&&(this.rectWidth=this.hasStroke()?e-this.lineWidth:e),null!==t&&(this.rectHeight=this.hasStroke()?t-this.lineWidth:t)}invalidateStroke(){super.invalidateStroke(),this.updatePreferredSizes()}containsPointSelf(e){const t=this._rectX,i=this._rectY,n=this._rectWidth,r=this._rectHeight,s=this._cornerXRadius,a=this._cornerYRadius,o=this.getLineWidth()/2;let l=!0;if(this._strokePickable){const h=this.isRounded();if(!h&&"bevel"===this.getLineJoin())return super.containsPointSelf(e);const u="miter"===this.getLineJoin()&&!h;l=l&&xA.intersects(t-o,i-o,n+2*o,r+2*o,u?0:s+o,u?0:a+o,e)}return this._fillPickable?this._strokePickable?l:xA.intersects(t,i,n,r,s,a,e):!!this._strokePickable&&(l&&!xA.intersects(t+o,i+o,n-2*o,r-2*o,s-o,a-o,e))}intersectsBoundsSelf(e){return!this.computeShapeBounds().intersection(e).isEmpty()}canvasPaintSelf(e,t){HP.prototype.paintCanvas(e,this,t)}createDOMDrawable(e,t){return zP.createFromPool(e,t)}createSVGDrawable(e,t){return WP.createFromPool(e,t)}createCanvasDrawable(e,t){return HP.createFromPool(e,t)}createWebGLDrawable(e,t){return QP.createFromPool(e,t)}setShape(e){if(null!==e)throw new Error("Cannot set the shape of a Rectangle to something non-null");return this.invalidatePath(),this}getShape(){return this._shape||(this._shape=this.createRectangleShape()),this._shape}hasShape(){return!0}setCornerRadius(e){return this.setCornerXRadius(e),this.setCornerYRadius(e),this}set cornerRadius(e){this.setCornerRadius(e)}get cornerRadius(){return this.getCornerRadius()}getCornerRadius(){return this._cornerXRadius}mutate(e){return super.mutate(e)}static intersects(e,t,i,n,r,s,a){const o=a.x>=e&&a.x<=e+i&&a.y>=t&&a.y<=t+n;if(!o||r<=0||s<=0)return o;const l=Math.min(i/2,n/2);let h,u;r=Math.min(l,r),s=Math.min(l,s);let c=!1;if(a.x<e+i/2?(h=e+r,c=c||a.x>=h):(h=e+i-r,c=c||a.x<=h),c)return!0;if(a.y<t+n/2?(u=t+s,c=c||a.y>=u):(u=t+n-s,c=c||a.y<=u),c)return!0;let d=a.x-h,p=a.y-u;return d/=r,p/=s,d*=d,p*=p,d+p<=1}static rect(e,t,i,n,r){return new xA(e,t,i,n,0,0,r)}static roundedRect(e,t,i,n,r,s,a){return new xA(e,t,i,n,r,s,a)}static bounds(e,t){return new xA(e.minX,e.minY,e.width,e.height,t)}static roundedBounds(e,t,i,n){return new xA(e.minX,e.minY,e.width,e.height,t,i,n)}static dimension(e,t){return new xA(0,0,e.width,e.height,0,0,t)}}xA.prototype._mutatorKeys=["rectBounds","rectSize","rectX","rectY","rectWidth","rectHeight","cornerRadius","cornerXRadius","cornerYRadius",..._A.prototype._mutatorKeys],xA.prototype.drawableMarkFlags=aA.prototype.drawableMarkFlags.concat(["x","y","width","height","cornerXRadius","cornerYRadius"]).filter(e=>"shape"!==e),Lg.register("Rectangle",xA);class wA extends cv{constructor(e){const t=Vo()({sprites:[],spriteInstances:[],hitTestSprites:!1,renderer:"webgl"},e);super(),this._sprites=t.sprites,this._spriteInstances=t.spriteInstances,this._hitTestSprites=t.hitTestSprites,this.setRendererBitmask(af.bitmaskCanvas|af.bitmaskWebGL),this.mutate(t)}setCanvasBounds(e){this.invalidateSelf(e)}set canvasBounds(e){this.setCanvasBounds(e)}get canvasBounds(){return this.getCanvasBounds()}getCanvasBounds(){return this.getSelfBounds()}canvasPaintSelf(e,t){ZP.prototype.paintCanvas(e,this,t)}createCanvasDrawable(e,t){return ZP.createFromPool(e,t)}createWebGLDrawable(e,t){return nC.createFromPool(e,t)}containsPointSelf(e){return!!super.containsPointSelf(e)&&(!this._hitTestSprites||!!this.getSpriteInstanceFromPoint(e))}getSpriteInstanceFromPoint(e){for(let t=this._spriteInstances.length-1;t>=0;t--)if(this._spriteInstances[t].containsPoint(e))return this._spriteInstances[t];return null}getSelfShape(){return this._hitTestSprites?Ip.union(this._spriteInstances.map(e=>e.getShape())):Ip.bounds(this.selfBounds)}isPainted(){return!0}invalidatePaint(){const e=this._drawables.length;for(let t=0;t<e;t++)this._drawables[t].markDirty()}mutate(e){return super.mutate(e)}}wA.prototype._mutatorKeys=["canvasBounds"].concat(cv.prototype._mutatorKeys),Lg.register("Sprites",wA);class TA extends cv{constructor(e,t){super(t),this.setRendererBitmask(af.bitmaskWebGL),this.painterType=e}setCanvasBounds(e){return this.invalidateSelf(e),this}set canvasBounds(e){this.setCanvasBounds(e)}get canvasBounds(){return this.getCanvasBounds()}getCanvasBounds(){return this.getSelfBounds()}isPainted(){return!0}invalidatePaint(){const e=this._drawables.length;for(let t=0;t<e;t++)this._drawables[t].markDirty()}containsPointSelf(e){return!1}getSelfShape(){return new Ip}canvasPaintSelf(e,t){}renderToCanvasSelf(e,t){const i=e.canvas.width,n=e.canvas.height,r=document.createElement("canvas");r.width=i,r.height=n;const s={antialias:!0,preserveDrawingBuffer:!0},a=r.getContext("webgl",s)||r.getContext("experimental-webgl",s);_f.applyWebGLContextDefaults(a);const o=(new Mh).rowMajor(2/i,0,-1,0,-2/n,1,0,0,1);a.viewport(0,0,i,n);const l=new(0,this.painterType)(a,this);l.paint(t,o),l.dispose(),o.freeToPool(),a.flush(),e.context.setTransform(1,0,0,1,0,0),e.context.drawImage(r,0,0),e.context.restore()}createWebGLDrawable(e,t){return pC.createFromPool(e,t)}mutate(e){return super.mutate(e)}}_defineProperty(TA,"PAINTED_NOTHING",0),_defineProperty(TA,"PAINTED_SOMETHING",1),TA.prototype._mutatorKeys=["canvasBounds"].concat(cv.prototype._mutatorKeys),Lg.register("WebGLNode",TA);Lg.register("Plane",class extends xA{constructor(e){super(-2e3,-2e3,6e3,6e3,e)}});const PA=bv(e=>class extends e{constructor(){super(...arguments)}insertChild(e,t){throw new Error("Attempt to insert child into Leaf")}removeChildWithIndex(e,t){throw new Error("Attempt to remove child from Leaf")}});Lg.register("Leaf",PA);const CA=PA;class VA extends(CA(cv)){constructor(e,t,i){super(),this.localBounds=new Zl(0,0,e,t),this.mutate(i)}}Lg.register("Spacer",VA);Lg.register("HStrut",class extends VA{constructor(e,t){super(e,0,t)}});function RA(e,t,i){i&&_.each(t,t=>{void 0!==i[t]&&(e[t]=i[t])})}Lg.register("VStrut",class extends VA{constructor(e,t){super(0,e,t)}}),wo.register("mutate",RA);const NA=RA;let MA=1;const kA=new al(0,0);class LA extends(tA(Object)){constructor(e,t,i){const n=Vo()({hitTestPixels:!1,pickable:!0,image:e},i);super(),this.id=MA++,this.offset=t,this.pickable=n.pickable,this.shape=null,this.imageData=null,this.setImage(e),NA(this,Object.keys(tA.DEFAULT_OPTIONS),n)}get width(){return this.imageWidth}get height(){return this.imageHeight}getShape(){if(!this.pickable)return new Ip;if(!this.shape){if(this.hitTestPixels){if(this.ensureImageData(),!this.imageData)return new Ip;this.shape=tA.hitTestDataToShape(this.imageData,this.width,this.height)}else{if(!this.width||!this.height)return new Ip;this.shape=Ip.rect(0,0,this.width,this.height)}this.shape=this.shape.transformed(Mh.translation(-this.offset.x,-this.offset.y))}return this.shape}ensureImageData(){!this.imageData&&this.width&&this.height&&(this.imageData=tA.getHitTestData(this.image,this.width,this.height))}containsPoint(e){if(!this.pickable)return!1;const t=this.width,i=this.height;if(!t&&!i)return!1;const n=kA.set(e).add(this.offset);return!(n.x<0||n.y<0||n.x>t||n.y>i)&&(!this.hitTestPixels||(this.ensureImageData(),!!this.imageData&&tA.testHitTestData(this.imageData,t,i,n)))}}Lg.register("SpriteImage",LA);Lg.register("Sprite",class{constructor(e){this.imageProperty=new ty(e)}getShape(){return this.imageProperty.value.getShape()}containsPoint(e){return this.imageProperty.value.containsPoint(e)}});class IA{constructor(e){this.primary=null,this.changeCallback=e,this.notifyChangeCallback=this.notifyChanged.bind(this),this.updateSecondaryListener=this.updateSecondary.bind(this),this.secondaryPropertyCountsMap={}}setPrimary(e){e!==this.primary&&(this.detachPrimary(this.primary),this.primary=e,this.attachPrimary(e),this.notifyChangeCallback())}clean(){this.detachPrimary(this.primary),this.primary=null}updateSecondary(e,t,i){const n=this.secondaryPropertyCountsMap[i.id];for(let r=0;r<n;r++)this.attachSecondary(e);this.notifyChangeCallback()}attachPrimary(e){if(e instanceof _g)this.secondaryLazyLinkProperty(e),this.attachSecondary(e.get());else if(e instanceof Hg)e.setImmutable();else if(e instanceof pE)for(let t=0;t<e.stops.length;t++)this.attachPrimary(e.stops[t].color)}detachPrimary(e){if(e instanceof _g)this.secondaryUnlinkProperty(e);else if(e instanceof pE)for(let t=0;t<e.stops.length;t++)this.detachPrimary(e.stops[t].color)}attachSecondary(e){e instanceof Hg&&e.setImmutable()}notifyChanged(){this.primary instanceof pE&&this.primary.invalidateCanvasGradient(),this.changeCallback()}secondaryLazyLinkProperty(e){const t=e.id;this.secondaryPropertyCountsMap[t]?this.secondaryPropertyCountsMap[t]++:(this.secondaryPropertyCountsMap[t]=1,e.lazyLink(this.updateSecondaryListener))}secondaryUnlinkProperty(e){const t=e.id,i=--this.secondaryPropertyCountsMap[t];0===i&&(delete this.secondaryPropertyCountsMap[t],e.isDisposed||e.unlink(this.updateSecondaryListener))}}Lg.register("PaintObserver",IA);const BA=IA;class DA extends ty{constructor(e,t){const i=NE.toColor(e),n=Vo()({luminanceFactor:0,valueComparisonStrategy:"equalsFunction"},t);super(i,n),this._paint=null,this._luminanceFactor=n.luminanceFactor,this._changeListener=this.invalidatePaint.bind(this),this._paintObserver=new BA(this._changeListener),this.setPaint(e)}setPaint(e){this._paint=e,this._paintObserver.setPrimary(e)}set paint(e){this.setPaint(e)}get paint(){return this.getPaint()}getPaint(){return this._paint}setLuminanceFactor(e){this.luminanceFactor!==e&&(this._luminanceFactor=e,this.invalidatePaint())}set luminanceFactor(e){this.setLuminanceFactor(e)}get luminanceFactor(){return this.getLuminanceFactor()}getLuminanceFactor(){return this._luminanceFactor}invalidatePaint(){this.value=NE.toColor(this._paint).colorUtilsBrightness(this._luminanceFactor)}dispose(){this.paint=null,super.dispose()}}Lg.register("PaintColorProperty",DA);class OA{constructor(){this.initialize()}initialize(){this.svgBlock=null,this.fillStyle="none",this.strokeStyle="none",this.fillPaint=null,this.strokePaint=null,this.updateBaseStyle(),this.strokeDetailStyle=""}dispose(){this.releaseFillPaint(),this.releaseStrokePaint()}releaseFillPaint(){this.fillPaint&&(this.svgBlock.decrementPaint(this.fillPaint),this.fillPaint=null)}releaseStrokePaint(){this.strokePaint&&(this.svgBlock.decrementPaint(this.strokePaint),this.strokePaint=null)}updateFill(e,t){const i=qA(t,e);t!==this.fillPaint&&(this.releaseFillPaint(),t&&t.isPaint&&(this.fillPaint=t,e.incrementPaint(t))),i!==this.fillStyle&&(this.fillStyle=i,this.updateBaseStyle())}updateStroke(e,t){const i=qA(t,e);t!==this.strokePaint&&(this.releaseStrokePaint(),t&&t.isPaint&&(this.strokePaint=t,e.incrementPaint(t))),i!==this.strokeStyle&&(this.strokeStyle=i,this.updateBaseStyle())}updateBaseStyle(){this.baseStyle=`fill: ${this.fillStyle}; stroke: ${this.strokeStyle};`}updateStrokeDetailStyle(e){let t="";const i=e.getLineWidth();1!==i&&(t+=`stroke-width: ${i};`);const n=e.getLineCap();"butt"!==n&&(t+=`stroke-linecap: ${n};`);const r=e.getLineJoin();"miter"!==r&&(t+=`stroke-linejoin: ${r};`),t+=`stroke-miterlimit: ${e.getMiterLimit()};`,e.hasLineDash()&&(t+=`stroke-dasharray: ${e.getLineDash().join(",")};`,t+=`stroke-dashoffset: ${e.getLineDashOffset()};`),this.strokeDetailStyle=t}updateSVGBlock(e){const t=this.svgBlock;t&&(this.fillPaint&&t.decrementPaint(this.fillPaint),this.strokePaint&&t.decrementPaint(this.strokePaint)),this.svgBlock=e,this.fillPaint&&e.incrementPaint(this.fillPaint),this.strokePaint&&e.incrementPaint(this.strokePaint)}}function qA(e,t){return e?e.toCSS?e.toCSS():e.isPaint?`url(#${e.id}-${t?t.id:"noblock"})`:e:"none"}Lg.register("PaintSVGState",OA);const YA=OA,HA=new Hg("transparent");class GA{constructor(e,t,i){this.lastColor=null,this.initialize(e,t,i)}isActiveSVGGradientStop(){return!!this.svgGradient}initialize(e,t,i){return this.svgGradient=e,this.color=i,this.ratio=t,this.svgElement=this.svgElement||document.createElementNS(lf,"stop"),this.svgElement.setAttribute("offset",""+t),this.dirty=!0,this.update(),this.propertyListener=this.propertyListener||this.onPropertyChange.bind(this),this.colorListener=this.colorListener||this.markDirty.bind(this),i instanceof _g?(i.lazyLink(this.propertyListener),i.value instanceof Hg&&(i.value.changeEmitter.addListener(this.colorListener),this.lastColor=i.value)):i instanceof Hg&&i.changeEmitter.addListener(this.colorListener),this}onPropertyChange(e,t){null!==this.lastColor&&(this.lastColor.changeEmitter.removeListener(this.colorListener),this.lastColor=null),e instanceof Hg&&(e.changeEmitter.addListener(this.colorListener),this.lastColor=e),this.markDirty()}markDirty(){this.dirty=!0,this.svgGradient.markDirty()}update(){if(!this.dirty)return;this.dirty=!1;let e=this.color;e instanceof _g&&(e=e.value),null===e&&(e="transparent"),"string"==typeof e?HA.setCSS(e):HA.set(e);const t=`stop-opacity: ${HA.a.toFixed(20)};`;HA.alpha=1;const i=`stop-color: ${HA.toCSS()};`;this.svgElement.setAttribute("style",`${i} ${t}`)}dispose(){const e=this.color;this.lastColor&&(this.lastColor.changeEmitter.removeListener(this.colorListener),this.lastColor=null),e instanceof _g?e.hasListener(this.propertyListener)&&e.unlink(this.propertyListener):e instanceof Hg&&e.changeEmitter.removeListener(this.colorListener),this.color=null,this.svgGradient=null,this.freeToPool()}freeToPool(){GA.pool.freeToPool(this)}}_defineProperty(GA,"pool",new Mo(GA)),Lg.register("SVGGradientStop",GA);const FA=GA;class zA{constructor(e,t){this.initialize(e,t)}isActiveSVGGradient(){return!!this.svgBlock}initialize(e,t){this.svgBlock=e,this.gradient=t;const i=void 0!==this.definition;this.definition=this.definition||this.createDefinition(),i||this.definition.setAttribute("gradientUnits","userSpaceOnUse"),t.transformMatrix?this.definition.setAttribute("gradientTransform",t.transformMatrix.getSVGTransform()):this.definition.removeAttribute("gradientTransform");const n=t.getSVGStops();this.stops=Yp(this.stops);for(let r=0;r<n.length;r++){const e=new FA(this,n[r].ratio,n[r].color);this.stops.push(e),this.definition.appendChild(e.svgElement)}this.dirty=!1}markDirty(){if(!this.dirty){const e=this;this.dirty=!0,e.svgBlock.markDirtyGradient(this)}}update(){if(this.dirty){this.dirty=!1;for(let e=0;e<this.stops.length;e++)this.stops[e].update()}}dispose(){for(let e=0;e<this.stops.length;e++){const t=this.stops[e];this.definition.removeChild(t.svgElement),t.dispose()}Yp(this.stops),this.svgBlock=null,this.gradient=null,this.freeToPool()}}Lg.register("SVGGradient",zA);class UA extends zA{constructor(e,t){super(e,t)}initialize(e,t){super.initialize(e,t);const i=t;return this.definition.setAttribute("x1",""+i.start.x),this.definition.setAttribute("y1",""+i.start.y),this.definition.setAttribute("x2",""+i.end.x),this.definition.setAttribute("y2",""+i.end.y),this}createDefinition(){return document.createElementNS(lf,"linearGradient")}freeToPool(){UA.pool.freeToPool(this)}}_defineProperty(UA,"pool",new Mo(UA)),Lg.register("SVGLinearGradient",UA);class WA extends zA{constructor(e,t){super(e,t)}initialize(e,t){return super.initialize(e,t),this.definition.setAttribute("cx",""+t.largePoint.x),this.definition.setAttribute("cy",""+t.largePoint.y),this.definition.setAttribute("r",""+t.maxRadius),this.definition.setAttribute("fx",""+t.focalPoint.x),this.definition.setAttribute("fy",""+t.focalPoint.y),this}createDefinition(){return document.createElementNS(lf,"radialGradient")}freeToPool(){WA.pool.freeToPool(this)}}_defineProperty(WA,"pool",new Mo(WA)),Lg.register("SVGRadialGradient",WA);class XA{constructor(e){this.initialize(e)}initialize(e){const t=void 0!==this.definition;return this.definition=this.definition||document.createElementNS(lf,"pattern"),t||(this.definition.setAttribute("patternUnits","userSpaceOnUse"),this.definition.setAttribute("patternContentUnits","userSpaceOnUse")),e.transformMatrix?this.definition.setAttribute("patternTransform",e.transformMatrix.getSVGTransform()):this.definition.removeAttribute("patternTransform"),this.definition.setAttribute("x","0"),this.definition.setAttribute("y","0"),this.definition.setAttribute("width",""+e.image.width),this.definition.setAttribute("height",""+e.image.height),this.imageElement=this.imageElement||document.createElementNS(lf,"image"),this.imageElement.setAttribute("x","0"),this.imageElement.setAttribute("y","0"),this.imageElement.setAttribute("width",e.image.width+"px"),this.imageElement.setAttribute("height",e.image.height+"px"),this.imageElement.setAttributeNS(uf,"xlink:href",e.image.src),t||this.definition.appendChild(this.imageElement),this}update(){}dispose(){this.freeToPool()}freeToPool(){XA.pool.freeToPool(this)}}_defineProperty(XA,"pool",new Mo(XA)),Lg.register("SVGPattern",XA);class jA{constructor(e,t){_defineProperty(this,"_matrices",null),_defineProperty(this,"_dirtyIndex",0),_defineProperty(this,"_listeners",[]),_defineProperty(this,"_nodeTransformListeners",[]);const i=Vo()({isStatic:!1},t);this._isStatic=i.isStatic,this.trail=e,this._nodeTransformListeners=[];for(let n=1;n<this.trail.length;n++){const t=(e=>()=>{this.onTransformChange(e)})(n-1);this._nodeTransformListeners.push(t),e.nodes[n].transformEmitter.addListener(t)}}dispose(){for(let e=1;e<this.trail.length;e++){const t=this._nodeTransformListeners[e-1];this.trail.nodes[e].transformEmitter.hasListener(t)&&this.trail.nodes[e].transformEmitter.removeListener(t)}}addListener(e){this._listeners.push(e)}removeListener(e){const t=_.indexOf(this._listeners,e);this._listeners.splice(t,1)}notifyListeners(){let e=this._listeners;this._isStatic||(e=e.slice());const t=e.length;for(let i=0;i<t;i++)e[i]()}onTransformChange(e){this._dirtyIndex=Math.min(this._dirtyIndex,e),this.notifyListeners()}getMatrix(){if(null===this._matrices){this._matrices=[];for(let e=1;e<this.trail.length;e++)this._matrices.push(new Mh)}if(this._matrices.length<=0)return Mh.IDENTITY;const e=this._matrices.length;for(let t=this._dirtyIndex;t<e;t++){const e=this.trail.nodes[t+1].matrix;0===t?this._matrices[t].set(e):(this._matrices[t].set(this._matrices[t-1]),this._matrices[t].multiplyMatrix(e))}return this._dirtyIndex=e,this._matrices[e-1]}get matrix(){return this.getMatrix()}}Lg.register("TransformTracker",jA);const QA=jA;class KA{constructor(e,t){t=Po({isStatic:!1},t),this.isStatic=t.isStatic,this.trail=e,this._listeners=[],this.trailVisibleProperty=new mg(this.trail.isVisible()),this._nodeVisibilityListeners=[];for(let i=0;i<this.trail.length;i++){const t=()=>{this.trailVisibleProperty.set(e.isVisible())};this._nodeVisibilityListeners.push(t),e.nodes[i].visibleProperty.link(t)}this.boundTrailVisibilityChangedListener=this.onVisibilityChange.bind(this),this.trailVisibleProperty.link(this.boundTrailVisibilityChangedListener)}addListener(e){this._listeners.push(e)}removeListener(e){const t=_.indexOf(this._listeners,e);this._listeners.splice(t,1)}dispose(){for(let e=0;e<this.trail.length;e++){const t=this._nodeVisibilityListeners[e];this.trail.nodes[e].visibleProperty.hasListener(t)&&this.trail.nodes[e].visibleProperty.removeListener(t)}this.trailVisibleProperty.unlink(this.boundTrailVisibilityChangedListener)}onVisibilityChange(){this.notifyListeners()}notifyListeners(){let e=this._listeners;this._isStatic||(e=e.slice());const t=e.length;for(let i=0;i<t;i++)e[i]()}}Lg.register("TrailVisibilityTracker",KA);const ZA=KA,JA={mutateNode(e,t){t?e.setPDOMAttribute("aria-haspopup",t):e.removePDOMAttribute("aria-haspopup"),e.positionInPDOM=!!t}};Lg.register("AriaHasPopUpMutator",JA);const $A=JA;class eb extends cv{constructor(e){const t=Vo()({headingLevel:1},e);super(t),this.tagName="h"+t.headingLevel,this.focusHighlight="invisible";const i={blur:()=>{this.focusable=!1}};this.addInputListener(i),this.disposeFocusableHeadingNode=()=>{this.removeInputListener(i)}}focus(){this.focusable=!0,super.focus()}dispose(){this.disposeFocusableHeadingNode(),super.dispose()}}Lg.register("FocusableHeadingNode",eb);class tb{constructor(e){const t=this;this.outputUtteranceProperty=new ty(new ib(document.title,"off")),this.linearDOM=this.getLinearDOMElements(e),this.activeElement=null,this.activeLine=null,this.letterPosition=0,this.positionInLine=0,this.wordPosition=0,this.observers=[],this.keyState={},document.addEventListener("keydown",t=>{let i;this.keyState[t.keyCode]=!0;const n=t.shiftKey?"PREVIOUS":"NEXT";if(this.linearDOM=this.getLinearDOMElements(e),this.updateLiveElementList(),!this.activeElement||"application"!==this.activeElement.getAttribute("role")){if(this.keyState[40]&&!this.keyState[45])i=this.readNextPreviousLine("NEXT");else if(this.keyState[38]&&!this.keyState[45])i=this.readNextPreviousLine("PREVIOUS");else if(this.keyState[72]){const e=["H1","H2","H3","H4","H5","H6"];i=this.readNextPreviousHeading(e,n)}else this.keyState[9]||(this.keyState[39]&&!this.keyState[17]?i=this.readNextPreviousCharacter("NEXT"):this.keyState[37]&&!this.keyState[17]?i=this.readNextPreviousCharacter("PREVIOUS"):this.keyState[37]&&this.keyState[17]?i=this.readNextPreviousWord("PREVIOUS"):this.keyState[39]&&this.keyState[17]?i=this.readNextPreviousWord("NEXT"):this.keyState[45]&&this.keyState[38]?i=this.readActiveLine():this.keyState[49]?i=this.readNextPreviousHeading(["H1"],n):this.keyState[50]?i=this.readNextPreviousHeading(["H2"],n):this.keyState[51]?i=this.readNextPreviousHeading(["H3"],n):this.keyState[52]?i=this.readNextPreviousHeading(["H4"],n):this.keyState[53]?i=this.readNextPreviousHeading(["H5"],n):this.keyState[54]?i=this.readNextPreviousHeading(["H6"],n):this.keyState[70]?i=this.readNextPreviousFormElement(n):this.keyState[66]?i=this.readNextPreviousButton(n):this.keyState[76]?i=this.readNextPreviousList(n):this.keyState[73]?i=this.readNextPreviousListItem(n):this.keyState[45]&&this.keyState[40]&&this.readEntireDocument());this.activeElement&&this.isFocusable(this.activeElement)&&this.activeElement.focus()," "===i&&(i="space"),i&&this.outputUtteranceProperty.set(new ib(i,"off"))}}),document.addEventListener("keyup",e=>{this.keyState[e.keyCode]=!1}),document.addEventListener("focusin",(function(e){if(e.target!==t.activeElement){t.activeElement=e.target;const i=!0,n=t.getAccessibleText(this.activeElement,i);if(n){const e=t.activeElement.getAttribute("aria-live");t.outputUtteranceProperty.set(new ib(n,e))}}}))}getLinearDOMElements(e){const t=e.getElementsByTagName("*"),i=[];for(let n=0;n<t.length;n++)t[n].nodeType===Node.ELEMENT_NODE&&(i[n]=t[n]);return i}getLiveRole(e){let t=null;return["log","status","alert","progressbar","marquee","timer","assertive","polite"].forEach(i=>{e.getAttribute("aria-live")!==i&&e.getAttribute("role")!==i||(t=i)}),t}getNextPreviousElement(e){this.activeElement||(this.activeElement=this.linearDOM[0]);const t="NEXT"===e?1:-1,i=this.linearDOM.indexOf(this.activeElement)+t;return this.linearDOM[i]}getLabel(e){const t=document.getElementsByTagName("label");let i;return Array.prototype.forEach.call(t,e=>{e.getAttribute("for")&&(i=e)}),i}getAccessibleText(e,t){let i="";if(!e)return"End of Document";if("ScreenView"===e.getAttribute("class"))return null;if("HEADER"===e.tagName)return null;if("SECTION"===e.tagName)return null;if("LABEL"===e.tagName)return null;let n=e;for(;n.parentElement;){if(n.getAttribute("aria-hidden")||n.hidden)return null;n=n.parentElement}if("P"===e.tagName&&(i+=e.textContent),"H1"===e.tagName&&(i+="Heading Level 1, "+e.textContent),"H2"===e.tagName&&(i+="Heading Level 2, "+e.textContent),"H3"===e.tagName&&(i+="Heading Level 3, "+e.textContent),"UL"===e.tagName){const t=e.children.length;i+=`List with ${t} items`}if("LI"===e.tagName&&(i+="List Item: "+e.textContent),"BUTTON"===e.tagName){const t=" Button";if(e.getAttribute("aria-pressed")){let n=" toggle";const r=" pressed",s=" not";n+=t+",","true"===e.getAttribute("aria-pressed")?n+=r:n+=s+r,i+=e.textContent+","+n}else i+=e.textContent+t}if("INPUT"===e.tagName&&("reset"===e.type&&(i+=e.getAttribute("value")+" Button"),"checkbox"===e.type)){const t=this.getLabel(e.id).textContent;if("switch"===e.getAttribute("role")){const n=e.getAttribute("aria-checked");if(n){i+=`${t+", "}switch, ${"true"===n?"On":"Off"}`}}else{const t=e.checked?" Checked":" Not Checked";i+=`${e.textContent} Checkbox${t}`}}if(t){i.length>0&&(i+=",");const t=e.getAttribute("aria-label");t&&(i+=" "+t+",");const r=e.getAttribute("aria-labelledBy");if(r){const e=document.getElementById(r).textContent;i+=" "+e+","}let s;for(n=e;n.parentElement;){if(s=n.getAttribute("role"),"document"===s||"application"===s){i+=" "+s+",";break}n=n.parentElement}e.getAttribute("role")&&(s=e.getAttribute("role"),"button"===s&&(i+=" Button")),e.draggable&&(i+=" draggable,"),"true"===e.getAttribute("aria-grabbed")&&(i+=" grabbed,");const a=e.getAttribute("aria-describedby");if(a){let e,t;a.split(" ").forEach(n=>{e=document.getElementById(n),t=e.textContent,i+=" "+t})}}return","===i[i.length-1]&&(i=i.slice(0,-1)),i}getNextPreviousElementWithPDOMContent(e){let t;for(;!t;)this.activeElement=this.getNextPreviousElement(e),t=this.getAccessibleText(this.activeElement,!1);return this.activeElement}getNextPreviousElementWithRole(e,t){let i=null;const n="NEXT"===t?1:-1;this.activeElement||(this.activeElement=this.linearDOM[0]);let r=this.linearDOM.indexOf(this.activeElement)+n;for(;this.linearDOM[r];){for(let t=0;t<e.length;t++){const n=this.linearDOM[r].tagName,s=this.linearDOM[r].type,a=this.linearDOM[r].getAttribute("role"),o=e[t];if(n===o||a===o||s===o){i=this.linearDOM[r];break}}if(i)break;r+=n}return i}readNextPreviousLine(e){let t="";this.letterPosition=0,this.wordPosition=0,this.activeElement||(this.activeElement=this.getNextPreviousElementWithPDOMContent(e));let i=this.getAccessibleText(this.activeElement,!1).split(" ");if("PREVIOUS"===e&&(this.positionInLine=this.positionInLine-30),!i[this.positionInLine]){this.positionInLine=0;const t=this.activeElement;this.activeElement=this.getNextPreviousElementWithPDOMContent(e),i=this.getAccessibleText(this.activeElement,!1).split(" "),this.activeElement||(this.activeElement=t)}const n=this.positionInLine+15;for(let r=this.positionInLine;r<n;r++)if(i[r]){if(t+=i[r],this.positionInLine+=1,!i[r+1]){this.positionInLine+=15-this.positionInLine%15;break}t+=" "}return this.activeLine=t,t}readActiveLine(){let e="";this.activeLine||(this.activeLine=this.readNextPreviousLine("NEXT"));const t=this.activeLine.split(" ");for(let i=0;i<15;i++)if(t[i]){if(e+=t[i],!t[i+1])break;e+=" "}return e}readNextPreviousWord(e){this.activeLine||(this.activeLine=this.readNextPreviousLine(e));const t=this.activeLine.split(" ");let i,n;"NEXT"===e?(n=t.length,i=1):"PREVIOUS"===e&&(n=0,i=-2),this.wordPosition===n&&(this.activeLine=this.readNextPreviousLine(e));const r=t[this.wordPosition];return this.wordPosition+=i,r}readNextPreviousHeading(e,t){let i,n,r;for(;!i;)r=this.activeElement,n=this.getNextPreviousElementWithRole(e,t),this.activeElement=n,i=this.getAccessibleText(n);if(!n){this.activeElement=r;const i="NEXT"===t?"more":"previous";if(1===e.length){const t=`No ${i} headings at `,n=e[0];return t+("H1"===n?"Level 1":"H2"===n?"Level 2":"H3"===n?"Level 3":"H4"===n?"Level 4":"H5"===n?"Level 5":"Level 6")}return`No ${i} headings`}return this.activeElement=n,i}readNextPreviousButton(e){const t=["button","BUTTON","submit","reset"];let i,n,r;for(;!n;)r=this.activeElement,i=this.getNextPreviousElementWithRole(t,e),this.activeElement=i,n=this.getAccessibleText(i,!0);if(!i){return this.activeElement=r,`No ${"NEXT"===e?"more":"previous"} buttons`}return this.activeElement=i,n}readNextPreviousFormElement(e){const t=["INPUT","BUTTON"].concat(["button"]);let i,n,r;for(;!n;)r=this.activeElement,i=this.getNextPreviousElementWithRole(t,e),this.activeElement=i,n=this.getAccessibleText(i,!0);if("End of Document"===n){return this.activeElement=r,`No ${"NEXT"===e?"next":"previous"} form field`}return this.activeElement=i,n}readNextPreviousListItem(e){let t;this.activeElement||(this.activeElement=this.getNextPreviousElementWithPDOMContent(e));const i=this.activeElement.parentElement;if("UL"===i.tagName||"OL"===i.tagName){const n="NEXT"===e?1:-1;let r=Array.prototype.indexOf.call(i.children,this.activeElement)+n;for(;i.children[r];){if(t=this.getAccessibleText(i.children[r]),t){this.activeElement=i.children[r];break}r+=n}t||(t=this.readNextPreviousList(e))}else t=this.readNextPreviousList(e);if(!t){return`No ${"NEXT"===e?"more":"previous"} list items`}return t}readNextPreviousList(e){this.activeElement||(this.activeElement=this.getNextPreviousElementWithPDOMContent(e));const t=this.activeElement.parentElement;let i;"UL"!==t.tagName&&"OL"!==t.tagName||(i=this.activeElement,this.activeElement=t);const n=this.getNextPreviousElementWithRole(["UL","OL"],e);if(!n){return i&&(this.activeElement=i),`No ${"NEXT"===e?"more":"previous"} lists`}const r=this.getAccessibleText(n);let s="";const a=n.children[0];return a&&(s=this.getAccessibleText(a),this.activeElement=a),`${r}, ${s}`}readNextPreviousCharacter(e){let t,i,n;this.activeLine||(this.activeLine=this.readNextPreviousLine("NEXT")),"NEXT"===e?(t=this.activeLine.length,i=1,n=0):"PREVIOUS"===e&&(t=2,i=-1,n=-2),this.letterPosition===t&&(this.activeLine=this.readNextPreviousLine(e),this.letterPosition=this.activeLine.length);const r=this.activeLine[this.letterPosition+n];return this.letterPosition+=i,r}updateLiveElementList(){for(let e=0;e<this.observers.length;e++)this.observers[e]&&this.observers[e].disconnect();this.observers=[];for(let e=0;e<this.linearDOM.length;e++){const t=this.linearDOM[e];if(this.getLiveRole(t)){const e=e=>{e.forEach(e=>{let t,i=e.target;for(;!t;)t=this.getLiveRole(i),i=i.parentElement;if(e.addedNodes[0]){const i=e.addedNodes[0].data;this.outputUtteranceProperty.set(new ib(i,t))}})},i=new MutationObserver(t=>{e(t)}),n={childList:!0,subtree:!0};i.observe(t,n),this.observers.push(i)}}}readEntireDocument(){let e=this.getAccessibleText(this.activeElement),t=this.activeElement;for(;"End of Document"!==e;)t=this.activeElement,e=this.readNextPreviousLine("NEXT"),"End of Document"===e&&(this.activeElement=t),this.outputUtteranceProperty.set(new ib(e,"polite"))}isFocusable(e){let t=!1;return["tabindex","BUTTON","INPUT"].forEach(i=>{(e.getAttribute(i)||e.tagName===i)&&(t=!0)}),t}}Lg.register("Cursor",tb);class ib{constructor(e,t){this.text=e,this.liveRole=t}}const nb={validateValidator:!1},rb=[],sb=(["name","phetioType","phetioDocumentation","phetioPrivate"].concat(Ho.VALIDATOR_KEYS),e=>e.phetioType),ab=e=>e.name;class ob extends Km{constructor(e){const t=Vo()({parameters:rb,hasListenerOrderDependencies:!1,phetioPlayback:Km.DEFAULT_OPTIONS.phetioPlayback,phetioEventMetadata:Km.DEFAULT_OPTIONS.phetioEventMetadata,phetioDocumentation:""},e),i=t.parameters.filter(sb);t.phetioType=t.phetioOuterType(i.map(sb)),t.phetioPlayback&&(t.phetioEventMetadata=t.phetioEventMetadata||{},t.phetioEventMetadata.dataKeys=t.parameters.map(ab)),t.phetioDocumentation=ob.getPhetioDocumentation(t.phetioDocumentation,i),super(t),this.parameters=t.parameters}static validateParameters(e,t){Fo(e,{valueType:Array});let i=!1;for(let n=0;n<e.length;n++){const t=e[n];i=i||t.phetioPrivate;for(const e in t);Ho.validateValidator(t)}}validateArguments(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];for(let n=0;n<this.parameters.length;n++){const e=this.parameters[n];e.phetioType&&e.valueType}}getValidationErrors(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.parameters.map((e,i)=>Ho.getValidationError(t[i],e,nb))}getPhetioData(){let e=null;if(this.parameters.length>0){e={};for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];for(let t=0;t<this.parameters.length;t++){const n=this.parameters[t];n.phetioPrivate||(e[n.name]=n.phetioType.toStateObject(i[t]))}}return e}static getPhetioDocumentation(e,t){return e+(0===t.length?"<br>No parameters.":`<br>The parameters are:<br/><ol>${t.map(e=>{const t=e.phetioDocumentation?" - "+e.phetioDocumentation:"";return`<li>${e.name}: ${e.phetioType.typeName}${t}</li>`}).join("<br/>")}</ol>`)}}ko.register("PhetioDataHandler",ob);const lb=ob;class hb extends lb{constructor(e){const t=Vo()({phetioOuterType:hb.EmitterIO,phetioState:!1},e);super(t),this.tinyEmitter=new np(null,t.hasListenerOrderDependencies)}emit(){Lm.PHET_IO_ENABLED&&this.isPhetioInstrumented()&&this.phetioStartEvent("emitted",{data:this.getPhetioData(...arguments)}),this.tinyEmitter.emit(...arguments),Lm.PHET_IO_ENABLED&&this.isPhetioInstrumented()&&this.phetioEndEvent()}dispose(){this.tinyEmitter.dispose(),super.dispose()}addListener(e){this.tinyEmitter.addListener(e)}removeListener(e){this.tinyEmitter.removeListener(e)}removeAllListeners(){this.tinyEmitter.removeAllListeners()}hasListener(e){return this.tinyEmitter.hasListener(e)}hasListeners(){return this.tinyEmitter.hasListeners()}getListenerCount(){return this.tinyEmitter.getListenerCount()}debug(e){const t=function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return console.log(e,...i)};return this.addListener(t),t}}me=hb,_defineProperty(hb,"EmitterIO",e=>{const t=e.map(ub).join(",");return cb.has(t)||cb.set(t,new el(`EmitterIO<${e.map(ub).join(", ")}>`,{valueType:me,documentation:"Emits when an event occurs and calls added listeners.",parameterTypes:e,events:["emitted"],metadataDefaults:{phetioState:!1},methods:{addListener:{returnType:sg,parameterTypes:[eg(sg,e)],implementation:me.prototype.addListener,documentation:"Adds a listener which will be called when the emitter emits."},removeListener:{returnType:sg,parameterTypes:[eg(sg,e)],implementation:me.prototype.removeListener,documentation:"Remove a listener."},emit:{returnType:sg,parameterTypes:e,implementation:function(){this.emit(...arguments)},documentation:"Emits a single event to all listeners.",invocableForReadOnlyElements:!1},getValidationErrors:{returnType:xh(ng(Om)),parameterTypes:e,implementation:function(){return this.getValidationErrors(...arguments)},documentation:"Checks to see if the proposed values are valid. Returns an array of length N where each element is an error (string) or null if the value is valid."}}})),cb.get(t)});const ub=e=>e.typeName,cb=new yh;ko.register("Emitter",hb);class db{constructor(e){this.speakingStartedEmitter=new hb({parameters:[{valueType:Object}]}),this.speakingEndedEmitter=new hb({parameters:[{valueType:Object}]}),this.speaking=!1,this.politeUtterances=[];const t=navigator.userAgent,i=t.match(/Windows/),n=!!(t.match(/Version\/[5-9]\./)&&t.match(/Safari\//)&&t.match(/AppleWebKit/));window.speechSynthesis&&SpeechSynthesisUtterance&&window.speechSynthesis.speak?(this.synth=window.speechSynthesis,e.outputUtteranceProperty.link(e=>{const t=new SpeechSynthesisUtterance(e.text);let r;if(t.addEventListener("start",t=>{this.speakingStartedEmitter.emit(e)}),t.addEventListener("end",t=>{this.speakingEndedEmitter.emit(e)}),this.synth.getVoices().forEach(e=>{e.default&&(r=e)}),t.voice=r,t.rate=1.2,"assertive"!==e.liveRole&&"off"!==e.liveRole&&e.liveRole){if("polite"===e.liveRole)if(n){this.politeUtterances.push(t);const e=()=>{this.speaking=!0;const e=this.politeUtterances.shift();e?this.synth.speak(e):this.speaking=!1};if(this.speaking)setTimeout(()=>{e()},2e3);else{this.synth.speak(t);const e=this.politeUtterances.indexOf(t);e>0&&this.politeUtterances.splice(e,1)}}else this.synth.speak(t)}else this.politeUtterances=[],this.speaking=!0,i?(this.synth.pause(),this.synth.cancel(),this.synth.speak(t),this.synth.resume()):(this.synth.cancel(),this.synth.speak(t))})):e.outputUtteranceProperty.link(()=>{this.speakingStartedEmitter.emit({text:"Sorry! Web Speech API not supported on this platform."})})}}Lg.register("Reader",db);const pb=[];class mb extends lb{constructor(e,t){var i;const n=Vo()({parameters:pb,phetioOuterType:mb.PhetioActionIO,phetioState:!1,phetioReadOnly:Km.DEFAULT_OPTIONS.phetioReadOnly,phetioHighFrequency:Km.DEFAULT_OPTIONS.phetioHighFrequency,phetioEventType:Km.DEFAULT_OPTIONS.phetioEventType,phetioDocumentation:"A class that wraps a function, adding API to execute that function and data stream capture."},t);super(n),this.action=e,this.isExecutingCount=0,this.disposeOnExecuteCompletion=!1,this.executedEmitter=new hb({parameters:n.parameters,tandem:null===(i=n.tandem)||void 0===i?void 0:i.createTandem("executedEmitter"),hasListenerOrderDependencies:n.hasListenerOrderDependencies,phetioState:n.phetioState,phetioReadOnly:n.phetioReadOnly,phetioHighFrequency:n.phetioHighFrequency,phetioEventType:n.phetioEventType,phetioDocumentation:"Emitter that emits when this actions work is complete"}),this.disposePhetioAction=()=>{this.executedEmitter.dispose()}}execute(){this.isExecutingCount++;for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];Lm.PHET_IO_ENABLED&&this.isPhetioInstrumented()&&this.phetioStartEvent("executed",{data:this.getPhetioData(...t)}),this.action.apply(null,t),this.executedEmitter.emit(...t),Lm.PHET_IO_ENABLED&&this.isPhetioInstrumented()&&this.phetioEndEvent(),this.isExecutingCount--,this.disposeOnExecuteCompletion&&0===this.isExecutingCount&&(this.disposePhetioAction(),this.disposeOnExecuteCompletion=!1)}dispose(){this.isExecutingCount>0?this.disposeOnExecuteCompletion=!0:this.disposePhetioAction(),super.dispose()}}ge=mb,_defineProperty(mb,"PhetioActionIO",e=>{const t=e.map(gb).join(",");return fb.has(t)||fb.set(t,new el(`PhetioActionIO<${e.map(gb).join(", ")}>`,{valueType:ge,documentation:"Executes when an event occurs",events:["executed"],parameterTypes:e,metadataDefaults:{phetioState:!1},methods:{execute:{returnType:sg,parameterTypes:e,implementation:function(){this.execute(...arguments)},documentation:"Executes the function the PhetioAction is wrapping.",invocableForReadOnlyElements:!1},getValidationErrors:{returnType:xh(ng(Om)),parameterTypes:e,implementation:function(){return this.getValidationErrors(...arguments)},documentation:"Checks to see if the proposed values are valid. Returns an array of length N where each element is an error (string) or null if the value is valid."}}})),fb.get(t)});const gb=e=>e.typeName,fb=new yh;zo.register("PhetioAction",mb);const yb=mb,Eb=new gm;ko.register("stepTimer",Eb);const vb=Eb;class Ab{constructor(e){var t,i;_defineProperty(this,"keyState",{}),_defineProperty(this,"_lastKeyDown",null),_defineProperty(this,"attachedToDocument",!1),_defineProperty(this,"documentKeyupListener",null),_defineProperty(this,"documentKeydownListener",null),_defineProperty(this,"_enabled",!0),_defineProperty(this,"keydownEmitter",new hb({parameters:[{valueType:KeyboardEvent}]})),_defineProperty(this,"keyupEmitter",new hb({parameters:[{valueType:KeyboardEvent}]})),this.keydownUpdateAction=new yb(e=>{const t=Of.getEventCode(e);if(t){if(this.correctModifierKeys(e),!this.isKeyDown(t)){const t=Of.getEventCode(e);this.keyState[t]={keyDown:!0,key:t,timeDown:0}}this._lastKeyDown=t,this.keydownEmitter.emit(e)}},{phetioPlayback:!0,tandem:null==e||null===(t=e.tandem)||void 0===t?void 0:t.createTandem("keydownUpdateAction"),parameters:[{name:"event",phetioType:jf}],phetioEventType:vm.USER,phetioDocumentation:"Action that executes whenever a keydown occurs from the input listeners this keyStateTracker adds (most likely to the document)."}),this.keyupUpdateAction=new yb(e=>{const t=Of.getEventCode(e);t&&(this.correctModifierKeys(e),this.isKeyDown(t)&&delete this.keyState[t],ff.mac&&Of.isMetaKey(e)&&this.clearState(),this.keyupEmitter.emit(e))},{phetioPlayback:!0,tandem:null==e||null===(i=e.tandem)||void 0===i?void 0:i.createTandem("keyupUpdateAction"),parameters:[{name:"event",phetioType:jf}],phetioEventType:vm.USER,phetioDocumentation:"Action that executes whenever a keyup occurs from the input listeners this keyStateTracker adds (most likely to the document)."});const n=this.step.bind(this);vb.addListener(n),this.disposeKeyStateTracker=()=>{vb.removeListener(n),this.attachedToDocument&&this.detachFromDocument()}}keydownUpdate(e){this.enabled&&this.keydownUpdateAction.execute(e)}correctModifierKeys(e){const t=Of.getEventCode(e);!e.shiftKey||Of.isShiftKey(e)||this.shiftKeyDown||(this.keyState[Of.KEY_SHIFT_LEFT]={keyDown:!0,key:t,timeDown:0}),!e.altKey||Of.isAltKey(e)||this.altKeyDown||(this.keyState[Of.KEY_ALT_LEFT]={keyDown:!0,key:t,timeDown:0}),!e.ctrlKey||Of.isControlKey(e)||this.ctrlKeyDown||(this.keyState[Of.KEY_CONTROL_LEFT]={keyDown:!0,key:t,timeDown:0}),!e.shiftKey&&this.shiftKeyDown&&(delete this.keyState[Of.KEY_SHIFT_LEFT],delete this.keyState[Of.KEY_SHIFT_RIGHT]),!e.altKey&&this.altKeyDown&&(delete this.keyState[Of.KEY_ALT_LEFT],delete this.keyState[Of.KEY_ALT_RIGHT]),!e.ctrlKey&&this.ctrlKeyDown&&(delete this.keyState[Of.KEY_CONTROL_LEFT],delete this.keyState[Of.KEY_CONTROL_RIGHT])}keyupUpdate(e){this.enabled&&this.keyupUpdateAction.execute(e)}get movementKeysDown(){return this.isAnyKeyInListDown(Of.MOVEMENT_KEYS)}getLastKeyDown(){return this._lastKeyDown}isKeyDown(e){return!!this.keyState[e]&&this.keyState[e].keyDown}isAnyKeyInListDown(e){for(let t=0;t<e.length;t++)if(this.isKeyDown(e[t]))return!0;return!1}areKeysDown(e){for(let t=0;t<e.length;t++)if(!this.isKeyDown(e[t]))return!1;return!0}areKeysExclusivelyDown(e){const t=Object.keys(this.keyState);if(t.length!==e.length)return!1;let i=!0;for(let n=0;n<e.length;n++){const r=e[n];let s=[r];Of.isModifierKey(r)&&(s=Of.MODIFIER_KEY_TO_CODE_MAP.get(r)),0===_.intersection(t,s).length&&(i=!1)}return i}areKeysDownWithoutExtraModifiers(e){for(let t=0;t<Of.MODIFIER_KEY_CODES.length;t++){const i=Of.MODIFIER_KEY_CODES[t];if(this.isKeyDown(i)&&!e.includes(i))return!1}return this.areKeysDown(e)}keysAreDown(){return Object.keys(this.keyState).length>0}get enterKeyDown(){return this.isKeyDown(Of.KEY_ENTER)}get shiftKeyDown(){return this.isAnyKeyInListDown(Of.SHIFT_KEYS)}get altKeyDown(){return this.isAnyKeyInListDown(Of.ALT_KEYS)}get ctrlKeyDown(){return this.isAnyKeyInListDown(Of.CONTROL_KEYS)}timeDownForKey(e){return this.keyState[e].timeDown}clearState(){this.keyState={}}step(e){if(this.keysAreDown()){const t=1e3*e;for(const e in this.keyState)this.keyState.hasOwnProperty(e)&&this.keyState[e].keyDown&&(this.keyState[e].timeDown+=t)}}attachToWindow(){this.documentKeydownListener=e=>{this.keydownUpdate(e)},this.documentKeyupListener=e=>{this.keyupUpdate(e)};const e=()=>{window.addEventListener("keyup",this.documentKeyupListener,{capture:!0}),window.addEventListener("keydown",this.documentKeydownListener,{capture:!0}),this.attachedToDocument=!0};if(document)e();else{const t=()=>{e(),window.removeEventListener("load",t)};window.addEventListener("load",t)}}setEnabled(e){this._enabled!==e&&(this._enabled=e,!e&&this.clearState())}set enabled(e){this.setEnabled(e)}get enabled(){return this.isEnabled()}isEnabled(){return this._enabled}detachFromDocument(){window.removeEventListener("keyup",this.documentKeyupListener),window.removeEventListener("keydown",this.documentKeydownListener),this.documentKeyupListener=null,this.documentKeydownListener=null,this.attachedToDocument=!1}dispose(){this.disposeKeyStateTracker()}}Lg.register("KeyStateTracker",Ab);const bb=Ab;const Sb=new class extends bb{constructor(e){super(e)}}({tandem:Lm.GENERAL_CONTROLLER.createTandem("keyStateTracker")});Lg.register("globalKeyStateTracker",Sb);const _b=Sb,xb=["interactiveHighlight","interactiveHighlightLayerable","interactiveHighlightEnabled"],wb=bv(e=>{const t=nA("InteractiveHighlightingClass",xb,class extends e{constructor(){super(...arguments),this._activationListener={enter:this._onPointerEntered.bind(this),over:this._onPointerOver.bind(this),move:this._onPointerMove.bind(this),exit:this._onPointerExited.bind(this),down:this._onPointerDown.bind(this)},this._pointer=null,this.displays={},this._interactiveHighlight=null,this._interactiveHighlightLayerable=!1,this._interactiveHighlightEnabled=!0,this.interactiveHighlightChangedEmitter=new np,this._changedInstanceListener=this.onChangedInstance.bind(this),this.changedInstanceEmitter.addListener(this._changedInstanceListener),this._interactiveHighlightingEnabledListener=this._onInteractiveHighlightingEnabledChange.bind(this);const e=this._onPointerRelease.bind(this),t=this._onPointerCancel.bind(this);this._pointerListener={up:e,cancel:t,interrupt:t}}get isInteractiveHighlighting(){return!0}static get _mixesInteractiveHighlighting(){return!0}setInteractiveHighlight(e){this._interactiveHighlight!==e&&(this._interactiveHighlight=e,this._interactiveHighlightLayerable&&(e.visible=!1),this.interactiveHighlightChangedEmitter.emit())}set interactiveHighlight(e){this.setInteractiveHighlight(e)}get interactiveHighlight(){return this.getInteractiveHighlight()}getInteractiveHighlight(){return this._interactiveHighlight}setInteractiveHighlightLayerable(e){this._interactiveHighlightLayerable!==e&&(this._interactiveHighlightLayerable=e,this._interactiveHighlight&&(this._interactiveHighlight.visible=!1,this.interactiveHighlightChangedEmitter.emit()))}set interactiveHighlightLayerable(e){this.setInteractiveHighlightLayerable(e)}get interactiveHighlightLayerable(){return this.getInteractiveHighlightLayerable()}getInteractiveHighlightLayerable(){return this._interactiveHighlightLayerable}setInteractiveHighlightEnabled(e){this._interactiveHighlightEnabled=e;const t=Object.keys(this.displays);for(let i=0;i<t.length;i++){const e=this.displays[t[i]];this._interactiveHighlightingEnabledListener(e.focusManager.pointerHighlightsVisibleProperty.value)}}getInteractiveHighlightEnabled(){return this._interactiveHighlightEnabled}set interactiveHighlightEnabled(e){this.setInteractiveHighlightEnabled(e)}get interactiveHighlightEnabled(){return this.getInteractiveHighlightEnabled()}isInteractiveHighlightActivated(){let e=!1;const t=Object.keys(this.displays);for(let i=0;i<t.length;i++){const n=this.displays[t[i]].focusManager.pointerFocusProperty.value;if(n&&n.trail.lastNode()===this){e=!0;break}}return e}get interactiveHighlightActivated(){return this.isInteractiveHighlightActivated()}dispose(){this.changedInstanceEmitter.removeListener(this._changedInstanceListener),this.hasInputListener(this._activationListener)&&this.removeInputListener(this._activationListener);const e=Object.keys(this.displays);for(let t=0;t<e.length;t++){this.displays[e[t]].focusManager.pointerHighlightsVisibleProperty.unlink(this._interactiveHighlightingEnabledListener),delete this.displays[e[t]]}super.dispose&&super.dispose()}_onPointerOver(e){const t=e.trail.nodes.find(e=>e.groupFocusHighlight&&e.isInteractiveHighlighting);if(t){const i=e.trail.subtrailTo(t),n=Object.values(this.displays);for(let e=0;e<n.length;e++){const t=n[e];null===t.focusManager.pointerFocusProperty.value&&t.focusManager.pointerFocusProperty.set(new wf(t,i))}}}_onPointerEntered(e){const t=Object.values(this.displays);for(let i=0;i<t.length;i++){const n=t[i];null!==n.focusManager.pointerFocusProperty.value&&e.trail.equals(n.focusManager.pointerFocusProperty.value.trail)||n.focusManager.pointerFocusProperty.set(new wf(n,e.trail))}}_onPointerMove(e){const t=Object.values(this.displays);for(let i=0;i<t.length;i++){const n=t[i],r=e.trail.subtrailTo(this);null!==n.focusManager.pointerFocusProperty.value&&r.equals(n.focusManager.pointerFocusProperty.value.trail)||this.getDescendantsUseHighlighting(e.trail)||n.focusManager.pointerFocusProperty.set(new wf(n,r))}}_onPointerExited(e){const t=Object.values(this.displays);for(let i=0;i<t.length;i++){const n=t[i];n.focusManager.pointerFocusProperty.set(null);const r=n.focusManager.lockedPointerFocusProperty.value;e.trail.isPickable()||null!==r&&!e.trail.containsNode(r.trail.lastNode())||this._onPointerRelease(e)}}_onPointerDown(e){if(null===this._pointer){const t=Object.values(this.displays);for(let e=0;e<t.length;e++){const i=t[e],n=i.focusManager.pointerFocusProperty.value;n&&i.focusManager.lockedPointerFocusProperty.set(new wf(n.display,n.trail.copy()))}this._pointer=e.pointer,this._pointer.addInputListener(this._pointerListener)}}_onPointerRelease(e){const t=Object.values(this.displays);for(let i=0;i<t.length;i++){t[i].focusManager.lockedPointerFocusProperty.value=null}this._pointer&&this._pointer.listeners.includes(this._pointerListener)&&(this._pointer.removeInputListener(this._pointerListener),this._pointer=null)}_onPointerCancel(e){const t=Object.values(this.displays);for(let i=0;i<t.length;i++){t[i].focusManager.pointerFocusProperty.set(null)}this._onPointerRelease(e)}_onInteractiveHighlightingEnabledChange(e){const t=e&&this._interactiveHighlightEnabled,i=this.hasInputListener(this._activationListener);t&&!i?this.addInputListener(this._activationListener):!t&&i&&this.removeInputListener(this._activationListener)}onChangedInstance(e,t){if(t)this.displays[e.trail.uniqueId]=e.display,e.display.focusManager.pointerHighlightsVisibleProperty.hasListener(this._interactiveHighlightingEnabledListener)||e.display.focusManager.pointerHighlightsVisibleProperty.link(this._interactiveHighlightingEnabledListener);else{const t=this.displays[e.trail.uniqueId];t&&0===e.node.instances.length&&t.focusManager.pointerHighlightsVisibleProperty.unlink(this._interactiveHighlightingEnabledListener),delete this.displays[e.trail.uniqueId]}}getDescendantsUseHighlighting(e){const t=e.nodes.indexOf(this),i=e.nodes.slice(t+1,e.nodes.length);let n=!1;for(let r=0;r<i.length;r++)if(i[r].isInteractiveHighlighting){n=!0;break}return n}mutate(e){return super.mutate(e)}});return t.prototype._mutatorKeys=xb.concat(t.prototype._mutatorKeys),t});Lg.register("InteractiveHighlighting",wb);const Tb=wb;class Pb extends(Tb(cv)){constructor(e){super(e)}}Lg.register("InteractiveHighlightingNode",Pb);const Cb=Pb;function Vb(e,t,i){try{return t(...i.map(e=>e.get()))}finally{}}class Rb extends _g{constructor(e,t,i){const n=Vo()({phetioReadOnly:!0,phetioOuterType:Rb.DerivedPropertyIO,phetioLinkDependencies:!0,accessNonDependencies:!1},i);super(Vb(n.accessNonDependencies,t,e),n),Lm.VALIDATION&&this.isPhetioInstrumented(),this.dependencies=e,this.derivation=t,this.accessNonDependencies=n.accessNonDependencies,this.derivedPropertyListener=this.getDerivedPropertyListener.bind(this),e.forEach(e=>{if(e.lazyLink(this.derivedPropertyListener),Lm.PHET_IO_ENABLED&&this.isPhetioInstrumented()&&e instanceof Km&&e.isPhetioInstrumented()&&(e instanceof _g&&pg.registerPhetioOrderDependency(e,og.UNDEFER,this,og.UNDEFER),n.tandem&&n.phetioLinkDependencies)){const t=n.tandem.createTandem("dependencies");this.addLinkedElement(e,{tandem:t.createTandemFromPhetioID(e.tandem.phetioID)})}})}hasDependency(e){return this.definedDependencies.includes(e)}get definedDependencies(){return this.dependencies}getDerivedPropertyListener(){this.isDisposed||(this.isDeferred?this.hasDeferredValue=!0:super.set(Vb(this.accessNonDependencies,this.derivation,this.definedDependencies)))}recomputeDerivation(){this.getDerivedPropertyListener()}dispose(){const e=this.definedDependencies;for(let t=0;t<e.length;t++){const i=e[t];i.hasListener(this.derivedPropertyListener)&&i.unlink(this.derivedPropertyListener)}this.dependencies=null,super.dispose()}setDeferred(e){return this.isDeferred&&!e&&(this.deferredValue=Vb(this.accessNonDependencies,this.derivation,this.definedDependencies)),super.setDeferred(e)}static valueEquals(e,t,i){return new Rb([e,t],(e,t)=>e===t,i)}static valueEqualsConstant(e,t,i){return new Rb([e],e=>e===t,i)}static and(e,t){return Rb.deriveAny(e,()=>_.reduce(e,Nb,!0),t)}static or(e,t){return Rb.deriveAny(e,()=>_.reduce(e,Mb,!1),t)}static not(e,t){return new Rb([e],e=>!e,t)}static deriveAny(e,t,i){return new Rb(e,t,i)}}const Nb=(e,t)=>e&&t.value,Mb=(e,t)=>e||t.value,kb=new yh;Rb.DerivedPropertyIO=e=>(kb.has(e)||kb.set(e,new el(`DerivedPropertyIO<${e.typeName}>`,{valueType:Rb,parameterTypes:[e],supertype:ty.PropertyIO(e),documentation:"Like PropertyIO, but not settable.  Instead it is derived from other DerivedPropertyIO or PropertyIO instances",applyState:_.noop,methods:{setValue:{returnType:sg,parameterTypes:[e],implementation:Rb.prototype.set,documentation:"Errors out when you try to set a derived property.",invocableForReadOnlyElements:!1}}})),kb.get(e));class Lb extends Rb{}class Ib extends Rb{}class Bb extends Rb{}class Db extends Rb{}ko.register("DerivedProperty",Rb);const Ob={enabledProperty:null,enabled:!0,enabledPropertyOptions:null,phetioEnabledPropertyInstrumented:!0,tandem:Km.DEFAULT_OPTIONS.tandem};class qb extends Um{constructor(e){const t=Ro()({},Ob,e),i=!t.enabledProperty;super(t),this.enabledProperty=t.enabledProperty||new JE(t.enabled,Po({tandem:t.phetioEnabledPropertyInstrumented?t.tandem.createTandem(JE.TANDEM_NAME):Lm.OPT_OUT},t.enabledPropertyOptions)),this.disposeEnabledComponent=()=>{i&&this.enabledProperty.dispose()}}setEnabled(e){this.enabledProperty.value=e}set enabled(e){this.setEnabled(e)}get enabled(){return this.isEnabled()}isEnabled(){return this.enabledProperty.value}dispose(){this.disposeEnabledComponent(),super.dispose()}}ko.register("EnabledComponent",qb);const Yb={valueType:"number",isValidValue:e=>e%1==0,validationMessage:"Should be a valid integer"},Hb={isValidValue:e=>!isNaN(e),validationMessage:"Should not be NaN"},Gb=Hl.EVERYTHING,Fb=ty.PropertyIO(il);class zb extends ty{constructor(e,t){var i;const n=Vo()({numberType:"FloatingPoint",range:Gb,validators:[],phetioOuterType:()=>zb.NumberPropertyIO},t);n.rangePropertyOptions=Vo()({phetioDocumentation:"Provides the range of possible values for the parent NumberPropertyIO",phetioValueType:Hl.RangeIO,phetioReadOnly:!0,tandem:n.range!==Gb?null===(i=n.tandem)||void 0===i?void 0:i.createTandem("rangeProperty"):Lm.OPT_OUT},n.rangePropertyOptions),n.valueType="number",n.phetioValueType=il;const r=!(n.range&&n.range instanceof _g),s=n.range instanceof _g?n.range:new ty(n.range,n.rangePropertyOptions);n.validators.push(Hb),"Integer"===n.numberType&&n.validators.push(Yb);let a=!1;n.validators.push({isValidValue:e=>s.value.contains(e),validationMessage:()=>`Number value ${a?this.value:e} must be within rangeProperty value: ${s.value}`}),super(e,n),a=!0,this.numberType=n.numberType,this.rangeProperty=s;if(this.rangeProperty.addPhetioStateDependencies([this]),this.addPhetioStateDependencies([this.rangeProperty]),n.validValues&&this.validateNumberAndRangeProperty)for(let o=0;o<n.validValues.length;o++){const e=n.validValues[o];this.validateNumberAndRangeProperty(e)}this.disposeNumberProperty=()=>{r&&this.rangeProperty.dispose()},this.resetNumberProperty=()=>{r&&this.rangeProperty.reset()}}get range(){return this.rangeProperty.value}set range(e){this.rangeProperty.value=e}reset(){this.resetValueAndRange(),super.reset()}dispose(){this.disposeNumberProperty(),super.dispose()}setValueAndRange(e,t){this.setDeferred(!0),this.rangeProperty.setDeferred(!0),this.set(e),this.rangeProperty.set(t);const i=this.setDeferred(!1),n=this.rangeProperty.setDeferred(!1);i&&i(),n&&n()}resetValueAndRange(){this.setValueAndRange(this.initialValue,this.rangeProperty.initialValue)}toStateObject(){const e=Fb.toStateObject(this);e.numberType=this.numberType,e.range=Hl.RangeIO.toStateObject(this.rangeProperty.value);const t=this.rangeProperty&&this.rangeProperty.isPhetioInstrumented();return e.rangePhetioID=t?this.rangeProperty.tandem.phetioID:null,e}}_defineProperty(zb,"NumberPropertyIO",new el("NumberPropertyIO",{valueType:zb,supertype:Fb,parameterTypes:[il],documentation:`Extends PropertyIO to add values for the numeric range ( min, max ) and numberType ( '${["FloatingPoint","Integer"].join("' | '")}' )`,toStateObject:e=>e.toStateObject(),applyState:(e,t)=>{Fb.applyState(e,t)},stateSchema:{numberType:Om,range:Hl.RangeIO,rangePhetioID:ng(Om)}})),ko.register("NumberProperty",zb);class Ub extends _g{constructor(e,t){const i=Vo()({bidirectional:!1,defaultValue:null,derive:_.identity,map:_.identity,inverseMap:_.identity},t),n=i.derive,r=i.map,s=i.inverseMap,a="function"==typeof n?n:e=>e[n],o="function"==typeof r?r:e=>e[r],l="function"==typeof s?s:e=>e[s];super(null===e.value?o(i.defaultValue):o(a(e.value).value),i),this.defaultValue=i.defaultValue,this.derive=a,this.map=o,this.inverseMap=l,this.bidirectional=i.bidirectional,this.valuePropertyProperty=e,this.isExternallyChanging=!1,this.propertyPropertyListener=this.onPropertyPropertyChange.bind(this),this.propertyListener=this.onPropertyChange.bind(this),e.link(this.propertyListener),i.bidirectional&&this.lazyLink(this.onSelfChange.bind(this))}onPropertyPropertyChange(e,t,i){if(this.bidirectional&&null!==this.valuePropertyProperty.value&&i){if(this.derive(this.valuePropertyProperty.value)===i&&i.areValuesEqual(this.inverseMap(this.value),i.get()))return}super.set(this.map(e))}onPropertyChange(e,t){t&&this.derive(t).unlink(this.propertyPropertyListener),e?this.derive(e).link(this.propertyPropertyListener):this.onPropertyPropertyChange(this.defaultValue,null,null)}onSelfChange(e){if(null!==this.valuePropertyProperty.value){const t=this.derive(this.valuePropertyProperty.value);this.areValuesEqual(e,this.map(t.value))||(t.value=this.inverseMap(e))}}dispose(){this.valuePropertyProperty.unlink(this.propertyListener),null!==this.valuePropertyProperty.value&&this.derive(this.valuePropertyProperty.value).unlink(this.propertyPropertyListener),super.dispose()}reset(){if(null!==this.valuePropertyProperty.value){this.derive(this.valuePropertyProperty.value).reset()}}set(e){this.isExternallyChanging=!0,super.set(e),this.isExternallyChanging=!1}get value(){return super.value}set value(e){this.set(e)}isSettable(){return super.isSettable()||this.bidirectional}}ko.register("DynamicProperty",Ub);const Wb={aa:{name:"Afar",localizedName:"Afar",direction:"ltr"},ab:{name:"Abkhazian",localizedName:"Abkhazian",direction:"ltr"},ae:{name:"Avestan",localizedName:"Avestan",direction:"rtl"},af:{name:"Afrikaans",localizedName:"Afrikaans",direction:"ltr"},ak:{name:"Akan",localizedName:"Akan",direction:"ltr"},am:{name:"Amharic",localizedName:"Amharic",direction:"ltr"},an:{name:"Aragonese",localizedName:"Aragonese",direction:"ltr"},ar:{name:"Arabic",localizedName:"العربية",direction:"rtl"},ar_MA:{name:"Arabic, Morocco",localizedName:"العربية (المغرب)",direction:"rtl"},ar_SA:{name:"Arabic, Saudi Arabia",localizedName:"العربية (السعودية)",direction:"rtl"},as:{name:"Assamese",localizedName:"Assamese",direction:"ltr"},av:{name:"Avaric",localizedName:"Avaric",direction:"ltr"},ay:{name:"Aymara",localizedName:"Aymara",direction:"ltr"},az:{name:"Azerbaijani",localizedName:"Azerbaijani",direction:"ltr"},ba:{name:"Bashkir",localizedName:"Bashkir",direction:"ltr"},be:{name:"Belarusian",localizedName:"беларускі",direction:"ltr"},bg:{name:"Bulgarian",localizedName:"български",direction:"ltr"},bh:{name:"Bihari",localizedName:"Bihari",direction:"ltr"},bi:{name:"Bislama",localizedName:"Bislama",direction:"ltr"},bm:{name:"Bambara",localizedName:"Bambara",direction:"ltr"},bn:{name:"Bengali",localizedName:"Bengali",direction:"ltr"},bo:{name:"Tibetan",localizedName:"Tibetan",direction:"ltr"},br:{name:"Breton",localizedName:"Breton",direction:"ltr"},bs:{name:"Bosnian",localizedName:"Bosnian",direction:"ltr"},ca:{name:"Catalan",localizedName:"català",direction:"ltr"},ce:{name:"Chechen",localizedName:"Chechen",direction:"ltr"},ch:{name:"Chamorro",localizedName:"Chamorro",direction:"ltr"},co:{name:"Corsican",localizedName:"Corsican",direction:"ltr"},cr:{name:"Cree",localizedName:"Cree",direction:"ltr"},cs:{name:"Czech",localizedName:"čeština",direction:"ltr"},cu:{name:"Church Slavic",localizedName:"Church Slavic",direction:"ltr"},cv:{name:"Chuvash",localizedName:"Chuvash",direction:"ltr"},cy:{name:"Welsh",localizedName:"Welsh",direction:"ltr"},da:{name:"Danish",localizedName:"Dansk",direction:"ltr"},de:{name:"German",localizedName:"Deutsch",direction:"ltr"},dv:{name:"Divehi",localizedName:"Divehi",direction:"ltr"},dz:{name:"Dzongkha",localizedName:"Dzongkha",direction:"ltr"},ee:{name:"Ewe",localizedName:"Ewe",direction:"ltr"},el:{name:"Greek",localizedName:"Ελληνικά",direction:"ltr"},en:{name:"English",localizedName:"English",direction:"ltr"},en_CA:{name:"English, Canada",localizedName:"English (Canada)",direction:"ltr"},en_GB:{name:"English, United Kingdom",localizedName:"English (United Kingdom)",direction:"ltr"},eo:{name:"Esperanto",localizedName:"Esperanto",direction:"ltr"},es:{name:"Spanish",localizedName:"español",direction:"ltr"},es_CO:{name:"Spanish, Colombia",localizedName:"español (Colombia)",direction:"ltr"},es_CR:{name:"Spanish, Costa Rica",localizedName:"español (Costa Rica)",direction:"ltr"},es_ES:{name:"Spanish, Spain",localizedName:"español (España)",direction:"ltr"},es_MX:{name:"Spanish, Mexico",localizedName:"español (México)",direction:"ltr"},es_PE:{name:"Spanish, Peru",localizedName:"español (Perú)",direction:"ltr"},et:{name:"Estonian",localizedName:"Eesti",direction:"ltr"},eu:{name:"Basque",localizedName:"Basque",direction:"ltr"},fa:{name:"Persian",localizedName:"Persian",direction:"rtl"},ff:{name:"Fulah",localizedName:"Fulah",direction:"ltr"},fi:{name:"Finnish",localizedName:"suomi",direction:"ltr"},fj:{name:"Fijian",localizedName:"Fijian",direction:"ltr"},fo:{name:"Faroese",localizedName:"Faroese",direction:"ltr"},fr:{name:"French",localizedName:"français",direction:"ltr"},fu:{name:"Friulian",localizedName:"fu",direction:"ltr"},fy:{name:"Western Frisian",localizedName:"Frisian",direction:"ltr"},ga:{name:"Irish",localizedName:"Gaeilge",direction:"ltr"},gd:{name:"Scottish Gaelic",localizedName:"Scottish Gaelic",direction:"ltr"},gl:{name:"Galician",localizedName:"Gallegan",direction:"ltr"},gn:{name:"Guarani",localizedName:"Guarani",direction:"ltr"},gu:{name:"Gujarati",localizedName:"Gujarati",direction:"ltr"},gv:{name:"Manx",localizedName:"Manx",direction:"ltr"},ha:{name:"Hausa",localizedName:"Hausa",direction:"ltr"},hi:{name:"Hindi",localizedName:"हिंदी",direction:"ltr"},ho:{name:"Hiri Motu",localizedName:"Hiri Motu",direction:"ltr"},hr:{name:"Croatian",localizedName:"hrvatski",direction:"ltr"},ht:{name:"Haitian",localizedName:"Haitian",direction:"ltr"},hu:{name:"Hungarian",localizedName:"magyar",direction:"ltr"},hy:{name:"Armenian",localizedName:"Armenian",direction:"ltr"},hz:{name:"Herero",localizedName:"Herero",direction:"ltr"},ia:{name:"Interlingua",localizedName:"Interlingua",direction:"ltr"},ie:{name:"Interlingue",localizedName:"Interlingue",direction:"ltr"},ig:{name:"Igbo",localizedName:"Igbo",direction:"ltr"},ii:{name:"Sichuan Yi",localizedName:"Sichuan Yi",direction:"ltr"},ik:{name:"Inupiaq",localizedName:"Inupiaq",direction:"ltr"},in:{name:"Indonesian",localizedName:"Bahasa Indonesia",direction:"ltr"},io:{name:"Ido",localizedName:"Ido",direction:"ltr"},is:{name:"Icelandic",localizedName:"íslenska",direction:"ltr"},it:{name:"Italian",localizedName:"italiano",direction:"ltr"},iu:{name:"Inuktitut",localizedName:"Inuktitut",direction:"ltr"},iw:{name:"Hebrew",localizedName:"עברית",direction:"rtl"},ja:{name:"Japanese",localizedName:"日本語",direction:"ltr"},ji:{name:"Yiddish",localizedName:"Yiddish",direction:"ltr"},jv:{name:"Javanese",localizedName:"Javanese",direction:"ltr"},ka:{name:"Georgian",localizedName:"Georgian",direction:"ltr"},kg:{name:"Kongo",localizedName:"Kongo",direction:"ltr"},ki:{name:"Kikuyu",localizedName:"Kikuyu",direction:"ltr"},kj:{name:"Kwanyama",localizedName:"Kwanyama",direction:"ltr"},kk:{name:"Kazakh",localizedName:"Kazakh",direction:"ltr"},kl:{name:"Kalaallisut",localizedName:"Greenlandic",direction:"ltr"},km:{name:"Khmer",localizedName:"Khmer",direction:"ltr"},kn:{name:"Kannada",localizedName:"Kannada",direction:"ltr"},ko:{name:"Korean",localizedName:"한국어",direction:"ltr"},kr:{name:"Kanuri",localizedName:"Kanuri",direction:"ltr"},ks:{name:"Kashmiri",localizedName:"Kashmiri",direction:"ltr"},ku:{name:"Kurdish",localizedName:"Kurdish",direction:"ltr"},ku_TR:{name:"Kurdish, Turkey",localizedName:"Kurdish (Turkey)",direction:"ltr"},kv:{name:"Komi",localizedName:"Komi",direction:"ltr"},kw:{name:"Cornish",localizedName:"Cornish",direction:"ltr"},ky:{name:"Kirghiz",localizedName:"Kirghiz",direction:"ltr"},la:{name:"Latin",localizedName:"Latin",direction:"ltr"},lb:{name:"Luxembourgish",localizedName:"Luxembourgish",direction:"ltr"},lg:{name:"Ganda",localizedName:"Ganda",direction:"ltr"},li:{name:"Limburgish",localizedName:"Limburgish",direction:"ltr"},lk:{name:"Lakota",localizedName:"Lakota",direction:"ltr"},ln:{name:"Lingala",localizedName:"Lingala",direction:"ltr"},lo:{name:"Lao",localizedName:"Lao",direction:"ltr"},lt:{name:"Lithuanian",localizedName:"Lietuvių",direction:"ltr"},lu:{name:"Luba-Katanga",localizedName:"Luba-Katanga",direction:"ltr"},lv:{name:"Latvian",localizedName:"Latviešu",direction:"ltr"},mg:{name:"Malagasy",localizedName:"Malagasy",direction:"ltr"},mh:{name:"Marshallese",localizedName:"Marshallese",direction:"ltr"},mi:{name:"Maori",localizedName:"Maori",direction:"ltr"},mk:{name:"Macedonian",localizedName:"македонски",direction:"ltr"},ml:{name:"Malayalam",localizedName:"Malayalam",direction:"ltr"},mn:{name:"Mongolian",localizedName:"Mongolian",direction:"ltr"},mo:{name:"Moldavian",localizedName:"Moldavian",direction:"ltr"},mr:{name:"Marathi",localizedName:"Marathi",direction:"ltr"},ms:{name:"Malay",localizedName:"Bahasa Melayu",direction:"ltr"},mt:{name:"Maltese",localizedName:"Malti",direction:"ltr"},my:{name:"Burmese",localizedName:"Burmese",direction:"ltr"},na:{name:"Nauru",localizedName:"Nauru",direction:"ltr"},nb:{name:"Norwegian Bokmal",localizedName:"Norwegian Bokmål",direction:"ltr"},nd:{name:"North Ndebele",localizedName:"North Ndebele",direction:"ltr"},ne:{name:"Nepali",localizedName:"Nepali",direction:"ltr"},ng:{name:"Ndonga",localizedName:"Ndonga",direction:"ltr"},nl:{name:"Dutch",localizedName:"Nederlands",direction:"ltr"},nn:{name:"Norwegian Nynorsk",localizedName:"Norwegian Nynorsk",direction:"ltr"},nr:{name:"South Ndebele",localizedName:"South Ndebele",direction:"ltr"},nv:{name:"Navajo",localizedName:"Navajo",direction:"ltr"},ny:{name:"Chichewa",localizedName:"Nyanja",direction:"ltr"},oc:{name:"Occitan",localizedName:"Occitan",direction:"ltr"},oj:{name:"Ojibwa",localizedName:"Ojibwa",direction:"ltr"},om:{name:"Oromo",localizedName:"Oromo",direction:"ltr"},or:{name:"Oriya",localizedName:"Oriya",direction:"ltr"},os:{name:"Ossetian",localizedName:"Ossetian",direction:"ltr"},pa:{name:"Panjabi",localizedName:"Panjabi",direction:"ltr"},pi:{name:"Pali",localizedName:"Pali",direction:"ltr"},pl:{name:"Polish",localizedName:"polski",direction:"ltr"},ps:{name:"Pashto",localizedName:"Pushto",direction:"ltr"},pt:{name:"Portuguese",localizedName:"português",direction:"ltr"},pt_BR:{name:"Portuguese, Brazil",localizedName:"português (Brasil)",direction:"ltr"},qu:{name:"Quechua",localizedName:"Quechua",direction:"ltr"},rm:{name:"Raeto-Romance",localizedName:"Raeto-Romance",direction:"ltr"},rn:{name:"Kirundi",localizedName:"Rundi",direction:"ltr"},ro:{name:"Romanian",localizedName:"română",direction:"ltr"},ru:{name:"Russian",localizedName:"русский",direction:"ltr"},rw:{name:"Kinyarwanda",localizedName:"Kinyarwanda",direction:"ltr"},sa:{name:"Sanskrit",localizedName:"Sanskrit",direction:"ltr"},sc:{name:"Sardinian",localizedName:"Sardinian",direction:"ltr"},sd:{name:"Sindhi",localizedName:"Sindhi",direction:"ltr"},se:{name:"Northern Sami",localizedName:"Northern Sami",direction:"ltr"},sg:{name:"Sango",localizedName:"Sango",direction:"ltr"},sh:{name:"Serbo-Croatian",localizedName:"Serbo-Croatian",direction:"ltr"},si:{name:"Sinhalese",localizedName:"Sinhalese",direction:"ltr"},sk:{name:"Slovak",localizedName:"Slovenčina",direction:"ltr"},sl:{name:"Slovenian",localizedName:"Slovenščina",direction:"ltr"},sm:{name:"Samoan",localizedName:"Samoan",direction:"ltr"},sn:{name:"Shona",localizedName:"Shona",direction:"ltr"},so:{name:"Somali",localizedName:"Somali",direction:"ltr"},sq:{name:"Albanian",localizedName:"shqipe",direction:"ltr"},sr:{name:"Serbian",localizedName:"Српски",direction:"ltr"},ss:{name:"Swati",localizedName:"Swati",direction:"ltr"},st:{name:"Sotho",localizedName:"Southern Sotho",direction:"ltr"},su:{name:"Sundanese",localizedName:"Sundanese",direction:"ltr"},sv:{name:"Swedish",localizedName:"svenska",direction:"ltr"},sw:{name:"Swahili",localizedName:"Swahili",direction:"ltr"},ta:{name:"Tamil",localizedName:"Tamil",direction:"ltr"},te:{name:"Telugu",localizedName:"Telugu",direction:"ltr"},tg:{name:"Tajik",localizedName:"Tajik",direction:"ltr"},th:{name:"Thai",localizedName:"ไทย",direction:"ltr"},ti:{name:"Tigrinya",localizedName:"Tigrinya",direction:"ltr"},tk:{name:"Turkmen",localizedName:"Turkmen",direction:"ltr"},tl:{name:"Tagalog",localizedName:"Tagalog",direction:"ltr"},tn:{name:"Tswana",localizedName:"Tswana",direction:"ltr"},to:{name:"Tonga",localizedName:"Tonga",direction:"ltr"},tr:{name:"Turkish",localizedName:"Türkçe",direction:"ltr"},ts:{name:"Tsonga",localizedName:"Tsonga",direction:"ltr"},tt:{name:"Tatar",localizedName:"Tatar",direction:"ltr"},tw:{name:"Twi",localizedName:"Twi",direction:"ltr"},ty:{name:"Tahitian",localizedName:"Tahitian",direction:"ltr"},ug:{name:"Uighur",localizedName:"Uighur",direction:"ltr"},uk:{name:"Ukrainian",localizedName:"українська",direction:"ltr"},ur:{name:"Urdu",localizedName:"Urdu",direction:"rtl"},uz:{name:"Uzbek",localizedName:"Uzbek",direction:"ltr"},ve:{name:"Venda",localizedName:"Venda",direction:"ltr"},vi:{name:"Vietnamese",localizedName:"Tiếng Việt",direction:"ltr"},vo:{name:"Volapuk",localizedName:"Volapük",direction:"ltr"},wa:{name:"Walloon",localizedName:"Walloon",direction:"ltr"},wo:{name:"Wolof",localizedName:"Wolof",direction:"ltr"},xh:{name:"Xhosa",localizedName:"Xhosa",direction:"ltr"},yo:{name:"Yoruba",localizedName:"Yoruba",direction:"ltr"},za:{name:"Zhuang",localizedName:"Zhuang",direction:"ltr"},zh_CN:{name:"Chinese, Simplified",localizedName:"中文 (中国)",direction:"ltr"},zh_HK:{name:"Chinese, Hong Kong",localizedName:"中文 (香港)",direction:"ltr"},zh_TW:{name:"Chinese, Traditional",localizedName:"中文 (台灣)",direction:"ltr"},zu:{name:"Zulu",localizedName:"Zulu",direction:"ltr"}},Xb=new bt("phetcommon"),jb={format:function(e){const t=arguments;return e.replace(/{(\d)}/g,(e,i)=>t[+i+1])},fillIn:function(e,t){let i=e=e&&e.get?e.get():e;const n=e.match(/\{\{[^{}]+\}\}/g)||[];for(let r=0;r<n.length;r++){const e=n[r],s=e.replace("{{","").replace("}}","");if(void 0!==t[s]){const n=t[s]&&t[s].get?t[s].get():t[s];i=i.replace(e,n)}}return i},isEmbeddingMark:function(e){return"‪"===e||"‫"===e||"‬"===e},embeddedSlice:function(e,t,i){const n=[];let r;for(void 0===i&&(i=e.length),i<0&&(i+=e.length);t<e.length&&jb.isEmbeddingMark(e.charAt(t));)t++;for(;i>=1&&jb.isEmbeddingMark(e.charAt(i-1));)i--;if(t>=i||t>=e.length)return"";for(let u=0;u<t;u++)r=e.charAt(u),"‪"===r||"‫"===r?n.push(r):"‬"===r&&n.pop();let s=n.length,a=n.slice();const o=e.slice(t,i);for(let u=0;u<o.length;u++)r=o.charAt(u),"‪"===r||"‫"===r?n.push(r):"‬"===r&&(n.pop(),s=Math.min(n.length,s));let l=n;const h=Math.max(0,s-1);return a=a.slice(h),l=l.slice(h),a.join("")+o+l.join("").replace(/./g,"‬")},embeddedSplit:function(e,t,i){if(void 0===t)return[e];let n,r=[],s=e;function a(){let e,i;if(t instanceof window.RegExp){const n=s.match(t);n?(e=n.index,i=n[0].length):e=-1}else e=s.indexOf(t),i=t.length;return{index:e,length:i}}let o=0;for(;(n=a()).index>=0;){r.push(jb.embeddedSlice(e,o,o+n.index));const t=n.index+n.length;s=s.slice(t),o+=t}return r.push(jb.embeddedSlice(e,o)),void 0!==i&&(r=_.first(r,i)),r},embeddedDebugString:function(e){return e.replace(/\u202a/g,"[LTR]").replace(/\u202b/g,"[RTL]").replace(/\u202c/g,"[POP]")},wrapLTR:function(e){return"‪"+e+"‬"},wrapRTL:function(e){return"‫"+e+"‬"},wrapDirection:function(e,t){return"ltr"===t?jb.wrapLTR(e):jb.wrapRTL(e)},localeToLocalizedName:function(e){return jb.wrapDirection(Wb[e].localizedName,Wb[e].direction)},capitalize:e=>e[0].toUpperCase()+e.slice(1)};Xb.register("StringUtils",jb);const Qb=jb,Kb=new bt("utteranceQueue"),Zb={nameObjectContextHint:"{{NAME}}, {{OBJECT}}, {{CONTEXT}} {{HINT}}",nameObjectContext:"{{NAME}}, {{OBJECT}}, {{CONTEXT}}",nameObjectHint:"{{NAME}}, {{OBJECT}}, {{HINT}}",nameContextHint:"{{NAME}}, {{CONTEXT}} {{HINT}}",nameObject:"{{NAME}}, {{OBJECT}}",nameContext:"{{NAME}}, {{CONTEXT}}",nameHint:"{{NAME}}, {{HINT}}",name:"{{NAME}}",objectContextHint:"{{OBJECT}}, {{CONTEXT}} {{HINT}}",objectContext:"{{OBJECT}}, {{CONTEXT}}",objectHint:"{{OBJECT}}, {{HINT}}",contextHint:"{{CONTEXT}} {{HINT}}",object:"{{OBJECT}}",context:"{{CONTEXT}}",hint:"{{HINT}}"};class Jb{constructor(e){const t=Ro()({},Zb,e);this.nameObjectContextHint=t.nameObjectContextHint,this.nameObjectContext=t.nameObjectContext,this.nameObjectHint=t.nameObjectHint,this.nameContextHint=t.nameContextHint,this.nameObject=t.nameObject,this.nameContext=t.nameContext,this.nameHint=t.nameHint,this.name=t.name,this.objectContextHint=t.objectContextHint,this.objectContext=t.objectContext,this.objectHint=t.objectHint,this.contextHint=t.contextHint,this.object=t.object,this.context=t.context,this.hint=t.hint}getResponsePattern(e){const t=this[e];return t}static createPatternKey(e,t,i,n){let r="";return e&&(r=r.concat("NAME".concat("_"))),t&&(r=r.concat("OBJECT".concat("_"))),i&&(r=r.concat("CONTEXT".concat("_"))),n&&(r=r.concat("HINT".concat("_"))),_.camelCase(r)}}_defineProperty(Jb,"DEFAULT_RESPONSE_PATTERNS",new Jb),Kb.register("ResponsePatternCollection",Jb);const $b=Jb,eS={nameResponse:null,objectResponse:null,contextResponse:null,hintResponse:null,ignoreProperties:!1,responsePatternCollection:$b.DEFAULT_RESPONSE_PATTERNS};class tS{constructor(e){const t=Ro()({},eS,e);this._nameResponse=t.nameResponse,this._objectResponse=t.objectResponse,this._contextResponse=t.contextResponse,this._hintResponse=t.hintResponse,this.ignoreProperties=t.ignoreProperties,this.responsePatternCollection=t.responsePatternCollection}getNameResponse(){return tS.getResponseText(this._nameResponse)}get nameResponse(){return this.getNameResponse()}set nameResponse(e){this.setNameResponse(e)}setNameResponse(e){this._nameResponse=e}getObjectResponse(){return tS.getResponseText(this._objectResponse)}get objectResponse(){return this.getObjectResponse()}set objectResponse(e){this.setObjectResponse(e)}setObjectResponse(e){this._objectResponse=e}getContextResponse(){return tS.getResponseText(this._contextResponse)}get contextResponse(){return this.getContextResponse()}set contextResponse(e){this.setContextResponse(e)}setContextResponse(e){this._contextResponse=e}getHintResponse(){return tS.getResponseText(this._hintResponse)}get hintResponse(){return this.getHintResponse()}set hintResponse(e){this.setHintResponse(e)}setHintResponse(e){this._hintResponse=e}static getResponseText(e){return e instanceof _g||e instanceof mg?e.value:"function"==typeof e?e():e}copy(){return new tS(this.serialize())}serialize(){return{nameResponse:this.nameResponse,objectResponse:this.objectResponse,contextResponse:this.contextResponse,hintResponse:this.hintResponse,ignoreProperties:this.ignoreProperties,responsePatternCollection:this.responsePatternCollection}}}_defineProperty(tS,"DEFAULT_OPTIONS",eS),Kb.register("ResponsePacket",tS);const iS=tS;const nS=new class extends Km{constructor(e){super(),this.nameResponsesEnabledProperty=new gy(!0),this.objectResponsesEnabledProperty=new gy(!1),this.contextResponsesEnabledProperty=new gy(!1),this.hintResponsesEnabledProperty=new gy(!1)}reset(){this.nameResponsesEnabledProperty.reset(),this.objectResponsesEnabledProperty.reset(),this.contextResponsesEnabledProperty.reset(),this.hintResponsesEnabledProperty.reset()}collectResponses(e){const t=Ro()({},iS.DEFAULT_OPTIONS,e),i=!(!t.nameResponse||!this.nameResponsesEnabledProperty.get()&&!t.ignoreProperties),n=!(!t.objectResponse||!this.objectResponsesEnabledProperty.get()&&!t.ignoreProperties),r=!(!t.contextResponse||!this.contextResponsesEnabledProperty.get()&&!t.ignoreProperties),s=!(!t.hintResponse||!this.hintResponsesEnabledProperty.get()&&!t.ignoreProperties),a=$b.createPatternKey(i,n,r,s);let o="";if(a){const e=t.responsePatternCollection.getResponsePattern(a);o=Qb.fillIn(e,{NAME:t.nameResponse,OBJECT:t.objectResponse,CONTEXT:t.contextResponse,HINT:t.hintResponse})}return o}};Kb.register("responseCollector",nS);const rS=nS;let sS=1;class aS extends Um{constructor(e){const t=Vo()({alert:null,predicate:function(){return!0},canAnnounceProperties:[],descriptionCanAnnounceProperties:[],voicingCanAnnounceProperties:[],alertStableDelay:200,alertMaximumDelay:Number.MAX_VALUE,announcerOptions:{},priority:1},e);super(t),this.id=sS++,this._alert=t.alert,this.predicate=t.predicate,this.canAnnounceProperty=new oS({dependentProperties:t.canAnnounceProperties}),this.descriptionCanAnnounceProperty=new oS({dependentProperties:t.descriptionCanAnnounceProperties}),this.voicingCanAnnounceProperty=new oS({dependentProperties:t.voicingCanAnnounceProperties}),this.alertStableDelay=t.alertStableDelay,this.alertMaximumDelay=t.alertMaximumDelay,this.announcerOptions=t.announcerOptions,this.priorityProperty=new zb(t.priority),this.previousAlertText=null}static getAlertStringFromResponsePacket(e,t){const i=e.serialize();return t||(i.ignoreProperties=!0),rS.collectResponses(i)}getAlertText(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=aS.alertableToText(this._alert,e);return this.previousAlertText=t,t}getAlert(){return this._alert}get alert(){return this.getAlert()}set alert(e){this.setAlert(e)}setAlert(e){this._alert=e}setAlertStableDelay(e){this.alertStableDelay=e}toString(){return`Utterance_${this.id}#${this.getAlertText()}`}toStateObject(){return{alert:ng(SE([Om,il])).toStateObject(this.getAlertText())}}reset(){this.previousAlertText=null}setCanAnnounceProperties(e){this.canAnnounceProperty.setDependentProperties(e)}set canAnnounceProperties(e){this.setCanAnnounceProperties(e)}get canAnnounceProperties(){return this.getCanAnnounceProperties()}getCanAnnounceProperties(){return this.canAnnounceProperty.getDependentProperties()}setDescriptionCanAnnounceProperties(e){this.descriptionCanAnnounceProperty.setDependentProperties(e)}set descriptionCanAnnounceProperties(e){this.setDescriptionCanAnnounceProperties(e)}get descriptionCanAnnounceProperties(){return this.getDescriptionCanAnnounceProperties()}getDescriptionCanAnnounceProperties(){return this.descriptionCanAnnounceProperty.getDependentProperties()}setVoicingCanAnnounceProperties(e){this.voicingCanAnnounceProperty.setDependentProperties(e)}set voicingCanAnnounceProperties(e){this.setVoicingCanAnnounceProperties(e)}get voicingCanAnnounceProperties(){return this.getVoicingCanAnnounceProperties()}getVoicingCanAnnounceProperties(){return this.voicingCanAnnounceProperty.getDependentProperties()}dispose(){this.canAnnounceProperty.dispose(),this.descriptionCanAnnounceProperty.dispose(),this.voicingCanAnnounceProperty.dispose(),this.priorityProperty.dispose(),super.dispose()}static alertableToText(e){let t,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("function"==typeof e)t=e();else if(e instanceof iS)t=aS.getAlertStringFromResponsePacket(e,i);else{if(e instanceof aS)return e.getAlertText(i);t=e instanceof _g||e instanceof mg?e.value:e}return t}}Ee=aS,_defineProperty(aS,"TOP_PRIORITY",10),_defineProperty(aS,"HIGH_PRIORITY",5),_defineProperty(aS,"MEDIUM_PRIORITY",2),_defineProperty(aS,"DEFAULT_PRIORITY",1),_defineProperty(aS,"LOW_PRIORITY",0),_defineProperty(aS,"UtteranceIO",new el("UtteranceIO",{valueType:Ee,documentation:"Announces text to a specific browser technology (like aria-live or web speech)",toStateObject:e=>e.toStateObject(),stateSchema:{alert:ng(SE([Om,il]))}}));class oS extends Ub{constructor(e){const t=Vo()({dependentProperties:[]},e),i=new ty(new mg(!1));super(i),this._dependentProperties=[],this.implementationProperty=i,this.setDependentProperties(t.dependentProperties)}setDependentProperties(e){this.implementationProperty.value&&this.implementationProperty.value.dispose();const t=0===e.length?[new mg(!0)]:e;this.implementationProperty.value=Rb.and(t),this._dependentProperties=e}set dependentProperties(e){this.setDependentProperties(e)}get dependentProperties(){return this.getDependentProperties()}getDependentProperties(){return this._dependentProperties.slice(0)}dispose(){this.implementationProperty.dispose(),this._dependentProperties=[],super.dispose()}}Kb.register("Utterance",aS);const lS=aS;class hS extends Km{constructor(e){var t;const i=Vo()({respectResponseCollectorProperties:!0,phetioType:hS.AnnouncerIO,phetioState:!1},e);super(i),_defineProperty(this,"readyToAnnounce",!0),_defineProperty(this,"hasSpoken",!1),this.respectResponseCollectorProperties=i.respectResponseCollectorProperties,this.announcementCompleteEmitter=new hb({parameters:[{name:"utterance",phetioType:lS.UtteranceIO},{name:"text",phetioType:ng(SE([Om,il]))}],tandem:null===(t=i.tandem)||void 0===t?void 0:t.createTandem("announcementCompleteEmitter"),phetioReadOnly:!0,phetioDocumentation:"The announcement that has just completed. The Utterance text could potentially differ from the exact text that was announced, so both are emitted. Use `text` for an exact match of what was announced."})}shouldUtteranceCancelOther(e,t){return t.priorityProperty.value<e.priorityProperty.value}onUtterancePriorityChange(e){}}_defineProperty(hS,"AnnouncerIO",new el("AnnouncerIO",{valueType:hS,documentation:"Announces text to a specific browser technology (like aria-live or web speech)"})),Kb.register("Announcer",hS);const uS=hS,cS={initialize(){if(window.speechSynthesis||window.SpeechSynthesis||window.SpeechSynthesisUtterance)throw new Error("SpeechSynthesis is supported here, the polyfill should not overwrite it");window.SpeechSynthesis=window.parent.SpeechSynthesis,window.speechSynthesis=new window.parent.SpeechSynthesis,window.SpeechSynthesisUtterance=window.parent.SpeechSynthesisUtterance}};Kb.register("SpeechSynthesisParentPolyfill",cS);const dS=cS;class pS{constructor(e,t,i){if(this.dependencies=e,this.dependencyListeners=new Map,e.forEach(i=>{const n=()=>{if(!this.isDisposed){const i=e.map(e=>e.get());t(...i)}};this.dependencyListeners.set(i,n),i.lazyLink(n,{phetioDependencies:_.without(e,i)})}),!i){const i=e.map(e=>e.get());t(...i)}this.isDisposed=!1}get definedDependencies(){return this.dependencies}dispose(){const e=this.definedDependencies;for(let t=0;t<e.length;t++){const i=e[t],n=this.dependencyListeners.get(i);i.hasListener(n)&&i.unlink(n)}this.dependencies=null,this.dependencyListeners.clear(),this.isDisposed=!0}static multilink(e,t){return new pS(e,t,!1)}static multilinkAny(e,t){return new pS(e,t)}static lazyMultilink(e,t){return new pS(e,t,!0)}static lazyMultilinkAny(e,t){return new pS(e,t,!0)}static unmultilink(e){e.dispose()}}ko.register("Multilink",pS),window.phet&&phet.chipper&&phet.chipper.queryParameters&&phet.chipper.queryParameters.speechSynthesisFromParent&&dS.initialize();const mS=["Albert","Bad News","Bahh","Bells","Boing","Bubbles","Cellos","Good News","Jester","Organ","Superstar","Trinoids","Whisper","Wobble","Zarvox","Flo","Grandma","Grandpa","Junior"];const gS={cmn:"zh_CN",yue:"zh_HK","yue-HK":"zh_HK",yue_HK:"zh_HK","fil-PH":"tl",fil_PH:"tl"},fS={cancelSelf:!0,cancelOther:!0,voice:null};class yS extends uS{constructor(e){var t,i,n,r;const s=Vo()({respectResponseCollectorProperties:!1,debug:!1},e);super(s),this.debug=s.debug,this.voiceProperty=new ty(null,{tandem:null===(t=s.tandem)||void 0===t?void 0:t.createTandem("voiceProperty"),phetioValueType:ng(vS),phetioState:!1,phetioReadOnly:!0,phetioDocumentation:"the voice that is currently voicing responses"}),this.voiceRateProperty=new zb(1,{range:new Hl(.75,2),tandem:null===(i=s.tandem)||void 0===i?void 0:i.createTandem("voiceRateProperty"),phetioState:!1,phetioDocumentation:"changes the rate of the voicing-feature voice"}),this.voicePitchProperty=new zb(1,{range:new Hl(.5,2),tandem:null===(n=s.tandem)||void 0===n?void 0:n.createTandem("voicePitchProperty"),phetioState:!1,phetioDocumentation:"changes the pitch of the voicing-feature voice"}),this.voiceVolumeProperty=new zb(1,{range:new Hl(0,1)}),this.hasSpoken=!1,this.timeSinceWakingEngine=0,this.timeSincePauseResume=0,this.timeSincePendingUtterance=0,this.timeSinceUtteranceEnd=125,this.startSpeakingEmitter=new hb({parameters:[{valueType:"string"},{valueType:lS}]}),this.endSpeakingEmitter=new hb({parameters:[{valueType:"string"},{valueType:lS}]}),this.enabledComponentImplementation=new qb({enabled:!1,tandem:s.tandem,enabledPropertyOptions:{phetioDocumentation:"toggles this controller of SpeechSynthesis on and off",phetioState:!1,phetioFeatured:!1}}),this.enabledProperty=this.enabledComponentImplementation.enabledProperty,this.mainWindowVoicingEnabledProperty=new gy(!0,{tandem:null===(r=s.tandem)||void 0===r?void 0:r.createTandem("mainWindowVoicingEnabledProperty"),phetioState:!1,phetioDocumentation:"toggles the voicing feature on and off for the simulation screen (not the voicing preferences and toolbar controls)"}),this.voicingFullyEnabledProperty=Rb.and([this.enabledProperty,this.mainWindowVoicingEnabledProperty]),this._speechAllowedAndFullyEnabledProperty=new gy(!1),this.speechAllowedAndFullyEnabledProperty=this._speechAllowedAndFullyEnabledProperty,this.synth=null,this.voicesProperty=new ty([]),this.speakingSpeechSynthesisUtteranceWrapper=null,this.isInitializedProperty=new gy(!1),this.canSpeakProperty=null,this.boundHandleCanSpeakChange=this.handleCanSpeakChange.bind(this),this.boundHandleCanAnnounceChange=this.handleCanAnnounceChange.bind(this),this.debug&&(this.announcementCompleteEmitter.addListener((e,t)=>{console.log("announcement complete",t)}),this.startSpeakingEmitter.addListener(e=>{this.debug&&console.log("startSpeakingListener",e)}),this.endSpeakingEmitter.addListener(e=>{this.debug&&console.log("endSpeakingListener",e)}))}get initialized(){return this.isInitializedProperty.value}initialize(e,t){0;const i=Vo()({speechAllowedProperty:new gy(!0)},t);this.synth=window.speechSynthesis,this.canSpeakProperty=Rb.and([i.speechAllowedProperty,this.enabledProperty]),this.canSpeakProperty.link(this.boundHandleCanSpeakChange),pS.multilink([i.speechAllowedProperty,this.voicingFullyEnabledProperty],(e,t)=>{this._speechAllowedAndFullyEnabledProperty.value=e&&t});const n=this.getSynth();n.addEventListener&&n.addEventListener("voiceschanged",()=>{this.populateVoices()}),this.populateVoices();const r=()=>{this.timeSinceWakingEngine=5e3,e.removeListener(r)};e.addListener(r),vb.addListener(this.step.bind(this)),this.isInitializedProperty.value=!0}step(e){e*=1e3;const t=this.getSynth();this.initialized&&t&&(this.hasSpoken||(this.hasSpoken=t.speaking),this.timeSinceUtteranceEnd=t.speaking?0:this.timeSinceUtteranceEnd+e,this.timeSincePendingUtterance=this.speakingSpeechSynthesisUtteranceWrapper&&!this.speakingSpeechSynthesisUtteranceWrapper.started?this.timeSincePendingUtterance+e:0,this.timeSincePendingUtterance>5e3&&(this.handleSpeechSynthesisEnd(this.speakingSpeechSynthesisUtteranceWrapper.announceText,this.speakingSpeechSynthesisUtteranceWrapper),this.speakingSpeechSynthesisUtteranceWrapper=null,this.cancelSynth()),this.timeSinceUtteranceEnd>125&&!this.speakingSpeechSynthesisUtteranceWrapper&&(this.readyToAnnounce=!0),ff.chromium&&!ff.android&&this.voiceProperty.value&&!this.voiceProperty.value.localService&&(this.timeSincePauseResume=t.speaking?this.timeSincePauseResume+e:0,this.timeSincePauseResume>1e4&&(this.timeSincePauseResume=0,t.pause(),t.resume())),ff.chromeOS&&(this.timeSinceWakingEngine+=e,!t.speaking&&this.timeSinceWakingEngine>5e3&&(this.timeSinceWakingEngine=0,t.speak(new SpeechSynthesisUtterance(" ")))))}handleCanSpeakChange(e){e||this.cancel()}populateVoices(){const e=this.getSynth();e&&(this.voicesProperty.value=_.uniqBy(e.getVoices(),e=>e.name))}getPrioritizedVoices(){const e=this.voicesProperty.value.slice(),t=_.filter(e,e=>!_.some(mS,t=>e.name.includes(t))),i=e=>e.name.includes("Google")?-1:e.name.includes("Fred")?t.length:t.indexOf(e);return t.sort((e,t)=>i(e)-i(t))}getEnglishPrioritizedVoices(){return _.filter(this.getPrioritizedVoices(),e=>"en-US"===e.lang||"en_US"===e.lang)}getPrioritizedVoicesForLocale(e){const t=e,i=e.replace("_","-");return _.filter(this.getPrioritizedVoices(),e=>{const n=gS.hasOwnProperty(e.lang)?gS[e.lang]:e.lang;let r=!1;return(n.includes("_")||n.includes("-"))&&(r=t===n.slice(0,2)),r||t===n||i===n})}announce(e,t){this.initialized&&this.canSpeakProperty&&this.canSpeakProperty.value?this.requestSpeech(e,t):this.handleAnnouncementFailure(t,e)}handleAnnouncementFailure(e,t){this.debug&&console.log("announcement failure",t),this.announcementCompleteEmitter.emit(e,t)}speakIgnoringEnabled(e){this.initialized&&(this.cancel(),this.requestSpeech(e.getAlertText(this.respectResponseCollectorProperties),e))}requestSpeech(e,t){if(this.debug&&console.log("requestSpeech",e),!e)return void this.handleAnnouncementFailure(t,e);const i=Ro()({},fS,t.announcerOptions),n=Qy(e+"").split("<br/>").join(" ").split("<br>").join(" ");Fo(n,Ho.STRING_WITHOUT_TEMPLATE_VARS_VALIDATOR);const r=new SpeechSynthesisUtterance(n);r.voice=i.voice||this.voiceProperty.value,r.pitch=this.voicePitchProperty.value,r.rate=this.voiceRateProperty.value,r.volume=this.voiceVolumeProperty.value;const s=()=>{this.startSpeakingEmitter.emit(n,t),this.speakingSpeechSynthesisUtteranceWrapper.started=!0,r.removeEventListener("start",s)},a=()=>{this.handleSpeechSynthesisEnd(n,o)},o=new ES(t,e,r,!1,a,s);this.speakingSpeechSynthesisUtteranceWrapper=o,r.addEventListener("start",s),r.addEventListener("end",a),r.addEventListener("error",a),this.readyToAnnounce=!1,this.timeSinceUtteranceEnd=0,t.canAnnounceProperty.link(this.boundHandleCanAnnounceChange),t.voicingCanAnnounceProperty.link(this.boundHandleCanAnnounceChange),this.getSynth().speak(r)}handleCanAnnounceChange(){this.speakingSpeechSynthesisUtteranceWrapper&&this.cancelUtteranceIfCanAnnounceFalse(this.speakingSpeechSynthesisUtteranceWrapper.utterance)}cancelUtteranceIfCanAnnounceFalse(e){e.canAnnounceProperty.value&&e.voicingCanAnnounceProperty.value||this.cancelUtterance(e)}handleSpeechSynthesisEnd(e,t){this.endSpeakingEmitter.emit(e,t.utterance),this.announcementCompleteEmitter.emit(t.utterance,t.speechSynthesisUtterance.text),t.speechSynthesisUtterance.removeEventListener("error",t.endListener),t.speechSynthesisUtterance.removeEventListener("end",t.endListener),t.speechSynthesisUtterance.removeEventListener("start",t.startListener);const i=t.utterance.canAnnounceProperty;i.hasListener(this.boundHandleCanAnnounceChange)&&i.unlink(this.boundHandleCanAnnounceChange);const n=t.utterance.voicingCanAnnounceProperty;n.hasListener(this.boundHandleCanAnnounceChange)&&n.unlink(this.boundHandleCanAnnounceChange),this.speakingSpeechSynthesisUtteranceWrapper=null}getSynth(){return this.synth}cancel(){this.initialized&&this.speakingSpeechSynthesisUtteranceWrapper&&this.cancelUtterance(this.speakingSpeechSynthesisUtteranceWrapper.utterance)}cancelUtterance(e){const t=this.speakingSpeechSynthesisUtteranceWrapper;t&&e===t.utterance&&(this.handleSpeechSynthesisEnd(t.announceText,t),this.cancelSynth())}shouldUtteranceCancelOther(e,t){const i=Ro()({},fS,e.announcerOptions);let n;return t.priorityProperty.value!==e.priorityProperty.value?n=t.priorityProperty.value<e.priorityProperty.value:(n=i.cancelOther,t&&t===e&&(n=i.cancelSelf)),n}onUtterancePriorityChange(e){const t=this.speakingSpeechSynthesisUtteranceWrapper;t&&this.shouldUtteranceCancelOther(e,t.utterance)&&this.cancelUtterance(t.utterance)}cancelSynth(){const e=this.getSynth();e&&e.cancel()}static isSpeechSynthesisSupported(){return!!window.speechSynthesis&&!!window.SpeechSynthesisUtterance}}class ES{constructor(e,t,i,n,r,s){this.utterance=e,this.announceText=t,this.speechSynthesisUtterance=i,this.started=n,this.endListener=r,this.startListener=s}}const vS=new el("SpeechSynthesisVoiceIO",{isValidValue:e=>!0,toStateObject:e=>e.name});Kb.register("SpeechSynthesisAnnouncer",yS);const AS=yS;const bS=new class extends AS{constructor(e){super(Vo()({respectResponseCollectorProperties:!0,phetioDocumentation:"Announcer that manages the voicing feature, providing audio responses via WebAudio."},e))}initialize(e,t){super.initialize(e,t),_b.keyupEmitter.addListener(e=>{Of.isControlKey(e)&&this.cancel()})}voicingSupportedForLocale(e){return e.startsWith("en")}};Lg.register("voicingManager",bS);const SS=bS;let _S=1;class xS extends Fl{constructor(e){super(),this.attributeString=e}}function wS(e){const t=e.attributeString,i=document.createElement("div");for(let n=1;n<=4;n++){const e=document.createElement("p");e.setAttribute("id",`elements-${_S}-${t}-${n}`),e.setAttribute("aria-live",t),i.appendChild(e)}return i}_defineProperty(xS,"POLITE",new(Ae=xS)("polite")),_defineProperty(xS,"ASSERTIVE",new Ae("assertive")),_defineProperty(xS,"enumeration",new Xl(Ae));class TS extends uS{constructor(e){const t=Vo()({respectResponseCollectorProperties:!1,lang:"en"},e);super(t),this.politeElementIndex=0,this.assertiveElementIndex=0,this.ariaLiveContainer=document.createElement("div"),this.ariaLiveContainer.setAttribute("lang",t.lang),this.ariaLiveContainer.setAttribute("id","aria-live-elements-"+_S),this.ariaLiveContainer.setAttribute("style","position: absolute; left: 0px; top: 0px; width: 0px; height: 0px; clip: rect(0px 0px 0px 0px); pointer-events: none;");const i=wS(xS.POLITE),n=wS(xS.ASSERTIVE);this.ariaLiveContainer.appendChild(i),this.ariaLiveContainer.appendChild(n),this.politeElements=Array.from(i.children),this.assertiveElements=Array.from(n.children),_S++}announce(e,t,i){const n=Vo()({ariaLivePriority:xS.POLITE},i);if(this.hasSpoken=!0,e)if(n.ariaLivePriority===xS.POLITE){const i=this.politeElements[this.politeElementIndex];this.updateLiveElement(i,e,t),this.politeElementIndex=(this.politeElementIndex+1)%this.politeElements.length}else if(n.ariaLivePriority===xS.ASSERTIVE){const i=this.assertiveElements[this.assertiveElementIndex];this.updateLiveElement(i,e,t),this.assertiveElementIndex=(this.assertiveElementIndex+1)%this.assertiveElements.length}this.announcementCompleteEmitter.emit(t,e)}cancel(){}cancelUtterance(e){}updateLiveElement(e,t,i){e.textContent="",e.hidden=!1,this.readyToAnnounce=!1,vb.setTimeout(()=>{i.predicate()?(nE.setTextContent(e,t),vb.setTimeout(()=>{ff.safari?e.hidden=!0:e.textContent="",this.readyToAnnounce=!0},TS.ARIA_LIVE_DELAY)):this.readyToAnnounce=!0},0)}}_defineProperty(TS,"ARIA_LIVE_DELAY",200),_defineProperty(TS,"AriaLive",xS),Kb.register("AriaLiveAnnouncer",TS);const PS=TS;class CS{constructor(e){this.utterance=e,this.timeInQueue=0,this.stableTime=0,this.announcingUtterancePriorityListener=null}resetTimingVariables(){this.timeInQueue=0,this.stableTime=0}}Kb.register("UtteranceWrapper",CS);const VS=CS;class RS extends Km{constructor(e,t){const i=Vo()({debug:!1,initialize:!0,featureSpecificAnnouncingControlPropertyName:null},t);super(i),this.announcer=e,this._initialized=i.initialize,this.featureSpecificAnnouncingControlPropertyName=i.featureSpecificAnnouncingControlPropertyName,this.queue=[],this._muted=!1,this._enabled=!0,this.utteranceToPriorityListenerMap=new Map,this.announcingUtteranceWrapper=null,this.debug=i.debug,this.announcer.announcementCompleteEmitter.addListener(e=>{if(this.announcingUtteranceWrapper&&e===this.announcingUtteranceWrapper.utterance){const e=this.announcingUtteranceWrapper.announcingUtterancePriorityListener;this.announcingUtteranceWrapper.utterance.priorityProperty.hasListener(e)&&(this.announcingUtteranceWrapper.utterance.priorityProperty.unlink(e),this.announcingUtteranceWrapper.announcingUtterancePriorityListener=null,this.announcingUtteranceWrapper=null)}}),this.stepQueueListener=null,this._initialized&&(this.stepQueueListener=this.stepQueue.bind(this),vb.addListener(this.stepQueueListener))}get length(){return this.queue.length}addToBack(e){if(this.initializedAndEnabled)if(this.announcer.hasSpoken){const t=this.prepareUtterance(e);this.queue.push(t),this.debug&&console.log("addToBack"),this.addPriorityListenerAndPrioritizeQueue(t)}else this.announceImmediately(e)}addToFront(e){if(Bo("`addToFront()` has been deprecated because it is confusing, and most of the time doesn't do what is expected, because Utterances are announced based on time-in-queue first, and then position in the queue. It is recommended to use addToBack, and then timing variables on Utterances, or instead call queue.clear() before adding a more important alert to the queue."),!this.initializedAndEnabled)return;const t=this.prepareUtterance(e);this.queue.unshift(t)}addPriorityListenerAndPrioritizeQueue(e){const t=()=>{this.prioritizeUtterances(e)};e.utterance.priorityProperty.lazyLink(t),this.utteranceToPriorityListenerMap.set(e.utterance,t),this.prioritizeUtterances(e)}prepareUtterance(e){e instanceof lS||(e=new lS({alert:e}));const t=new VS(e);return this.removeOthersAndUpdateUtteranceWrapper(t),t.stableTime=0,t}removeUtterance(e){const t=t=>t.utterance===e,i=_.remove(this.queue,t);this.removePriorityListeners(i)}prioritizeUtterances(e){let t=this.queue.indexOf(e);const i=t>=0;let n;n=i?t-1:-1;for(let r=n;r>=0;r--){const t=this.queue[r];this.shouldUtteranceCancelOther(e.utterance,t.utterance)&&this.removeUtterance(t.utterance)}if(i){t=this.queue.indexOf(e);const i=this.queue[t+1];i&&this.shouldUtteranceCancelOther(i.utterance,e.utterance)&&this.removeUtterance(e.utterance)}this.queue.length>0&&this.announcer.onUtterancePriorityChange(this.queue[0].utterance)}shouldUtteranceCancelOther(e,t){return this.announcer.shouldUtteranceCancelOther(e,t)}removeOthersAndUpdateUtteranceWrapper(e){const t=[];for(let n=0;n<this.queue.length;n++){const i=this.queue[n];i.utterance===e.utterance&&t.push(i.timeInQueue)}t.length>=1&&(e.timeInQueue=Math.max(...t));const i=_.remove(this.queue,t=>t.utterance===e.utterance);this.removePriorityListeners(i)}get initializedAndEnabled(){return this._enabled&&this._initialized}getNextUtterance(){let e=null;for(let t=0;t<this.queue.length;t++){const i=this.queue[t];if(i.stableTime>i.utterance.alertStableDelay||i.timeInQueue>i.utterance.alertMaximumDelay){e=i;break}}return e}hasUtterance(e){for(let t=0;t<this.queue.length;t++){if(e===this.queue[t].utterance)return!0}return!1}clear(){this.debug&&console.log("UttearnceQueue.clear()"),this.removePriorityListeners(this.queue),this.queue.length=0}cancelUtterance(e){this.announcer.cancelUtterance(e),this.hasUtterance(e)&&this.removeUtterance(e)}cancel(){this.debug&&console.log("UtteranceQueue.cancel()"),this.clear(),this.announcer.cancel()}removePriorityListeners(e){e.forEach(e=>this.removePriorityListener(e.utterance))}removePriorityListener(e){const t=this.utteranceToPriorityListenerMap.get(e);t&&(e.priorityProperty.unlink(t),this.utteranceToPriorityListenerMap.delete(e))}setMuted(e){this._muted=e}set muted(e){this.setMuted(e)}get muted(){return this.getMuted()}getMuted(){return this._muted}setEnabled(e){this._enabled=e}set enabled(e){this.setEnabled(e)}get enabled(){return this.isEnabled()}isEnabled(){return this._enabled}stepQueue(e){if(this._enabled&&(e*=1e3,this.queue.length>0)){for(let i=0;i<this.queue.length;i++){const t=this.queue[i];t.timeInQueue+=e,t.stableTime+=e}const t=this.getNextUtterance();t&&this.attemptToAnnounce(t)}}announceImmediately(e){if(this.initializedAndEnabled&&(this.debug&&console.log("announceImmediately"),e instanceof lS||(e=new lS({alert:e})),null===this.announcingUtteranceWrapper||this.announcer.shouldUtteranceCancelOther(e,this.announcingUtteranceWrapper.utterance))){const t=this.prepareUtterance(e);t.stableTime=Number.POSITIVE_INFINITY,t.timeInQueue=Number.POSITIVE_INFINITY,this.queue.unshift(t),this.addPriorityListenerAndPrioritizeQueue(t),this.queue.includes(t)&&this.attemptToAnnounce(t)}}attemptToAnnounce(e){const t=e.utterance;if(this.announcer.readyToAnnounce){const i=t.getAlertText(this.announcer.respectResponseCollectorProperties);this.debug&&console.log("ready to announce in attemptToAnnounce(): ",i);const n=!this.featureSpecificAnnouncingControlPropertyName||t[this.featureSpecificAnnouncingControlPropertyName].value,r=t.canAnnounceProperty.value&&t.predicate()&&n;!this._muted&&r&&""!==i?(this.announcingUtteranceWrapper=e,this.announcingUtteranceWrapper.announcingUtterancePriorityListener=()=>{this.prioritizeUtterances(e)},e.utterance.priorityProperty.link(this.announcingUtteranceWrapper.announcingUtterancePriorityListener),this.debug&&console.log("announcing: ",i),this.announcer.announce(i,t,t.announcerOptions)):this.debug&&console.log("announcer readyToAnnounce but utterance cannot announce, will not be spoken: ",i),this.queue.includes(e)&&this.removeUtterance(e.utterance)}else this.debug&&console.log("announcer not readyToAnnounce")}dispose(){this._initialized&&vb.removeListener(this.stepQueueListener),super.dispose()}static fromFactory(){const e=new PS,t=new RS(e),i=e.ariaLiveContainer;document.body?document.body.appendChild(i):document.children[0].appendChild(i);let n=0;const r=e=>{const t=e-n;n=e,phet.axon.stepTimer.emit(t/1e3),window.requestAnimationFrame(r)};return window.requestAnimationFrame(r),t}}Kb.register("UtteranceQueue",RS);const NS=RS,MS=new NS(SS,{featureSpecificAnnouncingControlPropertyName:"voicingCanAnnounceProperty"});MS.enabled=!1,Lg.register("voicingUtteranceQueue",MS);const kS=MS;class LS extends lS{constructor(e){super(e)}}const IS=["voicingNameResponse","voicingObjectResponse","voicingContextResponse","voicingHintResponse","voicingUtterance","voicingResponsePatternCollection","voicingIgnoreVoicingManagerProperties","voicingFocusListener"],BS=e=>{const t=nA("Voicing",IS,class t extends(Tb(e)){constructor(){super(...arguments),this._boundInstanceCanVoiceChangeListener=this.onInstanceCanVoiceChange.bind(this),this._voicingUtterance=null,t.prototype.initialize.call(this)}initialize(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return super.initialize&&super.initialize(t),this._voicingCanSpeakProperty=new mg(!0),this._voicingResponsePacket=new iS,this._voicingFocusListener=this.defaultFocusListener,this.setVoicingUtterance(new LS),this._voicingCanSpeakCount=0,this._boundInstancesChangedListener=this.addOrRemoveInstanceListeners.bind(this),this.changedInstanceEmitter.addListener(this._boundInstancesChangedListener),this._speakContentOnFocusListener={focus:e=>{this._voicingFocusListener&&this._voicingFocusListener(e)}},this.addInputListener(this._speakContentOnFocusListener),this}voicingSpeakFullResponse(e){const t=No({},e);t.hasOwnProperty("nameResponse")||(t.nameResponse=this._voicingResponsePacket.nameResponse),t.hasOwnProperty("objectResponse")||(t.objectResponse=this._voicingResponsePacket.objectResponse),t.hasOwnProperty("contextResponse")||(t.contextResponse=this._voicingResponsePacket.contextResponse),t.hasOwnProperty("hintResponse")||(t.hintResponse=this._voicingResponsePacket.hintResponse),this.collectAndSpeakResponse(t)}voicingSpeakResponse(e){const t=No({nameResponse:null,objectResponse:null,contextResponse:null,hintResponse:null},e);this.collectAndSpeakResponse(t)}voicingSpeakNameResponse(e){const t=No({},e);t.hasOwnProperty("nameResponse")||(t.nameResponse=this._voicingResponsePacket.nameResponse),this.collectAndSpeakResponse(t)}voicingSpeakObjectResponse(e){const t=No({},e);t.hasOwnProperty("objectResponse")||(t.objectResponse=this._voicingResponsePacket.objectResponse),this.collectAndSpeakResponse(t)}voicingSpeakContextResponse(e){const t=No({},e);t.hasOwnProperty("contextResponse")||(t.contextResponse=this._voicingResponsePacket.contextResponse),this.collectAndSpeakResponse(t)}voicingSpeakHintResponse(e){const t=No({},e);t.hasOwnProperty("hintResponse")||(t.hintResponse=this._voicingResponsePacket.hintResponse),this.collectAndSpeakResponse(t)}collectAndSpeakResponse(e){this.speakContent(this.collectResponse(e))}collectResponse(e){const t=No({ignoreProperties:this._voicingResponsePacket.ignoreProperties,responsePatternCollection:this._voicingResponsePacket.responsePatternCollection,utterance:this.voicingUtterance},e);let i=rS.collectResponses(t);return t.utterance&&(t.utterance.alert=i,i=t.utterance),i}speakContent(e){const t=!Lm.PHET_IO_ENABLED||!this.isInsidePhetioArchetype();e&&t&&kS.addToBack(e)}setVoicingNameResponse(e){this._voicingResponsePacket.nameResponse=e}set voicingNameResponse(e){this.setVoicingNameResponse(e)}get voicingNameResponse(){return this.getVoicingNameResponse()}getVoicingNameResponse(){return this._voicingResponsePacket.nameResponse}setVoicingObjectResponse(e){this._voicingResponsePacket.objectResponse=e}set voicingObjectResponse(e){this.setVoicingObjectResponse(e)}get voicingObjectResponse(){return this.getVoicingObjectResponse()}getVoicingObjectResponse(){return this._voicingResponsePacket.objectResponse}setVoicingContextResponse(e){this._voicingResponsePacket.contextResponse=e}set voicingContextResponse(e){this.setVoicingContextResponse(e)}get voicingContextResponse(){return this.getVoicingContextResponse()}getVoicingContextResponse(){return this._voicingResponsePacket.contextResponse}setVoicingHintResponse(e){this._voicingResponsePacket.hintResponse=e}set voicingHintResponse(e){this.setVoicingHintResponse(e)}get voicingHintResponse(){return this.getVoicingHintResponse()}getVoicingHintResponse(){return this._voicingResponsePacket.hintResponse}setVoicingIgnoreVoicingManagerProperties(e){this._voicingResponsePacket.ignoreProperties=e}set voicingIgnoreVoicingManagerProperties(e){this.setVoicingIgnoreVoicingManagerProperties(e)}get voicingIgnoreVoicingManagerProperties(){return this.getVoicingIgnoreVoicingManagerProperties()}getVoicingIgnoreVoicingManagerProperties(){return this._voicingResponsePacket.ignoreProperties}setVoicingResponsePatternCollection(e){this._voicingResponsePacket.responsePatternCollection=e}set voicingResponsePatternCollection(e){this.setVoicingResponsePatternCollection(e)}get voicingResponsePatternCollection(){return this.getVoicingResponsePatternCollection()}getVoicingResponsePatternCollection(){return this._voicingResponsePacket.responsePatternCollection}setVoicingUtterance(e){this._voicingUtterance!==e&&(this._voicingUtterance&&this.cleanVoicingUtterance(),BS.registerUtteranceToVoicingNode(e,this),this._voicingUtterance=e)}set voicingUtterance(e){this.setVoicingUtterance(e)}get voicingUtterance(){return this.getVoicingUtterance()}getVoicingUtterance(){return function(e){if(!(e instanceof lS))throw new Error("utterance is not an Utterance")}(this._voicingUtterance),this._voicingUtterance}getVoicingCanSpeakProperty(){return this._voicingCanSpeakProperty}get voicingCanSpeakProperty(){return this.getVoicingCanSpeakProperty()}setVoicingFocusListener(e){this._voicingFocusListener=e}set voicingFocusListener(e){this.setVoicingFocusListener(e)}get voicingFocusListener(){return this.getVoicingFocusListener()}getVoicingFocusListener(){return this._voicingFocusListener}defaultFocusListener(){this.voicingSpeakFullResponse({contextResponse:null})}get isVoicing(){return!0}dispose(){this.removeInputListener(this._speakContentOnFocusListener),this.changedInstanceEmitter.removeListener(this._boundInstancesChangedListener),this._voicingUtterance&&(this.cleanVoicingUtterance(),this._voicingUtterance=null),super.dispose()}clean(){this.removeInputListener(this._speakContentOnFocusListener),this.changedInstanceEmitter.removeListener(this._boundInstancesChangedListener),this._voicingUtterance&&(this.cleanVoicingUtterance(),this._voicingUtterance=null),super.clean&&super.clean()}onInstanceCanVoiceChange(e){e?this._voicingCanSpeakCount++:this._voicingCanSpeakCount--,this._voicingCanSpeakProperty.value=this._voicingCanSpeakCount>0}handleInstancesChanged(e,t){e.visible&&e.voicingVisible&&(this._voicingCanSpeakCount=t?this._voicingCanSpeakCount+1:this._voicingCanSpeakCount-1),this._voicingCanSpeakProperty.value=this._voicingCanSpeakCount>0}addOrRemoveInstanceListeners(e,t){t?e.canVoiceEmitter.addListener(this._boundInstanceCanVoiceChangeListener):e.canVoiceEmitter.removeListener(this._boundInstanceCanVoiceChangeListener),this.handleInstancesChanged(e,t)}cleanVoicingUtterance(){this._voicingUtterance instanceof LS?this._voicingUtterance.dispose():this._voicingUtterance&&!this._voicingUtterance.isDisposed&&BS.unregisterUtteranceToVoicingNode(this._voicingUtterance,this)}mutate(e){return super.mutate(e)}});return t.prototype._mutatorKeys=IS.concat(t.prototype._mutatorKeys),t};BS.VOICING_OPTION_KEYS=IS,BS.alertUtterance=e=>{kS.addToBack(e)},BS.registerUtteranceToVoicingNode=(e,t)=>{const i=e.voicingCanAnnounceProperties;i.includes(t.voicingCanSpeakProperty)||(e.voicingCanAnnounceProperties=i.concat([t.voicingCanSpeakProperty]))},BS.unregisterUtteranceToVoicingNode=(e,t)=>{const i=e.voicingCanAnnounceProperties,n=i.indexOf(t.voicingCanSpeakProperty);e.voicingCanAnnounceProperties=i.splice(n,1)},BS.registerUtteranceToNode=(e,t)=>{const i=e.voicingCanAnnounceProperties;i.includes(t.visibleProperty)||(e.voicingCanAnnounceProperties=e.voicingCanAnnounceProperties.concat([t.visibleProperty])),i.includes(t.voicingVisibleProperty)||(e.voicingCanAnnounceProperties=e.voicingCanAnnounceProperties.concat([t.voicingVisibleProperty]))},BS.unregisterUtteranceToNode=(e,t)=>{const i=e.voicingCanAnnounceProperties,n=i.indexOf(t.visibleProperty),r=i.splice(n,1).indexOf(t.voicingVisibleProperty),s=i.splice(r,1);e.voicingCanAnnounceProperties=s};Lg.register("Voicing",BS);const DS=BS;class OS extends lS{constructor(e,t){super(t),this.readingBlockFocus=e}}Lg.register("ReadingBlockUtterance",OS);const qS=OS;class YS{constructor(e,t){_defineProperty(this,"node",null),_defineProperty(this,"visibilityTracker",null);const i=Vo()({onRemoveFocus:_.noop},t);this.focusProperty=e,this.onRemoveFocus=i.onRemoveFocus,this.boundVisibilityListener=this.handleTrailVisibilityChange.bind(this),this.boundInstancesChangedListener=this.handleInstancesChange.bind(this),this.boundFocusListener=this.handleFocusChange.bind(this),this.focusProperty.link(this.boundFocusListener)}handleFocusChange(e){this.removeDisplayedListeners(),e&&this.addDisplayedListeners(e)}handleTrailVisibilityChange(){this.visibilityTracker&&!this.visibilityTracker.trailVisibleProperty.value&&(this.focusProperty.value=null,this.onRemoveFocus())}handleInstancesChange(e){e.node&&0===e.node.instances.length&&(this.focusProperty.value=null,this.onRemoveFocus())}addDisplayedListeners(e){this.visibilityTracker=new ZA(e.trail),this.visibilityTracker.addListener(this.boundVisibilityListener),this.node=e.trail.lastNode(),this.node.changedInstanceEmitter.addListener(this.boundInstancesChangedListener)}removeDisplayedListeners(){this.visibilityTracker&&(this.visibilityTracker.removeListener(this.boundVisibilityListener),this.visibilityTracker.dispose(),this.visibilityTracker=null),this.node&&(this.node.changedInstanceEmitter.removeListener(this.boundInstancesChangedListener),this.node=null)}dispose(){this.removeDisplayedListeners(),this.focusProperty.unlink(this.boundFocusListener),this.node=null,this.visibilityTracker=null,this.focusProperty=null}}Lg.register("FocusDisplayedController",YS);const HS=YS;class GS{constructor(){this.pointerFocusProperty=new ty(null),this.readingBlockFocusProperty=new ty(null),this.lockedPointerFocusProperty=new ty(null),this.pdomFocusHighlightsVisibleProperty=new gy(!0),this.interactiveHighlightsVisibleProperty=new gy(!1),this.readingBlockHighlightsVisibleProperty=new gy(!1),this.voicingFullyEnabledListener=e=>{this.readingBlockHighlightsVisibleProperty.value=e},SS.voicingFullyEnabledProperty.link(this.voicingFullyEnabledListener),this.pointerHighlightsVisibleProperty=new Rb([this.interactiveHighlightsVisibleProperty,this.readingBlockHighlightsVisibleProperty],(e,t)=>e||t),this.readingBlockFocusController=new HS(this.readingBlockFocusProperty),this.startSpeakingListener=(e,t)=>{this.readingBlockFocusProperty.value=t instanceof qS?t.readingBlockFocus:null},SS.startSpeakingEmitter.addListener(this.startSpeakingListener),this.endSpeakingListener=(e,t)=>{t instanceof qS&&this.readingBlockFocusProperty.value&&t.readingBlockFocus.trail.equals(this.readingBlockFocusProperty.value.trail)&&(this.readingBlockFocusProperty.value=null)},SS.endSpeakingEmitter.addListener(this.endSpeakingListener),this.pointerFocusDisplayedController=new HS(this.pointerFocusProperty,{onRemoveFocus:()=>{this.lockedPointerFocusProperty.value=null}})}dispose(){this.readingBlockFocusController.dispose(),this.pointerFocusDisplayedController.dispose(),this.pointerHighlightsVisibleProperty.dispose(),SS.startSpeakingEmitter.removeListener(this.startSpeakingListener),SS.endSpeakingEmitter.removeListener(this.endSpeakingListener),SS.voicingFullyEnabledProperty.unlink(this.voicingFullyEnabledListener)}static updatePDOMFocusFromEvent(e,t,i){if(i)for(let n=0;n<e.length;n++){const i=e[n],r=document.activeElement;if(i.isElementUnderPDOM(r)){const e=r.getAttribute(nE.DATA_PDOM_UNIQUE_ID),n=k_.uniqueIdToTrail(i,e),s=k_.guessVisualTrail(n,i.rootNode);s.lastNode().focusable?GS.pdomFocus=new wf(i,s):(t.target.blur(),t.stopImmediatePropagation());break}}else for(let n=0;n<e.length;n++){const i=e[n],r=i._input.getRelatedTargetTrail(t);r&&r.lastNode().focusable?GS.pdomFocus=new wf(i,k_.guessVisualTrail(r,i.rootNode)):GS.pdomFocus=null}}static set pdomFocus(e){if(GS.pdomFocusProperty.value!==e){let t;GS.pdomFocusProperty.value&&(t=GS.pdomFocusedNode),GS.pdomFocusProperty.value=e,t&&!e&&t.blur()}}static get pdomFocus(){return GS.pdomFocusProperty.value}static getPDOMFocusedNode(){let e=null;const t=GS.pdomFocusProperty.get();return t&&(e=t.trail.lastNode()),e}static get pdomFocusedNode(){return this.getPDOMFocusedNode()}static attachToWindow(){GS.attachedWindowFocusListener=()=>{GS._windowHasFocusProperty.value=!0},GS.attachedWindowBlurListener=()=>{GS._windowHasFocusProperty.value=!1},window.addEventListener("focus",GS.attachedWindowFocusListener),window.addEventListener("blur",GS.attachedWindowBlurListener),GS._windowHasFocusProperty.value=document.hasFocus(),GS.globallyAttached=!0}static detachFromWindow(){window.removeEventListener("focus",GS.attachedWindowFocusListener),window.removeEventListener("blur",GS.attachedWindowBlurListener),GS._windowHasFocusProperty.value=!1,GS.globallyAttached=!1}}be=GS,_defineProperty(GS,"attachedWindowFocusListener",null),_defineProperty(GS,"attachedWindowBlurListener",null),_defineProperty(GS,"globallyAttached",!1),_defineProperty(GS,"pdomFocusProperty",new ty(null,{tandem:Lm.GENERAL_MODEL.createTandem("pdomFocusProperty"),phetioDocumentation:"Stores the current focus in the Parallel DOM, null if nothing has focus. This is not updated based on mouse or touch input, only keyboard and other alternative inputs. Note that this only applies to simulations that support alternative input.",phetioValueType:ng(wf.FocusIO),phetioState:!1,phetioFeatured:!0,phetioReadOnly:!0})),_defineProperty(GS,"_windowHasFocusProperty",new gy(!1)),_defineProperty(GS,"windowHasFocusProperty",be._windowHasFocusProperty),Lg.register("FocusManager",GS);const FS=new Hg("rgba(212,19,106,0.5)"),zS=new Hg("rgba(250,40,135,0.9)"),US=new Hg("rgba(233,113,166,1.0)"),WS=new Hg("rgba(233,113,166,1.0)"),XS=new Hg("rgba(159,15,80,1.0)"),jS=new Hg("rgba(159,15,80,1.0)");class QS extends aA{constructor(e,t){const i=Vo()({outerStroke:FS,innerStroke:zS,outerLineWidth:null,innerLineWidth:null,dashed:!1,transformSourceNode:null},t);super(e),_defineProperty(this,"highlightChangedEmitter",new hb),this._innerHighlightColor=i.innerStroke,this._outerHighlightColor=i.outerStroke;const n=_.pick(i,Object.keys(aA.DEFAULT_PATH_OPTIONS));this.innerLineWidth=i.innerLineWidth,this.outerLineWidth=i.outerLineWidth,this.transformSourceNode=i.transformSourceNode,i.stroke=i.outerStroke,this.mutate(i);const r=No({},n,{stroke:i.innerStroke});this.innerHighlightPath=new aA(e,r),this.addChild(this.innerHighlightPath),this.updateLineWidth(),i.dashed&&this.makeDashed(!0)}mutateWithInnerHighlight(e){super.mutate(e),this.innerHighlightPath&&this.innerHighlightPath.mutate(e),this.highlightChangedEmitter.emit()}makeDashed(e){const t=e?[7,7]:[];this.mutateWithInnerHighlight({lineDash:t})}setShape(e){return super.setShape(e),this.innerHighlightPath&&this.innerHighlightPath.setShape(e),this.highlightChangedEmitter&&this.highlightChangedEmitter.emit(),this}updateLineWidth(e){e=e||this,this.lineWidth=this.getOuterLineWidth(e),this.innerHighlightPath.lineWidth=this.getInnerLineWidth(e),this.highlightChangedEmitter.emit()}getOuterLineWidth(e){return this.outerLineWidth?this.outerLineWidth:QS.getOuterLineWidthFromNode(e)}getInnerLineWidth(e){return this.innerLineWidth?this.innerLineWidth:QS.getInnerLineWidthFromNode(e)}setInnerHighlightColor(e){this._innerHighlightColor=e,this.innerHighlightPath.setStroke(e),this.highlightChangedEmitter.emit()}set innerHighlightColor(e){this.setInnerHighlightColor(e)}get innerHighlightColor(){return this.getInnerHighlightColor()}getInnerHighlightColor(){return this._innerHighlightColor}setOuterHighlightColor(e){this._outerHighlightColor=e,this.setStroke(e),this.highlightChangedEmitter.emit()}set outerHighlightColor(e){this.setOuterHighlightColor(e)}get outerHighlightColor(){return this.getOuterHighlightColor()}getOuterHighlightColor(){return this._outerHighlightColor}getUniqueHighlightTrail(e){const t=this.transformSourceNode;let i=null;if(t.instances.length<=1)i=t.getUniqueTrail();else{const n=t.getTrails().filter(t=>t.isExtensionOf(e,!0));i=n[0]}return i}static getInnerLineWidthFromNode(e){return 2.5/QS.getWidthMagnitudeFromTransform(e)}static getOuterLineWidthFromNode(e){return 4/QS.getWidthMagnitudeFromTransform(e)}static getWidthMagnitudeFromTransform(e){return e.transform.transformDelta2(al.X_UNIT).magnitude}static getDilationCoefficient(e){return.75*QS.getOuterLineWidthFromNode(e)}static getGroupDilationCoefficient(e){return 1.9*QS.getOuterLineWidthFromNode(e)}}_defineProperty(QS,"OUTER_FOCUS_COLOR",FS),_defineProperty(QS,"INNER_FOCUS_COLOR",zS),_defineProperty(QS,"INNER_LIGHT_GROUP_FOCUS_COLOR",US),_defineProperty(QS,"OUTER_LIGHT_GROUP_FOCUS_COLOR",WS),_defineProperty(QS,"INNER_DARK_GROUP_FOCUS_COLOR",XS),_defineProperty(QS,"OUTER_DARK_GROUP_FOCUS_COLOR",jS),_defineProperty(QS,"GROUP_OUTER_LINE_WIDTH",2),_defineProperty(QS,"GROUP_INNER_LINE_WIDTH",2),Lg.register("HighlightPath",QS);const KS=QS;class ZS extends KS{constructor(e,t){const i=Vo()({useLocalBounds:!0,dilationCoefficient:null,useGroupDilation:!1},t);i.transformSourceNode=e,super(null,i),_defineProperty(this,"observedBoundsProperty",null),_defineProperty(this,"boundsListener",null),this.useLocalBounds=i.useLocalBounds,this.useGroupDilation=i.useGroupDilation,this.dilationCoefficient=i.dilationCoefficient,e&&this.setShapeFromNode(e)}setShapeFromNode(e){this.observedBoundsProperty&&this.observedBoundsProperty.unlink(this.boundsListener),this.observedBoundsProperty=this.useLocalBounds?e.localBoundsProperty:e.boundsProperty,this.boundsListener=t=>{if(!t.isFinite())return;let i=this.dilationCoefficient;null===this.dilationCoefficient&&(i=this.useGroupDilation?KS.getGroupDilationCoefficient(e):KS.getDilationCoefficient(e));const n=t.dilated(i);this.updateLineWidthFromNode(e),this.setShape(Ip.bounds(n))},this.observedBoundsProperty.link(this.boundsListener)}updateLineWidthFromNode(e){this.lineWidth=this.getOuterLineWidth(e),this.innerHighlightPath.lineWidth=this.getInnerLineWidth(e)}}Lg.register("HighlightFromNode",ZS);const JS=ZS;class $S extends JS{constructor(e,t){super(e,Vo()({outerStroke:"grey",innerStroke:"black"},t))}}Lg.register("ReadingBlockHighlight",$S);const e_=$S,t_=["readingBlockTagName","readingBlockNameResponse","readingBlockHintResponse","readingBlockResponsePatternCollection","readingBlockActiveHighlight"];class i_ extends qS{constructor(e,t){super(e,t)}}const n_=new $b({nameHint:"{{NAME}}. {{HINT}}"}),r_=bv(e=>{const t=nA("ReadingBlock",t_,class extends(DS(e)){constructor(){super(...arguments),this._readingBlockTagName="button",this._readingBlockDisabledTagName="p",this._readingBlockActiveHighlight=null,this.readingBlockActiveHighlightChangedEmitter=new np,this.readingBlockResponsePatternCollection=n_,this._localBoundsChangedListener=this._onLocalBoundsChanged.bind(this),this.localBoundsProperty.link(this._localBoundsChangedListener),this._readingBlockInputListener={focus:e=>this._speakReadingBlockContentListener(e),up:e=>this._speakReadingBlockContentListener(e),click:e=>this._speakReadingBlockContentListener(e)},this._readingBlockFocusableChangeListener=this._onReadingBlockFocusableChanged.bind(this),SS.speechAllowedAndFullyEnabledProperty.link(this._readingBlockFocusableChangeListener),this.focusHighlight=new e_(this),this.voicingUtterance=new i_(null)}get isReadingBlock(){return!0}setReadingBlockTagName(e){this._readingBlockTagName=e,this._onReadingBlockFocusableChanged(SS.speechAllowedAndFullyEnabledProperty.value)}set readingBlockTagName(e){this.setReadingBlockTagName(e)}get readingBlockTagName(){return this.getReadingBlockTagName()}getReadingBlockTagName(){return this._readingBlockTagName}setReadingBlockNameResponse(e){this._voicingResponsePacket.nameResponse=e}set readingBlockNameResponse(e){this.setReadingBlockNameResponse(e)}get readingBlockNameResponse(){return this.getReadingBlockNameResponse()}getReadingBlockNameResponse(){return this._voicingResponsePacket.nameResponse}setReadingBlockHintResponse(e){this._voicingResponsePacket.hintResponse=e}set readingBlockHintResponse(e){this.setReadingBlockHintResponse(e)}get readingBlockHintResponse(){return this.getReadingBlockHintResponse()}getReadingBlockHintResponse(){return this._voicingResponsePacket.hintResponse}setReadingBlockResponsePatternCollection(e){this._voicingResponsePacket.responsePatternCollection=e}set readingBlockResponsePatternCollection(e){this.setReadingBlockResponsePatternCollection(e)}get readingBlockResponsePatternCollection(){return this.getReadingBlockResponsePatternCollection()}getReadingBlockResponsePatternCollection(){return this._voicingResponsePacket.responsePatternCollection}setVoicingUtterance(e){super.setVoicingUtterance(e)}set voicingUtterance(e){super.voicingUtterance=e}get voicingUtterance(){return this.getVoicingUtterance()}getVoicingUtterance(){const e=super.getVoicingUtterance();return e}setVoicingNameResponse(){}getVoicingNameResponse(){}setVoicingObjectResponse(){}getVoicingObjectResponse(){}setVoicingContextResponse(){}getVoicingContextResponse(){}setVoicingHintResponse(){}getVoicingHintResponse(){}setVoicingResponsePatternCollection(){}getVoicingResponsePatternCollection(){}setReadingBlockActiveHighlight(e){this._readingBlockActiveHighlight!==e&&(this._readingBlockActiveHighlight=e,this.readingBlockActiveHighlightChangedEmitter.emit())}set readingBlockActiveHighlight(e){this.setReadingBlockActiveHighlight(e)}get readingBlockActiveHighlight(){return this._readingBlockActiveHighlight}getReadingBlockActiveHighlight(){return this._readingBlockActiveHighlight}isReadingBlockActivated(){let e=!1;const t=Object.keys(this.displays);for(let i=0;i<t.length;i++){const n=this.displays[t[i]].focusManager.readingBlockFocusProperty.value;if(n&&n.trail.lastNode()===this){e=!0;break}}return e}get readingBlockActivated(){return this.isReadingBlockActivated()}_onReadingBlockFocusableChanged(e){this.focusable=e,e?(this.tagName=this._readingBlockTagName,this.hasInputListener(this._readingBlockInputListener)||this.addInputListener(this._readingBlockInputListener)):(this.tagName=this._readingBlockDisabledTagName,this.hasInputListener(this._readingBlockInputListener)&&this.removeInputListener(this._readingBlockInputListener))}_onLocalBoundsChanged(e){this.mouseArea=e,this.touchArea=e}_speakReadingBlockContentListener(e){const t=this.getConnectedDisplays(),i=this.voicingUtterance,n=this.collectResponse({nameResponse:this.getReadingBlockNameResponse(),hintResponse:this.getReadingBlockHintResponse(),ignoreProperties:this.voicingIgnoreVoicingManagerProperties,responsePatternCollection:this._voicingResponsePacket.responsePatternCollection,utterance:i});if(n)for(let r=0;r<t.length;r++)if(!this.getDescendantsUseHighlighting(e.trail)){const s=e.trail.subtrailTo(this),a=k_.guessVisualTrail(s,t[r].rootNode),o=new wf(t[r],a);i.readingBlockFocus=o,this.speakContent(n)}}cleanVoicingUtterance(){this._voicingUtterance instanceof i_&&this._voicingUtterance.dispose(),super.cleanVoicingUtterance()}dispose(){SS.speechAllowedAndFullyEnabledProperty.unlink(this._readingBlockFocusableChangeListener),this.localBoundsProperty.unlink(this._localBoundsChangedListener),this.hasInputListener(this._readingBlockInputListener)&&this.removeInputListener(this._readingBlockInputListener),super.dispose()}mutate(e){return super.mutate(e)}});return t.prototype._mutatorKeys=t_.concat(t.prototype._mutatorKeys),t});Lg.register("ReadingBlock",r_);const s_=r_,a_={isPlatformMac:()=>_.includes(window.navigator.platform,"Mac"),getPlatformZoomMetaKey:()=>a_.isPlatformMac()?"metaKey":"ctrlKey",isZoomCommand:(e,t)=>{const i=t?Of.KEY_EQUALS:Of.KEY_MINUS;return e[a_.getPlatformZoomMetaKey()]&&Of.isKeyEvent(e,i)},isZoomResetCommand:e=>e[a_.getPlatformZoomMetaKey()]&&Of.isKeyEvent(e,Of.KEY_0)};Lg.register("KeyboardZoomUtils",a_);const o_=a_,l_={INPUT:[...Of.ARROW_KEYS,Of.KEY_PAGE_UP,Of.KEY_PAGE_DOWN,Of.KEY_HOME,Of.KEY_END,Of.KEY_ENTER,Of.KEY_SPACE],DIV:[...Of.ARROW_KEYS,...Of.WASD_KEYS],P:[Of.KEY_ESCAPE],BUTTON:[Of.KEY_ENTER,Of.KEY_SPACE]},h_=Of.ALL_KEYS;class u_{constructor(e,t){this.display=e,this.random=new Jd({seed:t}),this.numberOfComponentsTested=10,this.keyupListeners=[],this.currentElement=null}chooseNextElement(){if(null===this.currentElement)this.currentElement=document.activeElement;else if(this.random.nextDouble()<.1){this.clearListeners();const e=nE.getRandomFocusable(this.random);e.focus(),this.currentElement=e}}clearListeners(){this.keyupListeners.forEach(e=>{vb.clearTimeout(e.timeout),e()})}triggerClickEvent(){const e=document.activeElement;e instanceof HTMLElement&&e.click()}triggerKeyDownUpEvents(e){this.triggerDOMEvent("keydown",e);const t=this.random.nextInt(100),i=()=>{this.triggerDOMEvent("keyup",e),this.keyupListeners.includes(i)&&this.keyupListeners.splice(this.keyupListeners.indexOf(i),1)};i.timeout=vb.setTimeout(i,100===t?2e3:t),this.keyupListeners.push(i)}triggerRandomKeyDownUpEvents(e){const t=h_[Math.floor(this.random.nextDouble()*(h_.length-1))];this.triggerKeyDownUpEvents(t)}fuzzBoardEvents(e){if(this.display&&this.display._input&&this.display._input.pdomPointer){const e=this.display._input.pdomPointer;e&&!e.blockTrustedEvents&&(e.blockTrustedEvents=!0)}for(let t=0;t<this.numberOfComponentsTested;t++){this.chooseNextElement();for(let t=0;t<e/this.numberOfComponentsTested;t++){const e=document.activeElement;if(e&&l_[e.tagName.toUpperCase()]){const t=this.random.nextDouble();if(t<.6){const t=l_[e.tagName],i=this.random.sample(t);this.triggerKeyDownUpEvents(i)}else t<.7?this.triggerClickEvent():this.triggerRandomKeyDownUpEvents(e)}else e&&this.triggerRandomKeyDownUpEvents(e)}}}triggerDOMEvent(e,t){if(document.activeElement){const i=new KeyboardEvent(e,{bubbles:!0,code:t,shiftKey:_b.shiftKeyDown,altKey:_b.altKeyDown,ctrlKey:_b.ctrlKeyDown});document.activeElement.dispatchEvent(i)}}}Lg.register("KeyboardFuzzer",u_);class c_ extends JS{constructor(e,t){super(e,Vo()({outerStroke:KS.OUTER_LIGHT_GROUP_FOCUS_COLOR,innerStroke:KS.INNER_LIGHT_GROUP_FOCUS_COLOR,outerLineWidth:KS.GROUP_OUTER_LINE_WIDTH,innerLineWidth:KS.GROUP_INNER_LINE_WIDTH,useGroupDilation:!0},t))}}Lg.register("GroupHighlightFromNode",c_);class d_ extends JS{constructor(e,t){super(e,Vo()({innerStroke:null,outerStroke:null,fill:"rgba(255,255,0,0.5)"},t))}}_defineProperty(d_,"ACTIVATED_HIGHLIGHT_COLOR","rgba(255,255,0,0.5)"),Lg.register("ActivatedReadingBlockHighlight",d_);const p_=d_,m_=nE.TAGS.LABEL,g_=nE.TAGS.INPUT,f_={attributes:!1,childList:!0,characterData:!0};let y_=1;const E_=new Zl(0,0,0,0),v_=new Zl(0,0,0,0),A_=new Mh,b_=new Mh,S_=new Mh;class __{constructor(e,t){this.initializePDOMPeer(e,t)}initializePDOMPeer(e,t){return t=Po({primarySibling:null},t),this.id=this.id||y_++,this.pdomInstance=e,this.node=this.pdomInstance.node,this.display=e.display,this.trail=e.trail,this.visible=null,this.focusable=null,this._labelSibling=null,this._descriptionSibling=null,this._containerParent=null,this.topLevelElements=[],this.positionDirty=!1,this.childPositionDirty=!1,this.positionInPDOM=!1,this.mutationObserver=this.mutationObserver||new MutationObserver(this.invalidateCSSPositioning.bind(this)),this.transformListener=this.transformListener||this.invalidateCSSPositioning.bind(this),this.pdomInstance.transformTracker.addListener(this.transformListener),this._preservedDisabledValue=null,this.isDisposed=!1,this.pdomInstance.isRootInstance&&(this._primarySibling=t.primarySibling,this._primarySibling.classList.add(Xy.ROOT_CLASS_NAME),nE.BLOCKED_DOM_EVENTS.forEach(e=>{this._primarySibling.addEventListener(e,e=>{e.stopPropagation()})})),this}update(e){let t=this.node.getBaseOptions();const i=[];null!==this.node.accessibleName&&(t=this.node.accessibleNameBehavior(this.node,t,this.node.accessibleName,i)),null!==this.node.pdomHeading&&(t=this.node.pdomHeadingBehavior(this.node,t,this.node.pdomHeading,i)),null!==this.node.helpText&&(t=this.node.helpTextBehavior(this.node,t,this.node.helpText,i)),this._primarySibling=x_(t.tagName,this.node.focusable,{namespace:t.pdomNamespace}),t.containerTagName&&(this._containerParent=x_(t.containerTagName,!1)),t.labelTagName&&(this._labelSibling=x_(t.labelTagName,!1,{excludeFromInput:this.node.excludeLabelSiblingFromInput})),t.descriptionTagName&&(this._descriptionSibling=x_(t.descriptionTagName,!1)),e&&this.updateIndicesStringAndElementIds(),this.orderElements(t),this.mutationObserver.disconnect(),this.mutationObserver.observe(this._primarySibling,f_),t.labelContent&&null!==t.labelTagName&&this.setLabelSiblingContent(t.labelContent),t.innerContent&&null!==t.tagName&&this.setPrimarySiblingContent(t.innerContent),t.descriptionContent&&null!==t.descriptionTagName&&this.setDescriptionSiblingContent(t.descriptionContent),t.tagName.toUpperCase()===g_&&t.inputType&&this.setAttributeToElement("type",t.inputType),t.labelTagName&&t.labelTagName.toUpperCase()===m_&&this.setAttributeToElement("for",this._primarySibling.id,{elementName:__.LABEL_SIBLING}),this.setFocusable(this.node.focusable),this.setPositionInPDOM(this.node.positionInPDOM),this.onAriaLabelledbyAssociationChange(),this.onAriaDescribedbyAssociationChange(),this.onActiveDescendantAssociationChange(),this.onAttributeChange(t),this.onClassChange(),this.onInputValueChange(),this.node.updateOtherNodesAriaLabelledby(),this.node.updateOtherNodesAriaDescribedby(),this.node.updateOtherNodesActiveDescendant(),i.forEach(e=>{e()})}orderElements(e){this._containerParent?(this._containerParent.insertBefore(this._primarySibling,this._containerParent.children[0]||null),this.topLevelElements=[this._containerParent]):this.topLevelElements=[this._labelSibling,this._descriptionSibling,this._primarySibling].filter(_.identity),this._labelSibling&&this.arrangeContentElement(this._labelSibling,e.appendLabel),this._descriptionSibling&&this.arrangeContentElement(this._descriptionSibling,e.appendDescription)}getPrimarySibling(){return this._primarySibling}get primarySibling(){return this.getPrimarySibling()}getLabelSibling(){return this._labelSibling}get labelSibling(){return this.getLabelSibling()}getDescriptionSibling(){return this._descriptionSibling}get descriptionSibling(){return this.getDescriptionSibling()}getContainerParent(){return this._containerParent}get containerParent(){return this.getContainerParent()}getTopLevelElementContainingPrimarySibling(){return this._containerParent||this._primarySibling}onAriaLabelledbyAssociationChange(){this.removeAttributeFromAllElements("aria-labelledby");for(let e=0;e<this.node.ariaLabelledbyAssociations.length;e++){const t=this.node.ariaLabelledbyAssociations[e];this.setAssociationAttribute("aria-labelledby",t)}}onAriaDescribedbyAssociationChange(){this.removeAttributeFromAllElements("aria-describedby");for(let e=0;e<this.node.ariaDescribedbyAssociations.length;e++){const t=this.node.ariaDescribedbyAssociations[e];this.setAssociationAttribute("aria-describedby",t)}}onActiveDescendantAssociationChange(){this.removeAttributeFromAllElements("aria-activedescendant");for(let e=0;e<this.node.activeDescendantAssociations.length;e++){const t=this.node.activeDescendantAssociations[e];this.setAssociationAttribute("aria-activedescendant",t)}}handleAttributeWithPDOMOption(e,t){"string"==typeof t?this.setAttributeToElement(e,t):this.removeAttributeFromElement(e)}onAttributeChange(e){for(let t=0;t<this.node.pdomAttributes.length;t++){const e=this.node.pdomAttributes[t];this.setAttributeToElement(e.attribute,e.value,e.options)}this.handleAttributeWithPDOMOption("aria-label",e.ariaLabel),this.handleAttributeWithPDOMOption("role",e.ariaRole)}onClassChange(){for(let e=0;e<this.node.pdomClasses.length;e++){const t=this.node.pdomClasses[e];this.setClassToElement(t.className,t.options)}}onInputValueChange(){if(null===this.node.inputValue)this.removeAttributeFromElement("value");else{const e=""+this.node.inputValue;this.setAttributeToElement("value",e,{asProperty:!0})}}getElementByName(e){if(e===__.PRIMARY_SIBLING)return this._primarySibling;if(e===__.LABEL_SIBLING)return this._labelSibling;if(e===__.DESCRIPTION_SIBLING)return this._descriptionSibling;if(e===__.CONTAINER_PARENT)return this._containerParent;throw new Error("invalid elementName name: "+e)}setAttributeToElement(e,t,i){const n=(i=Po({namespace:null,asProperty:!1,elementName:"PRIMARY_SIBLING",element:null},i)).element||this.getElementByName(i.elementName);let r=t;"string"==typeof t&&(r=Qy(t)),"disabled"!==e||this.display.interactive||(this._preservedDisabledValue=!i.asProperty||r),i.namespace?n.setAttributeNS(i.namespace,e,r):i.asProperty?n[e]=r:n.setAttribute(e,r)}removeAttributeFromElement(e,t){const i=(t=Po({namespace:null,elementName:"PRIMARY_SIBLING",element:null},t)).element||this.getElementByName(t.elementName);t.namespace?i.removeAttributeNS(t.namespace,e):"disabled"!==e||this.display.interactive?i.removeAttribute(e):this._preservedDisabledValue=!1}removeAttributeFromAllElements(e){this._primarySibling&&this._primarySibling.removeAttribute(e),this._labelSibling&&this._labelSibling.removeAttribute(e),this._descriptionSibling&&this._descriptionSibling.removeAttribute(e),this._containerParent&&this._containerParent.removeAttribute(e)}setClassToElement(e,t){t=Po({elementName:"PRIMARY_SIBLING"},t),this.getElementByName(t.elementName).classList.add(e)}removeClassFromElement(e,t){t=Po({elementName:"PRIMARY_SIBLING"},t),this.getElementByName(t.elementName).classList.remove(e)}setAssociationAttribute(e,t){const i=t.otherNode.getPDOMInstances();if(i.length>0){const n=i[0];n===this.pdomInstance&&(n.peer=this);const r=n.peer.getElementByName(t.otherElementName),s=this.getElementByName(t.thisElementName);if(s&&r){const i=s.getAttribute(e)||"",n=[i.trim(),r.id].join(" ").trim();this.setAttributeToElement(e,n,{elementName:t.thisElementName})}}}arrangeContentElement(e,t){if(this.topLevelElements[0]===this._containerParent)t?this._containerParent.appendChild(e):this._containerParent.insertBefore(e,this._primarySibling);else{rm(this.topLevelElements,e);const i=this.topLevelElements.indexOf(this._primarySibling),n=t?this.topLevelElements.length:i;this.topLevelElements.splice(n,0,e)}}isVisible(){return null===this.visible||this.visible}setVisible(e){if(this.visible!==e){this.visible=e;for(let t=0;t<this.topLevelElements.length;t++){const i=this.topLevelElements[t];e?this.removeAttributeFromElement("hidden",{element:i}):this.setAttributeToElement("hidden","",{element:i})}this.invalidateCSSPositioning()}}isFocused(){const e=k_.guessVisualTrail(this.trail,this.display.rootNode);return GS.pdomFocusProperty.value&&GS.pdomFocusProperty.value.trail.equals(e)}focus(){GS.windowHasFocusProperty.value&&this._primarySibling.focus()}blur(){this._primarySibling.blur()}setFocusable(e){const t=this.isFocused();this.focusable!==e&&(this.focusable=e,nE.overrideFocusWithTabIndex(this.primarySibling,e),t&&!e&&this.blur(),this.invalidateCSSPositioning())}setLabelSiblingContent(e){this._labelSibling&&nE.setTextContent(this._labelSibling,e)}setDescriptionSiblingContent(e){this._descriptionSibling&&nE.setTextContent(this._descriptionSibling,e)}setPrimarySiblingContent(e){this._primarySibling&&nE.setTextContent(this._primarySibling,e)}setPDOMTransformSourceNode(e){this.pdomInstance.transformTracker.removeListener(this.transformListener),this.pdomInstance.updateTransformTracker(e),this.pdomInstance.transformTracker.addListener(this.transformListener),this.invalidateCSSPositioning()}setPositionInPDOM(e){this.positionInPDOM=e,this.invalidateCSSPositioning()}getElementId(e,t){return`display${this.display.id}-${e}-${t}`}updateIndicesStringAndElementIds(){const e=this.pdomInstance.getPDOMInstanceUniqueId();this._primarySibling&&(this._primarySibling.setAttribute(nE.DATA_PDOM_UNIQUE_ID,e),this._primarySibling.id=this.getElementId("primary",e)),this._labelSibling&&(this._labelSibling.setAttribute(nE.DATA_PDOM_UNIQUE_ID,e),this._labelSibling.id=this.getElementId("label",e)),this._descriptionSibling&&(this._descriptionSibling.setAttribute(nE.DATA_PDOM_UNIQUE_ID,e),this._descriptionSibling.id=this.getElementId("description",e)),this._containerParent&&(this._containerParent.setAttribute(nE.DATA_PDOM_UNIQUE_ID,e),this._containerParent.id=this.getElementId("container",e))}invalidateCSSPositioning(){if(!this.positionDirty){this.positionDirty=!0;let e=this.pdomInstance.parent;for(;e;)e.peer.childPositionDirty=!0,e=e.parent}}positionElements(e){if(e){const e=this.node.pdomTransformSourceNode||this.node;if(E_.set(e.localBounds),E_.isFinite()){E_.transform(this.pdomInstance.transformTracker.getMatrix());const e=this.display.bounds;if(e.intersectsBounds(E_)){E_.constrainBounds(e);let t=T_(this._primarySibling),i=t.width,n=t.height;i>0&&n>0&&(v_.setMinMax(0,0,i,n),v_.transform(w_(i,n,E_)),P_(this._primarySibling,v_)),this.labelSibling&&(t=T_(this._labelSibling),i=t.width,n=t.height,n>0&&i>0&&(v_.setMinMax(0,0,i,n),v_.transform(w_(i,n,E_)),P_(this._labelSibling,v_)))}}}else v_.set(__.OFFSCREEN_SIBLING_BOUNDS),P_(this._primarySibling,v_),this._labelSibling&&P_(this._labelSibling,v_);this.positionDirty=!1}updateSubtreePositioning(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.childPositionDirty=!1;const t=this.positionInPDOM||e;this.positionDirty&&this.positionElements(t);for(let i=0;i<this.pdomInstance.children.length;i++){const e=this.pdomInstance.children[i].peer;(e.positionDirty||e.childPositionDirty)&&this.pdomInstance.children[i].peer.updateSubtreePositioning(t)}}recursiveDisable(e){e?(this._preservedDisabledValue=this._primarySibling.disabled,this._primarySibling.disabled=!0):this._primarySibling.disabled=this._preservedDisabledValue;for(let t=0;t<this.pdomInstance.children.length;t++)this.pdomInstance.children[t].peer.recursiveDisable(e)}dispose(){this.isDisposed=!0,this.blur(),this._primarySibling.removeEventListener("blur",this.blurEventListener),this._primarySibling.removeEventListener("focus",this.focusEventListener),this.pdomInstance.transformTracker.removeListener(this.transformListener),this.mutationObserver.disconnect(),this.pdomInstance=null,this.node=null,this.display=null,this.trail=null,this._primarySibling=null,this._labelSibling=null,this._descriptionSibling=null,this._containerParent=null,this.focusable=null,this.freeToPool()}}function x_(e,t,i){i=Po({siblingName:null,excludeFromInput:!1},i);const n=nE.createElement(e,t,i);return i.excludeFromInput&&n.setAttribute(nE.DATA_EXCLUDE_FROM_INPUT,!0),n}function w_(e,t,i){return A_.setToTranslation(i.minX,i.minY),b_.setToScale(i.width/e,i.height/t),A_.multiplyMatrix(b_).multiplyMatrix(S_)}function T_(e){let t=e.clientWidth,i=e.clientHeight;if(0===t&&0===i){const n=e.getBoundingClientRect();t=n.width,i=n.height}return{width:t,height:i}}function P_(e,t){e.style.top=t.top+"px",e.style.left=t.left+"px",e.style.width=t.width+"px",e.style.height=t.height+"px"}__.PRIMARY_SIBLING="PRIMARY_SIBLING",__.LABEL_SIBLING="LABEL_SIBLING",__.DESCRIPTION_SIBLING="DESCRIPTION_SIBLING",__.CONTAINER_PARENT="CONTAINER_PARENT",__.OFFSCREEN_SIBLING_BOUNDS=new Zl(0,0,1,1),Lg.register("PDOMPeer",__),cy.mixInto(__,{initialize:__.prototype.initializePDOMPeer});const C_=__;class V_ extends Fl{}_defineProperty(V_,"INDICES",new(Se=V_)),_defineProperty(V_,"TRAIL_ID",new Se),_defineProperty(V_,"enumeration",new Xl(Se));const R_=V_.TRAIL_ID;let N_=1;class M_{constructor(e,t,i){_defineProperty(this,"relativeNodes",[]),_defineProperty(this,"relativeVisibilities",[]),_defineProperty(this,"relativeListeners",[]),_defineProperty(this,"transformTracker",null),this.initializePDOMInstance(e,t,i)}initializePDOMInstance(e,t,i){if(this.id=this.id||N_++,this.parent=e,this.display=t,this.trail=i,this.isRootInstance=null===e,this.node=this.isRootInstance?null:i.lastNode(),this.children=Yp(this.children),this.node&&this.node.addPDOMInstance(this),this.invisibleCount=0,this.relativeNodes=[],this.relativeVisibilities=[],this.relativeListeners=[],this.transformTracker=null,this.updateTransformTracker(this.node?this.node.pdomTransformSourceNode:null),this.isDisposed=!1,this.isRootInstance){const e=document.createElement("div");this.peer=C_.createFromPool(this,{primarySibling:e})}else{this.peer=C_.createFromPool(this),this.peer.update(R_===V_.TRAIL_ID);const e=this.parent.trail;for(let n=e.length;n<i.length;n++){const r=i.nodes[n];this.relativeNodes.push(r);const s=r._pdomDisplaysInfo.pdomDisplays,a=_.includes(s,t);this.relativeVisibilities.push(a),a||this.invisibleCount++;const o=this.checkAccessibleDisplayVisibility.bind(this,n-e.length);r.pdomDisplaysEmitter.addListener(o),this.relativeListeners.push(o)}this.updateVisibility()}return this}addConsecutiveInstances(e){const t=this.children.length>0;Array.prototype.push.apply(this.children,e);for(let i=0;i<e.length;i++)nE.insertElements(this.peer.primarySibling,e[i].peer.topLevelElements);t&&this.sortChildren(),R_===V_.INDICES&&this.updateDescendantPeerIds(e)}removeInstancesForTrail(e){for(let t=0;t<this.children.length;t++){const i=this.children[t],n=i.trail;let r=n.length<e.length;if(!r)for(let t=this.trail.length;t<e.length;t++)if(e.nodes[t]!==n.nodes[t]){r=!0;break}r||(this.children.splice(t,1),i.dispose(),t-=1)}}removeAllChildren(){for(;this.children.length;)this.children.pop().dispose()}findChildWithTrail(e){for(let t=0;t<this.children.length;t++){const i=this.children[t];if(i.trail.equals(e))return i}return null}removeSubtree(e){for(let t=this.children.length-1;t>=0;t--){const i=this.children[t];i.trail.isExtensionOf(e,!0)&&(this.children.splice(t,1),i.dispose())}}checkAccessibleDisplayVisibility(e){const t=_.includes(this.relativeNodes[e]._pdomDisplaysInfo.pdomDisplays,this.display);if(t!==this.relativeVisibilities[e]){this.relativeVisibilities[e]=t;const i=0===this.invisibleCount;this.invisibleCount+=t?-1:1,0===this.invisibleCount!==i&&this.updateVisibility()}}updateVisibility(){this.peer.setVisible(this.invisibleCount<=0),!this.peer.isVisible()&&GS.pdomFocusedNode&&GS.pdomFocusedNode.pdomInstances[0].trail.containsNode(this.node)&&(GS.pdomFocus=null)}isGloballyVisible(){return!!this.peer.isVisible()&&(!this.parent||this.parent.isGloballyVisible())}getChildOrdering(e){const t=e.lastNode(),i=t.getEffectiveChildren();let n;const r=[];if(t.hasPDOMContent&&t!==this.node){const i=t.pdomInstances;e:for(n=0;n<i.length;n++){const t=i[n];if(t.parent===this){for(let i=0;i<e.length;i++)if(e.nodes[i]!==t.trail.nodes[i+t.trail.length-e.length])continue e;r.push(t)}}}else for(n=0;n<i.length;n++)e.addDescendant(i[n],n),Array.prototype.push.apply(r,this.getChildOrdering(e)),e.removeDescendant();return r}sortChildren(){var e,t;let i;i=this.isRootInstance?this.display.rootNode:this.node;const n=this.getChildOrdering(new Dv(i));this.children=n;const r=this.peer.primarySibling,s=(null===(e=GS.pdomFocusedNode)||void 0===e||null===(t=e.pdomInstances[0])||void 0===t?void 0:t.trail)||null;let a=r.childNodes.length-1;const o=s&&_.find(this.children,e=>s.containsNode(e.peer.node));if(o){const e=_.flatten(this.children.map(e=>e.peer.topLevelElements));if(!_.every(e,(e,t)=>r.children[t]===e)){const t=o.peer.getTopLevelElementContainingPrimarySibling(),i=e.indexOf(t);for(let n=0;n<i;n++)r.insertBefore(e[n],t);for(let n=i+1;n<e.length;n++)r.appendChild(e[n])}}else for(let l=this.children.length-1;l>=0;l--){const e=this.children[l].peer;for(let t=e.topLevelElements.length-1;t>=0;t--){const i=e.topLevelElements[t];r.childNodes[a]!==i&&r.insertBefore(i,r.childNodes[a+1]),a--}}R_===V_.INDICES&&this.updateDescendantPeerIds(this.children)}updateTransformTracker(e){this.transformTracker&&this.transformTracker.dispose();let t=null;t=e?e.getUniqueTrail():M_.guessVisualTrail(this.trail,this.display.rootNode),this.transformTracker=new QA(t)}getPDOMInstanceUniqueId(){if(R_===V_.INDICES){const e=[];let t=this;for(;t.parent;){const i=t.parent.children.indexOf(t);if(-1===i)return"STILL_BEING_CREATED"+ep.nextDouble();e.unshift(i),t=t.parent}return e.join(nE.PDOM_UNIQUE_ID_SEPARATOR)}return this.trail.getUniqueId()}updateDescendantPeerIds(e){const t=Array.from(e);for(;t.length>0;){const e=t.shift();e.peer.updateIndicesStringAndElementIds(),t.push(...e.children)}}static uniqueIdToTrail(e,t){return R_===V_.INDICES?e.getTrailFromPDOMIndicesString(t):Dv.fromUniqueId(e.rootNode,t)}dispose(){const e=this.peer;if(!this.isRootInstance){nE.removeElements(this.parent.peer.primarySibling,e.topLevelElements);for(let e=0;e<this.relativeNodes.length;e++)this.relativeNodes[e].pdomDisplaysEmitter.removeListener(this.relativeListeners[e])}for(;this.children.length;)this.children.pop().dispose();e.dispose(),this.transformTracker.dispose(),this.transformTracker=null,this.node&&this.node.removePDOMInstance(this),this.relativeNodes=null,this.display=null,this.trail=null,this.node=null,this.peer=null,this.isDisposed=!0,this.freeToPool()}toString(){return`${this.id}#{${this.trail.toString()}}`}auditRoot(){return void 0}static guessVisualTrail(e,t){e.reindex();const i=e.indices.lastIndexOf(-1);if(i<0)return e;const n=i+1,r=e.nodes[n].getTrailsTo(t);if(0===r.length)return e;const s=r[0];for(let a=n+1;a<e.length;a++)s.addDescendant(e.nodes[a]);return s}static createFakePDOMTree(e){return{node:null,children:function e(t){let i=_.flatten(t.getEffectiveChildren().map(e));return t.hasPDOMContent&&(i=[{node:t,children:i}]),i}(e)}}freeToPool(){M_.pool.freeToPool(this)}}_defineProperty(M_,"pool",new Mo(_e=M_,{initialize:_e.prototype.initializePDOMInstance})),Lg.register("PDOMInstance",M_);const k_=M_;let L_=null;const I_={addChild(e,t){I_.beforeOp(),t._pdomParent||I_.addTree(e,t),I_.afterOp()},removeChild(e,t){I_.beforeOp(),t._pdomParent||I_.removeTree(e,t),I_.afterOp()},childrenOrderChange(e){I_.beforeOp(),I_.reorder(e),I_.afterOp()},pdomOrderChange(e,t,i){I_.beforeOp();const n=[],r=[];let s,a;HE(t||[],i||[],n,r);const o=I_.findPDOMTrails(e);for(s=0;s<n.length;s++){const t=n[s];t&&(I_.removeTree(e,t,o),t._pdomParent=null)}for(s=0;s<r.length;s++){const t=r[s];if(t){const i=t._parents;for(a=0;a<i.length;a++)I_.removeTree(i[a],t);t._pdomParent=e}}for(s=0;s<n.length;s++){const e=n[s];if(e){const t=e._parents;for(a=0;a<t.length;a++)I_.addTree(t[a],e)}}for(s=0;s<r.length;s++){const t=r[s];t&&I_.addTree(e,t,o)}I_.reorder(e,o),I_.afterOp()},pdomContentChange(e){let t;I_.beforeOp();const i=e._pdomParent?[e._pdomParent]:e._parents,n=[];for(t=0;t<i.length;t++){const r=i[t],s=I_.findPDOMTrails(r);n.push(s),I_.removeTree(r,e,s)}for(t=0;t<i.length;t++)I_.addTree(i[t],e,n[t]);for(t=0;t<e._rootedDisplays.length;t++){const i=e._rootedDisplays[t];i._accessible&&I_.rebuildInstanceTree(i._rootPDOMInstance)}I_.afterOp()},rebuildInstanceTree(e){const t=e.display.rootNode;e.removeAllChildren(),e.addConsecutiveInstances(I_.createTree(new Dv(t),e.display,e))},addTree(e,t,i){i=i||I_.findPDOMTrails(e);for(let n=0;n<i.length;n++){const e=i[n],r=e.pdomInstance;e.fullTrail.addDescendant(t);const s=I_.createTree(e.fullTrail,r.display,r);e.fullTrail.removeDescendant(t),r.addConsecutiveInstances(s)}},removeTree(e,t,i){i=i||I_.findPDOMTrails(e);for(let n=0;n<i.length;n++){const e=i[n];e.fullTrail.addDescendant(t),e.pdomInstance.removeInstancesForTrail(e.fullTrail),e.fullTrail.removeDescendant(t)}},reorder(e,t){t=t||I_.findPDOMTrails(e);for(let i=0;i<t.length;i++){t[i].pdomInstance.sortChildren()}},createTree(e,t,i){const n=e.lastNode(),r=n.getEffectiveChildren();let s,a=!1;n.hasPDOMContent&&(s=i.findChildWithTrail(e),s?a=!0:s=k_.pool.create(i,t,e.copy()),i=s);const o=[];for(let l=0;l<r.length;l++)e.addDescendant(r[l],l),Array.prototype.push.apply(o,I_.createTree(e,t,i)),e.removeDescendant();return s?(s.addConsecutiveInstances(o),a?[]:[s]):o},beforeOp(){L_=GS.pdomFocusedNode,ax.blockFocusCallbacks=!0},afterOp(){L_&&L_.focusable&&L_.focus(),ax.blockFocusCallbacks=!1},findPDOMTrails(e){const t=[];return I_.recursivePDOMTrailSearch(t,new Dv(e)),t},recursivePDOMTrailSearch(e,t){const i=t.rootNode();let n;if(i.hasPDOMContent){const r=i.pdomInstances;for(n=0;n<r.length;n++)e.push(new Uy(r[n],t.copy(),!1));return}{const r=i.rootedDisplays;for(n=0;n<r.length;n++){const i=r[n];i._accessible&&e.push(new Uy(i._rootPDOMInstance,t.copy(),!0))}}const r=i._pdomParent?[i._pdomParent]:i._parents,s=r.length;for(n=0;n<s;n++){const i=r[n];t.addAncestor(i),I_.recursivePDOMTrailSearch(e,t),t.removeAncestor()}},auditPDOMDisplays(e){0},auditNodeForPDOMCycles(e){0},debugOrder:e=>null===e?"null":`[${e.map(e=>null===e?"null":e._id).join(",")}]`};Lg.register("PDOMTree",I_);const B_=I_;class D_{constructor(e){this.indices=e}size(){return this.indices.length}apply(e){if("number"==typeof e)return this.indices[e];{if(e.length!==this.size())throw new Error(`Permutation length ${this.size()} not equal to list length ${e.length}`);const t=new Array(e.length);for(let i=0;i<e.length;i++)t[i]=e[this.indices[i]];return t}}inverted(){const e=new Array(this.size());for(let t=0;t<this.size();t++)e[this.indices[t]]=t;return new D_(e)}withIndicesPermuted(e){const t=[];return D_.forEachPermutation(e,i=>{const n=this.indices,r=n.slice(0);for(let t=0;t<e.length;t++)r[e[t]]=n[i[t]];t.push(new D_(r))}),t}toString(){return`P[${this.indices.join(", ")}]`}equals(e){return this.indices.length===e.indices.length&&_.isEqual(this.indices,e.indices)}static identity(e){const t=new Array(e);for(let i=0;i<e;i++)t[i]=i;return new D_(t)}static permutations(e){const t=[];return D_.forEachPermutation(fl.rangeInclusive(0,e-1),e=>{t.push(new D_(e.slice()))}),t}static forEachPermutation(e,t){!function e(t,i,n){if(0===t.length)n(i);else for(let r=0;r<t.length;r++){const s=t[r],a=t.slice(0);a.splice(r,1);const o=i.slice(0);o.push(s),e(a,o,n)}}(e,[],t)}static permutationsOf(e){const t=[];return D_.forEachPermutation(e,e=>{t.push(e.slice())}),t}}rl.register("Permutation",D_);const O_=D_;class q_{constructor(e,t,i){i=i||null,this.nodeCount=e,this.logToConsole=t,this.nodes=_.range(0,e).map(()=>new cv),this.display=new SV(this.nodes[0]),this.random=new Jd({seed:i}),this.actionsTaken=[]}step(){const e=this.random.sample(this.enumerateActions());if(this.logToConsole&&console.log(e.text),this.actionsTaken.push(e),e.execute(),this.display._rootPDOMInstance.auditRoot(),B_.auditPDOMDisplays(this.display.rootNode),this.logToConsole)for(let t=0;t<this.nodes.length;t++){const e=this.nodes[t];console.log(`${t}#${e.id} ${e.tagName} ch:${B_.debugOrder(e.children)} or:${B_.debugOrder(e.pdomOrder)} vis:${e.visible} avis:${e.pdomVisible}`)}}enumerateActions(){const e=[];return this.nodes.forEach(t=>{e.push({text:`#${t.id}.visible = ${!t.visible}`,execute:()=>{t.visible=!t.visible}}),e.push({text:`#${t.id}.pdomVisible = ${!t.pdomVisible}`,execute:()=>{t.pdomVisible=!t.pdomVisible}}),["span","div",null].forEach(i=>{t.tagName!==i&&e.push({text:`#${t.id}.tagName = ${i}`,execute:()=>{t.tagName=i}})}),this.powerSet(HE(this.nodes,[t]).concat([null])).forEach(i=>{O_.forEachPermutation(i,i=>{this.isPDOMOrderChangeLegal(t,i)&&e.push({text:`#${t.id}.pdomOrder = ${B_.debugOrder(i)}`,execute:()=>{t.pdomOrder=i}})})}),this.nodes.forEach(i=>{this.isAddChildLegal(t,i)&&_.range(0,t.children.length+1).forEach(n=>{e.push({text:`#${t.id}.insertChild(${n},#${i.id})`,execute:()=>{t.insertChild(n,i)}})}),t.hasChild(i)&&e.push({text:`#${t.id}.removeChild(#${i.id})`,execute:()=>{t.removeChild(i)}})})}),e}isAddChildLegal(e,t){return!e.hasChild(t)&&this.isAcyclic(e,t)}powerSet(e){if(0===e.length)return[[]];{const t=this.powerSet(e.slice(1));return t.concat(t.map(t=>[e[0]].concat(t)))}}isPDOMOrderChangeLegal(e,t){if(null===t&&(t=[]),t=t.filter(e=>null!==e),_.includes(t,e)||_.uniq(t).length<t.length)return!1;for(let r=0;r<t.length;r++)if(t[r]._pdomParent&&t[r]._pdomParent!==e)return!1;const i=(i,n)=>i===e?i.hasChild(n)||_.includes(t,n):i.hasChild(n)||!!i.pdomOrder&&_.includes(i.pdomOrder,n),n=e.children.concat(t);return _.every(n,t=>this.isAcyclic(e,t,i))}isAcyclic(e,t,i){if(e===t)return!1;const n=t.children.concat(t.pdomOrder).filter(e=>null!==e);for(;n.length;){const t=n.pop();if(t===e)return!1;i?this.nodes.forEach(e=>{i(t,e)&&n.push(e)}):(Array.prototype.push.apply(n,t.children),t.pdomOrder&&Array.prototype.push.apply(n,t.pdomOrder.filter(e=>null!==e)))}return!0}dispose(){this.display.dispose()}}Lg.register("PDOMFuzzer",q_);class Y_ extends Fl{}_defineProperty(Y_,"DRAG",new(xe=Y_)),_defineProperty(Y_,"KEYBOARD_DRAG",new xe),_defineProperty(Y_,"enumeration",new Xl(xe,{phetioDocumentation:"entries when signifying Intent of the pointer"}));class H_{constructor(e,t){this.point=e,this.type=t,this.trail=null,this.inputEnabledTrail=null,this.isDownProperty=new gy(!1),this.attachedProperty=new gy(!1),this._listeners=[],this._attachedListener=null,this._cursor=null,this.lastEventContext=null,this._intents=[],this._pointerCaptured=!1,this._listenerForDragReserve=null,this._listenerForKeyboardDragReserve=null}setCursor(e){return this._cursor=e,this}set cursor(e){this.setCursor(e)}get cursor(){return this.getCursor()}getCursor(){return this._cursor}getListeners(){return this._listeners.slice()}get listeners(){return this.getListeners()}addInputListener(e,t){this._listeners.push(e),t&&this.attach(e)}removeInputListener(e){const t=_.indexOf(this._listeners,e);this.isAttached()&&e===this._attachedListener&&this.detach(e),this._listeners.splice(t,1)}getAttachedListener(){return this._attachedListener}get attachedListener(){return this.getAttachedListener()}isAttached(){return this.attachedProperty.value}isTouchLike(){return!1}set isDown(e){this.isDownProperty.value=e}get isDown(){return this.isDownProperty.value}interruptAttached(){this.isAttached()&&this._attachedListener.interrupt()}interruptAll(){const e=this._listeners.slice();for(let t=0;t<e.length;t++){const i=e[t];i.interrupt&&i.interrupt()}}attach(e){this.attachedProperty.value=!0,this._attachedListener=e}updatePoint(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];const t=this.hasPointChanged(e);return this.point=e,t}down(e){this.isDown=!0}up(e,t){return this.isDown=!1,this.updatePoint(e,"up")}cancel(e){return this.isDown=!1,this.updatePoint(e,"cancel")}detach(e){this.attachedProperty.value=!1,this._attachedListener=null}hasPointChanged(e){return!(this.point===e||e&&this.point&&this.point.equals(e))}addIntent(e){this._intents.includes(e)||this._intents.push(e)}removeIntent(e){if(this._intents.includes(e)){const t=this._intents.indexOf(e);this._intents.splice(t,1)}}hasIntent(e){return this._intents.includes(e)}reserveForDrag(){if(!this._intents.includes(Y_.DRAG)){this.addIntent(Y_.DRAG);const e={up:e=>{this.removeIntent(Y_.DRAG),this.removeInputListener(this._listenerForDragReserve),this._listenerForDragReserve=null}};this._listenerForDragReserve=e,this.addInputListener(this._listenerForDragReserve)}}reserveForKeyboardDrag(){if(!this._intents.includes(Y_.KEYBOARD_DRAG)){this.addIntent(Y_.KEYBOARD_DRAG);const e={keyup:e=>t(),blur:e=>t()},t=()=>{this.removeIntent(Y_.KEYBOARD_DRAG),this.removeInputListener(this._listenerForKeyboardDragReserve),this._listenerForKeyboardDragReserve=null};this._listenerForKeyboardDragReserve=e,this.addInputListener(this._listenerForKeyboardDragReserve)}}onGotPointerCapture(){this._pointerCaptured=!0}onLostPointerCapture(){this._pointerCaptured&&this.interruptAll(),this._pointerCaptured=!1}dispose(){this._listenerForDragReserve&&this._listeners.includes(this._listenerForDragReserve)&&this.removeInputListener(this._listenerForDragReserve),this._listenerForKeyboardDragReserve&&this._listeners.includes(this._listenerForKeyboardDragReserve)&&this.removeInputListener(this._listenerForKeyboardDragReserve)}toString(){return`Pointer#${this.type}_at_${this.point}`}}_defineProperty(H_,"PointerIO",new el("PointerIO",{valueType:H_,toStateObject:e=>({point:e.point.toStateObject(),type:e.type}),stateSchema:{point:al.Vector2IO,type:Om}})),Lg.register("Pointer",H_);class G_ extends H_{constructor(e){super(e,"mouse"),this.id=null,this.leftDown=!1,this.middleDown=!1,this.rightDown=!1,this.wheelDelta=new bl(0,0,0),this.wheelDeltaMode=0}down(e){switch(e.button){case 0:this.leftDown=!0;break;case 1:this.middleDown=!0;break;case 2:this.rightDown=!0}return super.down(e)}up(e,t){switch(t.button){case 0:this.leftDown=!1;break;case 1:this.middleDown=!1;break;case 2:this.rightDown=!1}return super.up(e,t)}move(e){const t=this.hasPointChanged(e);return this.point=e,t}over(e){const t=this.hasPointChanged(e);return this.point=e,t}out(e){return this.hasPointChanged(e)}wheel(e){const t=e;this.wheelDelta.setXYZ(t.deltaX,t.deltaY,t.deltaZ),this.wheelDeltaMode=t.deltaMode}toString(){return"Mouse"}}Lg.register("Mouse",G_);class F_ extends H_{constructor(e,t,i){super(t,"touch"),this.id=e}move(e){const t=this.hasPointChanged(e);return this.point=e,t}toString(){return"Touch#"+this.id}isTouchLike(){return!0}}Lg.register("Touch",F_);class z_ extends H_{constructor(e,t,i){super(t,"pen"),this.id=e}move(e){const t=this.hasPointChanged(e);return this.point=e,t}toString(){return"Pen#"+this.id}isTouchLike(){return!0}}Lg.register("Pen",z_);class U_ extends H_{constructor(e){super(al.ZERO,"pdom"),this.display=e,this.initializeListeners(),this.blockTrustedEvents=!1,this.keydownTargetNode=null}initializeListeners(){this.addInputListener({focus:e=>{const t=this.trail.lastNode();if(t.focusable){const e=k_.guessVisualTrail(this.trail,this.display.rootNode);this.point=e.parentToGlobalPoint(t.center),isNaN(this.point.x)&&this.point.setXY(0,0)}},blur:e=>{this.trail=null,this.keydownTargetNode=null},keydown:e=>{this.blockTrustedEvents&&e.domEvent.isTrusted||(this.keydownTargetNode=e.target)},keyup:e=>{this.blockTrustedEvents&&e.domEvent.isTrusted||this.keydownTargetNode!==e.target&&e.abort()}})}updateTrail(e){return this.trail&&this.trail.equals(e)||(this.trail=e),this.trail}}Lg.register("PDOMPointer",U_);class W_{constructor(e){this.domEvent=e,this.activeElement=document.activeElement}static createSynthetic(){return new W_(new window.Event("synthetic"))}}const X_=new el("EventContextIO",{valueType:W_,documentation:"A DOM event and its context",toStateObject:e=>({domEvent:ex.serializeDomEvent(e.domEvent)}),fromStateObject:e=>new W_(ex.deserializeDomEvent(e.domEvent)),stateSchema:()=>({domEvent:jf})});Lg.register("EventContext",W_);class j_{constructor(e,t,i,n){this.handled=!1,this.aborted=!1,this.trail=e,this.type=t,this.pointer=i,this.context=n,this.domEvent=n.domEvent,this.activeElement=n.activeElement,this.currentTarget=null,this.target=e.lastNode(),this.isPrimary=!(i instanceof G_&&this.domEvent&&0!==this.domEvent.button),i.lastEventContext=n}handle(){this.handled=!0}abort(){this.aborted=!0}isFromPDOM(){return this.pointer instanceof U_}canStartPress(){return!(this.pointer.isAttached()||this.pointer instanceof G_&&0!==this.domEvent.button)}}_defineProperty(j_,"SceneryEventIO",new el("SceneryEventIO",{valueType:j_,documentation:'An event, with a "point" field',toStateObject:e=>({type:e.type,domEventType:ng(jf).toStateObject(e.domEvent),point:e.pointer&&e.pointer.point?al.Vector2IO.toStateObject(e.pointer.point):null}),stateSchema:{type:Om,domEventType:ng(jf),point:ng(al.Vector2IO)}})),Lg.register("SceneryEvent",j_);const Q_=xh(H_.PointerIO),K_=["altKey","button","charCode","clientX","clientY","code","ctrlKey","deltaMode","deltaX","deltaY","deltaZ","key","keyCode","metaKey","pageX","pageY","pointerId","pointerType","scale","shiftKey","target","type","relatedTarget","which"],Z_=["deltaMode","deltaX","deltaY","deltaZ","altKey","button","charCode","clientX","clientY","code","ctrlKey","key","keyCode","metaKey","pageX","pageY","pointerId","pointerType","shiftKey","type","relatedTarget","which"],J_=["target","relatedTarget"],$_=["focus","blur","focusin","focusout"];class ex extends Km{constructor(e,t,i,n,r,s){var a,o,l,h,u,c,d,p,m,g,f,y,E,v,A,b,S,_,x,w,T,P,C,V;const R=Vo()({phetioType:ex.InputIO,phetioDocumentation:"Central point for user input events, such as mouse, touch"},s);super(R),_defineProperty(this,"currentSceneryEvent",null),this.display=e,this.rootNode=e.rootNode,this.attachToWindow=t,this.batchDOMEvents=i,this.assumeFullWindow=n,this.passiveEvents=r,this.batchedEvents=[],this.pdomPointer=null,this.mouse=null,this.pointers=[],this.pointerAddedEmitter=new np,this.currentlyFiringEvents=!1,this.upTimeStamp=0,this.validatePointersAction=new yb(()=>{let e=this.pointers.length;for(;e--;){const t=this.pointers[e];t.point&&t!==this.pdomPointer&&this.branchChangeEvents(t,t.lastEventContext||W_.createSynthetic(),!1)}},{phetioPlayback:!0,tandem:null===(a=R.tandem)||void 0===a?void 0:a.createTandem("validatePointersAction"),phetioHighFrequency:!0}),this.mouseUpAction=new yb((e,t)=>{const i=this.ensureMouse(e);i.id=null,this.upEvent(i,t,e)},{phetioPlayback:!0,tandem:null===(o=R.tandem)||void 0===o?void 0:o.createTandem("mouseUpAction"),parameters:[{name:"point",phetioType:al.Vector2IO},{name:"context",phetioType:X_}],phetioEventType:vm.USER,phetioDocumentation:"Emits when a mouse button is released."}),this.mouseDownAction=new yb((e,t,i)=>{const n=this.ensureMouse(t);n.id=e,this.downEvent(n,i,t)},{phetioPlayback:!0,tandem:null===(l=R.tandem)||void 0===l?void 0:l.createTandem("mouseDownAction"),parameters:[{name:"id",phetioType:ng(il)},{name:"point",phetioType:al.Vector2IO},{name:"context",phetioType:X_}],phetioEventType:vm.USER,phetioDocumentation:"Emits when a mouse button is pressed."}),this.mouseMoveAction=new yb((e,t)=>{const i=this.ensureMouse(e);i.move(e),this.moveEvent(i,t)},{phetioPlayback:!0,tandem:null===(h=R.tandem)||void 0===h?void 0:h.createTandem("mouseMoveAction"),parameters:[{name:"point",phetioType:al.Vector2IO},{name:"context",phetioType:X_}],phetioEventType:vm.USER,phetioDocumentation:"Emits when the mouse is moved.",phetioHighFrequency:!0}),this.mouseOverAction=new yb((e,t)=>{this.ensureMouse(e).over(e)},{phetioPlayback:!0,tandem:null===(u=R.tandem)||void 0===u?void 0:u.createTandem("mouseOverAction"),parameters:[{name:"point",phetioType:al.Vector2IO},{name:"context",phetioType:X_}],phetioEventType:vm.USER,phetioDocumentation:"Emits when the mouse is moved while on the sim."}),this.mouseOutAction=new yb((e,t)=>{this.ensureMouse(e).out(e)},{phetioPlayback:!0,tandem:null===(c=R.tandem)||void 0===c?void 0:c.createTandem("mouseOutAction"),parameters:[{name:"point",phetioType:al.Vector2IO},{name:"context",phetioType:X_}],phetioEventType:vm.USER,phetioDocumentation:"Emits when the mouse moves out of the display."}),this.wheelScrollAction=new yb(e=>{const t=e.domEvent,i=this.ensureMouse(this.pointFromEvent(t));if(i.wheel(t),i.point){const t=this.rootNode.trailUnderPointer(i)||new Dv(this.rootNode);this.dispatchEvent(t,"wheel",i,e,!0)}},{phetioPlayback:!0,tandem:null===(d=R.tandem)||void 0===d?void 0:d.createTandem("wheelScrollAction"),parameters:[{name:"context",phetioType:X_}],phetioEventType:vm.USER,phetioDocumentation:"Emits when the mouse wheel scrolls.",phetioHighFrequency:!0}),this.touchStartAction=new yb((e,t,i)=>{const n=new F_(e,t,i.domEvent);this.addPointer(n),this.downEvent(n,i,t)},{phetioPlayback:!0,tandem:null===(p=R.tandem)||void 0===p?void 0:p.createTandem("touchStartAction"),parameters:[{name:"id",phetioType:il},{name:"point",phetioType:al.Vector2IO},{name:"context",phetioType:X_}],phetioEventType:vm.USER,phetioDocumentation:"Emits when a touch begins."}),this.touchEndAction=new yb((e,t,i)=>{const n=this.findPointerById(e);n&&(this.upEvent(n,i,t),this.removePointer(n))},{phetioPlayback:!0,tandem:null===(m=R.tandem)||void 0===m?void 0:m.createTandem("touchEndAction"),parameters:[{name:"id",phetioType:il},{name:"point",phetioType:al.Vector2IO},{name:"context",phetioType:X_}],phetioEventType:vm.USER,phetioDocumentation:"Emits when a touch ends."}),this.touchMoveAction=new yb((e,t,i)=>{const n=this.findPointerById(e);n&&(n.move(t),this.moveEvent(n,i))},{phetioPlayback:!0,tandem:null===(g=R.tandem)||void 0===g?void 0:g.createTandem("touchMoveAction"),parameters:[{name:"id",phetioType:il},{name:"point",phetioType:al.Vector2IO},{name:"context",phetioType:X_}],phetioEventType:vm.USER,phetioDocumentation:"Emits when a touch moves.",phetioHighFrequency:!0}),this.touchCancelAction=new yb((e,t,i)=>{const n=this.findPointerById(e);n&&(this.cancelEvent(n,i,t),this.removePointer(n))},{phetioPlayback:!0,tandem:null===(f=R.tandem)||void 0===f?void 0:f.createTandem("touchCancelAction"),parameters:[{name:"id",phetioType:il},{name:"point",phetioType:al.Vector2IO},{name:"context",phetioType:X_}],phetioEventType:vm.USER,phetioDocumentation:"Emits when a touch is canceled."}),this.penStartAction=new yb((e,t,i)=>{const n=new z_(e,t,i.domEvent);this.addPointer(n),this.downEvent(n,i,t)},{phetioPlayback:!0,tandem:null===(y=R.tandem)||void 0===y?void 0:y.createTandem("penStartAction"),parameters:[{name:"id",phetioType:il},{name:"point",phetioType:al.Vector2IO},{name:"context",phetioType:X_}],phetioEventType:vm.USER,phetioDocumentation:"Emits when a pen touches the screen."}),this.penEndAction=new yb((e,t,i)=>{const n=this.findPointerById(e);n&&(this.upEvent(n,i,t),this.removePointer(n))},{phetioPlayback:!0,tandem:null===(E=R.tandem)||void 0===E?void 0:E.createTandem("penEndAction"),parameters:[{name:"id",phetioType:il},{name:"point",phetioType:al.Vector2IO},{name:"context",phetioType:X_}],phetioEventType:vm.USER,phetioDocumentation:"Emits when a pen is lifted."}),this.penMoveAction=new yb((e,t,i)=>{const n=this.findPointerById(e);n&&(n.move(t),this.moveEvent(n,i))},{phetioPlayback:!0,tandem:null===(v=R.tandem)||void 0===v?void 0:v.createTandem("penMoveAction"),parameters:[{name:"id",phetioType:il},{name:"point",phetioType:al.Vector2IO},{name:"context",phetioType:X_}],phetioEventType:vm.USER,phetioDocumentation:"Emits when a pen is moved.",phetioHighFrequency:!0}),this.penCancelAction=new yb((e,t,i)=>{const n=this.findPointerById(e);n&&(this.cancelEvent(n,i,t),this.removePointer(n))},{phetioPlayback:!0,tandem:null===(A=R.tandem)||void 0===A?void 0:A.createTandem("penCancelAction"),parameters:[{name:"id",phetioType:il},{name:"point",phetioType:al.Vector2IO},{name:"context",phetioType:X_}],phetioEventType:vm.USER,phetioDocumentation:"Emits when a pen is canceled."}),this.gotPointerCaptureAction=new yb((e,t)=>{const i=this.findPointerById(e);i&&i.onGotPointerCapture()},{phetioPlayback:!0,tandem:null===(b=R.tandem)||void 0===b?void 0:b.createTandem("gotPointerCaptureAction"),parameters:[{name:"id",phetioType:il},{name:"context",phetioType:X_}],phetioEventType:vm.USER,phetioDocumentation:"Emits when a pointer is captured (normally at the start of an interaction)",phetioHighFrequency:!0}),this.lostPointerCaptureAction=new yb((e,t)=>{const i=this.findPointerById(e);i&&i.onLostPointerCapture()},{phetioPlayback:!0,tandem:null===(S=R.tandem)||void 0===S?void 0:S.createTandem("lostPointerCaptureAction"),parameters:[{name:"id",phetioType:il},{name:"context",phetioType:X_}],phetioEventType:vm.USER,phetioDocumentation:"Emits when a pointer loses its capture (normally at the end of an interaction)",phetioHighFrequency:!0}),this.focusinAction=new yb(e=>{const t=this.getPDOMEventTrail(e.domEvent,"focusin");t&&(this.dispatchPDOMEvent(t,"focus",e,!1),this.dispatchPDOMEvent(t,"focusin",e,!0))},{phetioPlayback:!0,tandem:null===(_=R.tandem)||void 0===_?void 0:_.createTandem("focusinAction"),parameters:[{name:"context",phetioType:X_}],phetioEventType:vm.USER,phetioDocumentation:"Emits when the PDOM root gets the focusin DOM event."}),this.focusoutAction=new yb(e=>{const t=this.getPDOMEventTrail(e.domEvent,"focusout");t&&(this.dispatchPDOMEvent(t,"blur",e,!1),this.dispatchPDOMEvent(t,"focusout",e,!0))},{phetioPlayback:!0,tandem:null===(x=R.tandem)||void 0===x?void 0:x.createTandem("focusoutAction"),parameters:[{name:"context",phetioType:X_}],phetioEventType:vm.USER,phetioDocumentation:"Emits when the PDOM root gets the focusout DOM event."}),this.clickAction=new yb(e=>{const t=this.getPDOMEventTrail(e.domEvent,"click");t&&this.dispatchPDOMEvent(t,"click",e,!0)},{phetioPlayback:!0,tandem:null===(w=R.tandem)||void 0===w?void 0:w.createTandem("clickAction"),parameters:[{name:"context",phetioType:X_}],phetioEventType:vm.USER,phetioDocumentation:"Emits when the PDOM root gets the click DOM event."}),this.inputAction=new yb(e=>{const t=this.getPDOMEventTrail(e.domEvent,"input");t&&this.dispatchPDOMEvent(t,"input",e,!0)},{phetioPlayback:!0,tandem:null===(T=R.tandem)||void 0===T?void 0:T.createTandem("inputAction"),parameters:[{name:"context",phetioType:X_}],phetioEventType:vm.USER,phetioDocumentation:"Emits when the PDOM root gets the input DOM event."}),this.changeAction=new yb(e=>{const t=this.getPDOMEventTrail(e.domEvent,"change");t&&this.dispatchPDOMEvent(t,"change",e,!0)},{phetioPlayback:!0,tandem:null===(P=R.tandem)||void 0===P?void 0:P.createTandem("changeAction"),parameters:[{name:"context",phetioType:X_}],phetioEventType:vm.USER,phetioDocumentation:"Emits when the PDOM root gets the change DOM event."}),this.keydownAction=new yb(e=>{this.dispatchGlobalEvent("globalkeydown",e,!0);const t=this.getPDOMEventTrail(e.domEvent,"keydown");t&&this.dispatchPDOMEvent(t,"keydown",e,!0),this.dispatchGlobalEvent("globalkeydown",e,!1)},{phetioPlayback:!0,tandem:null===(C=R.tandem)||void 0===C?void 0:C.createTandem("keydownAction"),parameters:[{name:"context",phetioType:X_}],phetioEventType:vm.USER,phetioDocumentation:"Emits when the PDOM root gets the keydown DOM event."}),this.keyupAction=new yb(e=>{this.dispatchGlobalEvent("globalkeyup",e,!0);const t=this.getPDOMEventTrail(e.domEvent,"keydown");t&&this.dispatchPDOMEvent(t,"keyup",e,!0),this.dispatchGlobalEvent("globalkeyup",e,!1)},{phetioPlayback:!0,tandem:null===(V=R.tandem)||void 0===V?void 0:V.createTandem("keyupAction"),parameters:[{name:"context",phetioType:X_}],phetioEventType:vm.USER,phetioDocumentation:"Emits when the PDOM root gets the keyup DOM event."})}interruptPointers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;_.each(this.pointers,t=>{t!==e&&t.interruptAll()})}batchEvent(e,t,i,n){this.display.interactive&&(this.batchedEvents.push(ix.pool.create(e,t,i)),!n&&this.batchDOMEvents||this.fireBatchedEvents()),!0===this.passiveEvents||i===this.mouseDown&&!ff.edge||t===tx.ALT_TYPE||e.domEvent.preventDefault()}fireBatchedEvents(){if(!this.currentlyFiringEvents&&this.batchedEvents.length){this.currentlyFiringEvents=!0;const e=this.batchedEvents;for(let t=0;t<e.length;t++){const i=e[t];i.run(this),i.dispose()}Yp(e),this.currentlyFiringEvents=!1}}clearBatchedEvents(){this.batchedEvents.length=0}validatePointers(){this.validatePointersAction.execute()}removeTemporaryPointers(){for(let e=this.pointers.length-1;e>=0;e--){const t=this.pointers[e];if(!(t instanceof G_)){this.pointers.splice(e,1);const i=t.trail||new Dv(this.rootNode);this.exitEvents(t,W_.createSynthetic(),i,0,!0)}}}connectListeners(){ax.addDisplay(this.display,this.attachToWindow,this.passiveEvents)}disconnectListeners(){ax.removeDisplay(this.display,this.attachToWindow,this.passiveEvents)}pointFromEvent(e){const t=al.pool.create(e.clientX,e.clientY);if(!this.assumeFullWindow){const e=this.display.domElement.getBoundingClientRect();e.width>0&&e.height>0&&(t.subtractXY(e.left,e.top),e.width===this.display.width&&e.height===this.display.height||(t.x*=this.display.width/e.width,t.y*=this.display.height/e.height))}return t}addPointer(e){this.pointers.push(e),this.pointerAddedEmitter.emit(e)}removePointer(e){for(let t=this.pointers.length-1;t>=0;t--)this.pointers[t]===e&&this.pointers.splice(t,1);e.dispose()}findPointerById(e){let t=this.pointers.length;for(;t--;){const i=this.pointers[t];if(i.id===e)return i}return null}getPDOMEventTrail(e,t){if(!this.display.interactive)return null;const i=this.getTrailFromPDOMEvent(e);return i&&!("click"===t&&_.some(i.nodes,e=>e.positionInPDOM)&&e.timeStamp-this.upTimeStamp<=80)?i:null}initMouse(e){const t=new G_(e);return this.mouse=t,this.addPointer(t),t}ensureMouse(e){const t=this.mouse;return t||this.initMouse(e)}initPDOMPointer(){const e=new U_(this.display);return this.pdomPointer=e,this.addPointer(e),e}ensurePDOMPointer(){const e=this.pdomPointer;return e||this.initPDOMPointer()}dispatchPDOMEvent(e,t,i,n){this.ensurePDOMPointer().updateTrail(e),nE.USER_GESTURE_EVENTS.includes(t)&&SV.userGestureEmitter.emit();const r=i.domEvent;if(!r.target||!r.target.hasAttribute(nE.DATA_EXCLUDE_FROM_INPUT)){e.isPickable()||$_.includes(t)||(e=new Dv([])),this.dispatchEvent(e,t,this.pdomPointer,i,n)}}dispatchGlobalEvent(e,t,i){this.ensurePDOMPointer();const n=this.pdomPointer,r=new j_(new Dv,e,n,t),s=t=>{if(!t.isDisposed&&t.isVisible()&&t.isInputEnabled()&&t.isPDOMVisible()){for(let e=t._children.length-1;e>=0;e--)s(t._children[e]);r.aborted||r.handled||(r.currentTarget=t,this.dispatchToListeners(n,t._inputListeners,e,r,i))}};s(this.rootNode)}getRelatedTargetTrail(e){const t=e.relatedTarget;if(t&&this.display.isElementUnderPDOM(t)){const t=e.relatedTarget,i=t.getAttribute(nE.DATA_PDOM_UNIQUE_ID);return k_.uniqueIdToTrail(this.display,i)}return null}getTrailFromPDOMEvent(e){if(!this.display._accessible)return null;if(e.targetSubstitute){const t=e.targetSubstitute.getAttribute(nE.DATA_PDOM_UNIQUE_ID);return k_.uniqueIdToTrail(this.display,t)}{const t=e.target;if(t&&this.display.isElementUnderPDOM(t)){const e=t.getAttribute(nE.DATA_PDOM_UNIQUE_ID);return k_.uniqueIdToTrail(this.display,e)}}return null}mouseDown(e,t,i){this.mouseDownAction.execute(e,t,i)}mouseUp(e,t){this.mouseUpAction.execute(e,t)}mouseMove(e,t){this.mouseMoveAction.execute(e,t)}mouseOver(e,t){this.mouseOverAction.execute(e,t)}mouseOut(e,t){this.mouseOutAction.execute(e,t)}wheel(e){this.wheelScrollAction.execute(e)}touchStart(e,t,i){this.touchStartAction.execute(e,t,i)}touchEnd(e,t,i){this.touchEndAction.execute(e,t,i)}touchMove(e,t,i){this.touchMoveAction.execute(e,t,i)}touchCancel(e,t,i){this.touchCancelAction.execute(e,t,i)}penStart(e,t,i){this.penStartAction.execute(e,t,i)}penEnd(e,t,i){this.penEndAction.execute(e,t,i)}penMove(e,t,i){this.penMoveAction.execute(e,t,i)}penCancel(e,t,i){this.penCancelAction.execute(e,t,i)}pointerDown(e,t,i,n){const r=this.attachToWindow?document.body:this.display.domElement;switch(r.setPointerCapture&&n.domEvent.pointerId&&r.setPointerCapture(n.domEvent.pointerId),t=this.handleUnknownPointerType(t,e)){case"mouse":this.mouseDown(e,i,n);break;case"touch":this.touchStart(e,i,n);break;case"pen":this.penStart(e,i,n);break;default:0}}pointerUp(e,t,i,n){switch(this.upTimeStamp=n.domEvent.timeStamp,t=this.handleUnknownPointerType(t,e)){case"mouse":this.mouseUp(i,n);break;case"touch":this.touchEnd(e,i,n);break;case"pen":this.penEnd(e,i,n);break;default:0}}pointerCancel(e,t,i,n){switch(t=this.handleUnknownPointerType(t,e)){case"mouse":console&&console.log&&console.log("WARNING: Pointer mouse cancel was received");break;case"touch":this.touchCancel(e,i,n);break;case"pen":this.penCancel(e,i,n);break;default:console.log&&console.log("Unknown pointer type: "+t)}}gotPointerCapture(e,t,i,n){this.gotPointerCaptureAction.execute(e,n)}lostPointerCapture(e,t,i,n){this.lostPointerCaptureAction.execute(e,n)}pointerMove(e,t,i,n){switch(t=this.handleUnknownPointerType(t,e)){case"mouse":this.mouseMove(i,n);break;case"touch":this.touchMove(e,i,n);break;case"pen":this.penMove(e,i,n);break;default:console.log&&console.log("Unknown pointer type: "+t)}}pointerOver(e,t,i,n){}pointerOut(e,t,i,n){}pointerEnter(e,t,i,n){}pointerLeave(e,t,i,n){}focusIn(e){this.focusinAction.execute(e)}focusOut(e){this.focusoutAction.execute(e)}input(e){this.inputAction.execute(e)}change(e){this.changeAction.execute(e)}click(e){this.clickAction.execute(e)}keyDown(e){this.keydownAction.execute(e)}keyUp(e){this.keyupAction.execute(e)}handleUnknownPointerType(e,t){return""!==e?e:this.mouse&&this.mouse.id===t?"mouse":"touch"}getPointerTrail(e){return this.rootNode.trailUnderPointer(e)||new Dv(this.rootNode)}upEvent(e,t,i){if(this.display.isElementUnderPDOM(t.domEvent.target))return;const n=e.up(i,t.domEvent),r=this.branchChangeEvents(e,t,n);this.dispatchEvent(r,"up",e,t,!0),e.isTouchLike()&&this.exitEvents(e,t,r,0,!0)}downEvent(e,t,i){if(this.display.isElementUnderPDOM(t.domEvent.target))return;const n=e.updatePoint(i),r=this.branchChangeEvents(e,t,n);e.down(t.domEvent),this.dispatchEvent(r,"down",e,t,!0)}moveEvent(e,t){this.branchChangeEvents(e,t,!0)}cancelEvent(e,t,i){const n=e.cancel(i),r=this.branchChangeEvents(e,t,n);this.dispatchEvent(r,"cancel",e,t,!0),e.isTouchLike()&&this.exitEvents(e,t,r,0,!0)}branchChangeEvents(e,t,i){const n=this.getPointerTrail(e),r=n.slice(0,Math.min(n.nodes.length,n.getLastInputEnabledIndex()+1)),s=e.inputEnabledTrail||new Dv(this.rootNode),a=Dv.branchIndex(r,s),o=s.lastNode()!==r.lastNode();return i&&this.dispatchEvent(n,"move",e,t,!0),this.exitEvents(e,t,s,a,o),this.enterEvents(e,t,r,a,o),e.trail=n,e.inputEnabledTrail=r,n}enterEvents(e,t,i,n,r){r&&this.dispatchEvent(i,"over",e,t,!0,!0);for(let s=n;s<i.length;s++)this.dispatchEvent(i.slice(0,s+1),"enter",e,t,!1)}exitEvents(e,t,i,n,r){for(let s=i.length-1;s>=n;s--)this.dispatchEvent(i.slice(0,s+1),"exit",e,t,!1,!0);r&&this.dispatchEvent(i,"out",e,t,!0)}dispatchEvent(e,t,i,n,r){let s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const a=new j_(e,t,i,n);this.currentSceneryEvent=a,this.dispatchToListeners(i,i.getListeners(),t,a),this.dispatchToTargets(e,t,i,a,r,s),this.dispatchToListeners(i,this.display.getInputListeners(),t,a),SV.inputListeners.length&&this.dispatchToListeners(i,SV.inputListeners.slice(),t,a),this.currentSceneryEvent=null}dispatchToListeners(e,t,i,n){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(n.handled)return;const s=e.type+i;for(let a=0;a<t.length;a++){const e=t[a];null!==r&&r!==!!e.capture||(!n.aborted&&e[s]&&e[s](n),!n.aborted&&e[i]&&e[i](n))}}dispatchToTargets(e,t,i,n,r){let s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(n.aborted||n.handled)return;const a=e.getLastInputEnabledIndex();for(let o=e.nodes.length-1;o>=0;r?o--:o=-1){const r=e.nodes[o],l=a<o;if(!(r.isDisposed||!s&&l)&&(n.currentTarget=r,this.dispatchToListeners(i,r.getInputListeners(),t,n),n.aborted||n.handled))return}}static serializeDomEvent(e){const t={constructorName:e.constructor.name};return K_.forEach(i=>{const n=e[i];null==n?t[i]=null:n instanceof Element&&J_.includes(i)&&"function"==typeof n.getAttribute&&n.hasAttribute(nE.DATA_PDOM_UNIQUE_ID)?t[i]={[nE.DATA_PDOM_UNIQUE_ID]:n.getAttribute(nE.DATA_PDOM_UNIQUE_ID),id:n.getAttribute("id")}:t[i]="object"==typeof n?{}:JSON.parse(JSON.stringify(n))}),t}static deserializeDomEvent(e){const t=e.constructorName||"Event",i=_.pick(e,Z_);if(i.relatedTarget){const e=document.getElementById(i.relatedTarget.id);i.relatedTarget=e}const n=new window[t](t,i);for(const r in e)e.hasOwnProperty(r)&&!Z_.includes(r)&&("target"===r?(n.targetSubstitute=_.clone(e[r])||{},n.targetSubstitute.getAttribute=function(e){return this[e]}):n[r]=e[r]);return n}static debugText(e,t){let i=`${t.timeStamp} ${t.type}`;return null!==e&&(i=`${e.x},${e.y} ${i}`),i}static msPointerType(e){return e.pointerType===window.MSPointerEvent.MSPOINTER_TYPE_TOUCH?"touch":e.pointerType===window.MSPointerEvent.MSPOINTER_TYPE_PEN?"pen":e.pointerType===window.MSPointerEvent.MSPOINTER_TYPE_MOUSE?"mouse":e.pointerType}}_defineProperty(ex,"InputIO",new el("InputIO",{valueType:ex,applyState:_.noop,toStateObject:e=>({pointers:Q_.toStateObject(e.pointers)}),stateSchema:{pointers:Q_}})),Lg.register("Input",ex);class tx extends Fl{}_defineProperty(tx,"POINTER_TYPE",new(Ce=tx)),_defineProperty(tx,"MS_POINTER_TYPE",new Ce),_defineProperty(tx,"TOUCH_TYPE",new Ce),_defineProperty(tx,"MOUSE_TYPE",new Ce),_defineProperty(tx,"WHEEL_TYPE",new Ce),_defineProperty(tx,"ALT_TYPE",new Ce),_defineProperty(tx,"enumeration",new Xl(Ce,{phetioDocumentation:"The type of batched event"}));class ix{constructor(e,t,i){this.initialize(e,t,i)}initialize(e,t,i){return this.eventContext=e,this.type=t,this.callback=i,this}run(e){const t=this.callback;if(e.validatePointers(),this.type===tx.POINTER_TYPE){const i=this.eventContext,n=i.domEvent;t.call(e,n.pointerId,n.pointerType,e.pointFromEvent(n),i)}else if(this.type===tx.MS_POINTER_TYPE){const i=this.eventContext,n=i.domEvent;t.call(e,n.pointerId,ex.msPointerType(n),e.pointFromEvent(n),i)}else if(this.type===tx.TOUCH_TYPE){const i=this.eventContext,n=i.domEvent;for(let r=0;r<n.changedTouches.length;r++){const s=n.changedTouches.item(r);t.call(e,s.identifier,e.pointFromEvent(s),i)}}else if(this.type===tx.MOUSE_TYPE){const i=this.eventContext,n=e.pointFromEvent(i.domEvent);t===e.mouseDown?t.call(e,null,n,i):t.call(e,n,i)}else{if(this.type!==tx.WHEEL_TYPE&&this.type!==tx.ALT_TYPE)throw new Error("bad type value: "+this.type);t.call(e,this.eventContext)}}dispose(){this.eventContext=null,this.callback=null,this.freeToPool()}freeToPool(){ix.pool.freeToPool(this)}}_defineProperty(ix,"pool",new Mo(ix)),Lg.register("BatchedDOMEvent",ix);const nx=()=>{};let rx=!1;const sx={blockFocusCallbacks:!1,addDisplay(e,t,i){rx||(rx=!0,_b.attachToWindow(),GS.attachToWindow()),this.attachedDisplays.push(e),t?1===this.attachedDisplays.length&&this.connectWindowListeners(i):this.addOrRemoveListeners(e.domElement,!0,i),e.domElement.addEventListener("wheel",this.onwheel,sx.getEventOptions(i,!0))},removeDisplay(e,t,i){rm(this.attachedDisplays,e),t?0===this.attachedDisplays.length&&this.disconnectWindowListeners(i):this.addOrRemoveListeners(e.domElement,!1,i),e.domElement.removeEventListener("wheel",this.onwheel,sx.getEventOptions(i,!0))},getEventOptions(e,t){if(Zg.passive&&null!==e){const i={passive:e};return t&&(i.capture=!1),i}return!1},listenersAttachedToWindow:0,listenersAttachedToElement:0,attachedDisplays:[],canUsePointerEvents:!!(window.navigator&&window.navigator.pointerEnabled||window.PointerEvent)&&!ff.firefox,canUseMSPointerEvents:window.navigator&&window.navigator.msPointerEnabled,pointerListenerTypes:["pointerdown","pointerup","pointermove","pointerover","pointerout","pointercancel","gotpointercapture","lostpointercapture"],msPointerListenerTypes:["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerOver","MSPointerOut","MSPointerCancel"],touchListenerTypes:["touchstart","touchend","touchmove","touchcancel"],mouseListenerTypes:["mousedown","mouseup","mousemove","mouseover","mouseout"],wheelListenerTypes:["wheel"],altListenerTypes:nE.DOM_EVENTS,getNonWheelUsedTypes(){let e;return e=this.canUsePointerEvents?this.pointerListenerTypes:this.canUseMSPointerEvents?this.msPointerListenerTypes:this.touchListenerTypes.concat(this.mouseListenerTypes),e=e.concat(this.altListenerTypes),e},connectWindowListeners(e){this.addOrRemoveListeners(window,!0,e)},disconnectWindowListeners(e){this.addOrRemoveListeners(window,!1,e)},addOrRemoveListeners(e,t,i){const n=e===window,r=t?1:-1;n?this.listenersAttachedToWindow+=r:this.listenersAttachedToElement+=r;const s=t?"addEventListener":"removeEventListener",a=this.getNonWheelUsedTypes();for(let o=0;o<a.length;o++){const t=a[o];n&&document[s](t,nx,sx.getEventOptions(i,!1));const r=this["on"+t];e[s](t,r,sx.getEventOptions(i,!0))}},batchWindowEvent(e,t,i,n){for(let r=0;r<this.attachedDisplays.length;r++){const s=this.attachedDisplays[r]._input;(!sx.blockFocusCallbacks||"focusIn"!==i&&"focusOut"!==i)&&s.batchEvent(e,t,s[i],n)}},onpointerdown:function(e){const t=new W_(e);"mouse"===e.pointerType&&SV.userGestureEmitter.emit(),sx.batchWindowEvent(t,tx.POINTER_TYPE,"pointerDown",!1)},onpointerup:function(e){const t=new W_(e);SV.userGestureEmitter.emit(),sx.batchWindowEvent(t,tx.POINTER_TYPE,"pointerUp",!0)},onpointermove:function(e){sx.batchWindowEvent(new W_(e),tx.POINTER_TYPE,"pointerMove",!1)},onpointerover:function(e){sx.batchWindowEvent(new W_(e),tx.POINTER_TYPE,"pointerOver",!1)},onpointerout:function(e){sx.batchWindowEvent(new W_(e),tx.POINTER_TYPE,"pointerOut",!1)},onpointercancel:function(e){sx.batchWindowEvent(new W_(e),tx.POINTER_TYPE,"pointerCancel",!1)},ongotpointercapture:function(e){sx.batchWindowEvent(new W_(e),tx.POINTER_TYPE,"gotPointerCapture",!1)},onlostpointercapture:function(e){sx.batchWindowEvent(new W_(e),tx.POINTER_TYPE,"lostPointerCapture",!1)},onMSPointerDown:function(e){sx.batchWindowEvent(new W_(e),tx.MS_POINTER_TYPE,"pointerDown",!1)},onMSPointerUp:function(e){sx.batchWindowEvent(new W_(e),tx.MS_POINTER_TYPE,"pointerUp",!0)},onMSPointerMove:function(e){sx.batchWindowEvent(new W_(e),tx.MS_POINTER_TYPE,"pointerMove",!1)},onMSPointerOver:function(e){sx.batchWindowEvent(new W_(e),tx.MS_POINTER_TYPE,"pointerOver",!1)},onMSPointerOut:function(e){sx.batchWindowEvent(new W_(e),tx.MS_POINTER_TYPE,"pointerOut",!1)},onMSPointerCancel:function(e){sx.batchWindowEvent(new W_(e),tx.MS_POINTER_TYPE,"pointerCancel",!1)},ontouchstart:function(e){sx.batchWindowEvent(new W_(e),tx.TOUCH_TYPE,"touchStart",!1)},ontouchend:function(e){const t=new W_(e);SV.userGestureEmitter.emit(),sx.batchWindowEvent(t,tx.TOUCH_TYPE,"touchEnd",!0)},ontouchmove:function(e){sx.batchWindowEvent(new W_(e),tx.TOUCH_TYPE,"touchMove",!1)},ontouchcancel:function(e){sx.batchWindowEvent(new W_(e),tx.TOUCH_TYPE,"touchCancel",!1)},onmousedown:function(e){const t=new W_(e);SV.userGestureEmitter.emit(),sx.batchWindowEvent(t,tx.MOUSE_TYPE,"mouseDown",!1)},onmouseup:function(e){const t=new W_(e);SV.userGestureEmitter.emit(),sx.batchWindowEvent(t,tx.MOUSE_TYPE,"mouseUp",!0)},onmousemove:function(e){sx.batchWindowEvent(new W_(e),tx.MOUSE_TYPE,"mouseMove",!1)},onmouseover:function(e){sx.batchWindowEvent(new W_(e),tx.MOUSE_TYPE,"mouseOver",!1)},onmouseout:function(e){sx.batchWindowEvent(new W_(e),tx.MOUSE_TYPE,"mouseOut",!1)},onwheel:function(e){sx.batchWindowEvent(new W_(e),tx.WHEEL_TYPE,"wheel",!1)},onfocusin:function(e){GS.updatePDOMFocusFromEvent(sx.attachedDisplays,e,!0),sx.batchWindowEvent(new W_(e),tx.ALT_TYPE,"focusIn",!0)},onfocusout:function(e){GS.updatePDOMFocusFromEvent(sx.attachedDisplays,e,!1),sx.batchWindowEvent(new W_(e),tx.ALT_TYPE,"focusOut",!0)},oninput:function(e){sx.batchWindowEvent(new W_(e),tx.ALT_TYPE,"input",!0)},onchange:function(e){sx.batchWindowEvent(new W_(e),tx.ALT_TYPE,"change",!0)},onclick:function(e){sx.batchWindowEvent(new W_(e),tx.ALT_TYPE,"click",!0)},onkeydown:function(e){sx.batchWindowEvent(new W_(e),tx.ALT_TYPE,"keyDown",!0)},onkeyup:function(e){sx.batchWindowEvent(new W_(e),tx.ALT_TYPE,"keyUp",!0)}};Lg.register("BrowserEvents",sx);const ax=sx;class ox{constructor(e,t){this.display=e,this.touches=[],this.nextTouchID=1,this.isMouseDown=!1,this.mousePosition=new al(0,0),this.random=new Jd({seed:t}),this.mouseToggleAction=()=>{this.mouseToggle()},this.mouseMoveAction=()=>{this.mouseMove()},this.touchStartAction=()=>{const e=this.createTouch(this.getRandomPosition());this.touchStart(e)},this.touchMoveAction=()=>{const e=this.random.sample(this.touches);this.touchMove(e)},this.touchEndAction=()=>{const e=this.random.sample(this.touches);this.touchEnd(e),this.removeTouch(e)},this.touchCancelAction=()=>{const e=this.random.sample(this.touches);this.touchCancel(e),this.removeTouch(e)}}fuzzEvents(e,t,i,n){for(this.display._input.currentlyFiringEvents=!0;this.random.nextDouble()<1-1/(e+1);){const e=this.touches.length+(this.isMouseDown?1:0)<n,r=[];t&&(this.isMouseDown||e)&&(r.push(this.mouseToggleAction),r.push(this.mouseMoveAction)),i&&(e&&r.push(this.touchStartAction),this.touches.length&&(r.push(this.random.nextDouble()<.8?this.touchEndAction:this.touchCancelAction),r.push(this.touchMoveAction))),this.random.sample(r)()}this.display._input.currentlyFiringEvents=!1,this.display._input.fireBatchedEvents()}createTouchEvent(e,t){const i=this.display.domElement,n=t.map(e=>({identifier:e.id,target:i,clientX:e.position.x,clientY:e.position.y}));if(void 0!==window.Touch&&void 0!==window.TouchEvent&&1===window.Touch.length&&1===window.TouchEvent.length){const t=n.map(e=>new window.Touch(e));return new window.TouchEvent(e,{cancelable:!0,bubbles:!0,touches:t,targetTouches:[],changedTouches:t,shiftKey:!1})}{const t=document.createEvent("CustomEvent");return t.initCustomEvent(e,!0,!0,{touches:n,targetTouches:[],changedTouches:n}),t}}getRandomPosition(){return new al(Math.floor(this.random.nextDouble()*this.display.width),Math.floor(this.random.nextDouble()*this.display.height))}createTouch(e){const t={id:this.nextTouchID++,position:e};return this.touches.push(t),t}removeTouch(e){this.touches.splice(this.touches.indexOf(e),1)}touchStart(e){const t=this.createTouchEvent("touchstart",[e]);this.display._input.validatePointers(),this.display._input.touchStart(e.id,e.position,new W_(t))}touchMove(e){e.position=this.getRandomPosition();const t=this.createTouchEvent("touchmove",[e]);this.display._input.validatePointers(),this.display._input.touchMove(e.id,e.position,new W_(t))}touchEnd(e){const t=this.createTouchEvent("touchend",[e]);this.display._input.validatePointers(),this.display._input.touchEnd(e.id,e.position,new W_(t))}touchCancel(e){const t=this.createTouchEvent("touchcancel",[e]);this.display._input.validatePointers(),this.display._input.touchCancel(e.id,e.position,new W_(t))}mouseToggle(){const e=document.createEvent("MouseEvent");e.initMouseEvent(this.isMouseDown?"mouseup":"mousedown",!0,!0,window,1,this.mousePosition.x,this.mousePosition.y,this.mousePosition.x,this.mousePosition.y,!1,!1,!1,!1,0,null),this.display._input.validatePointers(),this.isMouseDown?(this.display._input.mouseUp(this.mousePosition,new W_(e)),this.isMouseDown=!1):(this.display._input.mouseDown(null,this.mousePosition,new W_(e)),this.isMouseDown=!0)}mouseMove(){this.mousePosition=this.getRandomPosition();const e=document.createEvent("MouseEvent");e.initMouseEvent("mousemove",!0,!0,window,0,this.mousePosition.x,this.mousePosition.y,this.mousePosition.x,this.mousePosition.y,!1,!1,!1,!1,0,null),this.display._input.validatePointers(),this.display._input.mouseMove(this.mousePosition,new W_(e))}}Lg.register("InputFuzzer",ox);class lx extends Km{constructor(e){super(e=Po({mouseButton:0},e)),this.options=e,this.isDown=!1,this.downCurrentTarget=null,this.downTrail=null,this.pointer=null,this.interrupted=!1,this.downListener={up:e=>{e.pointer instanceof G_&&e.domEvent.button!==this.options.mouseButton||this.buttonUp(e)},interrupt:()=>{this.interrupt()},cancel:e=>{this.buttonUp(e)}}}buttonDown(e){this.isDown||e.pointer instanceof G_&&e.domEvent.button!==this.options.mouseButton||(e.pointer.addInputListener(this.downListener),this.isDown=!0,this.downCurrentTarget=e.currentTarget,this.downTrail=e.trail.subtrailTo(e.currentTarget,!1),this.pointer=e.pointer,this.options.down&&this.options.down(e,this.downTrail))}buttonUp(e){this.isDown=!1,this.pointer.removeInputListener(this.downListener);const t=e.currentTarget;if(e.currentTarget=this.downCurrentTarget,this.options.upInside||this.options.upOutside){const t=e.trail.isExtensionOf(this.downTrail,!0)&&!this.interrupted;t&&this.options.upInside?this.options.upInside(e,this.downTrail):!t&&this.options.upOutside&&this.options.upOutside(e,this.downTrail)}this.options.up&&this.options.up(e,this.downTrail),e.currentTarget=t}down(e){this.buttonDown(e)}interrupt(){if(this.isDown){this.interrupted=!0;const e=W_.createSynthetic(),t=new j_(new Dv,"synthetic",this.pointer,e);t.currentTarget=this.downCurrentTarget,this.buttonUp(t),this.interrupted=!1}}}Lg.register("DownUpListener",lx);const hx=lx;class ux extends hx{constructor(e){super({tandem:(e=Po({phetioType:ux.ButtonListenerIO,phetioState:!1,phetioEventType:vm.USER},e)).tandem,phetioType:e.phetioType,phetioState:e.phetioState,mouseButton:e.mouseButton||0,down:(e,t)=>{this.setButtonState(e,"down")},up:(e,t)=>{this.setButtonState(e,this._overCount>0?"over":"up")}}),this.buttonState="up",this._overCount=0,this._buttonOptions=e}setButtonState(e,t){if(t!==this.buttonState){const i=this.buttonState;this.buttonState=t,this._buttonOptions[t]&&(this.phetioStartEvent(t),this._buttonOptions[t](e,i),this.phetioEndEvent()),this._buttonOptions.fire&&this._overCount>0&&!this.interrupted&&(this._buttonOptions.fireOnDown?"down"===t:"down"===i)&&(this.phetioStartEvent("fire"),this._buttonOptions.fire(e),this.phetioEndEvent())}}enter(e){this._overCount++,1===this._overCount&&this.setButtonState(e,this.isDown?"down":"over")}exit(e){this._overCount--,0===this._overCount&&this.setButtonState(e,this.isDown?"out":"up")}focus(e){this.enter(e)}blur(e){this.exit(e)}click(e){this.setButtonState(e,"down"),this.setButtonState(e,"up")}}Lg.register("ButtonListener",ux),ux.ButtonListenerIO=new el("ButtonListenerIO",{valueType:ux,documentation:"Button listener",events:["up","over","down","out","fire"]});class cx extends Km{constructor(e){e=Po({start:null,drag:null,end:null,translate:null,allowTouchSnag:!1,mouseButton:0,dragCursor:"pointer",attach:!0,tandem:Lm.REQUIRED,phetioState:!1,phetioEventType:vm.USER,phetioReadOnly:!0},e),super(),this.options=e,this.isDraggingProperty=new gy(!1,{phetioReadOnly:e.phetioReadOnly,phetioState:!1,tandem:e.tandem.createTandem("isDraggingProperty"),phetioDocumentation:"Indicates whether the object is dragging"}),this.pointer=null,this.trail=null,this.transform=null,this.node=null,this.lastDragPoint=null,this.startTransformMatrix=null,this.mouseButton=void 0,this.interrupted=!1,this.lastInterruptedTouchLikePointer=null,this._attach=e.attach,this.dragStartAction=new yb((e,t)=>{this.dragging||(this._attach&&(t.pointer.dragging=!0),t.pointer.cursor=this.options.dragCursor,t.pointer.addInputListener(this.dragListener,this.options.attach),t.pointer.reserveForDrag(),this.isDraggingProperty.set(!0),this.pointer=t.pointer,this.trail=t.trail.subtrailTo(t.currentTarget,!0),this.transform=this.trail.getTransform(),this.node=t.currentTarget,this.lastDragPoint=t.pointer.point,this.startTransformMatrix=t.currentTarget.getMatrix().copy(),this.mouseButton=t.pointer instanceof G_?t.domEvent.button:void 0,this.options.start&&this.options.start.call(null,t,this.trail))},{tandem:e.tandem.createTandem("dragStartAction"),phetioReadOnly:e.phetioReadOnly,parameters:[{name:"point",phetioType:al.Vector2IO,phetioDocumentation:"the position of the drag start in view coordinates"},{phetioPrivate:!0,valueType:[j_,null]}]}),this.dragAction=new yb((e,t)=>{if(!this.dragging||this.isDisposed)return;const i=this.pointer.point.minus(this.lastDragPoint);if(0===i.magnitudeSquared)return;const n=this.transform.inverseDelta2(i);if(this.options.translate){const e=this.node.getMatrix().getTranslation();this.options.translate.call(null,{delta:n,oldPosition:e,position:e.plus(n)})}if(this.lastDragPoint=this.pointer.point,this.options.drag){const e=t.currentTarget;t.currentTarget=this.node,this.options.drag.call(null,t,this.trail),t.currentTarget=e}},{phetioHighFrequency:!0,phetioReadOnly:e.phetioReadOnly,tandem:e.tandem.createTandem("dragAction"),parameters:[{name:"point",phetioType:al.Vector2IO,phetioDocumentation:"the position of the drag in view coordinates"},{phetioPrivate:!0,valueType:[j_,null]}]}),this.dragEndAction=new yb((e,t)=>{this.dragging&&(this._attach&&(this.pointer.dragging=!1),this.pointer.cursor=null,this.pointer.removeInputListener(this.dragListener),this.isDraggingProperty.set(!1),this.options.end&&this.options.end.call(null,t,this.trail),this.pointer=null)},{tandem:e.tandem.createTandem("dragEndAction"),phetioReadOnly:e.phetioReadOnly,parameters:[{name:"point",phetioType:al.Vector2IO,phetioDocumentation:"the position of the drag end in view coordinates"},{phetioPrivate:!0,isValidValue:e=>null===e||e instanceof j_||e.pointer&&e.currentTarget}]}),this.transformListener={transform:e=>{if(!this.trail.isExtensionOf(e.trail,!0))return;const t=e.trail.getMatrix(),i=this.transform.getMatrix();this.node.prependMatrix(t.inverted().timesMatrix(i)),this.transform.setMatrix(t)}},this.dragListener={up:e=>{if(this.dragging&&!this.isDisposed&&(!(e.pointer instanceof G_)||e.domEvent.button===this.mouseButton)){const t=e.currentTarget;e.currentTarget=this.node,this.endDrag(e),e.currentTarget=t}},cancel:e=>{if(!this.dragging||this.isDisposed)return;const t=e.currentTarget;e.currentTarget=this.node,this.endDrag(e),e.currentTarget=t,this.transform||this.node.setMatrix(this.startTransformMatrix)},move:e=>{this.dragAction.execute(e.pointer.point,e)},interrupt:()=>{this.interrupt()}},this.initializePhetioObject({},e)}get dragging(){return this.isDraggingProperty.get()}set dragging(e){}startDrag(e){this.dragStartAction.execute(e.pointer.point,e)}endDrag(e){this.dragEndAction.execute(e?e.pointer.point:al.ZERO,e)}interrupt(){this.dragging&&(this.interrupted=!0,this.pointer&&this.pointer.isTouchLike()&&(this.lastInterruptedTouchLikePointer=this.pointer),this.endDrag({pointer:this.pointer,currentTarget:this.node}),this.interrupted=!1)}tryToSnag(e){e.pointer instanceof G_&&e.domEvent&&this.options.mouseButton!==e.domEvent.button&&-1!==this.options.mouseButton||this.isDisposed||this.dragging||e.pointer.dragging&&this._attach||e.pointer===this.lastInterruptedTouchLikePointer||!e.canStartPress()||this.startDrag(e)}tryTouchToSnag(e){this.options.allowTouchSnag&&(!0===this.options.allowTouchSnag||this.options.allowTouchSnag(e))&&this.tryToSnag(e)}down(e){this.tryToSnag(e)}touchenter(e){this.tryTouchToSnag(e)}touchmove(e){this.tryTouchToSnag(e)}dispose(){this.dragging&&(this._attach&&(this.pointer.dragging=!1),this.pointer.cursor=null,this.pointer.removeInputListener(this.dragListener)),this.isDraggingProperty.dispose(),this.dragEndAction.dispose(),this.dragAction.dispose(),this.dragStartAction.dispose(),super.dispose()}static createForwardingListener(e,t){return t=Po({allowTouchSnag:!1},t),{down:t=>{!t.pointer.dragging&&t.canStartPress()&&e(t)},touchenter:function(e){t.allowTouchSnag&&this.down(e)},touchmove:function(e){t.allowTouchSnag&&this.down(e)}}}}Lg.register("SimpleDragHandler",cx);const dx=e=>{var t,i,n,r;Ko(e,["length"],["elements"]);const s=Vo()({hasListenerOrderDependencies:!1,length:0,elements:[],elementAddedEmitterOptions:{},elementRemovedEmitterOptions:{},lengthPropertyOptions:{}},e);let a=null;if(s.phetioType)a={name:"value",phetioType:s.phetioType.parameterTypes[0]};else if(Ho.getValidatorValidationError(s))a=Po({name:"value"},{isValidValue:_.stubTrue});else{const e=_.pick(s,Ho.VALIDATOR_KEYS);a=Po({name:"value"},e)}const o=new hb(No({tandem:null===(t=s.tandem)||void 0===t?void 0:t.createTandem("elementAddedEmitter"),parameters:[a],phetioReadOnly:!0,hasListenerOrderDependencies:s.hasListenerOrderDependencies},s.elementAddedEmitterOptions)),l=new hb(No({tandem:null===(i=s.tandem)||void 0===i?void 0:i.createTandem("elementRemovedEmitter"),parameters:[a],phetioReadOnly:!0,hasListenerOrderDependencies:s.hasListenerOrderDependencies},s.elementRemovedEmitterOptions)),h=new zb(0,No({numberType:"Integer",tandem:null===(n=s.tandem)||void 0===n?void 0:n.createTandem("lengthProperty"),phetioReadOnly:!0,hasListenerOrderDependencies:s.hasListenerOrderDependencies},s.lengthPropertyOptions)),u=[],c=new Proxy(u,{get:function(e,t,i){return mx.hasOwnProperty(t)?mx[t]:Reflect.get(e,t,i)},set:function(e,t,i){const n=e[t];let r=null;"length"===t&&(r=e.slice(i));const s=Reflect.set(e,t,i),a=Number(t);return Number.isInteger(a)&&a>=0&&n!==i?(h.value=e.length,void 0!==n&&l.emit(e[t]),void 0!==i&&o.emit(i)):"length"===t&&(h.value=i,r&&r.forEach(e=>l.emit(e))),s},deleteProperty:function(e,t){const i=Number(t);let n;Number.isInteger(i)&&i>=0&&(n=e[t]);const r=Reflect.deleteProperty(e,t);return void 0!==n&&l.emit(n),r}});c.targetArray=u,c.elementAddedEmitter=o,c.elementRemovedEmitter=l,c.lengthProperty=h;const d=()=>{s.length>=0&&(c.length=s.length),s.elements.length>0&&Array.prototype.push.apply(c,s.elements)};return d(),c.reset=()=>{c.length=0,d()},null!==(r=s.tandem)&&void 0!==r&&r.supplied&&(c.phetioElementType=s.phetioType.parameterTypes[0],c._observableArrayPhetioObject=new px(c,s)),c};class px extends Km{constructor(e,t){super(t),this.observableArray=e}}const mx={pop(){const e=this.targetArray.length;for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];const r=Array.prototype.pop.apply(this.targetArray,i);return this.lengthProperty.value=this.length,e>0&&this.elementRemovedEmitter.emit(r),r},shift(){const e=this.targetArray.length;for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];const r=Array.prototype.shift.apply(this.targetArray,i);return this.lengthProperty.value=this.length,e>0&&this.elementRemovedEmitter.emit(r),r},push(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const n=this,r=Array.prototype.push.apply(n.targetArray,t);n.lengthProperty.value=n.length;for(let s=0;s<arguments.length;s++)n.elementAddedEmitter.emit(t[s]);return r},unshift(){const e=this;for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];const r=Array.prototype.unshift.apply(e.targetArray,i);e.lengthProperty.value=e.length;for(let s=0;s<i.length;s++)e.elementAddedEmitter.emit(i[s]);return r},splice(){const e=this;for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];const r=Array.prototype.splice.apply(e.targetArray,i);e.lengthProperty.value=e.length;const s=r;for(let a=2;a<i.length;a++)e.elementAddedEmitter.emit(i[a]);return s.forEach(t=>e.elementRemovedEmitter.emit(t)),r},copyWithin(){const e=this.targetArray.slice();for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];const r=Array.prototype.copyWithin.apply(this.targetArray,i);return gx(e,this),r},fill(){const e=this.targetArray.slice();for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];const r=Array.prototype.fill.apply(this.targetArray,i);return gx(e,this),r},get:function(e){return this[e]},addItemAddedListener:function(e){this.elementAddedEmitter.addListener(e)},removeItemAddedListener:function(e){this.elementAddedEmitter.removeListener(e)},addItemRemovedListener:function(e){this.elementRemovedEmitter.addListener(e)},removeItemRemovedListener:function(e){this.elementRemovedEmitter.removeListener(e)},add:function(e){this.push(e)},addAll:function(e){this.push(...e)},remove:function(e){rm(this,e)},removeAll:function(e){e.forEach(e=>rm(this,e))},clear:function(){for(;this.length>0;)this.pop()},count:function(e){let t=0;for(let i=0;i<this.length;i++)e(this[i])&&t++;return t},find:function(e,t){return _.find(this,e,t)},shuffle:function(e){const t=e.shuffle(this);this.targetArray.length=0,Array.prototype.push.apply(this.targetArray,t)},getArrayCopy:function(){return this.slice()},dispose:function(){this.elementAddedEmitter.dispose(),this.elementRemovedEmitter.dispose(),this.lengthProperty.dispose(),this._observableArrayPhetioObject&&this._observableArrayPhetioObject.dispose()},toStateObject:function(){return{array:this.map(e=>this.phetioElementType.toStateObject(e))}},applyState:function(e){this.length=0;const t=e.array.map(e=>this.phetioElementType.fromStateObject(e));this.push(...t)}},gx=(e,t)=>{const i=e,n=t.targetArray.slice();for(let r=0;r<i.length;r++){const e=i[r],t=n.indexOf(e);t>=0&&(i.splice(r,1),n.splice(t,1),r--)}i.forEach(e=>t.elementRemovedEmitter.emit(e)),n.forEach(e=>t.elementAddedEmitter.emit(e))},fx=new yh;dx.ObservableArrayIO=e=>(fx.has(e)||fx.set(e,new el(`ObservableArrayIO<${e.typeName}>`,{valueType:px,parameterTypes:[e],toStateObject:e=>e.observableArray.toStateObject(),applyState:(e,t)=>e.observableArray.applyState(t),stateSchema:{array:xh(e)}})),fx.get(e)),ko.register("createObservableArray",dx);const yx=dx;let Ex=0;const vx=_.constant(!0);class Ax extends qb{constructor(e){const t=Vo()({press:_.noop,release:_.noop,targetNode:null,drag:_.noop,attach:!0,mouseButton:0,pressCursor:"pointer",useInputListenerCursor:!1,canStartPress:vx,a11yLooksPressedInterval:100,collapseDragEvents:!1,phetioEnabledPropertyInstrumented:!1,tandem:Lm.REQUIRED,phetioReadOnly:!0,phetioFeatured:Km.DEFAULT_OPTIONS.phetioFeatured},e);super(t),this._id=Ex++,this._mouseButton=t.mouseButton,this._a11yLooksPressedInterval=t.a11yLooksPressedInterval,this._pressCursor=t.pressCursor,this._pressListener=t.press,this._releaseListener=t.release,this._dragListener=t.drag,this._canStartPress=t.canStartPress,this._targetNode=t.targetNode,this._attach=t.attach,this._collapseDragEvents=t.collapseDragEvents,this.overPointers=yx(),this.isPressedProperty=new gy(!1,{reentrant:!0}),this.isOverProperty=new gy(!1),this.looksOverProperty=new gy(!1),this.isHoveringProperty=new gy(!1),this.isHighlightedProperty=new gy(!1),this.isFocusedProperty=new gy(!1),this.cursorProperty=new Rb([this.enabledProperty],e=>t.useInputListenerCursor&&e&&this._attach?this._pressCursor:null),this.pointer=null,this.pressedTrail=null,this.interrupted=!1,this._pendingCollapsedDragEvent=null,this._listeningToPointer=!1,this._isHoveringListener=this.invalidateHovering.bind(this),this._isHighlightedListener=this.invalidateHighlighted.bind(this),this.pdomClickingProperty=new gy(!1),this.looksPressedProperty=Rb.or([this.pdomClickingProperty,this.isPressedProperty]),this._pdomClickingTimeoutListener=null,this._pointerListener={up:this.pointerUp.bind(this),cancel:this.pointerCancel.bind(this),move:this.pointerMove.bind(this),interrupt:this.pointerInterrupt.bind(this),listener:this},this._pressAction=new yb(this.onPress.bind(this),{tandem:t.tandem.createTandem("pressAction"),phetioDocumentation:"Executes whenever a press occurs. The first argument when executing can be used to convey info about the SceneryEvent.",phetioReadOnly:!0,phetioFeatured:t.phetioFeatured,phetioEventType:vm.USER,parameters:[{name:"event",phetioType:j_.SceneryEventIO},{phetioPrivate:!0,valueType:[cv,null]},{phetioPrivate:!0,valueType:["function",null]}]}),this._releaseAction=new yb(this.onRelease.bind(this),{parameters:[{name:"event",phetioType:ng(j_.SceneryEventIO)},{phetioPrivate:!0,valueType:["function",null]}],tandem:t.tandem.createTandem("releaseAction"),phetioDocumentation:"Executes whenever a release occurs.",phetioReadOnly:!0,phetioFeatured:t.phetioFeatured,phetioEventType:vm.USER}),this.display=null,this.boundInvalidateOverListener=this.invalidateOver.bind(this),this.overPointers.lengthProperty.link(this.invalidateOver.bind(this)),this.isFocusedProperty.link(this.invalidateOver.bind(this)),this.overPointers.lengthProperty.link(this._isHoveringListener),this.isPressedProperty.link(this._isHoveringListener),this.overPointers.addItemAddedListener(e=>e.isDownProperty.link(this._isHoveringListener)),this.overPointers.addItemRemovedListener(e=>e.isDownProperty.unlink(this._isHoveringListener)),this.isHoveringProperty.link(this._isHighlightedListener),this.isPressedProperty.link(this._isHighlightedListener),this.enabledProperty.lazyLink(this.onEnabledPropertyChange.bind(this))}get isPressed(){return this.isPressedProperty.value}get cursor(){return this.cursorProperty.value}get attach(){return this._attach}get targetNode(){return this._targetNode}getCurrentTarget(){return this.pressedTrail.lastNode()}get currentTarget(){return this.getCurrentTarget()}canPress(e){return!!this.enabledProperty.value&&!this.isPressed&&this._canStartPress(e,this)&&(!(e.pointer instanceof G_)||e.domEvent.button===this._mouseButton)&&(!this._attach||!e.pointer.isAttached())}canClick(){return this.enabledProperty.value&&!this.isPressed&&this._canStartPress(null,this)}press(e,t,i){return!!this.canPress(e)&&(this.flushCollapsedDrag(),this._pressAction.execute(e,t||null,i||null),!0)}release(e,t){this.flushCollapsedDrag(),this._releaseAction.execute(e||null,t||null)}drag(e){this._dragListener(e,this)}interrupt(){this.pdomClickingProperty.value?(this.interrupted=!0,this._listeningToPointer?this.release():(this.isPressedProperty.value=!1,this._releaseListener(null,this)),vb.hasListener(this._pdomClickingTimeoutListener)&&(vb.clearTimeout(this._pdomClickingTimeoutListener),this.pdomClickingProperty.isDisposed||(this.pdomClickingProperty.value=!1))):this.isPressed&&(this.interrupted=!0,this.release())}clearOverPointers(){this.overPointers.clear()}step(){this.flushCollapsedDrag()}setCreatePanTargetBounds(e){this._pointerListener.createPanTargetBounds=e}set createPanTargetBounds(e){this.setCreatePanTargetBounds(e)}setCreatePanTargetBoundsFromTrail(e){this.setCreatePanTargetBounds(()=>e.localToGlobalBounds(e.lastNode().localBounds))}set createPanTargetBoundsFromTrail(e){this.setCreatePanTargetBoundsFromTrail(e)}flushCollapsedDrag(){this._pendingCollapsedDragEvent&&this.drag(this._pendingCollapsedDragEvent),this._pendingCollapsedDragEvent=null}invalidateOver(){let e=!1;if(this._listeningToPointer)e=!1;else for(let t=0;t<this.overPointers.length;t++)if(this.overPointers.get(t).isAttached()){e=!0;break}this.isOverProperty.value=this.overPointers.length>0&&!e,this.looksOverProperty.value=this.isOverProperty.value||this.isFocusedProperty.value&&!!this.display&&this.display.focusManager.pdomFocusHighlightsVisibleProperty.value}invalidateHovering(){for(let e=0;e<this.overPointers.length;e++){const t=this.overPointers[e];if(!t.isDown||t===this.pointer)return void(this.isHoveringProperty.value=!0)}this.isHoveringProperty.value=!1}invalidateHighlighted(){this.isHighlightedProperty.value=this.isHoveringProperty.value||this.isPressedProperty.value}onEnabledPropertyChange(e){!e&&this.interrupt()}onPress(e,t,i){const n=t||this._targetNode;this.pointer=e.pointer,this.pressedTrail=n?n.getUniqueTrail():e.trail.subtrailTo(e.currentTarget,!1),this.interrupted=!1,this.pointer.addInputListener(this._pointerListener,this._attach),this._listeningToPointer=!0,this.pointer.cursor=this.pressedTrail.lastNode().getEffectiveCursor()||this._pressCursor,this.isPressedProperty.value=!0,this._pressListener(e,this),i&&i()}onRelease(e,t){this.pointer.removeInputListener(this._pointerListener),this._listeningToPointer=!1,this.isPressedProperty.value=!1,this._releaseListener(e,this),t&&t(),this.pointer.cursor=null,this.pointer=null,this.pressedTrail=null}down(e){this.press(e)}up(e){this.invalidateOver(),this.invalidateHovering()}enter(e){this.overPointers.push(e.pointer)}move(e){this.invalidateOver()}exit(e){this.overPointers.includes(e.pointer)&&this.overPointers.remove(e.pointer)}pointerUp(e){this.isPressed&&this.release(e)}pointerCancel(e){this.isPressed&&this.interrupt()}pointerMove(e){this.isPressed&&(this._collapseDragEvents?this._pendingCollapsedDragEvent=e:this.drag(e))}pointerInterrupt(){this.interrupt()}click(e,t){return this.canClick()&&(this.interrupted=!1,this.pdomClickingProperty.value=!0,this.isFocusedProperty.value=!0,this.isPressedProperty.value=!0,this._pressListener(e,this),t&&t(),this.isPressedProperty.value=!1,this._releaseListener(e,this),vb.clearTimeout(this._pdomClickingTimeoutListener),this._pdomClickingTimeoutListener=vb.setTimeout(()=>{this.pdomClickingProperty.isDisposed||(this.pdomClickingProperty.value=!1)},this._a11yLooksPressedInterval)),!0}focus(e){const t=e.trail.rootNode().getRootedDisplays().filter(e=>e.isAccessible());this.display=t[0],this.display.focusManager.pdomFocusHighlightsVisibleProperty.hasListener(this.boundInvalidateOverListener)||this.display.focusManager.pdomFocusHighlightsVisibleProperty.link(this.boundInvalidateOverListener),this.isFocusedProperty.value=!0}blur(){this.display&&(this.display.focusManager.pdomFocusHighlightsVisibleProperty.hasListener(this.boundInvalidateOverListener)&&this.display.focusManager.pdomFocusHighlightsVisibleProperty.unlink(this.boundInvalidateOverListener),this.display=null),this.isFocusedProperty.value=!1}dispose(){this.overPointers.clear(),this._listeningToPointer&&this.isPressed&&this.pointer.removeInputListener(this._pointerListener),this.isPressedProperty.isDisposed||(this.isPressedProperty.unlink(this._isHighlightedListener),this.isPressedProperty.unlink(this._isHoveringListener)),!this.isHoveringProperty.isDisposed&&this.isHoveringProperty.unlink(this._isHighlightedListener),this._pressAction.dispose(),this._releaseAction.dispose(),this.looksPressedProperty.dispose(),this.pdomClickingProperty.dispose(),this.cursorProperty.dispose(),this.isFocusedProperty.dispose(),this.isHighlightedProperty.dispose(),this.isHoveringProperty.dispose(),this.looksOverProperty.dispose(),this.isOverProperty.dispose(),this.isPressedProperty.dispose(),this.overPointers.dispose(),this.display&&(this.display.focusManager.pdomFocusHighlightsVisibleProperty.unlink(this.boundInvalidateOverListener),this.display=null),super.dispose()}}_defineProperty(Ax,"phetioAPI",{pressAction:{phetioType:yb.PhetioActionIO([j_.SceneryEventIO])},releaseAction:{phetioType:yb.PhetioActionIO([ng(j_.SceneryEventIO)])}}),Lg.register("PressListener",Ax);class bx{constructor(e){const t=Vo()({delay:400,interval:100},e);this.delay=t.delay,this.interval=t.interval,this.callbacks=[],t.callback&&this.callbacks.push(t.callback),this.delayID=null,this.intervalID=null,this.fired=!1}isRunning(){return null!==this.delayID||null!==this.intervalID}start(){this.isRunning()||(this.fired=!1,this.delayID=vb.setTimeout(()=>{this.delayID=null,this.intervalID=vb.setInterval(()=>this.fire(),this.interval),this.fire()},this.delay))}stop(e){this.isRunning()&&(this.delayID&&(vb.clearTimeout(this.delayID),this.delayID=null),this.intervalID&&(vb.clearInterval(this.intervalID),this.intervalID=null),e&&!this.fired&&this.fire())}addCallback(e){this.callbacks.includes(e)||this.callbacks.push(e)}removeCallback(e){const t=this.callbacks.indexOf(e);-1!==t&&this.callbacks.splice(t,1)}fire(){const e=this.callbacks.slice(0);for(let t=0;t<e.length;t++)e[t]();this.fired=!0}dispose(){this.stop(!1),this.callbacks.length=0}}ko.register("CallbackTimer",bx);class Sx extends Ax{constructor(e){const t=Vo()({fire:_.noop,fireOnDown:!1,fireOnHold:!1,fireOnHoldDelay:400,fireOnHoldInterval:100,tandem:Lm.REQUIRED,phetioReadOnly:Km.DEFAULT_OPTIONS.phetioReadOnly},e);super(t),this._fireOnDown=t.fireOnDown,this.firedEmitter=new hb({tandem:t.tandem.createTandem("firedEmitter"),phetioEventType:vm.USER,phetioReadOnly:t.phetioReadOnly,phetioDocumentation:"Emits at the time that the listener fires",parameters:[{name:"event",phetioType:ng(j_.SceneryEventIO)}]}),this.firedEmitter.addListener(t.fire),t.fireOnHold&&(this._timer=new bx({callback:this.fire.bind(this,null),delay:t.fireOnHoldDelay,interval:t.fireOnHoldInterval}))}fire(e){this.firedEmitter.emit(e)}press(e,t,i){return super.press(e,t,()=>{this._fireOnDown&&this.fire(e),this._timer&&this._timer.start(),i&&i()})}release(e,t){super.release(e,()=>{const i=!this._fireOnDown&&this.isHoveringProperty.value&&!this.interrupted;this._timer?this._timer.stop(i):i&&this.fire(e||null),t&&t()})}click(e,t){return super.click(e,()=>{this.interrupted||this.fire(e),t&&t()})}interrupt(){super.interrupt(),this._timer&&this._timer.stop(!1)}dispose(){this.firedEmitter.dispose(),this._timer&&this._timer.dispose(),super.dispose()}}Lg.register("FireListener",Sx);const _x=new al(0,0);class xx extends Ax{constructor(e){const t=Vo()({positionProperty:null,start:null,end:null,transform:null,dragBoundsProperty:null,allowTouchSnag:!0,applyOffset:!0,useParentOffset:!1,trackAncestors:!1,translateNode:!1,mapPosition:null,offsetPosition:null,canClick:!1,tandem:Lm.REQUIRED,phetioReadOnly:!0,phetioFeatured:Km.DEFAULT_OPTIONS.phetioFeatured},e);super(t),this._allowTouchSnag=t.allowTouchSnag,this._applyOffset=t.applyOffset,this._useParentOffset=t.useParentOffset,this._trackAncestors=t.trackAncestors,this._translateNode=t.translateNode,this._transform=t.transform,this._positionProperty=t.positionProperty,this._mapPosition=t.mapPosition,this._offsetPosition=t.offsetPosition,this._dragBoundsProperty=t.dragBoundsProperty||new ty(null),this._start=t.start,this._end=t.end,this._canClick=t.canClick,this.isUserControlledProperty=this.isPressedProperty,this._globalPoint=new al(0,0),this._localPoint=new al(0,0),this._parentPoint=new al(0,0),this._modelPoint=new al(0,0),this._modelDelta=new al(0,0),this._parentOffset=new al(0,0),this._transformTracker=null,this._transformTrackerListener=this.ancestorTransformed.bind(this),this._lastInterruptedTouchLikePointer=null,this._dragAction=new yb(e=>{const t=this.pointer.point;t&&(this._globalPoint.equals(t)||this.reposition(t)),Ax.prototype.drag.call(this,e)},{parameters:[{name:"event",phetioType:j_.SceneryEventIO}],phetioFeatured:t.phetioFeatured,tandem:t.tandem.createTandem("dragAction"),phetioHighFrequency:!0,phetioDocumentation:"Emits whenever a drag occurs with an SceneryEventIO argument.",phetioReadOnly:t.phetioReadOnly,phetioEventType:vm.USER})}press(e,t,i){return super.press(e,t,()=>{this.pointer.reserveForDrag(),this.attachTransformTracker();const t=this.pointer.point,n=this.globalToParentPoint(this._localPoint.set(t));this._useParentOffset&&this.modelToParentPoint(this._parentOffset.set(this._positionProperty.value)).subtract(n),this.parentToLocalPoint(n),this.reposition(t),this._start&&this._start(e,this),i&&i()})}release(e,t){super.release(e,()=>{this.detachTransformTracker(),this._end&&this._end(e||null,this),t&&t()})}canClick(){return super.canClick()&&this._canClick}click(e,t){return super.click(e,()=>{this._start&&this._start(e,this),t&&t(),this._end&&this._end(e,this)})}drag(e){const t=this.pointer.point;t&&!this._globalPoint.equals(t)&&this._dragAction.execute(e)}tryTouchSnag(e){!this._allowTouchSnag||this.attach&&e.pointer.isAttached()||this.press(e)}getGlobalPoint(){return this._globalPoint.copy()}get globalPoint(){return this.getGlobalPoint()}getLocalPoint(){return this._localPoint.copy()}get localPoint(){return this.getLocalPoint()}getParentPoint(){return this._parentPoint.copy()}get parentPoint(){return this.getParentPoint()}getModelPoint(){return this._modelPoint.copy()}get modelPoint(){return this.getModelPoint()}getModelDelta(){return this._modelDelta.copy()}get modelDelta(){return this.getModelDelta()}globalToParentPoint(e){const t=this;return t.pressedTrail.getParentTransform().getInverse().multiplyVector2(e),e}parentToLocalPoint(e){const t=this;return t.pressedTrail.lastNode().getTransform().getInverse().multiplyVector2(e),e}localToParentPoint(e){const t=this;return t.pressedTrail.lastNode().getMatrix().multiplyVector2(e),e}parentToModelPoint(e){if(this._transform){(this._transform instanceof xp?this._transform:this._transform.value).getInverse().multiplyVector2(e)}return e}modelToParentPoint(e){if(this._transform){(this._transform instanceof xp?this._transform:this._transform.value).getMatrix().multiplyVector2(e)}return e}mapModelPoint(e){return this._mapPosition?this._mapPosition(e):this._dragBoundsProperty.value?this._dragBoundsProperty.value.closestPointTo(e):e}applyParentOffset(e){this._offsetPosition&&e.add(this._offsetPosition(e,this)),this._applyOffset&&(this._useParentOffset?e.add(this._parentOffset):(e.subtract(this.localToParentPoint(_x.set(this._localPoint))),e.add(this.localToParentPoint(_x.setXY(0,0)))))}reposition(e){const t=this;this._globalPoint.set(e),this.applyParentOffset(this.globalToParentPoint(this._parentPoint.set(e))),this._modelDelta.set(this._modelPoint).negate(),this._modelPoint.set(this.mapModelPoint(this.parentToModelPoint(_x.set(this._parentPoint)))),this._modelDelta.add(this._modelPoint),this.modelToParentPoint(this._parentPoint.set(this._modelPoint)),this._translateNode&&(t.pressedTrail.lastNode().translation=this._parentPoint),this._positionProperty&&(this._positionProperty.value=this._modelPoint.copy())}touchenter(e){e.pointer.isDownProperty.value&&this.tryTouchSnag(e)}touchmove(e){this.tryTouchSnag(e)}ancestorTransformed(){const e=this.pointer.point;e&&this.reposition(e)}attachTransformTracker(){const e=this;this._trackAncestors&&(this._transformTracker=new QA(e.pressedTrail.copy().removeDescendant()),this._transformTracker.addListener(this._transformTrackerListener))}detachTransformTracker(){this._transformTracker&&(this._transformTracker.removeListener(this._transformTrackerListener),this._transformTracker.dispose(),this._transformTracker=null)}getDragBounds(){return this._dragBoundsProperty.value}get dragBounds(){return this.getDragBounds()}setTransform(e){this._transform=e}set transform(e){this.setTransform(e)}get transform(){return this.getTransform()}getTransform(){return this._transform}interrupt(){this.pointer&&this.pointer.isTouchLike()&&(this._lastInterruptedTouchLikePointer=this.pointer),super.interrupt()}canPress(e){return e.pointer!==this._lastInterruptedTouchLikePointer&&super.canPress(e)}dispose(){this._dragAction.dispose(),this.detachTransformTracker(),super.dispose()}static createForwardingListener(e,t){const i=Vo()({allowTouchSnag:!0},t);return{down(t){t.canStartPress()&&e(t)},touchenter(e){i.allowTouchSnag&&this.down(e)},touchmove(e){i.allowTouchSnag&&this.down(e)}}}}Lg.register("DragListener",xx);class wx{constructor(e,t){this.pointer=e,this.trail=t,this.interrupted=!1,this.initialPoint=e.point,this.localPoint=null,this.recomputeLocalPoint()}recomputeLocalPoint(){this.localPoint=this.trail.globalToLocalPoint(this.pointer.point)}get targetPoint(){return this.trail.globalToParentPoint(this.pointer.point)}}Lg.register("MultiListenerPress",wx);class Tx{constructor(e,t){const i=Vo()({mouseButton:0,pressCursor:"pointer",allowScale:!0,allowRotation:!0,allowMultitouchInterruption:!1,allowMoveInterruption:!0,minScale:1,maxScale:4,tandem:Lm.REQUIRED},t);this._targetNode=e,this._minScale=i.minScale,this._maxScale=i.maxScale,this._mouseButton=i.mouseButton,this._pressCursor=i.pressCursor,this._allowScale=i.allowScale,this._allowRotation=i.allowRotation,this._allowMultitouchInterruption=i.allowMultitouchInterruption,this._allowMoveInterruption=i.allowMoveInterruption,this._presses=[],this._backgroundPresses=[],this.matrixProperty=new ty(e.matrix.copy(),{phetioValueType:Mh.Matrix3IO,tandem:i.tandem.createTandem("matrixProperty"),phetioReadOnly:!0}),this.matrixProperty.link(e=>{this._targetNode.matrix=e}),this._interrupted=!1,this._pressListener={move:e=>{const t=this.findPress(e.pointer);this.movePress(t)},up:e=>{const t=this.findPress(e.pointer);this.removePress(t)},cancel:e=>{const t=this.findPress(e.pointer);t.interrupted=!0,this.removePress(t)},interrupt:()=>{this.interrupt()}},this._backgroundListener={up:e=>{if(!this._interrupted){const t=this.findBackgroundPress(e.pointer);this.removeBackgroundPress(t)}},move:e=>{const t=this._backgroundPresses.filter(e=>!e.pointer.hasIntent(Y_.DRAG)&&e.initialPoint.distance(e.pointer.point)>25);(1!==this.getCurrentScale()||t.length>=2)&&t.forEach(e=>{this.removeBackgroundPress(e),this.interruptOtherListeners(e.pointer),this.addPress(e)})},cancel:e=>{if(!this._interrupted){const t=this.findBackgroundPress(e.pointer);this.removeBackgroundPress(t)}},interrupt:()=>{this.interrupt()}}}findPress(e){for(let t=0;t<this._presses.length;t++)if(this._presses[t].pointer===e)return this._presses[t];return null}findBackgroundPress(e){for(let t=0;t<this._backgroundPresses.length;t++)if(this._backgroundPresses[t].pointer===e)return this._backgroundPresses[t];return null}hasPress(e){return _.some(this._presses.concat(this._backgroundPresses),t=>t.pointer===e.pointer)}interruptOtherListeners(e){const t=e.getListeners();for(let i=0;i<t.length;i++){const e=t[i];e!==this._backgroundListener&&e.interrupt&&e.interrupt()}}down(e){if(e.pointer instanceof G_&&e.domEvent instanceof MouseEvent&&e.domEvent.button!==this._mouseButton)return;let t;this._interrupted=!1,t=_.includes(e.trail.nodes,this._targetNode)?e.trail.subtrailTo(this._targetNode,!1):this._targetNode.getUniqueTrailTo(e.target);const i=new wx(e.pointer,t);this._allowMoveInterruption||this._allowMultitouchInterruption?this.addBackgroundPress(i):e.pointer.isAttached()||this.addPress(i)}addPress(e){this.hasPress(e)||(this._presses.push(e),e.pointer.cursor=this._pressCursor,e.pointer.addInputListener(this._pressListener,!0),this.recomputeLocals(),this.reposition())}movePress(e){this.reposition()}removePress(e){e.pointer.removeInputListener(this._pressListener),e.pointer.cursor=null,rm(this._presses,e),this.recomputeLocals(),this.reposition()}addBackgroundPress(e){this.hasPress(e)||(this._backgroundPresses.push(e),e.pointer.addInputListener(this._backgroundListener,!1))}removeBackgroundPress(e){e.pointer.removeInputListener(this._backgroundListener),rm(this._backgroundPresses,e)}reposition(){this.matrixProperty.set(this.computeMatrix())}recomputeLocals(){for(let e=0;e<this._presses.length;e++)this._presses[e].recomputeLocalPoint()}interrupt(){for(;this._presses.length;)this.removePress(this._presses[this._presses.length-1]);for(;this._backgroundPresses.length;)this.removeBackgroundPress(this._backgroundPresses[this._backgroundPresses.length-1]);this._interrupted=!0}computeMatrix(){return 0===this._presses.length?this._targetNode.getMatrix():1===this._presses.length?this.computeSinglePressMatrix():this._allowScale&&this._allowRotation?this.computeTranslationRotationScaleMatrix():this._allowScale?this.computeTranslationScaleMatrix():this._allowRotation?this.computeTranslationRotationMatrix():this.computeTranslationMatrix()}computeSinglePressMatrix(){const e=this._presses[0].targetPoint,t=this._presses[0].localPoint,i=this._targetNode.localToParentPoint(t),n=e.minus(i);return Mh.translationFromVector(n).timesMatrix(this._targetNode.getMatrix())}computeTranslationMatrix(){const e=new al(0,0);for(let t=0;t<this._presses.length;t++){e.add(this._presses[t].targetPoint);const i=this._presses[t].localPoint;e.subtract(i)}return Mh.translationFromVector(e.dividedScalar(this._presses.length))}computeTranslationScaleMatrix(){const e=this._presses.map(e=>e.localPoint),t=this._presses.map(e=>e.targetPoint),i=new al(0,0),n=new al(0,0);e.forEach(e=>{i.add(e)}),t.forEach(e=>{n.add(e)}),i.divideScalar(this._presses.length),n.divideScalar(this._presses.length);let r=0,s=0;e.forEach(e=>{r+=e.distanceSquared(i)}),t.forEach(e=>{s+=e.distanceSquared(n)});let a=this.getCurrentScale();0!==s&&(a=this.limitScale(Math.sqrt(s/r)));const o=Mh.translation(n.x,n.y),l=Mh.translation(-i.x,-i.y);return o.timesMatrix(Mh.scaling(a)).timesMatrix(l)}limitScale(e){let t=Math.max(e,this._minScale);return t=Math.min(t,this._maxScale),t}computeTranslationRotationMatrix(){let e;const t=new Nd(2,this._presses.length),i=new Nd(2,this._presses.length),n=new al(0,0),r=new al(0,0);for(e=0;e<this._presses.length;e++){const s=this._presses[e].localPoint,a=this._presses[e].targetPoint;n.add(s),r.add(a),t.set(0,e,s.x),t.set(1,e,s.y),i.set(0,e,a.x),i.set(1,e,a.y)}for(n.divideScalar(this._presses.length),r.divideScalar(this._presses.length),e=0;e<this._presses.length;e++)t.set(0,e,t.get(0,e)-n.x),t.set(1,e,t.get(1,e)-n.y),i.set(0,e,i.get(0,e)-r.x),i.set(1,e,i.get(1,e)-r.y);const s=t.times(i.transpose()),a=new Ld(s);let o=a.getV().times(a.getU().transpose());o.det()<0&&(o=a.getV().times(Nd.diagonalMatrix([1,-1])).times(a.getU().transpose()));const l=(new Mh).rowMajor(o.get(0,0),o.get(0,1),0,o.get(1,0),o.get(1,1),0,0,0,1),h=r.minus(l.timesVector2(n));return l.set02(h.x),l.set12(h.y),l}computeTranslationRotationScaleMatrix(){let e;const t=new Nd(2*this._presses.length,4);for(e=0;e<this._presses.length;e++){const i=this._presses[e].localPoint;t.set(2*e+0,0,i.x),t.set(2*e+0,1,i.y),t.set(2*e+0,2,1),t.set(2*e+1,0,i.y),t.set(2*e+1,1,-i.x),t.set(2*e+1,3,1)}const i=new Nd(2*this._presses.length,1);for(e=0;e<this._presses.length;e++){const t=this._presses[e].targetPoint;i.set(2*e+0,0,t.x),i.set(2*e+1,0,t.y)}const n=Ld.pseudoinverse(t).times(i),r=n.get(0,0),s=n.get(1,0),a=n.get(2,0),o=n.get(3,0);return(new Mh).rowMajor(r,s,a,-s,r,o,0,0,1)}getCurrentScale(){return this._targetNode.getScaleVector().x}resetTransform(){this._targetNode.resetTransform(),this.matrixProperty.set(this._targetNode.matrix.copy())}}Lg.register("MultiListener",Tx);const Px=Tx;class Cx extends xp{modelToViewPosition(e){return this.transformPosition2(e)}modelToViewXY(e,t){return new al(this.modelToViewX(e),this.modelToViewY(t))}modelToViewX(e){return this.matrix.m00()*e+this.matrix.m02()}modelToViewY(e){return this.matrix.m11()*e+this.matrix.m12()}modelToViewDelta(e){return this.transformDelta2(e)}modelToViewNormal(e){return this.transformNormal2(e)}modelToViewDeltaX(e){return this.transformDeltaX(e)}modelToViewDeltaY(e){return this.transformDeltaY(e)}modelToViewBounds(e){return this.transformBounds2(e)}modelToViewShape(e){return this.transformShape(e)}modelToViewRay(e){return this.transformRay2(e)}viewToModelPosition(e){return this.inversePosition2(e)}viewToModelXY(e,t){return new al(this.viewToModelX(e),this.viewToModelY(t))}viewToModelX(e){const t=this.getInverse();return t.m00()*e+t.m02()}viewToModelY(e){const t=this.getInverse();return t.m11()*e+t.m12()}viewToModelDelta(e){return this.inverseDelta2(e)}viewToModelDeltaXY(e,t){return new al(this.viewToModelDeltaX(e),this.viewToModelDeltaY(t))}viewToModelNormal(e){return this.inverseNormal2(e)}viewToModelDeltaX(e){return this.inverseDeltaX(e)}viewToModelDeltaY(e){return this.inverseDeltaY(e)}viewToModelBounds(e){return this.inverseBounds2(e)}viewToModelShape(e){return this.inverseShape(e)}viewToModelRay(e){return this.inverseRay2(e)}validateMatrix(e){super.validateMatrix(e)}setToRectangleMapping(e,t){const i=t.width/e.width,n=t.x-i*e.x,r=t.height/e.height,s=t.y-r*e.y;return this.setMatrix(Mh.affine(i,0,n,0,r,s)),this}setToRectangleInvertedYMapping(e,t){const i=t.width/e.width,n=t.x-i*e.x,r=-t.height/e.height,s=t.y-r*e.getMaxY();return this.setMatrix(Mh.affine(i,0,n,0,r,s)),this}static createIdentity(){return new Cx(Mh.IDENTITY)}static createOffsetScaleMapping(e,t){return new Cx(Mh.affine(t,0,e.x,0,t,e.y))}static createOffsetXYScaleMapping(e,t,i){return new Cx(Mh.affine(t,0,e.x,0,i,e.y))}static createSinglePointXYScaleMapping(e,t,i,n){const r=t.x-e.x*i,s=t.y-e.y*n;return Cx.createOffsetXYScaleMapping(new al(r,s),i,n)}static createSinglePointScaleMapping(e,t,i){return Cx.createSinglePointXYScaleMapping(e,t,i,i)}static createSinglePointScaleInvertedYMapping(e,t,i){return Cx.createSinglePointXYScaleMapping(e,t,i,-i)}static createRectangleMapping(e,t){return(new Cx).setToRectangleMapping(e,t)}static createRectangleInvertedYMapping(e,t){return(new Cx).setToRectangleInvertedYMapping(e,t)}}Xb.register("ModelViewTransform2",Cx);const Vx=Cx,Rx=new Mh;class Nx extends Px{constructor(e,t){var i;const n=Vo()({panBounds:Zl.NOTHING,targetBounds:null,targetScale:1,allowRotation:!1},t);super(e,n),this._panBounds=n.panBounds,this._targetBounds=n.targetBounds||e.globalBounds.copy(),this._targetScale=n.targetScale,this.sourceFramePanBoundsProperty=new ty(Lm.API_GENERATION?new Zl(0,0,0,0):this._panBounds,{tandem:null===(i=n.tandem)||void 0===i?void 0:i.createTandem("sourceFramePanBoundsProperty"),phetioReadOnly:!0,phetioValueType:Zl.Bounds2IO}),this.sourceFramePanBoundsProperty.lazyLink(()=>{if(zE.value){const e=Vx.createRectangleMapping(this.sourceFramePanBoundsProperty.get(),this._panBounds),t=this._targetNode.matrix.translation.componentMultiply(e.matrix.getScaleVector()),i=this.matrixProperty.get().getScaleVector();this.matrixProperty.set(Mh.translationFromVector(t).timesMatrix(Mh.scaling(i.x,i.y)))}},{phetioDependencies:[this.matrixProperty]})}correctReposition(){Rx.set(this._targetNode.matrix);const e=this._targetBounds.transformed(this._targetNode.getMatrix());e.left>this._panBounds.left&&(this._targetNode.left=this._panBounds.left-(e.left-this._targetNode.left)),e.top>this._panBounds.top&&(this._targetNode.top=this._panBounds.top-(e.top-this._targetNode.top)),e.right<this._panBounds.right&&(this._targetNode.right=this._panBounds.right+(this._targetNode.right-e.right)),e.bottom<this._panBounds.bottom&&(this._targetNode.bottom=this._panBounds.bottom+(this._targetNode.bottom-e.bottom)),Rx.equals(this._targetNode.matrix)||this.matrixProperty.set(this._targetNode.matrix.copy())}addPress(e){super.addPress(e);const t=this._targetBounds.transformed(this._targetNode.getMatrix()).equalsEpsilon(this._panBounds,1e-8);e.pointer.cursor=t?null:this._pressCursor}reposition(){super.reposition(),this.correctReposition()}resetTransform(){super.resetTransform(),this.correctReposition()}setPanBounds(e){this._panBounds=e,Lm.API_GENERATION||this.sourceFramePanBoundsProperty.set(this._panBounds),this.correctReposition()}setTargetBounds(e){this._targetBounds=e,this.correctReposition()}setTargetScale(e){this._targetScale=e}getTargetBounds(){return this._targetBounds}}Lg.register("PanZoomListener",Nx);const Mx=Nx,kx=new al(0,0),Lx=new al(0,0),Ix=new al(0,0),Bx=new Zl(0,0,0,0);class Dx extends Mx{constructor(e,t){const i=Vo()({tandem:Lm.REQUIRED},t);super(e,i),_defineProperty(this,"trackpadGestureStartScale",1),_defineProperty(this,"animatingProperty",new gy(!1)),_defineProperty(this,"_transformTracker",null),_defineProperty(this,"_focusBoundsListener",null),this.sourcePosition=null,this.destinationPosition=null,this.sourceScale=this.getCurrentScale(),this.destinationScale=this.getCurrentScale(),this.scaleGestureTargetPosition=null,this.discreteScales=Hx(this._minScale,this._maxScale),this.middlePress=null,this._dragBounds=null,this._transformedPanBounds=this._panBounds.transformed(this._targetNode.matrix.inverted()),this._draggingInDragBounds=!1,this._attachedPointers=[],this.boundsFinite=!1;let n=null,r=null;this.gestureStartAction=new yb(e=>{e.preventDefault(),this.trackpadGestureStartScale=e.scale,this.scaleGestureTargetPosition=new al(e.pageX,e.pageY)},{phetioPlayback:!0,tandem:i.tandem.createTandem("gestureStartAction"),parameters:[{name:"event",phetioType:jf}],phetioEventType:vm.USER,phetioDocumentation:"Action that executes whenever a gesture starts on a trackpad in macOS Safari."}),this.gestureChangeAction=new yb(e=>{e.preventDefault();const t=this.sourceScale+e.scale-this.trackpadGestureStartScale;this.setDestinationScale(t)},{phetioPlayback:!0,tandem:i.tandem.createTandem("gestureChangeAction"),parameters:[{name:"event",phetioType:jf}],phetioEventType:vm.USER,phetioDocumentation:"Action that executes whenever a gesture changes on a trackpad in macOS Safari."}),ff.safari&&!ff.mobileSafari&&(n=this.handleGestureStartEvent.bind(this),r=this.handleGestureChangeEvent.bind(this),this.trackpadGestureStartScale=this.getCurrentScale(),window.addEventListener("gesturestart",n),window.addEventListener("gesturechange",r)),_b.keydownEmitter.addListener(this.windowKeydown.bind(this));const s=this.handleFocusChange.bind(this);GS.pdomFocusProperty.link(s),this.sourceFramePanBoundsProperty.lazyLink(()=>{zE.value&&(this.initializePositions(),this.sourceScale=this.getCurrentScale(),this.setDestinationScale(this.sourceScale))},{phetioDependencies:[this.matrixProperty]}),this.disposeAnimatedPanZoomListener=()=>{n&&window.removeEventListener("gesturestart",n),r&&window.removeEventListener("gestureChange",r),this.animatingProperty.dispose(),this._transformTracker&&this._transformTracker.dispose(),GS.pdomFocusProperty.unlink(s)}}step(e){this.middlePress&&this.handleMiddlePress(e),this._attachedPointers.length>0&&this.getCurrentScale()>1&&(this._attachedPointers.length>0&&(this._attachedPointers=this._attachedPointers.filter(e=>e.attachedListener)),(this._draggingInDragBounds||this._attachedPointers.some(e=>e instanceof U_))&&this.repositionDuringDrag()),this.animateToTargets(e)}down(e){super.down(e),null!==this._dragBounds&&e.pointer.hasIntent(Y_.DRAG)&&(0===this._attachedPointers.length&&(this._draggingInDragBounds=this._dragBounds.containsPoint(e.pointer.point)),e.pointer.attachedListener&&(this._attachedPointers.includes(e.pointer)||this._attachedPointers.push(e.pointer))),"mouse"===e.pointer.type&&e.pointer instanceof G_&&e.pointer.middleDown&&!this.middlePress?(this.middlePress=new Yx(e.pointer,e.trail),e.pointer.cursor="all-scroll"):this.cancelMiddlePress()}cancelMiddlePress(){this.middlePress&&(this.middlePress.pointer.cursor=null,this.middlePress=null,this.stopInProgressAnimation())}movePress(e){this.middlePress||super.movePress(e)}move(e){if(this._attachedPointers.length>0&&this.getCurrentScale()>1)if(this._draggingInDragBounds){if(!this._attachedPointers.includes(e.pointer)){const t=this.hasDragIntent(e.pointer);null!==e.currentTarget&&t&&e.pointer.attachedListener&&this._attachedPointers.push(e.pointer)}}else this._dragBounds&&(this._draggingInDragBounds=this._dragBounds.containsPoint(e.pointer.point))}getTargetNodeDuringDrag(){if(this._attachedPointers.length>0){const e=this._attachedPointers[0].attachedListener;if(e.listener instanceof Ax||e.listener instanceof jx){const t=e.listener;if(t.isPressed)return t.getCurrentTarget()}}return null}getGlobalBoundsToViewDuringDrag(){let e=null;if(this._attachedPointers.length>0){const t=this._attachedPointers[0].attachedListener;if(t.createPanTargetBounds)e=t.createPanTargetBounds();else if(t.listener instanceof Ax||t.listener instanceof jx){const i=t.listener;if(i.isPressed){const t=i.getCurrentTarget();if(1===t.instances.length){const i=t.instances[0].trail;e=i.parentToGlobalBounds(t.visibleBounds)}}}}return e}repositionDuringDrag(){const e=this.getGlobalBoundsToViewDuringDrag(),t=this.getTargetNodeDuringDrag();e&&this.keepBoundsInView(e,this._attachedPointers.some(e=>e instanceof U_),null==t?void 0:t.limitPanDirection)}cancelPanningDuringDrag(e){if(e){const t=this._attachedPointers.indexOf(e.pointer);t>-1&&this._attachedPointers.splice(t,1)}else this._attachedPointers=[];this._draggingInDragBounds=!1}up(e){this.cancelPanningDuringDrag(e)}wheel(e){if(!this.middlePress){const t=new qx(e,this._targetScale);this.repositionFromWheel(t,e)}}windowKeydown(e){this.cancelMiddlePress();const t=_.get(window,"phet.joist.sim",null);if((!t||!t.display._accessible||!t.display.pdomRootElement.contains(e.target))&&(this.handleZoomCommands(e),Of.isArrowKey(e))){const e=new Ox(_b,this.getCurrentScale(),this._targetScale);this.repositionFromKeys(e)}}keydown(e){const t=e.domEvent;this.cancelMiddlePress(),this.handleZoomCommands(t);const i=e.pointer.hasIntent(Y_.KEYBOARD_DRAG);if(Of.isArrowKey(t)&&!i){const e=new Ox(_b,this.getCurrentScale(),this._targetScale);this.repositionFromKeys(e)}}handleFocusChange(e,t){if(this._transformTracker&&(this._transformTracker.dispose(),this._transformTracker=null),t&&t.trail.lastNode()&&t.trail.lastNode().focusPanTargetBoundsProperty){const e=t.trail.lastNode().focusPanTargetBoundsProperty;e.unlink(this._focusBoundsListener),this._focusBoundsListener=null}if(e){const t=e.trail.lastNode();let i=e.trail;if(e.trail.containsNode(this._targetNode)){const t=e.trail.nodes.indexOf(this._targetNode),n=e.trail.nodes.length;i=e.trail.slice(t,n)}this._transformTracker=new QA(i);const n=()=>{if(this.getCurrentScale()>1){let i;if(t.focusPanTargetBoundsProperty){const n=t.focusPanTargetBoundsProperty.value;i=e.trail.localToGlobalBounds(n)}else i=e.trail.localToGlobalBounds(e.trail.lastNode().localBounds);this.keepBoundsInView(i,!0,t.limitPanDirection)}};this._transformTracker.addListener(n),t.focusPanTargetBoundsProperty&&(this._focusBoundsListener=n,t.focusPanTargetBoundsProperty.link(this._focusBoundsListener)),this.keepTrailInView(e.trail,t.limitPanDirection)}}handleZoomCommands(e){const t=o_.isZoomCommand(e,!0),i=o_.isZoomCommand(e,!1);if(t||i){e.preventDefault();const i=this.getNextDiscreteScale(t),n=new Ox(_b,i,this._targetScale);this.repositionFromKeys(n)}else o_.isZoomResetCommand(e)&&(e.preventDefault(),this.resetTransform())}handleGestureStartEvent(e){this.gestureStartAction.execute(e)}handleGestureChangeEvent(e){this.gestureChangeAction.execute(e)}handleMiddlePress(e){const t=this.middlePress,i=this.sourcePosition;if(e>0){const n=t.pointer.point.minus(t.initialPoint),r=n.magnitude/100;r>0&&(n.setMagnitude(Math.min(r/e,150*this._targetScale)),this.setDestinationPosition(i.plus(n)))}}translateScaleToTarget(e,t){const i=this._targetNode.globalToLocalPoint(e),n=this._targetNode.globalToParentPoint(e),r=Mh.translation(-i.x,-i.y),s=Mh.translation(n.x,n.y),a=this.limitScale(this.getCurrentScale()+t),o=s.timesMatrix(Mh.scaling(a)).timesMatrix(r);this.matrixProperty.set(o),this.correctReposition()}setTranslationScaleToTarget(e,t){const i=this._targetNode.globalToLocalPoint(e),n=this._targetNode.globalToParentPoint(e),r=Mh.translation(-i.x,-i.y),s=Mh.translation(n.x,n.y),a=this.limitScale(t),o=s.timesMatrix(Mh.scaling(a)).timesMatrix(r);this.matrixProperty.set(o),this.correctReposition()}translateDelta(e){const t=this._targetNode.globalToParentPoint(this._panBounds.center),i=t.plus(e);this.translateToTarget(i,t)}translateToTarget(e,t){const i=this._targetNode.globalToParentPoint(e),n=this._targetNode.globalToParentPoint(t).minus(i);this.matrixProperty.set(Mh.translationFromVector(n).timesMatrix(this._targetNode.getMatrix())),this.correctReposition()}repositionFromKeys(e){const t=this.sourcePosition,i=e.scale;i!==this.getCurrentScale()?(this.setDestinationScale(i),this.scaleGestureTargetPosition=e.computeScaleTargetFromKeyPress()):e.translationVector.equals(al.ZERO)||this.setDestinationPosition(t.plus(e.translationVector)),this.correctReposition()}repositionFromWheel(e,t){const i=t.domEvent,n=this.sourcePosition;if(i.preventDefault(),e.isCtrlKeyDown){const t=this.limitScale(this.getCurrentScale()+e.scaleDelta);this.scaleGestureTargetPosition=e.targetPoint,this.setDestinationScale(t)}else this.setDestinationPosition(n.plus(e.translationVector));this.correctReposition()}correctReposition(){super.correctReposition(),this._panBounds.isFinite()&&(this._transformedPanBounds=this._panBounds.transformed(this._targetNode.matrix.inverted()),this.sourcePosition=this._transformedPanBounds.center,this.sourceScale=this.getCurrentScale())}addPress(e){super.addPress(e),this.stopInProgressAnimation()}removePress(e){super.removePress(e),this.middlePress&&(e.pointer.cursor="all-scroll"),0===this._presses.length&&this.stopInProgressAnimation()}interrupt(){this.cancelPanningDuringDrag(),this.cancelMiddlePress(),super.interrupt()}cancel(){this.interrupt()}hasDragIntent(e){return e.hasIntent(Y_.KEYBOARD_DRAG)||e.hasIntent(Y_.DRAG)}panToNode(e,t,i){this.keepBoundsInView(e.globalBounds,t,i)}keepBoundsInView(e,t,i){const n=this.sourcePosition,r=this._targetNode.globalToLocalBounds(e),s=new al(0,0);let a=0,o=0,l=0,h=0;t?(a=this._transformedPanBounds.centerX-r.centerX,o=this._transformedPanBounds.centerX-r.centerX,l=this._transformedPanBounds.centerY-r.centerY,h=this._transformedPanBounds.centerY-r.centerY):("vertical"===i||r.width<this._transformedPanBounds.width)&&("horizontal"===i||r.height<this._transformedPanBounds.height)&&(a=this._transformedPanBounds.left-r.left,o=this._transformedPanBounds.right-r.right,l=this._transformedPanBounds.top-r.top,h=this._transformedPanBounds.bottom-r.bottom),"vertical"!==i&&(o<0&&(s.x=-o),a>0&&(s.x=-a)),"horizontal"!==i&&(h<0&&(s.y=-h),l>0&&(s.y=-l)),this.setDestinationPosition(n.plus(s))}keepTrailInView(e,t){if(this._panBounds.isFinite()&&e.lastNode().bounds.isFinite()){const i=e.localToGlobalBounds(e.lastNode().localBounds);this._panBounds.containsBounds(i)||this.keepBoundsInView(i,!0,t)}}animateToTargets(e){const t=this.sourcePosition,i=this.destinationPosition,n=!i.equalsEpsilon(t,.1),r=!fl.equalsEpsilon(this.sourceScale,this.destinationScale,.001);if(this.animatingProperty.value=n||r,0===this._presses.length||null!==this.middlePress){if(n){const n=i.minus(t);let r=n;0!==n.magnitude&&(r=n.normalized());const s=this.getTranslationSpeed(n.magnitude);Ix.setXY(s,s);const a=Ix.multiplyScalar(e),o=r.componentTimes(a);o.magnitude>n.magnitude&&o.set(n),this.translateDelta(o)}if(r){const i=this.destinationScale-this.sourceScale;let n=i*e*6;Math.abs(n)>Math.abs(i)&&(n=i),this.translateScaleToTarget(this.scaleGestureTargetPosition,n),this.setDestinationPosition(t)}else this.destinationScale!==this.sourceScale&&(this.setTranslationScaleToTarget(this.scaleGestureTargetPosition,this.destinationScale),this.setDestinationPosition(t))}}stopInProgressAnimation(){this.boundsFinite&&this.sourcePosition&&(this.setDestinationScale(this.sourceScale),this.setDestinationPosition(this.sourcePosition))}initializePositions(){this.boundsFinite=this._transformedPanBounds.isFinite(),this.boundsFinite?(this.sourcePosition=this._transformedPanBounds.center,this.setDestinationPosition(this.sourcePosition)):(this.sourcePosition=null,this.destinationPosition=null)}setPanBounds(e){super.setPanBounds(e),this.initializePositions(),this._dragBounds=e.erodedXY(.1*e.width,.1*e.height)}setTargetBounds(e){super.setTargetBounds(e),this.initializePositions()}setDestinationPosition(e){const t=this.sourcePosition;Bx.setMinMax(t.x-this._transformedPanBounds.left-this._panBounds.left,t.y-this._transformedPanBounds.top-this._panBounds.top,t.x+this._panBounds.right-this._transformedPanBounds.right,t.y+this._panBounds.bottom-this._transformedPanBounds.bottom),this.destinationPosition=Bx.closestPointTo(e)}setDestinationScale(e){this.destinationScale=this.limitScale(e)}getTranslationSpeed(e){const t=e*this.getCurrentScale(),i=t*(1/(Math.pow(t,2)-Math.pow(5,2))+5);return Math.min(Math.abs(i),1e3*this.getCurrentScale())}resetTransform(){super.resetTransform(),this.stopInProgressAnimation()}getNextDiscreteScale(e){const t=this.getCurrentScale();let i=null,n=Number.POSITIVE_INFINITY;for(let s=0;s<this.discreteScales.length;s++){const e=Math.abs(this.discreteScales[s]-t);e<n&&(n=e,i=s)}i=i;let r=e?i+1:i-1;return r=fl.clamp(r,0,this.discreteScales.length-1),this.discreteScales[r]}dispose(){this.disposeAnimatedPanZoomListener()}}class Ox{constructor(e,t,i,n){const r=Vo()({translationMagnitude:80},n);let s=0;s+=e.isKeyDown(Of.KEY_RIGHT_ARROW)?1:0,s-=e.isKeyDown(Of.KEY_LEFT_ARROW)?1:0;let a=0;if(a+=e.isKeyDown(Of.KEY_DOWN_ARROW)?1:0,a-=e.isKeyDown(Of.KEY_UP_ARROW)?1:0,kx.setXY(s,a),!kx.equals(al.ZERO)){const e=r.translationMagnitude*i;kx.setMagnitude(e)}this.translationVector=kx,this.scale=t}computeScaleTargetFromKeyPress(){Lx.setXY(0,0);const e=GS.pdomFocusProperty.value;if(e){const t=e.trail,i=t.lastNode();i.bounds.isFinite()&&Lx.set(t.parentToGlobalPoint(i.center))}else{const e=nE.getNextFocusable();if(e!==document.body){const t=e.offsetLeft+e.offsetWidth/2,i=e.offsetTop+e.offsetHeight/2;Lx.setXY(t,i)}}return Lx}}class qx{constructor(e,t){const i=e.domEvent;this.isCtrlKeyDown=i.ctrlKey,this.scaleDelta=i.deltaY>0?-.5:.5,this.targetPoint=e.pointer.point;let n=.5*i.deltaX,r=.5*i.deltaY;i.deltaMode===window.WheelEvent.DOM_DELTA_LINE&&(n*=25,r*=25),this.translationVector=kx.setXY(n*t,r*t)}}class Yx{constructor(e,t){this.pointer=e,this.trail=t,this.initialPoint=e.point.copy()}}const Hx=(e,t)=>{const i=[];for(let r=0;r<8;r++)i[r]=(t-e)/8*(r*r);const n=i[7];for(let r=0;r<i.length;r++)i[r]=e+i[r]*(t-e)/n;return i};Lg.register("AnimatedPanZoomListener",Dx);const Gx=Dx;const Fx=new class{constructor(){_defineProperty(this,"_listener",null)}initialize(e,t){this._listener=new Gx(e,t)}dispose(){this._listener.dispose(),this._listener=null}get listener(){return this._listener}get initialized(){return!!this._listener}};Lg.register("animatedPanZoomSingleton",Fx);const zx=Fx;class Ux{down(e){e.handle()}}Lg.register("HandleDownlistener",Ux);const Wx=new Map([["both",{left:[Of.KEY_A,Of.KEY_LEFT_ARROW],right:[Of.KEY_RIGHT_ARROW,Of.KEY_D],up:[Of.KEY_UP_ARROW,Of.KEY_W],down:[Of.KEY_DOWN_ARROW,Of.KEY_S]}],["leftRight",{left:[Of.KEY_A,Of.KEY_LEFT_ARROW,Of.KEY_DOWN_ARROW,Of.KEY_S],right:[Of.KEY_RIGHT_ARROW,Of.KEY_D,Of.KEY_UP_ARROW,Of.KEY_W],up:[],down:[]}],["upDown",{left:[],right:[],up:[Of.KEY_RIGHT_ARROW,Of.KEY_D,Of.KEY_UP_ARROW,Of.KEY_W],down:[Of.KEY_A,Of.KEY_LEFT_ARROW,Of.KEY_DOWN_ARROW,Of.KEY_S]}]]);class Xx extends qb{constructor(e){const t=Vo()({dragDelta:10,shiftDragDelta:5,dragVelocity:0,shiftDragVelocity:0,keyboardDragDirection:"both",positionProperty:null,transform:null,dragBoundsProperty:null,mapPosition:null,start:null,drag:null,end:null,moveOnHoldDelay:0,moveOnHoldInterval:1e3/60,hotkeyHoldInterval:800,phetioEnabledPropertyInstrumented:!1,tandem:Lm.REQUIRED,phetioReadOnly:!0},e);super(t),this._start=t.start,this._drag=t.drag,this._end=t.end,this._dragBoundsProperty=t.dragBoundsProperty||new ty(null),this._mapPosition=t.mapPosition,this._transform=t.transform,this._positionProperty=t.positionProperty,this._dragVelocity=t.dragVelocity,this._shiftDragVelocity=t.shiftDragVelocity,this._dragDelta=t.dragDelta,this._shiftDragDelta=t.shiftDragDelta,this._moveOnHoldDelay=t.moveOnHoldDelay,this.moveOnHoldInterval=t.moveOnHoldInterval,this._hotkeyHoldInterval=t.hotkeyHoldInterval,this._keyboardDragDirection=t.keyboardDragDirection,this.isPressedProperty=new gy(!1,{reentrant:!0}),this.keyState=[],this._hotkeys=[],this.currentHotkey=null,this.hotkeyDisablingDragging=!1,this.hotkeyHoldIntervalCounter=this._hotkeyHoldInterval,this.useDragVelocity=t.dragVelocity>0||t.shiftDragVelocity>0,this.moveOnHoldDelayCounter=0,this.moveOnHoldIntervalCounter=0,this.delayComplete=!1,this.dragStartAction=new yb(e=>{const t=Of.getEventCode(e.domEvent);if(!this.movementKeysDown&&Of.isMovementKey(e.domEvent)&&(this._pointer=e.pointer,e.pointer.addInputListener(this._pointerListener,!0),this.isPressedProperty.value=!0),this.keyState.push({keyDown:!0,key:t,timeDown:0}),this._start&&this.movementKeysDown&&this._start(e),!this.useDragVelocity){const e=this.shiftKeyDown()?this._shiftDragDelta:this._dragDelta;this.updatePosition(e),this.moveOnHoldIntervalCounter=0}},{parameters:[{name:"event",phetioType:j_.SceneryEventIO}],tandem:t.tandem.createTandem("dragStartAction"),phetioDocumentation:"Emits whenever a keyboard drag starts.",phetioReadOnly:t.phetioReadOnly,phetioEventType:vm.USER}),this.dragEmitter=new hb({tandem:t.tandem.createTandem("dragEmitter"),phetioHighFrequency:!0,phetioDocumentation:"Emits whenever a keyboard drag occurs.",phetioReadOnly:t.phetioReadOnly,phetioEventType:vm.USER}),this.dragEndAction=new yb(e=>{this.movementKeysDown||(this._pointer.removeInputListener(this._pointerListener),this._pointer=null,this.isPressedProperty.value=!1),this._end&&this._end(e)},{parameters:[{name:"event",phetioType:j_.SceneryEventIO}],tandem:t.tandem.createTandem("dragEndAction"),phetioDocumentation:"Emits whenever a keyboard drag ends.",phetioReadOnly:t.phetioReadOnly,phetioEventType:vm.USER});const i=this.step.bind(this);vb.addListener(i),this.enabledProperty.lazyLink(this.onEnabledPropertyChange.bind(this)),this._pointerListener={listener:this,interrupt:this.interrupt.bind(this)},this._pointer=null,this._disposeKeyboardDragListener=()=>{vb.removeListener(i),this.isPressedProperty.dispose()}}getDragBounds(){return this._dragBoundsProperty.value}get dragBounds(){return this.getDragBounds()}setTransform(e){this._transform=e}set transform(e){this.setTransform(e)}get transform(){return this.getTransform()}getTransform(){return this._transform}get dragVelocity(){return this._dragVelocity}set dragVelocity(e){this._dragVelocity=e}get shiftDragVelocity(){return this._shiftDragVelocity}set shiftDragVelocity(e){this._shiftDragVelocity=e}get dragDelta(){return this._dragDelta}set dragDelta(e){this._dragDelta=e}get shiftDragDelta(){return this._shiftDragDelta}set shiftDragDelta(e){this._shiftDragDelta=e}get moveOnHoldDelay(){return this._moveOnHoldDelay}set moveOnHoldDelay(e){this._moveOnHoldDelay=e}get moveOnHoldInterval(){return this._moveOnHoldInterval}set moveOnHoldInterval(e){this._moveOnHoldInterval=e}get hotkeyHoldInterval(){return this._hotkeyHoldInterval}set hotkeyHoldInterval(e){this._hotkeyHoldInterval=e}get isPressed(){return!!this._pointer}getCurrentTarget(){return this._pointer.trail.lastNode()}onEnabledPropertyChange(e){!e&&this.interrupt()}keydown(e){const t=e.domEvent,i=Of.getEventCode(t);t.metaKey||(Of.isMovementKey(t)&&t.preventDefault(),e.pointer.reserveForKeyboardDrag(),this.keyInListDown([i])||(ff.safari&&Of.isArrowKey(t)&&this.keyInListDown([Of.KEY_RIGHT_ARROW,Of.KEY_LEFT_ARROW,Of.KEY_UP_ARROW,Of.KEY_DOWN_ARROW])?this.interrupt():this.canDrag()&&this.dragStartAction.execute(e)))}keyup(e){const t=e.domEvent,i=Of.getEventCode(t),n=this.movementKeysDown;i===Of.KEY_TAB&&t.shiftKey&&this.keyState.push({keyDown:!0,key:Of.KEY_SHIFT_LEFT,timeDown:0});for(let s=0;s<this.keyState.length;s++)i===this.keyState[s].key&&this.keyState.splice(s,1);const r=this.movementKeysDown;r||n===r||this.dragEndAction.execute(e),this.currentHotkey&&!this.allKeysInListDown(this.currentHotkey.keys)&&this.resetHotkeyState(),this.resetPressAndHold()}focusout(e){this.interrupt()}step(e){const t=1e3*e;if(this.keyState.length>0){for(let i=0;i<this.keyState.length;i++)this.keyState[i].keyDown&&(this.keyState[i].timeDown+=t);this.movementKeysDown&&(this.moveOnHoldDelayCounter+=t,this.moveOnHoldIntervalCounter+=t),this.currentHotkey&&(this.hotkeyHoldIntervalCounter+=t);let e=0;if(this.useDragVelocity){e=t*((this.shiftKeyDown()?this._shiftDragVelocity:this._dragVelocity)/1e3)}else{let t=!1;if(this.moveOnHoldDelayCounter>=this._moveOnHoldDelay&&!this.delayComplete&&(t=!0,this.delayComplete=!0,this.moveOnHoldIntervalCounter=0),this.delayComplete&&this.moveOnHoldIntervalCounter>=this._moveOnHoldInterval){t=!0;const e=this.moveOnHoldIntervalCounter-this._moveOnHoldInterval;this.moveOnHoldIntervalCounter=e}e=t?this.shiftKeyDown()?this._shiftDragDelta:this._dragDelta:0}e>0&&this.updatePosition(e)}}canDrag(){return this.enabledProperty.value}updateHotkeys(){for(let e=0;e<this._hotkeys.length;e++){const t=[],i=this._hotkeys[e].keys;for(let e=0;e<i.length;e++)for(let n=0;n<this.keyState.length;n++)this.keyState[n].key===i[e]&&t.push(this.keyState[n]);let n=1===t.length&&1===i.length;for(let e=0;e<t.length-1;e++)t[e+1]&&t[e].timeDown>t[e+1].timeDown&&(n=!0);n&&(this.currentHotkey=this._hotkeys[e],this.hotkeyHoldIntervalCounter>=this._hotkeyHoldInterval&&(this.hotkeyHoldIntervalCounter=0,this._hotkeys[e].callback()))}this.currentHotkey&&(this.keyInListDown(this.currentHotkey.keys)?this.hotkeyDisablingDragging=!0:(this.hotkeyDisablingDragging=!1,this.currentHotkey=null))}updatePosition(e){if(this.updateHotkeys(),!this.hotkeyDisablingDragging){let t=0,i=0;this.leftMovementKeysDown()&&(t-=e),this.rightMovementKeysDown()&&(t+=e),this.upMovementKeysDown()&&(i-=e),this.downMovementKeysDown()&&(i+=e);let n=new al(t,i);if(!n.equals(al.ZERO)){if(this._transform){n=(this._transform instanceof xp?this._transform:this._transform.value).inverseDelta2(n)}if(this._positionProperty){let e=this._positionProperty.get().plus(n);e=this.mapModelPoint(e),e.equals(this._positionProperty.get())||this._positionProperty.set(e)}this._drag&&this._drag(n,this),this.dragEmitter.emit()}}}mapModelPoint(e){return this._mapPosition?this._mapPosition(e):this._dragBoundsProperty.value?this._dragBoundsProperty.value.closestPointTo(e):e}keyInListDown(e){let t=!1;for(let i=0;i<this.keyState.length;i++){if(this.keyState[i].keyDown)for(let n=0;n<e.length;n++)if(e[n]===this.keyState[i].key){t=!0;break}if(t)break}return t}allKeysInListDown(e){let t=!0;for(let i=0;i<e.length;i++){const n=_.find(this.keyState,t=>t.key===e[i]);if(!n||!n.keyDown){t=!1;break}}return t}getKeyboardDragDirectionKeys(){const e=Wx.get(this._keyboardDragDirection);return e}leftMovementKeysDown(){return this.keyInListDown(this.getKeyboardDragDirectionKeys().left)}rightMovementKeysDown(){return this.keyInListDown(this.getKeyboardDragDirectionKeys().right)}upMovementKeysDown(){return this.keyInListDown(this.getKeyboardDragDirectionKeys().up)}downMovementKeysDown(){return this.keyInListDown(this.getKeyboardDragDirectionKeys().down)}getMovementKeysDown(){return this.rightMovementKeysDown()||this.leftMovementKeysDown()||this.upMovementKeysDown()||this.downMovementKeysDown()}get movementKeysDown(){return this.getMovementKeysDown()}enterKeyDown(){return this.keyInListDown([Of.KEY_ENTER])}shiftKeyDown(){return this.keyInListDown(Of.SHIFT_KEYS)}addHotkey(e){this._hotkeys.push(e)}removeHotkey(e){const t=this._hotkeys.indexOf(e);this._hotkeys.splice(t,1)}setHotkeys(e){this._hotkeys=e.slice(0)}set hotkeys(e){this.setHotkeys(e)}removeAllHotkeys(){this._hotkeys=[]}resetPressAndHold(){this.delayComplete=!1,this.moveOnHoldDelayCounter=0,this.moveOnHoldIntervalCounter=0}resetHotkeyState(){this.currentHotkey=null,this.hotkeyHoldIntervalCounter=this._hotkeyHoldInterval,this.hotkeyDisablingDragging=!1}interrupt(){this.keyState=[],this.resetHotkeyState(),this.resetPressAndHold(),this._pointer&&(this._pointer.removeInputListener(this._pointerListener),this._pointer=null,this.isPressedProperty.value=!1,this._end&&this._end())}dispose(){this.interrupt(),this._disposeKeyboardDragListener(),super.dispose()}static isLeftMovementKey(e){return e===Of.KEY_A||e===Of.KEY_LEFT_ARROW}static isRightMovementKey(e){return e===Of.KEY_D||e===Of.KEY_RIGHT_ARROW}static isUpMovementKey(e){return e===Of.KEY_W||e===Of.KEY_UP_ARROW}static isDownMovementKey(e){return e===Of.KEY_S||e===Of.KEY_DOWN_ARROW}}Lg.register("KeyboardDragListener",Xx);const jx=Xx;class Qx{constructor(e){const t=Vo()({callback:_.noop,cancel:_.noop,focus:_.noop,blur:_.noop,global:!1,capture:!1,handle:!1,abort:!1,listenerFireTrigger:"down",fireOnHold:!1,fireOnHoldDelay:400,fireOnHoldInterval:100},e);this._callback=t.callback,this._cancel=t.cancel,this._focus=t.focus,this._blur=t.blur,this._listenerFireTrigger=t.listenerFireTrigger,this._fireOnHold=t.fireOnHold,this._fireOnHoldDelay=t.fireOnHoldDelay,this._fireOnHoldInterval=t.fireOnHoldInterval,this._activeKeyGroups=[],this.keysDown=!1,this._global=t.global,this._handle=t.handle,this._abort=t.abort,this._keyGroups=this.convertKeysToKeyGroups(t.keys),this.listener=this,this.capture=t.capture,this._windowFocusListener=this.handleWindowFocusChange.bind(this),GS.windowHasFocusProperty.link(this._windowFocusListener)}fireCallback(e,t){this._callback(e,t.naturalKeys,this)}handleKeyDown(e){"down"!==this._listenerFireTrigger&&"both"!==this._listenerFireTrigger||this._keyGroups.forEach(t=>{this._activeKeyGroups.includes(t)||this.areKeysDownForListener(t)&&t.keys.includes(_b.getLastKeyDown())&&(this._activeKeyGroups.push(t),this.keysDown=!0,e.pointer.reserveForKeyboardDrag(),t.timer&&t.timer.start(),this.fireCallback(e,t))}),this.manageEvent(e)}handleKeyUp(e){if(this._activeKeyGroups.length>0&&this._activeKeyGroups.forEach((e,t)=>{this.areKeysDownForListener(e)||(e.timer&&e.timer.stop(!1),this._activeKeyGroups.splice(t,1))}),"up"===this._listenerFireTrigger||"both"===this._listenerFireTrigger){const t=Of.getEventCode(e.domEvent);t&&this._keyGroups.forEach(i=>{this.areModifierKeysDownForListener(i)&&i.keys.includes(t)&&(this.keysDown=!1,this.fireCallback(e,i))})}this.manageEvent(e)}getDownModifierKeys(e){const t=e.modifierKeys,i=[];return t.forEach(e=>{for(const t of e)if(_b.isKeyDown(t)){i.push(t);break}}),i}areKeysDownForListener(e){const t=this.getDownModifierKeys(e),i=t.length===e.modifierKeys.length,n=e.keys.find(e=>_b.isKeyDown(e));if(i&&n){const e=[...t,n];return _b.areKeysDownWithoutExtraModifiers(e)}return!1}areModifierKeysDownForListener(e){const t=this.getDownModifierKeys(e);return!!(t.length===e.modifierKeys.length)&&_b.areKeysDownWithoutExtraModifiers(t)}manageEvent(e){this._handle&&e.handle(),this._abort&&e.abort()}keydown(e){this._global||this.handleKeyDown(e)}keyup(e){this._global||this.handleKeyUp(e)}globalkeydown(e){this._global&&this.handleKeyDown(e)}globalkeyup(e){this._global&&this.handleKeyUp(e)}handleCancel(){this.clearActiveKeyGroups(),this._cancel(this)}handleWindowFocusChange(e){e||this.handleCancel()}cancel(){this.handleCancel()}interrupt(){this.handleCancel()}focusout(e){this.interrupt(),this._blur(this)}focusin(e){this._focus(this)}dispose(){this._keyGroups.forEach(e=>{e.timer&&e.timer.dispose()}),this._keyGroups.length=0,GS.windowHasFocusProperty.unlink(this._windowFocusListener)}clearActiveKeyGroups(){this._activeKeyGroups.forEach(e=>{e.timer&&e.timer.stop(!1)}),this._activeKeyGroups.length=0}convertKeysToKeyGroups(e){return e.map(e=>{const t=e.split("+"),i=t.slice(-1)[0],n=Yf[i];let r=[];if(t.length>1){r=t.slice(0,t.length-1).map(e=>{const t=Yf[e];return t})}const s={keys:n,modifierKeys:r,naturalKeys:e,timer:this._fireOnHold?new bx({callback:()=>this.fireCallback(null,s),delay:this._fireOnHoldDelay,interval:this._fireOnHoldInterval}):null};return s})}}Lg.register("KeyboardListener",Qx);const Kx=Qx,Zx=bv(e=>class extends e{constructor(){super(...arguments),_defineProperty(this,"spriteInstance",null)}press(e,t,i){if(this.isPressed)return!1;if(this.spriteInstance=null,e.currentTarget instanceof wA){const t=e.currentTarget;this.spriteInstance=t.getSpriteInstanceFromPoint(t.globalToLocalPoint(e.pointer.point))}return!!this.spriteInstance&&super.press(e,t,i)}});Lg.register("SpriteListenable",Zx);class Jx{constructor(e){this._pointer=null,this.downPoint=null,this.downEvent=null,this.enabled=!1,this.lastPoint=null,this.currentPoint=null,this.velocity=null,this.swipeDistance=null,this.firstUp=!1,this.timeSinceLastDown=0,this.downPointers=[],this.holdingTime=0,this.focusedNode=null,this.handleEventListener={down:e=>{e.handle(),e.abort(),this.handleDown(e)}},e.pointerAddedEmitter.addListener(e=>{this.enabled&&e.addInputListener(this.handleEventListener,!0)}),this._attachedPointerListener={up:e=>{this.focusedNode&&this.focusedNode.swipeEnd&&this.focusedNode.swipeEnd.bind(this.focusedNode)(e,this),this.focusedNode=null,this._pointer.removeInputListener(this._attachedPointerListener),this._pointer=null},move:e=>{this.focusedNode&&this.focusedNode.swipeMove&&this.focusedNode.swipeMove.bind(this.focusedNode)(e,this)},interrupt:e=>{this.focusedNode=null,this._pointer.removeInputListener(this._attachedPointerListener),this._pointer=null},cancel:e=>{this.focusedNode=null,this._pointer.removeInputListener(this._attachedPointerListener),this._pointer=null}},this._pointerListener={up:e=>{this.endSwipe(),this._pointer=null,this.swipeDistance=e.pointer.point.minus(this.downPoint);const t=this.swipeDistance.y,i=this.swipeDistance.x;if(Math.abs(i)>100&&Math.abs(t)<100)if(i>0){if(GS.pdomFocusedNode&&"Reset All"===GS.pdomFocusedNode.innerContent)return;nE.getNextFocusable(document.body).focus()}else nE.getPreviousFocusable(document.body).focus();else if(this.firstUp){if(this.timeSinceLastDown<.6){this.firstUp=!1,this.timeSinceLastDown=0;const t=document.getElementsByClassName("a11y-pdom-root")[0];t&&t.contains(e.activeElement)&&e.activeElement.click()}}else this.firstUp=!0},move:e=>{this.lastPoint=this.currentPoint,this.currentPoint=e.pointer.point},interrupt:()=>{this.interrupt()},cancel:()=>{this.interrupt()}},vb.addListener(this.step.bind(this))}handleDown(e){e.pointer.addIntent(Y_.DRAG),this.downPointers.push(e.pointer),this.downPointers.length>1&&(this.downPointers.forEach(e=>e.removeIntent(Y_.DRAG)),e.pointer.removeIntent(Y_.DRAG)),e.pointer.removeInputListener(this.handleEventListener),null===this._pointer&&"touch"===e.pointer.type&&(this._pointer=e.pointer,e.pointer.addInputListener(this._pointerListener,!0),e.abort(),this.downEvent=e,this.downPoint=e.pointer.point,this.currentPoint=this.downPoint.copy(),this.previousPoint=this.currentPoint.copy())}up(e){const t=this.downPointers.indexOf(e.pointer);t>-1&&this.downPointers.splice(t,1)}step(e){if(this.firstUp&&(this.timeSinceLastDown+=e,this.timeSinceLastDown>.6&&(this.firstUp=!1,this.timeSinceLastDown=0)),this._pointer&&!this._pointer.listeners.includes(this._attachedPointerListener))if(this.holdingTime>.75){const e=GS.pdomFocusedNode;e&&(this._pointer.removeInputListener(this._pointerListener),this.holdingTime=0,this.focusedNode=e,this._pointer.addInputListener(this._attachedPointerListener,!0),this.focusedNode.swipeStart&&this.focusedNode.swipeStart(this.downEvent,this),this.downEvent=null)}else this.holdingTime+=e;null!==this.lastPoint&&null!==this.currentPoint&&(this.velocity=this.lastPoint.minus(this.currentPoint).dividedScalar(e))}endSwipe(){this.holdingTime=0,this._pointer&&this._pointer.listeners.includes(this._pointerListener)&&this._pointer.removeInputListener(this._pointerListener)}detachPointerListener(){this._pointer.detach(this._attachedPointerListener)}interrupt(){this.endSwipe(),this._pointer=null,this.downEvent=null}}Lg.register("SwipeListener",Jx);const $x=["left","right","center","origin"],ew=["top","bottom","center","origin"];class tw extends Fl{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;super(),this.horizontal=e,this.vertical=t,this.padRatio=i}static getAllowedAligns(e){return[...e===Ql.HORIZONTAL?$x:ew,null]}static alignToInternal(e,t){return e===Ql.HORIZONTAL?tw.horizontalAlignToInternal(t):tw.verticalAlignToInternal(t)}static horizontalAlignToInternal(e){return null===e?null:iw[e]}static verticalAlignToInternal(e){return null===e?null:nw[e]}static internalToAlign(e,t){return null===t?null:e===Ql.HORIZONTAL?t.horizontal:t.vertical}}_defineProperty(tw,"START",new(Re=tw)("left","top",0)),_defineProperty(tw,"END",new Re("right","bottom",1)),_defineProperty(tw,"CENTER",new Re("center","center",.5)),_defineProperty(tw,"ORIGIN",new Re("origin","origin")),_defineProperty(tw,"enumeration",new Xl(Re,{phetioDocumentation:"Alignment for layout containers"}));const iw={left:tw.START,right:tw.END,center:tw.CENTER,origin:tw.ORIGIN},nw={top:tw.START,bottom:tw.END,center:tw.CENTER,origin:tw.ORIGIN};Lg.register("LayoutAlign",tw);const rw=["left","right","center","spaceBetween","spaceAround","spaceEvenly"],sw=["top","bottom","center","spaceBetween","spaceAround","spaceEvenly"];class aw extends Fl{constructor(e,t,i){super(),this.spacingFunctionFactory=e,this.horizontal=t,this.vertical=i}static getAllowedJustificationValues(e){return e===Ql.HORIZONTAL?rw:sw}static justifyToInternal(e,t){return e===Ql.HORIZONTAL?ow[t]:lw[t]}static internalToJustify(e,t){return e===Ql.HORIZONTAL?t.horizontal:t.vertical}}_defineProperty(aw,"START",new(Ne=aw)(()=>()=>0,"left","top")),_defineProperty(aw,"END",new Ne(e=>t=>0===t?e:0,"right","bottom")),_defineProperty(aw,"CENTER",new Ne(e=>t=>0===t?e/2:0,"center","center")),_defineProperty(aw,"SPACE_BETWEEN",new Ne((e,t)=>i=>0!==i?e/(t-1):0,"spaceBetween","spaceBetween")),_defineProperty(aw,"SPACE_AROUND",new Ne((e,t)=>i=>(0!==i?2:1)*e/(2*t),"spaceAround","spaceAround")),_defineProperty(aw,"SPACE_EVENLY",new Ne((e,t)=>i=>e/(t+1),"spaceEvenly","spaceEvenly")),_defineProperty(aw,"enumeration",new Xl(Ne,{phetioDocumentation:"Justify for layout containers"}));const ow={left:aw.START,right:aw.END,center:aw.CENTER,spaceBetween:aw.SPACE_BETWEEN,spaceAround:aw.SPACE_AROUND,spaceEvenly:aw.SPACE_EVENLY},lw={top:aw.START,bottom:aw.END,center:aw.CENTER,spaceBetween:aw.SPACE_BETWEEN,spaceAround:aw.SPACE_AROUND,spaceEvenly:aw.SPACE_EVENLY};Lg.register("LayoutJustification",aw);const hw={stretch:!0,isSeparator:!0};class uw extends SA{constructor(e){super(Vo()({layoutOptions:hw,stroke:"rgb(100,100,100)"},e))}}Lg.register("Separator",uw);class cw extends(Nv(uw)){constructor(e){super(),this.localPreferredHeightProperty.link(e=>{null!==e&&(this.y2=e)}),this.mutate(e)}}Lg.register("VSeparator",cw);class dw extends(Tv(uw)){constructor(e){super(),this.localPreferredWidthProperty.link(e=>{null!==e&&(this.x2=e)}),this.mutate(e)}}Lg.register("HSeparator",dw);class pw{constructor(e){this.initialize(e)}initialize(e){return this.trail=e,this}checkPreconditions(){}get node(){return this.trail.lastNode()}get bounds(){return this.trail.parentToGlobalBounds(this.node.bounds)}get visibleBounds(){return this.trail.parentToGlobalBounds(this.node.visibleBounds)}get width(){return this.bounds.width}get height(){return this.bounds.height}get x(){return this.trail.getParentTransform().transformX(this.node.x)}set x(e){this.node.x=this.trail.getParentTransform().inverseX(e)}get y(){return this.trail.getParentTransform().transformY(this.node.y)}set y(e){this.node.y=this.trail.getParentTransform().inverseY(e)}get translation(){return this.trail.getParentTransform().transformPosition2(this.node.translation)}set translation(e){this.node.translation=this.trail.getParentTransform().inversePosition2(e)}get left(){return this.trail.getParentTransform().transformX(this.node.left)}set left(e){this.node.left=this.trail.getParentTransform().inverseX(e)}get right(){return this.trail.getParentTransform().transformX(this.node.right)}set right(e){this.node.right=this.trail.getParentTransform().inverseX(e)}get centerX(){return this.trail.getParentTransform().transformX(this.node.centerX)}set centerX(e){this.node.centerX=this.trail.getParentTransform().inverseX(e)}get top(){return this.trail.getParentTransform().transformY(this.node.top)}set top(e){this.node.top=this.trail.getParentTransform().inverseY(e)}get bottom(){return this.trail.getParentTransform().transformY(this.node.bottom)}set bottom(e){this.node.bottom=this.trail.getParentTransform().inverseY(e)}get centerY(){return this.trail.getParentTransform().transformY(this.node.centerY)}set centerY(e){this.node.centerY=this.trail.getParentTransform().inverseY(e)}get leftTop(){return this.trail.getParentTransform().transformPosition2(this.node.leftTop)}set leftTop(e){this.node.leftTop=this.trail.getParentTransform().inversePosition2(e)}get centerTop(){return this.trail.getParentTransform().transformPosition2(this.node.centerTop)}set centerTop(e){this.node.centerTop=this.trail.getParentTransform().inversePosition2(e)}get rightTop(){return this.trail.getParentTransform().transformPosition2(this.node.rightTop)}set rightTop(e){this.node.rightTop=this.trail.getParentTransform().inversePosition2(e)}get leftCenter(){return this.trail.getParentTransform().transformPosition2(this.node.leftCenter)}set leftCenter(e){this.node.leftCenter=this.trail.getParentTransform().inversePosition2(e)}get center(){return this.trail.getParentTransform().transformPosition2(this.node.center)}set center(e){this.node.center=this.trail.getParentTransform().inversePosition2(e)}get rightCenter(){return this.trail.getParentTransform().transformPosition2(this.node.rightCenter)}set rightCenter(e){this.node.rightCenter=this.trail.getParentTransform().inversePosition2(e)}get leftBottom(){return this.trail.getParentTransform().transformPosition2(this.node.leftBottom)}set leftBottom(e){this.node.leftBottom=this.trail.getParentTransform().inversePosition2(e)}get centerBottom(){return this.trail.getParentTransform().transformPosition2(this.node.centerBottom)}set centerBottom(e){this.node.centerBottom=this.trail.getParentTransform().inversePosition2(e)}get rightBottom(){return this.trail.getParentTransform().transformPosition2(this.node.rightBottom)}set rightBottom(e){this.node.rightBottom=this.trail.getParentTransform().inversePosition2(e)}get widthSizable(){return this.node.widthSizable}get heightSizable(){return this.node.heightSizable}get preferredWidth(){const e=this.node.preferredWidth;return null===e?null:Math.abs(this.trail.getParentTransform().transformDeltaX(e))}set preferredWidth(e){this.node.preferredWidth=null===e?null:Math.abs(this.trail.getParentTransform().inverseDeltaX(e))}get preferredHeight(){const e=this.node.preferredHeight;return null===e?null:Math.abs(this.trail.getParentTransform().transformDeltaY(e))}set preferredHeight(e){this.node.preferredHeight=null===e?null:Math.abs(this.trail.getParentTransform().inverseDeltaY(e))}get minimumWidth(){const e=xv(this.node)?this.node.minimumWidth||0:this.node.width;return Math.abs(this.trail.getParentTransform().transformDeltaX(e))}get minimumHeight(){const e=Vv(this.node)?this.node.minimumHeight||0:this.node.height;return Math.abs(this.trail.getParentTransform().transformDeltaY(e))}getMinimum(e){return e===Ql.HORIZONTAL?this.minimumWidth:this.minimumHeight}get maxWidth(){return null===this.node.maxWidth?null:Math.abs(this.trail.getParentTransform().transformDeltaX(this.node.maxWidth))}set maxWidth(e){this.node.maxWidth=null===e?null:Math.abs(this.trail.getParentTransform().inverseDeltaX(e))}get maxHeight(){return null===this.node.maxHeight?null:Math.abs(this.trail.getParentTransform().transformDeltaY(this.node.maxHeight))}set maxHeight(e){this.node.maxHeight=null===e?null:Math.abs(this.trail.getParentTransform().inverseDeltaY(e))}getMax(e){return e===Ql.HORIZONTAL?this.maxWidth:this.maxHeight}get visible(){return this.node.visible}set visible(e){this.node.visible=e}dispose(){this.trail=null,this.freeToPool()}freeToPool(){pw.pool.freeToPool(this)}}_defineProperty(pw,"pool",new Mo(pw,{maxSize:1e3})),Lg.register("LayoutProxy",pw);class mw extends Lb{constructor(e,t,i){const n=new Yv(e,t);super([n],e=>1===e.length?pw.pool.create(e[0].copy().removeAncestor()):null),_defineProperty(this,"transformTracker",null),this.trailsBetweenProperty=n,this.lazyLink((e,t)=>{t&&t.dispose()});const r=null==i?void 0:i.onTransformChange;r&&this.link(t=>{this.transformTracker&&(this.transformTracker.dispose(),this.transformTracker=null),t&&(this.transformTracker=new QA(t.trail.copy().addAncestor(e)),this.transformTracker.addListener(r))})}dispose(){this.trailsBetweenProperty.dispose(),this.transformTracker&&this.transformTracker.dispose(),super.dispose()}}Lg.register("LayoutProxyProperty",mw);class gw{constructor(e){_defineProperty(this,"_layoutLockCount",0),_defineProperty(this,"_layoutAttemptDuringLock",!1),_defineProperty(this,"_enabled",!0),_defineProperty(this,"_listenedNodes",new Set),_defineProperty(this,"finishedLayoutEmitter",new np),this.ancestorNode=e,this._updateLayoutListener=this.updateLayoutAutomatically.bind(this)}addNode(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&(e._activeParentLayoutConstraint=this),e.boundsProperty.lazyLink(this._updateLayoutListener),e.visibleProperty.lazyLink(this._updateLayoutListener),wv(e)&&(e.minimumWidthProperty.lazyLink(this._updateLayoutListener),e.isWidthResizableProperty.lazyLink(this._updateLayoutListener)),Rv(e)&&(e.minimumHeightProperty.lazyLink(this._updateLayoutListener),e.isHeightResizableProperty.lazyLink(this._updateLayoutListener)),this._listenedNodes.add(e)}removeNode(e){e._activeParentLayoutConstraint===this&&(e._activeParentLayoutConstraint=null),e.boundsProperty.unlink(this._updateLayoutListener),e.visibleProperty.unlink(this._updateLayoutListener),wv(e)&&(e.minimumWidthProperty.unlink(this._updateLayoutListener),e.isWidthResizableProperty.unlink(this._updateLayoutListener)),Rv(e)&&(e.minimumHeightProperty.unlink(this._updateLayoutListener),e.isHeightResizableProperty.unlink(this._updateLayoutListener)),this._listenedNodes.delete(e)}layout(){}get isLocked(){return this._layoutLockCount>0}lock(){this._layoutLockCount++}unlock(){this._layoutLockCount--}validateLocalPreferredWidth(e){0}validateLocalPreferredHeight(e){0}validateLocalPreferredSize(e){0}updateLayout(){if(this.isLocked)this._layoutAttemptDuringLock=!0;else{this.lock();do{this._layoutAttemptDuringLock=!1,this.layout()}while(this._layoutAttemptDuringLock);this.unlock()}}updateLayoutAutomatically(){this._enabled&&this.updateLayout()}createLayoutProxy(e){const t=e.getTrails(e=>e===this.ancestorNode);return 1===t.length?pw.pool.create(t[0].removeAncestor()):null}get enabled(){return this._enabled}set enabled(e){this._enabled!==e&&(this._enabled=e,this.updateLayoutAutomatically())}dispose(){const e=[...this._listenedNodes.keys()];for(let t=0;t<e.length;t++)this.removeNode(e[t]);this.finishedLayoutEmitter.dispose()}}Lg.register("LayoutConstraint",gw);class fw{constructor(e,t,i){i?(this.layoutProxyProperty=null,this._proxy=i):(this._proxy=null,this.layoutProxyProperty=new mw(e.ancestorNode,t,{onTransformChange:()=>e.updateLayoutAutomatically()}),this.layoutProxyProperty.link(t=>{this._proxy=t,e.updateLayoutAutomatically()})),this._constraint=e,this._node=t,this.layoutOptionsListener=this.onLayoutOptionsChange.bind(this),this.node.layoutOptionsChangedEmitter.addListener(this.layoutOptionsListener)}onLayoutOptionsChange(){}get node(){return this._node}isConnected(){return null!==this._proxy}get proxy(){return this._proxy}isSizable(e){return e===Ql.HORIZONTAL?this.proxy.widthSizable:this.proxy.heightSizable}dispose(){this.layoutProxyProperty&&this.layoutProxyProperty.dispose(),this.node.layoutOptionsChangedEmitter.removeListener(this.layoutOptionsListener)}}Lg.register("LayoutCell",fw);class yw{constructor(e,t){_defineProperty(this,"_map",new Map),this._enumeration=e,this._values=e.enumeration.values,this._values.forEach(e=>{this._map.set(e,t(e))})}get(e){return this._map.get(e)}set(e,t){this._map.set(e,t)}map(e){return new yw(this._enumeration,t=>e(this.get(t),t))}forEach(e){this._values.forEach(t=>e(this.get(t),t))}values(){return this._values.map(e=>this.get(e))}}wo.register("EnumerationMap",yw);const Ew=yw;class vw extends Ew{constructor(e,t){super(Ql,i=>i===Ql.HORIZONTAL?e:t)}get horizontal(){return this.get(Ql.HORIZONTAL)}set horizontal(e){this.set(Ql.HORIZONTAL,e)}get vertical(){return this.get(Ql.VERTICAL)}set vertical(e){this.set(Ql.VERTICAL,e)}with(e,t){return new vw(e===Ql.HORIZONTAL?t:this.horizontal,e===Ql.VERTICAL?t:this.vertical)}static create(e){return new vw(e(Ql.HORIZONTAL),e(Ql.VERTICAL))}}wo.register("OrientationPair",vw);const Aw=vw;class bw extends fw{constructor(e,t,i){super(e,t,i),_defineProperty(this,"preferredSizeSet",new Aw(!1,!1)),_defineProperty(this,"lastAvailableBounds",Zl.NOTHING.copy()),_defineProperty(this,"lastUsedBounds",Zl.NOTHING.copy()),this._marginConstraint=e}reposition(e,t,i,n,r,s){const a=n&&this.isSizable(e)?t:this.getMinimumSize(e);this.attemptPreferredSize(e,a),s===tw.ORIGIN?this.positionOrigin(e,i+r):this.positionStart(e,i+(t-this.getCellBounds()[e.size])*s.padRatio);const o=this.getCellBounds();return this.lastAvailableBounds[e.minCoordinate]=i,this.lastAvailableBounds[e.maxCoordinate]=i+t,this.lastUsedBounds.set(o),o}get effectiveLeftMargin(){return null!==this._leftMargin?this._leftMargin:this._marginConstraint._leftMargin}get effectiveRightMargin(){return null!==this._rightMargin?this._rightMargin:this._marginConstraint._rightMargin}get effectiveTopMargin(){return null!==this._topMargin?this._topMargin:this._marginConstraint._topMargin}get effectiveBottomMargin(){return null!==this._bottomMargin?this._bottomMargin:this._marginConstraint._bottomMargin}getEffectiveMinMargin(e){return e===Ql.HORIZONTAL?this.effectiveLeftMargin:this.effectiveTopMargin}getEffectiveMaxMargin(e){return e===Ql.HORIZONTAL?this.effectiveRightMargin:this.effectiveBottomMargin}get effectiveMinContentWidth(){return null!==this._minContentWidth?this._minContentWidth:this._marginConstraint._minContentWidth}get effectiveMinContentHeight(){return null!==this._minContentHeight?this._minContentHeight:this._marginConstraint._minContentHeight}getEffectiveMinContent(e){return e===Ql.HORIZONTAL?this.effectiveMinContentWidth:this.effectiveMinContentHeight}get effectiveMaxContentWidth(){return null!==this._maxContentWidth?this._maxContentWidth:this._marginConstraint._maxContentWidth}get effectiveMaxContentHeight(){return null!==this._maxContentHeight?this._maxContentHeight:this._marginConstraint._maxContentHeight}getEffectiveMaxContent(e){return e===Ql.HORIZONTAL?this.effectiveMaxContentWidth:this.effectiveMaxContentHeight}getMinimumSize(e){return this.getEffectiveMinMargin(e)+Math.max(this.proxy.getMinimum(e),this.getEffectiveMinContent(e)||0)+this.getEffectiveMaxMargin(e)}getMaximumSize(e){return this.getEffectiveMinMargin(e)+(this.getEffectiveMaxContent(e)||Number.POSITIVE_INFINITY)+this.getEffectiveMaxMargin(e)}attemptPreferredSize(e,t){if(this.proxy[e.sizable]){const i=this.getMinimumSize(e),n=this.getMaximumSize(e);let r=(t=fl.clamp(t,i,n))-this.getEffectiveMinMargin(e)-this.getEffectiveMaxMargin(e);const s=this.proxy.getMax(e);null!==s&&(r=Math.min(s,r)),this._marginConstraint.setProxyPreferredSize(e,this.proxy,r),this.preferredSizeSet.set(e,!0)}}unsetPreferredSize(e){this.proxy[e.sizable]&&this._marginConstraint.setProxyPreferredSize(e,this.proxy,null)}positionStart(e,t){const i=this.getEffectiveMinMargin(e)+t;this._marginConstraint.setProxyMinSide(e,this.proxy,i)}positionOrigin(e,t){this._marginConstraint.setProxyOrigin(e,this.proxy,t)}getOriginBounds(){return this.getCellBounds().shiftedXY(-this.proxy.x,-this.proxy.y)}getCellBounds(){return this.proxy.bounds.withOffsets(this.effectiveLeftMargin,this.effectiveTopMargin,this.effectiveRightMargin,this.effectiveBottomMargin)}dispose(){Ql.enumeration.values.forEach(e=>{this.preferredSizeSet.get(e)&&this.unsetPreferredSize(e)}),super.dispose()}static createHelperNode(e,t,i){const n=new cv,r=Ip.union(e.map(e=>Ip.bounds(e.lastAvailableBounds))),s=Ip.union(e.map(e=>Ip.bounds(e.lastUsedBounds))),a=Ip.union(e.map(e=>Ip.bounds(e.proxy.bounds))),o=Ip.bounds(t).shapeDifference(r),l=r.shapeDifference(s),h=s.shapeDifference(a),u=(e,t,i)=>{const n=new gA(e,{font:new nf({size:6,family:"monospace"}),fill:t}),r=xA.bounds(n.bounds,{fill:i,children:[n]});return new yE(r,4,Math.floor(r.left),Math.ceil(r.top+1),Math.floor(r.width),Math.floor(r.height-2),Mh.rotation2(-Math.PI/4))};return n.addChild(new aA(o,{fill:u("spacing","#000","#fff"),opacity:.6})),n.addChild(new aA(l,{fill:u("empty","#aaa","#000"),opacity:.6})),n.addChild(new aA(h,{fill:u("margin","#600","#f00"),opacity:.6})),n.addChild(xA.bounds(t,{stroke:"white",lineDash:[2,2],lineDashOffset:2,lineWidth:.4})),n.addChild(xA.bounds(t,{stroke:"black",lineDash:[2,2],lineWidth:.4})),e.forEach(e=>{n.addChild(xA.bounds(e.getCellBounds(),{stroke:"rgba(0,255,0,1)",lineWidth:.4}))}),e.forEach(e=>{n.addChild(xA.bounds(e.proxy.bounds,{stroke:"rgba(255,0,0,1)",lineWidth:.4}))}),e.forEach(e=>{const t=e.getCellBounds(),r=new Ax({tandem:Lm.OPT_OUT});n.addChild(xA.bounds(t,{inputListeners:[r]}));let s=i(e);e.effectiveLeftMargin&&(s+=`leftMargin: ${e.effectiveLeftMargin}\n`),e.effectiveRightMargin&&(s+=`rightMargin: ${e.effectiveRightMargin}\n`),e.effectiveTopMargin&&(s+=`topMargin: ${e.effectiveTopMargin}\n`),e.effectiveBottomMargin&&(s+=`bottomMargin: ${e.effectiveBottomMargin}\n`),e.effectiveMinContentWidth&&(s+=`minContentWidth: ${e.effectiveMinContentWidth}\n`),e.effectiveMinContentHeight&&(s+=`minContentHeight: ${e.effectiveMinContentHeight}\n`),e.effectiveMaxContentWidth&&(s+=`maxContentWidth: ${e.effectiveMaxContentWidth}\n`),e.effectiveMaxContentHeight&&(s+=`maxContentHeight: ${e.effectiveMaxContentHeight}\n`),s+=`layoutOptions: ${JSON.stringify(e.node.layoutOptions,null,2).replace(/ /g,"&nbsp;")}\n`;const a=new CT(s.trim().replace(/\n/g,"<br>"),{font:new nf({size:12})}),o=xA.bounds(a.bounds.dilated(3),{fill:"rgba(255,255,255,0.8)",children:[a],leftTop:t.leftTop});n.addChild(o),r.isOverProperty.link(e=>{o.visible=e})}),n}}Lg.register("MarginLayoutCell",bw);const Sw={isValidValue:e=>!isNaN(e.x)&&!isNaN(e.y),validationMessage:"Vector2 x/y should not be NaN"};class _w extends ty{constructor(e,t){const i=Vo()({valueType:al,validBounds:null,validators:[],phetioValueType:al.Vector2IO},t);i.validators.push(Sw),i.validBounds&&i.validators.push({validationMessage:"Vector2 is not within validBounds",isValidValue:e=>i.validBounds.containsPoint(e)}),super(e,i),this.validBounds=i.validBounds}}rl.register("Vector2Property",_w);const xw=_w,ww=["resize","layoutOrigin"];class Tw extends(Iv(cv)){constructor(e){super(e),_defineProperty(this,"layoutOriginProperty",new xw(al.ZERO))}linkLayoutBounds(){this._constraint.layoutBoundsProperty.link(e=>{this.localBounds=e})}setExcludeInvisibleChildrenFromBounds(e){super.setExcludeInvisibleChildrenFromBounds(e),this._constraint.excludeInvisible=e}setChildren(e){if(this.constraint.isLocked)return super.setChildren(e);const t=this.getChildren();return this.constraint.lock(),super.setChildren(e),this.constraint.unlock(),_.isEqual(t,e)||this.constraint.updateLayoutAutomatically(),this}updateLayout(){this._constraint.updateLayout()}get resize(){return this._constraint.enabled}set resize(e){this._constraint.enabled=e}get layoutOrigin(){return this.layoutOriginProperty.value}set layoutOrigin(e){this.layoutOriginProperty.value=e}get constraint(){return this._constraint}dispose(){this._constraint.dispose(),super.dispose()}}Lg.register("LayoutNode",Tw);class Pw{initializeLayoutLine(){this.min=0,this.max=Number.POSITIVE_INFINITY,this.minOrigin=Number.POSITIVE_INFINITY,this.maxOrigin=Number.NEGATIVE_INFINITY,this.size=0,this.position=0}hasOrigin(){return isFinite(this.minOrigin)&&isFinite(this.maxOrigin)}}Lg.register("LayoutLine",Pw);class Cw extends gw{constructor(e,t){const i=Vo()({preferredWidthProperty:new mg(null),preferredHeightProperty:new mg(null),minimumWidthProperty:new mg(null),minimumHeightProperty:new mg(null),layoutOriginProperty:new mg(al.ZERO)},t);super(e),_defineProperty(this,"_excludeInvisible",!0),this.layoutBoundsProperty=new ty(Zl.NOTHING,{valueComparisonStrategy:"equalsFunction"}),this.preferredWidthProperty=i.preferredWidthProperty,this.preferredHeightProperty=i.preferredHeightProperty,this.minimumWidthProperty=i.minimumWidthProperty,this.minimumHeightProperty=i.minimumHeightProperty,this.layoutOriginProperty=i.layoutOriginProperty,this.preferredWidthProperty.lazyLink(this._updateLayoutListener),this.preferredHeightProperty.lazyLink(this._updateLayoutListener),this.layoutOriginProperty.lazyLink(this._updateLayoutListener)}filterLayoutCells(e){return e.filter(e=>e.isConnected()&&e.proxy.bounds.isValid()&&(!this.excludeInvisible||e.node.visible))}get excludeInvisible(){return this._excludeInvisible}set excludeInvisible(e){this._excludeInvisible!==e&&(this._excludeInvisible=e,this.updateLayoutAutomatically())}setProxyPreferredSize(e,t,i){t[e.preferredSize]=i}setProxyMinSide(e,t,i){Math.abs(t[e.minSide]-i)>1e-9&&(t[e.minSide]=i)}setProxyOrigin(e,t,i){Math.abs(t[e.coordinate]-i)>1e-9&&(t[e.coordinate]=i)}dispose(){this.preferredWidthProperty.unlink(this._updateLayoutListener),this.preferredHeightProperty.unlink(this._updateLayoutListener),this.layoutOriginProperty.unlink(this._updateLayoutListener),super.dispose()}}Lg.register("NodeLayoutConstraint",Cw);const Vw=["margin","xMargin","yMargin","leftMargin","rightMargin","topMargin","bottomMargin","minContentWidth","minContentHeight","maxContentWidth","maxContentHeight"],Rw=bv(e=>class extends e{constructor(){super(...arguments),_defineProperty(this,"_leftMargin",null),_defineProperty(this,"_rightMargin",null),_defineProperty(this,"_topMargin",null),_defineProperty(this,"_bottomMargin",null),_defineProperty(this,"_minContentWidth",null),_defineProperty(this,"_minContentHeight",null),_defineProperty(this,"_maxContentWidth",null),_defineProperty(this,"_maxContentHeight",null),_defineProperty(this,"changedEmitter",new np)}mutateConfigurable(e){Ko(e,["margin"],["xMargin","yMargin"]),Ko(e,["xMargin"],["leftMargin","rightMargin"]),Ko(e,["yMargin"],["topMargin","bottomMargin"])}setConfigToBaseDefault(){this._leftMargin=0,this._rightMargin=0,this._topMargin=0,this._bottomMargin=0,this._minContentWidth=null,this._minContentHeight=null,this._maxContentWidth=null,this._maxContentHeight=null,this.changedEmitter.emit()}setConfigToInherit(){this._leftMargin=null,this._rightMargin=null,this._topMargin=null,this._bottomMargin=null,this._minContentWidth=null,this._minContentHeight=null,this._maxContentWidth=null,this._maxContentHeight=null,this.changedEmitter.emit()}get leftMargin(){return this._leftMargin}set leftMargin(e){this._leftMargin!==e&&(this._leftMargin=e,this.changedEmitter.emit())}get rightMargin(){return this._rightMargin}set rightMargin(e){this._rightMargin!==e&&(this._rightMargin=e,this.changedEmitter.emit())}get topMargin(){return this._topMargin}set topMargin(e){this._topMargin!==e&&(this._topMargin=e,this.changedEmitter.emit())}get bottomMargin(){return this._bottomMargin}set bottomMargin(e){this._bottomMargin!==e&&(this._bottomMargin=e,this.changedEmitter.emit())}get xMargin(){return this._leftMargin}set xMargin(e){this._leftMargin===e&&this._rightMargin===e||(this._leftMargin=e,this._rightMargin=e,this.changedEmitter.emit())}get yMargin(){return this._topMargin}set yMargin(e){this._topMargin===e&&this._bottomMargin===e||(this._topMargin=e,this._bottomMargin=e,this.changedEmitter.emit())}get margin(){return this._topMargin}set margin(e){this._leftMargin===e&&this._rightMargin===e&&this._topMargin===e&&this._bottomMargin===e||(this._leftMargin=e,this._rightMargin=e,this._topMargin=e,this._bottomMargin=e,this.changedEmitter.emit())}get minContentWidth(){return this._minContentWidth}set minContentWidth(e){this._minContentWidth!==e&&(this._minContentWidth=e,this.changedEmitter.emit())}get minContentHeight(){return this._minContentHeight}set minContentHeight(e){this._minContentHeight!==e&&(this._minContentHeight=e,this.changedEmitter.emit())}get maxContentWidth(){return this._maxContentWidth}set maxContentWidth(e){this._maxContentWidth!==e&&(this._maxContentWidth=e,this.changedEmitter.emit())}get maxContentHeight(){return this._maxContentHeight}set maxContentHeight(e){this._maxContentHeight!==e&&(this._maxContentHeight=e,this.changedEmitter.emit())}});Lg.register("MarginLayoutConfigurable",Rw);const Nw=Rw,Mw=["orientation","align","stretch","grow"].concat(Vw),kw=bv(e=>class extends(Nw(e)){constructor(){super(...arguments),_defineProperty(this,"_orientation",Ql.HORIZONTAL),_defineProperty(this,"_align",null),_defineProperty(this,"_stretch",null),_defineProperty(this,"_grow",null),_defineProperty(this,"orientationChangedEmitter",new np)}mutateConfigurable(e){super.mutateConfigurable(e),NA(this,Mw,e)}setConfigToBaseDefault(){this._align=tw.CENTER,this._stretch=!1,this._grow=0,super.setConfigToBaseDefault()}setConfigToInherit(){this._align=null,this._stretch=null,this._grow=null,super.setConfigToInherit()}get orientation(){return this._orientation===Ql.HORIZONTAL?"horizontal":"vertical"}set orientation(e){const t="horizontal"===e?Ql.HORIZONTAL:Ql.VERTICAL;this._orientation!==t&&(this._orientation=t,this.orientationChangedEmitter.emit(),this.changedEmitter.emit())}get align(){const e=tw.internalToAlign(this._orientation,this._align);return e}set align(e){const t=tw.alignToInternal(this._orientation.opposite,e);this._align!==t&&(this._align=t,this.changedEmitter.emit())}get stretch(){return this._stretch}set stretch(e){this._stretch!==e&&(this._stretch=e,this.changedEmitter.emit())}get grow(){return this._grow}set grow(e){this._grow!==e&&(this._grow=e,this.changedEmitter.emit())}});Lg.register("FlowConfigurable",kw);const Lw=kw;class Iw extends(Lw(bw)){constructor(e,t,i){super(e,t,i),_defineProperty(this,"size",0),_defineProperty(this,"_isSeparator",!1),this.flowConstraint=e,this.orientation=e.orientation,this.onLayoutOptionsChange()}get effectiveAlign(){return null!==this._align?this._align:this.flowConstraint._align}get effectiveStretch(){return null!==this._stretch?this._stretch:this.flowConstraint._stretch}get effectiveGrow(){return null!==this._grow?this._grow:this.flowConstraint._grow}onLayoutOptionsChange(){this.node.layoutOptions&&this.setOptions(this.node.layoutOptions),super.onLayoutOptionsChange()}setOptions(e){const t=Vo()({isSeparator:!1},e);this._isSeparator=t.isSeparator,this.setConfigToInherit(),this.mutateConfigurable(t)}}Lg.register("FlowCell",Iw);class Bw extends Pw{constructor(e,t){super(),this.initialize(e,t)}initialize(e,t){return this.orientation=e,this.cells=t,this.initializeLayoutLine(),this}getMinimumSize(e){return(this.cells.length-1)*e+_.sum(this.cells.map(e=>e.getMinimumSize(this.orientation)))}freeToPool(){Bw.pool.freeToPool(this)}clean(){this.cells.length=0,this.freeToPool()}}_defineProperty(Bw,"pool",new Mo(Bw,{defaultArguments:[Ql.HORIZONTAL,[]]})),Lg.register("FlowLine",Bw);const Dw=[...Mw,"spacing","lineSpacing","justify","justifyLines","wrap","excludeInvisible"];class Ow extends(Lw(Cw)){constructor(e,t){super(e,t),_defineProperty(this,"cells",[]),_defineProperty(this,"_justify",aw.SPACE_BETWEEN),_defineProperty(this,"_justifyLines",null),_defineProperty(this,"_wrap",!1),_defineProperty(this,"_spacing",0),_defineProperty(this,"_lineSpacing",0),_defineProperty(this,"displayedCells",[]),this.setConfigToBaseDefault(),this.mutateConfigurable(t),NA(this,Dw,t),this.changedEmitter.addListener(this._updateLayoutListener),this.orientationChangedEmitter.addListener(()=>this.cells.forEach(e=>{e.orientation=this.orientation}))}updateSeparatorVisibility(){let e=0;for(;e<this.cells.length;e++){const t=this.cells[e];if(t._isSeparator)t.node.visible=!1;else if(t.node.visible)break}let t=!1;for(let i=this.cells.length-1;i>e;i--){const e=this.cells[i];e._isSeparator?(e.node.visible=t,t=!1):e.node.visible&&(t=!0)}}layout(){super.layout();const e=this._orientation,t=this._orientation.opposite;this.updateSeparatorVisibility();const i=this.filterLayoutCells(this.cells);if(this.displayedCells=i,!i.length)return this.layoutBoundsProperty.value=Zl.NOTHING,this.minimumWidthProperty.value=null,void(this.minimumHeightProperty.value=null);let n=this.getPreferredProperty(e).value;const r=this.getPreferredProperty(t).value,s=Math.max(...i.map(t=>t.getMinimumSize(e)||0));s>(n||Number.POSITIVE_INFINITY)&&(n=s);const a=[];if(this.wrap){let t=[],r=n||Number.POSITIVE_INFINITY;for(;i.length;){const s=i.shift(),o=s.getMinimumSize(e);0===t.length?(t.push(s),r-=o):this.spacing+o<=r+1e-7?(t.push(s),r-=this.spacing+o):(a.push(Bw.pool.create(e,t)),r=n||Number.POSITIVE_INFINITY,t=[s],r-=o)}t.length&&a.push(Bw.pool.create(e,t))}else a.push(Bw.pool.create(e,i));a.forEach(e=>{e.cells.forEach(i=>{if(e.min=Math.max(e.min,i.getMinimumSize(t)),e.max=Math.min(e.max,i.getMaximumSize(t)),i.effectiveAlign===tw.ORIGIN){const n=i.getOriginBounds();e.minOrigin=Math.min(n[t.minCoordinate],e.minOrigin),e.maxOrigin=Math.max(n[t.maxCoordinate],e.maxOrigin)}}),isFinite(e.minOrigin)&&isFinite(e.maxOrigin)?e.size=Math.max(e.min,e.maxOrigin-e.minOrigin):e.size=e.min});const o=Math.max(...a.map(e=>e.getMinimumSize(this.spacing))),l=_.sum(a.map(e=>e.size))+(a.length-1)*this.lineSpacing,h=this.wrap?s:o,u=Math.max(o,n||0),c=Math.max(l,r||0),d=this.layoutOriginProperty.value[e.coordinate],p=this.layoutOriginProperty.value[e.opposite.coordinate];a.forEach(t=>{const i=_.sum(t.cells.map(t=>t.getMinimumSize(e))),n=this.spacing*(t.cells.length-1);let r,s=u-i-n;for(t.cells.forEach(t=>{t.size=t.getMinimumSize(e)});s>1e-7&&(r=t.cells.filter(t=>0!==t.effectiveGrow&&t.size<t.getMaximumSize(e)-1e-7)).length;){const t=_.sum(r.map(e=>e.effectiveGrow)),i=Math.min(Math.min(...r.map(t=>(t.getMaximumSize(e)-t.size)/t.effectiveGrow)),s/t);r.forEach(e=>{e.size+=i*e.effectiveGrow}),s-=i*t}t.cells.forEach(t=>t.attemptPreferredSize(e,t.size));const a=this._justify.spacingFunctionFactory(s,t.cells.length);let o=d;t.cells.forEach((t,i)=>{o+=a(i),i>0&&(o+=this.spacing),t.positionStart(e,o),t.lastAvailableBounds[e.minCoordinate]=o,t.lastAvailableBounds[e.maxCoordinate]=o+t.size,o+=t.size})});const m=c-l,g=(a[0].hasOrigin()?a[0].minOrigin:0)+p;let f=g;if(null===this._justifyLines)a.forEach(e=>{e.size+=m/a.length}),a.forEach(e=>{e.position=f,f+=e.size+this.lineSpacing});else{const e=this._justifyLines.spacingFunctionFactory(m,a.length);a.forEach((t,i)=>{f+=e(i),t.position=f,f+=t.size+this.lineSpacing})}a.forEach(e=>e.cells.forEach(i=>{i.reposition(t,e.size,e.position,i.effectiveStretch,-e.minOrigin,i.effectiveAlign)}));const y=d,E=d+u,v=g,A=g+c;this.layoutBoundsProperty.value=Zl.oriented(e,y,v,E,A),this.minimumWidthProperty.value=e===Ql.HORIZONTAL?h:l,this.minimumHeightProperty.value=e===Ql.HORIZONTAL?l:h,this.finishedLayoutEmitter.emit(),a.forEach(e=>e.clean())}get justify(){const e=aw.internalToJustify(this._orientation,this._justify);return e}set justify(e){const t=aw.justifyToInternal(this._orientation,e);this._justify!==t&&(this._justify=t,this.updateLayoutAutomatically())}get justifyLines(){if(null===this._justifyLines)return null;{const e=aw.internalToJustify(this._orientation,this._justifyLines);return e}}set justifyLines(e){const t=null===e?null:aw.justifyToInternal(this._orientation.opposite,e);this._justifyLines!==t&&(this._justifyLines=t,this.updateLayoutAutomatically())}get wrap(){return this._wrap}set wrap(e){this._wrap!==e&&(this._wrap=e,this.updateLayoutAutomatically())}get spacing(){return this._spacing}set spacing(e){this._spacing!==e&&(this._spacing=e,this.updateLayoutAutomatically())}get lineSpacing(){return this._lineSpacing}set lineSpacing(e){this._lineSpacing!==e&&(this._lineSpacing=e,this.updateLayoutAutomatically())}insertCell(e,t){t.orientation=this.orientation,this.cells.splice(e,0,t),this.addNode(t.node),t.changedEmitter.addListener(this._updateLayoutListener),this.updateLayoutAutomatically()}removeCell(e){rm(this.cells,e),this.removeNode(e.node),e.changedEmitter.removeListener(this._updateLayoutListener),this.updateLayoutAutomatically()}reorderCells(e,t,i){this.cells.splice(t,i-t+1,...e),this.updateLayoutAutomatically()}getPreferredProperty(e){return e===Ql.HORIZONTAL?this.preferredWidthProperty:this.preferredHeightProperty}dispose(){this.lock(),this.cells.forEach(e=>this.removeCell(e)),this.displayedCells=[],super.dispose(),this.unlock()}static create(e,t){return new Ow(e,t)}}Lg.register("FlowConstraint",Ow);const qw=[...ww,...Dw.filter(e=>"excludeInvisible"!==e)],Yw={orientation:"horizontal",spacing:0,align:"center",stretch:!1};class Hw extends Tw{constructor(e){const t=Vo()({excludeInvisibleChildrenFromBounds:!0,resize:!0,disabledOpacity:Bg.DISABLED_OPACITY},e);super(),_defineProperty(this,"_cellMap",new Map),this._constraint=new Ow(this,{preferredWidthProperty:this.localPreferredWidthProperty,preferredHeightProperty:this.localPreferredHeightProperty,minimumWidthProperty:this.localMinimumWidthProperty,minimumHeightProperty:this.localMinimumHeightProperty,layoutOriginProperty:this.layoutOriginProperty,orientation:Yw.orientation,spacing:Yw.spacing,align:Yw.align,stretch:Yw.stretch,excludeInvisible:!1}),this.onChildInserted=this.onFlowBoxChildInserted.bind(this),this.onChildRemoved=this.onFlowBoxChildRemoved.bind(this),this.onChildrenReordered=this.onFlowBoxChildrenReordered.bind(this),this.onChildrenChanged=this.onFlowBoxChildrenChanged.bind(this),this.childInsertedEmitter.addListener(this.onChildInserted),this.childRemovedEmitter.addListener(this.onChildRemoved),this.childrenReorderedEmitter.addListener(this.onChildrenReordered),this.childrenChangedEmitter.addListener(this.onChildrenChanged);const i=_.omit(t,sv),n=_.pick(t,sv);this._constraint.lock(),this.mutate(i),this._constraint.unlock(),this._constraint.updateLayout(),this.mutate(n),this.linkLayoutBounds()}onFlowBoxChildInserted(e,t){const i=new Iw(this._constraint,e,this._constraint.createLayoutProxy(e));this._cellMap.set(e,i),this._constraint.insertCell(t,i)}onFlowBoxChildRemoved(e){const t=this._cellMap.get(e);this._cellMap.delete(e),this._constraint.removeCell(t),t.dispose()}onFlowBoxChildrenReordered(e,t){this._constraint.reorderCells(this._children.slice(e,t+1).map(e=>this._cellMap.get(e)),e,t)}onFlowBoxChildrenChanged(){this._constraint.updateLayoutAutomatically()}getCell(e){const t=this._cellMap.get(e);return t}get orientation(){return this._constraint.orientation}set orientation(e){this._constraint.orientation=e}get spacing(){return this._constraint.spacing}set spacing(e){this._constraint.spacing=e}get lineSpacing(){return this._constraint.lineSpacing}set lineSpacing(e){this._constraint.lineSpacing=e}get justify(){return this._constraint.justify}set justify(e){this._constraint.justify=e}get justifyLines(){return this._constraint.justifyLines}set justifyLines(e){this._constraint.justifyLines=e}get wrap(){return this._constraint.wrap}set wrap(e){this._constraint.wrap=e}get align(){return this._constraint.align}set align(e){this._constraint.align=e}get stretch(){return this._constraint.stretch}set stretch(e){this._constraint.stretch=e}get grow(){return this._constraint.grow}set grow(e){this._constraint.grow=e}get margin(){return this._constraint.margin}set margin(e){this._constraint.margin=e}get xMargin(){return this._constraint.xMargin}set xMargin(e){this._constraint.xMargin=e}get yMargin(){return this._constraint.yMargin}set yMargin(e){this._constraint.yMargin=e}get leftMargin(){return this._constraint.leftMargin}set leftMargin(e){this._constraint.leftMargin=e}get rightMargin(){return this._constraint.rightMargin}set rightMargin(e){this._constraint.rightMargin=e}get topMargin(){return this._constraint.topMargin}set topMargin(e){this._constraint.topMargin=e}get bottomMargin(){return this._constraint.bottomMargin}set bottomMargin(e){this._constraint.bottomMargin=e}get minContentWidth(){return this._constraint.minContentWidth}set minContentWidth(e){this._constraint.minContentWidth=e}get minContentHeight(){return this._constraint.minContentHeight}set minContentHeight(e){this._constraint.minContentHeight=e}get maxContentWidth(){return this._constraint.maxContentWidth}set maxContentWidth(e){this._constraint.maxContentWidth=e}get maxContentHeight(){return this._constraint.maxContentHeight}set maxContentHeight(e){this._constraint.maxContentHeight=e}dispose(){this._constraint.lock(),this.childInsertedEmitter.removeListener(this.onChildInserted),this.childRemovedEmitter.removeListener(this.onChildRemoved),this.childrenReorderedEmitter.removeListener(this.onChildrenReordered),this.childrenChangedEmitter.removeListener(this.onChildrenChanged);for(const e of this._cellMap.values())e.dispose();super.dispose()}setOrientation(e){return this.orientation=e,this}getOrientation(){return this.orientation}setSpacing(e){return this.spacing=e,this}getSpacing(){return this.spacing}setAlign(e){return this.align=e,this}getAlign(){return this.align}setResize(e){return this.resize=e,this}isResize(){return this.resize}getHelperNode(){return bw.createHelperNode(this.constraint.displayedCells,this.constraint.layoutBoundsProperty.value,e=>{let t="";const i=Ql.fromLayoutOrientation(e.orientation);return t+=`align: ${tw.internalToAlign(i,e.effectiveAlign)}\n`,t+=`stretch: ${e.effectiveStretch}\n`,t+=`grow: ${e.effectiveGrow}\n`,t})}mutate(e){return super.mutate(e)}}_defineProperty(Hw,"DEFAULT_FLOW_BOX_OPTIONS",Yw),Hw.prototype._mutatorKeys=[...kv,...qw,...cv.prototype._mutatorKeys],Lg.register("FlowBox",Hw);const Gw=["xAlign","yAlign","stretch","xStretch","yStretch","grow","xGrow","yGrow"].concat(Vw),Fw=bv(e=>class extends(Nw(e)){constructor(){super(...arguments),_defineProperty(this,"_xAlign",null),_defineProperty(this,"_yAlign",null),_defineProperty(this,"_xStretch",null),_defineProperty(this,"_yStretch",null),_defineProperty(this,"_xGrow",null),_defineProperty(this,"_yGrow",null)}mutateConfigurable(e){super.mutateConfigurable(e),Ko(e,["stretch"],["xStretch","yStretch"]),Ko(e,["grow"],["xGrow","yGrow"]),NA(this,Gw,e)}setConfigToBaseDefault(){this._xAlign=tw.CENTER,this._yAlign=tw.CENTER,this._xStretch=!1,this._yStretch=!1,this._xGrow=0,this._yGrow=0,super.setConfigToBaseDefault()}setConfigToInherit(){this._xAlign=null,this._yAlign=null,this._xStretch=null,this._yStretch=null,this._xGrow=null,this._yGrow=null,super.setConfigToInherit()}get xAlign(){const e=null===this._xAlign?null:this._xAlign.horizontal;return e}set xAlign(e){const t=tw.horizontalAlignToInternal(e);this._xAlign!==t&&(this._xAlign=t,this.changedEmitter.emit())}get yAlign(){const e=null===this._yAlign?null:this._yAlign.vertical;return e}set yAlign(e){const t=tw.verticalAlignToInternal(e);this._yAlign!==t&&(this._yAlign=t,this.changedEmitter.emit())}get grow(){return this._xGrow}set grow(e){this._xGrow===e&&this._yGrow===e||(this._xGrow=e,this._yGrow=e,this.changedEmitter.emit())}get xGrow(){return this._xGrow}set xGrow(e){this._xGrow!==e&&(this._xGrow=e,this.changedEmitter.emit())}get yGrow(){return this._yGrow}set yGrow(e){this._yGrow!==e&&(this._yGrow=e,this.changedEmitter.emit())}get stretch(){return this._xStretch}set stretch(e){this._xStretch===e&&this._yStretch===e||(this._xStretch=e,this._yStretch=e,this.changedEmitter.emit())}get xStretch(){return this._xStretch}set xStretch(e){this._xStretch!==e&&(this._xStretch=e,this.changedEmitter.emit())}get yStretch(){return this._yStretch}set yStretch(e){this._yStretch!==e&&(this._yStretch=e,this.changedEmitter.emit())}});Lg.register("GridConfigurable",Fw);const zw=Fw;class Uw extends(zw(bw)){constructor(e,t,i){super(e,t,i),this.gridConstraint=e,this.setOptions(t.layoutOptions),this.onLayoutOptionsChange()}get effectiveXAlign(){return null!==this._xAlign?this._xAlign:this.gridConstraint._xAlign}get effectiveYAlign(){return null!==this._yAlign?this._yAlign:this.gridConstraint._yAlign}getEffectiveAlign(e){return e===Ql.HORIZONTAL?this.effectiveXAlign:this.effectiveYAlign}get effectiveXGrow(){return null!==this._xGrow?this._xGrow:this.gridConstraint._xGrow}get effectiveYGrow(){return null!==this._yGrow?this._yGrow:this.gridConstraint._yGrow}getEffectiveGrow(e){return e===Ql.HORIZONTAL?this.effectiveXGrow:this.effectiveYGrow}get effectiveXStretch(){return null!==this._xStretch?this._xStretch:this.gridConstraint._xStretch}get effectiveYStretch(){return null!==this._yStretch?this._yStretch:this.gridConstraint._yStretch}getEffectiveStretch(e){return e===Ql.HORIZONTAL?this.effectiveXStretch:this.effectiveYStretch}onLayoutOptionsChange(){this.setOptions(this.node.layoutOptions),super.onLayoutOptionsChange()}setOptions(e){const t=Vo()({column:0,row:0,horizontalSpan:1,verticalSpan:1},e);this.setConfigToInherit(),this.position=new Aw(t.column,t.row),this.size=new Aw(t.horizontalSpan,t.verticalSpan),this.mutateConfigurable(t)}containsIndex(e,t){const i=this.position.get(e),n=this.size.get(e);return t>=i&&t<i+n}containsRow(e){return this.containsIndex(Ql.VERTICAL,e)}containsColumn(e){return this.containsIndex(Ql.HORIZONTAL,e)}getIndices(e){const t=this.position.get(e),i=this.size.get(e);return _.range(t,t+i)}}Lg.register("GridCell",Uw);class Ww extends Pw{constructor(e,t,i){super(),this.initialize(e,t,i)}initialize(e,t,i){return this.index=e,this.cells=t,this.grow=i,this.initializeLayoutLine(),this}freeToPool(){Ww.pool.freeToPool(this)}clean(){this.cells.length=0,this.freeToPool()}}_defineProperty(Ww,"pool",new Mo(Ww,{defaultArguments:[0,[],0]})),Lg.register("GridLine",Ww);const Xw=[...Gw,"excludeInvisible","spacing","xSpacing","ySpacing"];class jw extends(zw(Cw)){constructor(e,t){super(e,t),_defineProperty(this,"cells",new Set),_defineProperty(this,"displayedCells",[]),_defineProperty(this,"displayedLines",new Aw(new Map,new Map)),_defineProperty(this,"_spacing",new Aw(0,0)),this.setConfigToBaseDefault(),this.mutateConfigurable(t),NA(this,Xw,t),this.changedEmitter.addListener(this._updateLayoutListener)}layout(){super.layout();const e=this.filterLayoutCells([...this.cells]);if(this.displayedCells=e,!e.length)return this.layoutBoundsProperty.value=Zl.NOTHING,this.minimumWidthProperty.value=null,this.minimumHeightProperty.value=null,void this.displayedLines.forEach(e=>e.clear());const t=new Aw(0,0),i=new Aw(this.preferredWidthProperty.value,this.preferredHeightProperty.value),n=new Zl(0,0,0,0);[Ql.HORIZONTAL,Ql.VERTICAL].forEach(r=>{const s=this._spacing.get(r),a=this.displayedLines.get(r);a.forEach(e=>e.clean()),a.clear();const o=_.sortedUniq(_.sortBy(_.flatten(e.map(e=>e.getIndices(r))))).map(t=>{const i=_.filter(e,e=>e.containsIndex(r,t)),n=Math.max(...i.map(e=>e.getEffectiveGrow(r))),s=Ww.pool.create(t,i,n);return a.set(t,s),s}),l=o.slice(0,-1).map(e=>"number"==typeof s?s:s[e.index]);e.forEach(e=>{if(1===e.size.get(r)){const t=a.get(e.position.get(r));if(t.min=Math.max(t.min,e.getMinimumSize(r)),t.max=Math.min(t.max,e.getMaximumSize(r)),e.getEffectiveAlign(r)===tw.ORIGIN){const i=e.getOriginBounds();t.minOrigin=Math.min(i[r.minCoordinate],t.minOrigin),t.maxOrigin=Math.max(i[r.maxCoordinate],t.maxOrigin)}}}),e.forEach(e=>{if(e.size.get(r)>1){const t=e.getIndices(r).map(e=>a.get(e)),i=_.sum(t.map(e=>e.min)),n=e.getMinimumSize(r);if(n>i){const e=(n-i)/t.length;t.forEach(t=>{t.min+=e})}}}),o.forEach(e=>{e.hasOrigin()?e.size=Math.max(e.min,e.maxOrigin-e.minOrigin):e.size=e.min});const h=_.sum(o.map(e=>e.size))+_.sum(l);t.set(r,h);const u=Math.max(h,i.get(r)||0);let c,d=u-h;for(;d>1e-7&&(c=o.filter(e=>e.grow>0&&e.size<e.max-1e-7)).length;){const e=_.sum(c.map(e=>e.grow)),t=Math.min(Math.min(...c.map(e=>(e.max-e.size)/e.grow)),d/e);c.forEach(e=>{e.size+=t*e.grow}),d-=t*e}const p=(o[0].hasOrigin()?o[0].minOrigin:0)+this.layoutOriginProperty.value[r.coordinate];n[r.minCoordinate]=p,n[r.maxCoordinate]=p+u,o.forEach((e,t)=>{const i=_.sum(o.slice(0,t).map(e=>e.size)),n=_.sum(l.slice(0,t));e.position=p+i+n}),e.forEach(e=>{const t=e.position.get(r),i=e.size.get(r),s=t+i-1,h=e.getIndices(r).map(e=>a.get(e)),u=a.get(t);let c=0;t!==s&&o.slice(0,-1).forEach((e,i)=>{e.index>=t&&e.index<s&&(c+=l[i])});const d=_.sum(h.map(e=>e.size))+c,p=u.position,m=e.reposition(r,d,p,e.getEffectiveStretch(r),-u.minOrigin,e.getEffectiveAlign(r));n[r.minCoordinate]=Math.min(n[r.minCoordinate],m[r.minCoordinate]),n[r.maxCoordinate]=Math.max(n[r.maxCoordinate],m[r.maxCoordinate])})}),this.layoutBoundsProperty.value=n,this.minimumWidthProperty.value=t.horizontal,this.minimumHeightProperty.value=t.vertical,this.finishedLayoutEmitter.emit()}get spacing(){return this.xSpacing}set spacing(e){this._spacing.get(Ql.HORIZONTAL)===e&&this._spacing.get(Ql.VERTICAL)===e||(this._spacing.set(Ql.HORIZONTAL,e),this._spacing.set(Ql.VERTICAL,e),this.updateLayoutAutomatically())}get xSpacing(){return this._spacing.get(Ql.HORIZONTAL)}set xSpacing(e){this._spacing.get(Ql.HORIZONTAL)!==e&&(this._spacing.set(Ql.HORIZONTAL,e),this.updateLayoutAutomatically())}get ySpacing(){return this._spacing.get(Ql.VERTICAL)}set ySpacing(e){this._spacing.get(Ql.VERTICAL)!==e&&(this._spacing.set(Ql.VERTICAL,e),this.updateLayoutAutomatically())}addCell(e){this.cells.add(e),this.addNode(e.node),e.changedEmitter.addListener(this._updateLayoutListener),this.updateLayoutAutomatically()}removeCell(e){this.cells.delete(e),this.removeNode(e.node),e.changedEmitter.removeListener(this._updateLayoutListener),this.updateLayoutAutomatically()}dispose(){this.lock(),[...this.cells].forEach(e=>this.removeCell(e)),this.displayedLines.forEach(e=>e.clear()),this.displayedCells=[],super.dispose(),this.unlock()}getIndices(e){const t=[];return this.cells.forEach(i=>{t.push(...i.getIndices(e))}),_.sortedUniq(_.sortBy(t))}getCell(e,t){return _.find([...this.cells],i=>i.containsRow(e)&&i.containsColumn(t))||null}getCellFromNode(e){return _.find([...this.cells],t=>t.node===e)||null}getCells(e,t){return _.filter([...this.cells],i=>i.containsIndex(e,t))}static create(e,t){return new jw(e,t)}}Lg.register("GridConstraint",jw);const Qw=[...ww,...Xw.filter(e=>"excludeInvisible"!==e),"rows","columns","autoRows","autoColumns"];class Kw extends Tw{constructor(e){const t=Vo()({excludeInvisibleChildrenFromBounds:!0,resize:!0},e);super(),_defineProperty(this,"_cellMap",new Map),_defineProperty(this,"_autoRows",null),_defineProperty(this,"_autoColumns",null),_defineProperty(this,"_autoLockCount",0),this._constraint=new jw(this,{preferredWidthProperty:this.localPreferredWidthProperty,preferredHeightProperty:this.localPreferredHeightProperty,minimumWidthProperty:this.localMinimumWidthProperty,minimumHeightProperty:this.localMinimumHeightProperty,layoutOriginProperty:this.layoutOriginProperty,excludeInvisible:!1}),this.onChildInserted=this.onGridBoxChildInserted.bind(this),this.onChildRemoved=this.onGridBoxChildRemoved.bind(this),this.onChildVisibilityToggled=this.updateAllAutoLines.bind(this),this.childInsertedEmitter.addListener(this.onChildInserted),this.childRemovedEmitter.addListener(this.onChildRemoved);const i=_.omit(t,sv),n=_.pick(t,sv);this._constraint.lock(),this.mutate(i),this._constraint.unlock(),this._constraint.updateLayout(),this.mutate(n),this.linkLayoutBounds()}setLines(e,t){const i=[];for(let n=0;n<t.length;n++){const r=t[n];for(let t=0;t<r.length;t++){const s=r[t];null!==s&&(i.push(s),s.mutateLayoutOptions({[e.line]:n,[e.opposite.line]:t}))}}this.children=i}getLines(e){const t=[];for(const i of this._cellMap.values()){const n=i.position.get(e),r=i.position.get(e.opposite);for(;t.length<n+1;)t.push([]);for(;t[n].length<r+1;)t[n].push(null);t[n][r]=i.node}return t}set rows(e){this.setLines(Ql.VERTICAL,e)}get rows(){return this.getLines(Ql.VERTICAL)}set columns(e){this.setLines(Ql.HORIZONTAL,e)}get columns(){return this.getLines(Ql.HORIZONTAL)}getNodeAt(e,t){const i=this.constraint.getCell(e,t);return i?i.node:null}getRowOfNode(e){return this.constraint.getCellFromNode(e).position.vertical}getColumnOfNode(e){return this.constraint.getCellFromNode(e).position.horizontal}getNodesInRow(e){return this.constraint.getCells(Ql.VERTICAL,e).map(e=>e.node)}getNodesInColumn(e){return this.constraint.getCells(Ql.HORIZONTAL,e).map(e=>e.node)}addRow(e){return this.rows=[...this.rows,e],this}addColumn(e){return this.columns=[...this.columns,e],this}insertRow(e,t){return this.rows=[...this.rows.slice(0,e),t,...this.rows.slice(e)],this}insertColumn(e,t){return this.columns=[...this.columns.slice(0,e),t,...this.columns.slice(e)],this}removeRow(e){return this.rows=[...this.rows.slice(0,e),...this.rows.slice(e+1)],this}removeColumn(e){return this.columns=[...this.columns.slice(0,e),...this.columns.slice(e+1)],this}set autoRows(e){this._autoRows!==e&&(this._autoRows=e,this.updateAutoRows())}get autoRows(){return this._autoRows}set autoColumns(e){this._autoColumns!==e&&(this._autoColumns=e,this.updateAutoColumns())}get autoColumns(){return this._autoColumns}updateAutoLines(e,t){if(null!==t&&0===this._autoLockCount){let i=0;this.constraint.lock(),this.children.filter(e=>e.bounds.isValid()&&(!this._constraint.excludeInvisible||e.visible)).forEach((n,r)=>{const s=r%t,a=Math.floor(r/t);n.layoutOptions&&n.layoutOptions[e.line]===s&&n.layoutOptions[e.opposite.line]===a&&1===n.layoutOptions.horizontalSpan&&1===n.layoutOptions.verticalSpan||(i++,n.mutateLayoutOptions({[e.line]:r%t,[e.opposite.line]:Math.floor(r/t),horizontalSpan:1,verticalSpan:1}))}),this.constraint.unlock(),i>0&&this.constraint.updateLayoutAutomatically()}}updateAutoRows(){this.updateAutoLines(Ql.VERTICAL,this.autoRows)}updateAutoColumns(){this.updateAutoLines(Ql.HORIZONTAL,this.autoColumns)}updateAllAutoLines(){this.updateAutoRows(),this.updateAutoColumns()}setChildren(e){const t=this.getChildren();return this._autoLockCount++,super.setChildren(e),this._autoLockCount--,_.isEqual(t,e)||this.updateAllAutoLines(),this}onGridBoxChildInserted(e,t){e.visibleProperty.lazyLink(this.onChildVisibilityToggled);const i=new Uw(this._constraint,e,this._constraint.createLayoutProxy(e));this._cellMap.set(e,i),this._constraint.addCell(i),this.updateAllAutoLines()}onGridBoxChildRemoved(e){const t=this._cellMap.get(e);this._cellMap.delete(e),this._constraint.removeCell(t),t.dispose(),this.updateAllAutoLines(),e.visibleProperty.unlink(this.onChildVisibilityToggled)}mutate(e){return Ko(e,["rows"],["columns"],["children","autoRows","autoColumns"]),super.mutate(e)}get spacing(){return this._constraint.spacing}set spacing(e){this._constraint.spacing=e}get xSpacing(){return this._constraint.xSpacing}set xSpacing(e){this._constraint.xSpacing=e}get ySpacing(){return this._constraint.ySpacing}set ySpacing(e){this._constraint.ySpacing=e}get xAlign(){return this._constraint.xAlign}set xAlign(e){this._constraint.xAlign=e}get yAlign(){return this._constraint.yAlign}set yAlign(e){this._constraint.yAlign=e}get grow(){return this._constraint.grow}set grow(e){this._constraint.grow=e}get xGrow(){return this._constraint.xGrow}set xGrow(e){this._constraint.xGrow=e}get yGrow(){return this._constraint.yGrow}set yGrow(e){this._constraint.yGrow=e}get stretch(){return this._constraint.stretch}set stretch(e){this._constraint.stretch=e}get xStretch(){return this._constraint.xStretch}set xStretch(e){this._constraint.xStretch=e}get yStretch(){return this._constraint.yStretch}set yStretch(e){this._constraint.yStretch=e}get margin(){return this._constraint.margin}set margin(e){this._constraint.margin=e}get xMargin(){return this._constraint.xMargin}set xMargin(e){this._constraint.xMargin=e}get yMargin(){return this._constraint.yMargin}set yMargin(e){this._constraint.yMargin=e}get leftMargin(){return this._constraint.leftMargin}set leftMargin(e){this._constraint.leftMargin=e}get rightMargin(){return this._constraint.rightMargin}set rightMargin(e){this._constraint.rightMargin=e}get topMargin(){return this._constraint.topMargin}set topMargin(e){this._constraint.topMargin=e}get bottomMargin(){return this._constraint.bottomMargin}set bottomMargin(e){this._constraint.bottomMargin=e}get minContentWidth(){return this._constraint.minContentWidth}set minContentWidth(e){this._constraint.minContentWidth=e}get minContentHeight(){return this._constraint.minContentHeight}set minContentHeight(e){this._constraint.minContentHeight=e}get maxContentWidth(){return this._constraint.maxContentWidth}set maxContentWidth(e){this._constraint.maxContentWidth=e}get maxContentHeight(){return this._constraint.maxContentHeight}set maxContentHeight(e){this._constraint.maxContentHeight=e}setExcludeInvisibleChildrenFromBounds(e){super.setExcludeInvisibleChildrenFromBounds(e),this.updateAllAutoLines()}dispose(){this._constraint.lock(),this.childInsertedEmitter.removeListener(this.onChildInserted),this.childRemovedEmitter.removeListener(this.onChildRemoved);for(const e of this._cellMap.values())e.dispose(),e.node.visibleProperty.unlink(this.onChildVisibilityToggled);super.dispose()}getHelperNode(){return bw.createHelperNode(this.constraint.displayedCells,this.constraint.layoutBoundsProperty.value,e=>{let t="";return t+=`row: ${e.position.vertical}\n`,t+=`column: ${e.position.horizontal}\n`,e.size.horizontal>1&&(t+=`horizontalSpan: ${e.size.horizontal}\n`),e.size.vertical>1&&(t+=`verticalSpan: ${e.size.vertical}\n`),t+=`xAlign: ${tw.internalToAlign(Ql.HORIZONTAL,e.effectiveXAlign)}\n`,t+=`yAlign: ${tw.internalToAlign(Ql.VERTICAL,e.effectiveYAlign)}\n`,t+=`xStretch: ${e.effectiveXStretch}\n`,t+=`yStretch: ${e.effectiveYStretch}\n`,t+=`xGrow: ${e.effectiveXGrow}\n`,t+=`yGrow: ${e.effectiveYGrow}\n`,t})}}Kw.prototype._mutatorKeys=[...kv,...Qw,...cv.prototype._mutatorKeys],Lg.register("GridBox",Kw);Lg.register("GridBackgroundNode",class extends cv{constructor(e,t){Ko(t,["createCellBackground"],["fill","stroke"]);const i=Vo()({fill:"white",stroke:"black",createCellBackground:e=>xA.bounds(e.lastAvailableBounds,{fill:i.fill,stroke:i.stroke})},t);super(),this.constraint=e,this.createCellBackground=i.createCellBackground,this.layoutListener=this.update.bind(this),this.constraint.finishedLayoutEmitter.addListener(this.layoutListener),this.update(),this.mutate(i)}update(){this.children=this.constraint.displayedCells.map(this.createCellBackground).filter(_.identity)}dispose(){this.constraint.finishedLayoutEmitter.removeListener(this.layoutListener),super.dispose()}});class Zw extends gw{constructor(e,t,i){super(e),this.lock(),this.nodes=t,this.cells=t.map(e=>new fw(this,e,null)),this.layoutCallback=i,this.nodes.forEach(e=>this.addNode(e,!1)),this.unlock(),this.updateLayout()}layout(){if(super.layout(),!_.some(this.cells,e=>!e.isConnected())){const e=this.cells.map(e=>e.proxy);this.layoutCallback.apply(null,e),this.finishedLayoutEmitter.emit()}}dispose(){this.cells.forEach(e=>e.dispose()),super.dispose()}static create(e,t,i){return new Zw(e,t,i)}}Lg.register("ManualConstraint",Zw);class Jw extends gw{constructor(e,t,i){super(e),this.lock(),this.nodes=t,this.cells=t.map(e=>new fw(this,e,null)),this.layoutCallback=i,this.nodes.forEach(e=>this.addNode(e,!1)),this.unlock(),this.updateLayout()}layout(){super.layout();const e=this.cells.map(e=>e.isConnected()?e.proxy:null);this.layoutCallback.apply(null,e),this.finishedLayoutEmitter.emit()}dispose(){this.cells.forEach(e=>e.dispose()),super.dispose()}static create(e,t,i){return new Jw(e,t,i)}}Lg.register("RelaxedManualConstraint",Jw);const $w=Iv(cv);class eT extends $w{constructor(e,t){const i=Vo()({children:[e]},t);super({sizable:!1}),_defineProperty(this,"_xSet",!1),_defineProperty(this,"_ySet",!1),_defineProperty(this,"_contentBoundsListener",_.noop),this._content=e,this._alignBounds=null,this._xAlign="center",this._yAlign="center",this._leftMargin=0,this._rightMargin=0,this._topMargin=0,this._bottomMargin=0,this._group=null,this._contentBoundsListener=this.invalidateAlignment.bind(this),this._alignBoundsProperty=null,this._alignBoundsPropertyListener=_.noop,Ko(i,["alignBounds"],["alignBoundsProperty"]),null!=t&&t.alignBoundsProperty&&(this._alignBoundsProperty=t.alignBoundsProperty,i.alignBounds=this._alignBoundsProperty.value,this._alignBoundsPropertyListener=e=>{this.alignBounds=e},this._alignBoundsProperty.lazyLink(this._alignBoundsPropertyListener)),this.localBounds=new Zl(0,0,0,0),this.constraint=new tT(this,e),this._content.boundsProperty.link(this._contentBoundsListener),this.mutate(i),pS.multilink([this.localPreferredWidthProperty,this.localPreferredHeightProperty],(e,t)=>{if(null!==e||null!==t){const i=this._alignBounds||new Zl(0,0,0,0);e&&(i.minX=0,i.maxX=e,this._xSet=!0),t&&(i.minY=0,i.maxY=t,this._ySet=!0),this._alignBounds=i,this.constraint.updateLayout()}})}invalidateAlignment(){this._group&&this._group.onAlignBoxResized(this),this.constraint.updateLayout()}setAlignBounds(e){return this._xSet=!0,this._ySet=!0,this._alignBounds===e||e&&this._alignBounds&&e.equals(this._alignBounds)||(this._alignBounds=e,this.constraint.updateLayout()),this}set alignBounds(e){this.setAlignBounds(e)}get alignBounds(){return this.getAlignBounds()}getAlignBounds(){return this._alignBounds}setGroup(e){return this._group!==e&&(this._group&&this._group.removeAlignBox(this),this._group=e,this._group&&this._group.addAlignBox(this)),this}set group(e){this.setGroup(e)}get group(){return this.getGroup()}getGroup(){return this._group}setXAlign(e){return this._xAlign!==e&&(this._xAlign=e,this.invalidateAlignment()),this}set xAlign(e){this.setXAlign(e)}get xAlign(){return this.getXAlign()}getXAlign(){return this._xAlign}setYAlign(e){return this._yAlign!==e&&(this._yAlign=e,this.invalidateAlignment()),this}set yAlign(e){this.setYAlign(e)}get yAlign(){return this.getYAlign()}getYAlign(){return this._yAlign}setMargin(e){return this._leftMargin===e&&this._rightMargin===e&&this._topMargin===e&&this._bottomMargin===e||(this._leftMargin=this._rightMargin=this._topMargin=this._bottomMargin=e,this.invalidateAlignment()),this}set margin(e){this.setMargin(e)}get margin(){return this.getMargin()}getMargin(){return this._leftMargin}setXMargin(e){return this._leftMargin===e&&this._rightMargin===e||(this._leftMargin=this._rightMargin=e,this.invalidateAlignment()),this}set xMargin(e){this.setXMargin(e)}get xMargin(){return this.getXMargin()}getXMargin(){return this._leftMargin}setYMargin(e){return this._topMargin===e&&this._bottomMargin===e||(this._topMargin=this._bottomMargin=e,this.invalidateAlignment()),this}set yMargin(e){this.setYMargin(e)}get yMargin(){return this.getYMargin()}getYMargin(){return this._topMargin}setLeftMargin(e){return this._leftMargin!==e&&(this._leftMargin=e,this.invalidateAlignment()),this}set leftMargin(e){this.setLeftMargin(e)}get leftMargin(){return this.getLeftMargin()}getLeftMargin(){return this._leftMargin}setRightMargin(e){return this._rightMargin!==e&&(this._rightMargin=e,this.invalidateAlignment()),this}set rightMargin(e){this.setRightMargin(e)}get rightMargin(){return this.getRightMargin()}getRightMargin(){return this._rightMargin}setTopMargin(e){return this._topMargin!==e&&(this._topMargin=e,this.invalidateAlignment()),this}set topMargin(e){this.setTopMargin(e)}get topMargin(){return this.getTopMargin()}getTopMargin(){return this._topMargin}setBottomMargin(e){return this._bottomMargin!==e&&(this._bottomMargin=e,this.invalidateAlignment()),this}set bottomMargin(e){this.setBottomMargin(e)}get bottomMargin(){return this.getBottomMargin()}getBottomMargin(){return this._bottomMargin}getContent(){return this._content}get content(){return this.getContent()}getContentBounds(){const e=this._content.bounds;return new Zl(e.left-this._leftMargin,e.top-this._topMargin,e.right+this._rightMargin,e.bottom+this._bottomMargin)}setAdjustedLocalBounds(e){if(this._xSet&&this._ySet)this.localBounds=e;else if(this._xSet){const t=this.getContentBounds();this.localBounds=new Zl(e.minX,t.minY,e.maxX,t.maxY)}else if(this._ySet){const t=this.getContentBounds();this.localBounds=new Zl(t.minX,e.minY,t.maxX,e.maxY)}else this.localBounds=this.getContentBounds()}dispose(){this._alignBoundsProperty&&this._alignBoundsProperty.unlink(this._alignBoundsPropertyListener),this._content.boundsProperty.unlink(this._contentBoundsListener),this._content=new cv,this.group=null,this.constraint.dispose(),super.dispose()}mutate(e){return super.mutate(e)}}class tT extends gw{constructor(e,t){super(e),this.alignBox=e,this.content=t,this.addNode(t),e.isWidthResizableProperty.lazyLink(this._updateLayoutListener),e.isHeightResizableProperty.lazyLink(this._updateLayoutListener)}updateProperty(e,t){const i=this.content[e],n=this.alignBox.localBounds[e]+t;Math.abs(i-n)>1e-5&&(this.content[e]=n)}layout(){super.layout();const e=this.alignBox,t=this.content;if(!t.bounds.isValid())return;const i=e.leftMargin+e.rightMargin,n=e.topMargin+e.bottomMargin;if(null!==e.alignBounds)e.setAdjustedLocalBounds(e.alignBounds);else{const r=t.width+i,s=t.height+n;e.setAdjustedLocalBounds(new Zl(0,0,r,s))}const r=isFinite(t.width)?(xv(t)?t.minimumWidth||0:t.width)+i:null,s=isFinite(t.height)?(Vv(t)?t.minimumHeight||0:t.height)+n:null;t.localBounds.isEmpty()||("center"===e.xAlign?this.updateProperty("centerX",(e.leftMargin-e.rightMargin)/2):"left"===e.xAlign?this.updateProperty("left",e.leftMargin):"right"===e.xAlign?this.updateProperty("right",-e.rightMargin):"stretch"===e.xAlign&&(t.preferredWidth=e.localWidth-e.leftMargin-e.rightMargin,this.updateProperty("left",e.leftMargin)),"center"===e.yAlign?this.updateProperty("centerY",(e.topMargin-e.bottomMargin)/2):"top"===e.yAlign?this.updateProperty("top",e.topMargin):"bottom"===e.yAlign?this.updateProperty("bottom",-e.bottomMargin):"stretch"===e.yAlign&&(t.preferredHeight=e.localHeight-e.topMargin-e.bottomMargin,this.updateProperty("top",e.topMargin))),e.localMinimumWidth=e.widthSizable?r:e.localWidth,e.localMinimumHeight=e.heightSizable?s:e.localHeight}}eT.prototype._mutatorKeys=["alignBounds","xAlign","yAlign","margin","xMargin","yMargin","leftMargin","rightMargin","topMargin","bottomMargin","group"].concat($w.prototype._mutatorKeys),Lg.register("AlignBox",eT);let iT=1;const nT={matchHorizontal:!0,matchVertical:!0};class rT extends Um{constructor(e){const t=Ro()({},nT,e);super(t),this._alignBoxes=[],this._matchHorizontal=t.matchHorizontal,this._matchVertical=t.matchVertical,this._resizeLock=!1,this._maxWidthProperty=new zb(0),this._maxHeightProperty=new zb(0),this.id=iT++}getMaxWidth(){return this._maxWidthProperty.value}get maxWidth(){return this.getMaxWidth()}getMaxWidthProperty(){return this._maxWidthProperty}get maxWidthProperty(){return this.getMaxWidthProperty()}getMaxHeight(){return this._maxHeightProperty.value}get maxHeight(){return this.getMaxHeight()}getMaxHeightProperty(){return this._maxHeightProperty}get maxHeightProperty(){return this.getMaxHeightProperty()}getMaxSizeProperty(e){return e===Ql.HORIZONTAL?this._maxWidthProperty:this._maxHeightProperty}createBox(e,t){return new eT(e,No({group:this},t))}setMatchHorizontal(e){return this._matchHorizontal!==e&&(this._matchHorizontal=e,this.updateLayout()),this}set matchHorizontal(e){this.setMatchHorizontal(e)}get matchHorizontal(){return this.getMatchHorizontal()}getMatchHorizontal(){return this._matchHorizontal}setMatchVertical(e){return this._matchVertical!==e&&(this._matchVertical=e,this.updateLayout()),this}set matchVertical(e){this.setMatchVertical(e)}get matchVertical(){return this.getMatchVertical()}getMatchVertical(){return this._matchVertical}updateLayout(){if(this._resizeLock)return;this._resizeLock=!0;let e=0,t=0;for(let i=0;i<this._alignBoxes.length;i++){const n=this._alignBoxes[i].getContentBounds();!n.isEmpty()&&n.isFinite()&&(e=Math.max(e,n.width),t=Math.max(t,n.height))}if(this._maxWidthProperty.value=e,this._maxHeightProperty.value=t,e>0&&t>0)for(let i=0;i<this._alignBoxes.length;i++)this.setBoxBounds(this._alignBoxes[i],e,t);this._resizeLock=!1}setBoxBounds(e,t,i){let n;if(this._matchVertical&&this._matchHorizontal)n=new Zl(0,0,t,i);else{const r=e.getContentBounds();n=this._matchVertical?new Zl(0,0,isFinite(r.width)?r.width:t,i):this._matchHorizontal?new Zl(0,0,t,isFinite(r.height)?r.height:i):r}e.alignBounds=n}onAlignBoxResized(e){this.updateLayout()}addAlignBox(e){this._alignBoxes.push(e),this.updateLayout()}removeAlignBox(e){rm(this._alignBoxes,e),this.updateLayout()}dispose(){for(let e=this._alignBoxes.length-1;e>=0;e--)this._alignBoxes[e].dispose();super.dispose()}}Lg.register("AlignGroup",rT);class sT extends Hw{constructor(e){super(Vo()({orientation:"horizontal"},e))}onFlowBoxChildInserted(e,t){super.onFlowBoxChildInserted(e,t)}mutate(e){return super.mutate(e)}}Lg.register("HBox",sT);class aT extends Hw{constructor(e){super(Vo()({orientation:"vertical"},e))}onFlowBoxChildInserted(e,t){super.onFlowBoxChildInserted(e,t)}mutate(e){return super.mutate(e)}}Lg.register("VBox",aT);const oT=e=>"element"===e.type.toLowerCase(),lT=e=>"text"===e.type.toLowerCase(),hT={scratchText:new gA(""),himalayaGetAttribute(e,t){if(!t)return null;const i=_.find(t.attributes,t=>t.key===e);return i&&i.value||null},himalayaStyleStringToMap(e){const t=e.split(";"),i={};return t.forEach(e=>{if(e.length>0){const t=e.split(":");i[t[0].trim()]=t[1].trim()}}),i}},uT=hT;Lg.register("RichTextUtils",hT);const cT=bv(e=>class extends e{get isCleanable(){return!0}clean(){const e=this;for(let t=e._children.length-1;t>=0;t--){const i=e._children[t];i.isCleanable&&(e.removeChild(i),i.clean())}e.matrix=Mh.IDENTITY,e.freeToPool()}});Lg.register("RichTextCleanable",cT);const dT=cT;class pT extends(dT(cv)){constructor(e){super(),this.initialize(e)}initialize(e){return this.localBounds=new Zl(0,0,0,e),this}freeToPool(){pT.pool.freeToPool(this)}}_defineProperty(pT,"pool",new Mo(pT)),Lg.register("RichTextVerticalSpacer",pT);const mT=pT;class gT extends(dT(cv)){constructor(e){super(),this.initialize(e)}initialize(e){return this.isLTR=e,this.leftSpacing=0,this.rightSpacing=0,this}addElement(e){const t=this.children.length>0,i=e.width>0,n=e.getScaleVector().x,r=e.leftSpacing*n,s=e.rightSpacing*n;return!(!t&&!i)&&(t?i?(this.isLTR?(e.left=this.localRight+this.rightSpacing+r,this.rightSpacing=s):(e.right=this.localLeft-this.leftSpacing-s,this.leftSpacing=r),this.addChild(e),!0):(this.isLTR?this.rightSpacing+=r+s:this.leftSpacing+=r+s,!1):(this.isLTR?(e.left=0,this.leftSpacing=r,this.rightSpacing=s):(e.right=0,this.leftSpacing=r,this.rightSpacing=s),this.addChild(e),!0))}addExtraBeforeSpacing(e){this.isLTR?this.leftSpacing+=e:this.rightSpacing+=e}freeToPool(){gT.pool.freeToPool(this)}}_defineProperty(gT,"pool",new Mo(gT)),Lg.register("RichTextElement",gT);class fT extends(dT(gA)){constructor(e,t,i,n,r,s,a){super(""),this.initialize(e,t,i,n,r,s,a)}initialize(e,t,i,n,r,s,a){let o="";for(;e.startsWith(" ");)o+=" ",e=e.slice(1);let l="";for(;e.endsWith(" ");)l=" ",e=e.slice(0,e.length-1);this.string=CT.contentToString(e,t),this.boundsMethod=n,this.font=i,this.fill=r,this.stroke=s,this.lineWidth=a;const h=o.length?uT.scratchText.setString(o).setFont(i).width:0,u=l.length?uT.scratchText.setString(l).setFont(i).width:0;return this.leftSpacing=t?h:u,this.rightSpacing=t?u:h,this}clean(){super.clean(),this.fill=null,this.stroke=null}fitsIn(e,t,i){return this.width+(t?i?this.leftSpacing:this.rightSpacing:0)<=e}freeToPool(){fT.pool.freeToPool(this)}}_defineProperty(fT,"pool",new Mo(fT)),Lg.register("RichTextLeaf",fT);class yT extends(dT(cv)){constructor(e){super(),_defineProperty(this,"leftSpacing",0),_defineProperty(this,"rightSpacing",0),this.initialize(e)}initialize(e){return this.addChild(e),this}clean(){super.clean(),this.removeAllChildren()}fitsIn(e){return this.width<=e}freeToPool(){yT.pool.freeToPool(this)}}_defineProperty(yT,"pool",new Mo(yT)),Lg.register("RichTextNode",yT);class ET extends(DS(dT(cv))){constructor(e,t){super(),_defineProperty(this,"fireListener",null),_defineProperty(this,"accessibleInputListener",null),_defineProperty(this,"allowLinksListener",null),this.initialize(e,t,!1),this.mutate({cursor:"pointer",tagName:"a"})}initialize(e,t){return(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&super.initialize(),this.innerContent=e,this.voicingNameResponse=e,"function"==typeof t?(this.fireListener=new Sx({fire:t,tandem:Lm.OPT_OUT}),this.addInputListener(this.fireListener),this.setPDOMAttribute("href","#"),this.setPDOMAttribute("target","_self"),this.accessibleInputListener={click:e=>{e.domEvent&&e.domEvent.preventDefault(),t()}},this.addInputListener(this.accessibleInputListener)):(this.fireListener=new Sx({fire:e=>{e.isFromPDOM()&&e.domEvent.preventDefault(),self._linkEventsHandled&&e.handle(),Sy(t)},tandem:Lm.OPT_OUT}),this.addInputListener(this.fireListener),this.setPDOMAttribute("href",t),this.setPDOMAttribute("target","_blank"),this.allowLinksListener=e=>{this.visible=e},Ay.link(this.allowLinksListener)),this}clean(){super.clean(),this.fireListener&&(this.removeInputListener(this.fireListener),this.fireListener.dispose()),this.fireListener=null,this.accessibleInputListener&&(this.removeInputListener(this.accessibleInputListener),this.accessibleInputListener=null),this.allowLinksListener&&(Ay.unlink(this.allowLinksListener),this.allowLinksListener=null)}freeToPool(){ET.pool.freeToPool(this)}}_defineProperty(ET,"pool",new Mo(ET)),Lg.register("RichTextLink",ET);n(859);const vT=himalaya,AT=["boundsMethod","font","fill","stroke","lineWidth","subScale","subXSpacing","subYOffset","supScale","supXSpacing","supYOffset","capHeightScale","underlineLineWidth","underlineHeightScale","strikethroughLineWidth","strikethroughHeightScale","linkFill","linkEventsHandled","links","nodes","replaceNewlines","align","leading","lineWrap",gA.STRING_PROPERTY_NAME,"string"],bT=(window.QueryStringMachine&&QueryStringMachine.containsKey("stringTest"),new nf({size:20})),ST=["b","strong","i","em","sub","sup","u","s"],_T="COMPLETE",xT="INCOMPLETE",wT="NONE",TT={"font-family":"family","font-size":"size","font-stretch":"stretch","font-style":"style","font-variant":"variant","font-weight":"weight","line-height":"lineHeight"},PT=Object.keys(TT);["color"].concat(PT);class CT extends(Tv(cv)){constructor(e,t){const i=Vo()({fill:"#000000",tandemNameSuffix:"Text",phetioType:CT.RichTextIO,phetioVisiblePropertyInstrumented:!1},t);"string"==typeof e||"number"==typeof e?i.string=e:i.stringProperty=e,super(),_defineProperty(this,"_font",bT),_defineProperty(this,"_boundsMethod","hybrid"),_defineProperty(this,"_fill","#000000"),_defineProperty(this,"_stroke",null),_defineProperty(this,"_lineWidth",1),_defineProperty(this,"_subScale",.75),_defineProperty(this,"_subXSpacing",0),_defineProperty(this,"_subYOffset",0),_defineProperty(this,"_supScale",.75),_defineProperty(this,"_supXSpacing",0),_defineProperty(this,"_supYOffset",0),_defineProperty(this,"_capHeightScale",.75),_defineProperty(this,"_underlineLineWidth",1),_defineProperty(this,"_underlineHeightScale",.15),_defineProperty(this,"_strikethroughLineWidth",1),_defineProperty(this,"_strikethroughHeightScale",.3),_defineProperty(this,"_linkFill","rgb(27,0,241)"),_defineProperty(this,"_linkEventsHandled",!1),_defineProperty(this,"_links",{}),_defineProperty(this,"_nodes",{}),_defineProperty(this,"_replaceNewlines",!1),_defineProperty(this,"_align","left"),_defineProperty(this,"_leading",0),_defineProperty(this,"_lineWrap",null),_defineProperty(this,"_linkItems",[]),_defineProperty(this,"_hasAddedLeafToLine",!1),_defineProperty(this,"needPendingMinimumWidth",!1),_defineProperty(this,"pendingMinimumWidth",0),this._stringProperty=new GE("",!0,this.onStringPropertyChange.bind(this)),this.lineContainer=new cv({}),this.addChild(this.lineContainer),this.rebuildRichText(),this.localPreferredWidthProperty.lazyLink(()=>this.rebuildRichText()),this.mutate(i)}onStringPropertyChange(){this.rebuildRichText()}setStringProperty(e){return this._stringProperty.setTargetProperty(this,CT.STRING_PROPERTY_TANDEM_NAME,e)}set stringProperty(e){this.setStringProperty(e)}get stringProperty(){return this.getStringProperty()}getStringProperty(){return this._stringProperty}getPhetioMouseHitTarget(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return"string"===dA.value?this.getStringPropertyPhetioMouseHitTarget(e):super.getPhetioMouseHitTarget(e)}getStringPropertyPhetioMouseHitTarget(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this._stringProperty.getTargetProperty();return t instanceof Km?t.getPhetioMouseHitTarget(e):"phetioNotSelectable"}initializePhetioObject(e,t){const i=Vo()({},t),n=this.isPhetioInstrumented();super.initializePhetioObject(e,i),Lm.PHET_IO_ENABLED&&!n&&this.isPhetioInstrumented()&&this._stringProperty.initializePhetio(this,CT.STRING_PROPERTY_TANDEM_NAME,()=>new rE(this.string,No({phetioReadOnly:!0,tandem:this.tandem.createTandem(CT.STRING_PROPERTY_TANDEM_NAME),phetioDocumentation:"Property for the displayed text"},i.stringPropertyOptions)))}rebuildRichText(){const e="stretch"===this._lineWrap;this.widthSizable=e,this.pendingMinimumWidth=0,this.needPendingMinimumWidth=e;const t="stretch"===this._lineWrap?this.localPreferredWidth:this._lineWrap;if(this.freeChildrenToPool(),""===this.string)return void this.appendEmptyLeaf();let i,n=this.string.replace(/\u202a/g,'<span dir="ltr">').replace(/\u202b/g,'<span dir="rtl">').replace(/\u202c/g,"</span>");this._replaceNewlines&&(n=n.replace(/\n/g,"<br>"));try{i=vT.parse(n)}catch(a){i=vT.parse("INVALID TRANSLATION")}this._linkItems.length=0;const r=null===t?Number.POSITIVE_INFINITY:t;let s=gT.pool.create(!0);for(this._hasAddedLeafToLine=!1;i.length;){const e=i[0],t=s.bounds.isValid()?s.width:0,n=this.appendElement(s,e,this._font,this._fill,!0,r-t,1);n!==wT&&(s.bounds.isValid()?this.appendLine(s):this.appendLine(mT.pool.create(uT.scratchText.setString("X").setFont(this._font).height)),s=gT.pool.create(!0),this._hasAddedLeafToLine=!1),n!==xT&&i.splice(0,1)}for(s.bounds.isValid()&&this.appendLine(s),0===this.lineContainer.getChildrenCount()&&this.appendEmptyLeaf(),this.alignLines();this._linkItems.length;)(()=>{const e=this._linkItems[0].element,t=this._linkItems[0].href;let i;const n=[];for(i=this._linkItems.length-1;i>=0;i--){const t=this._linkItems[i];t.element===e&&(n.push(t.node),this._linkItems.splice(i,1))}const r=ET.pool.create(e.innerContent,t);for(this.lineContainer.addChild(r),i=0;i<n.length;i++){const e=n[i],t=e.getUniqueTrailTo(this.lineContainer).getMatrix();e.detach(),e.matrix=t,r.addChild(e)}})();this._linkItems.length=0,this.localMinimumWidth=e?this.pendingMinimumWidth:this.localBounds.width}freeChildrenToPool(){for(;this.lineContainer._children.length;){const e=this.lineContainer._children[this.lineContainer._children.length-1];this.lineContainer.removeChild(e),e.clean()}}dispose(){this.freeChildrenToPool(),super.dispose(),this._stringProperty.dispose()}appendLine(e){this.lineContainer.bounds.isValid()&&(e.top=this.lineContainer.bottom+this._leading,e.left=0),this.lineContainer.addChild(e)}appendEmptyLeaf(){this.appendLine(fT.pool.create("",!0,this._font,this._boundsMethod,this._fill,this._stroke,this._lineWidth))}alignLines(){const e="center"===this._align?"centerX":this._align,t=this.lineContainer[e];for(let i=0;i<this.lineContainer.getChildrenCount();i++)this.lineContainer.getChildAt(i)[e]=t}appendElement(e,t,i,n,r,s,a){let o,l=wT;const h=s-(r?e.rightSpacing:e.leftSpacing);if(lT(t)){if(o=fT.pool.create(t.content,r,i,this._boundsMethod,n,this._stroke,this._lineWidth),this.needPendingMinimumWidth&&(this.pendingMinimumWidth=Math.max(this.pendingMinimumWidth,Math.max(...xy(t.content).map(e=>{const s=t.content.slice(e.min,e.max),o=fT.pool.create(s,r,i,this._boundsMethod,n,this._stroke,this._lineWidth),l=o.width*a;return o.dispose(),l})))),!o.fitsIn(h,this._hasAddedLeafToLine,r)){const e=xy(t.content),s=e=>0===e.length?"":t.content.slice(e[0].min,e[e.length-1].max);if(this._hasAddedLeafToLine||e.length>1){const a=[];let u=!1;for(a.unshift(e.pop());e.length;){if(o.clean(),o=fT.pool.create(s(e),r,i,this._boundsMethod,n,this._stroke,this._lineWidth),o.fitsIn(h,this._hasAddedLeafToLine,r)||!(this._hasAddedLeafToLine||e.length>1)){u=!0;break}a.unshift(e.pop())}if(!u)return o.clean(),xT;l=xT,t.content=s(a)}}this._hasAddedLeafToLine=!0}else if(oT(t)){if("br"===t.tagName)return _T;if("span"===t.tagName){const e=uT.himalayaGetAttribute("dir",t);e&&(r="ltr"===e)}if("node"===t.tagName){const e=uT.himalayaGetAttribute("id",t),n=e&&this._nodes[e]||null;if(!n)return l;{if(o=yT.pool.create(n),this._hasAddedLeafToLine&&!o.fitsIn(h))return o.clean(),xT;const e=uT.himalayaGetAttribute("align",t);if("center"===e||"top"===e||"bottom"===e){const t=uT.scratchText.setString("Test").setFont(i).bounds;"center"===e?o.centerY=t.centerY:"top"===e?o.top=t.top:"bottom"===e&&(o.bottom=t.bottom)}}this._hasAddedLeafToLine=!0}else o=gT.pool.create(r);const e=uT.himalayaGetAttribute("style",t);if(e){const t=uT.himalayaStyleStringToMap(e);t.color&&(n=new Hg(t.color));const r={};for(let e=0;e<PT.length;e++){const i=PT[e];t[i]&&(r[TT[i]]=t[i])}i=("string"==typeof i?nf.fromCSS(i):i).copy(r)}if("a"===t.tagName){let e=uT.himalayaGetAttribute("href",t);if(null!==e&&!0!==this._links)if(e.startsWith("{{")&&e.indexOf("}}")===e.length-2){const t=e.slice(2,-2);e=this._links[t]}else e=null;e&&(null!==this._linkFill&&(n=this._linkFill),t.innerContent||(t.innerContent=CT.himalayaElementToAccessibleString(t,r)),this._linkItems.push({element:t,node:o,href:e}))}else"b"===t.tagName||"strong"===t.tagName?i=("string"==typeof i?nf.fromCSS(i):i).copy({weight:"bold"}):"i"===t.tagName||"em"===t.tagName?i=("string"==typeof i?nf.fromCSS(i):i).copy({style:"italic"}):"sub"===t.tagName?(o.scale(this._subScale),o.addExtraBeforeSpacing(this._subXSpacing),o.y+=this._subYOffset):"sup"===t.tagName&&(o.scale(this._supScale),o.addExtraBeforeSpacing(this._supXSpacing),o.y+=this._supYOffset);const u=o.getScaleVector().x;if("node"!==t.tagName){for(;l===wT&&t.children.length;){const e=o.bounds.isValid()?o.width:0,h=t.children[0];l=this.appendElement(o,h,i,n,r,s/u,a*u),l!==xT&&t.children.splice(0,1),s+=e-(o.bounds.isValid()?o.width:0)}l===_T&&t.children.length&&(l=xT)}if("sub"===t.tagName)isFinite(o.height)&&(o.centerY=0);else if("sup"===t.tagName)isFinite(o.height)&&(o.centerY=uT.scratchText.setString("X").setFont(i).top*this._capHeightScale);else if("u"===t.tagName){const e=-o.top*this._underlineHeightScale;isFinite(o.top)&&o.addChild(new SA(o.localLeft,e,o.localRight,e,{stroke:n,lineWidth:this._underlineLineWidth}))}else if("s"===t.tagName){const e=o.top*this._strikethroughHeightScale;isFinite(o.top)&&o.addChild(new SA(o.localLeft,e,o.localRight,e,{stroke:n,lineWidth:this._strikethroughLineWidth}))}}if(o){e.addElement(o)||(this._linkItems=this._linkItems.filter(e=>e.node!==o),o.clean())}return l}setString(e){return e=""+e,this._stringProperty.set(e),this}set string(e){this.setString(e)}get string(){return this.getString()}getString(){return this._stringProperty.value}setBoundsMethod(e){return e!==this._boundsMethod&&(this._boundsMethod=e,this.rebuildRichText()),this}set boundsMethod(e){this.setBoundsMethod(e)}get boundsMethod(){return this.getBoundsMethod()}getBoundsMethod(){return this._boundsMethod}setFont(e){return this._font!==e&&(this._font=e,this.rebuildRichText()),this}set font(e){this.setFont(e)}get font(){return this.getFont()}getFont(){return this._font}setFill(e){return this._fill!==e&&(this._fill=e,this.rebuildRichText()),this}set fill(e){this.setFill(e)}get fill(){return this.getFill()}getFill(){return this._fill}setStroke(e){return this._stroke!==e&&(this._stroke=e,this.rebuildRichText()),this}set stroke(e){this.setStroke(e)}get stroke(){return this.getStroke()}getStroke(){return this._stroke}setLineWidth(e){return this._lineWidth!==e&&(this._lineWidth=e,this.rebuildRichText()),this}set lineWidth(e){this.setLineWidth(e)}get lineWidth(){return this.getLineWidth()}getLineWidth(){return this._lineWidth}setSubScale(e){return this._subScale!==e&&(this._subScale=e,this.rebuildRichText()),this}set subScale(e){this.setSubScale(e)}get subScale(){return this.getSubScale()}getSubScale(){return this._subScale}setSubXSpacing(e){return this._subXSpacing!==e&&(this._subXSpacing=e,this.rebuildRichText()),this}set subXSpacing(e){this.setSubXSpacing(e)}get subXSpacing(){return this.getSubXSpacing()}getSubXSpacing(){return this._subXSpacing}setSubYOffset(e){return this._subYOffset!==e&&(this._subYOffset=e,this.rebuildRichText()),this}set subYOffset(e){this.setSubYOffset(e)}get subYOffset(){return this.getSubYOffset()}getSubYOffset(){return this._subYOffset}setSupScale(e){return this._supScale!==e&&(this._supScale=e,this.rebuildRichText()),this}set supScale(e){this.setSupScale(e)}get supScale(){return this.getSupScale()}getSupScale(){return this._supScale}setSupXSpacing(e){return this._supXSpacing!==e&&(this._supXSpacing=e,this.rebuildRichText()),this}set supXSpacing(e){this.setSupXSpacing(e)}get supXSpacing(){return this.getSupXSpacing()}getSupXSpacing(){return this._supXSpacing}setSupYOffset(e){return this._supYOffset!==e&&(this._supYOffset=e,this.rebuildRichText()),this}set supYOffset(e){this.setSupYOffset(e)}get supYOffset(){return this.getSupYOffset()}getSupYOffset(){return this._supYOffset}setCapHeightScale(e){return this._capHeightScale!==e&&(this._capHeightScale=e,this.rebuildRichText()),this}set capHeightScale(e){this.setCapHeightScale(e)}get capHeightScale(){return this.getCapHeightScale()}getCapHeightScale(){return this._capHeightScale}setUnderlineLineWidth(e){return this._underlineLineWidth!==e&&(this._underlineLineWidth=e,this.rebuildRichText()),this}set underlineLineWidth(e){this.setUnderlineLineWidth(e)}get underlineLineWidth(){return this.getUnderlineLineWidth()}getUnderlineLineWidth(){return this._underlineLineWidth}setUnderlineHeightScale(e){return this._underlineHeightScale!==e&&(this._underlineHeightScale=e,this.rebuildRichText()),this}set underlineHeightScale(e){this.setUnderlineHeightScale(e)}get underlineHeightScale(){return this.getUnderlineHeightScale()}getUnderlineHeightScale(){return this._underlineHeightScale}setStrikethroughLineWidth(e){return this._strikethroughLineWidth!==e&&(this._strikethroughLineWidth=e,this.rebuildRichText()),this}set strikethroughLineWidth(e){this.setStrikethroughLineWidth(e)}get strikethroughLineWidth(){return this.getStrikethroughLineWidth()}getStrikethroughLineWidth(){return this._strikethroughLineWidth}setStrikethroughHeightScale(e){return this._strikethroughHeightScale!==e&&(this._strikethroughHeightScale=e,this.rebuildRichText()),this}set strikethroughHeightScale(e){this.setStrikethroughHeightScale(e)}get strikethroughHeightScale(){return this.getStrikethroughHeightScale()}getStrikethroughHeightScale(){return this._strikethroughHeightScale}setLinkFill(e){return this._linkFill!==e&&(this._linkFill=e,this.rebuildRichText()),this}set linkFill(e){this.setLinkFill(e)}get linkFill(){return this.getLinkFill()}getLinkFill(){return this._linkFill}setLinkEventsHandled(e){return this._linkEventsHandled!==e&&(this._linkEventsHandled=e,this.rebuildRichText()),this}set linkEventsHandled(e){this.setLinkEventsHandled(e)}get linkEventsHandled(){return this.getLinkEventsHandled()}getLinkEventsHandled(){return this._linkEventsHandled}setLinks(e){return this._links!==e&&(this._links=e,this.rebuildRichText()),this}getLinks(){return this._links}set links(e){this.setLinks(e)}get links(){return this.getLinks()}setNodes(e){return this._nodes!==e&&(this._nodes=e,this.rebuildRichText()),this}getNodes(){return this._nodes}set nodes(e){this.setNodes(e)}get nodes(){return this.getNodes()}setReplaceNewlines(e){return this._replaceNewlines!==e&&(this._replaceNewlines=e,this.rebuildRichText()),this}set replaceNewlines(e){this.setReplaceNewlines(e)}get replaceNewlines(){return this.getReplaceNewlines()}getReplaceNewlines(){return this._replaceNewlines}setAlign(e){return this._align!==e&&(this._align=e,this.rebuildRichText()),this}set align(e){this.setAlign(e)}get align(){return this.getAlign()}getAlign(){return this._align}setLeading(e){return this._leading!==e&&(this._leading=e,this.rebuildRichText()),this}set leading(e){this.setLeading(e)}get leading(){return this.getLeading()}getLeading(){return this._leading}setLineWrap(e){return this._lineWrap!==e&&(this._lineWrap=e,this.rebuildRichText()),this}set lineWrap(e){this.setLineWrap(e)}get lineWrap(){return this.getLineWrap()}getLineWrap(){return this._lineWrap}mutate(e){return super.mutate(e)}static stringWithFont(e,t){return`<span style='font-style: ${t.style};font-variant: ${t.variant};font-weight: ${t.weight};font-stretch: ${t.stretch};font-size: ${t.size};font-family: ${t.family};line-height: ${t.lineHeight};'>${e}</span>`}static himalayaElementToString(e,t){if(lT(e))return CT.contentToString(e.content,t);if(oT(e)){const i=uT.himalayaGetAttribute("dir",e);return"span"===e.tagName&&i&&(t="ltr"===i),e.children.map(e=>CT.himalayaElementToString(e,t)).join("")}return""}static himalayaElementToAccessibleString(e,t){if(lT(e))return CT.contentToString(e.content,t);if(oT(e)){const i=uT.himalayaGetAttribute("dir",e);"span"===e.tagName&&i&&(t="ltr"===i);const n=e.children.map(e=>CT.himalayaElementToAccessibleString(e,t)).join("");return _.includes(ST,e.tagName)?`<${e.tagName}>${n}</${e.tagName}>`:n}return""}static contentToString(e,t){const i=he.decode(e);return t?`‪${i}‬`:`‫${i}‬`}}_defineProperty(CT,"STRING_PROPERTY_TANDEM_NAME",gA.STRING_PROPERTY_TANDEM_NAME),CT.prototype._mutatorKeys=AT.concat(cv.prototype._mutatorKeys),Lg.register("RichText",CT),CT.RichTextIO=new el("RichTextIO",{valueType:CT,supertype:cv.NodeIO,documentation:"The tandem IO Type for the scenery RichText node"});class VT extends(s_(gA)){constructor(e,t){const i=Vo()({readingBlockNameResponse:e,tagName:"p",innerContent:e},t);super(e),this.focusHighlight=new e_(this),this.mutate(i)}}Lg.register("VoicingText",VT);class RT extends(s_(CT)){constructor(e,t){super(e,Vo()({readingBlockNameResponse:e,innerContent:e,readingBlockTagName:"button"},t)),this.focusHighlight=new e_(this)}}Lg.register("VoicingRichText",RT);const NT=e=>{if(e instanceof al)return{type:"Vector2",x:e.x,y:e.y};if(e instanceof Mh)return{type:"Matrix3",m00:e.m00(),m01:e.m01(),m02:e.m02(),m10:e.m10(),m11:e.m11(),m12:e.m12(),m20:e.m20(),m21:e.m21(),m22:e.m22()};if(e instanceof Zl){const t=e;return{type:"Bounds2",maxX:t.maxX,maxY:t.maxY,minX:t.minX,minY:t.minY}}if(e instanceof Ip)return{type:"Shape",path:e.getSVGPath()};if(Array.isArray(e))return{type:"Array",value:e.map(NT)};if(e instanceof Hg)return{type:"Color",red:e.red,green:e.green,blue:e.blue,alpha:e.alpha};if(e instanceof _g)return{type:"Property",value:NT(e.value)};if(dE&&e instanceof dE){const t={};return e.transformMatrix&&(t.transformMatrix=NT(e.transformMatrix)),pE&&(e instanceof gE||e instanceof mE)&&(t.stops=e.stops.map(e=>({ratio:e.ratio,stop:NT(e.color)})),t.start=NT(e.start),t.end=NT(e.end),mE&&e instanceof mE?t.type="LinearGradient":gE&&e instanceof gE&&(t.type="RadialGradient",t.startRadius=e.startRadius,t.endRadius=e.endRadius)),fE&&e instanceof fE&&(t.type="Pattern",t.url=e.image.src),t}if(e instanceof cv){const t=e,i={},n={};["visible","opacity","disabledOpacity","pickable","inputEnabled","cursor","transformBounds","renderer","usesOpacity","layerSplit","cssTransform","excludeInvisible","webglScale","preventFit"].forEach(e=>{t[e]!==cv.DEFAULT_NODE_OPTIONS[e]&&(i[e]=t[e])}),["tagName","innerContent","accessibleName","helpText"].forEach(e=>{null!==t[e]&&(i[e]=t[e])}),["maxWidth","maxHeight","clipArea","mouseArea","touchArea"].forEach(e=>{t[e]!==cv.DEFAULT_NODE_OPTIONS[e]&&(n[e]=NT(t[e]))}),t.matrix.isIdentity()||(n.matrix=NT(t.matrix)),t._localBoundsOverridden&&(n.localBounds=NT(t.localBounds)),n.children=t.children.map(e=>e.id),n.hasInputListeners=t.inputListeners.length>0;const r={id:t.id,type:"Node",types:Ul(t.constructor).map(e=>e.name).filter(e=>e&&"Object"!==e&&"Node"!==e),name:t.constructor.name,options:i,setup:n};if(aA&&t instanceof aA&&(r.type="Path",n.path=NT(t.shape),t.boundsMethod!==aA.DEFAULT_PATH_OPTIONS.boundsMethod&&(i.boundsMethod=t.boundsMethod)),AA&&t instanceof AA&&(r.type="Circle",i.radius=t.radius),SA&&t instanceof SA&&(r.type="Line",i.x1=t.x1,i.y1=t.y1,i.x2=t.x2,i.y2=t.y2),xA&&t instanceof xA&&(r.type="Rectangle",i.rectX=t.rectX,i.rectY=t.rectY,i.rectWidth=t.rectWidth,i.rectHeight=t.rectHeight,i.cornerXRadius=t.cornerXRadius,i.cornerYRadius=t.cornerYRadius),gA&&t instanceof gA&&(r.type="Text","hybrid"!==t.boundsMethod&&(i.boundsMethod=t.boundsMethod),i.string=t.string,i.font=t.font),rA&&t instanceof rA&&(r.type="Image",["imageOpacity","initialWidth","initialHeight","mipmapBias","mipmapInitialLevel","mipmapMaxLevel"].forEach(e=>{t[e]!==rA.DEFAULT_IMAGE_OPTIONS[e]&&(i[e]=t[e])}),n.width=t.imageWidth,n.height=t.imageHeight,t._mipmapData?(n.imageType="mipmapData",n.mipmapData=t._mipmapData.map(e=>({url:e.url,width:e.width,height:e.height}))):(t._mipmap&&(n.generateMipmaps=!0),t._image instanceof HTMLImageElement?(n.imageType="image",n.src=t._image.src):t._image instanceof HTMLCanvasElement&&(n.imageType="canvas",n.src=t._image.toDataURL()))),vA&&t instanceof vA||TA&&t instanceof TA){r.type=vA&&t instanceof vA?"CanvasNode":"WebGLNode",n.canvasBounds=NT(t.canvasBounds);const e=1,i=document.createElement("canvas");i.width=Math.ceil(t.canvasBounds.width*e),i.height=Math.ceil(t.canvasBounds.height*e);const s=i.getContext("2d"),a=new ey(i,s),o=Mh.scale(1/e);a.context.setTransform(e,0,0,e,-t.canvasBounds.left,-t.canvasBounds.top),t.renderToCanvasSelf(a,o),n.url=i.toDataURL(),n.scale=e,n.offset=NT(t.canvasBounds.leftTop)}return bA&&t instanceof bA&&(r.type="DOM",r.element=(new window.XMLSerializer).serializeToString(t.element),t.element instanceof window.HTMLCanvasElement&&(r.dataURL=t.element.toDataURL()),i.preventTransform=t.preventTransform),(aA&&t instanceof aA||gA&&t instanceof gA)&&(["fillPickable","strokePickable","lineWidth","lineCap","lineJoin","lineDashOffset","miterLimit"].forEach(e=>{t[e]!==Wv[e]&&(i[e]=t[e])}),t.fill!==Wv.fill&&(n.fill=NT(t.fill)),t.stroke!==Wv.stroke&&(n.stroke=NT(t.stroke)),t.lineDash.length&&(n.lineDash=NT(t.lineDash))),r}return e instanceof SV?{type:"Display",width:e.width,height:e.height,backgroundColor:NT(e.backgroundColor),tree:{type:"Subtree",rootNodeId:e.rootNode.id,nodes:MT(e.rootNode)}}:{type:"value",value:e}},MT=e=>e.getSubtreeNodes().map(NT);Lg.register("scenerySerialize",NT);const kT=e=>{if("Vector2"===e.type)return new al(e.x,e.y);if("Matrix3"===e.type)return(new Mh).rowMajor(e.m00,e.m01,e.m02,e.m10,e.m11,e.m12,e.m20,e.m21,e.m22);if("Bounds2"===e.type)return new Zl(e.minX,e.minY,e.maxX,e.maxY);if("Shape"===e.type)return new Ip(e.path);if("Array"===e.type)return e.value.map(kT);if("Color"===e.type)return new Hg(e.red,e.green,e.blue,e.alpha);if("Property"===e.type)return new ty(kT(e.value));if("Pattern"===e.type||"LinearGradient"===e.type||"RadialGradient"===e.type){let t;if("Pattern"===e.type){const i=new window.Image;i.src=e.url,t=new fE(i)}else{const i=kT(e.start),n=kT(e.end);"LinearGradient"===e.type?t=new mE(i.x,i.y,n.x,n.y):"RadialGradient"===e.type&&(t=new gE(i.x,i.y,e.startRadius,n.x,n.y,e.endRadius)),e.stops.forEach(e=>{t.addColorStop(e.ratio,kT(e.stop))})}return e.transformMatrix&&t.setTransformMatrix(kT(e.transformMatrix)),t}if(_.includes(["Node","Path","Circle","Line","Rectangle","Text","Image","CanvasNode","WebGLNode","DOM"],e.type)){let t;const i=e.setup;if("Node"===e.type)t=new cv;else if("Path"===e.type)t=new aA(kT(i.path));else if("Circle"===e.type)t=new AA({});else if("Line"===e.type)t=new SA({});else if("Rectangle"===e.type)t=new xA({});else if("Text"===e.type)t=new gA("");else if("Image"===e.type){if("image"===i.imageType||"canvas"===i.imageType)t=new rA(i.src),i.generateMipmaps&&(t.mipmap=!0);else if("mipmapData"===i.imageType){const e=i.mipmapData.map(e=>{const t={width:e.width,height:e.height,url:e.url};t.img=new window.Image,t.img.src=e.url,t.canvas=document.createElement("canvas"),t.canvas.width=e.width,t.canvas.height=e.height;const i=t.canvas.getContext("2d");return t.updateCanvas=function(){t.img.complete&&(void 0===t.img.naturalWidth||t.img.naturalWidth>0)&&(i.drawImage(t.img,0,0),delete t.updateCanvas)},t});t=new rA(e)}t.initialWidth=i.width,t.initialHeight=i.height}else if("CanvasNode"===e.type||"WebGLNode"===e.type)t=new cv({children:[new rA(i.url,{translation:kT(i.offset),scale:1/i.scale})]});else if("DOM"===e.type){const i=document.createElement("div");i.innerHTML=e.element;const n=i.childNodes[0];if(i.removeChild(n),e.dataURL){const t=new window.Image;t.onload=()=>{n.getContext("2d").drawImage(t,0,0)},t.src=e.dataURL}t=new bA(n)}return i.clipArea&&(t.clipArea=kT(i.clipArea)),i.mouseArea&&(t.mouseArea=kT(i.mouseArea)),i.touchArea&&(t.touchArea=kT(i.touchArea)),i.matrix&&(t.matrix=kT(i.matrix)),i.localBounds&&(t.localBounds=kT(i.localBounds)),i.fill&&(t.fill=kT(i.fill)),i.stroke&&(t.stroke=kT(i.stroke)),i.lineDash&&(t.lineDash=kT(i.lineDash)),t.mutate(e.options),t._serialization=e,t}if("Subtree"===e.type){const t={},i=e.nodes.map(kT);return i.forEach(e=>{t[e._serialization.id]=e}),i.forEach(e=>{e._serialization.setup.children.forEach(i=>{e.addChild(t[i])})}),t[e.rootNodeId]}return"value"===e.type?e.value:null};Lg.register("sceneryDeserialize",kT);const LT=kT,IT=e=>LT(NT(e));Lg.register("sceneryCopy",IT);let BT=1;class DT{initialize(e){return this.id=this.id||BT++,this.clean(),this.renderer=e,this.dirty=!0,this.isDisposed=!1,this.linksDirty=!1,this.visibleProperty=new mg(!0),this.fittableProperty=new mg(!0),this}clean(){this.parentDrawable=null,this.backbone=null,this.pendingParentDrawable=null,this.pendingBackbone=null,this.pendingAddition=!1,this.pendingRemoval=!1,this.previousDrawable=null,this.nextDrawable=null,this.oldPreviousDrawable=null,this.oldNextDrawable=null,this.visibleProperty&&this.visibleProperty.removeAllListeners(),this.fittableProperty&&this.fittableProperty.removeAllListeners()}update(){let e=!1;return this.dirty&&!this.isDisposed&&(this.dirty=!1,e=!0),e}setVisible(e){this.visibleProperty.value=e}set visible(e){this.setVisible(e)}isVisible(){return this.visibleProperty.value}get visible(){return this.isVisible()}setFittable(e){this.fittableProperty.value=e}set fittable(e){this.setFittable(e)}isFittable(){return this.fittableProperty.value}get fittable(){return this.isFittable()}setBlockBackbone(e){this.parentDrawable=e,this.backbone=e,this.pendingParentDrawable=e,this.pendingBackbone=e,this.pendingAddition=!1,this.pendingRemoval=!1}notePendingAddition(e,t,i){this.pendingParentDrawable=t,this.pendingBackbone=i,this.pendingAddition=!0,this.pendingRemoval||e.markDrawableChangedBlock(this)}notePendingRemoval(e){this.pendingRemoval=!0,this.pendingAddition||e.markDrawableChangedBlock(this)}notePendingMove(e,t){this.pendingParentDrawable=t,this.pendingRemoval&&this.pendingAddition||e.markDrawableChangedBlock(this),this.pendingAddition=!0,this.pendingRemoval=!0}updateBlock(){let e=!1;return(this.pendingRemoval||this.pendingAddition)&&(e=!this.pendingRemoval||!this.pendingAddition||this.parentDrawable!==this.pendingParentDrawable||this.backbone!==this.pendingBackbone,e?(this.pendingRemoval&&(this.parentDrawable.removeDrawable(this),this.pendingAddition||(this.pendingParentDrawable=null,this.pendingBackbone=null)),this.parentDrawable=this.pendingParentDrawable,this.backbone=this.pendingBackbone,this.pendingAddition&&this.parentDrawable.addDrawable(this)):this.pendingAddition&&af.isCanvas(this.renderer)&&this.parentDrawable.onPotentiallyMovedDrawable(this),this.pendingAddition=!1,this.pendingRemoval=!1),e}updateLinks(){this.oldNextDrawable=this.nextDrawable,this.oldPreviousDrawable=this.previousDrawable,this.linksDirty=!1}markDirty(){this.dirty||(this.dirty=!0,this.parentDrawable&&this.parentDrawable.markDirtyDrawable(this))}markLinksDirty(e){this.linksDirty||(this.linksDirty=!0,e.markDrawableForLinksUpdate(this))}markForDisposal(e){DT.disconnectBefore(this,e),DT.disconnectAfter(this,e),e.markDrawableForDisposal(this)}disposeImmediately(e){DT.disconnectBefore(this,e),DT.disconnectAfter(this,e),this.dispose()}dispose(){this.clean(),this.isDisposed=!0,this.freeToPool()}audit(e,t,i){0}toString(){return`${this.constructor.name}#${this.id}`}toDetailedString(){return this.toString()}static connectDrawables(e,t,i){e.nextDrawable!==t&&(e.nextDrawable&&(e.nextDrawable.markLinksDirty(i),e.nextDrawable.previousDrawable=null),t.previousDrawable&&(t.previousDrawable.markLinksDirty(i),t.previousDrawable.nextDrawable=null),e.nextDrawable=t,t.previousDrawable=e,e.markLinksDirty(i),t.markLinksDirty(i))}static disconnectBefore(e,t){e.previousDrawable&&(e.markLinksDirty(t),e.previousDrawable.markLinksDirty(t),e.previousDrawable.nextDrawable=null,e.previousDrawable=null)}static disconnectAfter(e,t){e.nextDrawable&&(e.markLinksDirty(t),e.nextDrawable.markLinksDirty(t),e.nextDrawable.previousDrawable=null,e.nextDrawable=null)}static listToArray(e,t){const i=[];for(let n=e;i.push(n),n!==t;n=n.nextDrawable);return i}static oldListToArray(e,t){const i=[];for(let n=e;i.push(n),n!==t;n=n.oldNextDrawable);return i}}Lg.register("Drawable",DT);const OT=DT;class qT extends OT{constructor(e,t){super(),this.initialize(e,t)}initialize(e,t){return super.initialize(e),this.drawableVisibilityListener=this.drawableVisibilityListener||this.updateSelfVisibility.bind(this),this.instance=t,this.node=t.trail.lastNode(),this.node.attachDrawable(this),this.instance.selfVisibleEmitter.addListener(this.drawableVisibilityListener),this.updateSelfVisibility(),this}dispose(){this.instance.selfVisibleEmitter.removeListener(this.drawableVisibilityListener),this.node.detachDrawable(this),this.instance=null,this.node=null,super.dispose()}updateSelfVisibility(){this.visible=this.instance.selfVisible}toDetailedString(){return`${this.toString()} (${this.instance.trail.toPathString()})`}}Lg.register("SelfDrawable",qT);const YT=qT,HT=bv(e=>class extends e{initialize(e,t){for(var i=arguments.length,n=new Array(i>2?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];super.initialize(e,t,...n),this.fillCallback=this.fillCallback||this.markDirtyFill.bind(this),this.strokeCallback=this.strokeCallback||this.markDirtyStroke.bind(this),this.fillObserver=this.fillObserver||new BA(this.fillCallback),this.strokeObserver=this.strokeObserver||new BA(this.strokeCallback),this.fillObserver.setPrimary(t.node._fill),this.strokeObserver.setPrimary(t.node._stroke)}dispose(){this.fillObserver.clean(),this.strokeObserver.clean(),super.dispose()}markDirtyFill(){this.markPaintDirty(),this.fillObserver.setPrimary(this.instance.node._fill)}markDirtyStroke(){this.markPaintDirty(),this.strokeObserver.setPrimary(this.instance.node._stroke)}markDirtyLineWidth(){this.markPaintDirty()}markDirtyLineOptions(){this.markPaintDirty()}markDirtyCachedPaints(){this.markPaintDirty()}});Lg.register("PaintableStatelessDrawable",HT);const GT=HT,FT=bv(e=>class extends e{initialize(e,t){for(var i=arguments.length,n=new Array(i>2?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];super.initialize(e,t,...n),this.dirtyFill=!0,this.hadStroke=!1,this.dirtyStroke=!0,this.dirtyLineWidth=!0,this.dirtyLineOptions=!0,this.dirtyCachedPaints=!0,this.lastCachedPaints=[],this.fillCallback=this.fillCallback||this.markDirtyFill.bind(this),this.strokeCallback=this.strokeCallback||this.markDirtyStroke.bind(this),this.fillObserver=this.fillObserver||new BA(this.fillCallback),this.strokeObserver=this.strokeObserver||new BA(this.strokeCallback),this.fillObserver.setPrimary(t.node._fill),this.strokeObserver.setPrimary(t.node._stroke)}cleanPaintableState(){this.dirtyFill=!1,this.dirtyStroke=!1,this.dirtyLineWidth=!1,this.dirtyLineOptions=!1,this.dirtyCachedPaints=!1,this.hadStroke=null!==this.node.getStroke()}dispose(){super.dispose(),this.fillObserver.clean(),this.strokeObserver.clean()}markDirtyFill(){this.dirtyFill=!0,this.markPaintDirty(),this.fillObserver.setPrimary(this.instance.node._fill)}markDirtyStroke(){this.dirtyStroke=!0,this.markPaintDirty(),this.strokeObserver.setPrimary(this.instance.node._stroke)}markDirtyLineWidth(){this.dirtyLineWidth=!0,this.markPaintDirty()}markDirtyLineOptions(){this.dirtyLineOptions=!0,this.markPaintDirty()}markDirtyCachedPaints(){this.dirtyCachedPaints=!0,this.markPaintDirty()}});Lg.register("PaintableStatefulDrawable",FT);const zT=FT;class UT extends YT{initialize(e,t){super.initialize(e,t),this.transformListener=this.transformListener||this.markTransformDirty.bind(this),t.relativeTransform.addListener(this.transformListener),t.relativeTransform.addPrecompute()}markTransformDirty(){this.markDirty()}markPaintDirty(){this.markDirty()}updateSelfVisibility(){super.updateSelfVisibility(),this.markDirty()}dispose(){this.instance.relativeTransform.removeListener(this.transformListener),this.instance.relativeTransform.removePrecompute(),super.dispose()}}Lg.register("CanvasSelfDrawable",UT);const WT=UT;class XT extends YT{initialize(e,t){return super.initialize(e,t),this.transformListener=this.transformListener||this.markTransformDirty.bind(this),this.markTransformDirty(),this.visibilityDirty=!0,t.relativeTransform.addListener(this.transformListener),t.relativeTransform.addPrecompute(),this}markTransformDirty(){this.transformDirty=!0,this.markDirty()}getTransformMatrix(){return this.instance.relativeTransform.validate(),this.instance.relativeTransform.matrix}update(){return!!super.update()&&(this.updateDOM(),this.visibilityDirty&&(this.visibilityDirty=!1,this.domElement.style.visibility=this.visible?"":"hidden"),this.cleanPaintableState&&this.cleanPaintableState(),!0)}updateDOM(){}updateSelfVisibility(){super.updateSelfVisibility(),this.visibilityDirty||(this.visibilityDirty=!0,this.markDirty())}dispose(){this.instance.relativeTransform.removeListener(this.transformListener),this.instance.relativeTransform.removePrecompute(),super.dispose()}}Lg.register("DOMSelfDrawable",XT);const jT=XT;class QT extends YT{initialize(e,t,i,n){return super.initialize(e,t),this.usesPaint=i,this.keepElements=n,this.svgElement=null,this.svgBlock=null,this.usesPaint&&(this.paintState?this.paintState.initialize():this.paintState=new YA),this}update(){return!!super.update()&&(this.updateSVG(),!0)}updateSVG(){if(this.paintDirty&&this.updateSVGSelf(this.node,this.svgElement),this.usesPaint&&this.dirtyCachedPaints){const e=this.node._cachedPaints.slice();let t,i;for(t=0;t<e.length;t++){const n=e[t];let r=!0;for(i=0;i<this.lastCachedPaints.length;i++)if(n===this.lastCachedPaints[i]){r=!1;break}r&&this.svgBlock.incrementPaint(n)}for(t=0;t<this.lastCachedPaints.length;t++){const n=this.lastCachedPaints[t];let r=!0;for(i=0;i<e.length;i++)if(n===e[i]){r=!1;break}r&&this.svgBlock.decrementPaint(n)}this.lastCachedPaints=e}this.setToCleanState()}updateFillStrokeStyle(e){if(!this.usesPaint)return;this.dirtyFill&&this.paintState.updateFill(this.svgBlock,this.node.getFillValue()),this.dirtyStroke&&this.paintState.updateStroke(this.svgBlock,this.node.getStrokeValue());const t=this.dirtyLineWidth||this.dirtyLineOptions;t&&this.paintState.updateStrokeDetailStyle(this.node),(this.dirtyFill||this.dirtyStroke||t)&&e.setAttribute("style",this.paintState.baseStyle+this.paintState.strokeDetailStyle),this.cleanPaintableState()}updateSVGBlock(e){const t=this.svgBlock;if(this.usesPaint&&t)for(let i=0;i<this.lastCachedPaints.length;i++)t.decrementPaint(this.lastCachedPaints[i]);if(this.svgBlock=e,this.usesPaint)for(let i=0;i<this.lastCachedPaints.length;i++)e.incrementPaint(this.lastCachedPaints[i]);this.updateDefsSelf&&this.updateDefsSelf(e),this.usesPaint&&this.paintState.updateSVGBlock(e),this.usesPaint&&this.markDirtyFill(),this.usesPaint&&this.markDirtyStroke()}dispose(){this.keepElements||(this.svgElement=null),this.updateDefsSelf&&this.updateDefsSelf(null),this.usesPaint&&this.paintState.dispose(),this.defs=null,this.svgBlock=null,super.dispose()}}Lg.register("SVGSelfDrawable",QT);const KT=QT;class ZT extends YT{initialize(e,t){return super.initialize(e,t),this.transformListener=this.transformListener||this.markTransformDirty.bind(this),t.relativeTransform.addListener(this.transformListener),t.relativeTransform.addPrecompute(),this}markTransformDirty(){this.markDirty()}updateSelfVisibility(){super.updateSelfVisibility(),this.markDirty()}dispose(){this.instance.relativeTransform.removeListener(this.transformListener),this.instance.relativeTransform.removePrecompute(),super.dispose()}}Lg.register("WebGLSelfDrawable",ZT);const JT=ZT,$T=bv(e=>class extends(zT(e)){initialize(e,t){for(var i=arguments.length,n=new Array(i>2?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];super.initialize(e,t,...n),this.paintDirty=!0,this.dirtyRadius=!0}markPaintDirty(){this.paintDirty=!0,this.markDirty()}markDirtyRadius(){this.dirtyRadius=!0,this.markPaintDirty()}setToCleanState(){this.paintDirty=!1,this.dirtyRadius=!1}});Lg.register("CircleStatefulDrawable",$T);const eP=$T,tP=bv(e=>class extends e{initialize(e,t){for(var i=arguments.length,n=new Array(i>2?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];super.initialize(e,t,...n),this.paintDirty=!0,this.dirtyImage=!0,this.dirtyImageOpacity=!0,this.dirtyMipmap=!0}markPaintDirty(){this.paintDirty=!0,this.markDirty()}markDirtyImage(){this.dirtyImage=!0,this.markPaintDirty()}markDirtyImageOpacity(){this.dirtyImageOpacity=!0,this.markPaintDirty()}markDirtyMipmap(){this.dirtyMipmap=!0,this.markPaintDirty()}setToCleanState(){this.paintDirty=!1,this.dirtyImage=!1,this.dirtyImageOpacity=!1,this.dirtyMipmap=!1}});Lg.register("ImageStatefulDrawable",tP);const iP=tP,nP=bv(e=>class extends(GT(e)){initialize(e,t){for(var i=arguments.length,n=new Array(i>2?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];super.initialize(e,t,...n),this.paintDirty=!0}markPaintDirty(){this.paintDirty=!0,this.markDirty()}markDirtyLine(){this.markPaintDirty()}markDirtyP1(){this.markPaintDirty()}markDirtyP2(){this.markPaintDirty()}markDirtyX1(){this.markPaintDirty()}markDirtyY1(){this.markPaintDirty()}markDirtyX2(){this.markPaintDirty()}markDirtyY2(){this.markPaintDirty()}});Lg.register("LineStatelessDrawable",nP);const rP=nP,sP=bv(e=>class extends(zT(e)){initialize(e,t){for(var i=arguments.length,n=new Array(i>2?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];super.initialize(e,t,...n),this.paintDirty=!0,this.dirtyX1=!0,this.dirtyY1=!0,this.dirtyX2=!0,this.dirtyY2=!0}markPaintDirty(){this.paintDirty=!0,this.markDirty()}markDirtyLine(){this.dirtyX1=!0,this.dirtyY1=!0,this.dirtyX2=!0,this.dirtyY2=!0,this.markPaintDirty()}markDirtyP1(){this.dirtyX1=!0,this.dirtyY1=!0,this.markPaintDirty()}markDirtyP2(){this.dirtyX2=!0,this.dirtyY2=!0,this.markPaintDirty()}markDirtyX1(){this.dirtyX1=!0,this.markPaintDirty()}markDirtyY1(){this.dirtyY1=!0,this.markPaintDirty()}markDirtyX2(){this.dirtyX2=!0,this.markPaintDirty()}markDirtyY2(){this.dirtyY2=!0,this.markPaintDirty()}setToCleanState(){this.paintDirty=!1,this.dirtyX1=!1,this.dirtyY1=!1,this.dirtyX2=!1,this.dirtyY2=!1}});Lg.register("LineStatefulDrawable",sP);const aP=sP,oP=bv(e=>class extends(zT(e)){initialize(e,t){for(var i=arguments.length,n=new Array(i>2?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];super.initialize(e,t,...n),this.paintDirty=!0,this.dirtyShape=!0}markPaintDirty(){this.paintDirty=!0,this.markDirty()}markDirtyShape(){this.dirtyShape=!0,this.markPaintDirty()}setToCleanState(){this.paintDirty=!1,this.dirtyShape=!1}});Lg.register("PathStatefulDrawable",oP);const lP=oP,hP=bv(e=>class extends(zT(e)){initialize(e,t){for(var i=arguments.length,n=new Array(i>2?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];super.initialize(e,t,...n),this.paintDirty=!0,this.dirtyX=!0,this.dirtyY=!0,this.dirtyWidth=!0,this.dirtyHeight=!0,this.dirtyCornerXRadius=!0,this.dirtyCornerYRadius=!0}markPaintDirty(){this.paintDirty=!0,this.markDirty()}markDirtyRectangle(){this.dirtyX=!0,this.dirtyY=!0,this.dirtyWidth=!0,this.dirtyHeight=!0,this.dirtyCornerXRadius=!0,this.dirtyCornerYRadius=!0,this.markPaintDirty()}markDirtyX(){this.dirtyX=!0,this.markPaintDirty()}markDirtyY(){this.dirtyY=!0,this.markPaintDirty()}markDirtyWidth(){this.dirtyWidth=!0,this.markPaintDirty()}markDirtyHeight(){this.dirtyHeight=!0,this.markPaintDirty()}markDirtyCornerXRadius(){this.dirtyCornerXRadius=!0,this.markPaintDirty()}markDirtyCornerYRadius(){this.dirtyCornerYRadius=!0,this.markPaintDirty()}setToCleanState(){this.paintDirty=!1,this.dirtyX=!1,this.dirtyY=!1,this.dirtyWidth=!1,this.dirtyHeight=!1,this.dirtyCornerXRadius=!1,this.dirtyCornerYRadius=!1}});Lg.register("RectangleStatefulDrawable",hP);const uP=hP,cP=bv(e=>class extends(zT(e)){initialize(e,t){for(var i=arguments.length,n=new Array(i>2?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];super.initialize(e,t,...n),this.paintDirty=!0,this.dirtyText=!0,this.dirtyFont=!0,this.dirtyBounds=!0}markPaintDirty(){this.paintDirty=!0,this.markDirty()}markDirtyText(){this.dirtyText=!0,this.markPaintDirty()}markDirtyFont(){this.dirtyFont=!0,this.markPaintDirty()}markDirtyBounds(){this.dirtyBounds=!0,this.markPaintDirty()}setToCleanState(){this.paintDirty=!1,this.dirtyText=!1,this.dirtyFont=!1,this.dirtyBounds=!1}});Lg.register("TextStatefulDrawable",cP);const dP=cP,pP=[];class mP extends WT{paintCanvas(e,t,i){if(!t.selfBounds.isEmpty()){const i=e.context;i.save(),i.fillStyle="black",i.strokeStyle="black",i.lineWidth=1,i.lineCap="butt",i.lineJoin="miter",i.lineDash=pP,i.lineDashOffset=0,i.miterLimit=10,t.paintCanvas(i),i.restore()}}}Lg.register("CanvasNodeDrawable",mP),cy.mixInto(mP);const gP=mP;class fP extends(GT(WT)){paintCanvas(e,t,i){const n=e.context;n.beginPath(),n.arc(0,0,t._radius,0,2*Math.PI,!1),n.closePath(),t.hasFill()&&(t.beforeCanvasFill(e),n.fill(),t.afterCanvasFill(e)),t.hasPaintableStroke()&&(t.beforeCanvasStroke(e),n.stroke(),t.afterCanvasStroke(e))}markDirtyRadius(){this.markPaintDirty()}dispose(){super.dispose()}}Lg.register("CircleCanvasDrawable",fP),cy.mixInto(fP);const yP=fP;class EP extends(eP(jT)){constructor(e,t){super(e,t),_f.prepareForTransform(this.domElement)}initialize(e,t){if(super.initialize(e,t),this.matrix=this.matrix||Mh.pool.fetch(),!this.fillElement||!this.strokeElement){const e=document.createElement("div");this.fillElement=e;const t=document.createElement("div");this.strokeElement=t,e.style.display="block",e.style.position="absolute",e.style.left="0",e.style.top="0",e.style.pointerEvents="none",t.style.display="block",t.style.position="absolute",t.style.left="0",t.style.top="0",t.style.pointerEvents="none",e.appendChild(t)}this.domElement=this.fillElement}updateDOM(){const e=this.node,t=this.fillElement,i=this.strokeElement;if(this.paintDirty&&(this.dirtyRadius&&(t.style.width=2*e._radius+"px",t.style.height=2*e._radius+"px",t.style[Zg.borderRadius]=e._radius+"px"),this.dirtyFill&&(t.style.backgroundColor=e.getCSSFill()),this.dirtyStroke&&(e.hasStroke()?i.style.borderStyle="solid":i.style.borderStyle="none"),e.hasStroke())){const t=!this.hadStroke;(t||this.dirtyLineWidth||this.dirtyRadius)&&(i.style.width=2*e._radius-e.getLineWidth()+"px",i.style.height=2*e._radius-e.getLineWidth()+"px",i.style[Zg.borderRadius]=e._radius+e.getLineWidth()/2+"px"),(t||this.dirtyLineWidth)&&(i.style.left=-e.getLineWidth()/2+"px",i.style.top=-e.getLineWidth()/2+"px",i.style.borderWidth=e.getLineWidth()+"px"),(t||this.dirtyStroke)&&(i.style.borderColor=e.getSimpleCSSStroke())}if(this.transformDirty||this.dirtyRadius){this.matrix.set(this.getTransformMatrix());const t=Mh.translation(-e._radius,-e._radius);this.matrix.multiplyMatrix(t),t.freeToPool(),_f.applyPreparedTransform(this.matrix,this.fillElement)}this.setToCleanState(),this.cleanPaintableState(),this.transformDirty=!1}dispose(){super.dispose()}}Lg.register("CircleDOMDrawable",EP),cy.mixInto(EP);const vP=EP;class AP extends(eP(KT)){initialize(e,t){super.initialize(e,t,!0,!0),this.svgElement=this.svgElement||document.createElementNS(lf,"circle")}updateSVGSelf(){const e=this.svgElement;this.dirtyRadius&&e.setAttribute("r",this.node._radius),this.updateFillStrokeStyle(e)}}Lg.register("CircleSVGDrawable",AP),cy.mixInto(AP);const bP=AP;class SP extends jT{constructor(e,t){super(e,t),_f.prepareForTransform(this.domElement)}initialize(e,t){super.initialize(e,t),this.domElement=this.node._container}updateDOM(){this.transformDirty&&!this.node._preventTransform&&_f.applyPreparedTransform(this.getTransformMatrix(),this.domElement),this.transformDirty=!1}dispose(){super.dispose(),this.domElement=null}}Lg.register("DOMDrawable",SP),cy.mixInto(SP);const _P=SP;class xP extends WT{paintCanvas(e,t,i){const n=1!==t._imageOpacity;if(t._image&&0!==t._image.width&&0!==t._image.height){if(n&&(e.context.save(),e.context.globalAlpha*=t._imageOpacity),t._mipmap&&t.hasMipmaps()){const n=t.getMipmapLevel(i,tA.CANVAS_MIPMAP_BIAS_ADJUSTMENT),r=t.getMipmapCanvas(n),s=Math.pow(2,n);e.context.drawImage(r,0,0,r.width*s,r.height*s)}else e.context.drawImage(t._image,0,0);n&&e.context.restore()}}markDirtyImage(){this.markPaintDirty()}markDirtyMipmap(){this.markPaintDirty()}markDirtyImageOpacity(){this.markPaintDirty()}}Lg.register("ImageCanvasDrawable",xP),cy.mixInto(xP);const wP=xP;class TP extends(iP(jT)){constructor(e,t){super(e,t),_f.prepareForTransform(this.domElement)}initialize(e,t){super.initialize(e,t),this.domElement||(this.domElement=document.createElement("img"),this.domElement.style.display="block",this.domElement.style.position="absolute",this.domElement.style.pointerEvents="none",this.domElement.style.left="0",this.domElement.style.top="0"),this.hasOpacity=!1}updateDOM(){const e=this.node,t=this.domElement;this.paintDirty&&this.dirtyImage&&(t.src=e._image?e._image.src:"//:0"),this.dirtyImageOpacity&&(1===e._imageOpacity?this.hasOpacity&&(this.hasOpacity=!1,t.style.opacity=""):(this.hasOpacity=!0,t.style.opacity=e._imageOpacity)),this.transformDirty&&_f.applyPreparedTransform(this.getTransformMatrix(),this.domElement),this.setToCleanState(),this.transformDirty=!1}dispose(){super.dispose()}}Lg.register("ImageDOMDrawable",TP),cy.mixInto(TP);const PP=TP;class CP extends(iP(KT)){initialize(e,t){super.initialize(e,t,!1,!0),this.svgElement=this.svgElement||document.createElementNS(lf,"image"),this.svgElement.setAttribute("x","0"),this.svgElement.setAttribute("y","0"),this.hasOpacity=!1,this.usingMipmap=!1,this.mipmapLevel=-1,this._mipmapTransformListener=this._mipmapTransformListener||this.onMipmapTransform.bind(this),this._mipmapListener=this._mipmapListener||this.onMipmap.bind(this),this.node.mipmapEmitter.addListener(this._mipmapListener),this.updateMipmapStatus(t.node._mipmap)}updateSVGSelf(){const e=this.svgElement;this.dirtyImage?this.node._image?this.updateURL(e,!0):(e.setAttribute("width","0"),e.setAttribute("height","0"),e.setAttributeNS(uf,"xlink:href","//:0")):this.dirtyMipmap&&this.node._image&&this.updateURL(e,!1),this.dirtyImageOpacity&&(1===this.node._imageOpacity?this.hasOpacity&&(this.hasOpacity=!1,e.removeAttribute("opacity")):(this.hasOpacity=!0,e.setAttribute("opacity",this.node._imageOpacity)))}updateURL(e,t){let i=-1;if(this.node._mipmap&&(i=this.node.getMipmapLevel(this.instance.relativeTransform.matrix)),t||i!==this.mipmapLevel)if(this.mipmapLevel>=0&&-1===i&&e.removeAttribute("transform"),this.mipmapLevel=i,this.node._mipmap&&this.node.hasMipmaps()){const t=this.node.getMipmapURL(i),n=this.node.getMipmapCanvas(i);e.setAttribute("width",n.width+"px"),e.setAttribute("height",n.height+"px"),e.setAttribute("transform",`scale(${Math.pow(2,i).toFixed(20)})`),e.setAttributeNS(uf,"xlink:href",t)}else e.setAttribute("width",this.node.getImageWidth()+"px"),e.setAttribute("height",this.node.getImageHeight()+"px"),e.setAttributeNS(uf,"xlink:href",this.node.getImageURL())}updateMipmapStatus(e){this.usingMipmap!==e&&(this.usingMipmap=e,e?(this.instance.relativeTransform.addListener(this._mipmapTransformListener),this.instance.relativeTransform.addPrecompute()):(this.instance.relativeTransform.removeListener(this._mipmapTransformListener),this.instance.relativeTransform.removePrecompute()),this.markDirtyMipmap())}onMipmap(){this.markDirtyMipmap(),this.updateMipmapStatus(this.node._mipmap)}onMipmapTransform(){this.markDirtyMipmap()}dispose(){this.updateMipmapStatus(!1),this.node.mipmapEmitter.removeListener(this._mipmapListener),super.dispose()}}Lg.register("ImageSVGDrawable",CP),cy.mixInto(CP);const VP=CP;class RP extends(iP(JT)){initialize(e,t){super.initialize(e,t),this.vertexArray=this.vertexArray||new Float32Array(30),this.upperLeft=new al(0,0),this.lowerLeft=new al(0,0),this.upperRight=new al(0,0),this.lowerRight=new al(0,0),this.xyDirty=!0,this.uvDirty=!0,this.updatedOnce=!1,this.sprite=null}onAddToBlock(e){this.webglBlock=e,this.markDirty(),this.reserveSprite()}onRemoveFromBlock(e){this.unreserveSprite()}reserveSprite(){if(this.sprite){if(this.sprite.image===this.node._image)return;this.unreserveSprite()}const e=this.node.getImageWidth(),t=this.node.getImageHeight();this.sprite=e>0&&t>0?this.webglBlock.addSpriteSheetImage(this.node._image,e,t):null,this.xyDirty=!0,this.uvDirty=!0}unreserveSprite(){this.sprite&&this.webglBlock.removeSpriteSheetImage(this.sprite),this.sprite=null}markTransformDirty(){this.xyDirty=!0,super.markTransformDirty()}markPaintDirty(){this.xyDirty=!0,this.uvDirty=!0,this.markDirty()}update(){if(!super.update())return!1;if(this.reserveSprite(),!this.dirtyImageOpacity&&this.updatedOnce||(this.vertexArray[4]=this.node._imageOpacity,this.vertexArray[9]=this.node._imageOpacity,this.vertexArray[14]=this.node._imageOpacity,this.vertexArray[19]=this.node._imageOpacity,this.vertexArray[24]=this.node._imageOpacity,this.vertexArray[29]=this.node._imageOpacity),this.updatedOnce=!0,!this.sprite)return!1;if(this.uvDirty){this.uvDirty=!1;const e=this.sprite.uvBounds;this.vertexArray[2]=e.minX,this.vertexArray[3]=e.minY,this.vertexArray[7]=e.minX,this.vertexArray[8]=e.maxY,this.vertexArray[12]=e.maxX,this.vertexArray[13]=e.minY,this.vertexArray[17]=e.maxX,this.vertexArray[18]=e.minY,this.vertexArray[22]=e.minX,this.vertexArray[23]=e.maxY,this.vertexArray[27]=e.maxX,this.vertexArray[28]=e.maxY}if(this.xyDirty){this.xyDirty=!1;const e=this.node.getImageWidth(),t=this.node.getImageHeight(),i=this.instance.relativeTransform.matrix;i.multiplyVector2(this.upperLeft.setXY(0,0)),i.multiplyVector2(this.lowerLeft.setXY(0,t)),i.multiplyVector2(this.upperRight.setXY(e,0)),i.multiplyVector2(this.lowerRight.setXY(e,t)),this.vertexArray[0]=this.upperLeft.x,this.vertexArray[1]=this.upperLeft.y,this.vertexArray[5]=this.lowerLeft.x,this.vertexArray[6]=this.lowerLeft.y,this.vertexArray[10]=this.upperRight.x,this.vertexArray[11]=this.upperRight.y,this.vertexArray[15]=this.upperRight.x,this.vertexArray[16]=this.upperRight.y,this.vertexArray[20]=this.lowerLeft.x,this.vertexArray[21]=this.lowerLeft.y,this.vertexArray[25]=this.lowerRight.x,this.vertexArray[26]=this.lowerRight.y}return!0}}RP.prototype.webglRenderer=af.webglTexturedTriangles,Lg.register("ImageWebGLDrawable",RP),cy.mixInto(RP);const NP=RP;class MP extends(rP(WT)){paintCanvas(e,t,i){const n=e.context;n.beginPath(),n.moveTo(t.x1,t.y1),n.lineTo(t.x2,t.y2),t.hasPaintableStroke()&&(t.beforeCanvasStroke(e),n.stroke(),t.afterCanvasStroke(e))}}Lg.register("LineCanvasDrawable",MP),cy.mixInto(MP);const kP=MP;class LP extends(aP(KT)){initialize(e,t){super.initialize(e,t,!0,!0),this.svgElement=this.svgElement||document.createElementNS(lf,"line")}updateSVGSelf(){const e=this.svgElement;this.dirtyX1&&e.setAttribute("x1",this.node.x1),this.dirtyY1&&e.setAttribute("y1",this.node.y1),this.dirtyX2&&e.setAttribute("x2",this.node.x2),this.dirtyY2&&e.setAttribute("y2",this.node.y2),this.updateFillStrokeStyle(e)}}Lg.register("LineSVGDrawable",LP),cy.mixInto(LP);const IP=LP;class BP extends(GT(WT)){paintCanvas(e,t,i){const n=e.context;t.hasShape()&&(n.beginPath(),t._shape.writeToContext(n),t.hasFill()&&(t.beforeCanvasFill(e),n.fill(),t.afterCanvasFill(e)),t.hasPaintableStroke()&&(t.beforeCanvasStroke(e),n.stroke(),t.afterCanvasStroke(e)))}markDirtyShape(){this.markPaintDirty()}}Lg.register("PathCanvasDrawable",BP),cy.mixInto(BP);const DP=BP;class OP extends(lP(KT)){initialize(e,t){super.initialize(e,t,!0,!0),this.svgElement=this.svgElement||document.createElementNS(lf,"path")}updateSVGSelf(){const e=this.svgElement;if(this.dirtyShape){let t=this.node.hasShape()?this.node._shape.getSVGPath():"";t||(t="M0 0"),e.setAttribute("d",`${t}${ff.safari?" M0 0":""}`)}this.updateFillStrokeStyle(e)}}Lg.register("PathSVGDrawable",OP),cy.mixInto(OP);const qP=OP;class YP extends(GT(WT)){writeRectangularPath(e,t){e.beginPath(),e.moveTo(t._rectX,t._rectY),e.lineTo(t._rectX+t._rectWidth,t._rectY),e.lineTo(t._rectX+t._rectWidth,t._rectY+t._rectHeight),e.lineTo(t._rectX,t._rectY+t._rectHeight),e.closePath()}paintCanvas(e,t,i){const n=e.context;if(t.isRounded()){n.beginPath();const i=t.getMaximumArcSize(),r=Math.min(t._cornerXRadius,i),s=Math.min(t._cornerYRadius,i),a=t._rectX+r,o=t._rectX+t._rectWidth-r,l=t._rectY+s,h=t._rectY+t._rectHeight-s;r===s?(n.arc(o,l,r,-Math.PI/2,0,!1),n.arc(o,h,r,0,Math.PI/2,!1),n.arc(a,h,r,Math.PI/2,Math.PI,!1),n.arc(a,l,r,Math.PI,3*Math.PI/2,!1)):(n.ellipse(o,l,r,s,0,-Math.PI/2,0,!1),n.ellipse(o,h,r,s,0,0,Math.PI/2,!1),n.ellipse(a,h,r,s,0,Math.PI/2,Math.PI,!1),n.ellipse(a,l,r,s,0,Math.PI,3*Math.PI/2,!1)),n.closePath(),t.hasFill()&&(t.beforeCanvasFill(e),n.fill(),t.afterCanvasFill(e)),t.hasPaintableStroke()&&(t.beforeCanvasStroke(e),n.stroke(),t.afterCanvasStroke(e))}else t.hasFill()&&(t.getFillValue().transformMatrix?(this.writeRectangularPath(n,t),t.beforeCanvasFill(e),n.fill(),t.afterCanvasFill(e)):(t.beforeCanvasFill(e),n.fillRect(t._rectX,t._rectY,t._rectWidth,t._rectHeight),t.afterCanvasFill(e))),t.hasPaintableStroke()&&(t.getStrokeValue().transformMatrix?(this.writeRectangularPath(n,t),t.beforeCanvasStroke(e),n.stroke(),t.afterCanvasStroke(e)):(t.beforeCanvasStroke(e),n.strokeRect(t._rectX,t._rectY,t._rectWidth,t._rectHeight),t.afterCanvasStroke(e)))}markDirtyRectangle(){this.markPaintDirty()}markDirtyX(){this.markDirtyRectangle()}markDirtyY(){this.markDirtyRectangle()}markDirtyWidth(){this.markDirtyRectangle()}markDirtyHeight(){this.markDirtyRectangle()}markDirtyCornerXRadius(){this.markDirtyRectangle()}markDirtyCornerYRadius(){this.markDirtyRectangle()}}Lg.register("RectangleCanvasDrawable",YP),cy.mixInto(YP);const HP=YP,GP=Mh.pool.fetch();class FP extends(uP(jT)){constructor(e,t){super(e,t),_f.prepareForTransform(this.domElement)}initialize(e,t){if(super.initialize(e,t),!this.fillElement||!this.strokeElement){const e=document.createElement("div");this.fillElement=e,e.style.display="block",e.style.position="absolute",e.style.left="0",e.style.top="0",e.style.pointerEvents="none";const t=document.createElement("div");this.strokeElement=t,t.style.display="block",t.style.position="absolute",t.style.left="0",t.style.top="0",t.style.pointerEvents="none",e.appendChild(t)}this.domElement=this.fillElement}updateDOM(){const e=this.node,t=this.fillElement,i=this.strokeElement;if(this.paintDirty){const n=Math.min(e._cornerXRadius,e._cornerYRadius),r=this.dirtyCornerXRadius||this.dirtyCornerYRadius;if(this.dirtyWidth&&(t.style.width=e._rectWidth+"px"),this.dirtyHeight&&(t.style.height=e._rectHeight+"px"),r&&(t.style[Zg.borderRadius]=n+"px"),this.dirtyFill&&(t.style.backgroundColor=e.getCSSFill()),this.dirtyStroke&&(e.hasStroke()?i.style.borderStyle="solid":i.style.borderStyle="none"),e.hasStroke()){const t=!this.hadStroke;(t||this.dirtyWidth||this.dirtyLineWidth)&&(i.style.width=e._rectWidth-e.getLineWidth()+"px"),(t||this.dirtyHeight||this.dirtyLineWidth)&&(i.style.height=e._rectHeight-e.getLineWidth()+"px"),(t||this.dirtyLineWidth)&&(i.style.left=-e.getLineWidth()/2+"px",i.style.top=-e.getLineWidth()/2+"px",i.style.borderWidth=e.getLineWidth()+"px"),(t||this.dirtyStroke)&&(i.style.borderColor=e.getSimpleCSSStroke()),(t||r||this.dirtyLineWidth||this.dirtyLineOptions)&&(i.style[Zg.borderRadius]=e.isRounded()||"round"===e.getLineJoin()?n+e.getLineWidth()/2+"px":"0")}}if(this.transformDirty||this.dirtyX||this.dirtyY){GP.set(this.getTransformMatrix());const t=Mh.translation(e._rectX,e._rectY);GP.multiplyMatrix(t),t.freeToPool(),_f.applyPreparedTransform(GP,this.fillElement)}this.setToCleanState(),this.cleanPaintableState(),this.transformDirty=!1}dispose(){super.dispose()}}Lg.register("RectangleDOMDrawable",FP),cy.mixInto(FP);const zP=FP;class UP extends(uP(KT)){initialize(e,t){super.initialize(e,t,!0,!0),this.lastArcW=-1,this.lastArcH=-1,this.svgElement=this.svgElement||document.createElementNS(lf,"rect")}updateSVGSelf(){const e=this.svgElement;if(this.dirtyX&&e.setAttribute("x",this.node._rectX),this.dirtyY&&e.setAttribute("y",this.node._rectY),this.dirtyWidth&&e.setAttribute("width",this.node._rectWidth),this.dirtyHeight&&e.setAttribute("height",this.node._rectHeight),this.dirtyCornerXRadius||this.dirtyCornerYRadius||this.dirtyWidth||this.dirtyHeight){let t=0,i=0;if(this.node.isRounded()){const e=this.node.getMaximumArcSize();t=Math.min(this.node._cornerXRadius,e),i=Math.min(this.node._cornerYRadius,e)}t!==this.lastArcW&&(this.lastArcW=t,e.setAttribute("rx",t)),i!==this.lastArcH&&(this.lastArcH=i,e.setAttribute("ry",i))}this.updateFillStrokeStyle(e)}}Lg.register("RectangleSVGDrawable",UP),cy.mixInto(UP);const WP=UP,XP=new Hg("transparent");class jP extends(uP(JT)){initialize(e,t){super.initialize(e,t),this.vertexArray||(this.vertexArray=new Float32Array(36)),this.upperLeft=new al(0,0),this.lowerLeft=new al(0,0),this.upperRight=new al(0,0),this.lowerRight=new al(0,0),this.transformDirty=!0,this.includeVertices=!0}onAddToBlock(e){this.webglBlock=e,this.markDirty()}onRemoveFromBlock(e){}markTransformDirty(){this.transformDirty=!0,super.markTransformDirty()}update(){if(!super.update())return!1;if(this.dirtyFill&&(this.includeVertices=this.node.hasFill(),this.includeVertices)){const e=this.node.fill instanceof _g?this.node.fill.value:this.node.fill,t=XP.set(e),i=t.red/255,n=t.green/255,r=t.blue/255,s=t.alpha;for(let a=0;a<6;a++){const e=6*a;this.vertexArray[2+e]=i,this.vertexArray[3+e]=n,this.vertexArray[4+e]=r,this.vertexArray[5+e]=s}}if(this.transformDirty||this.dirtyX||this.dirtyY||this.dirtyWidth||this.dirtyHeight){this.transformDirty=!1;const e=this.node._rectX,t=this.node._rectY,i=this.node._rectWidth,n=this.node._rectHeight,r=this.instance.relativeTransform.matrix;r.multiplyVector2(this.upperLeft.setXY(e,t)),r.multiplyVector2(this.lowerLeft.setXY(e,t+n)),r.multiplyVector2(this.upperRight.setXY(e+i,t)),r.multiplyVector2(this.lowerRight.setXY(e+i,t+n)),this.vertexArray[0]=this.upperLeft.x,this.vertexArray[1]=this.upperLeft.y,this.vertexArray[6]=this.lowerLeft.x,this.vertexArray[7]=this.lowerLeft.y,this.vertexArray[12]=this.upperRight.x,this.vertexArray[13]=this.upperRight.y,this.vertexArray[18]=this.upperRight.x,this.vertexArray[19]=this.upperRight.y,this.vertexArray[24]=this.lowerLeft.x,this.vertexArray[25]=this.lowerLeft.y,this.vertexArray[30]=this.lowerRight.x,this.vertexArray[31]=this.lowerRight.y}return this.setToCleanState(),this.cleanPaintableState(),!0}}jP.prototype.webglRenderer=af.webglVertexColorPolygons,Lg.register("RectangleWebGLDrawable",jP),cy.mixInto(jP);const QP=jP;class KP extends WT{paintCanvas(e,t,i){const n=tA.getApproximateMatrixScale(i)*(window.devicePixelRatio||1),r=t._spriteInstances.length;for(let s=0;s<r;s++){const r=t._spriteInstances[s],a=r.sprite.imageProperty.value,o=1!==r.alpha||1!==a.imageOpacity,l=a._mipmap&&a.hasMipmaps();if(o&&(e.context.save(),e.context.globalAlpha*=r.alpha*a.imageOpacity),r.transformType===Py.TRANSLATION&&i.isTranslation())if(l){const t=a.getMipmapLevelFromScale(n,tA.CANVAS_MIPMAP_BIAS_ADJUSTMENT),i=a.getMipmapCanvas(t),s=Math.pow(2,t);e.context.drawImage(i,r.matrix.m02()-a.offset.x,r.matrix.m12()-a.offset.y,i.width*s,i.height*s)}else e.context.drawImage(a.image,r.matrix.m02()-a.offset.x,r.matrix.m12()-a.offset.y);else{if(e.context.save(),r.matrix.canvasAppendTransform(e.context),l){const t=a.getMipmapLevelFromScale(n*tA.getApproximateMatrixScale(r.matrix),tA.CANVAS_MIPMAP_BIAS_ADJUSTMENT),i=a.getMipmapCanvas(t),s=Math.pow(2,t);e.context.drawImage(i,-a.offset.x,-a.offset.y,i.width*s,i.height*s)}else e.context.drawImage(a.image,-a.offset.x,-a.offset.y);e.context.restore()}o&&e.context.restore()}}}Lg.register("SpritesCanvasDrawable",KP),cy.mixInto(KP);const ZP=KP,JP=new al(0,0),$P=new al(0,0),eC=new al(0,0),tC=new al(0,0);class iC extends JT{initialize(e,t){super.initialize(e,t),this.contextChangeListener=this.onWebGLContextChange.bind(this),this.spriteSheet=new Ly(!0),this.spriteImageUVMap={},this.vertexArray=new Float32Array(3840),this.transformMatrixArray=new Float32Array(9),this.spriteChangeListener=this.onSpriteChange.bind(this),this.node._sprites.forEach(e=>{e.imageProperty.lazyLink(this.spriteChangeListener),this.addSpriteImage(e.imageProperty.value)}),this.hasDrawn=!1}addSpriteImage(e){this.spriteImageUVMap[e.id]=this.spriteSheet.addImage(e.image,e.image.width,e.image.height).uvBounds}removeSpriteImage(e){this.spriteSheet.removeImage(e.image),delete this.spriteImageUVMap[e.id]}onSpriteChange(e,t){this.removeSpriteImage(t),this.addSpriteImage(e)}setup(){const e=this.webGLBlock.gl;this.spriteSheet.initializeContext(e),this.shaderProgram=new By(e,["attribute vec2 aVertex;","attribute vec2 aTextureCoord;","attribute float aAlpha;","varying vec2 vTextureCoord;","varying float vAlpha;","uniform mat3 uProjectionMatrix;","uniform mat3 uTransformMatrix;","void main() {","  vTextureCoord = aTextureCoord;","  vAlpha = aAlpha;","  vec3 ndc = uProjectionMatrix * ( uTransformMatrix * vec3( aVertex, 1.0 ) );","  gl_Position = vec4( ndc.xy, 0.0, 1.0 );","}"].join("\n"),["precision mediump float;","varying vec2 vTextureCoord;","varying float vAlpha;","uniform sampler2D uTexture;","void main() {","  vec4 color = texture2D( uTexture, vTextureCoord, -0.7 );","  color.a *= vAlpha;","  gl_FragColor = color;","}"].join("\n"),{attributes:["aVertex","aTextureCoord","aAlpha"],uniforms:["uTexture","uProjectionMatrix","uTransformMatrix"]}),this.vertexBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertexArray,e.DYNAMIC_DRAW)}onWebGLContextChange(){this.setup()}onAddToBlock(e){this.webGLBlock=e,this.setup(),e.glChangedEmitter.addListener(this.contextChangeListener)}onRemoveFromBlock(e){e.glChangedEmitter.removeListener(this.contextChangeListener)}draw(){const e=this.node._spriteInstances.length;if(0===e)return 0;this.spriteSheet.updateTexture(),this.shaderProgram.use();let t=0,i=!1;for(;30*e>this.vertexArray.length;)this.vertexArray=new Float32Array(2*this.vertexArray.length),i=!0;for(let a=0;a<e;a++){const e=this.node._spriteInstances[a],i=e.sprite.imageProperty.value,n=e.alpha*i.imageOpacity,r=this.spriteImageUVMap[i.id],s=e.matrix,o=i.offset,l=i.image.width,h=i.image.height;s.multiplyVector2(JP.setXY(-o.x,-o.y)),s.multiplyVector2($P.setXY(-o.x,h-o.y)),s.multiplyVector2(eC.setXY(l-o.x,-o.y)),s.multiplyVector2(tC.setXY(l-o.x,h-o.y)),this.vertexArray[t+0]=JP.x,this.vertexArray[t+1]=JP.y,this.vertexArray[t+2]=r.minX,this.vertexArray[t+3]=r.minY,this.vertexArray[t+4]=n,this.vertexArray[t+5]=$P.x,this.vertexArray[t+6]=$P.y,this.vertexArray[t+7]=r.minX,this.vertexArray[t+8]=r.maxY,this.vertexArray[t+9]=n,this.vertexArray[t+10]=eC.x,this.vertexArray[t+11]=eC.y,this.vertexArray[t+12]=r.maxX,this.vertexArray[t+13]=r.minY,this.vertexArray[t+14]=n,this.vertexArray[t+15]=eC.x,this.vertexArray[t+16]=eC.y,this.vertexArray[t+17]=r.maxX,this.vertexArray[t+18]=r.minY,this.vertexArray[t+19]=n,this.vertexArray[t+20]=$P.x,this.vertexArray[t+21]=$P.y,this.vertexArray[t+22]=r.minX,this.vertexArray[t+23]=r.maxY,this.vertexArray[t+24]=n,this.vertexArray[t+25]=tC.x,this.vertexArray[t+26]=tC.y,this.vertexArray[t+27]=r.maxX,this.vertexArray[t+28]=r.maxY,this.vertexArray[t+29]=n,t+=30}const n=this.webGLBlock.gl;n.uniformMatrix3fv(this.shaderProgram.uniformLocations.uProjectionMatrix,!1,this.webGLBlock.projectionMatrixArray),this.instance.relativeTransform.matrix.copyToArray(this.transformMatrixArray),n.uniformMatrix3fv(this.shaderProgram.uniformLocations.uTransformMatrix,!1,this.transformMatrixArray),n.bindBuffer(n.ARRAY_BUFFER,this.vertexBuffer),i?n.bufferData(n.ARRAY_BUFFER,this.vertexArray,n.DYNAMIC_DRAW):n.bufferSubData(n.ARRAY_BUFFER,0,this.vertexArray.subarray(0,t));const r=Float32Array.BYTES_PER_ELEMENT,s=5*r;return n.vertexAttribPointer(this.shaderProgram.attributeLocations.aVertex,2,n.FLOAT,!1,s,0*r),n.vertexAttribPointer(this.shaderProgram.attributeLocations.aTextureCoord,2,n.FLOAT,!1,s,2*r),n.vertexAttribPointer(this.shaderProgram.attributeLocations.aAlpha,1,n.FLOAT,!1,s,4*r),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,this.spriteSheet.texture),n.uniform1i(this.shaderProgram.uniformLocations.uTexture,0),n.drawArrays(n.TRIANGLES,0,t/5),n.bindTexture(n.TEXTURE_2D,null),this.shaderProgram.unuse(),!this.hasDrawn&&ff.safari&&ym.setTimeout(()=>this.markDirty(),0),this.hasDrawn=!0,1}dispose(){this.node._sprites.forEach(e=>{e.imageProperty.unlink(this.spriteChangeListener)}),this.webGLBlock&&(this.webGLBlock=null),super.dispose()}markPaintDirty(){this.markDirty()}}iC.prototype.webglRenderer=af.webglCustom,Lg.register("SpritesWebGLDrawable",iC),cy.mixInto(iC);const nC=iC;class rC extends(GT(WT)){paintCanvas(e,t,i){const n=e.context;(t.hasFill()||t.hasPaintableStroke())&&(e.setFont(t._font.getFont()),e.setDirection("ltr")),t.hasFill()&&(t.beforeCanvasFill(e),n.fillText(t.renderedText,0,0),t.afterCanvasFill(e)),t.hasPaintableStroke()&&(t.beforeCanvasStroke(e),n.strokeText(t.renderedText,0,0),t.afterCanvasStroke(e))}markDirtyText(){this.markPaintDirty()}markDirtyFont(){this.markPaintDirty()}markDirtyBounds(){this.markPaintDirty()}}Lg.register("TextCanvasDrawable",rC),cy.mixInto(rC);const sC=rC,aC=Mh.pool.fetch();class oC extends(dP(jT)){constructor(e,t){super(e,t),_f.prepareForTransform(this.domElement)}initialize(e,t){super.initialize(e,t),this.domElement||(this.domElement=document.createElement("div"),this.domElement.style.display="block",this.domElement.style.position="absolute",this.domElement.style.pointerEvents="none",this.domElement.style.left="0",this.domElement.style.top="0",this.domElement.setAttribute("dir","ltr"))}updateDOM(){const e=this.node,t=this.domElement;if(this.paintDirty&&(this.dirtyFont&&(t.style.font=e.getFont()),this.dirtyStroke&&(t.style.color=e.getCSSFill()),this.dirtyBounds&&(t.style.width=e.getSelfBounds().width+"px",t.style.height=e.getSelfBounds().height+"px"),this.dirtyText&&(t.textContent=e.renderedText)),this.transformDirty||this.dirtyText||this.dirtyFont||this.dirtyBounds){const i=e.getSelfBounds().minY;aC.set(this.getTransformMatrix());const n=Mh.translation(0,i);aC.multiplyMatrix(n),n.freeToPool(),_f.applyPreparedTransform(aC,t)}this.setToCleanState(),this.cleanPaintableState(),this.transformDirty=!1}dispose(){super.dispose()}}Lg.register("TextDOMDrawable",oC),cy.mixInto(oC);const lC=oC,hC=!ff.edge;class uC extends(dP(KT)){initialize(e,t){if(super.initialize(e,t,!0,!0),this.hasLength=!1,!this.svgElement){const e=document.createElementNS(lf,"text");this.svgElement=e,e.appendChild(document.createTextNode("")),e.setAttribute("dominant-baseline","alphabetic"),e.setAttribute("text-rendering","geometricPrecision"),e.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),e.setAttribute("direction","ltr")}}updateSVGSelf(){const e=this.svgElement;if(this.dirtyFont&&(e.setAttribute("font-family",this.node._font.getFamily()),e.setAttribute("font-size",this.node._font.getSize()),e.setAttribute("font-style",this.node._font.getStyle()),e.setAttribute("font-weight",this.node._font.getWeight()),e.setAttribute("font-stretch",this.node._font.getStretch())),this.dirtyText&&(e.lastChild.nodeValue=_f.safariEmbeddingMarkWorkaround(this.node.renderedText)),this.dirtyBounds&&hC){"accurate"!==this.node._boundsMethod&&isFinite(this.node.selfBounds.width)?(this.hasLength||(this.hasLength=!0,e.setAttribute("lengthAdjust","spacingAndGlyphs")),e.setAttribute("textLength",this.node.selfBounds.width)):this.hasLength&&(this.hasLength=!1,e.removeAttribute("lengthAdjust"),e.removeAttribute("textLength"))}this.updateFillStrokeStyle(e)}}Lg.register("TextSVGDrawable",uC),cy.mixInto(uC);const cC=uC;class dC extends JT{initialize(e,t){super.initialize(e,t),this.contextChangeListener=this.contextChangeListener||this.onWebGLContextChange.bind(this),this.painter=null}createPainter(){return new(0,this.node.painterType)(this.webGLBlock.gl,this.node)}onWebGLContextChange(){this.painter=this.createPainter()}onAddToBlock(e){this.webGLBlock=e,this.painter=this.createPainter(),e.glChangedEmitter.addListener(this.contextChangeListener)}onRemoveFromBlock(e){e.glChangedEmitter.removeListener(this.contextChangeListener)}draw(){const e=this.instance.relativeTransform.matrix,t=this.painter.paint(e,this.webGLBlock.projectionMatrix);return t}dispose(){this.painter.dispose(),this.painter=null,this.webGLBlock&&(this.webGLBlock=null),super.dispose()}markPaintDirty(){this.markDirty()}get shaderAttributes(){return this.node.shaderAttributes}}dC.prototype.webglRenderer=af.webglCustom,Lg.register("WebGLNodeDrawable",dC),cy.mixInto(dC);const pC=dC;class mC extends OT{constructor(e,t){super(),this.initialize(e,t)}initialize(e,t){super.initialize(e),this.instance=t}stitch(e,t,i,n){}}Lg.register("InlineCanvasCacheDrawable",mC);const gC=mC;class fC extends OT{constructor(e,t,i,n){super(),this.initialize(e,t,i,n)}initialize(e,t,i,n){super.initialize(t),this.instance=i,this.sharedInstance=n}}Lg.register("SharedCanvasCacheDrawable",fC);const yC=fC;class EC{constructor(e){this.instance=e}initialize(e,t){return this.display=e,this.trail=t,this.node=t&&t.lastNode(),this.transformDirty=!0,this.nodeTransformListener=this.nodeTransformListener||this.onNodeTransformDirty.bind(this),this.matrix=this.matrix||Mh.identity(),this.relativeSelfDirty=!0,this.relativeChildrenListenersCount=0,this.relativePrecomputeCount=0,this.relativeChildrenPrecomputeCount=0,this.relativeFrameId=-1,this.relativeChildDirtyFrame=e?e._frameId:0,this.relativeTransformListeners=Yp(this.relativeTransformListeners),this}get parent(){return this.instance.parent?this.instance.parent.relativeTransform:null}addInstance(e){e.stateless||(e.relativeTransform.hasAncestorListenerNeed()&&this.incrementTransformListenerChildren(),e.relativeTransform.hasAncestorComputeNeed()&&this.incrementTransformPrecomputeChildren()),e.relativeTransform.forceMarkTransformDirty()}removeInstance(e){e.relativeTransform.hasAncestorListenerNeed()&&this.decrementTransformListenerChildren(),e.relativeTransform.hasAncestorComputeNeed()&&this.decrementTransformPrecomputeChildren()}attachNodeListeners(){this.node.transformEmitter.addListener(this.nodeTransformListener)}detachNodeListeners(){this.node.transformEmitter.removeListener(this.nodeTransformListener)}hasDescendantListenerNeed(){return this.instance.isTransformed?this.relativeChildrenListenersCount>0:this.relativeChildrenListenersCount>0||this.relativeTransformListeners.length>0}hasAncestorListenerNeed(){return this.instance.isTransformed?this.relativeTransformListeners.length>0:this.relativeChildrenListenersCount>0||this.relativeTransformListeners.length>0}hasSelfListenerNeed(){return this.relativeTransformListeners.length>0}incrementTransformListenerChildren(){const e=this.hasAncestorListenerNeed();this.relativeChildrenListenersCount++,e!==this.hasAncestorListenerNeed()&&this.parent&&this.parent.incrementTransformListenerChildren()}decrementTransformListenerChildren(){const e=this.hasAncestorListenerNeed();this.relativeChildrenListenersCount--,e!==this.hasAncestorListenerNeed()&&this.parent&&this.parent.decrementTransformListenerChildren()}addListener(e){const t=this.hasAncestorListenerNeed();this.relativeTransformListeners.push(e),t!==this.hasAncestorListenerNeed()&&(this.parent&&this.parent.incrementTransformListenerChildren(),this.hasAncestorComputeNeed()||this.forceMarkTransformDirty())}removeListener(e){const t=this.hasAncestorListenerNeed();this.relativeTransformListeners.splice(_.indexOf(this.relativeTransformListeners,e),1),t!==this.hasAncestorListenerNeed()&&this.parent&&this.parent.decrementTransformListenerChildren()}hasDescendantComputeNeed(){return this.instance.isTransformed?this.relativeChildrenPrecomputeCount>0:this.relativeChildrenPrecomputeCount>0||this.relativePrecomputeCount>0}hasAncestorComputeNeed(){return this.instance.isTransformed?this.relativePrecomputeCount>0:this.relativeChildrenPrecomputeCount>0||this.relativePrecomputeCount>0}hasSelfComputeNeed(){return this.relativePrecomputeCount>0}incrementTransformPrecomputeChildren(){const e=this.hasAncestorComputeNeed();this.relativeChildrenPrecomputeCount++,e!==this.hasAncestorComputeNeed()&&this.parent&&this.parent.incrementTransformPrecomputeChildren()}decrementTransformPrecomputeChildren(){const e=this.hasAncestorComputeNeed();this.relativeChildrenPrecomputeCount--,e!==this.hasAncestorComputeNeed()&&this.parent&&this.parent.decrementTransformPrecomputeChildren()}addPrecompute(){const e=this.hasAncestorComputeNeed();this.relativePrecomputeCount++,e!==this.hasAncestorComputeNeed()&&(this.parent&&this.parent.incrementTransformPrecomputeChildren(),this.hasAncestorListenerNeed()||this.forceMarkTransformDirty())}removePrecompute(){const e=this.hasAncestorComputeNeed();this.relativePrecomputeCount--,e!==this.hasAncestorComputeNeed()&&this.parent&&this.parent.decrementTransformPrecomputeChildren()}onNodeTransformDirty(){this.transformDirty||this.forceMarkTransformDirty()}forceMarkTransformDirty(){this.transformDirty=!0,this.relativeSelfDirty=!0;const e=this.display._frameId;let t=this.instance.parent;for(;t&&t.relativeTransform.relativeChildDirtyFrame!==e;){const i=t.parent,n=t.isTransformed;if(t.relativeTransform.relativeChildDirtyFrame=e,null===i){this.display.markTransformRootDirty(t,n);break}if(n){this.display.markTransformRootDirty(t,!0);break}t=i}}computeRelativeTransform(){const e=this.node.getMatrix();this.instance.parent&&!this.instance.parent.isTransformed?(this.matrix.set(this.parent.matrix),this.matrix.multiplyMatrix(e)):this.matrix.set(e),this.relativeFrameId=this.display._frameId,this.relativeSelfDirty=!1}isValidationNotNeeded(){return this.hasAncestorComputeNeed()||this.relativeFrameId===this.display._frameId}validate(){if(!this.isValidationNotNeeded()&&(this.instance.parent&&!this.instance.parent.isTransformed&&this.parent.validate(),this.relativeSelfDirty)){this.computeRelativeTransform();const e=this.instance.children.length;for(let t=0;t<e;t++)this.instance.children[t].relativeTransform.relativeSelfDirty=!0}}updateTransformListenersAndCompute(e,t,i,n){let r,s;if(n)for(r=this.instance.children.length,s=0;s<r;s++)this.instance.children[s].relativeTransform.updateTransformListenersAndCompute(!1,!1,i,!1);else{const a=e||this.relativeSelfDirty,o=a||this.relativeChildDirtyFrame===i,l=this.hasDescendantComputeNeed(),h=this.hasDescendantListenerNeed(),u=this.hasSelfComputeNeed(),c=this.hasSelfListenerNeed();if(l||!a||t||(this.relativeSelfDirty=!0),!o||!l&&!h&&!u&&!c)return;if(a&&(l||u)&&this.computeRelativeTransform(),this.transformDirty&&(this.transformDirty=!1),this.notifyRelativeTransformListeners(),!this.instance.isTransformed||n){const e=a&&!(l||u);for(r=this.instance.children.length,s=0;s<r;s++)this.instance.children[s].relativeTransform.updateTransformListenersAndCompute(a,e,i,!1)}}}notifyRelativeTransformListeners(){const e=this.relativeTransformListeners.length;for(let t=0;t<e;t++)this.relativeTransformListeners[t]()}audit(e,t){}}Lg.register("RelativeTransform",EC);const vC=EC;class AC{constructor(e,t){this.initialize(e,t)}initialize(e,t){this.nextChangeInterval=null,this.drawableBefore=e,this.drawableAfter=t,this.collapsedEmpty=!1}dispose(){this.nextChangeInterval=null,this.drawableBefore=null,this.drawableAfter=null,this.freeToPool()}constrict(){let e=!1;if(this.isEmpty())return!0;for(;this.drawableBefore&&this.drawableBefore.nextDrawable===this.drawableBefore.oldNextDrawable;)if(this.drawableBefore=this.drawableBefore.nextDrawable,e=!0,this.drawableBefore||(this.collapsedEmpty=!0),this.isEmpty())return!0;for(;this.drawableAfter&&this.drawableAfter.previousDrawable===this.drawableAfter.oldPreviousDrawable;)if(this.drawableAfter=this.drawableAfter.previousDrawable,e=!0,this.drawableAfter||(this.collapsedEmpty=!0),this.isEmpty())return!0;return e}isEmpty(){return this.collapsedEmpty||null!==this.drawableBefore&&this.drawableBefore===this.drawableAfter}getOldInternalDrawableCount(e,t){const i=this.drawableBefore?this.drawableBefore.oldNextDrawable:e,n=this.drawableAfter;let r=0;for(let s=i;s!==n;s=s.oldNextDrawable)r++;return r}getNewInternalDrawableCount(e,t){const i=this.drawableBefore?this.drawableBefore.nextDrawable:e,n=this.drawableAfter;let r=0;for(let s=i;s!==n;s=s.nextDrawable)r++;return r}static newForDisplay(e,t,i){const n=AC.createFromPool(e,t);return i.markChangeIntervalToDispose(n),n}}Lg.register("ChangeInterval",AC),cy.mixInto(AC);const bC=AC;class SC{constructor(e){this.instance=e}initialize(e,t){return this.display=e,this.trail=t,this.node=t&&t.lastNode(),this.selfFittable=!!t&&this.isSelfFitSupported(),this.ancestorsFittable=this.selfFittable,this.subtreeUnfittableCount=this.selfFittable?0:1,this.subtreeFittabilityChangeEmitter=this.subtreeFittabilityChangeEmitter||new np,this}get parent(){return this.instance.parent?this.instance.parent.fittability:null}checkSelfFittability(){const e=this.isSelfFitSupported();this.selfFittable!==e&&this.updateSelfFittable()}isSelfFitSupported(){return!this.node.isPreventFit()}markSubtreeFittable(){if(!this.selfFittable)return;this.ancestorsFittable=!0;const e=this.instance.children;for(let t=0;t<e.length;t++)e[t].fittability.markSubtreeFittable();this.instance.updateDrawableFittability(!0)}markSubtreeUnfittable(){if(!this.ancestorsFittable)return;this.ancestorsFittable=!1;const e=this.instance.children;for(let t=0;t<e.length;t++)e[t].fittability.markSubtreeUnfittable();this.instance.updateDrawableFittability(!1)}updateSelfFittable(){const e=this.isSelfFitSupported();this.selfFittable=e,!this.selfFittable||this.parent&&!this.parent.ancestorsFittable?this.selfFittable||this.markSubtreeUnfittable():this.markSubtreeFittable(),this.selfFittable?this.decrementSubtreeUnfittableCount():this.incrementSubtreeUnfittableCount()}incrementSubtreeUnfittableCount(){this.subtreeUnfittableCount++,1===this.subtreeUnfittableCount&&(this.parent&&this.parent.incrementSubtreeUnfittableCount(),this.subtreeFittabilityChangeEmitter.emit())}decrementSubtreeUnfittableCount(){this.subtreeUnfittableCount--,0===this.subtreeUnfittableCount&&(this.parent&&this.parent.decrementSubtreeUnfittableCount(),this.subtreeFittabilityChangeEmitter.emit())}onInsert(e){this.ancestorsFittable||e.markSubtreeUnfittable(),e.subtreeUnfittableCount>0&&this.incrementSubtreeUnfittableCount()}onRemove(e){this.ancestorsFittable||e.markSubtreeFittable(),e.subtreeUnfittableCount>0&&this.decrementSubtreeUnfittableCount()}audit(){0}}Lg.register("Fittability",SC);const _C=SC;let xC=1;class wC{constructor(e,t,i){this.id="group"+xC++,this.initialize(e,t,i)}initialize(e,t,i){this.block=e,this.instance=t,this.node=t.trail.lastNode(),this.parent=i,this.children=Yp(this.children),this.hasSelfDrawable=!1,this.selfDrawable=null,this.dirty=!0,this.willApplyTransforms=this.block.transformRootInstance.trail.nodes.length<this.instance.trail.nodes.length,this.willApplyFilters=this.block.filterRootInstance.trail.nodes.length<this.instance.trail.nodes.length,this.transformDirty=!0,this.hasTransform=void 0!==this.hasTransform&&this.hasTransform,this.transformDirtyListener=this.transformDirtyListener||this.markTransformDirty.bind(this),this.willApplyTransforms&&this.node.transformEmitter.addListener(this.transformDirtyListener),this.filterDirty=!0,this.visibilityDirty=!0,this.clipDirty=!0,this.filterElement=this.filterElement||null,this.hasOpacity=void 0!==this.hasOpacity&&this.hasOpacity,this.hasFilter=!1,this.clipDefinition=void 0!==this.clipDefinition?this.clipDefinition:null,this.clipPath=void 0!==this.clipPath?this.clipPath:null,this.filterChangeListener=this.filterChangeListener||this.onFilterChange.bind(this),this.visibilityDirtyListener=this.visibilityDirtyListener||this.onVisibleChange.bind(this),this.clipDirtyListener=this.clipDirtyListener||this.onClipChange.bind(this),this.node.visibleProperty.lazyLink(this.visibilityDirtyListener),this.willApplyFilters&&this.node.filterChangeEmitter.addListener(this.filterChangeListener),this.node.clipAreaProperty.lazyLink(this.clipDirtyListener),this.orderDirty=!0,this.orderDirtyListener=this.orderDirtyListener||this.markOrderDirty.bind(this),this.node.childrenChangedEmitter.addListener(this.orderDirtyListener),this.svgGroup||(this.svgGroup=document.createElementNS(lf,"g")),this.instance.addSVGGroup(this),this.block.markDirtyGroup(this)}addSelfDrawable(e){this.selfDrawable=e,this.svgGroup.insertBefore(e.svgElement,this.children.length?this.children[0].svgGroup:null),this.hasSelfDrawable=!0}removeSelfDrawable(e){this.hasSelfDrawable=!1,this.svgGroup.removeChild(e.svgElement),this.selfDrawable=null}addChildGroup(e){this.markOrderDirty(),e.parent=this,this.children.push(e),this.svgGroup.appendChild(e.svgGroup)}removeChildGroup(e){this.markOrderDirty(),e.parent=null,this.children.splice(_.indexOf(this.children,e),1),this.svgGroup.removeChild(e.svgGroup)}markDirty(){this.dirty||(this.dirty=!0,this.block.markDirtyGroup(this))}markOrderDirty(){this.orderDirty||(this.orderDirty=!0,this.markDirty())}markTransformDirty(){this.transformDirty||(this.transformDirty=!0,this.markDirty())}onFilterChange(){this.filterDirty||(this.filterDirty=!0,this.markDirty())}onVisibleChange(){this.visibilityDirty||(this.visibilityDirty=!0,this.markDirty())}onClipChange(){this.clipDirty||(this.clipDirty=!0,this.markDirty())}update(){if(!this.block)return;const e=this.svgGroup;if(this.dirty=!1,this.transformDirty)if(this.transformDirty=!1,this.willApplyTransforms){this.node.transform.isIdentity()?this.hasTransform&&(this.hasTransform=!1,e.removeAttribute("transform")):(this.hasTransform=!0,e.setAttribute("transform",this.node.transform.getMatrix().getSVGTransform()))}else this.hasTransform&&(this.hasTransform=!1,e.removeAttribute("transform"));if(this.visibilityDirty&&(this.visibilityDirty=!1,e.style.display=this.node.isVisible()?"":"none"),this.filterDirty){this.filterDirty=!1;const t=this.node.effectiveOpacity;this.willApplyFilters&&1!==t?(this.hasOpacity=!0,e.setAttribute("opacity",t)):this.hasOpacity&&(this.hasOpacity=!1,e.removeAttribute("opacity"));const i=this.willApplyFilters&&this.node._filters.length,n="filter-"+this.id;if(i){for(this.filterElement||(this.filterElement=document.createElementNS(lf,"filter"),this.filterElement.setAttribute("id",n));this.filterElement.firstChild;)this.filterElement.removeChild(this.filterElement.lastChild);let e=50,t="SourceGraphic";const i=this.node._filters.length;for(let n=0;n<i;n++){const r=this.node._filters[n],s=n===i-1?void 0:"e"+n;r.applySVGFilter(this.filterElement,t,s),e+=r.filterRegionPercentageIncrease,t=s}const r=`-${Rh(e)}%`,s=Rh(2*e+100)+"%";this.filterElement.setAttribute("x",r),this.filterElement.setAttribute("y",r),this.filterElement.setAttribute("width",s),this.filterElement.setAttribute("height",s)}i&&(this.hasFilter||this.block.defs.appendChild(this.filterElement),e.setAttribute("filter",`url(#${n})`),this.hasFilter=!0),this.hasFilter&&!i&&(e.removeAttribute("filter"),this.hasFilter=!1,this.block.defs.removeChild(this.filterElement))}if(this.clipDirty)if(this.clipDirty=!1,this.node.clipArea){if(!this.clipDefinition){const t="clip"+this.node.getId();this.clipDefinition=document.createElementNS(lf,"clipPath"),this.clipDefinition.setAttribute("id",t),this.clipDefinition.setAttribute("clipPathUnits","userSpaceOnUse"),this.block.defs.appendChild(this.clipDefinition),this.clipPath=document.createElementNS(lf,"path"),this.clipDefinition.appendChild(this.clipPath),e.setAttribute("clip-path",`url(#${t})`)}this.clipPath.setAttribute("d",this.node.clipArea.getSVGPath())}else this.clipDefinition&&(e.removeAttribute("clip-path"),this.block.defs.removeChild(this.clipDefinition),this.clipDefinition=null,this.clipPath=null);if(this.orderDirty){this.orderDirty=!1;let t=this.children.length-1;const i=this.instance.children;for(let n=i.length-1;n>=0;n--){const r=i[n].lookupSVGGroup(this.block);if(r){if(this.children[t]!==r){e.insertBefore(r.svgGroup,t+1>=this.children.length?null:this.children[t+1].svgGroup);const i=_.indexOf(this.children,r);this.children.splice(i,1),this.children.splice(t,0,r)}t--}}}}isReleasable(){return!this.hasSelfDrawable&&!this.children.length&&this.parent}dispose(){this.hasFilter&&(this.svgGroup.removeAttribute("filter"),this.hasFilter=!1,this.block.defs.removeChild(this.filterElement)),this.willApplyTransforms&&this.node.transformEmitter.removeListener(this.transformDirtyListener),this.node.visibleProperty.unlink(this.visibilityDirtyListener),this.willApplyFilters&&this.node.filterChangeEmitter.removeListener(this.filterChangeListener),this.node.clipAreaProperty.unlink(this.clipDirtyListener),this.node.childrenChangedEmitter.removeListener(this.orderDirtyListener),this.instance.active&&this.instance.removeSVGGroup(this),this.clipDefinition&&(this.svgGroup.removeAttribute("clip-path"),this.block.defs.removeChild(this.clipDefinition),this.clipDefinition=null,this.clipPath=null),this.parent=null,this.block=null,this.instance=null,this.node=null,Yp(this.children),this.selfDrawable=null,this.freeToPool()}toString(){return`SVGGroup:${this.block.toString()}_${this.instance.toString()}`}static addDrawable(e,t){wC.ensureGroupsToInstance(e,t.instance).addSelfDrawable(t)}static removeDrawable(e,t){t.instance.lookupSVGGroup(e).removeSelfDrawable(t),wC.releaseGroupsToInstance(e,t.instance)}static ensureGroupsToInstance(e,t){let i=t.lookupSVGGroup(e);if(!i){const n=wC.ensureGroupsToInstance(e,t.parent);i=wC.createFromPool(e,t,n),n.addChildGroup(i)}return i}static releaseGroupsToInstance(e,t){const i=t.lookupSVGGroup(e);if(i.isReleasable()){const t=i.parent;t.removeChildGroup(i),wC.releaseGroupsToInstance(e,t.instance),i.dispose()}}}Lg.register("SVGGroup",wC),cy.mixInto(wC);const TC=wC;class PC extends OT{initialize(e,t){super.initialize(t),this.display=e,this.drawableCount=0,this.used=!0,this.firstDrawable=null,this.lastDrawable=null,this.pendingFirstDrawable=null,this.pendingLastDrawable=null,this.previousBlock=null,this.nextBlock=null,this.zIndex=0}dispose(){this.display=null,this.firstDrawable=null,this.lastDrawable=null,this.pendingFirstDrawable=null,this.pendingLastDrawable=null,this.previousBlock=null,this.nextBlock=null,super.dispose()}addDrawable(e){this.drawableCount++,this.markDirtyDrawable(e)}removeDrawable(e){this.drawableCount--,this.markDirty()}onIntervalChange(e,t){}updateInterval(){this.pendingFirstDrawable===this.firstDrawable&&this.pendingLastDrawable===this.lastDrawable||(this.onIntervalChange(this.pendingFirstDrawable,this.pendingLastDrawable),this.firstDrawable=this.pendingFirstDrawable,this.lastDrawable=this.pendingLastDrawable)}notifyInterval(e,t){this.pendingFirstDrawable=e,this.pendingLastDrawable=t,this.updateInterval()}audit(e,t,i){0}}Lg.register("Block",PC);const CC=PC,VC=Zl.NOTHING.copy();class RC extends CC{initialize(e,t,i,n){return super.initialize(e,t),this.transformRootInstance=i,this.canBeFullDisplay=i.isDisplayRoot,this.preferredFit=n,this.fit=n,this.dirtyFit=!0,this.commonFitInstance=null,this.fitBounds=Zl.NOTHING.copy(),this.oldFitBounds=Zl.NOTHING.copy(),this.unfittableDrawableCount=0,this.dirtyFitListener=this.dirtyFitListener||this.markDirtyFit.bind(this),this.fittableListener=this.fittableListener||this.onFittabilityChange.bind(this),this.display.sizeProperty.lazyLink(this.dirtyFitListener),this}setFit(e){this.canBeFullDisplay||e!==RC.FULL_DISPLAY||(e=RC.COMMON_ANCESTOR),this.fit!==e&&(this.fit=e,this.markDirtyFit(),this.oldFitBounds.set(Zl.NOTHING),e===RC.COMMON_ANCESTOR&&this.removeCommonFitInstance())}markDirtyFit(){this.dirtyFit=!0,this.markDirty()}updateFit(){if(this.dirtyFit||this.fit!==RC.FULL_DISPLAY)if(this.dirtyFit=!1,this.fit===RC.COMMON_ANCESTOR&&null===this.commonFitInstance&&this.addCommonFitInstance(this.computeCommonAncestorInstance()),this.fit===RC.COMMON_ANCESTOR&&this.commonFitInstance.fittability.subtreeUnfittableCount>0&&this.canBeFullDisplay&&(this.oldFitBounds.set(Zl.NOTHING),this.fit=RC.FULL_DISPLAY),this.fit===RC.FULL_DISPLAY)this.fitBounds.set(Zl.NOTHING),this.setSizeFullDisplay();else{if(this.fit!==RC.COMMON_ANCESTOR)throw new Error("unknown fit");{this.fitBounds.set(this.commonFitInstance.node.getLocalBounds());let e=this.commonFitInstance;for(;e!==this.transformRootInstance;)this.fitBounds.transform(e.node.getMatrix()),e=e.parent;this.fitBounds.roundOut(),this.fitBounds.dilate(4),this.transformRootInstance.isDisplayRoot&&(VC.setMinMax(0,0,this.display.width,this.display.height),this.fitBounds.constrainBounds(VC)),this.fitBounds.isValid()||this.fitBounds.setMinMax(0,0,0,0),this.fitBounds.equals(this.oldFitBounds)||(this.oldFitBounds.set(this.fitBounds),this.setSizeFitBounds())}}}setSizeFullDisplay(){}setSizeFitBounds(){}addCommonFitInstance(e){e&&(this.commonFitInstance=e,this.commonFitInstance.fittability.subtreeFittabilityChangeEmitter.addListener(this.dirtyFitListener))}removeCommonFitInstance(){this.commonFitInstance&&(this.commonFitInstance.fittability.subtreeFittabilityChangeEmitter.removeListener(this.dirtyFitListener),this.commonFitInstance=null)}dispose(){this.display.sizeProperty.unlink(this.dirtyFitListener),this.removeCommonFitInstance(),this.transformRootInstance=null,super.dispose()}addDrawable(e){super.addDrawable(e),e.fittableProperty.lazyLink(this.fittableListener),e.fittable||this.incrementUnfittable()}removeDrawable(e){super.removeDrawable(e),e.fittableProperty.unlink(this.fittableListener),e.fittable||this.decrementUnfittable()}onFittabilityChange(e){e?this.decrementUnfittable():this.incrementUnfittable()}incrementUnfittable(){this.unfittableDrawableCount++,1===this.unfittableDrawableCount&&this.checkFitConstraints()}decrementUnfittable(){this.unfittableDrawableCount--,0===this.unfittableDrawableCount&&this.checkFitConstraints()}checkFitConstraints(){this.unfittableDrawableCount>0&&this.canBeFullDisplay?this.setFit(RC.FULL_DISPLAY):this.setFit(this.preferredFit)}computeCommonAncestorInstance(){let e=this.firstDrawable.instance,t=this.lastDrawable.instance;const i=Math.min(e.trail.length,t.trail.length);for(;e.trail.length>i;)e=e.parent;for(;t.trail.length>i;)t=t.parent;for(;e!==t;)e=e.parent,t=t.parent;return e}onIntervalChange(e,t){super.onIntervalChange(e,t),this.fit===RC.COMMON_ANCESTOR&&(this.removeCommonFitInstance(),this.markDirtyFit())}}Lg.register("FittedBlock",RC),RC.FULL_DISPLAY=1,RC.COMMON_ANCESTOR=2,RC.fitString={1:"fullDisplay",2:"commonAncestor"};const NC=RC,MC=new Mh,kC=new Mh;class LC extends NC{constructor(e,t,i,n){super(),this.initialize(e,t,i,n)}initialize(e,t,i,n){super.initialize(e,t,i,NC.COMMON_ANCESTOR),this.filterRootInstance=n,this.dirtyDrawables=Yp(this.dirtyDrawables),this.domElement||(this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.left="0",this.canvas.style.top="0",this.canvas.style.pointerEvents="none",this.canvasId=this.canvas.id="scenery-canvas"+this.id,this.context=this.canvas.getContext("2d"),this.context.save(),this.context.miterLimit=20,this.context.miterLimit=10,this.wrapper=new ey(this.canvas,this.context),this.domElement=this.canvas,this.wrapperStack=[this.wrapper]),this.wrapperStackIndex=0,this.filterListenerCountMap=this.filterListenerCountMap||{},_f.prepareForTransform(this.canvas),_f.unsetTransform(this.canvas),this.canvasDrawOffset=new al(0,0),this.currentDrawable=null,this.clipDirty=!0,this.clipCount=0,this.backingScale=t&af.bitmaskCanvasLowResolution?1:_f.backingScale(this.context),this.clipDirtyListener=this.markDirty.bind(this),this.opacityDirtyListener=this.markDirty.bind(this)}setSizeFullDisplay(){const e=this.display.getSize();this.canvas.width=e.width*this.backingScale,this.canvas.height=e.height*this.backingScale,this.canvas.style.width=e.width+"px",this.canvas.style.height=e.height+"px",this.wrapper.resetStyles(),this.canvasDrawOffset.setXY(0,0),_f.unsetTransform(this.canvas)}setSizeFitBounds(){const e=this.fitBounds.minX,t=this.fitBounds.minY;this.canvasDrawOffset.setXY(-e,-t),_f.setTransform(`matrix(1,0,0,1,${e},${t})`,this.canvas),this.canvas.width=this.fitBounds.width*this.backingScale,this.canvas.height=this.fitBounds.height*this.backingScale,this.canvas.style.width=this.fitBounds.width+"px",this.canvas.style.height=this.fitBounds.height+"px",this.wrapper.resetStyles()}update(){if(!super.update())return!1;for(;this.dirtyDrawables.length;)this.dirtyDrawables.pop().update();this.updateFit(),this.context.restore(),this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.save(),this.wrapper.resetStyles(),this.currentDrawable=null;for(let e=this.firstDrawable;null!==e&&(this.renderDrawable(e),e!==this.lastDrawable);e=e.nextDrawable);return this.currentDrawable&&this.walkDown(this.currentDrawable.instance.trail,0),!0}applyClip(e){this.clipDirty=!1;const t=this.wrapperStack[this.wrapperStackIndex],i=t.context;if(i.restore(),i.save(),t.resetStyles(),this.clipCount){const t=e.instance.trail;MC.rowMajor(this.backingScale,0,this.canvasDrawOffset.x*this.backingScale,0,this.backingScale,this.canvasDrawOffset.y*this.backingScale,0,0,1),kC.set(this.transformRootInstance.trail.getMatrix()).invert(),kC.multiplyMatrix(MC).canvasSetTransform(i);for(let e=0;e<t.length;e++){const n=t.nodes[e];n.getMatrix().canvasAppendTransform(i),n.hasClipArea()&&(i.beginPath(),n.clipArea.writeToContext(i),i.clip())}}}pushWrapper(){if(this.wrapperStackIndex++,this.clipDirty=!0,this.wrapperStackIndex===this.wrapperStack.length){const e=document.createElement("canvas"),t=e.getContext("2d");t.save(),this.wrapperStack.push(new ey(e,t))}const e=this.wrapperStack[this.wrapperStackIndex],t=e.context;e.setDimensions(this.canvas.width,this.canvas.height),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,this.canvas.width,this.canvas.height)}popWrapper(){this.wrapperStackIndex--,this.clipDirty=!0}walkDown(e,t){const i=this.filterRootInstance.trail.length-1;for(let n=e.length-1;n>=t;n--){const t=e.nodes[n];if(t.hasClipArea()&&(this.clipCount--,this.clipDirty=!0),n>i){if(t._filters.length){const e=this.wrapperStack[this.wrapperStackIndex],i=this.wrapperStack[this.wrapperStackIndex-1];this.popWrapper(),i.context.setTransform(1,0,0,1,0,0);const n=t._filters;let r=Zg.canvasFilter;for(let t=0;t<n.length;t++)r=r&&n[t].isDOMCompatible();if(r){let t="";for(let e=0;e<n.length;e++)t+=`${t?" ":""}${n[e].getCSSFilterString()}`;i.context.filter=t,i.context.drawImage(e.canvas,0,0),i.context.filter="none"}else{for(let t=0;t<n.length;t++)n[t].applyCanvasFilter(e);i.context.drawImage(e.canvas,0,0)}}if(1!==t.getEffectiveOpacity()){const e=this.wrapperStack[this.wrapperStackIndex],i=this.wrapperStack[this.wrapperStackIndex-1];this.popWrapper(),i.context.setTransform(1,0,0,1,0,0),i.context.globalAlpha=t.getEffectiveOpacity(),i.context.drawImage(e.canvas,0,0),i.context.globalAlpha=1}}}}walkUp(e,t){const i=this.filterRootInstance.trail.length-1;for(let n=t;n<e.length;n++){const t=e.nodes[n];n>i&&(1!==t.getEffectiveOpacity()&&this.pushWrapper(),t._filters.length&&this.pushWrapper()),t.hasClipArea()&&(this.clipCount++,this.clipDirty=!0)}}renderDrawable(e){if(!e.visible||0===this.canvas.width||0===this.canvas.height)return;const t=this.currentDrawable?e.instance.getBranchIndexTo(this.currentDrawable.instance):0;this.currentDrawable&&this.walkDown(this.currentDrawable.instance.trail,t),this.walkUp(e.instance.trail,t);const i=this.wrapperStack[this.wrapperStackIndex],n=i.context;this.clipDirty&&this.applyClip(e);const r=e.instance.relativeTransform.matrix;n.setTransform(this.backingScale,0,0,this.backingScale,this.canvasDrawOffset.x*this.backingScale,this.canvasDrawOffset.y*this.backingScale),e.instance!==this.transformRootInstance&&r.canvasAppendTransform(n),e.paintCanvas(i,e.instance.node,e.instance.relativeTransform.matrix),this.currentDrawable=e}dispose(){this.transformRootInstance=null,Yp(this.dirtyDrawables),this.canvas.width=0,this.canvas.height=0,super.dispose()}markDirtyDrawable(e){this.dirtyDrawables.push(e),this.markDirty()}addDrawable(e){super.addDrawable(e);for(let t=e.instance;t&&t!==this.filterRootInstance;t=t.parent){const e=t.node;this.filterListenerCountMap[e.id]?this.filterListenerCountMap[e.id]++:(this.filterListenerCountMap[e.id]=1,e.filterChangeEmitter.addListener(this.opacityDirtyListener),e.clipAreaProperty.lazyLink(this.clipDirtyListener))}}removeDrawable(e){for(let t=e.instance;t&&t!==this.filterRootInstance;t=t.parent){const e=t.node;this.filterListenerCountMap[e.id]--,0===this.filterListenerCountMap[e.id]&&(delete this.filterListenerCountMap[e.id],e.clipAreaProperty.unlink(this.clipDirtyListener),e.filterChangeEmitter.removeListener(this.opacityDirtyListener))}super.removeDrawable(e)}onIntervalChange(e,t){super.onIntervalChange(e,t),this.markDirty()}onPotentiallyMovedDrawable(e){e.markDirty()}toString(){return`CanvasBlock#${this.id}-${NC.fitString[this.fit]}`}}Lg.register("CanvasBlock",LC),cy.mixInto(LC);const IC=LC;class BC extends CC{constructor(e,t){super(),this.initialize(e,t)}initialize(e,t){return super.initialize(e,t.renderer),this.domDrawable=t,this.domElement=t.domElement,this}update(){return!!super.update()&&(this.domDrawable.update(),!0)}dispose(){this.domDrawable=null,this.domElement=null,super.dispose()}markDirtyDrawable(e){this.markDirty()}addDrawable(e){super.addDrawable(e)}removeDrawable(e){super.removeDrawable(e)}}Lg.register("DOMBlock",BC),cy.mixInto(BC);const DC=BC;class OC extends NC{constructor(e,t,i,n){super(),this.initialize(e,t,i,n)}initialize(e,t,i,n){super.initialize(e,t,i,NC.COMMON_ANCESTOR),this.filterRootInstance=n,this.dirtyGradients=Yp(this.dirtyGradients),this.dirtyGroups=Yp(this.dirtyGroups),this.dirtyDrawables=Yp(this.dirtyDrawables),this.paintCountMap=this.paintCountMap||new my(this.onAddPaint.bind(this),this.onRemovePaint.bind(this)),this.areReferencesReduced=!0,this.domElement||(this.svg=document.createElementNS(lf,"svg"),this.svg.style.position="absolute",this.svg.style.left="0",this.svg.style.top="0",this.svg.setAttribute("focusable",!1),this.svg.style["pointer-events"]="none",this.defs=document.createElementNS(lf,"defs"),this.svg.appendChild(this.defs),this.baseTransformGroup=document.createElementNS(lf,"g"),this.svg.appendChild(this.baseTransformGroup),this.domElement=this.svg),_f.prepareForTransform(this.svg),_f.unsetTransform(this.svg),this.baseTransformGroup.setAttribute("transform","");const r=i.trail.nodes.length>n.trail.nodes.length?n:i;return this.rootGroup=TC.createFromPool(this,r,null),this.baseTransformGroup.appendChild(this.rootGroup.svgGroup),this}onAddPaint(e){const t=e.createSVGPaint(this);return t.definition.setAttribute("id",`${e.id}-${this.id}`),this.defs.appendChild(t.definition),t}onRemovePaint(e,t){this.defs.removeChild(t.definition),t.dispose()}incrementPaint(e){this.paintCountMap.increment(e)}decrementPaint(e){this.paintCountMap.decrement(e)}markDirtyGradient(e){this.dirtyGradients.push(e),this.markDirty()}markDirtyGroup(e){this.dirtyGroups.push(e),this.markDirty(),this.areReferencesReduced&&this.display.markForReducedReferences(this),this.areReferencesReduced=!1}markDirtyDrawable(e){this.dirtyDrawables.push(e),this.markDirty(),this.areReferencesReduced&&this.display.markForReducedReferences(this),this.areReferencesReduced=!1}setSizeFullDisplay(){this.baseTransformGroup.removeAttribute("transform"),_f.unsetTransform(this.svg);const e=this.display.getSize();this.svg.setAttribute("width",e.width),this.svg.setAttribute("height",e.height)}setSizeFitBounds(){const e=this.fitBounds.minX,t=this.fitBounds.minY;this.baseTransformGroup.setAttribute("transform",`translate(${-e},${-t})`),_f.setTransform(`matrix(1,0,0,1,${e},${t})`,this.svg),this.svg.setAttribute("width",this.fitBounds.width),this.svg.setAttribute("height",this.fitBounds.height)}update(){if(!super.update())return!1;for(;this.dirtyGroups.length;){const e=this.dirtyGroups.pop();e.block===this&&e.update()}for(;this.dirtyGradients.length;)this.dirtyGradients.pop().update();for(;this.dirtyDrawables.length;){const e=this.dirtyDrawables.pop();e.parentDrawable===this&&e.update()}return this.areReferencesReduced=!0,this.updateFit(),!0}reduceReferences(){if(this.areReferencesReduced)return;let e=0,t=0;for(;e<this.dirtyGroups.length;){const i=this.dirtyGroups[e];i.block===this&&(t!==e&&(this.dirtyGroups[t]=i),t++),e++}for(;this.dirtyGroups.length>t;)this.dirtyGroups.pop();for(e=0,t=0;e<this.dirtyDrawables.length;){const i=this.dirtyDrawables[e];i.parentDrawable===this&&(t!==e&&(this.dirtyDrawables[t]=i),t++),e++}for(;this.dirtyDrawables.length>t;)this.dirtyDrawables.pop();this.areReferencesReduced=!0}dispose(){for(this.svg.setAttribute("width","0"),this.svg.setAttribute("height","0"),this.filterRootInstance=null,Yp(this.dirtyGradients),Yp(this.dirtyGroups),Yp(this.dirtyDrawables),this.paintCountMap.clear(),this.baseTransformGroup.removeChild(this.rootGroup.svgGroup),this.rootGroup.dispose(),this.rootGroup=null;this.defs.childNodes.length;)this.defs.removeChild(this.defs.childNodes[0]);super.dispose()}addDrawable(e){super.addDrawable(e),TC.addDrawable(this,e),e.updateSVGBlock(this)}removeDrawable(e){TC.removeDrawable(this,e),super.removeDrawable(e)}onIntervalChange(e,t){super.onIntervalChange(e,t)}toString(){return`SVGBlock#${this.id}-${NC.fitString[this.fit]}`}}Lg.register("SVGBlock",OC),cy.mixInto(OC);const qC=OC;class YC extends NC{constructor(e,t,i,n){super(),this.initialize(e,t,i,n)}initialize(e,t,i,n){return super.initialize(e,t,i,NC.FULL_DISPLAY),this.filterRootInstance=n,this.preserveDrawingBuffer=e._preserveDrawingBuffer,this.dirtyDrawables=Yp(this.dirtyDrawables),this.spriteSheets=this.spriteSheets||[],this.projectionMatrix=this.projectionMatrix||new Mh,this.projectionMatrixArray=new Float32Array(9),this.customProcessor=this.customProcessor||new GC,this.vertexColorPolygonsProcessor=this.vertexColorPolygonsProcessor||new FC(this.projectionMatrixArray),this.texturedTrianglesProcessor=this.texturedTrianglesProcessor||new zC(this.projectionMatrixArray),this.glChangedEmitter=new np,this.isContextLost=!1,this.contextLostListener=this.onContextLoss.bind(this),this.contextRestoreListener=this.onContextRestoration.bind(this),this.domElement||(this.domElement=document.createElement("div"),this.domElement.className="webgl-container",this.domElement.style.position="absolute",this.domElement.style.left="0",this.domElement.style.top="0",this.rebuildCanvas()),this.gl.clear(this.gl.COLOR_BUFFER_BIT),_f.prepareForTransform(this.canvas),_f.unsetTransform(this.canvas),this}rebuildCanvas(){const e=document.createElement("canvas"),t=this.getContextFromCanvas(e);t&&(this.canvas&&(this.domElement.removeChild(this.canvas),this.canvas.removeEventListener("webglcontextlost",this.contextLostListener,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoreListener,!1)),this.canvas=e,this.canvas.style.pointerEvents="none",this.canvasId=this.canvas.id="scenery-webgl"+this.id,this.canvas.addEventListener("webglcontextlost",this.contextLostListener,!1),this.canvas.addEventListener("webglcontextrestored",this.contextRestoreListener,!1),this.domElement.appendChild(this.canvas),this.setupContext(t))}setupContext(e){this.isContextLost=!1,this.gl=e,this.backingScale=_f.backingScale(this.gl),this.display._allowBackingScaleAntialiasing&&0===e.getParameter(e.SAMPLES)&&(this.backingScale*=2),this.originalBackingScale=this.backingScale,_f.applyWebGLContextDefaults(this.gl),this.markDirty(),this.dirtyFit=!0,this.customProcessor.initializeContext(this.gl),this.vertexColorPolygonsProcessor.initializeContext(this.gl),this.texturedTrianglesProcessor.initializeContext(this.gl);for(let t=0;t<this.spriteSheets.length;t++)this.spriteSheets[t].initializeContext(this.gl);this.glChangedEmitter.emit()}delayedRebuildCanvas(){const e=this;window.setTimeout((function(){e.rebuildCanvas()}))}onContextLoss(e){this.isContextLost||(this.isContextLost=!0,e.preventDefault(),this.canvas.style.display="none",this.markDirty())}onContextRestoration(e){if(this.isContextLost){const e=this.getContextFromCanvas(this.canvas);this.setupContext(e),this.canvas.style.display=""}}getContextFromCanvas(e){const t={antialias:!0,preserveDrawingBuffer:this.preserveDrawingBuffer};return e.getContext("webgl",t)||e.getContext("experimental-webgl",t)}setSizeFullDisplay(){const e=this.display.getSize();this.canvas.width=Math.ceil(e.width*this.backingScale),this.canvas.height=Math.ceil(e.height*this.backingScale),this.canvas.style.width=e.width+"px",this.canvas.style.height=e.height+"px"}setSizeFitBounds(){throw new Error("setSizeFitBounds unimplemented for WebGLBlock")}update(){if(!super.update())return!1;const e=this.gl;for(this.isContextLost&&this.display._aggressiveContextRecreation&&this.delayedRebuildCanvas();this.dirtyDrawables.length;)this.dirtyDrawables.pop().update();const t=this.spriteSheets.length;for(let r=0;r<t;r++)this.spriteSheets[r].updateTexture();this.firstDrawable&&this.firstDrawable===this.lastDrawable&&this.firstDrawable.node&&null!==this.firstDrawable.node._webglScale&&this.backingScale!==this.originalBackingScale*this.firstDrawable.node._webglScale&&(this.backingScale=this.originalBackingScale*this.firstDrawable.node._webglScale,this.dirtyFit=!0),this.updateFit(),this.projectionMatrix.rowMajor(2/this.display.width,0,-1,0,-2/this.display.height,1,0,0,1),this.projectionMatrix.copyToArray(this.projectionMatrixArray),this.preserveDrawingBuffer&&e.clear(e.COLOR_BUFFER_BIT),e.viewport(0,0,this.canvas.width,this.canvas.height);let i=null,n=0;for(let r=this.firstDrawable;null!==r;r=r.nextDrawable){if(r.visible){let e=null;r.webglRenderer===af.webglTexturedTriangles?e=this.texturedTrianglesProcessor:r.webglRenderer===af.webglCustom?e=this.customProcessor:r.webglRenderer===af.webglVertexColorPolygons&&(e=this.vertexColorPolygonsProcessor),e!==i&&(i&&(n+=i.deactivate()),i=e,i.activate()),i.processDrawable(r)}if(r===this.lastDrawable)break}return i&&(n+=i.deactivate()),0!==n||this.preserveDrawingBuffer||e.clear(e.COLOR_BUFFER_BIT),e.flush(),!0}dispose(){Yp(this.dirtyDrawables),super.dispose()}markDirtyDrawable(e){this.dirtyDrawables.push(e),this.markDirty()}addDrawable(e){super.addDrawable(e),e.onAddToBlock(this)}removeDrawable(e){let t=0;for(;(t=this.dirtyDrawables.indexOf(e,t))>=0;)this.dirtyDrawables.splice(t,1);e.onRemoveFromBlock(this),super.removeDrawable(e)}addSpriteSheetImage(e,t,i){let n=null;const r=this.spriteSheets.length;for(let s=0;s<r;s++){if(n=this.spriteSheets[s].addImage(e,t,i),n)break}if(!n){const r=new Ly(!0);if(n=r.addImage(e,t,i),r.initializeContext(this.gl),this.spriteSheets.push(r),!n)throw new Error("Attempt to load image that is too large for sprite sheets")}return n}removeSpriteSheetImage(e){e.spriteSheet.removeImage(e.image)}onIntervalChange(e,t){super.onIntervalChange(e,t),this.markDirty()}onPotentiallyMovedDrawable(e){this.markDirty()}toString(){return`WebGLBlock#${this.id}-${NC.fitString[this.fit]}`}}Lg.register("WebGLBlock",YC);class HC{activate(){}initializeContext(e){}processDrawable(e){}deactivate(){}}class GC extends HC{constructor(){super(),this.drawable=null}activate(){this.drawCount=0}processDrawable(e){this.drawable=e,this.draw()}deactivate(){return this.drawCount}draw(){if(this.drawable){const e=this.drawable.draw();this.drawCount+=e,this.drawable=null}}}class FC extends HC{constructor(e){super(),this.projectionMatrixArray=e,this.lastArrayLength=128,this.vertexArray=new Float32Array(this.lastArrayLength)}initializeContext(e){this.gl=e,this.shaderProgram=new By(e,["attribute vec2 aVertex;","attribute vec4 aColor;","varying vec4 vColor;","uniform mat3 uProjectionMatrix;","void main() {","  vColor = aColor;","  vec3 ndc = uProjectionMatrix * vec3( aVertex, 1.0 );","  gl_Position = vec4( ndc.xy, 0.0, 1.0 );","}"].join("\n"),["precision mediump float;","varying vec4 vColor;","void main() {","  gl_FragColor = vec4( vColor.rgb * vColor.a, vColor.a );","}"].join("\n"),{attributes:["aVertex","aColor"],uniforms:["uProjectionMatrix"]}),this.vertexBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertexArray,e.DYNAMIC_DRAW)}activate(){this.shaderProgram.use(),this.vertexArrayIndex=0,this.drawCount=0}processDrawable(e){if(e.includeVertices){const t=e.vertexArray;for(;t.length+this.vertexArrayIndex>this.vertexArray.length;){const e=new Float32Array(2*this.vertexArray.length);e.set(this.vertexArray),this.vertexArray=e}this.vertexArray.set(t,this.vertexArrayIndex),this.vertexArrayIndex+=t.length,this.drawCount++}}deactivate(){return this.drawCount&&this.draw(),this.shaderProgram.unuse(),this.drawCount}draw(){const e=this.gl;e.uniformMatrix3fv(this.shaderProgram.uniformLocations.uProjectionMatrix,!1,this.projectionMatrixArray),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray.length>this.lastArrayLength?e.bufferData(e.ARRAY_BUFFER,this.vertexArray,e.DYNAMIC_DRAW):e.bufferSubData(e.ARRAY_BUFFER,0,this.vertexArray.subarray(0,this.vertexArrayIndex));const t=Float32Array.BYTES_PER_ELEMENT,i=6*t;e.vertexAttribPointer(this.shaderProgram.attributeLocations.aVertex,2,e.FLOAT,!1,i,0*t),e.vertexAttribPointer(this.shaderProgram.attributeLocations.aColor,4,e.FLOAT,!1,i,2*t),e.drawArrays(e.TRIANGLES,0,this.vertexArrayIndex/6),this.vertexArrayIndex=0}}class zC extends HC{constructor(e){super(),this.projectionMatrixArray=e,this.lastArrayLength=128,this.vertexArray=new Float32Array(this.lastArrayLength)}initializeContext(e){this.gl=e,this.shaderProgram=new By(e,["attribute vec2 aVertex;","attribute vec2 aTextureCoord;","attribute float aAlpha;","varying vec2 vTextureCoord;","varying float vAlpha;","uniform mat3 uProjectionMatrix;","void main() {","  vTextureCoord = aTextureCoord;","  vAlpha = aAlpha;","  vec3 ndc = uProjectionMatrix * vec3( aVertex, 1.0 );","  gl_Position = vec4( ndc.xy, 0.0, 1.0 );","}"].join("\n"),["precision mediump float;","varying vec2 vTextureCoord;","varying float vAlpha;","uniform sampler2D uTexture;","void main() {","  vec4 color = texture2D( uTexture, vTextureCoord, -0.7 );","  color.a *= vAlpha;","  gl_FragColor = color;","}"].join("\n"),{attributes:["aVertex","aTextureCoord","aAlpha"],uniforms:["uTexture","uProjectionMatrix"]}),this.vertexBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertexArray,e.DYNAMIC_DRAW)}activate(){this.shaderProgram.use(),this.currentSpriteSheet=null,this.vertexArrayIndex=0,this.drawCount=0}processDrawable(e){if(!e.sprite)return;this.currentSpriteSheet&&e.sprite.spriteSheet!==this.currentSpriteSheet&&this.draw(),this.currentSpriteSheet=e.sprite.spriteSheet;const t=e.vertexArray;for(;t.length+this.vertexArrayIndex>this.vertexArray.length;){const e=new Float32Array(2*this.vertexArray.length);e.set(this.vertexArray),this.vertexArray=e}this.vertexArray.set(t,this.vertexArrayIndex),this.vertexArrayIndex+=t.length}deactivate(){return this.currentSpriteSheet&&this.draw(),this.shaderProgram.unuse(),this.drawCount}draw(){const e=this.gl;e.uniformMatrix3fv(this.shaderProgram.uniformLocations.uProjectionMatrix,!1,this.projectionMatrixArray),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray.length>this.lastArrayLength?e.bufferData(e.ARRAY_BUFFER,this.vertexArray,e.DYNAMIC_DRAW):e.bufferSubData(e.ARRAY_BUFFER,0,this.vertexArray.subarray(0,this.vertexArrayIndex));const t=Float32Array.BYTES_PER_ELEMENT,i=5*t;e.vertexAttribPointer(this.shaderProgram.attributeLocations.aVertex,2,e.FLOAT,!1,i,0*t),e.vertexAttribPointer(this.shaderProgram.attributeLocations.aTextureCoord,2,e.FLOAT,!1,i,2*t),e.vertexAttribPointer(this.shaderProgram.attributeLocations.aAlpha,1,e.FLOAT,!1,i,4*t),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this.currentSpriteSheet.texture),e.uniform1i(this.shaderProgram.uniformLocations.uTexture,0),e.drawArrays(e.TRIANGLES,0,this.vertexArrayIndex/5),e.bindTexture(e.TEXTURE_2D,null),this.drawCount++,this.currentSpriteSheet=null,this.vertexArrayIndex=0}}cy.mixInto(YC);const UC=YC;class WC{initialize(e,t,i,n,r,s,a){this.backbone=e,this.firstDrawable=t,this.lastDrawable=i,this.touchedBlocks=Yp(this.touchedBlocks)}clean(){this.backbone=null,this.firstDrawable=null,this.lastDrawable=null}recordBackboneBoundaries(){this.backbone.previousFirstDrawable=this.firstDrawable,this.backbone.previousLastDrawable=this.lastDrawable}notePendingAddition(e,t){e.notePendingAddition(this.backbone.display,t,this.backbone)}notePendingMove(e,t){e.notePendingMove(this.backbone.display,t)}notePendingRemoval(e){e.notePendingRemoval(this.backbone.display)}markBlockForDisposal(e){e.domElement.parentNode===this.backbone.domElement&&this.backbone.domElement.removeChild(e.domElement),e.markForDisposal(this.backbone.display)}removeAllBlocks(){for(;this.backbone.blocks.length;){const e=this.backbone.blocks[0];this.removeBlock(e),this.markBlockForDisposal(e)}}notifyInterval(e,t,i){e.notifyInterval(t,i),this.backbone.markDirtyDrawable(e)}markBeforeBlock(e,t){e.pendingFirstDrawable=t,this.touchedBlocks.push(e)}markAfterBlock(e,t){e.pendingLastDrawable=t,this.touchedBlocks.push(e)}updateBlockIntervals(){for(;this.touchedBlocks.length;){const e=this.touchedBlocks.pop();e.used&&(e.updateInterval(),this.backbone.markDirtyDrawable(e))}}createBlock(e,t){const i=this.backbone;let n;if(af.isCanvas(e))n=IC.createFromPool(i.display,e,i.transformRootInstance,i.backboneInstance);else if(af.isSVG(e))n=qC.createFromPool(i.display,e,i.transformRootInstance,i.backboneInstance);else if(af.isDOM(e))n=DC.createFromPool(i.display,t);else{if(!af.isWebGL(e))throw new Error("unsupported renderer for createBlock: "+e);n=UC.createFromPool(i.display,e,i.transformRootInstance,i.backboneInstance)}return n.setBlockBackbone(i),i.domElement.appendChild(n.domElement),i.isDisplayRoot&&n.domElement.setAttribute("aria-hidden",!0),i.markDirtyDrawable(n),n}appendBlock(e){this.backbone.blocks.push(e)}removeBlock(e){const t=_.indexOf(this.backbone.blocks,e);this.backbone.blocks.splice(t,1)}useNoBlocks(){Yp(this.backbone.blocks)}reindex(){this.backbone.reindexBlocks()}auditStitch(){0}static debugIntervals(e){0}static debugDrawables(e,t,i,n,r){0}}Lg.register("Stitcher",WC);const XC=WC;function jC(e,t){return e.renderer!==t.renderer||af.isDOM(e.renderer)||af.isDOM(t.renderer)}function QC(e){return null!==e.previousDrawable&&!jC(e.previousDrawable,e)}function KC(e){return null!==e.nextDrawable&&!jC(e,e.nextDrawable)}function ZC(e,t,i){return e.drawableBefore?e.drawableBefore.oldNextDrawable!==e.drawableAfter:e.drawableAfter?e.drawableAfter.oldPreviousDrawable!==e.drawableBefore:null!==t}function JC(e,t,i){const n=e.drawableBefore?e.drawableBefore.parentDrawable:null,r=e.drawableAfter?e.drawableAfter.parentDrawable:null;return(!n||!r||n!==r)&&(n?n.nextBlock!==r:r?r.previousBlock!==n:null!==t)}class $C extends XC{stitch(e,t,i,n,r,s,a){let o;if(this.initialize(e,t,i,n,r,s,a),this.blockOrderChanged=!1,this.reusableBlocks=Yp(this.reusableBlocks),this.blockWasAdded=!1,this.recordBackboneBoundaries(),e.blocks.length){const t=e.blocks[0];e.blocks[e.blocks.length-1];for(o=s;null!==o;o=o.nextChangeInterval){if(ZC(o,n)){const e=o.drawableBefore?o.drawableBefore.oldNextDrawable:n,t=o.drawableAfter?o.drawableAfter.oldPreviousDrawable:r;for(let i=e;this.notePendingRemoval(i),i!==t;i=i.oldNextDrawable);}if(JC(o,t)){const t=null===o.drawableBefore?e.blocks[0]:o.drawableBefore.parentDrawable.nextBlock,i=null===o.drawableAfter?e.blocks[e.blocks.length-1]:o.drawableAfter.parentDrawable.previousBlock;for(let e=t;this.unuseBlock(e),e!==i;e=e.nextBlock);}}}if(t)for(o=s;null!==o;o=o.nextChangeInterval)this.processInterval(e,o,t,i);this.removeUnusedBlocks(),this.updateBlockIntervals(),null===t?this.useNoBlocks():this.blockOrderChanged&&(this.processBlockLinkedList(e,t.pendingParentDrawable,i.pendingParentDrawable),this.reindex()),this.clean(),Yp(this.reusableBlocks)}processInterval(e,t,i,n){if(function(e,t,i){return e.drawableBefore?e.drawableBefore.nextDrawable!==e.drawableAfter:e.drawableAfter?e.drawableAfter.previousDrawable!==e.drawableBefore:null!==t}(t,i)){let n=t.drawableBefore?t.drawableBefore.nextDrawable:i,r=null,s=null,a=!0;for(;;){const i=n.nextDrawable,o=i===t.drawableAfter;if(r||(r=n),null===s&&n.parentDrawable&&!n.parentDrawable.used&&n.backbone===e&&n.parentDrawable.parentDrawable===e&&(s=n.parentDrawable),(o||jC(n,i))&&(a&&this.processEdgeCases(t,QC(r),KC(n)),this.processSubBlock(t,r,n,s,a,o),r=null,s=null,a=!1),o)break;n=i}}else{if(t.drawableBefore&&t.drawableAfter){const e=!jC(t.drawableBefore,t.drawableAfter);this.processEdgeCases(t,e,e)}t.drawableBefore&&!KC(t.drawableBefore)?this.linkAfterDrawable(t.drawableBefore):t.drawableAfter&&!QC(t.drawableAfter)&&this.linkBeforeDrawable(t.drawableAfter)}}processSubBlock(e,t,i,n,r,s){const a=QC(t),o=KC(i);a&&(n=t.previousDrawable.pendingParentDrawable),o&&(n=i.nextDrawable.pendingParentDrawable),n=this.ensureUsedBlock(n,t);for(let l=t;this.notePendingAddition(l,n),l!==i;l=l.nextDrawable);a||this.linkBeforeDrawable(t),s&&!o&&this.linkAfterDrawable(i)}processEdgeCases(e,t,i){if(null!==e.drawableBefore&&null!==e.drawableAfter){const n=e.drawableBefore.pendingParentDrawable,r=e.drawableAfter.pendingParentDrawable,s=e.nextChangeInterval&&e.nextChangeInterval.drawableAfter?e.nextChangeInterval.drawableAfter.pendingParentDrawable:null;let a;n===r&&(this.blockWasAdded=!0),t&&i?a=n:this.blockWasAdded||n===r?(a=this.createBlock(e.drawableAfter.renderer,e.drawableAfter),this.blockOrderChanged=!0):a=r,r===a?this.blockWasAdded=!0:this.changeExternals(e,a),s!==r&&(this.blockWasAdded||this.unuseBlock(r),this.blockWasAdded=!1)}}changeExternals(e,t){const i=function(e){const t=e.drawableAfter;if(t){const i=t.renderer,n=e.nextChangeInterval?e.nextChangeInterval.drawableBefore.nextDrawable:null;let r=t;for(;;){const e=r.nextDrawable;if(e===n||e.renderer!==i)break;r=e}return r}return null}(e);this.notePendingMoves(t,e.drawableAfter,i),e.nextChangeInterval&&e.nextChangeInterval.drawableBefore===i||this.linkAfterDrawable(i)}notePendingMoves(e,t,i){for(let n=t;this.notePendingMove(n,e),n!==i;n=n.nextDrawable);}ensureUsedBlock(e,t){return e?e.used||this.useBlock(e):e=this.getBlockForRenderer(t.renderer,t),e}getBlockForRenderer(e,t){let i;if(!af.isDOM(e))for(let n=this.reusableBlocks.length-1;n>=0;n--){const t=this.reusableBlocks[n];if(t.renderer===e){this.useBlockAtIndex(t,n),i=t;break}}return i||(i=this.createBlock(e,t)),this.blockOrderChanged=!0,i}unuseBlock(e){e.used&&(e.used=!1,this.reusableBlocks.push(e))}useBlock(e){this.useBlockAtIndex(e,_.indexOf(this.reusableBlocks,e))}useBlockAtIndex(e,t){this.reusableBlocks.splice(t,1),e.used=!0}removeUnusedBlocks(){for(;this.reusableBlocks.length;){const e=this.reusableBlocks.pop();this.markBlockForDisposal(e),this.blockOrderChanged=!0}}linkBeforeDrawable(e){const t=e.previousDrawable;this.linkBlocks(t?t.pendingParentDrawable:null,e.pendingParentDrawable,t,e)}linkAfterDrawable(e){const t=e.nextDrawable;this.linkBlocks(e.pendingParentDrawable,t?t.pendingParentDrawable:null,e,t)}linkBlocks(e,t,i,n){e&&(e.nextBlock!==t&&(this.blockOrderChanged=!0,e.nextBlock&&(e.nextBlock.previousBlock=null),e.nextBlock=t),this.markAfterBlock(e,i)),t&&(t.previousBlock!==e&&(this.blockOrderChanged=!0,t.previousBlock&&(t.previousBlock.nextBlock=null),t.previousBlock=e),this.markBeforeBlock(t,n))}processBlockLinkedList(e,t,i){for(;e.blocks.length;)e.blocks.pop();if(t)for(let n=t;e.blocks.push(n),n!==i;n=n.nextBlock);}}Lg.register("GreedyStitcher",$C);const eV=$C;class tV extends XC{stitch(e,t,i,n,r,s,a){this.initialize(e,t,i,n,r,s,a);for(let u=e.previousFirstDrawable;null!==u&&(this.notePendingRemoval(u),u!==e.previousLastDrawable);u=u.oldNextDrawable);this.recordBackboneBoundaries(),this.removeAllBlocks();let o=null,l=0,h=null;for(let u=t;null!==u&&(o&&u.renderer===l||(o&&this.notifyInterval(o,h,u.previousDrawable),l=u.renderer,o=this.createBlock(l,u),af.isDOM(l)&&(l=0),this.appendBlock(o),h=u),this.notePendingAddition(u,o),u!==i);u=u.nextDrawable);o&&this.notifyInterval(o,h,i),this.reindex(),this.clean()}}Lg.register("RebuildStitcher",tV);class iV extends OT{constructor(e,t,i,n,r){super(),this.initialize(e,t,i,n,r)}initialize(e,t,i,n,r){if(super.initialize(n),this.display=e,this.backboneInstance=t,this.transformRootInstance=i,this.filterRootAncestorInstance=t.parent?t.parent.getFilterRootInstance():t,this.transformRootAncestorInstance=t.parent?t.parent.getTransformRootInstance():t,this.willApplyTransform=this.transformRootAncestorInstance!==this.transformRootInstance,this.willApplyFilters=this.filterRootAncestorInstance!==this.backboneInstance,this.transformListener=this.transformListener||this.markTransformDirty.bind(this),this.willApplyTransform&&(this.backboneInstance.relativeTransform.addListener(this.transformListener),this.backboneInstance.relativeTransform.addPrecompute()),this.backboneVisibilityListener=this.backboneVisibilityListener||this.updateBackboneVisibility.bind(this),this.backboneInstance.relativeVisibleEmitter.addListener(this.backboneVisibilityListener),this.updateBackboneVisibility(),this.visibilityDirty=!0,this.renderer=n,this.domElement=r?e.domElement:iV.createDivBackbone(),this.isDisplayRoot=r,this.dirtyDrawables=Yp(this.dirtyDrawables),_f.prepareForTransform(this.domElement),this.watchedFilterNodes=Yp(this.watchedFilterNodes),this.filterDirty=!0,this.clipDirty=!0,this.filterDirtyListener=this.filterDirtyListener||this.onFilterDirty.bind(this),this.clipDirtyListener=this.clipDirtyListener||this.onClipDirty.bind(this),this.willApplyFilters)for(let s=this.backboneInstance;s!==this.filterRootAncestorInstance;s=s.parent){const e=s.node;this.watchedFilterNodes.push(e),e.filterChangeEmitter.addListener(this.filterDirtyListener),e.clipAreaProperty.lazyLink(this.clipDirtyListener)}this.lastZIndex=0,this.blocks=this.blocks||[],this.previousFirstDrawable=null,this.previousLastDrawable=null,this.removedDrawables=!1,this.stitcher=this.stitcher||new eV}dispose(){for(;this.watchedFilterNodes.length;){const e=this.watchedFilterNodes.pop();e.filterChangeEmitter.removeListener(this.filterDirtyListener),e.clipAreaProperty.unlink(this.clipDirtyListener)}if(this.backboneInstance.relativeVisibleEmitter.removeListener(this.backboneVisibilityListener),!this.removedDrawables)for(let e=this.previousFirstDrawable;null!==e&&(e.parentDrawable.removeDrawable(e),e!==this.previousLastDrawable);e=e.nextDrawable);this.markBlocksForDisposal(),this.willApplyTransform&&(this.backboneInstance.relativeTransform.removeListener(this.transformListener),this.backboneInstance.relativeTransform.removePrecompute()),this.backboneInstance=null,this.transformRootInstance=null,this.filterRootAncestorInstance=null,this.transformRootAncestorInstance=null,Yp(this.dirtyDrawables),Yp(this.watchedFilterNodes),this.previousFirstDrawable=null,this.previousLastDrawable=null,super.dispose()}markBlocksForDisposal(){for(;this.blocks.length;){const e=this.blocks.pop();e.domElement.parentNode===this.domElement&&this.domElement.removeChild(e.domElement),e.markForDisposal(this.display)}}updateBackboneVisibility(){this.visible=this.backboneInstance.relativeVisible,this.visibilityDirty||(this.visibilityDirty=!0,this.markDirty())}markForDisposal(e){for(let t=this.previousFirstDrawable;null!==t&&(t.notePendingRemoval(this.display),t!==this.previousLastDrawable);t=t.oldNextDrawable);this.removedDrawables=!0,super.markForDisposal(e)}markDirtyDrawable(e){this.dirtyDrawables.push(e),this.markDirty()}markTransformDirty(){_f.applyPreparedTransform(this.backboneInstance.relativeTransform.matrix,this.domElement)}onFilterDirty(){this.filterDirty||(this.filterDirty=!0,this.markDirty())}onClipDirty(){this.clipDirty||(this.clipDirty=!0,this.markDirty())}update(){if(!super.update())return!1;for(;this.dirtyDrawables.length;)this.dirtyDrawables.pop().update();if(this.filterDirty){this.filterDirty=!1;let e="";const t=this.watchedFilterNodes.length;for(let i=0;i<t;i++){const t=this.watchedFilterNodes[i],n=t.getEffectiveOpacity();for(let i=0;i<t._filters.length;i++)e+=`${e?" ":""}${t._filters[i].getCSSFilterString()}`;1!==n&&(e+=`${e?" ":""}opacity(${Rh(n)})`)}this.domElement.style.filter=e}return this.visibilityDirty&&(this.visibilityDirty=!1,this.domElement.style.display=this.visible?"":"none"),this.clipDirty&&(this.clipDirty=!1),!0}getFilterVisibility(){const e=this.watchedFilterNodes.length;for(let t=0;t<e;t++)if(!this.watchedFilterNodes[t].isVisible())return!1;return!0}getFilterClip(){return""}reindexBlocks(){let e=0;for(let t=0;t<this.blocks.length;t++){const i=this.blocks[t];if(i.zIndex<=e){const n=t+1<this.blocks.length&&this.blocks[t+1].zIndex-1>e?Math.ceil((e+this.blocks[t+1].zIndex)/2):e+20;i.domElement.style.zIndex=i.zIndex=n}e=i.zIndex}this.lastZIndex=e+1}stitch(e,t,i,n){if(null===i||null===n)return;let r=null,s=i,a=!1;for(;s;)a=s.constrict()||a,s.isEmpty()?r&&(r.nextChangeInterval=s.nextChangeInterval):(r||(i=s),r=s),s=s.nextChangeInterval;r&&((n=r).nextChangeInterval=null,this.stitcher.stitch(this,e,t,this.previousFirstDrawable,this.previousLastDrawable,i,n))}audit(e,t,i){0}static createDivBackbone(){const e=document.createElement("div");return e.style.position="absolute",e.style.left="0",e.style.top="0",e.style.width="0",e.style.height="0",e}static repurposeBackboneContainer(e){return"relative"===e.style.position&&"absolute"===e.style.position||(e.style.position="relative"),e.style.left="0",e.style.top="0",e}}Lg.register("BackboneDrawable",iV),cy.mixInto(iV);const nV=iV;class rV{constructor(e,t,i){this.display=e,this.rootNode=t;const n=document.createElementNS(lf,"svg");n.style.position="absolute",n.setAttribute("class",i),n.style.top="0",n.style.left="0",n.style["pointer-events"]="none",this.svg=n,e.sizeProperty.link(e=>{var t,i;t=e.width,i=e.height,n.setAttribute("width",""+t),n.setAttribute("height",""+i),n.style.clip=`rect(0px,${t}px,${i}px,0px)`}),this.domElement=n}addShape(e,t,i){const n=document.createElementNS(lf,"path");let r=e.getSVGPath();r||(r="M0 0"),r?n.setAttribute("d",r):n.hasAttribute("d")&&n.removeAttribute("d"),n.setAttribute("style",`fill: none; stroke: ${t}; stroke-dasharray: 5, 3; stroke-dashoffset: ${i?5:0}; stroke-width: 3;`),this.svg.appendChild(n)}update(){for(;this.svg.childNodes.length;)this.svg.removeChild(this.svg.childNodes[this.svg.childNodes.length-1]);this.addShapes()}dispose(){}}Lg.register("ShapeBasedOverlay",rV);class sV extends rV{constructor(e,t){super(e,t,"canvasNodeBoundsOverlay")}addShapes(){new Dv(this.rootNode).eachTrailUnder(e=>{const t=e.lastNode();if(!t.isVisible())return!0;if(t instanceof vA&&e.isVisible()){const i=e.getTransform();this.addShape(i.transformShape(Ip.bounds(t.selfBounds)),"rgba(0,255,0,0.8)",!0)}return!1})}}Lg.register("CanvasNodeBoundsOverlay",sV);class aV extends rV{constructor(e,t){super(e,t,"canvasNodeBoundsOverlay")}addShapes(){const e=this;function t(t,n){t.willApplyTransform&&(n=n.timesMatrix(t.backboneInstance.relativeTransform.matrix)),t.blocks.forEach(t=>{!function(t,n){t instanceof NC&&!t.fitBounds.isEmpty()&&e.addShape(Ip.bounds(t.fitBounds).transformed(n),"rgba(255,0,0,0.8)",!0);if(t.firstDrawable&&t.lastDrawable){for(let e=t.firstDrawable;e!==t.lastDrawable;e=e.nextDrawable)i(e,n);i(t.lastDrawable,n)}}(t,n)})}function i(e,i){e instanceof nV&&t(e,i)}t(this.display.rootBackbone,Mh.IDENTITY)}}Lg.register("FittedBlockBoundsOverlay",aV);let oV=KS.OUTER_FOCUS_COLOR,lV=KS.INNER_FOCUS_COLOR,hV=KS.INNER_LIGHT_GROUP_FOCUS_COLOR,uV=KS.OUTER_LIGHT_GROUP_FOCUS_COLOR;class cV{constructor(e,t,i){_defineProperty(this,"trail",null),_defineProperty(this,"node",null),_defineProperty(this,"activeHighlight",null),_defineProperty(this,"mode",null),_defineProperty(this,"groupMode",null),_defineProperty(this,"groupHighlightNode",null),_defineProperty(this,"transformTracker",null),_defineProperty(this,"groupTransformTracker",null),_defineProperty(this,"nodeModeHighlight",null),_defineProperty(this,"nodeModeHighlightLayered",!1),_defineProperty(this,"transformDirty",!0),_defineProperty(this,"highlightNode",new cv),_defineProperty(this,"readingBlockHighlightNode",new cv),_defineProperty(this,"addedReadingBlockHighlight",null),_defineProperty(this,"activeReadingBlockNode",null),_defineProperty(this,"readingBlockTrail",null),_defineProperty(this,"readingBlockTransformDirty",!0),_defineProperty(this,"readingBlockTransformTracker",null);const n=Vo()({pdomFocusHighlightsVisibleProperty:new gy(!0),interactiveHighlightsVisibleProperty:new gy(!1),readingBlockHighlightsVisibleProperty:new gy(!1)},i);this.display=e,this.focusRootNode=t,this.focusRootNode.addChild(this.highlightNode),this.focusRootNode.addChild(this.readingBlockHighlightNode),this.pdomFocusHighlightsVisibleProperty=n.pdomFocusHighlightsVisibleProperty,this.interactiveHighlightsVisibleProperty=n.interactiveHighlightsVisibleProperty,this.readingBlockHighlightsVisibleProperty=n.readingBlockHighlightsVisibleProperty,this.focusDisplay=new SV(this.focusRootNode,{allowWebGL:e.isWebGLAllowed(),allowCSSHacks:!1,accessibility:!1,interactive:!1}),this.domElement=this.focusDisplay.domElement,this.domElement.style.pointerEvents="none",this.shapeFocusHighlightPath=new KS(null),this.boundsFocusHighlightPath=new JS(null,{useLocalBounds:!0}),this.highlightNode.addChild(this.shapeFocusHighlightPath),this.highlightNode.addChild(this.boundsFocusHighlightPath),this.groupFocusHighlightPath=new JS(null,{useLocalBounds:!0,useGroupDilation:!0,outerLineWidth:KS.GROUP_OUTER_LINE_WIDTH,innerLineWidth:KS.GROUP_INNER_LINE_WIDTH,innerStroke:KS.OUTER_FOCUS_COLOR}),this.groupFocusHighlightParent=new cv({children:[this.groupFocusHighlightPath]}),this.focusRootNode.addChild(this.groupFocusHighlightParent),this.readingBlockHighlightPath=new p_(null),this.readingBlockHighlightNode.addChild(this.readingBlockHighlightPath),this.boundsListener=this.onBoundsChange.bind(this),this.transformListener=this.onTransformChange.bind(this),this.domFocusListener=this.onFocusChange.bind(this),this.readingBlockTransformListener=this.onReadingBlockTransformChange.bind(this),this.focusHighlightListener=this.onFocusHighlightChange.bind(this),this.interactiveHighlightListener=this.onInteractiveHighlightChange.bind(this),this.focusHighlightsVisibleListener=this.onFocusHighlightsVisibleChange.bind(this),this.voicingHighlightsVisibleListener=this.onVoicingHighlightsVisibleChange.bind(this),this.pointerFocusListener=this.onPointerFocusChange.bind(this),this.lockedPointerFocusListener=this.onLockedPointerFocusChange.bind(this),this.readingBlockFocusListener=this.onReadingBlockFocusChange.bind(this),this.readingBlockHighlightChangeListener=this.onReadingBlockHighlightChange.bind(this),GS.pdomFocusProperty.link(this.domFocusListener),e.focusManager.pointerFocusProperty.link(this.pointerFocusListener),e.focusManager.readingBlockFocusProperty.link(this.readingBlockFocusListener),e.focusManager.lockedPointerFocusProperty.link(this.lockedPointerFocusListener),this.pdomFocusHighlightsVisibleProperty.link(this.focusHighlightsVisibleListener),this.interactiveHighlightsVisibleProperty.link(this.voicingHighlightsVisibleListener)}dispose(){this.hasHighlight()&&this.deactivateHighlight(),GS.pdomFocusProperty.unlink(this.domFocusListener),this.pdomFocusHighlightsVisibleProperty.unlink(this.focusHighlightsVisibleListener),this.interactiveHighlightsVisibleProperty.unlink(this.voicingHighlightsVisibleListener),this.display.focusManager.pointerFocusProperty.unlink(this.pointerFocusListener),this.display.focusManager.readingBlockFocusProperty.unlink(this.readingBlockFocusListener),this.focusDisplay.dispose()}hasHighlight(){return!!this.trail}hasReadingBlockHighlight(){return!!this.readingBlockTrail}activateHighlight(e,t,i,n,r){this.trail=e,this.node=t;const s=i;this.activeHighlight=s;let a=e;if("invisible"===s)this.mode="invisible";else if(s instanceof Ip)this.mode="shape",this.shapeFocusHighlightPath.visible=!0,this.shapeFocusHighlightPath.setShape(s);else if(s instanceof cv){if(this.mode="node",s instanceof KS){s.transformSourceNode&&(a=s.getUniqueHighlightTrail(this.trail))}this.nodeModeHighlight=s,n?(this.nodeModeHighlightLayered=!0,this.nodeModeHighlight.visible=r.get()):(this.nodeModeHighlight.visible=!0,this.highlightNode.addChild(this.nodeModeHighlight))}else this.mode="bounds",this.boundsFocusHighlightPath.setShapeFromNode(this.node),this.boundsFocusHighlightPath.visible=!0,this.node.localBoundsProperty.lazyLink(this.boundsListener),this.onBoundsChange();this.transformTracker=new QA(a,{isStatic:!0}),this.transformTracker.addListener(this.transformListener),this.activateGroupHighlights(),this.updateHighlightColors(),this.transformDirty=!0}activateFocusHighlight(e,t){this.activateHighlight(e,t,t.focusHighlight,t.focusHighlightLayerable,this.pdomFocusHighlightsVisibleProperty),t.focusHighlightChangedEmitter.addListener(this.focusHighlightListener)}activateInteractiveHighlight(e,t){this.activateHighlight(e,t,t.interactiveHighlight||t.focusHighlight,t.interactiveHighlightLayerable,this.interactiveHighlightsVisibleProperty),t.interactiveHighlightChangedEmitter.addListener(this.interactiveHighlightListener),t.focusHighlightChangedEmitter.addListener(this.interactiveHighlightListener)}activateReadingBlockHighlight(e){this.readingBlockTrail=e;const t=e.lastNode();this.activeReadingBlockNode=t;const i=this.activeReadingBlockNode.readingBlockActiveHighlight;this.addedReadingBlockHighlight=i,"invisible"===i||(i instanceof Ip?(this.readingBlockHighlightPath.setShape(i),this.readingBlockHighlightPath.visible=!0):i instanceof cv?this.readingBlockHighlightNode.addChild(i):(this.readingBlockHighlightPath.setShapeFromNode(this.activeReadingBlockNode),this.readingBlockHighlightPath.visible=!0)),this.readingBlockTransformTracker=new QA(this.readingBlockTrail,{isStatic:!0}),this.readingBlockTransformTracker.addListener(this.readingBlockTransformListener),this.activeReadingBlockNode.readingBlockActiveHighlightChangedEmitter.addListener(this.readingBlockHighlightChangeListener),this.readingBlockTransformDirty=!0}deactivateReadingBlockHighlight(){this.readingBlockHighlightPath.visible=!1,this.addedReadingBlockHighlight instanceof cv&&this.readingBlockHighlightNode.removeChild(this.addedReadingBlockHighlight);const e=this.readingBlockTransformTracker;e.removeListener(this.readingBlockTransformListener),e.dispose(),this.readingBlockTransformTracker=null,this.activeReadingBlockNode.readingBlockActiveHighlightChangedEmitter.removeListener(this.readingBlockHighlightChangeListener),this.activeReadingBlockNode=null,this.readingBlockTrail=null,this.addedReadingBlockHighlight=null}deactivateHighlight(){const e=this.node;if("shape"===this.mode)this.shapeFocusHighlightPath.visible=!1;else if("node"===this.mode){const e=this.nodeModeHighlight;this.nodeModeHighlightLayered?this.nodeModeHighlightLayered=!1:this.highlightNode.removeChild(e),e.visible=!1,this.nodeModeHighlight=null}else"bounds"===this.mode&&(this.boundsFocusHighlightPath.visible=!1,e.localBoundsProperty.unlink(this.boundsListener));e.focusHighlightChangedEmitter.hasListener(this.focusHighlightListener)&&e.focusHighlightChangedEmitter.removeListener(this.focusHighlightListener);const t=e;t.isInteractiveHighlighting&&(t.interactiveHighlightChangedEmitter.hasListener(this.interactiveHighlightListener)&&t.interactiveHighlightChangedEmitter.removeListener(this.interactiveHighlightListener),t.focusHighlightChangedEmitter.hasListener(this.interactiveHighlightListener)&&t.focusHighlightChangedEmitter.removeListener(this.interactiveHighlightListener)),this.deactivateGroupHighlights(),this.trail=null,this.node=null,this.mode=null,this.activeHighlight=null,this.transformTracker.removeListener(this.transformListener),this.transformTracker.dispose(),this.transformTracker=null}activateGroupHighlights(){const e=this.trail;for(let t=0;t<e.length;t++){const i=e.nodes[t],n=i.groupFocusHighlight;if(n){const t=e.upToNode(i);this.groupTransformTracker=new QA(t),this.groupTransformTracker.addListener(this.transformListener),"boolean"==typeof n?(this.groupFocusHighlightPath.setShapeFromNode(i),this.groupFocusHighlightPath.visible=!0,this.groupHighlightNode=this.groupFocusHighlightPath,this.groupMode="bounds"):n instanceof cv&&(this.groupHighlightNode=n,this.groupFocusHighlightParent.addChild(n),this.groupMode="node");break}}}updateHighlightColors(){"shape"===this.mode?(this.shapeFocusHighlightPath.innerHighlightColor!==cV.getInnerHighlightColor()&&this.shapeFocusHighlightPath.setInnerHighlightColor(cV.getInnerHighlightColor()),this.shapeFocusHighlightPath.outerHighlightColor!==cV.getOuterHighlightColor()&&this.shapeFocusHighlightPath.setOuterHighlightColor(cV.getOuterHighlightColor())):"bounds"===this.mode&&(this.boundsFocusHighlightPath.innerHighlightColor!==cV.getInnerHighlightColor()&&this.boundsFocusHighlightPath.setInnerHighlightColor(cV.getInnerHighlightColor()),this.boundsFocusHighlightPath.outerHighlightColor!==cV.getOuterHighlightColor()&&this.boundsFocusHighlightPath.setOuterHighlightColor(cV.getOuterHighlightColor())),this.groupMode&&(this.groupFocusHighlightPath.innerHighlightColor!==cV.getInnerGroupHighlightColor()&&this.groupFocusHighlightPath.setInnerHighlightColor(cV.getInnerGroupHighlightColor()),this.groupFocusHighlightPath.outerHighlightColor!==cV.getOuterGroupHighlightColor()&&this.groupFocusHighlightPath.setOuterHighlightColor(cV.getOuterGroupHighlightColor()))}deactivateGroupHighlights(){this.groupMode&&("bounds"===this.groupMode?this.groupFocusHighlightPath.visible=!1:"node"===this.groupMode&&this.groupFocusHighlightParent.removeChild(this.groupHighlightNode),this.groupMode=null,this.groupHighlightNode=null,this.groupTransformTracker.removeListener(this.transformListener),this.groupTransformTracker.dispose(),this.groupTransformTracker=null)}afterTransform(){"shape"===this.mode?this.shapeFocusHighlightPath.updateLineWidth():"bounds"===this.mode?this.boundsFocusHighlightPath.updateLineWidth():"node"===this.mode&&this.activeHighlight instanceof KS&&this.activeHighlight.updateLineWidth&&this.activeHighlight.updateLineWidth(this.node)}onTransformChange(){this.transformDirty=!0}onReadingBlockTransformChange(){this.readingBlockTransformDirty=!0}onBoundsChange(){this.boundsFocusHighlightPath.setShapeFromNode(this.node)}onFocusChange(e){const t=e&&e.display===this.display?e.trail:null;if(this.hasHighlight()&&this.deactivateHighlight(),t&&this.pdomFocusHighlightsVisibleProperty.value){const e=t.lastNode();this.activateFocusHighlight(t,e)}else this.display.focusManager.pointerFocusProperty.value&&this.interactiveHighlightsVisibleProperty.value&&this.updateInteractiveHighlight(this.display.focusManager.pointerFocusProperty.value)}onPointerFocusChange(e){this.display.focusManager.lockedPointerFocusProperty.value||this.display.focusManager.pdomFocusHighlightsVisibleProperty.value||this.updateInteractiveHighlight(e)}updateInteractiveHighlight(e){const t=e&&e.display===this.display?e.trail:null;this.hasHighlight()&&this.deactivateHighlight();let i=!1;if(t&&!this.display.focusManager.pdomFocusHighlightsVisibleProperty.value){const e=t.lastNode();(e.isReadingBlock&&this.readingBlockHighlightsVisibleProperty.value||!e.isReadingBlock&&this.interactiveHighlightsVisibleProperty.value)&&(this.activateInteractiveHighlight(t,e),i=!0)}!i&&GS.pdomFocus&&this.pdomFocusHighlightsVisibleProperty.value&&this.onFocusChange(GS.pdomFocus)}onLockedPointerFocusChange(e){this.updateInteractiveHighlight(e||this.display.focusManager.pointerFocusProperty.value)}onReadingBlockFocusChange(e){this.hasReadingBlockHighlight()&&this.deactivateReadingBlockHighlight();const t=e&&e.display===this.display?e.trail:null;t&&this.activateReadingBlockHighlight(t)}onFocusHighlightChange(){this.onFocusChange(GS.pdomFocus)}onInteractiveHighlightChange(){this.updateInteractiveHighlight(this.display.focusManager.lockedPointerFocusProperty.value||this.display.focusManager.pointerFocusProperty.value)}onReadingBlockHighlightChange(){this.onReadingBlockFocusChange(this.display.focusManager.readingBlockFocusProperty.value)}onFocusHighlightsVisibleChange(){this.onFocusChange(GS.pdomFocus)}onVoicingHighlightsVisibleChange(){this.onPointerFocusChange(this.display.focusManager.pointerFocusProperty.value)}update(){this.hasHighlight()&&this.transformDirty&&(this.transformDirty=!1,this.highlightNode.setMatrix(this.transformTracker.matrix),this.groupHighlightNode&&this.groupHighlightNode.setMatrix(this.groupTransformTracker.matrix),this.afterTransform()),this.hasReadingBlockHighlight()&&this.readingBlockTransformDirty&&(this.readingBlockTransformDirty=!1,this.readingBlockHighlightNode.setMatrix(this.readingBlockTransformTracker.matrix)),this.display.size.equals(this.focusDisplay.size)||this.focusDisplay.setWidthHeight(this.display.width,this.display.height),this.focusDisplay.updateDisplay()}static setInnerHighlightColor(e){lV=e}static getInnerHighlightColor(){return lV}static setOuterHilightColor(e){oV=e}static getOuterHighlightColor(){return oV}static setInnerGroupHighlightColor(e){hV=e}static getInnerGroupHighlightColor(){return hV}static setOuterGroupHighlightColor(e){uV=e}static getOuterGroupHighlightColor(){return uV}}Lg.register("HighlightOverlay",cV);class dV extends rV{constructor(e,t){super(e,t,"hitAreaOverlay")}addShapes(){new Dv(this.rootNode).eachTrailUnder(e=>{const t=e.lastNode();if(!t.isVisible()||!1===t.pickable)return!0;if(t.inputListeners.length&&e.isVisible()){const i=dV.getLocalMouseShape(t),n=dV.getLocalTouchShape(t),r=e.getMatrix();i.bounds.isEmpty()||this.addShape(i.transformed(r),"rgba(0,0,255,0.8)",!0),n.bounds.isEmpty()||this.addShape(n.transformed(r),"rgba(255,0,0,0.8)",!1)}return!1})}static getLocalMouseShape(e){let t=Ip.union([e.mouseArea?e.mouseArea instanceof Ip?e.mouseArea:Ip.bounds(e.mouseArea):e.getSelfShape(),...e.children.filter(t=>e.visible&&!1!==e.pickable).map(e=>dV.getLocalMouseShape(e).transformed(e.matrix))]);return e.hasClipArea()&&(t=t.shapeIntersection(e.clipArea)),t}static getLocalTouchShape(e){let t=Ip.union([e.touchArea?e.touchArea instanceof Ip?e.touchArea:Ip.bounds(e.touchArea):e.getSelfShape(),...e.children.filter(t=>e.visible&&!1!==e.pickable).map(e=>dV.getLocalTouchShape(e).transformed(e.matrix))]);return e.hasClipArea()&&(t=t.shapeIntersection(e.clipArea)),t}}Lg.register("HitAreaOverlay",dV);class pV extends rV{constructor(e,t){super(e,t,"mouseTouchAreaOverlay")}addShapes(){new Dv(this.rootNode).eachTrailUnder(e=>{const t=e.lastNode();if(!t.isVisible())return!0;if((t.mouseArea||t.touchArea)&&e.isVisible()){const i=e.getTransform();t.mouseArea&&this.addShape(i.transformShape(t.mouseArea instanceof Zl?Ip.bounds(t.mouseArea):t.mouseArea),"rgba(0,0,255,0.8)",!0),t.touchArea&&this.addShape(i.transformShape(t.touchArea instanceof Zl?Ip.bounds(t.touchArea):t.touchArea),"rgba(255,0,0,0.8)",!1)}return!1})}}Lg.register("PointerAreaOverlay",pV);class mV{constructor(e,t){this.display=e,this.rootNode=t,this.pointerSVGContainer=document.createElement("div"),this.pointerSVGContainer.style.position="absolute",this.pointerSVGContainer.style.top="0",this.pointerSVGContainer.style.left="0",this.pointerSVGContainer.style["pointer-events"]="none";e.sizeProperty.lazyLink(e=>{this.pointerSVGContainer.setAttribute("width",""+e.width),this.pointerSVGContainer.setAttribute("height",""+e.height),this.pointerSVGContainer.style.clip=`rect(0px,${e.width}px,${e.height}px,0px)`});const i=Mh.IDENTITY.copy();this.pointerAdded=e=>{const t=document.createElementNS(lf,"svg");t.style.position="absolute",t.style.top="0",t.style.left="0",t.style["pointer-events"]="none",_f.prepareForTransform(t),t.setAttribute("width","21"),t.setAttribute("height","21");const n=document.createElementNS(lf,"circle");n.setAttribute("cx","10.5"),n.setAttribute("cy","10.5"),n.setAttribute("r","10"),n.setAttribute("style","fill:black;"),n.setAttribute("style","stroke:white;"),n.setAttribute("opacity","0.4");const r=e=>_f.applyPreparedTransform(i.setToTranslation(e.x-10.5,e.y-10.5),t),s=()=>{e.isTouchLike()&&(this.pointerSVGContainer.removeChild(t),e.removeInputListener(a))},a={move:()=>{e.point&&r(e.point)},up:s,cancel:s,focus:()=>{e instanceof U_&&e.point&&(r(e.point),this.pointerSVGContainer.appendChild(t))},blur:()=>{this.pointerSVGContainer.contains(t)&&this.pointerSVGContainer.removeChild(t)}};e.addInputListener(a),a.move(),t.appendChild(n),this.pointerSVGContainer.appendChild(t)},e._input.pointerAddedEmitter.addListener(this.pointerAdded),e._input&&e._input.mouse&&this.pointerAdded(e._input.mouse),this.domElement=this.pointerSVGContainer}dispose(){this.display._input.pointerAddedEmitter.removeListener(this.pointerAdded)}update(){}}Lg.register("PointerOverlay",mV);let gV=1;const fV=af.createOrderBitmask(af.bitmaskSVG,af.bitmaskCanvas,af.bitmaskDOM,af.bitmaskWebGL);class yV{constructor(e,t,i,n){this.active=!1,this.initialize(e,t,i,n)}initialize(e,t,i,n){return t.setImmutable(),this.id=this.id||gV++,this.isWebGLSupported=e.isWebGLAllowed()&&_f.isWebGLSupported,this.relativeTransform=this.relativeTransform||new vC(this),this.fittability=this.fittability||new _C(this),this.visible=!0,this.relativeVisible=!0,this.selfVisible=!0,this.visibilityDirty=!0,this.childVisibilityDirty=!0,this.voicingVisible=!0,this.branchIndexMap=this.branchIndexMap||{},this.branchIndexReferences=Yp(this.branchIndexReferences),this.addRemoveCounter=0,this.stitchChangeFrame=e._frameId,this.stitchChangeBefore=0,this.stitchChangeAfter=0,this.stitchChangeOnChildren=0,this.stitchChangeIncluded=!1,this.childInsertedListener=this.childInsertedListener||this.onChildInserted.bind(this),this.childRemovedListener=this.childRemovedListener||this.onChildRemoved.bind(this),this.childrenReorderedListener=this.childrenReorderedListener||this.onChildrenReordered.bind(this),this.visibilityListener=this.visibilityListener||this.onVisibilityChange.bind(this),this.markRenderStateDirtyListener=this.markRenderStateDirtyListener||this.markRenderStateDirty.bind(this),this.visibleEmitter=new np,this.relativeVisibleEmitter=new np,this.selfVisibleEmitter=new np,this.canVoiceEmitter=new np,this.cleanInstance(e,t),this.node.addInstance(this),this.externalReferenceCount=0,this.stateless=!0,this.isDisplayRoot=i,this.isSharedCanvasCacheRoot=n,this.preferredRenderers=0,this.isUnderCanvasCache=n,this.isBackbone=!1,this.isTransformed=!1,this.isVisibilityApplied=!1,this.isInstanceCanvasCache=!1,this.isSharedCanvasCachePlaceholder=!1,this.isSharedCanvasCacheSelf=n,this.selfRenderer=0,this.groupRenderer=0,this.sharedCacheRenderer=0,this.renderStateDirtyFrame=e._frameId,this.skipPruningFrame=e._frameId,this.active=!0,this}cleanInstance(e,t){this.display=e,this.trail=t,this.node=t?t.lastNode():null,this.parent=null,this.oldParent=null,this.children=Yp(this.children),this.sharedCacheInstance=null,this.relativeTransform.initialize(e,t),this.fittability.initialize(e,t),this.instanceRemovalCheckList=Yp(this.instanceRemovalCheckList),this.selfDrawable=null,this.groupDrawable=null,this.sharedCacheDrawable=null,this.firstDrawable=null,this.lastDrawable=null,this.firstInnerDrawable=null,this.lastInnerDrawable=null,this.svgGroups=Yp(this.svgGroups),this.cleanSyncTreeResults()}cleanSyncTreeResults(){this.beforeStableIndex=this.children.length,this.afterStableIndex=-1,this.firstChangeInterval=null,this.lastChangeInterval=null,this.incompatibleStateChange=!1,this.groupChanged=!1,this.cascadingStateChange=!1,this.anyStateChange=!1}updateRenderingState(){const e=this.isBackbone,t=this.isTransformed,i=this.isVisibilityApplied,n=this.isInstanceCanvasCache,r=this.isSharedCanvasCacheSelf,s=this.isSharedCanvasCachePlaceholder,a=this.isUnderCanvasCache,o=this.selfRenderer,l=this.groupRenderer,h=this.sharedCacheRenderer,u=this.preferredRenderers;this.isBackbone=!1,this.isTransformed=!1,this.isVisibilityApplied=!1,this.isInstanceCanvasCache=!1,this.isSharedCanvasCacheSelf=!1,this.isSharedCanvasCachePlaceholder=!1,this.selfRenderer=0,this.groupRenderer=0,this.sharedCacheRenderer=0;const c=this.node;this.isUnderCanvasCache=this.isSharedCanvasCacheRoot||!!this.parent&&(this.parent.isUnderCanvasCache||this.parent.isInstanceCanvasCache||this.parent.isSharedCanvasCacheSelf),this.preferredRenderers=this.parent?this.parent.preferredRenderers:fV,c._renderer&&(this.preferredRenderers=af.pushOrderBitmask(this.preferredRenderers,c._renderer));const d=this.node.hasClipArea(),p=1!==this.node.effectiveOpacity||c._usesOpacity||this.node._filters.length>0;let m=!1,g=!1;if(p)for(let v=0;v<this.node._filters.length;v++){const e=this.node._filters[v];e.isSVGCompatible()||(m=!0),e.isCanvasCompatible()||(g=!0)}const f=c._cssTransform||c._layerSplit,y=this.isDisplayRoot||!this.isUnderCanvasCache&&f,E=!y&&(p||d)&&(!m&&this.node._rendererSummary.isSubtreeRenderedExclusivelySVG(this.preferredRenderers)||!g&&this.node._rendererSummary.isSubtreeRenderedExclusivelyCanvas(this.preferredRenderers));if(!E&&(y||p||d)?(this.isBackbone=!0,this.isVisibilityApplied=!0,this.isTransformed=this.isDisplayRoot||!!c._cssTransform,this.groupRenderer=af.bitmaskDOM):!E&&(p||d||c._canvasCache)&&(c._singleCache?this.isSharedCanvasCacheRoot?(this.isSharedCanvasCacheSelf=!0,this.sharedCacheRenderer=this.isWebGLSupported?af.bitmaskWebGL:af.bitmaskCanvas):this.isSharedCanvasCachePlaceholder=!0:(this.isInstanceCanvasCache=!0,this.isUnderCanvasCache=!0,this.groupRenderer=this.isWebGLSupported?af.bitmaskWebGL:af.bitmaskCanvas)),this.node.isPainted())if(this.isUnderCanvasCache)this.selfRenderer=af.bitmaskCanvas;else{let e=this.node._rendererBitmask;if(!this.isWebGLSupported){e^=e&af.bitmaskWebGL}this.selfRenderer=e&af.bitmaskOrder(this.preferredRenderers,0)||e&af.bitmaskOrder(this.preferredRenderers,1)||e&af.bitmaskOrder(this.preferredRenderers,2)||e&af.bitmaskOrder(this.preferredRenderers,3)||e&af.bitmaskSVG||e&af.bitmaskCanvas||e&af.bitmaskDOM||e&af.bitmaskWebGL||0}this.groupChanged=e!==this.isBackbone||n!==this.isInstanceCanvasCache||r!==this.isSharedCanvasCacheSelf,this.cascadingStateChange=a!==this.isUnderCanvasCache||u!==this.preferredRenderers,this.incompatibleStateChange=this.isTransformed!==t||this.isSharedCanvasCachePlaceholder!==s,this.anyStateChange=this.groupChanged||this.cascadingStateChange||this.incompatibleStateChange||o!==this.selfRenderer||l!==this.groupRenderer||h!==this.sharedCacheRenderer,i!==this.isVisibilityApplied&&(this.visibilityDirty=!0,this.parent&&this.parent.markChildVisibilityDirty()),this.fittability.checkSelfFittability()}getStateString(){return`S[ ${this.isDisplayRoot?"displayRoot ":""}${this.isBackbone?"backbone ":""}${this.isInstanceCanvasCache?"instanceCache ":""}${this.isSharedCanvasCachePlaceholder?"sharedCachePlaceholder ":""}${this.isSharedCanvasCacheSelf?"sharedCacheSelf ":""}${this.isTransformed?"TR ":""}${this.isVisibilityApplied?"VIS ":""}${this.selfRenderer?this.selfRenderer.toString(16):"-"},${this.groupRenderer?this.groupRenderer.toString(16):"-"},${this.sharedCacheRenderer?this.sharedCacheRenderer.toString(16):"-"} `+"]"}baseSyncTree(){this.syncTree(),this.cleanSyncTreeResults()}syncTree(){const e=this.stateless;if((e||this.parent&&this.parent.cascadingStateChange||this.renderStateDirtyFrame===this.display._frameId)&&this.updateRenderingState(),!e&&this.incompatibleStateChange)return!1;if(this.stateless=!1,e&&(this.isTransformed&&this.display.markTransformRootDirty(this,!0),this.attachNodeListeners()),this.isSharedCanvasCachePlaceholder)this.sharedSyncTree();else if(e||this.skipPruningFrame===this.display._frameId||this.anyStateChange){this.prepareChildInstances(e);this.firstDrawable,this.lastDrawable,this.firstInnerDrawable,this.lastInnerDrawable;const t=this.updateSelfDrawable();this.localSyncTree(t),this.groupSyncTree(e)}return!0}localSyncTree(e){const t=this.display._frameId;let i=this.selfDrawable,n=i,r=null;e&&(r=bC.newForDisplay(null,null,this.display));let s=r,a=e?null:this.selfDrawable;for(let o=0;o<this.children.length;o++){let e=this.children[o];e.syncTree()||(e=this.updateIncompatibleChildInstance(e,o),e.syncTree());const l=e.shouldIncludeInParentDrawables();l&&e.firstDrawable&&(n?OT.connectDrawables(n,e.firstDrawable,this.display):i=e.firstDrawable,n=e.lastDrawable);const h=e.stitchChangeIncluded,u=l;e.stitchChangeIncluded=u,e.stitchChangeFrame===t&&(e.firstChangeInterval=e.lastChangeInterval=bC.newForDisplay(null,null,this.display));const c=e.firstChangeInterval;let d=s&&null===s.drawableAfter;const p=c&&null===c.drawableBefore;if(e.stitchChangeBefore===t&&!d&&!p){const e=bC.newForDisplay(a,null,this.display);s&&(s.nextChangeInterval=e),s=e,r=r||s,d=!0}if((h||u)&&(d?c?null===c.drawableBefore?(s.drawableAfter=c.drawableAfter,s.nextChangeInterval=c.nextChangeInterval,s=e.lastChangeInterval===c?s:e.lastChangeInterval):(s.drawableAfter=e.firstDrawable,s.nextChangeInterval=c,s=e.lastChangeInterval):s.drawableAfter=e.firstDrawable:c&&(r=r||c,null===c.drawableBefore&&(c.drawableBefore=a),s&&(s.nextChangeInterval=c),s=e.lastChangeInterval),a=s&&null===s.drawableAfter?null:e.lastDrawable?e.lastDrawable:a),o===this.children.length-1&&e.stitchChangeAfter===t&&(!s||null!==s.drawableAfter)){const e=bC.newForDisplay(a,null,this.display);s&&(s.nextChangeInterval=e),s=e,r=r||s}e.cleanSyncTreeResults()}r||this.stitchChangeOnChildren!==this.display._frameId||0!==this.children.length||(r=s=bC.newForDisplay(null,null,this.display)),this.firstChangeInterval=r,this.lastChangeInterval=s,this.firstDrawable=this.firstInnerDrawable=i,this.lastDrawable=this.lastInnerDrawable=n}updateSelfDrawable(){if(this.node.isPainted()){const e=this.selfRenderer;if(!this.selfDrawable||0==(this.selfDrawable.renderer&e&af.bitmaskRendererArea))return this.selfDrawable&&this.selfDrawable.markForDisposal(this.display),this.selfDrawable=af.createSelfDrawable(this,this.node,e,this.fittability.ancestorsFittable),!0}return!1}updateIncompatibleChildInstance(e,t){this.display.markInstanceRootForDisposal(e);const i=yV.createFromPool(this.display,this.trail.copy().addDescendant(e.node,t),!1,!1);return this.replaceInstanceWithIndex(e,i,t),i}groupSyncTree(e){const t=this.groupRenderer,i=!!t!=!!this.groupDrawable||!e&&this.groupChanged||this.groupDrawable&&this.groupDrawable.renderer!==t;i&&(this.groupDrawable&&(this.groupDrawable.markForDisposal(this.display),this.groupDrawable=null),this.firstChangeInterval=this.lastChangeInterval=bC.newForDisplay(null,null,this.display)),t&&(this.firstDrawable&&OT.disconnectBefore(this.firstDrawable,this.display),this.lastDrawable&&OT.disconnectAfter(this.lastDrawable,this.display),this.isBackbone?(i&&(this.groupDrawable=nV.createFromPool(this.display,this,this.getTransformRootInstance(),t,this.isDisplayRoot),this.isTransformed&&this.display.markTransformRootDirty(this,!0)),this.firstChangeInterval&&this.groupDrawable.stitch(this.firstDrawable,this.lastDrawable,this.firstChangeInterval,this.lastChangeInterval)):this.isInstanceCanvasCache?(i&&(this.groupDrawable=gC.createFromPool(t,this)),this.firstChangeInterval&&this.groupDrawable.stitch(this.firstDrawable,this.lastDrawable,this.firstChangeInterval,this.lastChangeInterval)):this.isSharedCanvasCacheSelf&&i&&(this.groupDrawable=IC.createFromPool(t,this)),this.groupDrawable.setFittable(this.fittability.ancestorsFittable),this.firstDrawable=this.lastDrawable=this.groupDrawable),i?this.firstChangeInterval=this.lastChangeInterval=bC.newForDisplay(null,null,this.display):t&&(this.firstChangeInterval=this.lastChangeInterval=null)}sharedSyncTree(){this.ensureSharedCacheInitialized();const e=this.sharedCacheRenderer;this.sharedCacheDrawable&&this.sharedCacheDrawable.renderer===e||(this.sharedCacheDrawable&&this.sharedCacheDrawable.markForDisposal(this.display),this.sharedCacheDrawable=new yC(this.trail,e,this,this.sharedCacheInstance),this.firstDrawable=this.sharedCacheDrawable,this.lastDrawable=this.sharedCacheDrawable,this.firstChangeInterval=this.lastChangeInterval=bC.newForDisplay(null,null,this.display))}prepareChildInstances(e){for(;this.instanceRemovalCheckList.length;){const e=this.instanceRemovalCheckList.pop();-1===e.addRemoveCounter&&(e.addRemoveCounter=0,this.display.markInstanceRootForDisposal(e))}if(e)for(let t=0;t<this.node.children.length;t++){const e=this.node.children[t];this.appendInstance(yV.createFromPool(this.display,this.trail.copy().addDescendant(e,t),!1,!1))}}ensureSharedCacheInitialized(){if(!this.sharedCacheInstance){const e=this.node.getId();this.sharedCacheInstance=this.display._sharedCanvasInstances[e],this.sharedCacheInstance||(this.sharedCacheInstance=yV.createFromPool(this.display,new Dv(this.node),!1,!0),this.sharedCacheInstance.syncTree(),this.display._sharedCanvasInstances[e]=this.sharedCacheInstance,this.display.markTransformRootDirty(this.sharedCacheInstance,!0)),this.sharedCacheInstance.externalReferenceCount++,this.isTransformed&&this.display.markTransformRootDirty(this,!0)}}shouldIncludeInParentDrawables(){return this.node.isVisible()||!this.node.isExcludeInvisible()}findPreviousDrawable(e){for(let t=e-1;t>=0;t--){const e=this.children[t].lastDrawable;if(null!==e)return e}return null}findNextDrawable(e){const t=this.children.length;for(let i=e+1;i<t;i++){const e=this.children[i].firstDrawable;if(null!==e)return e}return null}appendInstance(e){this.insertInstance(e,this.children.length)}insertInstance(e,t){e.stitchChangeFrame=this.display._frameId,this.stitchChangeOnChildren=this.display._frameId,this.children.splice(t,0,e),e.parent=this,e.oldParent=this,t<=this.beforeStableIndex&&(this.beforeStableIndex=t-1),t>this.afterStableIndex?this.afterStableIndex=t+1:this.afterStableIndex++,this.fittability.onInsert(e.fittability),this.relativeTransform.addInstance(e),this.markChildVisibilityDirty()}removeInstance(e){this.removeInstanceWithIndex(e,_.indexOf(this.children,e))}removeInstanceWithIndex(e,t){const i=this.display._frameId;e.stitchChangeFrame=i,this.stitchChangeOnChildren=i,t-1>=0&&(this.children[t-1].stitchChangeAfter=i),t+1<this.children.length&&(this.children[t+1].stitchChangeBefore=i),this.children.splice(t,1),e.parent=null,e.oldParent=this,t<=this.beforeStableIndex&&(this.beforeStableIndex=t-1),t>=this.afterStableIndex?this.afterStableIndex=t:this.afterStableIndex--,this.fittability.onRemove(e.fittability),this.relativeTransform.removeInstance(e)}replaceInstanceWithIndex(e,t,i){this.removeInstanceWithIndex(e,i),this.insertInstance(t,i)}reorderInstances(e,t){const i=this.display._frameId;this.children.splice(e,t-e+1);for(let n=e;n<=t;n++){const r=this.findChildInstanceOnNode(this.node._children[n]);this.children.splice(n,0,r),r.stitchChangeFrame=i,n>e&&(r.stitchChangeAfter=i),n<t&&(r.stitchChangeBefore=i)}this.stitchChangeOnChildren=i,this.beforeStableIndex=Math.min(this.beforeStableIndex,e-1),this.afterStableIndex=Math.max(this.afterStableIndex,t+1)}findChildInstanceOnNode(e){const t=e.getInstances();for(let i=0;i<t.length;i++)if(t[i].oldParent===this)return t[i];return null}onChildInserted(e,t){let i=this.findChildInstanceOnNode(e);i?i.addRemoveCounter+=1:i=yV.createFromPool(this.display,this.trail.copy().addDescendant(e,t),!1,!1),this.insertInstance(i,t),this.markSkipPruning()}onChildRemoved(e,t){const i=this.findChildInstanceOnNode(e);i.addRemoveCounter-=1,this.instanceRemovalCheckList.push(i),this.removeInstanceWithIndex(i,t),this.markSkipPruning()}onChildrenReordered(e,t){this.reorderInstances(e,t),this.markSkipPruning()}onVisibilityChange(){this.stitchChangeFrame=this.display._frameId,this.parent&&this.parent.markSkipPruning(),this.visibilityDirty=!0,this.parent&&this.parent.markChildVisibilityDirty()}onOpacityChange(){this.markRenderStateDirty()}markChildVisibilityDirty(){this.childVisibilityDirty||(this.childVisibilityDirty=!0,this.parent&&this.parent.markChildVisibilityDirty())}updateDrawableFittability(e){this.selfDrawable&&this.selfDrawable.setFittable(e),this.groupDrawable&&this.groupDrawable.setFittable(e)}updateVisibility(e,t,i,n){this.visibilityDirty&&(n=!0);const r=this.node.isVisible(),s=this.visible,a=this.relativeVisible,o=this.selfVisible,l=this.node.voicingVisibleProperty.value,h=this.voicingVisible,u=s&&h;this.visible=e&&r,this.voicingVisible=t&&l,this.relativeVisible=i&&r,this.selfVisible=!!this.isVisibilityApplied||this.relativeVisible;const c=this.children.length;for(let p=0;p<c;p++){const e=this.children[p];(n||e.visibilityDirty||e.childVisibilityDirty)&&e.updateVisibility(this.visible,this.voicingVisible,!!this.isVisibilityApplied||this.relativeVisible,n)}this.visibilityDirty=!1,this.childVisibilityDirty=!1,this.visible!==s&&this.visibleEmitter.emit(),this.relativeVisible!==a&&this.relativeVisibleEmitter.emit(),this.selfVisible!==o&&this.selfVisibleEmitter.emit();const d=this.voicingVisible&&this.visible;d!==u&&this.canVoiceEmitter.emit(d)}getDescendantCount(){let e=this.children.length;for(let t=0;t<this.children.length;t++)e+=this.children[t].getDescendantCount();return e}addSVGGroup(e){this.svgGroups.push(e)}removeSVGGroup(e){rm(this.svgGroups,e)}lookupSVGGroup(e){const t=this.svgGroups.length;for(let i=0;i<t;i++){const t=this.svgGroups[i];if(t.block===e)return t}return null}getFilterRootInstance(){return this.isBackbone||this.isInstanceCanvasCache||!this.parent?this:this.parent.getFilterRootInstance()}getTransformRootInstance(){return this.isTransformed||!this.parent?this:this.parent.getTransformRootInstance()}getVisibilityRootInstance(){return this.isVisibilityApplied||!this.parent?this:this.parent.getVisibilityRootInstance()}attachNodeListeners(){this.relativeTransform.attachNodeListeners(),this.isSharedCanvasCachePlaceholder||(this.node.childInsertedEmitter.addListener(this.childInsertedListener),this.node.childRemovedEmitter.addListener(this.childRemovedListener),this.node.childrenReorderedEmitter.addListener(this.childrenReorderedListener),this.node.visibleProperty.lazyLink(this.visibilityListener),this.node.voicingVisibleProperty.lazyLink(this.visibilityListener),this.node.filterChangeEmitter.addListener(this.markRenderStateDirtyListener),this.node.clipAreaProperty.lazyLink(this.markRenderStateDirtyListener),this.node.instanceRefreshEmitter.addListener(this.markRenderStateDirtyListener))}detachNodeListeners(){this.relativeTransform.detachNodeListeners(),this.isSharedCanvasCachePlaceholder||(this.node.childInsertedEmitter.removeListener(this.childInsertedListener),this.node.childRemovedEmitter.removeListener(this.childRemovedListener),this.node.childrenReorderedEmitter.removeListener(this.childrenReorderedListener),this.node.visibleProperty.unlink(this.visibilityListener),this.node.voicingVisibleProperty.unlink(this.visibilityListener),this.node.filterChangeEmitter.removeListener(this.markRenderStateDirtyListener),this.node.clipAreaProperty.unlink(this.markRenderStateDirtyListener),this.node.instanceRefreshEmitter.removeListener(this.markRenderStateDirtyListener))}markRenderStateDirty(){this.renderStateDirtyFrame=this.display._frameId,this.parent&&this.parent.markSkipPruning()}markSkipPruning(){this.skipPruningFrame=this.display._frameId,this.parent&&this.parent.markSkipPruning()}getBranchIndexTo(e){const t=this.branchIndexMap[e.id];if(void 0!==t)return t;const i=this.trail.getBranchIndexTo(e.trail);return this.branchIndexMap[e.id]=i,e.branchIndexMap[this.id]=i,this.branchIndexReferences.push(e),e.branchIndexReferences.push(this),i}dispose(){for(this.active=!1;this.branchIndexReferences.length;){const e=this.branchIndexReferences.pop();delete this.branchIndexMap[e.id],delete e.branchIndexMap[this.id],rm(e.branchIndexReferences,this)}this.groupDrawable&&this.groupDrawable.disposeImmediately(this.display),this.sharedCacheDrawable&&this.sharedCacheDrawable.disposeImmediately(this.display),this.selfDrawable&&this.selfDrawable.disposeImmediately(this.display);const e=this.children.length;for(let t=0;t<e;t++)this.children[t].dispose();for(;this.instanceRemovalCheckList.length;){const e=this.instanceRemovalCheckList.pop();e.active&&e.dispose()}this.stateless||this.detachNodeListeners(),this.node.removeInstance(this),this.sharedCacheInstance&&(this.sharedCacheInstance.externalReferenceCount--,0===this.sharedCacheInstance.externalReferenceCount&&(delete this.display._sharedCanvasInstances[this.node.getId()],this.sharedCacheInstance.dispose())),this.cleanInstance(null,null),this.visibleEmitter.removeAllListeners(),this.relativeVisibleEmitter.removeAllListeners(),this.selfVisibleEmitter.removeAllListeners(),this.canVoiceEmitter.removeAllListeners(),this.freeToPool()}audit(e,t){0}auditVisibility(e){0}auditChangeIntervals(e,t,i,n){if(e){let i=e;for(;i!==t;)i=i.oldNextDrawable}if(i){let e=i;for(;e!==n;)e=e.nextDrawable}}toString(){return`${this.id}#${this.node?`${this.node.constructor.name?this.node.constructor.name:"?"}#${this.node.id}`:"-"}`}}Lg.register("Instance",yV),cy.mixInto(yV);const EV=yV;class vV{constructor(e){this.display=e;const t=document.createElementNS(lf,"svg");this.domElement=t,t.style.position="absolute",t.setAttribute("class","safari-workaround"),t.style.top="0",t.style.left="0",t.style["pointer-events"]="none",e.sizeProperty.link(e=>{t.setAttribute("width",""+e.width),t.setAttribute("height",""+e.height),t.style.clip=`rect(0px,${e.width}px,${e.height}px,0px)`}),this.rect=document.createElementNS(lf,"rect"),t.appendChild(this.rect),this.update()}update(){const e=ep.nextDouble();this.rect.setAttribute("x",""+e),this.rect.setAttribute("y",""+e),this.rect.setAttribute("style","fill: rgba(255,200,100,0); stroke: none;"),this.display.width&&this.rect.setAttribute("width",""+(this.display.width-2*e)),this.display.height&&this.rect.setAttribute("height",""+(this.display.height-2*e))}}Lg.register("SafariWorkaroundOverlay",vV);const AV={"scenery-grab-pointer":["grab","-moz-grab","-webkit-grab","pointer"],"scenery-grabbing-pointer":["grabbing","-moz-grabbing","-webkit-grabbing","pointer"]};let bV=1;class SV{constructor(e,t){const i=Vo()({width:t&&t.container&&t.container.clientWidth||640,height:t&&t.container&&t.container.clientHeight||480,allowCSSHacks:!0,allowSafariRedrawWorkaround:!1,allowSceneOverflow:!1,defaultCursor:"default",backgroundColor:null,preserveDrawingBuffer:!1,allowWebGL:!0,accessibility:!0,supportsInteractiveHighlights:!1,interactive:!0,listenToOnlyElement:!1,batchDOMEvents:!1,assumeFullWindow:!1,aggressiveContextRecreation:!0,passiveEvents:!ff.safari&&null,allowBackingScaleAntialiasing:!0},t);this.id=bV++,this._accessible=i.accessibility,this._preserveDrawingBuffer=i.preserveDrawingBuffer,this._allowWebGL=i.allowWebGL,this._allowCSSHacks=i.allowCSSHacks,this._allowSceneOverflow=i.allowSceneOverflow,this._defaultCursor=i.defaultCursor,this.sizeProperty=new mg(new My(i.width,i.height)),this._currentSize=new My(-1,-1),this._rootNode=e,this._rootNode.addRootedDisplay(this),this._rootBackbone=null,this._domElement=i.container?nV.repurposeBackboneContainer(i.container):nV.createDivBackbone(),this._sharedCanvasInstances={},this._baseInstance=null,this._frameId=0,this._dirtyTransformRoots=[],this._dirtyTransformRootsWithoutPass=[],this._instanceRootsToDispose=[],this._reduceReferencesNeeded=[],this._drawablesToDispose=[],this._drawablesToChangeBlock=[],this._drawablesToUpdateLinks=[],this._changeIntervalsToDispose=[],this._lastCursor=null,this._currentBackgroundCSS=null,this._backgroundColor=null,this._requestAnimationFrameID=0,this._input=null,this._inputListeners=[],this._interactive=i.interactive,this._listenToOnlyElement=i.listenToOnlyElement,this._batchDOMEvents=i.batchDOMEvents,this._assumeFullWindow=i.assumeFullWindow,this._passiveEvents=i.passiveEvents,this._aggressiveContextRecreation=i.aggressiveContextRecreation,this._allowBackingScaleAntialiasing=i.allowBackingScaleAntialiasing,this._overlays=[],this._pointerOverlay=null,this._pointerAreaOverlay=null,this._hitAreaOverlay=null,this._canvasAreaBoundsOverlay=null,this._fittedBlockBoundsOverlay=null,this.applyCSSHacks(),this.setBackgroundColor(i.backgroundColor);const n=new PS;if(this.descriptionUtteranceQueue=new NS(n,{initialize:this._accessible,featureSpecificAnnouncingControlPropertyName:"descriptionCanAnnounceProperty"}),ff.safari&&i.allowSafariRedrawWorkaround&&this.addOverlay(new vV(this)),this.focusManager=new GS,(this._accessible||i.supportsInteractiveHighlights)&&(this._focusRootNode=new cv,this._focusOverlay=new cV(this,this._focusRootNode,{pdomFocusHighlightsVisibleProperty:this.focusManager.pdomFocusHighlightsVisibleProperty,interactiveHighlightsVisibleProperty:this.focusManager.interactiveHighlightsVisibleProperty,readingBlockHighlightsVisibleProperty:this.focusManager.readingBlockHighlightsVisibleProperty}),this.addOverlay(this._focusOverlay)),this._accessible){this._rootPDOMInstance=k_.pool.create(null,this,new Dv),B_.rebuildInstanceTree(this._rootPDOMInstance),this._domElement.appendChild(this._rootPDOMInstance.peer.primarySibling);const e=n.ariaLiveContainer;this._domElement.appendChild(e),e.style[Zg.userSelect]="none",this._boundHandleFullScreenNavigation=this.handleFullScreenNavigation.bind(this),_b.keydownEmitter.addListener(this._boundHandleFullScreenNavigation)}}getDOMElement(){return this._domElement}get domElement(){return this.getDOMElement()}updateDisplay(){const e=!!this._baseInstance;for(this._input&&this._input.validatePointers(),this._accessible&&this._rootPDOMInstance.peer.updateSubtreePositioning(),this._rootNode.validateWatchedBounds(),this._baseInstance=this._baseInstance||EV.createFromPool(this,new Dv(this._rootNode),!0,!1),this._baseInstance.baseSyncTree(),e&&this.markTransformRootDirty(this._baseInstance,this._baseInstance.isTransformed);this._drawablesToUpdateLinks.length;)this._drawablesToUpdateLinks.pop().updateLinks();for(;this._changeIntervalsToDispose.length;)this._changeIntervalsToDispose.pop().dispose();for(this._rootBackbone=this._rootBackbone||this._baseInstance.groupDrawable;this._drawablesToChangeBlock.length;){this._drawablesToChangeBlock.pop().updateBlock();0}for(0,this.updateDirtyTransformRoots(),this._baseInstance.updateVisibility(!0,!0,!0,!1);this._instanceRootsToDispose.length;)this._instanceRootsToDispose.pop().dispose();for(0;this._drawablesToDispose.length;)this._drawablesToDispose.pop().dispose();if(this._rootBackbone.update(),this.updateCursor(),this.updateBackgroundColor(),this.updateSize(),this._overlays.length){let e=this._rootBackbone.lastZIndex;for(let t=0;t<this._overlays.length;t++){const i=this._overlays[t];i.domElement.style.zIndex=""+e++,i.update()}}for(;this._reduceReferencesNeeded.length;)this._reduceReferencesNeeded.pop().reduceReferences();this._frameId++,B_.auditPDOMDisplays(this.rootNode)}getPhetioElementAt(e){const t=this._rootNode.getPhetioMouseHit(e);return"phetioNotSelectable"===t?null:t}updateSize(){let e=!1;this.size.width!==this._currentSize.width&&(e=!0,this._currentSize.width=this.size.width,this._domElement.style.width=this.size.width+"px"),this.size.height!==this._currentSize.height&&(e=!0,this._currentSize.height=this.size.height,this._domElement.style.height=this.size.height+"px"),e&&!this._allowSceneOverflow&&(this._domElement.style.clip=`rect(0px,${this.size.width}px,${this.size.height}px,0px)`)}isWebGLAllowed(){return this._allowWebGL}get webglAllowed(){return this.isWebGLAllowed()}getRootNode(){return this._rootNode}get rootNode(){return this.getRootNode()}getRootBackbone(){return this._rootBackbone}get rootBackbone(){return this.getRootBackbone()}getSize(){return this.sizeProperty.value}get size(){return this.getSize()}getBounds(){return this.size.toBounds()}get bounds(){return this.getBounds()}setSize(e){this.sizeProperty.value=e}setWidthHeight(e,t){this.setSize(new My(e,t))}getWidth(){return this.size.width}get width(){return this.getWidth()}set width(e){this.setWidth(e)}setWidth(e){return this.getWidth()!==e&&this.setSize(new My(e,this.getHeight())),this}getHeight(){return this.size.height}get height(){return this.getHeight()}set height(e){this.setHeight(e)}setHeight(e){return this.getHeight()!==e&&this.setSize(new My(this.getWidth(),e)),this}setBackgroundColor(e){return this._backgroundColor=e,this}set backgroundColor(e){this.setBackgroundColor(e)}get backgroundColor(){return this.getBackgroundColor()}getBackgroundColor(){return this._backgroundColor}get interactive(){return this._interactive}set interactive(e){this._accessible&&e!==this._interactive&&this._rootPDOMInstance.peer.recursiveDisable(!e),this._interactive=e,!this._interactive&&this._input&&(this._input.interruptPointers(),this._input.clearBatchedEvents(),this._input.removeTemporaryPointers(),this._rootNode.interruptSubtreeInput(),this.interruptInput())}addOverlay(e){this._overlays.push(e),this._domElement.appendChild(e.domElement),e.domElement.setAttribute("aria-hidden","true")}removeOverlay(e){this._domElement.removeChild(e.domElement),this._overlays.splice(_.indexOf(this._overlays,e),1)}getPDOMRootElement(){return this._accessible?this._rootPDOMInstance.peer.primarySibling:null}get pdomRootElement(){return this.getPDOMRootElement()}isAccessible(){return this._accessible}isElementUnderPDOM(e){return this._accessible&&this.pdomRootElement.contains(e)}handleFullScreenNavigation(e){if(hy.isFullScreen()&&Of.isKeyEvent(e,Of.KEY_TAB)){const t=this.pdomRootElement;(e.shiftKey?nE.getPreviousFocusable(t||void 0):nE.getNextFocusable(t||void 0))===e.target&&e.preventDefault()}}getUsedRenderersBitmask(){return function e(t){let i=0;return _.each(t.blocks,t=>{t instanceof DC&&t.domDrawable instanceof nV?i|=e(t.domDrawable):i|=t.renderer}),i}(this._rootBackbone)&af.bitmaskRendererArea}markTransformRootDirty(e,t){t?this._dirtyTransformRoots.push(e):this._dirtyTransformRootsWithoutPass.push(e)}updateDirtyTransformRoots(){for(;this._dirtyTransformRoots.length;)this._dirtyTransformRoots.pop().relativeTransform.updateTransformListenersAndCompute(!1,!1,this._frameId,!0);for(;this._dirtyTransformRootsWithoutPass.length;)this._dirtyTransformRootsWithoutPass.pop().relativeTransform.updateTransformListenersAndCompute(!1,!1,this._frameId,!1)}markDrawableChangedBlock(e){this._drawablesToChangeBlock.push(e)}markForReducedReferences(e){this._reduceReferencesNeeded.push(e)}markInstanceRootForDisposal(e){this._instanceRootsToDispose.push(e)}markDrawableForDisposal(e){this._drawablesToDispose.push(e)}markDrawableForLinksUpdate(e){this._drawablesToUpdateLinks.push(e)}markChangeIntervalToDispose(e){this._changeIntervalsToDispose.push(e)}updateBackgroundColor(){const e=null===this._backgroundColor?"":this._backgroundColor.toCSS?this._backgroundColor.toCSS():this._backgroundColor;e!==this._currentBackgroundCSS&&(this._currentBackgroundCSS=e,this._domElement.style.backgroundColor=e)}updateCursor(){if(this._input&&this._input.mouse&&this._input.mouse.point){if(this._input.mouse.cursor)return void this.setSceneCursor(this._input.mouse.cursor);const e=this._rootNode.trailUnderPointer(this._input.mouse);if(e)for(let t=e.getCursorCheckIndex();t>=0;t--){const i=e.nodes[t],n=i.getEffectiveCursor();if(n)return void this.setSceneCursor(n)}}this.setSceneCursor(this._defaultCursor)}setElementCursor(e){this._domElement.style.cursor=e,this._assumeFullWindow&&(document.body.style.cursor=e)}setSceneCursor(e){if(e!==this._lastCursor){this._lastCursor=e;const t=AV[e];if(t)for(let e=t.length-1;e>=0;e--)this.setElementCursor(t[e]);else this.setElementCursor(e)}}applyCSSHacks(){this._allowSceneOverflow||(this._domElement.style.overflow="hidden"),this._domElement.style.msTouchAction="none",Zg.setStyle(this._domElement,Zg.fontSmoothing,"antialiased"),this._allowCSSHacks&&(document.onselectstart=()=>!1,document.body.style.msContentZooming="none",Zg.setStyle(this._domElement,Zg.userDrag,"none"),Zg.setStyle(this._domElement,Zg.userSelect,"none"),Zg.setStyle(this._domElement,Zg.touchAction,"none"),Zg.setStyle(this._domElement,Zg.touchCallout,"none"),Zg.setStyle(this._domElement,Zg.tapHighlightColor,"rgba(0,0,0,0)"))}canvasDataURL(e){this.canvasSnapshot(t=>{e(t.toDataURL())})}canvasSnapshot(e){const t=document.createElement("canvas");t.width=this.size.width,t.height=this.size.height;const i=t.getContext("2d");this._rootNode.renderToCanvas(t,i,()=>{e(t,i.getImageData(0,0,t.width,t.height))},this.domElement.style.backgroundColor)}setPointerDisplayVisible(e){e!==!!this._pointerOverlay&&(e?(this._pointerOverlay=new mV(this,this._rootNode),this.addOverlay(this._pointerOverlay)):(this.removeOverlay(this._pointerOverlay),this._pointerOverlay.dispose(),this._pointerOverlay=null))}setPointerAreaDisplayVisible(e){e!==!!this._pointerAreaOverlay&&(e?(this._pointerAreaOverlay=new pV(this,this._rootNode),this.addOverlay(this._pointerAreaOverlay)):(this.removeOverlay(this._pointerAreaOverlay),this._pointerAreaOverlay.dispose(),this._pointerAreaOverlay=null))}setHitAreaDisplayVisible(e){e!==!!this._hitAreaOverlay&&(e?(this._hitAreaOverlay=new dV(this,this._rootNode),this.addOverlay(this._hitAreaOverlay)):(this.removeOverlay(this._hitAreaOverlay),this._hitAreaOverlay.dispose(),this._hitAreaOverlay=null))}setCanvasNodeBoundsVisible(e){e!==!!this._canvasAreaBoundsOverlay&&(e?(this._canvasAreaBoundsOverlay=new sV(this,this._rootNode),this.addOverlay(this._canvasAreaBoundsOverlay)):(this.removeOverlay(this._canvasAreaBoundsOverlay),this._canvasAreaBoundsOverlay.dispose(),this._canvasAreaBoundsOverlay=null))}setFittedBlockBoundsVisible(e){e!==!!this._fittedBlockBoundsOverlay&&(e?(this._fittedBlockBoundsOverlay=new aV(this,this._rootNode),this.addOverlay(this._fittedBlockBoundsOverlay)):(this.removeOverlay(this._fittedBlockBoundsOverlay),this._fittedBlockBoundsOverlay.dispose(),this._fittedBlockBoundsOverlay=null))}resizeOnWindowResize(){const e=()=>{this.setWidthHeight(window.innerWidth,window.innerHeight)};window.addEventListener("resize",e),e()}updateOnRequestAnimationFrame(e){let t=0,i=0;const n=this;!function r(){n._requestAnimationFrameID=window.requestAnimationFrame(r,n._domElement);const s=Date.now();0!==t&&(i=(s-t)/1e3),t=s,vb.emit(i),e&&e(i),n.updateDisplay()}()}cancelUpdateOnRequestAnimationFrame(){window.cancelAnimationFrame(this._requestAnimationFrameID)}initializeEvents(e){const t=new ex(this,!this._listenToOnlyElement,this._batchDOMEvents,this._assumeFullWindow,this._passiveEvents,e);this._input=t,t.connectListeners()}detachEvents(){this._input.disconnectListeners(),this._input=null}addInputListener(e){return _.includes(this._inputListeners,e)||this._inputListeners.push(e),this}removeInputListener(e){return this._inputListeners.splice(_.indexOf(this._inputListeners,e),1),this}hasInputListener(e){for(let t=0;t<this._inputListeners.length;t++)if(this._inputListeners[t]===e)return!0;return!1}getInputListeners(){return this._inputListeners.slice(0)}get inputListeners(){return this.getInputListeners()}interruptInput(){const e=this.inputListeners;for(let t=0;t<e.length;t++){const i=e[t];i.interrupt&&i.interrupt()}return this}interruptPointers(){return this._input&&this._input.interruptPointers(),this}interruptOtherPointers(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this._input&&this._input.interruptPointers(t||(null===(e=this._input.currentSceneryEvent)||void 0===e?void 0:e.pointer)||null),this}ensureNotPainting(){}loseWebGLContexts(){!function e(t){t.blocks&&t.blocks.forEach(t=>{const i=t.gl;i&&_f.loseContext(i);for(let n=t.firstDrawable;null!==n&&(e(n),n!==t.lastDrawable);n=n.nextDrawable);})}(this._rootBackbone)}inspect(){localStorage.scenerySnapshot=JSON.stringify(NT(this))}getDebugHTML(){const e="font-weight: bold; font-size: 120%; margin-top: 5px;";let t=0,i="";i+=`<div style="${e}">Display (${this.id}) Summary</div>`,i+=`${this.size.toString()} frame:${this._frameId} input:${!!this._input} cursor:${this._lastCursor}<br/>`,i+=`Nodes: ${function e(t){let i=1;for(let n=0;n<t.children.length;n++)i+=e(t.children[n]);return i}(this._rootNode)}<br/>`,i+=this._baseInstance?`Instances: ${function e(t){let i=1;for(let n=0;n<t.children.length;n++)i+=e(t.children[n]);return i}(this._baseInstance)}<br/>`:"",i+=this._rootBackbone?`Drawables: ${function e(t){let i=1;if(t.blocks)_.each(t.blocks,t=>{i+=e(t)});else if(t.firstDrawable&&t.lastDrawable){for(let n=t.firstDrawable;n!==t.lastDrawable;n=n.nextDrawable)i+=e(n);i+=e(t.lastDrawable)}return i}(this._rootBackbone)}<br/>`:"";const n={};function r(e){const t=e.constructor.name;n[t]?n[t]++:n[t]=1}i+=this._baseInstance?`Retained Drawables: ${function e(t){let i=0;t.selfDrawable&&(r(t.selfDrawable),i++),t.groupDrawable&&(r(t.groupDrawable),i++),t.sharedCacheDrawable&&(r(t.sharedCacheDrawable),i++);for(let n=0;n<t.children.length;n++)i+=e(t.children[n]);return i}(this._baseInstance)}<br/>`:"";for(const h in n)i+=`&nbsp;&nbsp;&nbsp;&nbsp;${h}: ${n[h]}<br/>`;function s(e){if(!e.firstDrawable||!e.lastDrawable)return"";const i=e.domDrawable&&e.domDrawable.blocks;let n=`<div style="margin-left: ${20*t}px">`;if(n+=e.toString(),i||(n+=` (${e.drawableCount} drawables)`),n+="</div>",t+=1,i)for(let t=0;t<e.domDrawable.blocks.length;t++)n+=s(e.domDrawable.blocks[t]);return t-=1,n}if(this._rootBackbone){i+=`<div style="${e}">Block Summary</div>`;for(let e=0;e<this._rootBackbone.blocks.length;e++)i+=s(this._rootBackbone.blocks[e])}function a(e){let t="";function i(e){t+=` <span style="color: #008">${e}</span>`}const n=e.node;t+=e.id,t+=" "+(n.constructor.name?n.constructor.name:"?"),t+=` <span style="font-weight: ${n.isPainted()?"bold":"normal"}">${n.id}</span>`,t+=n.getDebugHTMLExtras(),n.visible||i("invis"),e.visible||i("I-invis"),e.relativeVisible||i("I-rel-invis"),e.selfVisible||i("I-self-invis"),e.fittability.ancestorsFittable||i("nofit-ancestor"),e.fittability.selfFittable||i("nofit-self"),!0===n.pickable&&i("pickable"),!1===n.pickable&&i("unpickable"),e.trail.isPickable()&&i('<span style="color: #808">hits</span>'),n.getEffectiveCursor()&&i("effectiveCursor:"+n.getEffectiveCursor()),n.clipArea&&i("clipArea"),n.mouseArea&&i("mouseArea"),n.touchArea&&i("touchArea"),n.getInputListeners().length&&i("inputListeners"),n.getRenderer()&&i("renderer:"+n.getRenderer()),n.isLayerSplit()&&i("layerSplit"),n.opacity<1&&i("opacity:"+n.opacity),n.disabledOpacity<1&&i("disabledOpacity:"+n.disabledOpacity),n._boundsEventCount>0&&i(`<span style="color: #800">boundsListen:${n._boundsEventCount}:${n._boundsEventSelfCount}</span>`);let r="";switch(n.transform.getMatrix().type){case Nh.IDENTITY:r="";break;case Nh.TRANSLATION_2D:r="translated";break;case Nh.SCALING:r="scale";break;case Nh.AFFINE:r="affine";break;case Nh.OTHER:r="other";break;default:throw new Error("invalid matrix type: "+n.transform.getMatrix().type)}return r&&(t+=` <span style="color: #88f" title="${n.transform.getMatrix().toString().replace("\n","&#10;")}">${r}</span>`),t+=` <span style="color: #888">[Trail ${e.trail.indices.join(".")}]</span>`,t+=` <span style="color: #8c8">${n._rendererSummary.bitmask.toString(16)}${n._rendererBitmask!==af.bitmaskNodeDefault?` (${n._rendererBitmask.toString(16)})`:""}</span>`,t}function o(e){let t=e.toString();return e.visible&&(t=`<strong>${t}</strong>`),e.dirty&&(t+=e.dirty?' <span style="color: #c00;">[x]</span>':""),e.fittable||(t+=e.dirty?' <span style="color: #0c0;">[no-fit]</span>':""),t}function l(e){let n=`<div style="margin-left: ${20*t}px">`;function r(e,t){n+=` <span style="color: #888">${e}:${o(t)}</span>`}n+=a(e),e.selfDrawable&&r("self",e.selfDrawable),e.groupDrawable&&r("group",e.groupDrawable),e.sharedCacheDrawable&&r("sharedCache",e.sharedCacheDrawable),n+="</div>",i+=n,t+=1,_.each(e.children,e=>{l(e)}),t-=1}return this._baseInstance&&(i+=`<div style="${e}">Root Instance Tree</div>`,l(this._baseInstance)),_.each(this._sharedCanvasInstances,t=>{i+=`<div style="${e}">Shared Canvas Instance Tree</div>`,l(t)}),this._rootBackbone&&(i+='<div style="font-weight: bold;">Root Drawable Tree</div>',function e(n){let r=`<div style="margin-left: ${20*t}px">`;if(r+=o(n),n.instance?(r+=` <span style="color: #0a0;">(${n.instance.trail.toPathString()})</span>`,r+="&nbsp;&nbsp;&nbsp;"+a(n.instance)):n.backboneInstance&&(r+=` <span style="color: #a00;">(${n.backboneInstance.trail.toPathString()})</span>`,r+="&nbsp;&nbsp;&nbsp;"+a(n.backboneInstance)),r+="</div>",i+=r,n.blocks)t+=1,_.each(n.blocks,t=>{e(t)}),t-=1;else if(n.firstDrawable&&n.lastDrawable){t+=1;for(let t=n.firstDrawable;t!==n.lastDrawable;t=t.nextDrawable)e(t);e(n.lastDrawable),t-=1}}(this._rootBackbone)),i}getDebugURI(){return"data:text/html;charset=utf-8,"+encodeURIComponent(`<!DOCTYPE html><html lang="en"><head><title>Scenery Debug Snapshot</title></head><body style="font-size: 12px;">${this.getDebugHTML()}</body></html>`)}popupDebug(){window.open(this.getDebugURI())}iframeDebug(){const e=document.createElement("iframe");e.width=""+window.innerWidth,e.height=""+window.innerHeight,e.style.position="absolute",e.style.left="0",e.style.top="0",e.style.zIndex="10000",document.body.appendChild(e),e.contentWindow.document.open(),e.contentWindow.document.write(this.getDebugHTML()),e.contentWindow.document.close(),e.contentWindow.document.body.style.background="white";const t=document.createElement("button");t.style.position="absolute",t.style.top="0",t.style.right="0",t.style.zIndex="10001",document.body.appendChild(t),t.textContent="close",["pointerdown","click","touchdown"].forEach(i=>{t.addEventListener(i,()=>{document.body.removeChild(e),document.body.removeChild(t)},!0)})}getPDOMDebugHTML(){let e="";const t="font-weight: bold; font-size: 120%; margin-top: 5px;",i="&nbsp;&nbsp;&nbsp;&nbsp;";e+=`<div style="${t}">Accessible Instances</div><br>`,function t(n,r){e+=r+lA(`${n.isRootInstance?"":n.node.tagName} ${n.toString()}`)+"<br>",n.children.forEach(e=>{t(e,r+i)})}(this._rootPDOMInstance,""),e+=`<br><div style="${t}">Parallel DOM</div><br>`;let n=this._rootPDOMInstance.peer.primarySibling.outerHTML;n=n.replace(/></g,">\n<");const r=n.split("\n");let s="";for(let a=0;a<r.length;a++){const t=r[a],n=t.startsWith("</");n&&(s=s.slice(i.length)),e+=s+lA(t)+"<br>",n||(s+=i)}return e}foreignObjectRasterization(e){const t={};let i=0;function n(e){e.id||(e.id="unknown-canvas-"+i++),t[e.id]=e.toDataURL()}!function e(t){if(t instanceof nV)_.each(t.blocks,t=>{e(t)});else if(t instanceof CC&&t.firstDrawable&&t.lastDrawable){for(let i=t.firstDrawable;i!==t.lastDrawable;i=i.nextDrawable)e(i);e(t.lastDrawable),(t instanceof IC||t instanceof UC)&&t.canvas&&t.canvas instanceof window.HTMLCanvasElement&&n(t.canvas)}_P&&t instanceof _P&&(t.domElement instanceof window.HTMLCanvasElement&&n(t.domElement),Array.prototype.forEach.call(t.domElement.getElementsByTagName("canvas"),e=>{n(e)}))}(this._rootBackbone);const r=document.implementation.createHTMLDocument("");r.documentElement.innerHTML=this.domElement.outerHTML,r.documentElement.setAttribute("xmlns",r.documentElement.namespaceURI),r.documentElement.appendChild(document.createElement("style")).innerHTML=`.${Xy.ROOT_CLASS_NAME} { display:none; } `;let s=r.documentElement.getElementsByTagName("canvas");s=Array.prototype.slice.call(s);for(let d=0;d<s.length;d++){const e=s[d],i=e.style.cssText,n=r.createElement("img"),a=t[e.id];n.src=a,n.setAttribute("style",i),e.parentNode.replaceChild(n,e)}const a=this.width,o=this.height,l=()=>{SV.elementToSVGDataURL(r.documentElement,a,o,e)};let h=0,u=!1;const c=Array.prototype.slice.call(r.documentElement.getElementsByTagName("image"));for(let d=0;d<c.length;d++){const e=c[d],t=e.getAttribute("xlink:href");"data:"!==t.slice(0,5)&&(h++,u=!0,(()=>{const i=new window.Image,n=e;i.onload=()=>{const e=document.createElement("canvas");e.width=i.width,e.height=i.height,e.getContext("2d").drawImage(i,0,0),n.setAttribute("xlink:href",e.toDataURL()),0==--h&&l()},i.onerror=()=>{0==--h&&l()},i.src=t})())}u||l()}popupRasterization(){this.foreignObjectRasterization(e=>{e&&window.open(e)})}getTrailFromPDOMIndicesString(e){if(!this._rootPDOMInstance)return null;let t=this._rootPDOMInstance;const i=e.split(nE.PDOM_UNIQUE_ID_SEPARATOR);for(let n=0;n<i.length;n++){const e=Number(i[n]);if(t=t.children[e],!t)return null}return t&&t.trail?t.trail:null}dispose(){this._input&&this.detachEvents(),this._rootNode.removeRootedDisplay(this),this._accessible&&(_b.keydownEmitter.removeListener(this._boundHandleFullScreenNavigation),this._rootPDOMInstance.dispose()),this._focusOverlay&&this._focusOverlay.dispose(),this.sizeProperty.dispose(),this._baseInstance&&this._baseInstance.dispose(),this.descriptionUtteranceQueue.dispose(),this.focusManager&&this.focusManager.dispose()}static elementToSVGDataURL(e,t,i,n){const r=document.createElement("canvas"),s=r.getContext("2d");r.width=t,r.height=i;const a=`<svg xmlns="http://www.w3.org/2000/svg" width="${t}" height="${i}"><foreignObject width="100%" height="100%"><div xmlns="http://www.w3.org/1999/xhtml">${(new window.XMLSerializer).serializeToString(e)}</div></foreignObject></svg>`,o=new window.Image;o.onload=()=>{s.drawImage(o,0,0),n(r.toDataURL())},o.onerror=()=>{n(null)};const l=new window.TextEncoderLite("utf-8").encode(a),h=window.fromByteArray(l);o.src="data:image/svg+xml;base64,"+h}static assertSubtreeDisposed(e){0}static addInputListener(e){_.includes(SV.inputListeners,e)||SV.inputListeners.push(e)}static removeInputListener(e){SV.inputListeners.splice(_.indexOf(SV.inputListeners,e),1)}static interruptInput(){const e=SV.inputListeners.slice(0);for(let t=0;t<e.length;t++){const i=e[t];i.interrupt&&i.interrupt()}}}_defineProperty(SV,"INTERRUPT_OTHER_POINTERS",e=>{var t,i,n;null===(t=phet)||void 0===t||null===(i=t.joist)||void 0===i||null===(n=i.display)||void 0===n||n.interruptOtherPointers(null==e?void 0:e.pointer)}),Lg.register("Display",SV),SV.userGestureEmitter=new hb,SV.inputListeners=[];const _V={};let xV=0;function wV(e,t,i){let n=e.indexOfChild(t)+i;for(;n>0&&n<e.children.length&&!e.children[n].visible;)n+=i;n>=0&&n<e.children.length&&e.moveChildToIndex(t,n),e.onIndexedNodeIOChildMoved&&e.onIndexedNodeIOChildMoved(t)}const TV=new el("IndexedNodeIO",{valueType:cv,documentation:"Node that can be moved forward/back by index, which specifies z-order and/or layout order",supertype:cv.NodeIO,toStateObject:e=>{const t={index:null};return e.parents[0]&&(t.index=e.parents[0].indexOfChild(e)),t},applyState:(e,t)=>{const i=e.parents[0];if(i&&t.index){const n=i.children;n[i.indexOfChild(e)]=n[t.index],n[t.index]=e,i.setChildren(n)}},stateSchema:{index:ng(il)},methods:{linkIndex:{returnType:il,parameterTypes:[eg(sg,[il])],documentation:"Following the PropertyIO.link pattern, subscribe for notifications when the index in the parent changes, and receive a callback with the current value.  The return value is a numeric ID for use with clearLinkIndex.",implementation:function(e){const t=()=>{const t=this.parents[0].indexOfChild(this);e(t)};this.parents[0].childrenChangedEmitter.addListener(t),t();const i=xV;return _V[i]=t,xV++,i}},unlinkIndex:{returnType:sg,parameterTypes:[il],documentation:"Unlink a listener that has been added using linkIndex, by its numerical ID (like setTimeout/clearTimeout)",implementation:function(e){const t=_V[e];this.parents[0].childrenChangedEmitter.removeListener(t),delete _V[e]}},clearLinkIndex:{returnType:sg,parameterTypes:[il],documentation:'Deprecated, see "unlinkIndex".',implementation:function(e){const t=_V[e];this.parents[0].childrenChangedEmitter.removeListener(t),delete _V[e]}},moveForward:{returnType:sg,parameterTypes:[],implementation:function(){var e;(e=this)._parents.forEach(t=>wV(t,e,1))},documentation:"Move this Node one index forward in each of its parents, skipping invisible Nodes. If the Node is already at the front, this is a no-op."},moveBackward:{returnType:sg,parameterTypes:[],implementation:function(){var e;(e=this)._parents.forEach(t=>wV(t,e,-1))},documentation:"Move this Node one index backward in each of its parents, skipping invisible Nodes. If the Node is already at the back, this is a no-op."}}});Lg.register("IndexedNodeIO",TV);const PV=TV;class CV extends Rb{constructor(e,t,i){i=Po({nodeTandem:Lm.REQUIRED},i),super([new gy(!0,{tandem:i.nodeTandem.createTandem("visibleProperty")}),...e],(function(e){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return e&&t(...n)}))}}Lg.register("PhetioControlledVisibilityProperty",CV);const VV={minLevels:1,maxLevels:10,distanceEpsilon:2e-4,curveEpsilon:.2},RV=nd.AnalyticBilinear,NV=(e,t)=>new Au(Nl.Over,Cl.Normal,e,t),MV=e=>new mh("nonzero",e.subpaths.map(e=>e.toPiecewiseLinear(VV).segments.map(e=>e.start))),kV=e=>new mh("nonzero",e.flatMap(e=>MV(e).subpaths)),LV=(e,t,i)=>{if(xg(t)&&(t=t.value),null===t)return Fh.TRANSPARENT;if("string"==typeof t&&(t=new Hg(t)),t instanceof Hg)return gh.fromInside(e,new Fh(BV(t)));{const n=t.transformMatrix?i.timesMatrix(t.transformMatrix):i;if(t instanceof mE)return gh.fromInside(e,new Bc(n,t.start,t.end,t.stops.map(e=>new ic(e.ratio,new Fh(BV(e.color)))),Ll.Pad,kc.SplitAccurate));if(t instanceof gE)return gh.fromInside(e,new Kc(n,t.start,t.startRadius,t.end,t.endRadius,t.stops.map(e=>new ic(e.ratio,new Fh(BV(e.color)))),Ll.Pad,Xc.SplitAccurate));if(t instanceof fE)return gh.fromInside(e,new sc(n,IV(t.image),Ll.Repeat,Ll.Repeat,RV))}return console.log("SOME PAINT TYPE UNIMPLEMENTED?!?"),Fh.TRANSPARENT},IV=e=>{const t=document.createElement("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d",{willReadFrequently:!0});i.drawImage(e,0,0);const n=i.getImageData(0,0,t.width,t.height);let r=!0;const s=[];for(let a=0;a<n.data.length/4;a++){const e=4*a,t=n.data[e]/255,i=n.data[e+1]/255,o=n.data[e+2]/255,l=n.data[e+3]/255;l<1&&(r=!1);const h=new yl(t,i,o,l),u=Fh.premultiply(h);s.push(u)}return{width:n.width,height:n.height,isFullyOpaque:r,evaluate:(e,t)=>s[t*n.width+e]}},BV=e=>(xg(e)&&(e=e.value),null===e?yl.ZERO:("string"==typeof e&&(e=new Hg(e)),Fh.premultiply(new yl(e.red/255,e.green/255,e.blue/255,e.alpha))));class DV{static nodeToRenderProgram(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mh.IDENTITY;if(!e.visible)return Fh.TRANSPARENT;const i=[];if(e.matrix&&(t=t.timesMatrix(e.matrix)),e instanceof aA){const n=(e,n)=>{const r=MV(e.transformed(t));i.push(LV(r,n,t))};if(e.hasShape()){if(e.hasFill()){const t=e.getShape();t&&n(t,e.getFill())}if(e.hasStroke()){let t=e.getShape();e.lineDash.length&&(t=t.getDashedShape(e.lineDash,e.lineDashOffset)),t=t.getStrokedShape(e._lineDrawingStyles),n(t,e.getStroke())}}}else if(e instanceof gA){const n="bold"===e._font.weight?window.sceneryBoldFont:window.sceneryFont,r=e._font.numericSize/n.unitsPerEM,s=t.timesMatrix(Mh.scaling(r)),a=n.shapeText(e.renderedText,!0),o=Mh.rowMajor(1,0,0,0,-1,0,0,0,1);if(a){const n=[];let r=0;if(a.forEach(e=>{const t=s.timesMatrix(Mh.translation(r+e.x,e.y)).timesMatrix(o);n.push(e.shape.transformed(t)),r+=e.advance}),e.hasFill()){const r=kV(n);i.push(LV(r,e.getFill(),t))}if(e.hasStroke()){const r=kV(n.map(t=>(e.lineDash.length&&(t=t.getDashedShape(e.lineDash,e.lineDashOffset)),t.getStrokedShape(e._lineDrawingStyles))));i.push(LV(r,e.getStroke(),t))}}else console.log("TEXT UNSHAPED",e.renderedText)}else if(e instanceof wA)console.log("SPRITES UNIMPLEMENTED");else if(e instanceof rA){if(e.image){const n=MV(Ip.bounds(e.selfBounds).transformed(t)),r=gh.fromInside(n,new sc(t,IV(e.image),Ll.Pad,Ll.Pad,RV));i.push(1===e.imageOpacity?r:new Wh(r,e.imageOpacity))}}e.children.forEach(e=>{i.push(DV.nodeToRenderProgram(e,t))});let n=new wu(i).simplified();return e.filters.forEach(e=>{e instanceof LE&&(n=new Kh(new Ju(new $h(n),e.getMatrix(),e.getTranslation())))}),1===e.effectiveOpacity||n.isFullyTransparent||(n=new Wh(n,e.effectiveOpacity)),e.clipArea&&!n.isFullyTransparent&&(n=new Au(Nl.In,Cl.Normal,n,new gh(MV(e.clipArea),new Fh(new yl(1,1,1,1)),Fh.TRANSPARENT))),n.simplified()}static addBackgroundColor(e,t){return NV(e,new Fh(BV(t)))}static showSim(){const e=window.phet.joist.display,t=DV.addBackgroundColor(DV.nodeToRenderProgram(e.rootNode),Hg.toColor(e.backgroundColor)).transformed(Mh.scaling(window.devicePixelRatio)),i=e.width*window.devicePixelRatio,n=e.height*window.devicePixelRatio,r=new cN(i,n);FN.rasterize(t,r,new Zl(0,0,i,n));const s=FN.imageDataToCanvas(r.toImageData());s.style.width=s.width/window.devicePixelRatio+"px",s.style.height=s.height/window.devicePixelRatio+"px",s.style.position="absolute",s.style.top="0",s.style.left="0",s.style.zIndex="1000000",document.body.appendChild(s)}static nodeToJSON(e){let t=DV.nodeToRenderProgram(e);t=t.transformed(Mh.scaling(1).timesMatrix(Mh.translation(5-e.bounds.minX,5-e.bounds.minY))),t=NV(t,new sc(Mh.scaling(5),{width:2,height:2,isFullyOpaque:!0,evaluate:(e,t)=>{const i=(e+t)%2==0?.9:.85;return new yl(i,i,i,1)}},Ll.Repeat,Ll.Repeat,nd.NearestNeighbor));const i=t.simplified().serialize();return JSON.stringify(i)}static premultipliedSRGBToColor(e){const t=Fh.unpremultiply(e);return new Hg(255*t.x,255*t.y,255*t.z,t.w)}static colorFrom(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const n=new Hg(...t);return new Fh(new yl(n.red/255,n.green/255,n.blue/255,n.alpha))}}St.register("RenderFromNode",DV);class OV{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.startPoint=e,this.endPoint=t,this.containsFakeCorner=i}static fromPolygon(e){const t=[];for(let i=0;i<e.length;i++)t.push(new OV(e[i],e[(i+1)%e.length]));return t}static fromPolygons(e){return e.flatMap(OV.fromPolygon)}static toPolygons(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e-8;const i=OV.withOverlappingRemoved(e),n=[],r=new Set(i);for(;r.size>0;){const e=r.values().next().value,i=new aR(!0);let s=e;do{if(i.add(s.startPoint.x,s.startPoint.y),r.delete(s),e.startPoint.equalsEpsilon(s.endPoint,t))break;s=[...r].find(e=>e.startPoint.equalsEpsilon(s.endPoint,t))}while(s!==e);const a=i.finalize();a.length>=3&&n.push(a)}return n}static withOppositesRemoved(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e-8;const i=[],n=new Set(e);for(;n.size>0;){const e=n.values().next().value;n.delete(e);const r=[...n].find(i=>i.startPoint.equalsEpsilon(e.endPoint,t)&&i.endPoint.equalsEpsilon(e.startPoint,t));r?n.delete(r):i.push(e)}return i}static withOverlappingRemoved(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e-8;const i=new Set,n=new Set(e);for(;n.size>0;){const e=n.values().next().value;n.delete(e);let r=!1;for(const s of i)if(fl.arePointsCollinear(e.startPoint,e.endPoint,s.startPoint,t)&&fl.arePointsCollinear(e.startPoint,e.endPoint,s.endPoint,t)){const a=op.getOverlaps(new op(e.startPoint,e.endPoint),new op(s.startPoint,s.endPoint),t);if(a.length>0){const o=a[0];if(o.a>=0||o.t0+t>=o.t1||o.qt0+t>=o.qt1)continue;const l=e.endPoint.minus(e.startPoint),h=s.endPoint.minus(s.startPoint),u=e.startPoint.plus(l.times(o.t0)),c=e.startPoint.plus(l.times(o.t1)),d=s.startPoint.plus(h.times(o.qt0)),p=s.startPoint.plus(h.times(o.qt1));0,i.delete(s),e.startPoint.equalsEpsilon(u,t)||n.add(new OV(e.startPoint,u)),e.endPoint.equalsEpsilon(c,t)||n.add(new OV(c,e.endPoint)),s.startPoint.equalsEpsilon(d,t)||n.add(new OV(s.startPoint,d)),s.endPoint.equalsEpsilon(p,t)||n.add(new OV(p,s.endPoint)),r=!0;break}}r||i.add(e)}const r=[...i];return r}static polygonsToShape(e){const t=new Ip;return(e=OV.toPolygons(OV.fromPolygons(e))).forEach(e=>{if(e.length>=3){t.moveToPoint(e[0]);for(let i=1;i<e.length;i++)t.lineToPoint(e[i]);t.close()}}),t}static evaluateLineIntegralShoelaceArea(e,t,i,n){return.5*(i+e)*(n-t)}static evaluateLineIntegralArea(e,t,i,n){return.5*(e*n-t*i)}static evaluateLineIntegralPartialCentroid(e,t,i,n){const r=(e*(2*t+n)+i*(t+2*n))/6;return new al((e-i)*r,(n-t)*r)}static evaluateLineIntegralZero(e,t,i,n){return(e-.1396)*(t+1.422)-(i-.1396)*(n+1.422)}static evaluateLineIntegralDistance(e,t,i,n){const r=i-e,s=n-t,a=Math.sqrt(r*r+s*s);if(Math.abs(a)<1e-8)return 0;const o=Math.sqrt(e*e+t*t),l=e*r+o*a+t*s;if(Math.abs(l)<1e-8)return 0;const h=Math.sqrt(i*i+n*n),u=i*i-e*i,c=(u+(n*n-t*n)+a*h)/l;if(Math.abs(c)<1e-8)return 0;const d=e*n-t*i;return d/(6*a*a*a)*(a*(o*(e*e-e*i-t*s)+h*(u+n*s))+d*d*Math.log(c))}getLineIntegralArea(){return OV.evaluateLineIntegralShoelaceArea(this.startPoint.x,this.startPoint.y,this.endPoint.x,this.endPoint.y)}getLineIntegralZero(){return OV.evaluateLineIntegralZero(this.startPoint.x,this.startPoint.y,this.endPoint.x,this.endPoint.y)}serialize(){return{startPoint:{x:this.startPoint.x,y:this.startPoint.y},endPoint:{x:this.endPoint.x,y:this.endPoint.y},containsFakeCorner:this.containsFakeCorner}}static deserialize(e){return new OV(new al(e.startPoint.x,e.startPoint.y),new al(e.endPoint.x,e.endPoint.y),e.containsFakeCorner)}static getPolygonArea(e){let t=0;for(let i=0;i<e.length;i++){const n=e[i%e.length],r=e[(i+1)%e.length];t+=.5*(r.x+n.x)*(r.y-n.y)}return t}static getPolygonCentroid(e){let t=0,i=0;for(let r=0;r<e.length;r++){const n=e[r%e.length],s=e[(r+1)%e.length],a=n.x*(2*n.y+s.y)+s.x*(n.y+2*s.y);t+=(n.x-s.x)*a,i+=(s.y-n.y)*a}const n=6*OV.getPolygonArea(e);return new al(t/n,i/n)}static getEdgesArea(e){let t=0;for(let i=0;i<e.length;i++)t+=e[i].getLineIntegralArea();return t}static evaluateClosestDistanceToOrigin(e,t,i,n){const r=i-e,s=n-t,a=Math.sqrt(r*r+s*s),o=r/a,l=s/a,h=e*o+t*l,u=i*o+n*l;if(h*u<0){const i=-l,n=o;return Math.abs(e*i+t*n)}return Math.abs(h)<Math.abs(u)?Math.sqrt(e*e+t*t):Math.sqrt(i*i+n*n)}static leftComparison(e,t,i,n,r,s){return(i-e)*(s-t)-(r-e)*(n-t)}static windingContribution(e,t,i,n,r,s){if(t<=s){if(n>s&&OV.leftComparison(e,t,i,n,r,s)>0)return 1}else if(n<=s&&OV.leftComparison(e,t,i,n,r,s)<0)return-1;return 0}static getWindingNumberEdges(e,t){let i=0;for(let n=0;n<e.length;n++){const r=e[n];i+=OV.windingContribution(r.startPoint.x,r.startPoint.y,r.endPoint.x,r.endPoint.y,t.x,t.y)}return i}static getWindingNumberPolygon(e,t){let i=0;for(let n=0;n<e.length;n++){const r=e[n],s=e[(n+1)%e.length];i+=OV.windingContribution(r.x,r.y,s.x,s.y,t.x,t.y)}return i}static getWindingNumberPolygons(e,t){let i=0;for(let n=0;n<e.length;n++)i+=OV.getWindingNumberPolygon(e[n],t);return i}static addDistanceRange(e,t,i,n){const r=e.x-i.x,s=e.y-i.y,a=t.x-i.x,o=t.y-i.y;n.min=Math.min(n.min,OV.evaluateClosestDistanceToOrigin(r,s,a,o)),n.max=Math.max(n.max,Math.sqrt(r*r+s*s),Math.sqrt(a*a+o*o))}static validateStartEndMatches(e){0}toString(){return`${this.startPoint.x},${this.startPoint.y} => ${this.endPoint.x},${this.endPoint.y}`}}St.register("LinearEdge",OV);class qV{constructor(e,t){this.x=e,this.y=t}equals(e){return this.x===e.x&&this.y===e.y}toString(){return`(${this.x}, ${this.y})`}}St.register("BigIntVector2",qV);class YV{constructor(e,t){if(this.numerator=BigInt(e),this.denominator=BigInt(t),0n===t)throw new Error("Division by zero");t<0n&&(this.numerator=-this.numerator,this.denominator=-this.denominator)}copy(){return new YV(this.numerator,this.denominator)}plus(e){return new YV(this.numerator*e.denominator+this.denominator*e.numerator,this.denominator*e.denominator).reduced()}minus(e){return new YV(this.numerator*e.denominator-this.denominator*e.numerator,this.denominator*e.denominator).reduced()}times(e){return new YV(this.numerator*e.numerator,this.denominator*e.denominator).reduced()}dividedBy(e){return new YV(this.numerator*e.denominator,this.denominator*e.numerator).reduced()}reduce(){if(0n===this.numerator)return void(this.denominator=1n);if(1n===this.denominator)return;const e=this.numerator<0n?-this.numerator:this.numerator,t=YV.gcdBigInt(e,this.denominator);1n!==t&&(this.numerator/=t,this.denominator/=t)}reduced(){const e=this.copy();return e.reduce(),e}isZero(){return 0n===this.numerator}isNegative(){return this.numerator<0n}isPositive(){return this.numerator>0n}ratioTest(){return 0n===this.numerator||this.numerator===this.denominator?1:this.numerator>0n&&this.numerator<this.denominator?2:0}equalsCrossMul(e){return this.numerator*e.denominator==this.denominator*e.numerator}compareCrossMul(e){const t=this.numerator*e.denominator,i=this.denominator*e.numerator;return t<i?-1:t>i?1:0}equals(e){const t=this.reduced(),i=e.reduced();return t.numerator===i.numerator&&t.denominator===i.denominator}toFloat(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.MAX_SAFE_INTEGER;return Number(this.numerator*BigInt(e)/this.denominator)/e}toString(){return 1n===this.denominator?""+this.numerator:`${this.numerator}/${this.denominator}`}static whole(e){return new YV(e,1n)}static inverse(e){return new YV(1n,e)}static gcdBigInt(e,t){for(;0n!==t;){const i=t;t=e%t,e=i}return e}}_defineProperty(YV,"ZERO",new(Ye=YV)(0n,1n)),_defineProperty(YV,"ONE",new Ye(1n,1n)),St.register("BigRational",YV);class HV{constructor(e,t){this.x=e,this.y=t}equals(e){return this.x.equals(e.x)&&this.y.equals(e.y)}toString(){return`(${this.x}, ${this.y})`}}St.register("BigRationalVector2",HV);class GV extends om{getMinX(e,t){return e.bounds.left-t}getMaxX(e,t){return e.bounds.right+t}}class FV{static quadraticIntersect(e,t,i){for(let n=0;n<t.length;n++){const e=t[n],r=e.bounds;for(let s=n+1;s<t.length;s++){const n=t[s];r.intersectsBounds(n.bounds)&&i(e,n)}}}static sweepLineIntersect(t,i,n){const r=new e,s=new GV(1e-10),a=e=>{const t=e.bounds;r.push({start:!0,item:e},t.minY-1e-10),r.push({start:!1,item:e},t.maxY+1e-10)};for(let e=0;e<i.length;e++)a(i[e]);for(;r.length;){const e=r.pop(),t=e.item;e.start?(s.query(t,e=>(n(t,e),!1)),s.addItem(t)):s.removeItem(t)}}static filterIntersect(e,t,i){FV.recurse(Ql.HORIZONTAL,e,t,[],!1,new Aw(!1,!1),new Aw(!1,!1),new Aw(!1,!1),0,i)}static intersect(e,t,i,n){for(let r=0;r<e.length;r++){const s=e[r];for(let e=0;e<t.length;e++){const i=t[e];s.bounds.intersectsBounds(i.bounds)&&n(s,t[e])}if(!i)for(let t=r+1;t<e.length;t++){const i=e[t];s.bounds.intersectsBounds(i.bounds)&&n(s,e[t])}}}static recurse(e,t,i,n,r,s,a,o,l,h){const u=s.horizontal||s.vertical;if(u&&0===n.length)return;if(0===i.length)return;if(i.length<=20)return void FV.intersect(i,n,u,h);const c=()=>{r?FV.intersect(i,n,u,h):FV.recurse(e.opposite,t,i,n,!0,s,a,o,l+1,h)};let d=0,p=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY;const g=e.minSide,f=e.maxSide,y=o.get(e),E=a.get(e),v=t[g],A=t[f];for(let L=0;L<i.length;L++){const e=i[L].bounds,t=Math.max(e[g],v),n=Math.min(e[f],A);p=Math.min(p,t),m=Math.max(m,n),s&&y?d=E?n:t:d+=.5*(t+n)}for(let L=0;L<n.length;L++){const e=n[L].bounds,t=Math.max(e[g],v),i=Math.min(e[f],A);p=Math.min(p,t),m=Math.max(m,i),y?d=E?i:t:d+=.5*(t+i)}if(m-p<1e-6)return void c();d/=i.length+n.length;const b=i.filter(e=>e.bounds[f]<d),S=i.filter(e=>e.bounds[g]>d);if(0===b.length||0===S.length)return void c();const _=i.filter(e=>e.bounds[g]<=d&&e.bounds[f]>=d),x=e===Ql.HORIZONTAL?t.withMaxX(d):t.withMaxY(d),w=e===Ql.HORIZONTAL?t.withMinX(d):t.withMinY(d),T=n.filter(e=>e.bounds[f]<d),P=n.filter(e=>e.bounds[g]>d),C=n.filter(e=>e.bounds[g]<=d&&e.bounds[f]>=d),V=o.with(e,!0),R=s.with(e,!0),N=a.with(e,!0),M=a.with(e,!1),k=s.get(e);FV.recurse(r?e:e.opposite,x,b,[...T,...C,...k?[]:_],r,s,N,V,l+1,h),FV.recurse(r?e:e.opposite,w,S,[...P,...C,...k?[]:_],r,s,M,V,l+1,h),r?FV.intersect(_,C,u,h):FV.recurse(e.opposite,t,_,C,!0,s,a,o,l+1,h),k||(FV.recurse(e,x,_,T,r,R,N,V,l+1,h),FV.recurse(e,w,_,P,r,R,M,V,l+1,h))}}St.register("BoundsIntersectionFilter",FV);class zV{static sortCenterSize(e,t){e.sort((e,i)=>zV.getHilbert4Compare(.5*(e.x0+e.x1)*t,.5*(e.y0+e.y1)*t,.2+.01*(e.x1-e.x0)*t,.2+.01*(e.y1-e.y0)*t,.5*(i.x0+i.x1)*t,.5*(i.y0+i.y1)*t,.2+.01*(i.x1-i.x0)*t,.2+.01*(i.y1-i.y0)*t))}static sortMinMax(e,t){e.sort((e,i)=>zV.getHilbert4Compare(e.bounds.minX*t,e.bounds.minY*t,e.bounds.maxX*t,e.bounds.maxY*t,i.bounds.minX*t,i.bounds.minY*t,i.bounds.maxX*t,i.bounds.maxY*t))}static sortMinMaxSize(e,t){e.sort((e,i)=>zV.getHilbert6Compare(e.bounds.minX*t,e.bounds.minY*t,e.bounds.maxX*t,e.bounds.maxY*t,.2+.01*(e.x1-e.x0)*t,.2+.01*(e.y1-e.y0)*t,i.bounds.minX*t,i.bounds.minY*t,i.bounds.maxX*t,i.bounds.maxY*t,.2+.01*(i.x1-i.x0)*t,.2+.01*(i.y1-i.y0)*t))}static sortCenterMinMax(e,t){e.sort((e,i)=>zV.getHilbert6Compare(.5*(e.x0+e.x1)*t,.5*(e.y0+e.y1)*t,e.bounds.minX*t,e.bounds.minY*t,e.bounds.maxX*t,e.bounds.maxY*t,.5*(i.x0+i.x1)*t,.5*(i.y0+i.y1)*t,i.bounds.minX*t,i.bounds.minY*t,i.bounds.maxX*t,i.bounds.maxY*t))}static binaryToGray(e){return e^e>>1}static grayToBinary(e){let t=e;for(;t;)t>>=1,e^=t;return e}static grayToBinary32(e){return e^=e>>16,e^=e>>8,e^=e>>4,e^=e>>2,e^=e>>1}static grayToBinary16(e){return e^=e>>8,e^=e>>4,e^=e>>2,e^=e>>1}static grayToBinary8(e){return e^=e>>4,e^=e>>2,e^=e>>1}static grayToBinary4(e){return e^=e>>2,e^=e>>1}static grayToBinary2(e){return e^=e>>1}static getHilbertBits(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,n=0,r=1;for(;i>0;)e.apply(),n+=e.i*Math.pow(2,-t*r),i-=t,r++;return n}static getHilbertCompare(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,n=1;do{e.apply(),t.apply()}while(e.i===t.i&&n++<=i);return e.i===t.i?0:e.i<t.i?-1:1}static getHilbert2Bits(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64;return zV.getHilbertBits(KV.set(e,t),2,i)}static getHilbert3Bits(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64;return zV.getHilbertBits(ZV.set(e,t,i),3,n)}static getHilbert4Bits(e,t,i,n){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:64;return zV.getHilbertBits(JV.set(e,t,i,n),4,r)}static getHilbert5Bits(e,t,i,n,r){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:64;return zV.getHilbertBits($V.set(e,t,i,n,r),5,s)}static getHilbert6Bits(e,t,i,n,r,s){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:64;return zV.getHilbertBits(eR.set(e,t,i,n,r,s),6,a)}static getHilbert2Compare(e,t,i,n){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:32;return zV.getHilbertCompare(KV.set(e,t),tR.set(i,n),r)}static getHilbert3Compare(e,t,i,n,r,s){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:22;return zV.getHilbertCompare(ZV.set(e,t,i),iR.set(n,r,s),a)}static getHilbert4Compare(e,t,i,n,r,s,a,o){let l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:16;return zV.getHilbertCompare(JV.set(e,t,i,n),nR.set(r,s,a,o),l)}static getHilbert5Compare(e,t,i,n,r,s,a,o,l,h){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:13;return zV.getHilbertCompare($V.set(e,t,i,n,r),rR.set(s,a,o,l,h),u)}static getHilbert6Compare(e,t,i,n,r,s,a,o,l,h,u,c){let d=arguments.length>12&&void 0!==arguments[12]?arguments[12]:11;return zV.getHilbertCompare(eR.set(e,t,i,n,r,s),sR.set(a,o,l,h,u,c),d)}}St.register("HilbertMapping",zV);class UV{constructor(e,t){_defineProperty(this,"n",0),_defineProperty(this,"i",0),this.x=e,this.y=t}set(e,t){return this.x=e,this.y=t,this}apply(){const e=this.x>=0,t=this.y>=0;this.n=(e?1:0)|(t?2:0),this.i=zV.grayToBinary2(this.n),this.x=2*(this.x+(e?-.5:.5)),this.y=2*(this.y+(t?-.5:.5)),this.permute()}getValue(e){switch(e){case"x":return this.x;case"-x":return-this.x;case"y":return this.y;case"-y":return-this.y;default:throw new Error("unreachable")}}permute(){const e=UV.permutations[this.i],t=this.getValue(e[0]),i=this.getValue(e[1]);this.x=t,this.y=i}}_defineProperty(UV,"permutations",[["y","x"],["x","y"],["x","y"],["-y","-x"]]),St.register("Hilbert2",UV);class WV{constructor(e,t,i){_defineProperty(this,"n",0),_defineProperty(this,"i",0),this.x=e,this.y=t,this.z=i}set(e,t,i){return this.x=e,this.y=t,this.z=i,this}apply(){const e=this.x>=0,t=this.y>=0,i=this.z>=0;this.n=(e?1:0)|(t?2:0)|(i?4:0),this.i=zV.grayToBinary4(this.n),this.x=2*(this.x+(e?-.5:.5)),this.y=2*(this.y+(t?-.5:.5)),this.z=2*(this.z+(i?-.5:.5)),this.permute()}getValue(e){switch(e){case"x":return this.x;case"-x":return-this.x;case"y":return this.y;case"-y":return-this.y;case"z":return this.z;case"-z":return-this.z;default:throw new Error("unreachable")}}permute(){const e=WV.permutations[this.i],t=this.getValue(e[0]),i=this.getValue(e[1]),n=this.getValue(e[2]);this.x=t,this.y=i,this.z=n}}_defineProperty(WV,"permutations",[["y","z","x"],["z","x","y"],["z","x","y"],["-x","-y","z"],["-x","-y","z"],["-z","x","-y"],["-z","x","-y"],["y","-z","-x"]]),St.register("Hilbert3",WV);class XV{constructor(e,t,i,n){_defineProperty(this,"n",0),_defineProperty(this,"i",0),this.x=e,this.y=t,this.z=i,this.w=n}set(e,t,i,n){return this.x=e,this.y=t,this.z=i,this.w=n,this}apply(){const e=this.x>=0,t=this.y>=0,i=this.z>=0,n=this.w>=0;this.n=(e?1:0)|(t?2:0)|(i?4:0)|(n?8:0),this.i=zV.grayToBinary4(this.n),this.x=2*(this.x+(e?-.5:.5)),this.y=2*(this.y+(t?-.5:.5)),this.z=2*(this.z+(i?-.5:.5)),this.w=2*(this.w+(n?-.5:.5)),this.permute()}getValue(e){switch(e){case"x":return this.x;case"-x":return-this.x;case"y":return this.y;case"-y":return-this.y;case"z":return this.z;case"-z":return-this.z;case"w":return this.w;case"-w":return-this.w;default:throw new Error("unreachable")}}permute(){const e=XV.permutations[this.i],t=this.getValue(e[0]),i=this.getValue(e[1]),n=this.getValue(e[2]),r=this.getValue(e[3]);this.x=t,this.y=i,this.z=n,this.w=r}}_defineProperty(XV,"permutations",[["y","z","w","x"],["z","w","x","y"],["z","w","x","y"],["w","-x","-y","z"],["w","-x","-y","z"],["-z","w","x","-y"],["-z","w","x","-y"],["-x","y","-z","w"],["-x","y","-z","w"],["-z","-w","x","y"],["-z","-w","x","y"],["-w","-x","-y","-z"],["-w","-x","-y","-z"],["z","-w","x","-y"],["z","-w","x","-y"],["y","z","-w","-x"]]),St.register("Hilbert4",XV);class jV{constructor(e,t,i,n,r){_defineProperty(this,"n",0),_defineProperty(this,"i",0),this.x=e,this.y=t,this.z=i,this.w=n,this.v=r}set(e,t,i,n,r){return this.x=e,this.y=t,this.z=i,this.w=n,this.v=r,this}apply(){const e=this.x>=0,t=this.y>=0,i=this.z>=0,n=this.w>=0,r=this.v>=0;this.n=(e?1:0)|(t?2:0)|(i?4:0)|(n?8:0)|(r?16:0),this.i=zV.grayToBinary8(this.n),this.x=2*(this.x+(e?-.5:.5)),this.y=2*(this.y+(t?-.5:.5)),this.z=2*(this.z+(i?-.5:.5)),this.w=2*(this.w+(n?-.5:.5)),this.v=2*(this.v+(r?-.5:.5)),this.permute()}getValue(e){switch(e){case"x":return this.x;case"-x":return-this.x;case"y":return this.y;case"-y":return-this.y;case"z":return this.z;case"-z":return-this.z;case"w":return this.w;case"-w":return-this.w;case"v":return this.v;case"-v":return-this.v;default:throw new Error("unreachable")}}permute(){const e=jV.permutations[this.i],t=this.getValue(e[0]),i=this.getValue(e[1]),n=this.getValue(e[2]),r=this.getValue(e[3]),s=this.getValue(e[4]);this.x=t,this.y=i,this.z=n,this.w=r,this.v=s}}_defineProperty(jV,"permutations",[["y","z","w","v","x"],["z","w","v","x","y"],["z","w","v","x","y"],["w","v","-x","-y","z"],["w","v","-x","-y","z"],["-z","w","v","x","-y"],["-z","w","v","x","-y"],["v","-x","y","-z","w"],["v","-x","y","-z","w"],["-z","-w","v","x","y"],["-z","-w","v","x","y"],["-w","v","-x","-y","-z"],["-w","v","-x","-y","-z"],["z","-w","v","x","-y"],["z","-w","v","x","-y"],["-x","y","z","-w","v"],["-x","y","z","-w","v"],["z","-w","-v","x","y"],["z","-w","-v","x","y"],["-w","-v","-x","-y","z"],["-w","-v","-x","-y","z"],["-z","-w","-v","x","-y"],["-z","-w","-v","x","-y"],["-v","-x","y","-z","-w"],["-v","-x","y","-z","-w"],["-z","w","-v","x","y"],["-z","w","-v","x","y"],["w","-v","-x","-y","-z"],["w","-v","-x","-y","-z"],["z","w","-v","x","-y"],["z","w","-v","x","-y"],["y","z","w","-v","-x"]]),St.register("Hilbert5",jV);class QV{constructor(e,t,i,n,r,s){_defineProperty(this,"n",0),_defineProperty(this,"i",0),this.x=e,this.y=t,this.z=i,this.w=n,this.v=r,this.u=s}set(e,t,i,n,r,s){return this.x=e,this.y=t,this.z=i,this.w=n,this.v=r,this.u=s,this}apply(){const e=this.x>=0,t=this.y>=0,i=this.z>=0,n=this.w>=0,r=this.v>=0,s=this.u>=0;this.n=(e?1:0)|(t?2:0)|(i?4:0)|(n?8:0)|(r?16:0)|(s?32:0),this.i=zV.grayToBinary8(this.n),this.x=2*(this.x+(e?-.5:.5)),this.y=2*(this.y+(t?-.5:.5)),this.z=2*(this.z+(i?-.5:.5)),this.w=2*(this.w+(n?-.5:.5)),this.v=2*(this.v+(r?-.5:.5)),this.u=2*(this.u+(s?-.5:.5)),this.permute()}getValue(e){switch(e){case"x":return this.x;case"-x":return-this.x;case"y":return this.y;case"-y":return-this.y;case"z":return this.z;case"-z":return-this.z;case"w":return this.w;case"-w":return-this.w;case"v":return this.v;case"-v":return-this.v;case"u":return this.u;case"-u":return-this.u;default:throw new Error("unreachable")}}permute(){const e=QV.permutations[this.i],t=this.getValue(e[0]),i=this.getValue(e[1]),n=this.getValue(e[2]),r=this.getValue(e[3]),s=this.getValue(e[4]),a=this.getValue(e[5]);this.x=t,this.y=i,this.z=n,this.w=r,this.v=s,this.u=a}}_defineProperty(QV,"permutations",[["y","z","w","v","u","x"],["z","w","v","u","x","y"],["z","w","v","u","x","y"],["w","v","u","-x","-y","z"],["w","v","u","-x","-y","z"],["-z","w","v","u","x","-y"],["-z","w","v","u","x","-y"],["v","u","-x","y","-z","w"],["v","u","-x","y","-z","w"],["-z","-w","v","u","x","y"],["-z","-w","v","u","x","y"],["-w","v","u","-x","-y","-z"],["-w","v","u","-x","-y","-z"],["z","-w","v","u","x","-y"],["z","-w","v","u","x","-y"],["u","-x","y","z","-w","v"],["u","-x","y","z","-w","v"],["z","-w","-v","u","x","y"],["z","-w","-v","u","x","y"],["-w","-v","u","-x","-y","z"],["-w","-v","u","-x","-y","z"],["-z","-w","-v","u","x","-y"],["-z","-w","-v","u","x","-y"],["-v","u","-x","y","-z","-w"],["-v","u","-x","y","-z","-w"],["-z","w","-v","u","x","y"],["-z","w","-v","u","x","y"],["w","-v","u","-x","-y","-z"],["w","-v","u","-x","-y","-z"],["z","w","-v","u","x","-y"],["z","w","-v","u","x","-y"],["-x","y","z","w","-v","u"],["-x","y","z","w","-v","u"],["z","w","-v","-u","x","y"],["z","w","-v","-u","x","y"],["w","-v","-u","-x","-y","z"],["w","-v","-u","-x","-y","z"],["-z","w","-v","-u","x","-y"],["-z","w","-v","-u","x","-y"],["-v","-u","-x","y","-z","w"],["-v","-u","-x","y","-z","w"],["-z","-w","-v","-u","x","y"],["-z","-w","-v","-u","x","y"],["-w","-v","-u","-x","-y","-z"],["-w","-v","-u","-x","-y","-z"],["z","-w","-v","-u","x","-y"],["z","-w","-v","-u","x","-y"],["-u","-x","y","z","-w","-v"],["-u","-x","y","z","-w","-v"],["z","-w","v","-u","x","y"],["z","-w","v","-u","x","y"],["-w","v","-u","-x","-y","z"],["-w","v","-u","-x","-y","z"],["-z","-w","v","-u","x","-y"],["-z","-w","v","-u","x","-y"],["v","-u","-x","y","-z","-w"],["v","-u","-x","y","-z","-w"],["-z","w","v","-u","x","y"],["-z","w","v","-u","x","y"],["w","v","-u","-x","-y","-z"],["w","v","-u","-x","-y","-z"],["z","w","v","-u","x","-y"],["z","w","v","-u","x","-y"],["y","z","w","v","-u","-x"]]),St.register("Hilbert6",QV);const KV=new UV(0,0),ZV=new WV(0,0,0),JV=new XV(0,0,0,0),$V=new jV(0,0,0,0,0),eR=new QV(0,0,0,0,0,0),tR=new UV(0,0),iR=new WV(0,0,0),nR=new XV(0,0,0,0),rR=new jV(0,0,0,0,0),sR=new QV(0,0,0,0,0,0);class aR{constructor(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];_defineProperty(this,"points",[]),this.checkGeneralCollinearity=e}addTransformed(e,t,i){this.add(e.m00()*t+e.m01()*i+e.m02(),e.m10()*t+e.m11()*i+e.m12())}addPoint(e){this.add(e.x,e.y)}add(e,t){if(this.points.length>=1){const i=this.points[this.points.length-1],n=i.x===e,r=i.y===t;if(n&&r)return;if(this.points.length>=2){const s=this.points[this.points.length-2];if(this.checkGeneralCollinearity){if(fl.arePointsCollinear(new al(e,t),i,s,1e-9))return i.x=e,void(i.y=t)}else{const a=s.x===e,o=s.y===t;if(a&&o)return void this.points.pop();if(n&&a)return void(i.y=t);if(r&&o)return void(i.x=e)}}}this.points.push(new al(e,t))}hasPoints(){return this.points.length>0}finalize(){if(0===this.points.length)return[];let e;do{if(e=!1,this.points.length>=2){const t=this.points[0],i=this.points[this.points.length-1];t.equals(i)&&(this.points.pop(),e=!0)}if(this.points.length>=3)if(this.checkGeneralCollinearity){const t=this.points[0],i=this.points[1],n=this.points[this.points.length-1],r=this.points[this.points.length-2];fl.arePointsCollinear(i,t,n,1e-9)&&(this.points.shift(),e=!0),fl.arePointsCollinear(t,n,r,1e-9)&&(this.points.pop(),e=!0)}else{const t=this.points[0],i=this.points[this.points.length-1],n=t.x===i.x,r=t.y===i.y;if(n||r){const s=this.points[1],a=this.points[this.points.length-2];(n&&t.x===s.x||r&&t.y===s.y)&&(this.points.shift(),e=!0),(n&&i.x===a.x||r&&i.y===a.y)&&(this.points.pop(),e=!0)}}}while(e);this.points.length<=2&&(this.points.length=0);const t=this.points;return this.points=[],t}finalizeInto(e){if(this.hasPoints()){const t=this.finalize();t.length>0&&e.push(t)}}reset(){this.points.length=0}static simplifyPolygon(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=new aR(t);for(let n=0;n<e.length;n++)i.addPoint(e[n]);return i.finalize()}}St.register("ClipSimplifier",aR);const oR=new al(0,0),lR=new al(0,0);class hR{constructor(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.edges=e}toPolygonalFace(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e-8;return new SR(OV.toPolygons(this.edges,e))}toEdgedFace(){return this}toEdgedClippedFace(e,t,i,n){return yR.fromEdges(this.edges,e,t,i,n)}toEdgedClippedFaceWithoutCheck(e,t,i,n){return yR.fromEdgesWithoutCheck(this.edges,e,t,i,n)}getShape(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e-8;return this.toPolygonalFace(e).getShape()}getBounds(){const e=Zl.NOTHING.copy();for(let t=0;t<this.edges.length;t++){const i=this.edges[t];i.containsFakeCorner||(e.addPoint(i.startPoint),e.addPoint(i.endPoint))}return e}getDotRange(e){let t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;for(let n=0;n<this.edges.length;n++){const r=this.edges[n];if(!r.containsFakeCorner){const n=r.startPoint.dot(e),s=r.endPoint.dot(e);t=Math.min(t,n,s),i=Math.max(i,n,s)}}return new Hl(t,i)}getDistanceRangeToEdges(e){let t=Number.POSITIVE_INFINITY,i=0;for(let n=0;n<this.edges.length;n++){const r=this.edges[n],s=r.startPoint.x-e.x,a=r.startPoint.y-e.y,o=r.endPoint.x-e.x,l=r.endPoint.y-e.y;t=Math.min(t,OV.evaluateClosestDistanceToOrigin(s,a,o,l)),i=Math.max(i,Math.sqrt(s*s+a*a),Math.sqrt(o*o+l*l))}return new Hl(t,i)}getDistanceRangeToInside(e){const t=this.getDistanceRangeToEdges(e);return this.containsPoint(e)?new Hl(0,t.max):t}getArea(){let e=0;for(let t=0;t<this.edges.length;t++){const i=this.edges[t],n=i.startPoint,r=i.endPoint;e+=(r.x+n.x)*(r.y-n.y)}return.5*e}getCentroidPartial(){let e=0,t=0;for(let i=0;i<this.edges.length;i++){const n=this.edges[i],r=n.startPoint,s=n.endPoint,a=r.x*(2*r.y+s.y)+s.x*(r.y+2*s.y);e+=(r.x-s.x)*a,t+=(s.y-r.y)*a}return new al(e,t)}getCentroid(e){return this.getCentroidPartial().timesScalar(1/(6*e))}getZero(){return _.sum(this.edges.map(e=>e.getLineIntegralZero()))}getAverageDistance(e,t){let i=0;for(let n=0;n<this.edges.length;n++){const t=this.edges[n],r=t.startPoint,s=t.endPoint;i+=OV.evaluateLineIntegralDistance(r.x-e.x,r.y-e.y,s.x-e.x,s.y-e.y)}return i/t}getAverageDistanceTransformedToOrigin(e,t){let i=0;for(let n=0;n<this.edges.length;n++){const t=this.edges[n],r=e.multiplyVector2(oR.set(t.startPoint)),s=e.multiplyVector2(lR.set(t.endPoint));i+=OV.evaluateLineIntegralDistance(r.x,r.y,s.x,s.y)}return i/(t*e.getSignedScale())}getClipped(e,t,i,n){const r=[],s=(e+i)/2,a=(t+n)/2;for(let o=0;o<this.edges.length;o++){const l=this.edges[o];WR.boundsClipEdge(l.startPoint,l.endPoint,e,t,i,n,s,a,r)}return new hR(r)}getBinaryXClip(e,t){const i=[],n=[];for(let r=0;r<this.edges.length;r++){const s=this.edges[r];sN.binaryXClipEdge(s.startPoint,s.endPoint,e,t,i,n)}return{minFace:new hR(i),maxFace:new hR(n)}}getBinaryYClip(e,t){const i=[],n=[];for(let r=0;r<this.edges.length;r++){const s=this.edges[r];sN.binaryYClipEdge(s.startPoint,s.endPoint,e,t,i,n)}return{minFace:new hR(i),maxFace:new hR(n)}}getBinaryLineClip(e,t,i){const n=[],r=[];for(let s=0;s<this.edges.length;s++){const a=this.edges[s];sN.binaryLineClipEdge(a.startPoint,a.endPoint,e,t,i,n,r)}return{minFace:new hR(n),maxFace:new hR(r)}}getStripeLineClip(e,t,i){if(0===t.length)return[this];const n=_.range(t.length+1).map(()=>[]);for(let r=0;r<this.edges.length;r++){const s=this.edges[r];XR.binaryStripeClipEdge(s.startPoint,s.endPoint,e,t,i,n)}return n.map(e=>new hR(e))}getBinaryCircularClip(e,t,i){const n=[],r=[];return eN.binaryCircularClipEdges(this.edges,e,t,i,n,r),{insideFace:new hR(n),outsideFace:new hR(r)}}gridClipIterate(e,t,i,n,r,s,a,o,l,h){for(let u=0;u<this.edges.length;u++){const h=this.edges[u];JR.gridClipIterate(h.startPoint,h.endPoint,e,t,i,n,r,s,a,o,l)}this.edges.length&&h()}getBilinearFiltered(e,t,i,n){return dN.evaluateLinearEdges(this.edges,e,t,i,n)}getMitchellNetravaliFiltered(e,t,i,n){return VN.evaluateLinearEdges(this.edges,e,t,i,n)}containsPoint(e){return 0!==OV.getWindingNumberEdges(this.edges,e)}getTransformed(e){if(e.isIdentity())return this;{const t=[];for(let i=0;i<this.edges.length;i++){const n=this.edges[i],r=e.timesVector2(n.startPoint),s=e.timesVector2(n.endPoint);r.equals(s)||t.push(new OV(r,s))}return new hR(t)}}getRounded(e){const t=[];for(let i=0;i<this.edges.length;i++){const n=this.edges[i],r=new al(fl.roundSymmetric(n.startPoint.x/e)*e,fl.roundSymmetric(n.startPoint.y/e)*e),s=new al(fl.roundSymmetric(n.endPoint.x/e)*e,fl.roundSymmetric(n.endPoint.y/e)*e);r.equals(s)||t.push(new OV(r,s,n.containsFakeCorner))}return new hR(t)}withReversedEdges(){return new hR(this.edges.map(e=>new OV(e.endPoint,e.startPoint)).reverse())}forEachEdge(e){for(let t=0;t<this.edges.length;t++){const i=this.edges[t];e(i.startPoint,i.endPoint)}}getScratchAccumulator(){return cR}static getScratchAccumulator(){return cR}getAccumulator(){return new uR}toString(){return this.edges.map(e=>`${e.startPoint.x},${e.startPoint.y} => ${e.endPoint.x},${e.endPoint.y}`).join("\n")}serialize(){return{edges:this.edges.map(e=>e.serialize())}}static deserialize(e){return new hR(e.edges.map(e=>OV.deserialize(e)))}static fromBounds(e){return hR.fromBoundsValues(e.minX,e.minY,e.maxX,e.maxY)}static fromBoundsValues(e,t,i,n){const r=new al(e,t),s=new al(i,t),a=new al(i,n),o=new al(e,n);return new hR([new OV(r,s),new OV(s,a),new OV(a,o),new OV(o,r)])}}St.register("EdgedFace",hR);class uR{constructor(){_defineProperty(this,"edges",[]),_defineProperty(this,"usesEndPoint",!0)}addEdge(e,t,i,n,r,s){this.edges.push(new OV(r||new al(e,t),s||new al(i,n)))}markNewPolygon(){}setAccumulationBounds(e,t,i,n){}finalizeFace(){if(0===this.edges.length)return null;const e=this.edges;return this.edges=[],new hR(e)}reset(){this.edges.length=0}}const cR=new uR,dR=new al(0,0),pR=new al(0,0),mR=new al(0,0),gR=new al(0,0),fR=[];class yR{constructor(e,t,i,n,r,s,a,o,l){this.edges=e,this.minX=t,this.minY=i,this.maxX=n,this.maxY=r,this.minXCount=s,this.minYCount=a,this.maxXCount=o,this.maxYCount=l,this.clippedEdgedFace=new hR(e,!0)}toPolygonalFace(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e-8;return this.toEdgedFace().toPolygonalFace(e)}toEdgedFace(){return new hR(this.getAllEdges())}toEdgedClippedFace(e,t,i,n){return this.minX===e&&this.minY===t&&this.maxX===i&&this.maxY===n?this:yR.fromEdges(this.getAllEdges(),e,t,i,n)}toEdgedClippedFaceWithoutCheck(e,t,i,n){return this.minX===e&&this.minY===t&&this.maxX===i&&this.maxY===n?this:yR.fromEdgesWithoutCheck(this.getAllEdges(),e,t,i,n)}static fromEdges(e,t,i,n,r){vR.reset(),vR.setAccumulationBounds(t,i,n,r);for(let s=0;s<e.length;s++){const t=e[s];vR.addEdge(t.startPoint.x,t.startPoint.y,t.endPoint.x,t.endPoint.y,t.startPoint,t.endPoint)}return vR.finalizeEnsureFace(t,i,n,r)}static fromEdgesWithoutCheck(e,t,i,n,r){return new yR(e,t,i,n,r,0,0,0,0)}static implicitEdge(e,t,i){return new OV(i>0?e:t,i>0?t:e)}forEachImplicitEdge(e){const t=this.minXCount||this.minYCount?this.getMinXMinY():null,i=this.minXCount||this.maxYCount?this.getMinXMaxY():null,n=this.maxXCount||this.minYCount?this.getMaxXMinY():null,r=this.maxXCount||this.maxYCount?this.getMaxXMaxY():null;for(let s=0;s!==this.minXCount;s+=Math.sign(this.minXCount))this.minXCount>0?e(t,i):e(i,t);for(let s=0;s!==this.minYCount;s+=Math.sign(this.minYCount))this.minYCount>0?e(t,n):e(n,t);for(let s=0;s!==this.maxXCount;s+=Math.sign(this.maxXCount))this.maxXCount>0?e(n,r):e(r,n);for(let s=0;s!==this.maxYCount;s+=Math.sign(this.maxYCount))this.maxYCount>0?e(i,r):e(r,i)}getImplicitEdges(){const e=[];return this.forEachImplicitEdge((t,i)=>e.push(new OV(t,i))),e}getAllEdges(){return[...this.edges,...this.getImplicitEdges()]}getShape(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e-8;return this.toPolygonalFace(e).getShape()}getMinXMinY(){return new al(this.minX,this.minY)}getMinXMaxY(){return new al(this.minX,this.maxY)}getMaxXMinY(){return new al(this.maxX,this.minY)}getMaxXMaxY(){return new al(this.maxX,this.maxY)}hasMinXMinY(){return 0!==this.minXCount||0!==this.minYCount}hasMinXMaxY(){return 0!==this.minXCount||0!==this.maxYCount}hasMaxXMinY(){return 0!==this.maxXCount||0!==this.minYCount}hasMaxXMaxY(){return 0!==this.maxXCount||0!==this.maxYCount}hasMinX(){return 0!==this.minXCount||0!==this.minYCount||0!==this.maxYCount}hasMinY(){return 0!==this.minYCount||0!==this.minXCount||0!==this.maxXCount}hasMaxX(){return 0!==this.maxXCount||0!==this.minYCount||0!==this.maxYCount}hasMaxY(){return 0!==this.maxYCount||0!==this.minXCount||0!==this.maxXCount}getBounds(){const e=this.clippedEdgedFace.getBounds();return this.hasMinX()&&e.addX(this.minX),this.hasMinY()&&e.addY(this.minY),this.hasMaxX()&&e.addX(this.maxX),this.hasMaxY()&&e.addY(this.maxY),e}getDotRange(e){const t=this.clippedEdgedFace.getDotRange(e);return this.hasMinXMinY()&&t.addValue(e.x*this.minX+e.y*this.minY),this.hasMinXMaxY()&&t.addValue(e.x*this.minX+e.y*this.maxY),this.hasMaxXMinY()&&t.addValue(e.x*this.maxX+e.y*this.minY),this.hasMaxXMaxY()&&t.addValue(e.x*this.maxX+e.y*this.maxY),t}getDistanceRangeToEdges(e){const t=this.clippedEdgedFace.getDistanceRangeToEdges(e);return this.minXCount&&OV.addDistanceRange(this.getMinXMinY(),this.getMinXMaxY(),e,t),this.minYCount&&OV.addDistanceRange(this.getMinXMinY(),this.getMaxXMinY(),e,t),this.maxXCount&&OV.addDistanceRange(this.getMaxXMinY(),this.getMaxXMaxY(),e,t),this.maxYCount&&OV.addDistanceRange(this.getMinXMaxY(),this.getMaxXMaxY(),e,t),t}getDistanceRangeToInside(e){const t=this.getDistanceRangeToEdges(e);return this.containsPoint(e)?new Hl(0,t.max):t}getArea(){let e=this.clippedEdgedFace.getArea();return e+=(this.maxY-this.minY)*(this.minXCount*this.minX+this.maxXCount*this.maxX),e}getCentroidPartial(){const e=this.clippedEdgedFace.getCentroidPartial();return(this.minYCount||this.maxYCount)&&(e.x+=3*(this.minX-this.maxX)*(this.minX+this.maxX)*(this.minYCount*this.minY+this.maxYCount*this.maxY)),(this.minXCount||this.maxXCount)&&(e.y+=3*(this.maxY-this.minY)*(this.minY+this.maxY)*(this.minXCount*this.minX+this.maxXCount*this.maxX)),e}getCentroid(e){return this.getCentroidPartial().timesScalar(1/(6*e))}getZero(){return _.sum(this.getAllEdges().map(e=>e.getLineIntegralZero()))}getAverageDistance(e,t){let i=this.clippedEdgedFace.getAverageDistance(e,t);const n=this.minX-e.x,r=this.minY-e.y,s=this.maxX-e.x,a=this.maxY-e.y;return this.minXCount&&(i+=this.minXCount*OV.evaluateLineIntegralDistance(n,r,n,a)/t),this.minYCount&&(i+=this.minYCount*OV.evaluateLineIntegralDistance(n,r,s,r)/t),this.maxXCount&&(i+=this.maxXCount*OV.evaluateLineIntegralDistance(s,r,s,a)/t),this.maxYCount&&(i+=this.maxYCount*OV.evaluateLineIntegralDistance(n,a,s,a)/t),i}getAverageDistanceTransformedToOrigin(e,t){let i=this.clippedEdgedFace.getAverageDistanceTransformedToOrigin(e,t);if(this.minXCount||this.minYCount||this.maxXCount||this.maxYCount){const n=t*e.getSignedScale(),r=e.multiplyVector2(dR.setXY(this.minX,this.minY)),s=e.multiplyVector2(pR.setXY(this.minX,this.maxY)),a=e.multiplyVector2(mR.setXY(this.maxX,this.minY)),o=e.multiplyVector2(gR.setXY(this.maxX,this.maxY));this.minXCount&&(i+=this.minXCount*OV.evaluateLineIntegralDistance(r.x,r.y,s.x,s.y)/n),this.minYCount&&(i+=this.minYCount*OV.evaluateLineIntegralDistance(r.x,r.y,a.x,a.y)/n),this.maxXCount&&(i+=this.maxXCount*OV.evaluateLineIntegralDistance(a.x,a.y,o.x,o.y)/n),this.maxYCount&&(i+=this.maxYCount*OV.evaluateLineIntegralDistance(s.x,s.y,o.x,o.y)/n)}return i}getClipped(e,t,i,n){const r=[],s=(e+i)/2,a=(t+n)/2;for(let o=0;o<this.edges.length;o++){const l=this.edges[o];WR.boundsClipEdge(l.startPoint,l.endPoint,e,t,i,n,s,a,r)}return this.forEachImplicitEdge((o,l)=>{WR.boundsClipEdge(o,l,e,t,i,n,s,a,r)}),yR.fromEdges(r,e,t,i,n)}getBinaryXClip(e,t){return sN.binaryXClipEdgedClipped(this,e)}getBinaryYClip(e,t){return sN.binaryYClipEdgedClipped(this,e)}getBinaryLineClip(e,t,i){const n=[],r=[];for(let s=0;s<this.edges.length;s++){const a=this.edges[s];sN.binaryLineClipEdge(a.startPoint,a.endPoint,e,t,i,n,r)}return this.forEachImplicitEdge((s,a)=>{sN.binaryLineClipEdge(s,a,e,t,i,n,r)}),{minFace:yR.fromEdges(n,this.minX,this.minY,this.maxX,this.maxY),maxFace:yR.fromEdges(r,this.minX,this.minY,this.maxX,this.maxY)}}getStripeLineClip(e,t,i){if(0===t.length)return[this];const n=_.range(t.length+1).map(()=>[]);for(let r=0;r<this.edges.length;r++){const s=this.edges[r];XR.binaryStripeClipEdge(s.startPoint,s.endPoint,e,t,i,n)}return this.forEachImplicitEdge((r,s)=>{XR.binaryStripeClipEdge(r,s,e,t,i,n)}),n.map(e=>yR.fromEdges(e,this.minX,this.minY,this.maxX,this.maxY))}getBinaryCircularClip(e,t,i){const n=[],r=[];return eN.binaryCircularClipEdges(this.getAllEdges(),e,t,i,n,r),{insideFace:yR.fromEdges(n,this.minX,this.minY,this.maxX,this.maxY),outsideFace:yR.fromEdges(r,this.minX,this.minY,this.maxX,this.maxY)}}gridClipIterate(e,t,i,n,r,s,a,o,l,h){for(let u=0;u<this.edges.length;u++){const h=this.edges[u];JR.gridClipIterate(h.startPoint,h.endPoint,e,t,i,n,r,s,a,o,l)}this.forEachImplicitEdge((h,u)=>{JR.gridClipIterate(h,u,e,t,i,n,r,s,a,o,l)}),this.edges.length&&h()}getBilinearFiltered(e,t,i,n){return dN.evaluateLinearEdges(this.getAllEdges(),e,t,i,n)}getMitchellNetravaliFiltered(e,t,i,n){return VN.evaluateLinearEdges(this.getAllEdges(),e,t,i,n)}containsPoint(e){let t=OV.getWindingNumberEdges(this.edges,e);return this.forEachImplicitEdge((i,n)=>{t+=OV.windingContribution(i.x,i.y,n.x,n.y,e.x,e.y)}),0!==t}getTransformed(e){if(e.isIdentity())return this;{const t=[],i=this.getAllEdges();for(let r=0;r<i.length;r++){const n=i[r],s=e.timesVector2(n.startPoint),a=e.timesVector2(n.endPoint);s.equals(a)||t.push(new OV(s,a))}const n=new Zl(this.minX,this.minY,this.maxX,this.maxY).transform(e);return yR.fromEdgesWithoutCheck(t,n.minX,n.minY,n.maxX,n.maxY)}}getRounded(e){const t=[];for(let i=0;i<this.edges.length;i++){const n=this.edges[i],r=new al(fl.roundSymmetric(n.startPoint.x/e)*e,fl.roundSymmetric(n.startPoint.y/e)*e),s=new al(fl.roundSymmetric(n.endPoint.x/e)*e,fl.roundSymmetric(n.endPoint.y/e)*e);r.equals(s)||t.push(new OV(r,s,n.containsFakeCorner))}return this.forEachImplicitEdge((i,n)=>{const r=new al(fl.roundSymmetric(i.x/e)*e,fl.roundSymmetric(i.y/e)*e),s=new al(fl.roundSymmetric(n.x/e)*e,fl.roundSymmetric(n.y/e)*e);r.equals(s)||t.push(new OV(r,s))}),yR.fromEdgesWithoutCheck(t,fl.roundSymmetric(this.minX/e)*e,fl.roundSymmetric(this.minY/e)*e,fl.roundSymmetric(this.maxX/e)*e,fl.roundSymmetric(this.maxY/e)*e)}withReversedEdges(){return new yR(this.edges.map(e=>new OV(e.endPoint,e.startPoint)).reverse(),this.minX,this.minY,this.maxX,this.maxY,-this.maxXCount,-this.maxYCount,-this.minXCount,-this.minYCount)}forEachEdge(e){for(let t=0;t<this.edges.length;t++){const i=this.edges[t];e(i.startPoint,i.endPoint)}this.forEachImplicitEdge(e)}getScratchAccumulator(){return vR}static getScratchAccumulator(){return vR}getAccumulator(){return new ER}toString(){return this.getAllEdges().map(e=>`${e.startPoint.x},${e.startPoint.y} => ${e.endPoint.x},${e.endPoint.y}`).join("\n")}serialize(){return{edges:this.edges.map(e=>e.serialize()),minX:this.minX,minY:this.minY,maxX:this.maxX,maxY:this.maxY,minXCount:this.minXCount,minYCount:this.minYCount,maxXCount:this.maxXCount,maxYCount:this.maxYCount}}static deserialize(e){return new yR(e.edges.map(e=>OV.deserialize(e)),e.minX,e.minY,e.maxX,e.maxY,e.minXCount,e.minYCount,e.maxXCount,e.maxYCount)}static fromBounds(e){return new yR([],e.minX,e.minY,e.maxX,e.maxY,-1,1,1,-1)}static fromBoundsValues(e,t,i,n){return new yR([],e,t,i,n,-1,1,1,-1)}}St.register("EdgedClippedFace",yR);class ER{constructor(){_defineProperty(this,"edges",[]),_defineProperty(this,"minX",0),_defineProperty(this,"minY",0),_defineProperty(this,"maxX",0),_defineProperty(this,"maxY",0),_defineProperty(this,"minXCount",0),_defineProperty(this,"minYCount",0),_defineProperty(this,"maxXCount",0),_defineProperty(this,"maxYCount",0),_defineProperty(this,"usesEndPoint",!0)}addEdge(e,t,i,n,r,s){if(e!==this.minX&&e!==this.maxX||t!==this.minY&&t!==this.maxY||i!==this.minX&&i!==this.maxX||n!==this.minY&&n!==this.maxY||e!==i&&t!==n)this.edges.push(new OV(r||new al(e,t),s||new al(i,n)));else if(e===i){const i=t===this.minY?1:-1;e===this.minX?this.minXCount+=i:this.maxXCount+=i}else{const i=e===this.minX?1:-1;t===this.minY?this.minYCount+=i:this.maxYCount+=i}}markNewPolygon(){}setAccumulationBounds(e,t,i,n){this.minX=e,this.minY=t,this.maxX=i,this.maxY=n,this.minXCount=0,this.minYCount=0,this.maxXCount=0,this.maxYCount=0}finalizeFace(){if(0===this.edges.length&&0===this.minXCount&&0===this.minYCount&&0===this.maxXCount&&0===this.maxYCount)return null;const e=new yR(this.edges,this.minX,this.minY,this.maxX,this.maxY,this.minXCount,this.minYCount,this.maxXCount,this.maxYCount);return this.edges=[],this.minXCount=0,this.minYCount=0,this.maxXCount=0,this.maxYCount=0,e}finalizeEnsureFace(e,t,i,n){return this.finalizeFace()||new yR(fR,e,t,i,n,0,0,0,0)}reset(){this.edges.length=0,this.minXCount=0,this.minYCount=0,this.maxXCount=0,this.maxYCount=0}}const vR=new ER,AR=new al(0,0),bR=new al(0,0);class SR{constructor(e){this.polygons=e}toEdgedFace(){return new hR(OV.fromPolygons(this.polygons))}toPolygonalFace(e){return this}toEdgedClippedFace(e,t,i,n){return yR.fromEdges(OV.fromPolygons(this.polygons),e,t,i,n)}toEdgedClippedFaceWithoutCheck(e,t,i,n){return yR.fromEdgesWithoutCheck(OV.fromPolygons(this.polygons),e,t,i,n)}getShape(e){return OV.polygonsToShape(this.polygons)}getBounds(){const e=Zl.NOTHING.copy();for(let t=0;t<this.polygons.length;t++){const i=this.polygons[t];for(let t=0;t<i.length;t++)e.addPoint(i[t])}return e}getDotRange(e){let t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;for(let n=0;n<this.polygons.length;n++){const r=this.polygons[n];for(let n=0;n<r.length;n++){const s=r[n].dot(e);t=Math.min(t,s),i=Math.max(i,s)}}return new Hl(t,i)}getDistanceRangeToEdges(e){let t=Number.POSITIVE_INFINITY,i=0;for(let n=0;n<this.polygons.length;n++){const r=this.polygons[n];for(let n=0;n<r.length;n++){const s=r[n],a=r[(n+1)%r.length],o=s.x-e.x,l=s.y-e.y,h=a.x-e.x,u=a.y-e.y;t=Math.min(t,OV.evaluateClosestDistanceToOrigin(o,l,h,u)),i=Math.max(i,Math.sqrt(o*o+l*l),Math.sqrt(h*h+u*u))}}return new Hl(t,i)}getDistanceRangeToInside(e){const t=this.getDistanceRangeToEdges(e);return this.containsPoint(e)?new Hl(0,t.max):t}getArea(){let e=0;for(let t=0;t<this.polygons.length;t++){const i=this.polygons[t];for(let t=0;t<i.length;t++){const n=i[t],r=i[(t+1)%i.length];e+=(r.x+n.x)*(r.y-n.y)}}return.5*e}getCentroidPartial(){let e=0,t=0;for(let i=0;i<this.polygons.length;i++){const n=this.polygons[i];for(let i=0;i<n.length;i++){const r=n[i],s=n[(i+1)%n.length],a=r.x*(2*r.y+s.y)+s.x*(r.y+2*s.y);e+=(r.x-s.x)*a,t+=(s.y-r.y)*a}}return new al(e,t)}getCentroid(e){return this.getCentroidPartial().timesScalar(1/(6*e))}getZero(){return 0}getAverageDistance(e,t){let i=0;for(let n=0;n<this.polygons.length;n++){const t=this.polygons[n];for(let n=0;n<t.length;n++){const r=t[n],s=t[(n+1)%t.length];i+=OV.evaluateLineIntegralDistance(r.x-e.x,r.y-e.y,s.x-e.x,s.y-e.y)}}return i/t}getAverageDistanceTransformedToOrigin(e,t){let i=0;for(let n=0;n<this.polygons.length;n++){const t=this.polygons[n];for(let n=0;n<t.length;n++){const r=e.multiplyVector2(AR.set(t[n])),s=e.multiplyVector2(bR.set(t[(n+1)%t.length]));i+=OV.evaluateLineIntegralDistance(r.x,r.y,s.x,s.y)}}return i/(t*e.getSignedScale())}getClipped(e,t,i,n){const r=(e+i)/2,s=(t+n)/2,a=[];for(let o=0;o<this.polygons.length;o++){const l=this.polygons[o],h=WR.boundsClipPolygon(l,e,t,i,n,r,s);h.length&&a.push(h)}return new SR(a)}getBinaryXClip(e,t){const i=[],n=[];for(let r=0;r<this.polygons.length;r++){const t=this.polygons[r],s=[],a=[];sN.binaryXClipPolygon(t,e,s,a),s.length&&i.push(s),a.length&&n.push(a)}return{minFace:new SR(i),maxFace:new SR(n)}}getBinaryYClip(e,t){const i=[],n=[];for(let r=0;r<this.polygons.length;r++){const t=this.polygons[r],s=[],a=[];sN.binaryYClipPolygon(t,e,s,a),s.length&&i.push(s),a.length&&n.push(a)}return{minFace:new SR(i),maxFace:new SR(n)}}getBinaryLineClip(e,t,i){const n=[],r=[];for(let s=0;s<this.polygons.length;s++){const i=this.polygons[s],a=[],o=[];sN.binaryLineClipPolygon(i,e,t,a,o),a.length&&n.push(a),o.length&&r.push(o)}return{minFace:new SR(n),maxFace:new SR(r)}}getStripeLineClip(e,t,i){const n=_.range(t.length+1).map(()=>[]);for(let r=0;r<this.polygons.length;r++){const i=this.polygons[r],s=XR.binaryStripeClipPolygon(i,e,t);for(let e=0;e<s.length;e++){const t=s[e];n[e].push(t)}}return n.map(e=>new SR(e))}getBinaryCircularClip(e,t,i){const n=[],r=[];return eN.binaryCircularClipPolygon(this.polygons,e,t,i,n,r),{insideFace:new SR(n),outsideFace:new SR(r)}}gridClipIterate(e,t,i,n,r,s,a,o,l,h){for(let u=0;u<this.polygons.length;u++){const c=this.polygons[u];for(let h=0;h<c.length;h++){const u=c[h],d=c[(h+1)%c.length];JR.gridClipIterate(u,d,e,t,i,n,r,s,a,o,l)}c.length&&h()}}getBilinearFiltered(e,t,i,n){return dN.evaluatePolygons(this.polygons,e,t,i,n)}getMitchellNetravaliFiltered(e,t,i,n){return VN.evaluatePolygons(this.polygons,e,t,i,n)}containsPoint(e){return 0!==OV.getWindingNumberPolygons(this.polygons,e)}getTransformed(e){return e.isIdentity()?this:new SR(this.polygons.map(t=>t.map(t=>e.timesVector2(t))))}getRounded(e){return new SR(this.polygons.map(t=>t.map(t=>new al(fl.roundSymmetric(t.x/e)*e,fl.roundSymmetric(t.y/e)*e))))}withReversedEdges(){return new SR(this.polygons.map(e=>e.slice().reverse()))}forEachEdge(e){for(let t=0;t<this.polygons.length;t++){const i=this.polygons[t];for(let t=0;t<i.length;t++)e(i[t],i[(t+1)%i.length])}}getScratchAccumulator(){return xR}static getScratchAccumulator(){return xR}getAccumulator(){return new _R}toString(){return this.polygons.map(e=>e.map(e=>`${e.x},${e.y}`).join(" ")).join("\n")}serialize(){return{polygons:this.polygons.map(e=>e.map(e=>({x:e.x,y:e.y})))}}static deserialize(e){return new SR(e.polygons.map(e=>e.map(e=>new al(e.x,e.y))))}static fromBounds(e){return SR.fromBoundsValues(e.minX,e.minY,e.maxX,e.maxY)}static fromBoundsValues(e,t,i,n){return new SR([[new al(e,t),new al(i,t),new al(i,n),new al(e,n)]])}}St.register("PolygonalFace",SR);class _R{constructor(){_defineProperty(this,"polygons",[]),_defineProperty(this,"simplifier",new aR),_defineProperty(this,"usesEndPoint",!1)}addEdge(e,t,i,n,r,s){r?this.simplifier.addPoint(r):this.simplifier.add(e,t)}markNewPolygon(){this.simplifier.finalizeInto(this.polygons)}setAccumulationBounds(e,t,i,n){}finalizeFace(){if(!this.simplifier.hasPoints()&&0===this.polygons.length)return null;this.simplifier.finalizeInto(this.polygons);const e=this.polygons;return this.polygons=[],e.length?new SR(e):null}reset(){this.polygons.length=0,this.simplifier.reset()}}const xR=new _R;class wR{constructor(e,t){this.path=e,this.subpath=t,this.bounds=Zl.NOTHING.copy();for(let i=0;i<t.length;i++)this.bounds.addPoint(t[i])}static fromPathSet(e){const t=[];for(const i of e)for(const e of i.subpaths)t.push(new wR(i,e));return t}}St.register("BoundedSubpath",wR);class TR{constructor(e,t,i,n,r){_defineProperty(this,"intersections",[]),this.renderPath=e,this.x0=t,this.y0=i,this.x1=n,this.y1=r,this.bounds=new Zl(Math.min(t,n),Math.min(i,r),Math.max(t,n),Math.max(i,r))}hasBoundsIntersectionWith(e){return TR.hasBoundsIntersection(this.bounds,e.bounds,this.x0===this.x1||e.x0===e.x1,this.y0===this.y1||e.y0===e.y1)}static hasBoundsIntersection(e,t,i,n){const r=Math.max(e.minX,t.minX),s=Math.max(e.minY,t.minY),a=Math.min(e.maxX,t.maxX),o=Math.min(e.maxY,t.maxY);return(i?a>=r:a>r)&&(n?o>=s:o>s)}static createTransformed(e,t,i,n){const r=t.m00(),s=t.m01(),a=t.m02(),o=t.m10(),l=t.m11(),h=t.m12(),u=fl.roundSymmetric(i.x*r+i.y*s+a),c=fl.roundSymmetric(i.x*o+i.y*l+h),d=fl.roundSymmetric(n.x*r+n.y*s+a),p=fl.roundSymmetric(n.x*o+n.y*l+h);return u!==d||c!==p?new TR(e,u,c,d,p):null}static clipScaleToIntegerEdges(e,t,i){const n=[],r=t.minX,s=t.minY,a=t.maxX,o=t.maxY,l=t.centerX,h=t.centerY;for(let u=0;u<e.length;u++){const c=e[u],d=c.subpath;if(!t.intersectsBounds(c.bounds))continue;const p=!t.containsBounds(c.bounds)?WR.boundsClipPolygon(d,r,s,a,o,l,h):d;for(let e=0;e<p.length;e++){const t=p[e],r=p[(e+1)%p.length],s=TR.createTransformed(c.path,i,t,r);null!==s&&n.push(s)}}return n}static scaleToIntegerEdges(e,t){const i=[];for(let n=0;n<e.length;n++){const r=e[n];for(let e=0;e<r.subpaths.length;e++){const n=r.subpaths[e];for(let e=0;e<n.length;e++){const s=n[e],a=n[(e+1)%n.length],o=TR.createTransformed(r,t,s,a);null!==o&&i.push(o)}}}return i}}St.register("IntegerEdge",TR);class PR{constructor(e,t,i){this.t0=e,this.t1=t,this.point=i}toString(){return`t0=${this.t0}, t1=${this.t1}, point=${this.point}`}verify(e,t,i,n){const r=YV.whole(e.x).plus(this.t0.times(YV.whole(t.x-e.x))),s=YV.whole(e.y).plus(this.t0.times(YV.whole(t.y-e.y))),a=YV.whole(i.x).plus(this.t1.times(YV.whole(n.x-i.x))),o=YV.whole(i.y).plus(this.t1.times(YV.whole(n.y-i.y)));if(!r.equals(a)||!s.equals(o))throw new Error("Intersection point does not match")}static intersectLineSegments(e,t,i,n){const r=e.x,s=e.y,a=t.x,o=t.y,l=i.x,h=i.y,u=n.x,c=n.y,d=a-r,p=o-s,m=u-l,g=c-h,f=l-r,y=h-s,E=d*g-p*m;if(0n===E){let E,v;const A=0n===m,b=0n===g;if(A&&b)return[];if(A){if(e.x!==i.x)return[];E=new YV(p,g),v=new YV(-y,g)}else if(b){if(e.y!==i.y)return[];E=new YV(d,m),v=new YV(-f,m)}else{if(0n===d&&0n===p)return[];const e=new YV(d,m),t=new YV(p,g);if(!e.equalsCrossMul(t))return[];const i=new YV(-f,m),n=new YV(-y,g);if(!i.equalsCrossMul(n))return[];e.isZero()?(E=t,v=n):(E=e,v=i)}const S=[],_=v;if(2===_.ratioTest()){const a=new PR(YV.ZERO,_.reduced(),new HV(YV.whole(r),YV.whole(s)));a.verify(e,t,i,n),S.push(a)}const x=new YV(E.numerator+v.numerator,E.denominator);if(2===x.ratioTest()){const r=new PR(YV.ONE,x.reduced(),new HV(YV.whole(a),YV.whole(o)));r.verify(e,t,i,n),S.push(r)}const w=new YV(-v.numerator,E.numerator);if(2===w.ratioTest()){const r=new PR(w.reduced(),YV.ZERO,new HV(YV.whole(l),YV.whole(h)));r.verify(e,t,i,n),S.push(r)}const T=new YV(E.denominator-v.numerator,E.numerator);if(2===T.ratioTest()){const r=new PR(T.reduced(),YV.ONE,new HV(YV.whole(u),YV.whole(c)));r.verify(e,t,i,n),S.push(r)}return S}{const a=f*g-y*m,o=f*p-y*d,l=new YV(a,E),h=new YV(o,E),u=l.ratioTest(),c=h.ratioTest();if(u<=0n||c<=0n)return[];if(1===u&&1===c)return[];{const o=E*s+a*p,u=new YV(E*r+a*d,E),c=new YV(o,E),m=u.reduced(),g=c.reduced(),f=l.reduced(),y=h.reduced(),v=new PR(f,y,new HV(m,g));return v.verify(e,t,i,n),[v]}}}}St.register("IntersectionPoint",PR);class CR{static processIntegerEdgeIntersection(e,t,i){if(e.x0===t.x0&&e.y0===t.y0&&e.x1===t.x1&&e.y1===t.y1||e.x0===t.x1&&e.y0===t.y1&&e.x1===t.x0&&e.y1===t.y0)return;const n=PR.intersectLineSegments(new qV(BigInt(e.x0),BigInt(e.y0)),new qV(BigInt(e.x1),BigInt(e.y1)),new qV(BigInt(t.x0),BigInt(t.y0)),new qV(BigInt(t.x1),BigInt(t.y1)));i&&(i.integerIntersectionCount+=n.length,i.integerIntersectionComputationCount++);for(let r=0;r<n.length;r++){const i=n[r],s=i.t0,a=i.t1,o=i.point;s.equals(YV.ZERO)||s.equals(YV.ONE)||e.intersections.push(new DR(s,o)),a.equals(YV.ZERO)||a.equals(YV.ONE)||t.intersections.push(new DR(a,o))}}static edgeIntersectionBoundsTree(e,t){VR.fromIntegerEdges(e).selfIntersect(t)}static edgeIntersectionArrayBoundsTree(e,t){const i=[],n=[],r=[],s=[],a=[],o=[];for(let u=0;u<e.length;u+=2){const t=e[u];let i,n=t.y0===t.y1,r=t.x0===t.x1;if(u+1<e.length){const s=e[u+1];i=t.bounds.union(s.bounds),n=n||s.y0===s.y1,r=r||s.x0===s.x1}else i=t.bounds;s.push(i),a.push(n),o.push(r)}for(i.push(s),n.push(a),r.push(o);i[i.length-1].length>1;){const e=[],t=[],s=[],a=i[i.length-1],o=n[n.length-1],l=r[r.length-1];for(let i=0;i<a.length;i+=2){let n,r=o[i],h=l[i];i+1<a.length?(n=a[i].union(a[i+1]),r=r||o[i+1],h=h||l[i+1]):n=a[i],e.push(n),t.push(r),s.push(h)}i.push(e),n.push(t),r.push(s)}const l=(n,r)=>{const s=2*r,a=s+1,o=a<(0===n?e.length:i[n-1].length);if(0===n){if(o){const i=e[s],n=e[a];t&&t.integerIntersectionOverlapCheckCount++,i.hasBoundsIntersectionWith(n)&&CR.processIntegerEdgeIntersection(i,n,t)}}else l(n-1,s),o&&(l(n-1,a),h(n-1,s,a))},h=(s,a,o)=>{const l=i[s],u=n[s],c=r[s],d=l[a],p=l[o],m=u[a]||u[o],g=c[a]||c[o];if(t&&t.integerIntersectionOverlapCheckCount++,TR.hasBoundsIntersection(d,p,g,m)){const n=2*a,r=2*o,l=n+1,u=r+1,c=0===s?e.length:i[s-1].length,d=l<c,p=u<c;if(0===s){const i=e[n],s=e[r],a=d?e[l]:null,o=p?e[u]:null;t&&(t.integerIntersectionOverlapCheckCount+=1+(d?1:0)+(p?1:0)+(d&&p?1:0)),i.hasBoundsIntersectionWith(s)&&CR.processIntegerEdgeIntersection(i,s,t),a&&a.hasBoundsIntersectionWith(s)&&CR.processIntegerEdgeIntersection(a,s,t),o&&i.hasBoundsIntersectionWith(o)&&CR.processIntegerEdgeIntersection(i,o,t),a&&o&&a.hasBoundsIntersectionWith(o)&&CR.processIntegerEdgeIntersection(a,o,t)}else h(s-1,n,r),d&&h(s-1,l,r),p&&h(s-1,n,u),d&&p&&h(s-1,l,u)}};l(i.length-1,0)}static edgeIntersectionQuadratic(e,t){for(let i=0;i<e.length;i++){const n=e[i],r=n.bounds,s=n.x0===n.x1,a=n.y0===n.y1;for(let o=i+1;o<e.length;o++){const i=e[o],l=i.bounds,h=s||i.x0===i.x1,u=a||i.y0===i.y1;t&&t.integerIntersectionOverlapCheckCount++,TR.hasBoundsIntersection(r,l,h,u)&&CR.processIntegerEdgeIntersection(n,i,t)}}}}class VR{constructor(e,t,i){this.bounds=e,this.hasHorizontal=t,this.hasVertical=i}static fromIntegerEdges(e){if(0===e.length)throw new Error;let t=e.map(e=>new RR(e));for(;t.length>1;){const e=[];for(let i=0;i<t.length;i+=2){const n=t[i];if(i+1<t.length){const r=t[i+1];e.push(new NR(n,r))}else e.push(n)}t=e}return t[0]}}class RR extends VR{constructor(e){super(e.bounds,e.y0===e.y1,e.x0===e.x1),this.edge=e}selfIntersect(){}crossIntersect(e,t){TR.hasBoundsIntersection(this.bounds,e.bounds,this.hasVertical,this.hasHorizontal)&&(e instanceof RR?CR.processIntegerEdgeIntersection(this.edge,e.edge,t):e instanceof NR&&(this.crossIntersect(e.left,t),this.crossIntersect(e.right,t)))}}class NR extends VR{constructor(e,t){super(e.bounds.union(t.bounds),e.hasHorizontal||t.hasHorizontal,e.hasVertical||t.hasVertical),this.left=e,this.right=t}selfIntersect(e){this.left.selfIntersect(e),this.right.selfIntersect(e),this.left.crossIntersect(this.right,e)}crossIntersect(e,t){TR.hasBoundsIntersection(this.bounds,e.bounds,this.hasVertical,this.hasHorizontal)&&(e instanceof RR?(this.left.crossIntersect(e,t),this.right.crossIntersect(e,t)):e instanceof NR&&(this.left.crossIntersect(e.left,t),this.left.crossIntersect(e.right,t),this.right.crossIntersect(e.left,t),this.right.crossIntersect(e.right,t)))}}St.register("LineIntersector",CR);class MR{static splitIntegerEdges(e){let t=0;const i=[];return e.forEach(e=>{const n=[new HV(YV.whole(e.x0),YV.whole(e.y0))];let r=YV.ZERO;e.intersections.sort((e,t)=>e.t.compareCrossMul(t.t)),e.intersections.forEach(e=>{r.equals(e.t)||n.push(e.point),r=e.t}),n.push(new HV(YV.whole(e.x1),YV.whole(e.y1)));for(let s=0;s<n.length-1;s++){const r=n[s],a=n[s+1];if(!r.equals(a)){const n=t++,s=new BR(n,r,a),o=new BR(n,a,r);s.reversed=o,o.reversed=s,s.windingMap.addWindingNumber(e.renderPath,1),o.windingMap.addWindingNumber(e.renderPath,-1);const l=e.x1-e.x0,h=e.y1-e.y0,u=0===h?l>0?0:2:h>0?1:3,c=0===h?YV.ZERO:new YV(l,h).reduced();s.discriminator=u,o.discriminator=(u+2)%4,s.slope=c,o.slope=c,i.push(s),i.push(o)}}}),i}}St.register("LineSplitter",MR);class kR{constructor(){_defineProperty(this,"edges",[])}computeProperties(){let e=0;const t=Zl.NOTHING.copy();let i=this.edges[0];for(let n=0;n<this.edges.length;n++){const r=this.edges[n%this.edges.length];r.p0.x.compareCrossMul(i.p0.x)<0&&(i=r);const s=r.p0float,a=r.p1float;t.addPoint(s),e+=.5*(a.x+s.x)*(a.y-s.y)}this.minimalXRationalPoint=i.p0,this.bounds=t,this.signedArea=e}containsPoint(e){let t=0;for(let i=0;i<this.edges.length;i++)t+=this.edges[i].windingContribution(e.x,e.y);return 0!==t}toTransformedPolygon(e){const t=[];for(let i=0;i<this.edges.length;i++)t.push(e.timesVector2(this.edges[i].p0float));return t}toTransformedLinearEdges(e){const t=[];for(let i=0;i<this.edges.length;i++){const n=this.edges[i];t.push(new OV(e.timesVector2(n.p0float),e.timesVector2(n.p1float)))}return t}}St.register("RationalBoundary",kR);const LR=new al(NaN,NaN);class IR{constructor(e){_defineProperty(this,"holes",[]),_defineProperty(this,"windingMapMap",new Map),_defineProperty(this,"windingMap",null),_defineProperty(this,"renderProgram",null),_defineProperty(this,"processed",!1),this.boundary=e}toAccumulator(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mh.IDENTITY;for(let i=-1;i<this.holes.length;i++){const n=-1===i?this.boundary:this.holes[i];for(let i=0;i<n.edges.length;i++){const r=n.edges[i],s=t.timesVector2(r.p0float),a=e.usesEndPoint?t.timesVector2(r.p1float):LR;e.addEdge(s.x,s.y,a.x,a.y,s,e.usesEndPoint?a:null)}e.markNewPolygon()}}getEdges(){return[...this.boundary.edges,...this.holes.flatMap(e=>e.edges)]}getBounds(e){const t=Zl.NOTHING.copy();t.includeBounds(this.boundary.bounds);for(let i=0;i<this.holes.length;i++)t.includeBounds(this.holes[i].bounds);return t.transform(e),t}getIncludedRenderPaths(){const e=new Set;for(const t of this.windingMap.map.keys()){const i=this.windingMap.getWindingNumber(t);rd(i,t.fillRule)&&e.add(t)}return e}static traceBoundaries(e,t,i,n){const r=[];for(let s=0;s<e.length;s++){const a=e[s];if(!a.boundary){const e=new kR;e.edges.push(a),a.boundary=e;let s=a.nextEdge;for(;s!==a;)s.boundary=e,e.edges.push(s),s=s.nextEdge;e.computeProperties();const o=e.signedArea;if(Math.abs(o)>1e-8)if(o>0){t.push(e);const i=new IR(e);n.push(i);for(let t=0;t<e.edges.length;t++){e.edges[t].face=i}}else i.push(e);else for(let t=0;t<e.edges.length;t++)r.push(e.edges[t])}}return e.filter(e=>!r.includes(e))}static computeFaceHolesWithOrderedWindingNumbers(e,t){const i=[];t.sort((e,t)=>e.boundary.signedArea-t.boundary.signedArea);for(let n=0;n<e.length;n++){const r=e[n],s=r.bounds,a=-r.signedArea,o=r.minimalXRationalPoint;let l=!1;for(let e=0;e<t.length;e++){const i=t[e],n=i.boundary;if(a>n.signedArea)continue;const h=n.bounds;if(s.minX>h.minX&&s.minY>h.minY&&s.maxX<h.maxX&&s.maxY<h.maxY&&n.containsPoint(o)){i.holes.push(r);for(let e=0;e<r.edges.length;e++)r.edges[e].face=i;l=!0;break}}l||i.push(r)}return i}static computeFaceHoles(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=null;for(let s=0;s<t.length;s++){const a=t[s],o=a.bounds,l=n?{outerBoundary:a}:null;l&&n.entries.push(l);const h=a.minimalXRationalPoint;let u=new YV(e.left-1,1),c=null,d=!1;for(let e=0;e<i.length;e++){const t=i[e].boundary,n=t.bounds;if(o.minX>n.minX&&o.minY>n.minY&&o.maxX<n.maxX&&o.maxY<n.maxY)for(let e=0;e<t.edges.length;e++){const i=t.edges[e],n=i.p0.x.minus(h.x),r=i.p1.x.minus(h.x);if(n.isNegative()||r.isNegative()){const e=i.p0.y.minus(h.y),t=i.p1.y.minus(h.y),n=e.isPositive()&&t.isPositive(),r=e.isNegative()&&t.isNegative();if(!n&&!r){const n=e.isZero(),r=t.isZero();let s,a;if(n&&r){s=i.p0.x.compareCrossMul(i.p1.x)<0?i.p1.x:i.p0.x,a=!0}else n?(s=i.p0.x,a=!0):r?(s=i.p1.x,a=!0):(s=i.p0.x.plus(i.p1.x.minus(i.p0.x).times(h.y.minus(i.p0.y)).dividedBy(i.p1.y.minus(i.p0.y))),a=!1);u.compareCrossMul(s)<0&&s.compareCrossMul(h.x)<0&&(u=s,c=i,d=a)}}}}l&&(l.maxIntersectionX=u,l.maxIntersectionEdge=c,l.maxIntersectionIsVertex=d);let p=null;if(c){const e=c,t=c.reversed;if(e.face)if(t.face)if(d){const i=e.p0.x.equalsCrossMul(u)&&e.p0.y.equalsCrossMul(h.y)?e:t;let n=i,r=i.previousEdge.reversed;for(;r!==i;)r.compare(n)<0&&(n=r),r=r.previousEdge.reversed;p=r.face}else{p=e.p0.y.compareCrossMul(e.p1.y)<0?t.face:e.face}else p=e.face;else p=t.face;p.holes.push(a);for(let i=0;i<a.edges.length;i++)a.edges[i].face=p}else r=a;l&&(l.connectedFace=p)}return r}static createUnboundedFace(){const e=new IR(new kR);for(let t=0;t<arguments.length;t++){const i=t<0||arguments.length<=t?void 0:arguments[t];e.holes.push(i);for(let t=0;t<i.edges.length;t++)i.edges[t].face=e}return e.holes.push(...arguments),e}static computeWindingMaps(e,t){for(let n=0;n<e.length;n++){const t=e[n],i=t.face,r=t.reversed.face;i.windingMapMap.has(r)||i.windingMapMap.set(r,t.reversed.windingMap)}t.windingMap=new OR;const i=[t];for(;i.length;){const e=i.pop();for(const[t,n]of e.windingMapMap){if(!t.windingMap){const r=new OR,s=e.windingMap,a=n;r.addWindingMap(s),r.addWindingMap(a),t.windingMap=r,i.push(t)}}}}static traceCombineFaces(e,t,i,n,r,s){const a=[];const o=new Map;for(let l=0;l<e.length;l++)o.set(e[l],i(e[l]));for(let l=0;l<e.length;l++){const i=e[l];if(!i.processed){i.processed=!0;const e=[...i.getEdges()],l=i.getBounds(t).copy(),h=o.get(i),u=new Set,c=new Set;u.add(i);const d=i=>{if(u.has(i))return!0;if(c.has(i))return!1;{const n=o.get(i)||null;return r(h,n)?(i.processed=!0,l.includeBounds(i.getBounds(t)),e.push(...i.getEdges()),u.add(i),!0):(c.add(i),!1)}};for(;e.length;){const i=e.pop();if(!(i.processed||d(i.face)&&d(i.reversed.face))){let e=i;do{e.addTransformedToAccumulator(s,t),e.processed=!0;let i=e.nextEdge;for(;i!==e.reversed&&d(i.reversed.face);)i=i.reversed.nextEdge;e=i}while(e!==i);s.markNewPolygon()}}const p=s.finalizeFace();p&&a.push(n(p,h,l))}}return a}}St.register("RationalFace",IR);class BR{constructor(e,t,i){_defineProperty(this,"face",null),_defineProperty(this,"nextEdge",null),_defineProperty(this,"previousEdge",null),_defineProperty(this,"boundary",null),_defineProperty(this,"windingMap",new OR),_defineProperty(this,"processed",!1),this.edgeId=e,this.p0=t,this.p1=i,this.p0float=new al(t.x.toFloat(),t.y.toFloat()),this.p1float=new al(i.x.toFloat(),i.y.toFloat())}leftComparison(e,t){return this.p1.x.minus(this.p0.x).times(t.minus(this.p0.y)).minus(e.minus(this.p0.x).times(this.p1.y.minus(this.p0.y)))}windingContribution(e,t){const i=this.p0.y.compareCrossMul(t),n=this.p1.y.compareCrossMul(t);if(i<=0){if(n>0&&this.leftComparison(e,t).isPositive())return 1}else if(n<=0&&this.leftComparison(e,t).isNegative())return-1;return 0}static compareBigInt(e,t){return e<t?-1:e>t?1:0}static quickCompareBigRational(e,t){const i=BR.compareBigInt(e.numerator,t.numerator);return 0!==i?i:BR.compareBigInt(e.denominator,t.denominator)}static quickCompareBigRationalVector2(e,t){const i=BR.quickCompareBigRational(e.x,t.x);return 0!==i?i:BR.quickCompareBigRational(e.y,t.y)}addWindingFrom(e){this.windingMap.addWindingMap(e.windingMap)}compare(e){const t=BR.quickCompareBigRationalVector2(this.p0,e.p0);if(0!==t)return t;if(this.discriminator<e.discriminator)return-1;if(this.discriminator>e.discriminator)return 1;const i=this.slope.compareCrossMul(e.slope);return 0!==i?-i:this.edgeId<e.edgeId?-1:this.edgeId>e.edgeId?1:0}addTransformedToAccumulator(e,t){const i=t.m00(),n=t.m01(),r=t.m02(),s=t.m10(),a=t.m11(),o=t.m12(),l=this.p0float.x,h=this.p0float.y,u=this.p1float.x,c=this.p1float.y;e.addEdge(i*l+n*h+r,s*l+a*h+o,i*u+n*c+r,s*u+a*c+o,null,null)}static filterAndConnectHalfEdges(e){let t=e[0],i=e[0];const n=[i];for(let r=1;r<e.length;r++){const s=e[r];s.p0.equals(i.p0)?s.p1.equals(i.p1)?i.addWindingFrom(s):(n.push(s),s.reversed.nextEdge=i,i.previousEdge=s.reversed,i=s):(t.reversed.nextEdge=i,i.previousEdge=t.reversed,n.push(s),t=s,i=s)}return t.reversed.nextEdge=i,i.previousEdge=t.reversed,n}}St.register("RationalHalfEdge",BR);class DR{constructor(e,t){this.t=e,this.point=t}}St.register("RationalIntersection",DR);class OR{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map;this.map=e}getWindingNumber(e){return this.map.get(e)||0}addWindingNumber(e,t){const i=this.getWindingNumber(e);this.map.set(e,i+t)}addWindingMap(e){for(const[t,i]of e.map)this.addWindingNumber(t,i)}equals(e){if(this.map.size!==e.map.size)return!1;for(const[t,i]of this.map)if(i!==e.getWindingNumber(t))return!1;return!0}}St.register("WindingMap",OR);const qR=CR.edgeIntersectionArrayBoundsTree;class YR{static union(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return YR.cag(t,e=>e.getIncludedRenderPaths().size>0,(e,t,i)=>t?e.polygons:[],(e,t)=>e===t,null).flat()}static intersection(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return YR.cag(t,e=>e.getIncludedRenderPaths().size===t.length,(e,t,i)=>t?e.polygons:[],(e,t)=>e===t,null).flat()}static difference(e,t){return YR.cag([e,t],i=>{const n=i.getIncludedRenderPaths();return n.has(e)&&!n.has(t)},(e,t,i)=>t?e.polygons:[],(e,t)=>e===t,null).flat()}static getOverlaps(e,t){const i=YR.cag([e,t],i=>{const n=i.getIncludedRenderPaths();return n.has(e)&&n.has(t)?"intersection":n.has(e)?"aOnly":n.has(t)?"bOnly":null},(e,t,i)=>({tag:t,polygons:e.polygons}),(e,t)=>e===t,null),n={intersection:[],aOnly:[],bOnly:[]};return i.forEach(e=>{null!==e.tag&&n[e.tag].push(...e.polygons)}),n}static cag(e,t,i,n,r){const s=Zl.NOTHING.copy();for(let y=0;y<e.length;y++)s.includeBounds(e[y].getBounds());const a=Math.pow(2,20-Math.ceil(Math.log2(Math.max(s.width,s.height)))),o=new al(-.5*a*(s.minX+s.maxX),-.5*a*(s.minY+s.maxY)),l=Mh.affine(a,0,o.x,0,a,o.y),h=l.inverted(),u=TR.scaleToIntegerEdges(e,l);zV.sortCenterMinMax(u,1/(a*Math.max(s.width,s.height))),qR(u,r);const c=MR.splitIntegerEdges(u);c.sort((e,t)=>e.compare(t));let d=BR.filterAndConnectHalfEdges(c);const p=[],m=[];d=IR.traceBoundaries(d,[],p,m);const g=IR.computeFaceHolesWithOrderedWindingNumbers(p,m),f=IR.createUnboundedFace(...g);return IR.computeWindingMaps(d,f),IR.traceCombineFaces(m,h,t,i,n,SR.getScratchAccumulator())}}St.register("PolygonalBoolean",YR);class HR{static clip(e,t,i){for(;0!=(e.code|t.code);){if(0!=(e.code&t.code&-17))return!1;const n=0===e.code?t.code:e.code;let r,s;if(0!=(4&n))r=i.left,s=e.y+(t.y-e.y)*(i.left-e.x)/(t.x-e.x);else if(0!=(1&n))r=i.right,s=e.y+(t.y-e.y)*(i.right-e.x)/(t.x-e.x);else if(0!=(8&n))r=e.x+(t.x-e.x)*(i.top-e.y)/(t.y-e.y),s=i.top;else{if(0==(2&n))throw new Error("cohenSutherlandClip: Unknown case");r=e.x+(t.x-e.x)*(i.bottom-e.y)/(t.y-e.y),s=i.bottom}n===e.code?(e.x=r,e.y=s,e.updateCode(i)):(t.x=r,t.y=s,t.updateCode(i))}return!0}static getCode(e,t,i){return e<i.minX?t>i.maxY?22:t<i.minY?28:4:e>i.maxX?t>i.maxY?19:t<i.minY?25:1:t>i.maxY?2:t<i.minY?8:0}}St.register("CohenSutherlandClipping",HR);class GR{static matthesDrakopoulosClip(e,t,i,n,r,s){const a=e.x,o=e.y,l=t.x,h=t.y;if(!(a<i&&l<i||a>r&&l>r||o<n&&h<n||o>s&&h>s)){const u=(h-o)/(l-a),c=(l-a)/(h-o);if(e.x<i?(e.x=i,e.y=u*(i-a)+o):e.x>r&&(e.x=r,e.y=u*(r-a)+o),e.y<n?(e.y=n,e.x=c*(n-o)+a):e.y>s&&(e.y=s,e.x=c*(s-o)+a),t.x<i?(t.x=i,t.y=u*(i-a)+o):t.x>r&&(t.x=r,t.y=u*(r-a)+o),t.y<n?(t.y=n,t.x=c*(n-o)+a):t.y>s&&(t.y=s,t.x=c*(s-o)+a),!(e.x<i&&t.x<i||e.x>r&&t.x>r))return!0}return!1}}St.register("LineClipping",GR);const FR=new al(0,0),zR=new al(0,0),UR=new aR;class WR{static boundsClipEdge(e,t,i,n,r,s,a,o){let l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[];const h=FR.set(e),u=zR.set(t),c=GR.matthesDrakopoulosClip(h,u,i,n,r,s);let d,p,m,g;const f=!c||!e.equals(h),y=!c||!t.equals(u);let E,v;if(f&&(d=e.x<a,p=e.y<o,E=new al(d?i:r,p?n:s)),y&&(m=t.x<a,g=t.y<o,v=new al(m?i:r,g?n:s)),c){const e=h.copy(),t=u.copy();f&&!E.equals(e)&&l.push(new OV(E,e)),e.equals(t)||l.push(new OV(e,t)),y&&!v.equals(t)&&l.push(new OV(t,v))}else if(d!==m&&p!==g){const h=e.y+(t.y-e.y)*(a-e.x)/(t.x-e.x)>o,u=new al(d===p===h?i:r,h?s:n);l.push(new OV(E,u)),l.push(new OV(u,v))}else E.equals(v)||l.push(new OV(E,v));return l}static boundsClipPolygon(e,t,i,n,r,s,a){for(let o=0;o<e.length;o++){const l=e[o],h=e[(o+1)%e.length],u=FR.set(l),c=zR.set(h),d=GR.matthesDrakopoulosClip(u,c,t,i,n,r);let p,m,g,f;const y=!d||!l.equals(u),E=!d||!h.equals(c);if(y&&(p=l.x<s,m=l.y<a),E&&(g=h.x<s,f=h.y<a),y&&UR.add(p?t:n,m?i:r),d)UR.add(u.x,u.y),UR.add(c.x,c.y);else if(p!==g&&m!==f){const e=p===m,o=l.y+(h.y-l.y)*(s-l.x)/(h.x-l.x)>a;UR.add(e===o?t:n,o?r:i)}E&&UR.add(g?t:n,f?i:r)}return UR.finalize()}}St.register("BoundsClipping",WR);class XR{static binaryStripeClipEdge(e,t,i,n,r,s){const a=i.dot(e),o=i.dot(t),l=i.perpendicular,h=l.dot(e),u=l.dot(t),c=l.dot(l),d=n.map(e=>i.timesScalar(e/i.dot(i))),p=d.map(e=>l.timesScalar(r).add(e));for(let m=0;m<n.length+1;m++){const i=m>0?n[m-1]:Number.NEGATIVE_INFINITY,r=m<n.length?n[m]:Number.POSITIVE_INFINITY,g=s[m];if(a<i&&o<i||a>r&&o>r)continue;if(a>i&&a<r&&o>i&&o<r){g.push(new OV(e,t));continue}if(a===o&&(a===i||a===r)){g.push(new OV(e,t));continue}let f=e.copy(),y=t.copy(),E=null,v=null,A=null,b=null,S=null,_=null;if(a<i||o<i){const e=i,t=d[m-1],n=h+(u-h)*(e-a)/(o-a),r=l.timesScalar(n/c).add(t);E=r,a<i&&(f=r,A=r),o<i&&(y=r,b=r)}if(a>r||o>r){const e=r,t=d[m],i=h+(u-h)*(e-a)/(o-a),n=l.timesScalar(i/c).add(t);v=n,a>r&&(f=n,A=n),o>r&&(y=n,b=n)}E&&(S=p[m-1]),v&&(_=p[m]),A&&(A!==E||A.equals(S)||g.push(new OV(S,f,!0)),A!==v||A.equals(_)||g.push(new OV(_,f,!0))),f.equals(y)||g.push(new OV(f,y)),b&&(b!==E||b.equals(S)||g.push(new OV(y,S,!0)),b!==v||b.equals(_)||g.push(new OV(y,_,!0)))}}static binaryStripeClipPolygon(e,t,i){const n=t.perpendicular,r=i.map(e=>t.timesScalar(e/t.dot(t))),s=n.dot(n),a=_.range(i.length+1).map(()=>new aR);for(let o=0;o<e.length;o++){const l=e[o],h=e[(o+1)%e.length],u=t.dot(l),c=t.dot(h);for(let e=0;e<a.length;e++){const t=a[e],o=e>0?i[e-1]:Number.NEGATIVE_INFINITY,d=e<i.length?i[e]:Number.POSITIVE_INFINITY;if(u<o&&c<o||u>d&&c>d)continue;if(u>o&&u<d&&c>o&&c<d){t.add(l.x,l.y);continue}if(u===c&&(u===o||u===d)){t.add(l.x,l.y);continue}const p=n.dot(l),m=n.dot(h);if(u<=o){const i=p+(m-p)*(o-u)/(c-u),a=n.timesScalar(i/s).add(r[e-1]);t.add(a.x,a.y)}else if(u>=d){const i=p+(m-p)*(d-u)/(c-u),a=n.timesScalar(i/s).add(r[e]);t.add(a.x,a.y)}else t.add(l.x,l.y);if(c<=o){const i=p+(m-p)*(o-u)/(c-u),a=n.timesScalar(i/s).add(r[e-1]);t.add(a.x,a.y)}else if(c>=d){const i=p+(m-p)*(d-u)/(c-u),a=n.timesScalar(i/s).add(r[e]);t.add(a.x,a.y)}else t.add(h.x,h.y)}}return a.map(e=>e.finalize())}}St.register("StripeClipping",XR);const jR=new al(0,0),QR=new al(0,0),KR=[],ZR=[];class JR{static gridClipInterceptIterate(e,t,i,n,r,s,a,o,l,h,u){if(1===l&&1===h)return void u(0,0,e.x,e.y,t.x,t.y,e,t);const c=e=>(e-i)/a,d=e=>(e-n)/o,p=e=>e*a+i,m=e=>e*o+n,g=e.x<t.x,f=e.y<t.y,y=e.y===t.y,E=e.x===t.x,v=c(e.x),A=d(e.y),b=c(t.x),S=d(t.y),_=Math.min(v,b),x=Math.min(A,S),w=Math.max(v,b),T=Math.max(A,S),P=fl.roundSymmetric(_),C=fl.roundSymmetric(x),V=fl.roundSymmetric(w),R=fl.roundSymmetric(T),N=Math.max(0,Math.floor(_-1e-10)),M=Math.max(0,Math.floor(x-1e-10)),k=Math.min(l,Math.ceil(w+1e-10)),L=Math.min(h,Math.ceil(T+1e-10)),I=k-N,B=L-M;if(I>1&&!E){const i=e.y+(t.y-e.y)*(p(N+1)-e.x)/(t.x-e.x);if(ZR.push(i),I>2){const n=a*(t.y-e.y)/(t.x-e.x);let r=i;for(let i=N+2;i<k;i++){r+=n;const s=p(i);s===e.x&&(r=e.y),s===t.x&&(r=t.y),ZR.push(r)}}}if(B>1&&!y){const i=e.x+(t.x-e.x)*(m(M+1)-e.y)/(t.y-e.y);if(KR.push(i),B>2){const n=o*(t.x-e.x)/(t.y-e.y);let r=i;for(let i=M+2;i<L;i++){r+=n;const s=m(i);s===e.y&&(r=e.x),s===t.y&&(r=t.x),KR.push(r)}}}if(1===I&&1===B)u(N,M,e.x,e.y,t.x,t.y,e,t);else for(let D=M;D<L;D++){const i=m(D),n=m(D+1),r=(i+n)/2,s=D===M,a=D===L-1,o=s||y?f?e.x:t.x:KR[D-M-1],l=a||y?f?t.x:e.x:KR[D-M],h=Math.min(o,l),c=Math.max(o,l);for(let d=N;d<k;d++){const m=p(d),v=p(d+1),A=(m+v)/2,b=d===N,S=d===k-1,_=b||E?g?e.y:t.y:ZR[d-N-1],x=S||E?g?t.y:e.y:ZR[d-N],w=Math.min(_,x),T=Math.max(_,x),M=E?v<h:v<=h,L=E?m>c:m>=c,I=y?n<w:n<=w,B=y?i>T:i>=T;if((M||L)&&(I||B)){const e=!(b||S)||d>=P&&d+1<=V,t=!(s||a)||D>=C&&D+1<=R;if(e&&t){const e=M?v:m,t=I?n:i,r=M?m:v,s=I?i:n,a=M?g:!g;u(d,D,a?r:e,a?t:s,e,t,null,null),u(d,D,e,t,a?e:r,a?s:t,null,null)}else if(e){const e=I?n:i;u(d,D,g?m:v,e,g?v:m,e,null,null)}else if(t){const e=M?v:m;u(d,D,e,f?i:n,e,f?n:i,null,null)}}else{const s=fl.clamp(o,m,v),a=fl.clamp(l,m,v),h=fl.clamp(_,i,n),c=fl.clamp(x,i,n);let p,b,S,w;if(y){const e=Math.min(s,a),t=Math.max(s,a);p=g?e:t,S=g?t:e}else p=f?s:a,S=f?a:s;if(E){const e=Math.min(h,c),t=Math.max(h,c);b=f?e:t,w=f?t:e}else b=g?h:c,w=g?c:h;const T=p!==e.x||b!==e.y,P=S!==t.x||w!==t.y,C=T?null:e,V=P?null:t;T&&u(d,D,e.x<A?m:v,e.y<r?i:n,p,b,null,C),u(d,D,p,b,S,w,C,V),P&&u(d,D,S,w,t.x<A?m:v,t.y<r?i:n,V,null)}}}for(let D=P;D<V;D++){const e=p(D),t=p(D+1);for(let i=0;i<M;i++){const n=m(i+1);u(D,i,g?e:t,n,g?t:e,n,null,null)}for(let i=L;i<h;i++){const n=m(i);u(D,i,g?e:t,n,g?t:e,n,null,null)}}for(let D=C;D<R;D++){const e=m(D),t=m(D+1);for(let i=0;i<N;i++){const n=p(i+1);u(i,D,n,f?e:t,n,f?t:e,null,null)}for(let i=k;i<l;i++){const n=p(i);u(i,D,n,f?e:t,n,f?t:e,null,null)}}KR.length=0,ZR.length=0}static gridClipIterate(e,t,i,n,r,s,a,o,l,h,u){if(e.x===t.x&&e.y===t.y)return;if(1===l&&1===h)return void u(0,0,e.x,e.y,t.x,t.y,e,t);const c=e=>(e-i)/a,d=e=>(e-n)/o,p=e=>e*a+i,m=e=>e*o+n,g=e.x<t.x,f=e.y<t.y,y=e.y===t.y,E=e.x===t.x,v=c(e.x),A=d(e.y),b=c(t.x),S=d(t.y),_=Math.min(v,b),x=Math.min(A,S),w=Math.max(v,b),T=Math.max(A,S),P=fl.roundSymmetric(_),C=fl.roundSymmetric(x),V=fl.roundSymmetric(w),R=fl.roundSymmetric(T),N=Math.max(0,Math.floor(_-1e-10)),M=Math.max(0,Math.floor(x-1e-10)),k=Math.min(l,Math.ceil(w+1e-10)),L=Math.min(h,Math.ceil(T+1e-10)),I=k-N,B=L-M;if(I>1&&!E){const i=e.y+(t.y-e.y)*(p(N+1)-e.x)/(t.x-e.x);if(ZR.push(i),I>2){const n=a*(t.y-e.y)/(t.x-e.x);let r=i;for(let i=N+2;i<k;i++){r+=n;const s=p(i);s===e.x&&(r=e.y),s===t.x&&(r=t.y),ZR.push(r)}}}if(B>1&&!y){const i=e.x+(t.x-e.x)*(m(M+1)-e.y)/(t.y-e.y);if(KR.push(i),B>2){const n=o*(t.x-e.x)/(t.y-e.y);let r=i;for(let i=M+2;i<L;i++){r+=n;const s=m(i);s===e.y&&(r=e.x),s===t.y&&(r=t.x),KR.push(r)}}}if(1===I&&1===B)u(N,M,e.x,e.y,t.x,t.y,e,t);else for(let D=M;D<L;D++){const i=m(D),n=m(D+1),r=D===M,s=D===L-1,a=r||y?f?e.x:t.x:KR[D-M-1],o=s||y?f?t.x:e.x:KR[D-M],l=Math.min(a,o),h=Math.max(a,o);for(let c=N;c<k;c++){const a=p(c),o=p(c+1),d=c===N,m=c===k-1,v=d||E?g?e.y:t.y:ZR[c-N-1],A=m||E?g?t.y:e.y:ZR[c-N],b=Math.min(v,A),S=E?o<l:o<=l,_=y?n<b:n<=b;if(o<l-1e-6||a>h+1e-6){const e=!(d||m)||c>=P&&c+1<=V,t=!(r||s)||D>=C&&D+1<=R;if(e&&t){const e=S?o:a,t=_?n:i,r=S?a:o,s=_?i:n,l=S?g:!g,h=l?r:e,d=l?t:s,p=l?e:r,m=l?s:t;u(c,D,h,d,e,t,null,null),u(c,D,e,t,p,m,null,null)}else if(e){const e=_?n:i;u(c,D,g?a:o,e,g?o:a,e,null,null)}else if(t){const e=S?o:a;u(c,D,e,f?i:n,e,f?n:i,null,null)}}else{const r=jR.set(e),s=QR.set(t),l=GR.matthesDrakopoulosClip(r,s,a,i,o,n);let h,d,p,m;const g=!l||!e.equals(r),f=!l||!t.equals(s);let y=NaN,E=NaN,v=NaN,A=NaN;const b=g?null:e,S=f?null:t,_=(a+o)/2,x=(i+n)/2;if(g&&(h=e.x<_,d=e.y<x,y=h?a:o,E=d?i:n),f&&(p=t.x<_,m=t.y<x,v=p?a:o,A=m?i:n),l)!g||y===r.x&&E===r.y||u(c,D,y,E,r.x,r.y,null,b),r.equals(s)||u(c,D,r.x,r.y,s.x,s.y,b,S),!f||v===s.x&&A===s.y||u(c,D,s.x,s.y,v,A,S,null);else if(h!==p&&d!==m){const r=e.y+(t.y-e.y)*(_-e.x)/(t.x-e.x)>x,s=new al(h===d===r?a:o,r?n:i);u(c,D,y,E,s.x,s.y,null,null),u(c,D,s.x,s.y,v,A,null,null)}else y===v&&E===A||u(c,D,y,E,v,A,null,null)}}}for(let D=P;D<V;D++){const e=p(D),t=p(D+1);for(let i=0;i<M;i++){const n=m(i+1);u(D,i,g?e:t,n,g?t:e,n,null,null)}for(let i=L;i<h;i++){const n=m(i);u(D,i,g?e:t,n,g?t:e,n,null,null)}}for(let D=C;D<R;D++){const e=m(D),t=m(D+1);for(let i=0;i<N;i++){const n=p(i+1);u(i,D,n,f?e:t,n,f?t:e,null,null)}for(let i=k;i<l;i++){const n=p(i);u(i,D,n,f?e:t,n,f?t:e,null,null)}}KR.length=0,ZR.length=0}}St.register("GridClipping",JR);const $R=new aR;class eN{static binaryCircularClipEdges(e,t,i,n,r,s){const a=i*Math.cos(.5*n),o=[];let l=[];const h=e=>{r.push(e);const i=e.startPoint.minus(t),n=e.endPoint.minus(t);i.magnitude>a&&l.push(i.angle),n.magnitude>a&&l.push(n.angle)},u=(e,n,a)=>{s.push(e);const h=e.startPoint.minus(t),u=e.endPoint.minus(t);if(h.multiplyScalar(i/h.magnitude),u.multiplyScalar(i/u.magnitude),h.equalsEpsilon(u,1e-8)){let o=al.createPolar(i,h.angle).add(t),l=al.createPolar(i,u.angle).add(t);n&&(o=e.startPoint),a&&(l=e.endPoint),o.equals(l)||(r.push(new OV(o,l)),s.push(new OV(l,o)))}else{const t=h.perpendicular.dot(u)>0,i=h.angle,r=u.angle;l.push(i),l.push(r),o.push(new iN(n?e.startPoint:null,a?e.endPoint:null,i,r,!t))}};for(let c=0;c<e.length;c++){const n=e[c],r=n.startPoint.distance(t)<=i,s=n.endPoint.distance(t)<=i;if(r&&s){h(n);continue}const a=n.startPoint.x-t.x,o=n.startPoint.y-t.y,l=n.endPoint.x-t.x-a,d=n.endPoint.y-t.y-o,p=l*l+d*d,m=2*(a*l+o*d),g=a*a+o*o-i*i,f=fl.solveQuadraticRootsReal(p,m,g);let y=!1;if(f&&0!==f.length){1===f.length&&f.push(f[0]);const e=f[0],t=f[1];(t<=0||e>=1)&&(y=!0),e===t&&(y=!0)}else y=!0;if(y){u(n,r,s);continue}const E=f[0],v=f[1],A=E>0&&E<1,b=v>0&&v<1,S=n.endPoint.minus(n.startPoint),_=A?n.startPoint.plus(S.timesScalar(E)):al.ZERO,x=b?n.startPoint.plus(S.timesScalar(v)):al.ZERO;A&&b?(u(new OV(n.startPoint,_),r,!0),h(new OV(_,x)),u(new OV(x,n.endPoint),!0,s)):A?(u(new OV(n.startPoint,_),r,!0),h(new OV(_,n.endPoint))):b&&(h(new OV(n.startPoint,x)),u(new OV(x,n.endPoint),!0,s))}l=_.uniq(l.sort((e,t)=>e-t));for(let c=0;c<o.length;c++){const e=o[c],a=l.indexOf(e.startAngle),h=l.indexOf(e.endAngle),u=[],d=e.counterClockwise?1:-1;for(let t=a;t!==h;t=(t+d+l.length)%l.length)u.push(l[t]);u.push(l[h]);for(let o=0;o<u.length-1;o++){const a=u[o],l=u[o+1],h=(e.counterClockwise===a<l?l:l+d*Math.PI*2)-a,c=Math.ceil(Math.abs(h)/n);for(let n=0;n<c;n++){const l=a+h*(n/c),d=a+h*((n+1)/c);let p=al.createPolar(i,l).add(t),m=al.createPolar(i,d).add(t);e.startPoint&&0===o&&0===n&&(p=e.startPoint),e.endPoint&&o===u.length-2&&n===c-1&&(m=e.endPoint),p.equals(m)||(r.push(new OV(p,m)),s.push(new OV(m,p)))}}}}static binaryCircularClipPolygon(e,t,i,n,r,s){const a=i*i,o=i*Math.cos(.5*n),l=[],h=[],u=[],c=[],d=[];let p=!1,m=!1;const g=[],f=[];let y=[];const E=()=>{if(p=!1,c.length){d.reverse();const e=[...c,...d];h.push(e),c.length=0,d.length=0}},v=(e,i)=>{u.push(new OV(e,i));const n=e.minus(t),r=i.minus(t);n.magnitude>o&&y.push(n.angle),r.magnitude>o&&y.push(r.angle)},A=(e,n)=>{p?g.push(new OV(e,n)):c.push(new OV(e,n));const r=e.minus(t),s=n.minus(t);if(r.multiplyScalar(i/r.magnitude),s.multiplyScalar(i/s.magnitude),!r.equalsEpsilon(s,1e-8)){const e=r.perpendicular.dot(s)>0,t=r.angle,i=s.angle;y.push(t),y.push(i),u.push(new tN(t,i,!e)),p?f.push(new tN(i,t,e)):d.push(new tN(i,t,e))}};for(let _=0;_<e.length;_++){const n=e[_];for(let e=0;e<n.length;e++){const r=n[e],s=n[(e+1)%n.length],o=r.x-t.x,l=r.y-t.y,h=s.x-t.x,u=s.y-t.y,c=o*o+l*l,d=h*h+u*u,g=c<=a,f=d<=a,y=Math.abs(c-a)<1e-8,b=Math.abs(d-a)<1e-8;if(0===e?(p=!g&&!y,m=g||f):m=m||g||f,g&&f){v(r,s),(y||b)&&E();continue}const S=h-o,_=u-l,x=S*S+_*_,w=2*(o*S+l*_),T=o*o+l*l-i*i,P=fl.solveQuadraticRootsReal(x,w,T);let C=!1;if(P&&0!==P.length){1===P.length&&P.push(P[0]);const e=P[0],t=P[1];(t<=0||e>=1)&&(C=!0),e===t&&(C=!0)}else C=!0;if(C){A(r,s);continue}const V=P[0],R=P[1],N=V>0&&V<1,M=R>0&&R<1,k=s.minus(r),L=N?r.plus(k.timesScalar(V)):al.ZERO,I=M?r.plus(k.timesScalar(R)):al.ZERO;N&&M?(A(r,L),E(),v(L,I),E(),A(I,s)):N?(A(r,L),E(),v(L,s),b&&E()):M&&(y&&E(),v(r,I),E(),A(I,s))}if(c.length||g.length){if(d.reverse(),f.reverse(),m){const e=[...c,...g,...f,...d];h.push(e)}else h.push([...g]),h.push([...f]);c.length=0,d.length=0,g.length=0,f.length=0}u.length&&(l.push(u.slice()),u.length=0)}y=_.uniq(y.sort((e,t)=>e-t));const b=(e,r)=>{if(e instanceof OV)r.addPoint(e.startPoint);else{const s=y.indexOf(e.startAngle),a=y.indexOf(e.endAngle),o=[],l=e.counterClockwise?1:-1;for(let e=s;e!==a;e=(e+l+y.length)%y.length)o.push(y[e]);o.push(y[a]);for(let h=0;h<o.length-1;h++){const s=o[h],a=o[h+1],u=Math.abs(s-a);if(u<1e-9||Math.abs(u-2*Math.PI)<1e-9)continue;const c=(e.counterClockwise===s<a?a:a+l*Math.PI*2)-s,d=Math.ceil(Math.abs(c)/n);for(let e=0;e<d;e++){const n=s+c*(e/d),a=al.createPolar(i,n).add(t);r.addPoint(a)}}}};const S=(e,t)=>{for(let n=0;n<e.length;n++)b(e[n],$R);const i=$R.finalize();i.length>=3&&t.push(i)};for(let _=0;_<l.length;_++)S(l[_],r);for(let _=0;_<h.length;_++)S(h[_],s)}static binaryCircularTracingClipIterate(e,t,i,n,r,s){const a=i*i,o=i*Math.cos(.5*n),l=[],h=[],u=[],c=[],d=[];let p=!1,m=!1;const g=[],f=[];let y=[];const E=()=>{if(p=!1,c.length){d.reverse();const e=[...c,...d];h.push(e),c.length=0,d.length=0}},v=(e,i)=>{u.push(new OV(e,i));const n=e.minus(t),r=i.minus(t);n.magnitude>o&&y.push(n.angle),r.magnitude>o&&y.push(r.angle)},A=(e,n)=>{p?g.push(new OV(e,n)):c.push(new OV(e,n));const r=e.minus(t),s=n.minus(t);if(r.multiplyScalar(i/r.magnitude),s.multiplyScalar(i/s.magnitude),!r.equalsEpsilon(s,1e-8)){const e=r.perpendicular.dot(s)>0,t=r.angle,i=s.angle;y.push(t),y.push(i),u.push(new tN(t,i,!e)),p?f.push(new tN(i,t,e)):d.push(new tN(i,t,e))}};for(let _=0;_<e.length;_++){const n=e[_];for(let e=0;e<n.length;e++){const r=n[e],s=n[(e+1)%n.length],o=r.x-t.x,l=r.y-t.y,h=s.x-t.x,u=s.y-t.y,c=o*o+l*l,d=h*h+u*u,g=c<=a,f=d<=a,y=Math.abs(c-a)<1e-8,b=Math.abs(d-a)<1e-8;if(0===e?(p=!g&&!y,m=g||f):m=m||g||f,g&&f){v(r,s),(y||b)&&E();continue}const S=h-o,_=u-l,x=S*S+_*_,w=2*(o*S+l*_),T=o*o+l*l-i*i,P=fl.solveQuadraticRootsReal(x,w,T);let C=!1;if(P&&0!==P.length){1===P.length&&P.push(P[0]);const e=P[0],t=P[1];(t<=0||e>=1)&&(C=!0),e===t&&(C=!0)}else C=!0;if(C){A(r,s);continue}const V=P[0],R=P[1],N=V>0&&V<1,M=R>0&&R<1,k=s.minus(r),L=N?r.plus(k.timesScalar(V)):al.ZERO,I=M?r.plus(k.timesScalar(R)):al.ZERO;N&&M?(A(r,L),E(),v(L,I),E(),A(I,s)):N?(A(r,L),E(),v(L,s),b&&E()):M&&(y&&E(),v(r,I),E(),A(I,s))}if(c.length||g.length){if(d.reverse(),f.reverse(),m){const e=[...c,...g,...f,...d];h.push(e)}else h.push([...g]),h.push([...f]);c.length=0,d.length=0,g.length=0,f.length=0}u.length&&(l.push(u.slice()),u.length=0)}y=_.uniq(y.sort((e,t)=>e-t));const b=(e,s)=>{if(e instanceof OV){const t=e.startPoint,i=e.endPoint;r(s,t.x,t.y,i.x,i.y,t,i)}else{const a=y.indexOf(e.startAngle),o=y.indexOf(e.endAngle),l=[],h=e.counterClockwise?1:-1;for(let e=a;e!==o;e=(e+h+y.length)%y.length)l.push(y[e]);l.push(y[o]);for(let u=0;u<l.length-1;u++){const a=l[u],o=l[u+1],c=Math.abs(a-o);if(c<1e-9||Math.abs(c-2*Math.PI)<1e-9)continue;const d=(e.counterClockwise===a<o?o:o+h*Math.PI*2)-a,p=Math.ceil(Math.abs(d)/n);for(let e=0;e<p;e++){const n=a+d*(e/p),o=i*Math.cos(n)+t.x,l=i*Math.sin(n)+t.y,h=a+d*((e+1)/p),u=i*Math.cos(h)+t.x,c=i*Math.sin(h)+t.y;r(s,o,l,u,c,null,null)}}}},S=(e,t)=>{for(let i=0;i<e.length;i++)b(e[i],t);s(t)};for(let _=0;_<l.length;_++)S(l[_],!0);for(let _=0;_<h.length;_++)S(h[_],!1)}}class tN{constructor(e,t,i){this.startAngle=e,this.endAngle=t,this.counterClockwise=i}}class iN{constructor(e,t,i,n,r){this.startPoint=e,this.endPoint=t,this.startAngle=i,this.endAngle=n,this.counterClockwise=r}}St.register("CircularClipping",eN);const nN=new aR,rN=new aR;class sN{static binaryInitialPush(e,t,i,n,r,s){return-1===i&&-1===n?(r.push(new OV(e,t)),!0):1===i&&1===n?(s.push(new OV(e,t)),!0):0===i&&0===n&&(r.push(new OV(e,t)),s.push(new OV(e,t)),!0)}static binaryPushClipEdges(e,t,i,n,r,s,a,o){const l=-1===i,h=1===i,u=-1===n,c=1===n,d=l?e:s,p=u?t:s,m=h?e:s,g=c?t:s;h&&!r.equals(d)&&a.push(new OV(r,d,!0)),d.equals(p)||a.push(new OV(d,p)),c&&!r.equals(p)&&a.push(new OV(p,r,!0)),l&&!r.equals(m)&&o.push(new OV(r,m,!0)),m.equals(g)||o.push(new OV(m,g)),u&&!r.equals(g)&&o.push(new OV(g,r,!0))}static binaryXClipEdge(e,t,i,n,r,s){const a=Math.sign(e.x-i),o=Math.sign(t.x-i);if(this.binaryInitialPush(e,t,a,o,r,s))return;const l=e.y+(t.y-e.y)*(i-e.x)/(t.x-e.x),h=new al(i,l),u=new al(i,n);sN.binaryPushClipEdges(e,t,a,o,u,h,r,s)}static binaryYClipEdge(e,t,i,n,r,s){const a=Math.sign(e.y-i),o=Math.sign(t.y-i);if(this.binaryInitialPush(e,t,a,o,r,s))return;const l=e.x+(t.x-e.x)*(i-e.y)/(t.y-e.y),h=new al(l,i),u=new al(n,i);sN.binaryPushClipEdges(e,t,a,o,u,h,r,s)}static binaryLineClipEdge(e,t,i,n,r,s,a){const o=i.dot(e),l=i.dot(t),h=Math.sign(o-n),u=Math.sign(l-n);if(this.binaryInitialPush(e,t,h,u,s,a))return;const c=i.perpendicular,d=c.dot(e),p=c.dot(t),m=c.dot(c),g=d+(p-d)*(n-o)/(l-o),f=i.timesScalar(n/i.dot(i)),y=c.timesScalar(g/m).add(f),E=c.timesScalar(r).add(f);sN.binaryPushClipEdges(e,t,h,u,E,y,s,a)}static binaryXClipPolygon(e,t,i,n){for(let r=0;r<e.length;r++){const i=e[r],n=e[(r+1)%e.length];if(i.x<t&&n.x<t){nN.add(n.x,n.y);continue}if(i.x>t&&n.x>t){rN.add(n.x,n.y);continue}if(i.x===t&&n.x===t){nN.add(n.x,n.y),rN.add(n.x,n.y);continue}const s=i.y+(n.y-i.y)*(t-i.x)/(n.x-i.x),a=i.x<n.x?nN:rN,o=i.x<n.x?rN:nN;a.add(t,s),o.add(t,s),o.add(n.x,n.y)}i.push(...nN.finalize()),n.push(...rN.finalize())}static binaryYClipPolygon(e,t,i,n){for(let r=0;r<e.length;r++){const i=e[r],n=e[(r+1)%e.length];if(i.y<t&&n.y<t){nN.add(n.x,n.y);continue}if(i.y>t&&n.y>t){rN.add(n.x,n.y);continue}if(i.y===t&&n.y===t){nN.add(n.x,n.y),rN.add(n.x,n.y);continue}const s=i.x+(n.x-i.x)*(t-i.y)/(n.y-i.y),a=i.y<n.y?nN:rN,o=i.y<n.y?rN:nN;a.add(s,t),o.add(s,t),o.add(n.x,n.y)}i.push(...nN.finalize()),n.push(...rN.finalize())}static binaryLineClipPolygon(e,t,i,n,r){const s=t.perpendicular,a=t.timesScalar(i/t.dot(t)),o=s.dot(s);for(let l=0;l<e.length;l++){const n=e[l],r=e[(l+1)%e.length],h=t.dot(n),u=t.dot(r);if(h<i&&u<i){nN.add(r.x,r.y);continue}if(h>i&&u>i){rN.add(r.x,r.y);continue}if(h===i&&u===i){nN.add(r.x,r.y),rN.add(r.x,r.y);continue}const c=s.dot(n),d=c+(s.dot(r)-c)*(i-h)/(u-h),p=s.timesScalar(d/o).add(a),m=h<u?rN:nN;(h<u?nN:rN).add(p.x,p.y),m.add(p.x,p.y),m.add(r.x,r.y)}n.push(...nN.finalize()),r.push(...rN.finalize())}static binaryXClipEdgedClipped(e,t){const i=[],n=[];let r=0,s=0;const a=.5*(e.minY+e.maxY),o=e.edges;for(let u=0;u<o.length;u++){const l=o[u],h=l.startPoint,c=l.endPoint,d=Math.sign(h.x-t),p=Math.sign(c.x-t),m=h.y<a,g=c.y<a;if(-1===d&&-1===p)i.push(l),m!==g&&(s+=m?1:-1);else if(1===d&&1===p)n.push(l),m!==g&&(r+=m?1:-1);else if(0===d&&0===p)i.push(l),n.push(l);else{const r=h.y+(c.y-h.y)*(t-h.x)/(c.x-h.x),s=new al(t,r),a=-1===d,o=1===d,l=-1===p,u=1===p,f=a?h:s,y=l?c:s,E=o?h:s,v=u?c:s,A=m?e.minY:e.maxY,b=g?e.minY:e.maxY;o&&f.y!==A&&i.push(new OV(new al(t,A),f)),f.equals(y)||i.push(new OV(f,y)),u&&y.y!==b&&i.push(new OV(y,new al(t,b))),a&&E.y!==A&&n.push(new OV(new al(t,A),E)),E.equals(v)||n.push(new OV(E,v)),l&&v.y!==b&&n.push(new OV(v,new al(t,b)))}}const l=new yR(i,e.minX,e.minY,t,e.maxY,e.minXCount,e.minYCount,e.maxXCount+r,e.maxYCount),h=new yR(n,t,e.minY,e.maxX,e.maxY,e.minXCount+s,e.minYCount,e.maxXCount,e.maxYCount);return{minFace:l,maxFace:h}}static binaryYClipEdgedClipped(e,t){const i=[],n=[];let r=0,s=0;const a=.5*(e.minX+e.maxX),o=e.edges;for(let u=0;u<o.length;u++){const l=o[u],h=l.startPoint,c=l.endPoint,d=Math.sign(h.y-t),p=Math.sign(c.y-t),m=h.x<a,g=c.x<a;if(-1===d&&-1===p)i.push(l),m!==g&&(s+=m?1:-1);else if(1===d&&1===p)n.push(l),m!==g&&(r+=m?1:-1);else if(0===d&&0===p)i.push(l),n.push(l);else{const r=h.x+(c.x-h.x)*(t-h.y)/(c.y-h.y),s=new al(r,t),a=-1===d,o=1===d,l=-1===p,u=1===p,f=a?h:s,y=l?c:s,E=o?h:s,v=u?c:s,A=m?e.minX:e.maxX,b=g?e.minX:e.maxX;o&&f.x!==A&&i.push(new OV(new al(A,t),f)),f.equals(y)||i.push(new OV(f,y)),u&&y.x!==b&&i.push(new OV(y,new al(b,t))),a&&E.x!==A&&n.push(new OV(new al(A,t),E)),E.equals(v)||n.push(new OV(E,v)),l&&v.x!==b&&n.push(new OV(v,new al(b,t)))}}const l=new yR(i,e.minX,e.minY,e.maxX,t,e.minXCount,e.minYCount,e.maxXCount,e.maxYCount+r),h=new yR(n,e.minX,t,e.maxX,e.maxY,e.minXCount,e.minYCount+s,e.maxXCount,e.maxYCount);return{minFace:l,maxFace:h}}}St.register("BinaryClipping",sN);class aN{constructor(){_defineProperty(this,"faces",new Set),_defineProperty(this,"facesToProcess",[]),_defineProperty(this,"renderProgram",null),_defineProperty(this,"bounds",Zl.NOTHING.copy()),_defineProperty(this,"clippableFace",null)}}class oN{static toSimpleRenderableFaces(e,t,i){const n=[];for(let r=0;r<e.length;r++){const s=e[r];s.toAccumulator(i,t);const a=i.finalizeFace();a&&n.push(new RN(a,s.renderProgram,s.getBounds(t)))}return n}static toFullyCombinedRenderableFaces(e,t,i){const n=[];for(let s=0;s<e.length;s++){const t=e[s];let i=!1;for(let e=0;e<n.length;e++){const r=n[e],s=r.values().next().value;if(t.renderProgram.equals(s.renderProgram)){r.add(t),i=!0;break}}if(!i){const e=new Set;e.add(t),n.push(e)}}const r=[];for(let s=0;s<n.length;s++){const e=n[s];let a=null;const o=Zl.NOTHING.copy();for(const n of e)a=n.renderProgram,o.includeBounds(n.getBounds(t)),n.toAccumulator(i,t);const l=i.finalizeFace();l&&r.push(new RN(l,a,o))}return r}static toSimplifyingCombinedRenderableFaces(e,t,i){const n=[];return e.forEach(e=>{if(n.every(t=>!t.faces.has(e))){const r=new aN;r.faces.add(e),r.facesToProcess.push(e),r.renderProgram=e.renderProgram,r.bounds.includeBounds(e.getBounds(t));const s=new Set,a=e=>!s.has(e)&&(!!r.faces.has(e)||(e.renderProgram&&r.renderProgram.equals(e.renderProgram)?(r.faces.add(e),r.facesToProcess.push(e),r.bounds.includeBounds(e.getBounds(t)),!0):(s.add(e),!1)));for(n.push(r);r.facesToProcess.length;){const e=r.facesToProcess.pop();for(const n of[e.boundary,...e.holes])for(const e of n.edges)if(!a(e.reversed.face)){const n=t.timesVector2(e.p0float),r=t.timesVector2(e.p1float);i.addEdge(n.x,n.y,r.x,r.y,n,r)}}r.clippableFace=i.finalizeFace()}}),n.filter(e=>!!e.clippableFace).map(e=>new RN(e.clippableFace,e.renderProgram,e.bounds))}static toTracedRenderableFaces(e,t,i){return IR.traceCombineFaces(e,t,e=>e.renderProgram,(e,t,i)=>new RN(e,t,i),(e,t)=>!!t&&e.equals(t),i)}}St.register("FaceConversion",oN);const lN=yl.ZERO.copy();class hN{constructor(e){this.gamutMap=e}clientToAccumulation(e){const t=e.w;if(t>0){const i=e.x/t,n=e.y/t,r=e.z/t;return lN.setXYZW(t*(i<=.0404482362771082?i/12.92:Math.pow((i+.055)/1.055,2.4)),t*(n<=.0404482362771082?n/12.92:Math.pow((n+.055)/1.055,2.4)),t*(r<=.0404482362771082?r/12.92:Math.pow((r+.055)/1.055,2.4)),t)}return lN.setXYZW(0,0,0,0)}clientToOutput(e){const t=e.x,i=e.y,n=e.z,r=e.w;return r<=0?lN.setXYZW(0,0,0,0):t>=0&&t<=1&&i>=0&&i<=1&&n>=0&&n<=1&&r<=1?lN.setXYZW(t/r*255,i/r*255,n/r*255,255*r):this.gamutMap(e).timesScalar(255)}accumulationToOutput(e){const t=e.w;if(t<=0)return lN.setXYZW(0,0,0,0);{const i=e.x/t,n=e.y/t,r=e.z/t,s=i<=.00313066844250063?12.92*i:1.055*Math.pow(i,1/2.4)-.055,a=n<=.00313066844250063?12.92*n:1.055*Math.pow(n,1/2.4)-.055,o=r<=.00313066844250063?12.92*r:1.055*Math.pow(r,1/2.4)-.055;return s>=0&&s<=1&&a>=0&&a<=1&&o>=0&&o<=1&&t<=1?lN.setXYZW(255*s,255*a,255*o,255*t):this.gamutMap(lN.setXYZW(s*t,a*t,o*t,t)).timesScalar(255)}}static getOutOfGamutColor(e){const t=Math.max(e.x-1,0)-Math.min(e.x,0)+Math.max(e.y-1,0)-Math.min(e.y,0)+Math.max(e.z-1,0)-Math.min(e.z,0)+Math.max(e.w-1,0)-Math.min(e.w,0),i=.25+.5*Math.min(t,1);return new yl(i,i,i,255*e.w)}}_defineProperty(hN,"SRGB",new(He=hN)(Fh.gamutMapPremultipliedSRGB)),_defineProperty(hN,"DISPLAY_P3",new He(Fh.gamutMapPremultipliedDisplayP3)),_defineProperty(hN,"SRGB_SHOW_OUT_OF_GAMUT",new He(He.getOutOfGamutColor)),_defineProperty(hN,"DISPLAY_P3_SHOW_OUT_OF_GAMUT",new He(He.getOutOfGamutColor)),St.register("RasterPremultipliedConverter",hN);const uN={colorSpace:"srgb",showOutOfGamut:!1};class cN{constructor(e,t,i){_defineProperty(this,"combined",!1),this.width=e,this.height=t;const n=Ro()({},uN,i),r=n.colorSpace;this.accumulationArray=new Float64Array(e*t*4),this.colorConverter="srgb"===r?n.showOutOfGamut?hN.SRGB_SHOW_OUT_OF_GAMUT:hN.SRGB:n.showOutOfGamut?hN.DISPLAY_P3_SHOW_OUT_OF_GAMUT:hN.DISPLAY_P3,this.imageData="srgb"===r?new ImageData(this.width,this.height):new ImageData(this.width,this.height,{colorSpace:r})}addClientPartialPixel(e,t,i){const n=this.colorConverter.clientToAccumulation(e),r=4*(i*this.width+t);this.accumulationArray[r]+=n.x,this.accumulationArray[r+1]+=n.y,this.accumulationArray[r+2]+=n.z,this.accumulationArray[r+3]+=n.w}addClientFullPixel(e,t,i){this.addOutputFullPixel(this.colorConverter.clientToOutput(e),t,i)}addOutputFullPixel(e,t,i){const n=4*(i*this.width+t),r=this.imageData.data;r[n]=e.x,r[n+1]=e.y,r[n+2]=e.z,r[n+3]=e.w}addClientFullRegion(e,t,i,n,r){this.addOutputFullRegion(this.colorConverter.clientToOutput(e),t,i,n,r)}addOutputFullRegion(e,t,i,n,r){const s=this.imageData.data;for(let a=0;a<r;a++){const r=(i+a)*this.width+t;for(let t=0;t<n;t++){const i=4*(r+t);s[i]=e.x,s[i+1]=e.y,s[i+2]=e.z,s[i+3]=e.w}}}toImageData(){if(!this.combined){const e=this.accumulationArray.length/4;for(let t=0;t<e;t++){const e=4*t,i=this.accumulationArray[e+3];if(i>0){const n=this.accumulationArray[e]/i,r=this.accumulationArray[e+1]/i,s=this.accumulationArray[e+2]/i,a=n<=.00313066844250063?12.92*n:1.055*Math.pow(n,1/2.4)-.055,o=r<=.00313066844250063?12.92*r:1.055*Math.pow(r,1/2.4)-.055,l=s<=.00313066844250063?12.92*s:1.055*Math.pow(s,1/2.4)-.055,h=4*t;this.imageData.data[h]+=255*a,this.imageData.data[h+1]+=255*o,this.imageData.data[h+2]+=255*l,this.imageData.data[h+3]+=255*i}this.accumulationArray[e]=0,this.accumulationArray[e+1]=0,this.accumulationArray[e+2]=0,this.accumulationArray[e+3]=0}this.combined=!0}return this.imageData}toCanvas(){return FN.imageDataToCanvas(this.toImageData())}writeToCanvas(e,t){FN.writeImageDataToCanvas(this.toImageData(),e,t)}}St.register("CombinedRaster",cN);class dN{static evaluate(e,t,i,n){const r=e*n,s=i*t;return(r-s)*(12-4*(e+t+i+n)+2*(e*t+i*n)+s+r)/24}static getSign(e,t,i,n){const r=i-e,s=n-t;return r===s?1:-1}static evaluatePolygons(e,t,i,n,r){let s=0;for(let a=0;a<e.length;a++){const n=e[a];if(!n.length)continue;const r=n[n.length-1];let o=Math.abs(r.x-t),l=Math.abs(r.y-i);for(let e=0;e<n.length;e++){const r=n[e],a=Math.abs(r.x-t),h=Math.abs(r.y-i);s+=dN.evaluate(o,l,a,h),o=a,l=h}}return s*dN.getSign(t,i,n,r)}static evaluateLinearEdges(e,t,i,n,r){let s=0;for(let a=0;a<e.length;a++){const n=e[a],r=Math.abs(n.startPoint.x-t),o=Math.abs(n.startPoint.y-i),l=Math.abs(n.endPoint.x-t),h=Math.abs(n.endPoint.y-i);s+=dN.evaluate(r,o,l,h)}return s*dN.getSign(t,i,n,r)}}St.register("PolygonBilinear",dN);const pN=new Zl(0,0,1,1),mN=pN.shiftedXY(1,0),gN=pN.shiftedXY(0,1),fN=pN.shiftedXY(1,1),yN=pN.shiftedXY(-1,0),EN=pN.shiftedXY(-2,0),vN=pN.shiftedXY(-1,1),AN=pN.shiftedXY(-2,1),bN=pN.shiftedXY(0,-1),SN=pN.shiftedXY(1,-1),_N=pN.shiftedXY(0,-2),xN=pN.shiftedXY(1,-2),wN=pN.shiftedXY(-1,-1),TN=pN.shiftedXY(-2,-1),PN=pN.shiftedXY(-1,-2),CN=pN.shiftedXY(-2,-2);class VN{static evaluateFull(e,t,i,n){const r=i-e,s=n-t,a=0===r||-1===r,o=0===s||-1===s;return a&&o?VN.full00:a||o?VN.full10:VN.full11}static evaluateLinearEdges(e,t,i,n,r){const s=n-t,a=r-i,o=0===s||-1===s,l=0===a||-1===a,h=s>=0,u=a>=0;let c;c=o&&l?VN.evaluateCase00:o||l?VN.evaluateCase10:VN.evaluateCase11;const d=o&&!l,p=h===u?1:-1;let m=0;for(let g=0;g<e.length;g++){const n=e[g],r=Math.abs(n.startPoint.x-t),s=Math.abs(n.startPoint.y-i),a=Math.abs(n.endPoint.x-t),o=Math.abs(n.endPoint.y-i);m+=d?-c(s,r,o,a):c(r,s,a,o)}return m*p}static evaluatePolygons(e,t,i,n,r){const s=n-t,a=r-i,o=0===s||-1===s,l=0===a||-1===a,h=s>=0,u=a>=0;let c;c=o&&l?VN.evaluateCase00:o||l?VN.evaluateCase10:VN.evaluateCase11;const d=o&&!l,p=h===u?1:-1;let m=0;for(let g=0;g<e.length;g++){const n=e[g];if(!n.length)continue;const r=n[n.length-1];let s=Math.abs(r.x-t),a=Math.abs(r.y-i);for(let e=0;e<n.length;e++){const r=n[e],o=Math.abs(r.x-t),l=Math.abs(r.y-i);m+=d?-c(a,s,l,o):c(s,a,o,l),s=o,a=l}}return m*p}static evaluateFilter(e){if((e=Math.abs(e))<=2){const t=e*e,i=e*e*e;return e<=1?7/6*i+-2*t+8/9:-7/18*i+2*t+-10/3*e+16/9}return 0}static evaluate(e,t){const i=e.map(e=>e.minus(t)),n=VN.evaluateCase00,r=VN.evaluateCase10,s=VN.evaluateCase11,a=(e,t,n)=>VN.evaluateWith(i,e,t,n);return a(n,!1,pN)+a(r,!1,mN)+a(r,!0,gN)+a(s,!1,fN)+-a(n,!1,yN)+-a(r,!1,EN)+-a(r,!0,vN)+-a(s,!1,AN)+-a(n,!1,bN)+-a(r,!1,SN)+-a(r,!0,_N)+-a(s,!1,xN)+a(n,!1,wN)+a(r,!1,TN)+a(r,!0,PN)+a(s,!1,CN)}static evaluateWith(e,t,i,n){let r=0;const s=WR.boundsClipPolygon(e,n.minX,n.minY,n.maxX,n.maxY,n.centerX,n.centerY);for(let a=0;a<s.length;a++){const e=s[a%s.length],n=s[(a+1)%s.length];i?r-=t(Math.abs(e.y),Math.abs(e.x),Math.abs(n.y),Math.abs(n.x)):r+=t(Math.abs(e.x),Math.abs(e.y),Math.abs(n.x),Math.abs(n.y))}return r}static evaluateCase00(e,t,i,n){const r=e*e,s=r*e,a=t*t,o=i*i,l=o*i,h=n*n*n,u=7*e,c=7*i,d=7*n,p=u-20,m=c-20,g=u-32,f=c-32,y=c*n,E=e*i,v=c-16;return 1/51840*(e-i)*(3*a*a*(896+735*s+45*r*f+15*E*f+3*o*f)+128*(160+3*r*p+6*e*p*i+9*p*o+84*l)*n-96*(80+3*(e-4)*r+12*(e-4)*E+30*(e-4)*o+60*l)*h+3*(896+3*r*g+15*e*g*i+45*g*o+735*l)*h*n+6*a*n*(-16*(80+30*s+36*r*(i-2)+12*(i-3)*o+9*E*(3*i-8))+(448+3*(35*s+9*E*v+o*(35*i-96)+r*(63*i-96)))*n)+4*t*(32*(160+84*s+9*r*m+6*E*m+3*o*m)-24*(80+12*(e-3)*r+9*e*(3*e-8)*i+36*(e-2)*o+30*l)*n*n+3*(224+21*s+15*o*v+9*r*(c-8)+3*E*(35*i-64))*h)+12*a*t*(32*(d-20)+3*(5*s*(d-32)+o*(32-8*i-24*n+y)+5*r*(64-16*i-16*n+y)+E*(128-32*i-64*n+3*y))))}static evaluateCase10(e,t,i,n){const r=e*e,s=r*e,a=t*t,o=a*t,l=i*i,h=l*i,u=n*n,c=u*n,d=c*n,p=7*s,m=7*i,g=m-96,f=m-60,y=560+i*g,E=200+i*f;return-1/51840*(e-i)*(3*(o*t)*(245*s-1792+15*r*g+5*e*y+i*y)+128*(200*e-320+p+3*e*i*(m-40)+2*r*(m-30)+4*i*(100+i*(m-45)))*n-96*(s+4*r*(i-3)+20*Math.pow(i-2,3)+2*e*(30+i*(5*i-24)))*c+3*(-1792+p+r*(35*i-96)+5*e*(112+3*i*(m-32))+5*i*(560+i*(49*i-288)))*d+12*o*(8*(-20*Math.pow(e-2,3)-2*(30+e*(5*e-24))*i-4*(e-3)*l-h)+(35*s-448+5*r*(m-48)+i*(280+i*(-72+m))+e*(560+3*i*(m-64)))*n)+6*a*n*(16*(-10*s-12*r*(i-6)-9*e*(20+(i-8)*i)-4*(i-4)*(10+(i-5)*i))+(35*s-896+9*r*(m-32)+e*(840+9*i*(m-48))+i*(840+i*(35*i-288)))*n)+4*t*(32*(28*s-320+3*r*f+2*e*E+i*E)-24*(4*(e-4)*(10+(e-5)*e)+9*(20+(e-8)*e)*i+12*(e-6)*l+10*h)*u+3*(-448+p+3*r*(m-24)+5*i*(112+i*(m-48))+e*(280+i*(35*i-192)))*c))}static evaluateCase11(e,t,i,n){const r=e*e,s=r*e,a=t*t,o=a*t,l=i*i,h=l*i,u=n*n,c=u*n,d=7*s,p=7*e,m=7*i,g=m-96,f=m-60,y=560+i*g,E=200+i*f;return 1/51840*(e-i)*(o*t*(245*s-1792+15*r*g+5*e*y+i*y)+4*o*(24*(-20*Math.pow(e-2,3)-2*(30+e*(5*e-24))*i-4*(e-3)*l-h)+(35*s-448+5*r*(m-48)+i*(280+i*(-72+m))+e*(560+3*i*(m-64)))*n)+2*a*(40*(70*s-640+6*r*(-72+m)+3*e*(300+i*(-72+m))+i*(300+i*(-72+m)))-48*(10*s+12*r*(i-6)+9*e*(20+(i-8)*i)+4*(i-4)*(10+(i-5)*i))*n+(35*s-896+9*r*(m-32)+e*(840+9*i*(m-48))+i*(840+i*(35*i-288)))*u)+4*t*(-64*(28*s-320+3*r*f+2*e*E+i*E)+40*(14*s-320+3*r*(-36+m)+2*i*(150+i*(-54+m))+3*e*(100+i*(m-48)))*n-24*(4*(e-4)*(10+(e-5)*e)+9*(20+(e-8)*e)*i+12*(e-6)*l+10*h)*u+(-448+d+3*r*(m-24)+5*i*(112+i*(m-48))+e*(280+i*(35*i-192)))*c)+n*(-256*(200*e-320+d+3*e*i*(m-40)+2*r*(m-30)+4*i*(100+i*(m-45)))+80*(e*(300+e*(-72+p))-640+900*i+3*e*(-72+p)*i+6*(-72+p)*l+70*h)*n-96*(s+4*r*(i-3)+20*Math.pow(i-2,3)+2*e*(30+i*(5*i-24)))*u+(-1792+d+r*(35*i-96)+5*e*(112+3*i*(m-32))+5*i*(560+i*(49*i-288)))*c))}}_defineProperty(VN,"full00",.2640817901234568),_defineProperty(VN,"full10",-.007137345679012345),_defineProperty(VN,"full11",.0001929012345679021),St.register("PolygonMitchellNetravali",VN);class RN{constructor(e,t,i){this.face=e,this.renderProgram=t,this.bounds=i}split(){const e=new Set;let t=[this];const i=t=>{for(let i=0;i<t.length;i++){const n=t[i];let r=null;if(n.renderProgram.depthFirst(t=>{!e.has(t)&&t.isSplittable()&&(r=t)}),r)return r}return null};let n;for(;n=i(t);){const i=[];for(let e=0;e<t.length;e++){const r=t[e];r.renderProgram.containsRenderProgram(n)?i.push(...n.split(r)):i.push(r)}e.add(n),t=i}return t}}St.register("RenderableFace",RN);const NN={outputRasterOffset:al.ZERO,tileSize:256,polygonFiltering:Ao.Box,polygonFilterWindowMultiplier:1,edgeIntersectionSortMethod:"center-min-max",edgeIntersectionMethod:"arrayBoundsTree",renderableFaceType:"polygonal",renderableFaceMethod:"traced",splitPrograms:!0,executionMethod:"instructions",rasterClipperOptions:{numStages:16},log:null},MN=new al(0,0),kN=new yl(0,0,0,0),LN=new $l,IN=new al(NaN,NaN),BN=[],DN=[],ON=[];let qN=[];const YN=[],HN=[];class GN{constructor(e,t,i,n,r,s,a,o,l,h){this.outputRaster=e,this.evaluate=t,this.constClientColor=i,this.constOutputColor=n,this.outputRasterOffset=r,this.bounds=s,this.polygonFiltering=a,this.polygonFilterWindowMultiplier=o,this.needs=l,this.log=h}}class FN{static getRenderProgrammedFaces(e,t){const i=[],n=new od(e.simplified());for(let r=0;r<t.length;r++){const e=t[r];e.renderProgram=n.replace(e.getIncludedRenderPaths()),e.renderProgram instanceof Fh&&e.renderProgram.color.w<=1e-8||i.push(e)}return i}static addFilterPixel(e,t,i,n,r,s){const a=e.polygonFiltering,o=e.bounds,l=e.outputRaster,h=e.outputRasterOffset,u=a===Ao.MitchellNetravali?2:1,c=n-u+1,d=n+u+1,p=r+u+1;for(let m=r-u+1;m<p;m++){const e=m-.5;if(!(e<o.minY||e>=o.maxY))for(let u=c;u<d;u++){const c=u-.5;if(c<o.minX||c>=o.maxX)continue;let d;d=i>1-1e-8?a===Ao.MitchellNetravali?VN.evaluateFull(u,m,n,r):.25:a===Ao.MitchellNetravali?t.getMitchellNetravaliFiltered(u,m,n,r):t.getBilinearFiltered(u,m,n,r),l.addClientPartialPixel(s.timesScalar(d),c+h.x,e+h.y)}}}static addPartialPixel(e,t,i,n,r,s){const a=kN;e.constClientColor?a.set(e.constClientColor):e.evaluate(LN.set(t,e.needs.needsArea?i:NaN,n,r,s,r+1,s+1),a),e.polygonFiltering===Ao.Box?(a.multiplyScalar(i),e.outputRaster.addClientPartialPixel(a,r+e.outputRasterOffset.x,s+e.outputRasterOffset.y)):FN.addFilterPixel(e,t,i,r,s,a)}static addFullArea(e,t,i,n,r){const s=e.constClientColor;if(s)if(e.polygonFiltering===Ao.Box)e.constOutputColor?e.outputRaster.addOutputFullRegion(e.constOutputColor,t+e.outputRasterOffset.x,i+e.outputRasterOffset.y,n-t,r-i):e.outputRaster.addClientFullRegion(s,t+e.outputRasterOffset.x,i+e.outputRasterOffset.y,n-t,r-i);else for(let a=i;a<r;a++)for(let i=t;i<n;i++)FN.addFilterPixel(e,null,1,i,a,s);else{const s=e.needs,a=e.polygonFiltering,o=e.outputRaster,l=e.outputRasterOffset,h=s.needsArea?1:NaN;for(let u=i;u<r;u++)for(let i=t;i<n;i++){const t=e.evaluate(LN.set(null,h,s.needsCentroid?MN.setXY(i+.5,u+.5):IN,i,u,i+1,u+1),kN);a===Ao.Box?o.addClientFullPixel(t,i+l.x,u+l.y):FN.addFilterPixel(e,null,1,i,u,t)}}}static terminalGridRasterize(e,t,i,n,r,s,a){if(i<1e-8)return;const o=s-n,l=a-r,h=o*l,u=e.needs.needsCentroid,c=e.needs.needsFace||e.polygonFiltering!==Ao.Box;qN=t instanceof SR?HN:YN;for(let m=0;m<h;m++)if(m<BN.length?BN[m]=0:BN.push(0),u&&m<DN.length?DN[m].setXY(0,0):DN.push(new al(0,0)),c)if(m<ON.length?ON[m]=-1:ON.push(-1),m<qN.length)qN[m].reset();else{const e=n+m%o,i=r+Math.floor(m/o),s=t.getAccumulator();qN.push(s),s.setAccumulationBounds(e,i,e+1,i+1)}let d=0,p=0;t.gridClipIterate(n,r,s,a,1,1,o,l,(e,t,i,n,r,s,a,l)=>{const h=t*o+e;if(BN[h]+=(r+i)*(s-n),u){const e=i*(2*n+s)+r*(n+2*s);DN[h].addXY((i-r)*e,(s-n)*e)}if(c){const e=qN[h];ON[h]<p&&e.markNewPolygon(),ON[h]=d++,e.addEdge(i,n,r,s,a,l)}},()=>{p=d++});for(let m=0;m<l;m++){const t=m*o,i=r+m,s=i+1;for(let r=0;r<o;r++){const a=t+r,o=n+r,l=o+1,h=BN[a];if(h>2e-8){const t=.5*h;if(t>=1-1e-8)e.log&&e.log.fullAreas.push(new Zl(o,i,l,s)),FN.addFullArea(e,o,i,l,s);else{let n=IN;u&&(n=DN[a].multiplyScalar(1/(6*t)),n.x=fl.clamp(n.x,o,l),n.y=fl.clamp(n.y,i,s));const r=c?qN[a].finalizeFace():null;e.log&&e.log.partialAreas.push(new Zl(o,i,l,s)),FN.addPartialPixel(e,r,t,n,o,i)}}}}}static binaryRasterize(e,t,i,n,r,s,a){if(i<1e-8)return;const o=s-n,l=a-r;if(i>=(s-n)*(a-r)-1e-8)e.log&&e.log.fullAreas.push(new Zl(n,r,s,a)),FN.addFullArea(e,n,r,s,a);else if(1===o&&1===l)e.log&&e.log.partialAreas.push(new Zl(n,r,s,a)),FN.addPartialPixel(e,t,i,e.needs.needsCentroid?t.getCentroid(i):IN,n,r);else if(!e.constClientColor&&o<=8&&l<=8)FN.terminalGridRasterize(e,t,i,n,r,s,a);else{const i=(n+s)/2,h=(r+a)/2;if(o>l){const i=n+Math.floor(.5*o),{minFace:l,maxFace:u}=t.getBinaryXClip(i,h);0;const c=l.getArea(),d=u.getArea();c>1e-8&&FN.binaryRasterize(e,l,c,n,r,i,a),d>1e-8&&FN.binaryRasterize(e,u,d,i,r,s,a)}else{const o=r+Math.floor(.5*l),{minFace:h,maxFace:u}=t.getBinaryYClip(o,i);0;const c=h.getArea(),d=u.getArea();c>1e-8&&FN.binaryRasterize(e,h,c,n,r,s,o),d>1e-8&&FN.binaryRasterize(e,u,d,n,o,s,a)}}}static windowedFilterRasterize(e,t,i){const n=e.bounds.minX,r=e.bounds.maxX,s=e.bounds.minY,a=e.bounds.maxY,o=bo(e.polygonFiltering)*e.polygonFilterWindowMultiplier,l=o*o,h=.5*(o-1),u=-h,c=1+h,d=Mh.scaling(1/e.polygonFilterWindowMultiplier),p=(e,t,i)=>{const n=e.getBinaryXClip(t,i),r=n.minFace,s=n.maxFace,a=r.getBinaryYClip(i,t),o=s.getBinaryYClip(i,t);return{minXMinYFace:a.minFace,minXMaxYFace:a.maxFace,maxXMinYFace:o.minFace,maxXMaxYFace:o.maxFace}};for(let m=s;m<a;m++){const s=m+u,a=m+c;if(!(s>=i.maxY||a<=i.minY))for(let o=n;o<r;o++){const n=o+u,r=o+c;if(n>=i.maxX||r<=i.minX)continue;const h=t.getClipped(n,s,r,a),g=h.getArea();if(g>1e-8)if(e.constClientColor){const t=e.constClientColor;let i=0;if(e.polygonFiltering===Ao.Box)i=g/l;else{const t=p(h.getTransformed(d.timesMatrix(Mh.translation(-(o+.5),-(m+.5)))),0,0);if(e.polygonFiltering===Ao.Bilinear)i=t.minXMinYFace.getBilinearFiltered(0,0,-1,-1)+t.minXMaxYFace.getBilinearFiltered(0,0,-1,0)+t.maxXMinYFace.getBilinearFiltered(0,0,0,-1)+t.maxXMaxYFace.getBilinearFiltered(0,0,0,0);else if(e.polygonFiltering===Ao.MitchellNetravali){const e=p(t.minXMinYFace,-1,-1),n=p(t.minXMaxYFace,-1,1),r=p(t.maxXMinYFace,1,-1),s=p(t.maxXMaxYFace,1,1);i=e.minXMinYFace.getMitchellNetravaliFiltered(0,0,-2,-2)+e.minXMaxYFace.getMitchellNetravaliFiltered(0,0,-2,-1)+e.maxXMinYFace.getMitchellNetravaliFiltered(0,0,-1,-2)+e.maxXMaxYFace.getMitchellNetravaliFiltered(0,0,-1,-1)+n.minXMinYFace.getMitchellNetravaliFiltered(0,0,-2,0)+n.minXMaxYFace.getMitchellNetravaliFiltered(0,0,-2,1)+n.maxXMinYFace.getMitchellNetravaliFiltered(0,0,-1,0)+n.maxXMaxYFace.getMitchellNetravaliFiltered(0,0,-1,1)+r.minXMinYFace.getMitchellNetravaliFiltered(0,0,0,-2)+r.minXMaxYFace.getMitchellNetravaliFiltered(0,0,0,-1)+r.maxXMinYFace.getMitchellNetravaliFiltered(0,0,1,-2)+r.maxXMaxYFace.getMitchellNetravaliFiltered(0,0,1,-1)+s.minXMinYFace.getMitchellNetravaliFiltered(0,0,0,0)+s.minXMaxYFace.getMitchellNetravaliFiltered(0,0,0,1)+s.maxXMinYFace.getMitchellNetravaliFiltered(0,0,1,0)+s.maxXMaxYFace.getMitchellNetravaliFiltered(0,0,1,1)}}e.outputRaster.addClientPartialPixel(t.timesScalar(i),o+e.outputRasterOffset.x,m+e.outputRasterOffset.y)}else{const t=d.timesMatrix(Mh.translation(-(o+.5),-(m+.5))),i=t.inverted(),n=h.getTransformed(t),r=(n,r,s,a)=>{const h=s.getArea(),u=i.timesVector2(new al(n,r)),c=i.timesVector2(new al(n+1,r+1));if(h>1e-8){const n=h*l,r=s.getTransformed(i),d=u.x,p=u.y,g=c.x,f=c.y,y=(i,n,r,s,l,h)=>{const u=.5*(r+l),c=.5*(s+h);if(l-r>1){const{minFace:e,maxFace:t}=i.getBinaryXClip(u,c),n=e.getArea(),a=t.getArea();n>1e-8&&y(e,n,r,s,u,h),a>1e-8&&y(t,a,u,s,l,h)}else if(h-s>1){const{minFace:e,maxFace:t}=i.getBinaryYClip(c,u),n=e.getArea(),a=t.getArea();n>1e-8&&y(e,n,r,s,l,c),a>1e-8&&y(t,a,r,c,l,h)}else{const u=e.evaluate(LN.set(i,e.needs.needsArea?n:NaN,e.needs.needsCentroid?i.getCentroid(n):IN,r,s,l,h),kN);e.outputRaster.addClientPartialPixel(u.timesScalar(a(i.getTransformed(t))),o+e.outputRasterOffset.x,m+e.outputRasterOffset.y)}};y(r,n,d,p,g,f)}};if(e.polygonFiltering===Ao.Box)r(-.5,-.5,n,e=>e.getArea());else if(e.polygonFiltering===Ao.Bilinear){const e=p(n,0,0);r(-1,-1,e.minXMinYFace,e=>e.getBilinearFiltered(0,0,-1,-1)),r(-1,0,e.minXMaxYFace,e=>e.getBilinearFiltered(0,0,-1,0)),r(0,-1,e.maxXMinYFace,e=>e.getBilinearFiltered(0,0,0,-1)),r(0,0,e.maxXMaxYFace,e=>e.getBilinearFiltered(0,0,0,0))}else if(e.polygonFiltering===Ao.MitchellNetravali){const e=p(n,0,0),t=p(e.minXMinYFace,-1,-1),i=p(e.minXMaxYFace,-1,1),s=p(e.maxXMinYFace,1,-1),a=p(e.maxXMaxYFace,1,1);r(-2,-2,t.minXMinYFace,e=>e.getMitchellNetravaliFiltered(0,0,-2,-2)),r(-2,-1,t.minXMaxYFace,e=>e.getMitchellNetravaliFiltered(0,0,-2,-1)),r(-1,-2,t.maxXMinYFace,e=>e.getMitchellNetravaliFiltered(0,0,-1,-2)),r(-1,-1,t.maxXMaxYFace,e=>e.getMitchellNetravaliFiltered(0,0,-1,-1)),r(-2,0,i.minXMinYFace,e=>e.getMitchellNetravaliFiltered(0,0,-2,0)),r(-2,1,i.minXMaxYFace,e=>e.getMitchellNetravaliFiltered(0,0,-2,1)),r(-1,0,i.maxXMinYFace,e=>e.getMitchellNetravaliFiltered(0,0,-1,0)),r(-1,1,i.maxXMaxYFace,e=>e.getMitchellNetravaliFiltered(0,0,-1,1)),r(0,-2,s.minXMinYFace,e=>e.getMitchellNetravaliFiltered(0,0,0,-2)),r(0,-1,s.minXMaxYFace,e=>e.getMitchellNetravaliFiltered(0,0,0,-1)),r(1,-2,s.maxXMinYFace,e=>e.getMitchellNetravaliFiltered(0,0,1,-2)),r(1,-1,s.maxXMaxYFace,e=>e.getMitchellNetravaliFiltered(0,0,1,-1)),r(0,0,a.minXMinYFace,e=>e.getMitchellNetravaliFiltered(0,0,0,0)),r(0,1,a.minXMaxYFace,e=>e.getMitchellNetravaliFiltered(0,0,0,1)),r(1,0,a.maxXMinYFace,e=>e.getMitchellNetravaliFiltered(0,0,1,0)),r(1,1,a.maxXMaxYFace,e=>e.getMitchellNetravaliFiltered(0,0,1,1))}}}}}static rasterizeAccumulate(e,t,i,n,r,s,a,o,l){const h=new nh;for(let u=0;u<t.length;u++){const c=t[u],d=c.renderProgram,p=c.bounds,m=d instanceof Fh?d.color:null,g=null!==m?e.colorConverter.clientToOutput(m).copy():null;let f=null;g||("instructions"===o?(h.loadRenderProgram(d),f=h.evaluator):f=d.getEvaluator());const y=new GN(e,f,m,g,r,i,s,a,d.getNeeds(),l);if(1!==a){const e=c.face.getClipped(n.minX,n.minY,n.maxX,n.maxY);FN.windowedFilterRasterize(y,e,p.intersection(n))}else{const e=So(y.polygonFiltering),t=p.intersection(n).shiftedXY(e,e).roundedOut().shiftedXY(-e,-e),i=c.face.getClipped(t.minX,t.minY,t.maxX,t.maxY);FN.binaryRasterize(y,i,i.getArea(),t.minX,t.minY,t.maxX,t.maxY)}}}static markStart(e){window.performance&&window.performance.mark(e+"-start")}static markEnd(e){window.performance&&window.performance.mark(e+"-end"),window.performance&&window.performance.measure(e,e+"-start",e+"-end")}static partitionRenderableFaces(e,t,i){e=e.simplified();const n=Ro()({},NN,i),r=n.log,s={polygonal:SR.getScratchAccumulator(),edged:hR.getScratchAccumulator(),edgedClipped:yR.getScratchAccumulator()}[n.renderableFaceType],a=n.polygonFiltering,o=n.polygonFilterWindowMultiplier,l=new Set;e.depthFirst(e=>{e instanceof gh&&l.add(e.path)});const h=new mh("nonzero",[[t.leftTop,t.rightTop,t.rightBottom,t.leftBottom]]);l.add(h);const u=_o(t,a,o);r&&FN.markStart("path-bounds");const c=wR.fromPathSet(l);r&&FN.markEnd("path-bounds");const d=n.tileSize,p=Math.min(d,Math.max(u.width,u.height)),m=Math.pow(2,20-Math.ceil(Math.log2(p)));r&&(r.scale=m);const g=[];for(let f=u.minY;f<u.maxY;f+=d)for(let t=u.minX;t<u.maxX;t+=d){const i=r?new UN:null;r&&i&&r.tileLogs.push(i);const a=new Zl(t,f,Math.min(t+d,u.maxX),Math.min(f+d,u.maxY)),o=new al(-.5*m*(a.minX+a.maxX),-.5*m*(a.minY+a.maxY));i&&(i.translation=o);const l=Mh.affine(m,0,o.x,0,m,o.y);i&&(i.toIntegerMatrix=l);const h=l.inverted();i&&(i.fromIntegerMatrix=h),r&&FN.markStart("clip-integer");const y=TR.clipScaleToIntegerEdges(c,a,l);if(r&&FN.markEnd("clip-integer"),i&&(i.integerEdges=y),r&&FN.markStart("integer-sort"),"center-size"===n.edgeIntersectionSortMethod)zV.sortCenterSize(y,1/(m*p));else if("min-max"===n.edgeIntersectionSortMethod)zV.sortMinMax(y,1/(m*p));else if("min-max-size"===n.edgeIntersectionSortMethod)zV.sortMinMaxSize(y,1/(m*p));else if("center-min-max"===n.edgeIntersectionSortMethod)zV.sortCenterMinMax(y,1/(m*p));else if("random"===n.edgeIntersectionSortMethod){const e=_.shuffle(y);y.length=0,y.push(...e)}if(r&&FN.markEnd("integer-sort"),r&&FN.markStart("integer-intersect"),"quadratic"===n.edgeIntersectionMethod)CR.edgeIntersectionQuadratic(y,i);else if("boundsTree"===n.edgeIntersectionMethod)CR.edgeIntersectionBoundsTree(y,i);else{if("arrayBoundsTree"!==n.edgeIntersectionMethod)throw new Error("unknown edgeIntersectionMethod: "+n.edgeIntersectionMethod);CR.edgeIntersectionArrayBoundsTree(y,i)}r&&FN.markEnd("integer-intersect"),r&&FN.markStart("integer-split");const E=MR.splitIntegerEdges(y);r&&FN.markEnd("integer-split"),r&&FN.markStart("edge-sort"),E.sort((e,t)=>e.compare(t)),r&&FN.markEnd("edge-sort"),r&&FN.markStart("filter-connect");let v=BR.filterAndConnectHalfEdges(E);r&&FN.markEnd("filter-connect"),i&&(i.filteredRationalHalfEdges=v);const A=[],b=[],S=[];i&&(i.innerBoundaries=A,i.outerBoundaries=b,i.faces=S),r&&FN.markStart("trace-boundaries"),v=IR.traceBoundaries(v,A,b,S),r&&FN.markEnd("trace-boundaries"),i&&(i.refilteredRationalHalfEdges=v),r&&FN.markStart("face-holes");const x=IR.computeFaceHolesWithOrderedWindingNumbers(b,S);r&&FN.markEnd("face-holes");const w=x[0],T=IR.createUnboundedFace(w);i&&(i.unboundedFace=T),r&&FN.markStart("winding-maps"),IR.computeWindingMaps(v,T),r&&FN.markEnd("winding-maps"),r&&FN.markStart("render-programs");const P=FN.getRenderProgrammedFaces(e,S);let C;if(i&&(i.renderedFaces=P),r&&FN.markEnd("render-programs"),r&&FN.markStart("renderable-faces"),s.setAccumulationBounds(a.minX,a.minY,a.maxX,a.maxY),"simple"===n.renderableFaceMethod)C=oN.toSimpleRenderableFaces(P,h,s);else if("fullyCombined"===n.renderableFaceMethod)C=oN.toFullyCombinedRenderableFaces(P,h,s);else if("simplifyingCombined"===n.renderableFaceMethod)C=oN.toSimplifyingCombinedRenderableFaces(P,h,s);else{if("traced"!==n.renderableFaceMethod)throw new Error("unknown renderableFaceMethod");C=oN.toTracedRenderableFaces(P,h,s)}r&&FN.markEnd("renderable-faces"),i&&(i.initialRenderableFaces=C),n.splitPrograms&&(r&&FN.markStart("split-programs"),C=C.flatMap(e=>e.split()),r&&FN.markEnd("split-programs")),i&&(i.renderableFaces=C),g.push(...C)}return r&&(r.renderableFaces=g),g}static rasterize(e,t,i,n){const r=Ro()({},NN,n),s=r.log,a=FN.partitionRenderableFaces(e,i,n),o=r.polygonFiltering,l=r.polygonFilterWindowMultiplier,h=_o(i,o,l);s&&FN.markStart("rasterize-accumulate"),FN.rasterizeAccumulate(t,a,i,h,r.outputRasterOffset,o,l,r.executionMethod,s),s&&FN.markEnd("rasterize-accumulate")}static async hybridRasterize(e,t,i,n,r,s){const a=Ro()({},NN,s),o=FN.partitionRenderableFaces(e,n,s),l=OI.get(t),h=No({colorSpace:r},a.rasterClipperOptions);await l.rasterize(o,i.getCurrentTexture(),h)}static imageDataToCanvas(e){const t=document.createElement("canvas");return t.width=e.width,t.height=e.height,(e.colorSpace&&"srgb"!==e.colorSpace?t.getContext("2d",{colorSpace:e.colorSpace}):t.getContext("2d")).putImageData(e,0,0),t}static writeImageDataToCanvas(e,t,i){t.width!==e.width&&(t.width=e.width),t.height!==e.height&&(t.height=e.height),i.putImageData(e,0,0)}}St.register("Rasterize",FN);class zN{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"srgb",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ao.Box;_defineProperty(this,"renderableFaces",[]),_defineProperty(this,"bounds",Zl.NOTHING),_defineProperty(this,"gridBounds",Zl.NOTHING),this.width=e,this.height=t,this.colorSpace=i,this.polygonFiltering=n,this.updateWidthHeight(e,t)}fillColor(e,t){this.fillRenderProgram(e,this.colorToRenderProgram(t))}fillLinearGradient(e,t,i,n,r){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:kc.SplitAccurate;this.fillRenderProgram(e,new Bc(Mh.IDENTITY,t,i,n.map(e=>new ic(e.ratio,this.colorToRenderProgram(e.color))),r,s)),this.renderableFaces=this.renderableFaces.flatMap(e=>e.split())}fillRadialGradient(e,t,i,n,r,s,a,o){let l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Xc.SplitAccurate;this.fillRenderProgram(e,new Kc(Mh.IDENTITY,i,n,r,s,a.map(e=>new ic(e.ratio,this.colorToRenderProgram(e.color))),o,l)),this.renderableFaces=this.renderableFaces.flatMap(e=>e.split())}copy(){const e=new zN(this.width,this.height,this.colorSpace,this.polygonFiltering);return e.renderableFaces=this.renderableFaces.slice(),e}colorToRenderProgram(e){return new Fh(e).colorConverted(zh.sRGB,"srgb"===this.colorSpace?zh.premultipliedSRGB:zh.premultipliedDisplayP3)}fillRenderProgram(e,t){const i=e.getBounds();e=new mh(e.fillRule,e.subpaths.map(e=>WR.boundsClipPolygon(e,this.bounds.minX,this.bounds.minY,this.bounds.maxX,this.bounds.maxY,this.bounds.centerX,this.bounds.centerY)));const n=[];for(let r=0;r<this.renderableFaces.length;r++){const s=this.renderableFaces[r];if(s.bounds.intersectsBounds(i)){const i=new mh("nonzero",s.face.toPolygonalFace().polygons),r=YR.getOverlaps(i,e);if(r.intersection.length){if(r.aOnly.length){const e=new SR(r.aOnly);n.push(new RN(e,s.renderProgram,e.getBounds()))}const e=new SR(r.intersection);n.push(new RN(e,new wu([s.renderProgram,t]).simplified(),e.getBounds()))}else n.push(s)}else n.push(s)}this.renderableFaces=n,this.combineFaces()}combineFaces(){for(let e=0;e<this.renderableFaces.length;e++){const t=this.renderableFaces[e],i=t.renderProgram,n=[],r=[];for(let s=e+1;s<this.renderableFaces.length;s++){const e=this.renderableFaces[s];i.equals(e.renderProgram)&&(n.push(e),r.push(s))}if(n.length){const s=[t,...n].map(e=>e.face.toPolygonalFace().polygons).flat(),a=OV.toPolygons(OV.fromPolygons(s)),o=new SR(a);for(this.renderableFaces[e]=new RN(o,i,o.getBounds());r.length;)this.renderableFaces.splice(r.pop(),1)}}}updateWidthHeight(e,t){this.width=e,this.height=t,this.bounds=new Zl(0,0,e,t),this.gridBounds=_o(this.bounds,this.polygonFiltering,1),this.renderableFaces.length=0,this.renderableFaces.push(new RN(SR.fromBounds(this.bounds),Fh.TRANSPARENT,this.bounds))}getImageData(e){const t=new cN(this.width,this.height,No({colorSpace:this.colorSpace},e));return FN.rasterizeAccumulate(t,this.renderableFaces,this.bounds,this.gridBounds,al.ZERO,this.polygonFiltering,1,"evaluation",null),t.toImageData()}getCanvas(e){return FN.imageDataToCanvas(this.getImageData(e))}}St.register("VectorCanvas",zN);class UN{constructor(){_defineProperty(this,"translation",null),_defineProperty(this,"toIntegerMatrix",null),_defineProperty(this,"fromIntegerMatrix",null),_defineProperty(this,"integerEdges",null),_defineProperty(this,"filteredRationalHalfEdges",null),_defineProperty(this,"refilteredRationalHalfEdges",null),_defineProperty(this,"innerBoundaries",null),_defineProperty(this,"outerBoundaries",null),_defineProperty(this,"faces",null),_defineProperty(this,"unboundedFace",null),_defineProperty(this,"renderedFaces",null),_defineProperty(this,"initialRenderableFaces",null),_defineProperty(this,"renderableFaces",null),_defineProperty(this,"integerIntersectionCount",0),_defineProperty(this,"integerIntersectionComputationCount",0),_defineProperty(this,"integerIntersectionOverlapCheckCount",0)}}St.register("RasterLog",class{constructor(){_defineProperty(this,"scale",null),_defineProperty(this,"partialAreas",[]),_defineProperty(this,"fullAreas",[]),_defineProperty(this,"tileLogs",[]),_defineProperty(this,"renderableFaces",null)}});class WN{constructor(e,t,i,n){this.kernel=e,this.localId=t,this.workgroup=i,this.executor=n,this.workgroupId=i.id,this.globalId=new bl(t.x+this.workgroupId.x*e.workgroupX,t.y+this.workgroupId.y*e.workgroupY,t.z+this.workgroupId.z*e.workgroupZ),this.localIndex=t.x+t.y*e.workgroupX+t.z*e.workgroupX*e.workgroupY,this.workgroupValues=i.values}async start(){return this.executor.start()}async workgroupBarrier(){return this.executor.workgroupBarrier(this.workgroup)}async storageBarrier(){return this.executor.storageBarrier(this.workgroup)}async afterSet(){return this.executor.afterSet()}async afterGet(){return this.executor.afterGet()}}St.register("ParallelContext",WN);class XN{constructor(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;this.execute=e,this.createWorkgroupValues=t,this.storageArrays=i,this.workgroupX=n,this.workgroupY=r,this.workgroupZ=s}}St.register("ParallelKernel",XN);class jN{constructor(e,t,i){_defineProperty(this,"workgroupResolves",[]),_defineProperty(this,"storageResolves",[]),this.kernel=e,this.id=t,this.values=i}}St.register("ParallelWorkgroup",jN);const QN=new Jd;class KN{constructor(e){_defineProperty(this,"resolves",[]),_defineProperty(this,"donePromises",[]),this.kernel=e}async dispatch(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;for(let n=0;n<e;n++)for(let e=0;e<t;e++)for(let t=0;t<i;t++){const i=new jN(this.kernel,new bl(n,e,t),this.kernel.createWorkgroupValues());for(let e=0;e<this.kernel.workgroupX;e++)for(let t=0;t<this.kernel.workgroupY;t++)for(let n=0;n<this.kernel.workgroupZ;n++){const r=new bl(e,t,n),s=new WN(this.kernel,r,i,this),a=this.kernel.execute(s);this.donePromises.push(a),a.then(()=>{this.next()})}}this.next(),await Promise.all(this.donePromises),this.kernel.storageArrays.forEach(e=>e.synchronizeFull())}next(){if(this.resolves.length>0){const e=QN.sample(this.resolves);this.resolves.splice(this.resolves.indexOf(e),1),e()}}start(){return new Promise(e=>{this.resolves.push(()=>{e()})})}workgroupBarrier(e){return new Promise(t=>{e.workgroupResolves.push(t),e.workgroupResolves.length===this.kernel.workgroupX*this.kernel.workgroupY*this.kernel.workgroupZ&&(e.workgroupResolves.forEach(e=>{this.resolves.push(()=>{e()})}),e.workgroupResolves.length=0,Object.keys(e.values).forEach(t=>{const i=e.values[t];i instanceof JN&&i.synchronize(e.id)})),this.next()})}storageBarrier(e){return new Promise(t=>{e.storageResolves.push(t),e.storageResolves.length===this.kernel.workgroupX*this.kernel.workgroupY*this.kernel.workgroupZ&&(e.storageResolves.forEach(e=>{this.resolves.push(()=>{e()})}),e.storageResolves.length=0,this.kernel.storageArrays.forEach(t=>t.synchronize(e.id))),this.next()})}afterSet(){return new Promise(e=>{this.resolves.push(()=>{e()}),this.next()})}afterGet(){return new Promise(e=>{this.resolves.push(()=>{e()}),this.next()})}}St.register("ParallelExecutor",KN);class ZN{constructor(e,t){this.data=e,this.indeterminateValue=t,this.writeLocalIDs=e.map(()=>[])}async get(e,t){let i;return i=!isFinite(t)||t<0||t>=this.data.length?this.indeterminateValue:this.data[t],await e.afterGet(),i}async set(e,t,i){isFinite(t)&&t>=0&&t<this.data.length&&(this.writeLocalIDs[t].push({local:e.localId,workgroup:e.workgroupId}),this.data[t]=i),await e.afterSet()}synchronize(e){for(let t=this.writeLocalIDs.length-1;t>=0;t--){const i=this.writeLocalIDs[t];for(let t=i.length-1;t>=0;t--){i[t].workgroup.equals(e)&&i.splice(t,1)}}}synchronizeFull(){this.writeLocalIDs.forEach(e=>{e.length=0})}}St.register("ParallelStorageArray",ZN);class JN{constructor(e,t){this.data=e,this.indeterminateValue=t,this.writeLocalIDs=e.map(()=>[])}async get(e,t){let i;return i=!isFinite(t)||t<0||t>=this.data.length?this.indeterminateValue:this.data[t],await e.afterGet(),i}async set(e,t,i){isFinite(t)&&t>=0&&t<this.data.length&&(this.writeLocalIDs[t].push(e.localId),this.data[t]=i),await e.afterSet()}synchronize(e){this.writeLocalIDs.forEach(e=>{e.length=0})}}St.register("ParallelWorkgroupArray",JN);class $N{static getInclusiveToExclusiveScanIndices(e,t){const i=Math.floor(e/t),n=Math.floor(i/t),r=Math.floor(n/t);return new bl(i-1,n-1,r-1)}}St.register("ParallelUtils",$N);class eM{constructor(e,t,i,n,r,s,a,o,l,h,u,c,d){this.renderProgramIndex=e,this.needsFace=t,this.isConstant=i,this.edgesOffset=n,this.numEdges=r,this.minX=s,this.minY=a,this.maxX=o,this.maxY=l,this.minXCount=h,this.minYCount=u,this.maxXCount=c,this.maxYCount=d}withEdgeInfo(e,t){return new eM(this.renderProgramIndex,this.needsFace,this.isConstant,e,t-e,this.minX,this.minY,this.maxX,this.maxY,this.minXCount,this.minYCount,this.maxXCount,this.maxYCount)}toString(){if(isNaN(this.renderProgramIndex))return"RasterChunk[INDETERMINATE]";const e=`counts:${this.minXCount},${this.minYCount},${this.maxXCount},${this.maxYCount}`,t=`bounds:x[${this.minX},${this.maxX}],y[${this.minY},${this.maxY}]`,i=this.needsFace?" needsFace":"";return`RasterChunk[prog:${this.renderProgramIndex} ${e} ${t} numEdges:${this.numEdges} edgesOffset:${this.edgesOffset}${i}]`}writeEncoding(e){e.pushU32(16777215&this.renderProgramIndex|(this.needsFace?1073741824:0)|(this.isConstant?2147483648:0)),e.pushU32(this.edgesOffset),e.pushU32(this.numEdges),e.pushF32(this.minX),e.pushF32(this.minY),e.pushF32(this.maxX),e.pushF32(this.maxY),e.pushI32(this.minXCount),e.pushI32(this.minYCount),e.pushI32(this.maxXCount),e.pushI32(this.maxYCount)}static readEncoding(e,t){const i=new Uint32Array(e,t,eM.ENCODING_BYTE_LENGTH/4),n=new Int32Array(e,t,eM.ENCODING_BYTE_LENGTH/4),r=new Float32Array(e,t,eM.ENCODING_BYTE_LENGTH/4),s=16777215&i[0],a=0!=(1073741824&i[0]),o=0!=(2147483648&i[0]);return new eM(s,a,o,i[1],i[2],r[3],r[4],r[5],r[6],n[7],n[8],n[9],n[10])}static fromArrayBuffer(e){return _.range(0,e.byteLength/eM.ENCODING_BYTE_LENGTH).map(t=>eM.readEncoding(e,t*eM.ENCODING_BYTE_LENGTH))}static validate(e,t,i,n){0}}Ge=eM,_defineProperty(eM,"ENCODING_BYTE_LENGTH",44),_defineProperty(eM,"INDETERMINATE",new Ge(NaN,!1,!1,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN)),St.register("RasterChunk",eM);class tM{constructor(e,t,i,n,r,s,a,o,l,h,u,c){this.clippedChunkIndex=e,this.area=t,this.isFirstEdge=i,this.isLastEdge=n,this.minX=r,this.minY=s,this.maxX=a,this.maxY=o,this.minXCount=l,this.minYCount=h,this.maxXCount=u,this.maxYCount=c}isValid(){return!isNaN(this.clippedChunkIndex)&&-1!==this.clippedChunkIndex}toString(){if(isNaN(this.clippedChunkIndex))return"RasterChunkReduceData[INDETERMINATE]";if(-1===this.clippedChunkIndex)return"RasterChunkReduceData[OUT_OF_RANGE]";const e=this.isFirstEdge?this.isLastEdge?" BOTH":" FIRST":this.isLastEdge?" LAST":"",t=`counts:${this.minXCount},${this.minYCount},${this.maxXCount},${this.maxYCount}`,i="area:"+this.area,n=`bounds:x[${this.minX},${this.maxX}],y[${this.minY},${this.maxY}]`;return`RasterChunkReduceData[clippedChunk:${this.clippedChunkIndex} ${t} ${n} ${i}${e}]`}writeEncoding(e){e.pushU32(805306367&this.clippedChunkIndex|(this.isFirstEdge?1073741824:0)|(this.isLastEdge?2147483648:0)),e.pushF32(this.area),e.pushF32(this.minX),e.pushF32(this.minY),e.pushF32(this.maxX),e.pushF32(this.maxY),e.pushI32(this.minXCount),e.pushI32(this.minYCount),e.pushI32(this.maxXCount),e.pushI32(this.maxYCount)}static readEncoding(e,t){const i=new Uint32Array(e,t,tM.ENCODING_BYTE_LENGTH/4),n=new Int32Array(e,t,tM.ENCODING_BYTE_LENGTH/4),r=new Float32Array(e,t,tM.ENCODING_BYTE_LENGTH/4),s=805306367&i[0],a=0!=(1073741824&i[0]),o=0!=(2147483648&i[0]);return new tM(s,r[1],a,o,r[2],r[3],r[4],r[5],n[6],n[7],n[8],n[9])}static fromArrayBuffer(e){return _.range(0,e.byteLength/tM.ENCODING_BYTE_LENGTH).map(t=>tM.readEncoding(e,t*tM.ENCODING_BYTE_LENGTH))}equals(e){return this.clippedChunkIndex===e.clippedChunkIndex&&Math.abs(this.area-e.area)<1e-6&&this.isFirstEdge===e.isFirstEdge&&this.isLastEdge===e.isLastEdge&&this.minX===e.minX&&this.minY===e.minY&&this.maxX===e.maxX&&this.maxY===e.maxY&&this.minXCount===e.minXCount&&this.minYCount===e.minYCount&&this.maxXCount===e.maxXCount&&this.maxYCount===e.maxYCount}apply(e){const t=e.minXCount+this.minXCount,i=e.minYCount+this.minYCount,n=e.maxXCount+this.maxXCount,r=e.maxYCount+this.maxYCount,s=(e.maxY-e.minY)*(t*e.minX+n*e.maxX),a=0===t&&0===i&&0===r?e.minX+Math.floor(this.minX-e.minX):e.minX,o=0===t&&0===i&&0===n?e.minY+Math.floor(this.minY-e.minY):e.minY,l=0===n&&0===i&&0===r?e.maxX-Math.floor(e.maxX-this.maxX):e.maxX,h=0===t&&0===n&&0===r?e.maxY-Math.floor(e.maxY-this.maxY):e.maxY,u=s+this.area,c=l-a,d=h-o,p=u<=1e-8,m=u>=c*d-1e-8,g=p||m||c<=1+1e-8&&d<=1+1e-8;return new lM(e.renderProgramIndex,e.needsFace,e.isConstant,!g,g&&!p,m,u,a,o,l,h,t,i,n,r)}static combine(e,t){return e.clippedChunkIndex!==t.clippedChunkIndex?t:new tM(e.clippedChunkIndex,e.area+t.area,e.isFirstEdge,t.isLastEdge,Math.min(e.minX,t.minX),Math.min(e.minY,t.minY),Math.max(e.maxX,t.maxX),Math.max(e.maxY,t.maxY),e.minXCount+t.minXCount,e.minYCount+t.minYCount,e.maxXCount+t.maxXCount,e.maxYCount+t.maxYCount)}}Fe=tM,_defineProperty(tM,"ENCODING_BYTE_LENGTH",40),_defineProperty(tM,"INDETERMINATE",new Fe(NaN,NaN,!1,!1,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN)),_defineProperty(tM,"OUT_OF_RANGE",new Fe(-1,NaN,!1,!1,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN)),St.register("RasterChunkReduceData",tM);class iM{constructor(e,t){this.min=e,this.max=t}isFirstEdge(){return this.min.isFirstEdge}isLastEdge(){return this.min.isLastEdge}static combine(e,t){return new iM(tM.combine(e.min,t.min),tM.combine(e.max,t.max))}toStrings(){return["min: "+this.min.toString(),"max: "+this.max.toString()]}writeEncoding(e){this.min.writeEncoding(e),this.max.writeEncoding(e)}static readEncoding(e,t){return new iM(tM.readEncoding(e,t),tM.readEncoding(e,t+tM.ENCODING_BYTE_LENGTH))}static fromArrayBuffer(e){return _.range(0,e.byteLength/iM.ENCODING_BYTE_LENGTH).map(t=>iM.readEncoding(e,t*iM.ENCODING_BYTE_LENGTH))}}ze=iM,_defineProperty(iM,"ENCODING_BYTE_LENGTH",2*tM.ENCODING_BYTE_LENGTH),_defineProperty(iM,"INDETERMINATE",new ze(tM.INDETERMINATE,tM.INDETERMINATE)),_defineProperty(iM,"OUT_OF_RANGE",new ze(tM.OUT_OF_RANGE,tM.OUT_OF_RANGE)),St.register("RasterChunkReducePair",iM);class nM{constructor(e,t,i,n){this.leftMin=e,this.leftMax=t,this.rightMin=i,this.rightMax=n}static combine(e,t){return new nM(e.leftMin.clippedChunkIndex===t.leftMin.clippedChunkIndex?tM.combine(e.leftMin,t.leftMin):e.leftMin,e.leftMax.clippedChunkIndex===t.leftMax.clippedChunkIndex?tM.combine(e.leftMax,t.leftMax):e.leftMax,tM.combine(e.rightMin,t.rightMin),tM.combine(e.rightMax,t.rightMax))}toStrings(){return["leftMin: "+this.leftMin.toString(),"rightMin: "+this.rightMin.toString(),"leftMax: "+this.leftMax.toString(),"rightMax: "+this.rightMax.toString()]}writeEncoding(e){this.leftMin.writeEncoding(e),this.leftMax.writeEncoding(e),this.rightMin.writeEncoding(e),this.rightMax.writeEncoding(e)}static readEncoding(e,t){return new nM(tM.readEncoding(e,t),tM.readEncoding(e,t+tM.ENCODING_BYTE_LENGTH),tM.readEncoding(e,t+2*tM.ENCODING_BYTE_LENGTH),tM.readEncoding(e,t+3*tM.ENCODING_BYTE_LENGTH))}static fromArrayBuffer(e){return _.range(0,e.byteLength/nM.ENCODING_BYTE_LENGTH).map(t=>nM.readEncoding(e,t*nM.ENCODING_BYTE_LENGTH))}}Ue=nM,_defineProperty(nM,"ENCODING_BYTE_LENGTH",4*tM.ENCODING_BYTE_LENGTH),_defineProperty(nM,"INDETERMINATE",new Ue(tM.INDETERMINATE,tM.INDETERMINATE,tM.INDETERMINATE,tM.INDETERMINATE)),_defineProperty(nM,"OUT_OF_RANGE",new Ue(tM.OUT_OF_RANGE,tM.OUT_OF_RANGE,tM.OUT_OF_RANGE,tM.OUT_OF_RANGE)),St.register("RasterChunkReduceQuad",nM);class rM{constructor(e,t,i,n,r,s,a,o,l,h,u,c,d){this.renderProgramIndex=e,this.edgesOffset=t,this.numEdges=i,this.isFullArea=n,this.area=r,this.minX=s,this.minY=a,this.maxX=o,this.maxY=l,this.minXCount=h,this.minYCount=u,this.maxXCount=c,this.maxYCount=d}withEdgeInfo(e,t){return new rM(this.renderProgramIndex,this.isFullArea?0:e,this.isFullArea?0:t-e,this.isFullArea,this.area,this.minX,this.minY,this.maxX,this.maxY,this.isFullArea?-1:this.minXCount,this.isFullArea?1:this.minYCount,this.isFullArea?1:this.maxXCount,this.isFullArea?-1:this.maxYCount)}toString(){if(isNaN(this.renderProgramIndex))return"RasterCompleteChunk[INDETERMINATE]";const e=`counts:${this.minXCount},${this.minYCount},${this.maxXCount},${this.maxYCount}`,t=`bounds:x[${this.minX},${this.maxX}],y[${this.minY},${this.maxY}]`,i="area:"+this.area,n=this.isFullArea?" fullArea":"";return`RasterCompleteChunk[prog:${this.renderProgramIndex} ${e} ${t} numEdges:${this.numEdges} edgesOffset:${this.edgesOffset} ${i}${n}]`}writeEncoding(e){e.pushU32(16777215&this.renderProgramIndex|(this.isFullArea?536870912:0)),e.pushU32(this.edgesOffset),e.pushU32(this.numEdges),e.pushF32(this.area),e.pushF32(this.minX),e.pushF32(this.minY),e.pushF32(this.maxX),e.pushF32(this.maxY),e.pushI32(this.minXCount),e.pushI32(this.minYCount),e.pushI32(this.maxXCount),e.pushI32(this.maxYCount)}static readEncoding(e,t){const i=new Uint32Array(e,t,rM.ENCODING_BYTE_LENGTH/4),n=new Int32Array(e,t,rM.ENCODING_BYTE_LENGTH/4),r=new Float32Array(e,t,rM.ENCODING_BYTE_LENGTH/4),s=16777215&i[0],a=0!=(536870912&i[0]);return new rM(s,i[1],i[2],a,r[3],r[4],r[5],r[6],r[7],n[8],n[9],n[10],n[11])}static fromArrayBuffer(e){return _.range(0,e.byteLength/rM.ENCODING_BYTE_LENGTH).map(t=>rM.readEncoding(e,t*rM.ENCODING_BYTE_LENGTH))}static validate(e,t,i,n){0}}We=rM,_defineProperty(rM,"ENCODING_BYTE_LENGTH",48),_defineProperty(rM,"INDETERMINATE",new We(NaN,NaN,NaN,!1,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN)),St.register("RasterCompleteChunk",rM);class sM{constructor(e,t,i,n,r){this.chunkIndex=e,this.isFirstEdge=t,this.isLastEdge=i,this.startPoint=n,this.endPoint=r}toString(){if(isNaN(this.chunkIndex))return"RasterEdge[INDETERMINATE]";const e=this.isFirstEdge?this.isLastEdge?" BOTH":" FIRST":this.isLastEdge?" LAST":"";return`RasterEdge[chunk:${this.chunkIndex} ${this.startPoint.x},${this.startPoint.y} => ${this.endPoint.x},${this.endPoint.y}${e}]`}writeEncoding(e){e.pushU32(805306367&this.chunkIndex|(this.isFirstEdge?1073741824:0)|(this.isLastEdge?2147483648:0)),e.pushF32(this.startPoint.x),e.pushF32(this.startPoint.y),e.pushF32(this.endPoint.x),e.pushF32(this.endPoint.y)}static readEncoding(e,t){const i=new Uint32Array(e,t,sM.ENCODING_BYTE_LENGTH/4),n=new Float32Array(e,t,sM.ENCODING_BYTE_LENGTH/4),r=805306367&i[0],s=0!=(1073741824&i[0]),a=0!=(2147483648&i[0]);return new sM(r,s,a,new al(n[1],n[2]),new al(n[3],n[4]))}static fromArrayBuffer(e){return _.range(0,e.byteLength/sM.ENCODING_BYTE_LENGTH).map(t=>sM.readEncoding(e,t*sM.ENCODING_BYTE_LENGTH))}}Xe=sM,_defineProperty(sM,"ENCODING_BYTE_LENGTH",20),_defineProperty(sM,"INDETERMINATE",new Xe(NaN,!1,!1,new al(NaN,NaN),new al(NaN,NaN))),St.register("RasterEdge",sM);class aM{constructor(e,t,i,n,r,s,a){this.clippedChunkIndex=e,this.point0=t,this.point1=i,this.point2=n,this.point3=r,this.isFirstEdge=s,this.isLastEdge=a}getCount(){return(this.point0.equals(this.point1)?0:1)+(this.point1.equals(this.point2)?0:1)+(this.point2.equals(this.point3)?0:1)}getArea(){return.5*((this.point1.x+this.point0.x)*(this.point1.y-this.point0.y)+(this.point2.x+this.point1.x)*(this.point2.y-this.point1.y)+(this.point3.x+this.point2.x)*(this.point3.y-this.point2.y))}toString(){if(isNaN(this.clippedChunkIndex))return"RasterEdgeClip[INDETERMINATE]";const e=this.isFirstEdge?this.isLastEdge?" BOTH":" FIRST":this.isLastEdge?" LAST":"",t=`${this.point0.x},${this.point0.y} => ${this.point1.x},${this.point1.y} => ${this.point2.x},${this.point2.y} => ${this.point3.x},${this.point3.y}`;return`RasterEdgeClip[clippedChunk:${this.clippedChunkIndex} ${t}${e}]`}writeEncoding(e){e.pushU32(805306367&this.clippedChunkIndex|(this.isFirstEdge?1073741824:0)|(this.isLastEdge?2147483648:0)),e.pushF32(this.point0.x),e.pushF32(this.point0.y),e.pushF32(this.point1.x),e.pushF32(this.point1.y),e.pushF32(this.point2.x),e.pushF32(this.point2.y),e.pushF32(this.point3.x),e.pushF32(this.point3.y)}static readEncoding(e,t){const i=new Uint32Array(e,t,aM.ENCODING_BYTE_LENGTH/4),n=new Float32Array(e,t,aM.ENCODING_BYTE_LENGTH/4),r=805306367&i[0],s=0!=(1073741824&i[0]),a=0!=(2147483648&i[0]);return new aM(r,new al(n[1],n[2]),new al(n[3],n[4]),new al(n[5],n[6]),new al(n[7],n[8]),s,a)}static fromArrayBuffer(e){return _.range(0,e.byteLength/aM.ENCODING_BYTE_LENGTH).map(t=>aM.readEncoding(e,t*aM.ENCODING_BYTE_LENGTH))}}je=aM,_defineProperty(aM,"ENCODING_BYTE_LENGTH",36),_defineProperty(aM,"INDETERMINATE",new je(NaN,new al(NaN,NaN),new al(NaN,NaN),new al(NaN,NaN),new al(NaN,NaN),!1,!1)),St.register("RasterEdgeClip",aM);class oM{constructor(e,t){this.startPoint=e,this.endPoint=t}toString(){return isNaN(this.startPoint.x)?"RasterCompleteEdge[INDETERMINATE]":`RasterCompleteEdge[${this.startPoint.x},${this.startPoint.y} => ${this.endPoint.x},${this.endPoint.y}]`}writeEncoding(e){e.pushF32(this.startPoint.x),e.pushF32(this.startPoint.y),e.pushF32(this.endPoint.x),e.pushF32(this.endPoint.y)}static readEncoding(e,t){const i=new Float32Array(e,t,oM.ENCODING_BYTE_LENGTH/4);return new oM(new al(i[0],i[1]),new al(i[2],i[3]))}static fromArrayBuffer(e){return _.range(0,e.byteLength/oM.ENCODING_BYTE_LENGTH).map(t=>oM.readEncoding(e,t*oM.ENCODING_BYTE_LENGTH))}}Qe=oM,_defineProperty(oM,"ENCODING_BYTE_LENGTH",16),_defineProperty(oM,"INDETERMINATE",new Qe(new al(NaN,NaN),new al(NaN,NaN))),St.register("RasterCompleteEdge",oM);class lM{constructor(e,t,i,n,r,s,a,o,l,h,u,c,d,p,m){this.renderProgramIndex=e,this.needsFace=t,this.isConstant=i,this.isReducible=n,this.isComplete=r,this.isFullArea=s,this.area=a,this.minX=o,this.minY=l,this.maxX=h,this.maxY=u,this.minXCount=c,this.minYCount=d,this.maxXCount=p,this.maxYCount=m}needsCompleteOutputSplit(){return this.isComplete&&this.isFullArea&&!this.isConstant}outputSplitCount(){return(this.maxX-this.minX)*(this.maxY-this.minY)}getSplitReduceData(){return new hM(this.isReducible?1:0,this.isComplete?this.needsCompleteOutputSplit()?this.outputSplitCount():1:0)}isExportingCompleteEdges(){return this.isComplete&&!this.isFullArea&&this.needsFace}toString(){if(isNaN(this.renderProgramIndex))return"RasterClippedChunk[INDETERMINATE]";const e=`counts:${this.minXCount},${this.minYCount},${this.maxXCount},${this.maxYCount}`,t=`bounds:x[${this.minX},${this.maxX}],y[${this.minY},${this.maxY}]`,i=this.needsFace?" needsFace":"",n="area:"+this.area,r=this.isReducible?" reducible":"",s=this.isComplete?" complete":"",a=this.isFullArea?" fullArea":"";return`RasterClippedChunk[prog:${this.renderProgramIndex} ${e} ${t} ${n}${r}${s}${a}${i}]`}writeEncoding(e){e.pushU32(16777215&this.renderProgramIndex|(this.isReducible?134217728:0)|(this.isComplete?268435456:0)|(this.isFullArea?536870912:0)|(this.needsFace?1073741824:0)|(this.isConstant?2147483648:0)),e.pushF32(this.area),e.pushF32(this.minX),e.pushF32(this.minY),e.pushF32(this.maxX),e.pushF32(this.maxY),e.pushI32(this.minXCount),e.pushI32(this.minYCount),e.pushI32(this.maxXCount),e.pushI32(this.maxYCount)}static readEncoding(e,t){const i=new Uint32Array(e,t,lM.ENCODING_BYTE_LENGTH/4),n=new Int32Array(e,t,lM.ENCODING_BYTE_LENGTH/4),r=new Float32Array(e,t,lM.ENCODING_BYTE_LENGTH/4),s=16777215&i[0],a=0!=(134217728&i[0]),o=0!=(268435456&i[0]),l=0!=(536870912&i[0]),h=0!=(1073741824&i[0]),u=0!=(2147483648&i[0]);return new lM(s,h,u,a,o,l,r[1],r[2],r[3],r[4],r[5],n[6],n[7],n[8],n[9])}static fromArrayBuffer(e){return _.range(0,e.byteLength/lM.ENCODING_BYTE_LENGTH).map(t=>lM.readEncoding(e,t*lM.ENCODING_BYTE_LENGTH))}}Ke=lM,_defineProperty(lM,"ENCODING_BYTE_LENGTH",40),_defineProperty(lM,"INDETERMINATE",new Ke(NaN,!1,!1,!1,!1,!1,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN)),_defineProperty(lM,"DISCARDABLE",new Ke(0,!1,!1,!1,!1,!1,0,0,0,0,0,0,0,0,0)),St.register("RasterClippedChunk",lM);class hM{constructor(e,t){this.numReducible=e,this.numComplete=t}toString(){return isNaN(this.numReducible)?"RasterSplitReduceData[INDETERMINATE]":`RasterSplitReduceData[reduce:${this.numReducible} complete:${this.numComplete}]`}writeEncoding(e){e.pushU32(this.numReducible),e.pushU32(this.numComplete)}static readEncoding(e,t){const i=new Uint32Array(e,t,hM.ENCODING_BYTE_LENGTH/4);return new hM(i[0],i[1])}static fromArrayBuffer(e){return _.range(0,e.byteLength/hM.ENCODING_BYTE_LENGTH).map(t=>hM.readEncoding(e,t*hM.ENCODING_BYTE_LENGTH))}static combine(e,t){return new hM(e.numReducible+t.numReducible,e.numComplete+t.numComplete)}static from(e,t,i){const n=t.isReducible,r=i?e.getCount():0;return new hM(n?r:0,t.isExportingCompleteEdges()?r:0)}}Ze=hM,_defineProperty(hM,"ENCODING_BYTE_LENGTH",8),_defineProperty(hM,"INDETERMINATE",new Ze(NaN,NaN)),_defineProperty(hM,"IDENTITY",new Ze(0,0)),St.register("RasterSplitReduceData",hM);class uM{static async dispatch(e,t,i,n){const r=new XN(async e=>{await e.start();const r=e.globalId.x;if(r<i){const i=await t.get(e,r),s=2*r,a=2*r+1,o=i.maxX-i.minX,l=i.maxY-i.minY;let h,u;if(i.numEdges>0){const e=o>l,t=e?i.minX+Math.floor(.5*o):i.minY+Math.floor(.5*l);h=new lM(i.renderProgramIndex,i.needsFace,i.isConstant,!1,!1,!1,-1,i.minX,i.minY,e?t:i.maxX,e?i.maxY:t,i.minXCount,i.minYCount,i.maxXCount,i.maxYCount),u=new lM(i.renderProgramIndex,i.needsFace,i.isConstant,!1,!1,!1,-1,e?t:i.minX,e?i.minY:t,i.maxX,i.maxY,i.minXCount,i.minYCount,i.maxXCount,i.maxYCount)}else{h=i.minXCount<0&&i.minYCount>0&&i.maxXCount>0&&i.maxYCount<0?new lM(i.renderProgramIndex,i.needsFace,i.isConstant,!1,!0,!0,o*l,i.minX,i.minY,i.maxX,i.maxY,-1,1,1,-1):lM.DISCARDABLE,u=lM.DISCARDABLE}await n.set(e,s,h),await n.set(e,a,u)}},()=>({}),[t,n],e);await new KN(r).dispatch(Math.ceil(i/e))}static validate(e,t,i,n){0}}St.register("ParallelRasterInitialChunk",uM);class cM{static async dispatch(e,t,i,n,r,s,a,o){const l=Math.log2(e),h=new XN(async h=>{await h.start();const u=h.globalId.x,c=u<n,d=await i.get(h,u),p=await t.get(h,d.chunkIndex);c&&0===h.localId.x&&await h.workgroupValues.firstChunkIndex.set(h,0,d.chunkIndex);const m=p.edgesOffset+u,g=p.edgesOffset+p.numEdges+u,f=2*d.chunkIndex,y=2*d.chunkIndex+1,E=p.maxX-p.minX,v=p.maxY-p.minY,A=E>v,b=A?p.minX+Math.floor(.5*E):p.minY+Math.floor(.5*v),S=new al(0,0),_=new al(0,0),x=new al(0,0),w=new al(0,0),T=new al(0,0),P=new al(0,0),C=new al(0,0),V=new al(0,0);let R=0,N=0,M=!0,k=!0;const L=.5*(A?p.minY+p.maxY:p.minX+p.maxX),I=d.startPoint,B=d.endPoint,D=Math.sign((A?I.x:I.y)-b),O=Math.sign((A?B.x:B.y)-b),q=(A?I.y:I.x)<L,Y=(A?B.y:B.x)<L;if(D===O)-1===D?(S.set(d.startPoint),_.set(d.endPoint),x.set(d.endPoint),w.set(d.endPoint),k=!1,q!==Y&&(N+=q?1:-1)):1===D?(T.set(d.startPoint),P.set(d.endPoint),C.set(d.endPoint),V.set(d.endPoint),M=!1,q!==Y&&(R+=q?1:-1)):0===D&&(S.set(d.startPoint),_.set(d.endPoint),x.set(d.endPoint),w.set(d.endPoint),T.set(d.startPoint),P.set(d.endPoint),C.set(d.endPoint),V.set(d.endPoint));else{const e=A?I.y+(B.y-I.y)*(b-I.x)/(B.x-I.x):I.x+(B.x-I.x)*(b-I.y)/(B.y-I.y),t=A?new al(b,e):new al(e,b),i=-1===D,n=1===D,r=-1===O,s=1===O,a=i?I:t,o=r?B:t,l=n?I:t,h=s?B:t,u=A?p.minY:p.minX,c=A?p.maxY:p.maxX,d=q?u:c,m=Y?u:c;S.set(n?A?new al(b,d):new al(d,b):a),_.set(a),x.set(o),w.set(s?A?new al(b,m):new al(m,b):o),T.set(i?A?new al(b,d):new al(d,b):l),P.set(l),C.set(h),V.set(r?A?new al(b,m):new al(m,b):h)}const H=new aM(f,S,_,x,w,d.isFirstEdge,d.isLastEdge),G=new aM(y,T,P,C,V,d.isFirstEdge,d.isLastEdge),F=H.getArea(),z=G.getArea();let U=M?Math.min(S.x,_.x,x.x,w.x):1e10,W=M?Math.min(S.y,_.y,x.y,w.y):1e10,X=M?Math.max(S.x,_.x,x.x,w.x):-1e10,j=M?Math.max(S.y,_.y,x.y,w.y):-1e10;0!==R&&(A?(X=Math.max(X,b),W=Math.min(W,p.minY),j=Math.max(j,p.maxY)):(j=Math.max(j,b),U=Math.min(U,p.minX),X=Math.max(X,p.maxX)));let Q,K=k?Math.min(T.x,P.x,C.x,V.x):1e10,Z=k?Math.min(T.y,P.y,C.y,V.y):1e10,J=k?Math.max(T.x,P.x,C.x,V.x):-1e10,$=k?Math.max(T.y,P.y,C.y,V.y):-1e10;0!==N&&(A?(K=Math.min(K,b),Z=Math.min(Z,p.minY),$=Math.max($,p.maxY)):(Z=Math.min(Z,b),K=Math.min(K,p.minX),J=Math.max(J,p.maxX)));const ee=async()=>{const e=await r.get(h,Q.min.clippedChunkIndex),t=await r.get(h,Q.max.clippedChunkIndex);await r.set(h,Q.min.clippedChunkIndex,Q.min.apply(e)),await r.set(h,Q.max.clippedChunkIndex,Q.max.apply(t))};c?(await s.set(h,m,H),await s.set(h,g,G),Q=new iM(A?new tM(f,F,d.isFirstEdge,d.isLastEdge,U,W,X,j,0,0,R,0):new tM(f,F,d.isFirstEdge,d.isLastEdge,U,W,X,j,0,0,0,R),A?new tM(y,z,d.isFirstEdge,d.isLastEdge,K,Z,J,$,N,0,0,0):new tM(y,z,d.isFirstEdge,d.isLastEdge,K,Z,J,$,0,N,0,0)),Q.isFirstEdge()&&Q.isLastEdge()&&await ee()):Q=iM.OUT_OF_RANGE,await h.workgroupValues.reduces.set(h,h.localId.x,Q);const te=c&&Q.isLastEdge()&&!Q.isFirstEdge()?Q.min.clippedChunkIndex:-5;await o.set(h,h.globalId.x,Q);for(let e=0;e<l;e++){await h.workgroupBarrier();const t=1<<e;if(h.localId.x>=t){const e=await h.workgroupValues.reduces.get(h,h.localId.x-t);Q=iM.combine(e,Q),te===e.min.clippedChunkIndex&&Q.isFirstEdge()&&await ee()}await h.workgroupBarrier(),await h.workgroupValues.reduces.set(h,h.localId.x,Q)}const ie=await h.workgroupValues.firstChunkIndex.get(h,0);if(c&&d.chunkIndex===ie&&(h.workgroupValues.atomicMaxFirstChunkIndex=Math.max(h.workgroupValues.atomicMaxFirstChunkIndex,h.localId.x)),await h.workgroupBarrier(),c&&0===h.localId.x){const t=Math.min(n-1-h.workgroupId.x*e,e-1),i=await h.workgroupValues.reduces.get(h,h.workgroupValues.atomicMaxFirstChunkIndex),r=await h.workgroupValues.reduces.get(h,t);await a.set(h,h.workgroupId.x,new nM(i.min,i.max,r.min,r.max))}},()=>({reduces:new JN(_.range(0,e).map(()=>iM.INDETERMINATE),iM.INDETERMINATE),firstChunkIndex:new JN([0],NaN),atomicMaxFirstChunkIndex:0}),[t,i,r,s,a,o],e);await new KN(h).dispatch(Math.ceil(n/e))}static validate(e,t,i,n,r,s,a,o){0}}St.register("ParallelRasterInitialClip",cM);class dM{static async dispatch(e,t,i,n,r){const s=Math.log2(e),a=new XN(async a=>{await a.start();const o=a.globalId.x,l=o<i;let h=l?await t.get(a,o):nM.OUT_OF_RANGE;const u=h.leftMin.clippedChunkIndex;l&&0===a.localId.x&&await a.workgroupValues.firstClippedChunkIndex.set(a,0,u),await a.workgroupValues.reduces.set(a,a.localId.x,h);const c=l&&h.leftMin.isLastEdge&&!h.leftMin.isFirstEdge?h.leftMin.clippedChunkIndex:-5;for(let e=0;e<s;e++){await a.workgroupBarrier();const t=1<<e;if(a.localId.x>=t){const e=await a.workgroupValues.reduces.get(a,a.localId.x-t),i=h;if(h=nM.combine(e,h),c===e.rightMin.clippedChunkIndex&&e.rightMin.isFirstEdge){const t=tM.combine(e.rightMin,i.leftMin),r=tM.combine(e.rightMax,i.leftMax),s=await n.get(a,t.clippedChunkIndex),o=await n.get(a,r.clippedChunkIndex);await n.set(a,t.clippedChunkIndex,t.apply(s)),await n.set(a,r.clippedChunkIndex,r.apply(o))}}await a.workgroupBarrier(),await a.workgroupValues.reduces.set(a,a.localId.x,h)}const d=await a.workgroupValues.firstClippedChunkIndex.get(a,0);if(l&&u===d&&(a.workgroupValues.atomicMaxFirstReduceIndex=Math.max(a.workgroupValues.atomicMaxFirstReduceIndex,a.localId.x)),await a.workgroupBarrier(),l&&0===a.localId.x){const t=Math.min(i-1-a.workgroupId.x*e,e-1),n=await a.workgroupValues.reduces.get(a,a.workgroupValues.atomicMaxFirstReduceIndex),s=await a.workgroupValues.reduces.get(a,t);await r.set(a,a.workgroupId.x,new nM(n.leftMin,n.leftMax,s.rightMin,s.rightMax))}},()=>({reduces:new JN(_.range(0,e).map(()=>nM.INDETERMINATE),nM.INDETERMINATE),firstClippedChunkIndex:new JN([0],NaN),atomicMaxFirstReduceIndex:0}),[n,t,r],e);await new KN(a).dispatch(Math.ceil(i/e))}}St.register("ParallelRasterChunkReduce",dM);class pM{static async dispatch(e,t,i,n,r,s){const a=Math.log2(e),o=new XN(async o=>{await o.start();const l=o.globalId.x<n,h=await i.get(o,o.globalId.x),u=await t.get(o,h.clippedChunkIndex);let c=hM.from(h,u,l);await o.workgroupValues.reduces.set(o,o.localId.x,c),await r.set(o,o.globalId.x,c);for(let e=0;e<a;e++){await o.workgroupBarrier();const t=1<<e;if(o.localId.x>=t){const e=await o.workgroupValues.reduces.get(o,o.localId.x-t);c=hM.combine(e,c)}await o.workgroupBarrier(),await o.workgroupValues.reduces.set(o,o.localId.x,c)}o.localId.x===e-1&&await s.set(o,o.workgroupId.x,c)},()=>({reduces:new JN(_.range(0,e).map(()=>hM.INDETERMINATE),hM.INDETERMINATE)}),[t,i,r,s],e);await new KN(o).dispatch(Math.ceil(n/e))}}St.register("ParallelRasterInitialEdgeReduce",pM);class mM{static async dispatch(e,t,i,n){const r=Math.log2(e),s=new XN(async s=>{await s.start();let a=s.globalId.x<t?await i.get(s,s.globalId.x):hM.IDENTITY;await s.workgroupValues.reduces.set(s,s.localId.x,a);for(let e=0;e<r;e++){await s.workgroupBarrier();const t=1<<e;if(s.localId.x>=t){const e=await s.workgroupValues.reduces.get(s,s.localId.x-t);a=hM.combine(e,a)}await s.workgroupBarrier(),await s.workgroupValues.reduces.set(s,s.localId.x,a)}const o=s.localId.x===e-1;o&&await n.set(s,s.workgroupId.x,a),await i.set(s,s.globalId.x,o?hM.IDENTITY:a)},()=>({reduces:new JN(_.range(0,e).map(()=>hM.INDETERMINATE),hM.INDETERMINATE)}),[i,n],e);await new KN(s).dispatch(Math.ceil(t/e))}}St.register("ParallelRasterSplitReduce",mM);const gM=new al(NaN,NaN);class fM{static async dispatch(e,t,i,n,r,s,a,o,l,h,u){const c=Math.log2(e),d=new XN(async d=>{await d.start();const p=d.globalId.x,m=p<a;if(0===d.localId.x){const t=$N.getInclusiveToExclusiveScanIndices(p,e),i=t.x>=0?await n.get(d,t.x):hM.IDENTITY,a=t.y>=0?await r.get(d,t.y):hM.IDENTITY,o=t.z>=0?await s.get(d,t.z):hM.IDENTITY,l=o.numReducible+a.numReducible+i.numReducible,h=o.numComplete+a.numComplete+i.numComplete;await d.workgroupValues.baseIndices.set(d,0,l),await d.workgroupValues.baseIndices.set(d,1,h)}const g=await i.get(d,d.globalId.x),f=await t.get(d,g.clippedChunkIndex),y=hM.from(g,f,m);let E=y;await d.workgroupValues.reduces.set(d,d.localId.x,E);for(let e=0;e<c;e++){await d.workgroupBarrier();const t=1<<e;if(d.localId.x>=t){const e=await d.workgroupValues.reduces.get(d,d.localId.x-t);E=hM.combine(e,E)}await d.workgroupBarrier(),await d.workgroupValues.reduces.set(d,d.localId.x,E)}if(m){const e=await d.workgroupValues.baseIndices.get(d,0),t=await d.workgroupValues.baseIndices.get(d,1);await u.set(d,d.globalId.x,new hM(e+E.numReducible-y.numReducible,t+E.numComplete-y.numComplete));const i=[gM,gM,gM],n=[gM,gM,gM];let r=0;g.point0.equals(g.point1)||(i[r]=g.point0,n[r]=g.point1,r++),g.point1.equals(g.point2)||(i[r]=g.point1,n[r]=g.point2,r++),g.point2.equals(g.point3)||(i[r]=g.point2,n[r]=g.point3,r++);const s=f.isReducible,a=f.isExportingCompleteEdges();let c=0;s&&(c=e+E.numReducible-y.numReducible,r>0&&(await o.set(d,c,new sM(g.clippedChunkIndex,!1,!1,i[0],n[0])),r>1&&(await o.set(d,c+1,new sM(g.clippedChunkIndex,!1,!1,i[1],n[1])),r>2&&await o.set(d,c+2,new sM(g.clippedChunkIndex,!1,!1,i[2],n[2]))))),a&&(c=t+E.numComplete-y.numComplete,r>0&&(await l.set(d,c,new oM(i[0],n[0])),r>1&&(await l.set(d,c+1,new oM(i[1],n[1])),r>2&&await l.set(d,c+2,new oM(i[2],n[2]))))),(s||a)&&(g.isFirstEdge&&await h.set(d,2*g.clippedChunkIndex,c),g.isLastEdge&&await h.set(d,2*g.clippedChunkIndex+1,c+r))}},()=>({reduces:new JN(_.range(0,e).map(()=>hM.INDETERMINATE),hM.INDETERMINATE),baseIndices:new JN([0,0],0)}),[t,i,n,r,s,o,l,h,u],e);await new KN(d).dispatch(Math.ceil(a/e))}}St.register("ParallelRasterEdgeScan",fM);class yM{static async dispatch(e,t,i,n,r){const s=Math.log2(e),a=new XN(async a=>{await a.start();const o=a.globalId.x,l=o<i,h=await t.get(a,o);let u=l?h.getSplitReduceData():hM.IDENTITY;await a.workgroupValues.reduces.set(a,a.localId.x,u),await n.set(a,a.globalId.x,u);for(let e=0;e<s;e++){await a.workgroupBarrier();const t=1<<e;if(a.localId.x>=t){const e=await a.workgroupValues.reduces.get(a,a.localId.x-t);u=hM.combine(e,u)}await a.workgroupBarrier(),await a.workgroupValues.reduces.set(a,a.localId.x,u)}a.localId.x===e-1&&await r.set(a,a.workgroupId.x,u)},()=>({reduces:new JN(_.range(0,e).map(()=>hM.INDETERMINATE),hM.INDETERMINATE)}),[t,n,r],e);await new KN(a).dispatch(Math.ceil(i/e))}}St.register("ParallelRasterInitialSplitReduce",yM);class EM{static async dispatch(e,t,i,n,r,s,a,o,l,h){const u=Math.log2(e),c=new XN(async c=>{await c.start();const d=c.globalId.x,p=d<s;if(0===c.localId.x){const t=$N.getInclusiveToExclusiveScanIndices(d,e),s=t.x>=0?await i.get(c,t.x):hM.IDENTITY,a=t.y>=0?await n.get(c,t.y):hM.IDENTITY,o=t.z>=0?await r.get(c,t.z):hM.IDENTITY,l=o.numReducible+a.numReducible+s.numReducible,h=o.numComplete+a.numComplete+s.numComplete;await c.workgroupValues.baseIndices.set(c,0,l),await c.workgroupValues.baseIndices.set(c,1,h)}const m=await t.get(c,d),g=p?m.getSplitReduceData():hM.IDENTITY;let f=g;await c.workgroupValues.reduces.set(c,c.localId.x,f);for(let e=0;e<u;e++){await c.workgroupBarrier();const t=1<<e;if(c.localId.x>=t){const e=await c.workgroupValues.reduces.get(c,c.localId.x-t);f=hM.combine(e,f)}await c.workgroupBarrier(),await c.workgroupValues.reduces.set(c,c.localId.x,f)}if(await h.set(c,c.globalId.x,f),p){const e=await c.workgroupValues.baseIndices.get(c,0),t=await c.workgroupValues.baseIndices.get(c,1);let i=0;if(m.isReducible&&(i=e+f.numReducible-g.numReducible,await l.set(c,d,i),await a.set(c,i,new eM(m.renderProgramIndex,m.needsFace,m.isConstant,-1,-1,m.minX,m.minY,m.maxX,m.maxY,m.minXCount,m.minYCount,m.maxXCount,m.maxYCount))),m.isComplete)if(i=t+f.numComplete-g.numComplete,await l.set(c,d,i),m.needsCompleteOutputSplit()){const e=m.outputSplitCount(),t=m.maxX-m.minX;for(let n=0;n<e;n++){const e=m.minX+n%t,r=m.minY+Math.floor(n/t);await o.set(c,i+n,new rM(m.renderProgramIndex,0,0,m.isFullArea,1,e,r,e+1,r+1,-1,1,1,-1))}}else await o.set(c,i,new rM(m.renderProgramIndex,-1,-1,m.isFullArea,m.area,m.minX,m.minY,m.maxX,m.maxY,m.minXCount,m.minYCount,m.maxXCount,m.maxYCount))}},()=>({reduces:new JN(_.range(0,e).map(()=>hM.INDETERMINATE),hM.INDETERMINATE),baseIndices:new JN([0,0],0)}),[t,i,n,r,a,o,h],e);await new KN(c).dispatch(Math.ceil(s/e))}}St.register("ParallelRasterSplitScan",EM);class vM{static async dispatch(e,t,i,n,r,s,a){const o=new XN(async e=>{await e.start();const o=e.globalId.x;if(o<r){const r=await n.get(e,o),l=await t.get(e,o),h=await i.get(e,2*o),u=await i.get(e,2*o+1);if(r.isReducible){const t=await s.get(e,l);await s.set(e,l,t.withEdgeInfo(h,u))}if(r.isComplete){const t=await a.get(e,l);await a.set(e,l,t.withEdgeInfo(r.needsFace?h:0,r.needsFace?u:0))}}},()=>({reduces:new JN(_.range(0,e).map(()=>hM.INDETERMINATE),hM.INDETERMINATE),baseIndices:new JN([0,0],0)}),[t,i,s,a,n],e);await new KN(o).dispatch(Math.ceil(r/e))}}St.register("ParallelRasterChunkIndexPatch",vM);class AM{static async dispatch(e,t,i,n,r){const s=new XN(async e=>{await e.start();const s=e.globalId.x;if(s<n){const n=await r.get(e,s),a=n.chunkIndex,o=await t.get(e,a),l=await i.get(e,2*a),h=await i.get(e,2*a+1);await r.set(e,s,new sM(o,s===l,s===h-1,n.startPoint,n.endPoint))}},()=>({reduces:new JN(_.range(0,e).map(()=>hM.INDETERMINATE),hM.INDETERMINATE),baseIndices:new JN([0,0],0)}),[t,i,r],e);await new KN(s).dispatch(Math.ceil(n/e))}}St.register("ParallelRasterEdgeIndexPatch",AM);class bM{static getTestRawInputChunks(){return[new eM(0,!1,!0,0,5,0,0,10,10,-1,1,0,0),new eM(1,!1,!1,5,3,10,0,20,10,0,1,0,0),new eM(2,!0,!1,8,1,9,8,10,10,-1,1,0,0),new eM(3,!0,!1,9,4,7,9,9,10,0,0,0,0),new eM(4,!0,!1,13,6,10,5,20,10,0,0,0,0),new eM(5,!0,!1,19,1,19,3,20,4,-1,1,0,0),new eM(6,!1,!1,20,0,11,8,12,9,-1,1,1,-1),new eM(7,!1,!1,20,0,12,6,18,10,-1,1,1,-1),new eM(8,!1,!1,20,0,0,0,10,10,0,0,0,0)]}static getTestRawInputEdges(){return[new sM(0,!0,!1,new al(10,0),new al(10,6)),new sM(0,!1,!1,new al(10,6),new al(0,10)),new sM(0,!1,!1,new al(1,1),new al(3,6)),new sM(0,!1,!1,new al(3,6),new al(4,2)),new sM(0,!1,!0,new al(4,2),new al(1,1)),new sM(1,!0,!1,new al(20,0),new al(20,2)),new sM(1,!1,!1,new al(20,2),new al(10,6)),new sM(1,!1,!0,new al(10,6),new al(10,0)),new sM(2,!0,!0,new al(10,8),new al(9,10)),new sM(3,!0,!1,new al(7.5,9),new al(9,9)),new sM(3,!1,!1,new al(9,9),new al(9,10)),new sM(3,!1,!1,new al(9,10),new al(7.5,10)),new sM(3,!1,!0,new al(7.5,10),new al(7.5,9)),new sM(4,!0,!1,new al(10,9),new al(11,9)),new sM(4,!1,!1,new al(11,9),new al(10,10)),new sM(4,!1,!1,new al(10,10),new al(10,9)),new sM(4,!1,!1,new al(19,9),new al(20,9)),new sM(4,!1,!1,new al(20,9),new al(19,10)),new sM(4,!1,!0,new al(19,10),new al(19,9)),new sM(5,!0,!0,new al(20,4),new al(19,5))]}static async test(){let e=bM.getTestRawInputChunks(),t=bM.getTestRawInputEdges();const i=e.length,n=t.length,r=new ZN(e,eM.INDETERMINATE),s=new ZN(t,sM.INDETERMINATE);let a=i,o=n,l=r,h=s;const u=[];let c=1;for(;a>0;){console.log("Stage "+c++),console.log("**********"),console.log("**********"),console.log("**********"),console.log("**********"),console.log("**********");const e=await bM.process(8,a,o,l,h);u.push(...e.completeChunks.data.slice(0,e.numCompleteChunks)),a=e.numReducibleChunks,o=e.numReducibleEdges,l=e.reducibleChunks,h=e.reducibleEdges;break}const d=new cN(256,256,{colorSpace:"display-p3"}),p=new yl(1,0,0,1);console.log("finishedChunks: "+u.length),u.forEach(e=>{e.isFullArea?d.addClientFullRegion(p,e.minX,e.minY,e.maxX-e.minX,e.maxY-e.minY):d.addClientPartialPixel(p.timesScalar(e.area),e.minX,e.minY)});const m=d.toCanvas();m.style.width="512px",m.style.height="512px",m.style.imageRendering="pixelated",m.style.position="absolute",document.body.appendChild(m)}static async process(e,t,i,n,r){const s=2*t,a=2*i,o=(e,t)=>`${t} ${e.toString()}`,l=(t,i)=>new ZN(_.range(0,qM.alignUp(t,e)).map(()=>i),i);console.log("numInputChunks: "+t),console.log(n.data.slice(0,t).map(o).join("\n")),console.log("numInputEdges: "+i),console.log(r.data.slice(0,i).map(o).join("\n"));const h=l(s,lM.INDETERMINATE);console.log("ParallelRasterInitialChunk dispatch"),await uM.dispatch(e,n,t,h),console.log("clippedChunks (without reduce)"),console.log(h.data.slice(0,s).map(o).join("\n"));const u=l(a,aM.INDETERMINATE),c=l(Math.ceil(i/e),nM.INDETERMINATE),d=l(i,iM.INDETERMINATE);console.log("ParallelRasterInitialClip dispatch"),await cM.dispatch(e,n,r,i,h,u,c,d),console.log("edgeClips"),console.log(u.data.slice(0,a).map(o).join("\n")),console.log("debugFullChunkReduces"),console.log(d.data.slice(0,i).flatMap((e,t)=>[`${t} min: ${e.min.toString()}`,`${t.toString().replace(/./g," ")} max: ${e.max.toString()}`]).join("\n")),console.log("chunkReduces0"),console.log(c.data.slice(0,Math.ceil(i/e)).flatMap((e,t)=>[`${t} leftMin: ${e.leftMin.toString()}`,`${t.toString().replace(/./g," ")} rightMin: ${e.rightMin.toString()}`,`${t.toString().replace(/./g," ")} leftMax: ${e.leftMax.toString()}`,`${t.toString().replace(/./g," ")} rightMax: ${e.rightMax.toString()}`]).join("\n"));const p=l(Math.ceil(i/(e*e)),nM.INDETERMINATE);console.log("ParallelRasterChunkReduce dispatch"),await dM.dispatch(e,c,Math.ceil(i/e),h,p),console.log("chunkReduces1"),console.log(p.data.slice(0,Math.ceil(i/(e*e))).flatMap((e,t)=>[`${t} leftMin: ${e.leftMin.toString()}`,`${t.toString().replace(/./g," ")} rightMin: ${e.rightMin.toString()}`,`${t.toString().replace(/./g," ")} leftMax: ${e.leftMax.toString()}`,`${t.toString().replace(/./g," ")} rightMax: ${e.rightMax.toString()}`]).join("\n"));const m=l(Math.ceil(i/(e*e*e)),nM.INDETERMINATE);console.log("ParallelRasterChunkReduce dispatch"),await dM.dispatch(e,p,Math.ceil(i/(e*e)),h,m),console.log("chunkReduces2"),console.log(m.data.slice(0,Math.ceil(i/(e*e*e))).flatMap((e,t)=>[`${t} leftMin: ${e.leftMin.toString()}`,`${t.toString().replace(/./g," ")} rightMin: ${e.rightMin.toString()}`,`${t.toString().replace(/./g," ")} leftMax: ${e.leftMax.toString()}`,`${t.toString().replace(/./g," ")} rightMax: ${e.rightMax.toString()}`]).join("\n")),console.log("clippedChunks (with reduce)"),console.log(h.data.slice(0,s).map(o).join("\n"));const g=l(s,hM.INDETERMINATE),f=l(Math.ceil(s/e),hM.INDETERMINATE);console.log("ParallelRasterInitialSplitReduce dispatch"),await yM.dispatch(e,h,s,g,f),console.log("debugFullSplitReduces"),console.log(g.data.slice(0,s).map(o).join("\n")),console.log("splitReduces0 (reduced)"),console.log(f.data.slice(0,Math.ceil(s/e)).map(o).join("\n"));const y=l(Math.ceil(s/(e*e)),hM.INDETERMINATE);console.log("ParallelRasterSplitReduce dispatch"),await mM.dispatch(e,Math.ceil(s/e),f,y),console.log("splitReduces0 (scanned)"),console.log(f.data.slice(0,Math.ceil(s/e)).map(o).join("\n")),console.log("splitReduces1 (reduced)"),console.log(y.data.slice(0,Math.ceil(s/(e*e))).map(o).join("\n"));const E=l(Math.ceil(s/(e*e*e)),hM.INDETERMINATE);console.log("ParallelRasterSplitReduce dispatch"),await mM.dispatch(e,Math.ceil(s/(e*e)),y,E),console.log("splitReduces1 (scanned)"),console.log(y.data.slice(0,Math.ceil(s/(e*e))).map(o).join("\n")),console.log("splitReduces2 (reduced)"),console.log(E.data.slice(0,Math.ceil(s/(e*e*e))).map(o).join("\n"));const v=E.data[0].numReducible,A=E.data[0].numComplete,b=l(v,eM.INDETERMINATE),S=l(A,rM.INDETERMINATE),x=l(s,NaN),w=l(s,hM.INDETERMINATE);console.log("ParallelRasterSplitScan dispatch"),await EM.dispatch(e,h,f,y,E,s,b,S,x,w),console.log("debugSplitScanReduces"),console.log(w.data.slice(0,s).map(o).join("\n")),console.log("reducibleChunks "+v),console.log(b.data.slice(0,v).map(o).join("\n")),console.log("completeChunks "+A),console.log(S.data.slice(0,A).map(o).join("\n")),console.log("chunkIndexMap"),console.log(x.data.slice(0,s).map(o).join("\n"));const T=l(a,hM.INDETERMINATE),P=l(Math.ceil(a/e),hM.INDETERMINATE);console.log("ParallelRasterInitialEdgeReduce dispatch"),await pM.dispatch(e,h,u,a,T,P),console.log("debugFullEdgeReduces"),console.log(T.data.slice(0,a).map(o).join("\n")),console.log("edgeReduces0 (reduced)"),console.log(P.data.slice(0,Math.ceil(a/e)).map(o).join("\n"));const C=l(Math.ceil(a/(e*e)),hM.INDETERMINATE);console.log("ParallelRasterSplitReduce dispatch"),await mM.dispatch(e,Math.ceil(a/e),P,C),console.log("edgeReduces0 (scanned)"),console.log(P.data.slice(0,Math.ceil(a/e)).map(o).join("\n")),console.log("edgeReduces1 (reduced)"),console.log(C.data.slice(0,Math.ceil(a/(e*e))).map(o).join("\n"));const V=l(Math.ceil(a/(e*e*e)),hM.INDETERMINATE);console.log("ParallelRasterSplitReduce dispatch"),await mM.dispatch(e,Math.ceil(a/(e*e)),C,V),console.log("edgeReduces1 (scanned)"),console.log(C.data.slice(0,Math.ceil(a/(e*e))).map(o).join("\n")),console.log("edgeReduces2 (reduced)"),console.log(V.data.slice(0,Math.ceil(a/(e*e*e))).map(o).join("\n"));const R=V.data[0].numReducible,N=V.data[0].numComplete,M=l(R,sM.INDETERMINATE),k=l(N,oM.INDETERMINATE),L=l(2*s,NaN),I=l(a,hM.INDETERMINATE);return console.log("ParallelRasterEdgeScan dispatch"),await fM.dispatch(e,h,u,P,C,V,a,M,k,L,I),console.log("reducibleEdges "+R),console.log(M.data.slice(0,R).map(o).join("\n")),console.log("completeEdges "+N),console.log(k.data.slice(0,N).map(o).join("\n")),console.log("chunkIndices"),console.log(L.data.slice(0,2*s).map(o).join("\n")),console.log("debugEdgeScan"),console.log(I.data.slice(0,a).map(o).join("\n")),console.log("ParallelRasterChunkIndexPatch dispatch"),await vM.dispatch(e,x,L,h,s,b,S),console.log("reducibleChunks "+v),console.log(b.data.slice(0,v).map(o).join("\n")),console.log("completeChunks "+A),console.log(S.data.slice(0,A).map(o).join("\n")),console.log("ParallelRasterEdgeIndexPatch dispatch"),await AM.dispatch(e,x,L,R,M),console.log("reducibleEdges "+R),console.log(M.data.slice(0,R).map(o).join("\n")),console.log("completeEdges "+N),console.log(k.data.slice(0,N).map(o).join("\n")),{reducibleChunks:b,reducibleEdges:M,numReducibleChunks:v,numReducibleEdges:R,completeChunks:S,completeEdges:k,numCompleteChunks:A,numCompleteEdges:N}}}St.register("ParallelRaster",bM);let SM=0;class _M{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];_defineProperty(this,"id",SM++),this.source=e,this.dependencies=t}toString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="";if(e[this.id])return t;if(this.dependencies)for(let i=0;i<this.dependencies.length;i++)t+=this.dependencies[i].toString(e);return t+=this.source,e[this.id]=!0,t}static numericConstant(e,t){return new _M(`#define ${e} ${t.substring(0,33)}\n`)}static toFloat(e){const t=e.toString();return t.includes(".")||t.includes("e")||t.includes("E")?t:t+".0"}}St.register("Snippet",_M);let xM=0;class wM{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];_defineProperty(this,"id",xM++),this.beforeSource=e,this.afterSource=t,this.dependencies=i}static fromSource(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map;if(i.has(e))return i.get(e);const n=e(t),r=n.imports.map(e=>wM.fromSource(e,t,i)),s=new wM(n.before,n.after,r);return i.set(e,s),s}toString(){const{before:e,after:t}=this.toDualString({});return`${e}\n${t}`}toDualString(e){let t="",i="";if(e[this.id])return{before:t,after:i};if(this.dependencies)for(let n=0;n<this.dependencies.length;n++){const{before:r,after:s}=this.dependencies[n].toDualString(e);t+=r,i+=s}return t+=this.beforeSource,i+=this.afterSource,e[this.id]=!0,{before:t,after:i}}}St.register("DualSnippet",wM);const TM=["maxTextureDimension1D","maxTextureDimension2D","maxTextureDimension3D","maxTextureArrayLayers","maxBindGroups","maxBindingsPerBindGroup","maxDynamicUniformBuffersPerPipelineLayout","maxDynamicStorageBuffersPerPipelineLayout","maxSampledTexturesPerShaderStage","maxSamplersPerShaderStage","maxStorageBuffersPerShaderStage","maxStorageTexturesPerShaderStage","maxUniformBuffersPerShaderStage","maxUniformBufferBindingSize","maxStorageBufferBindingSize","minUniformBufferOffsetAlignment","minStorageBufferOffsetAlignment","maxVertexBuffers","maxBufferSize","maxVertexAttributes","maxVertexBufferArrayStride","maxInterStageShaderComponents","maxInterStageShaderVariables","maxColorAttachments","maxColorAttachmentBytesPerSample","maxComputeWorkgroupStorageSize","maxComputeInvocationsPerWorkgroup","maxComputeWorkgroupSizeX","maxComputeWorkgroupSizeY","maxComputeWorkgroupSizeZ","maxComputeWorkgroupsPerDimension"];class PM{constructor(e){_defineProperty(this,"lostEmitter",new np),_defineProperty(this,"_logTypedBuffer",null),this.device=e,this.preferredCanvasFormat=navigator.gpu.getPreferredCanvasFormat(),this.preferredStorageFormat="bgra8unorm"===this.preferredCanvasFormat&&e.features.has("bgra8unorm-storage")?"bgra8unorm":"rgba8unorm",e.lost.then(e=>{console.error("WebGPU device was lost: "+e.message),this.lostEmitter.emit(),e.reason}).catch(e=>{throw new Error(e)})}getLogTypedBuffer(){return this._logTypedBuffer||(this._logTypedBuffer=hk.createArray(this,GM,1<<22)),this._logTypedBuffer}createBuffer(e){return this.device.createBuffer({size:Math.max(e,16),usage:GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST|GPUBufferUsage.STORAGE})}createDataBuffer(e){const t=this.createBuffer(e.byteLength);return this.device.queue.writeBuffer(t,0,e.buffer),t}createU32Buffer(e){return this.createDataBuffer(new Uint32Array(e))}createI32Buffer(e){return this.createDataBuffer(new Int32Array(e))}createF32Buffer(e){return this.createDataBuffer(new Float32Array(e))}createByteEncoderBuffer(e){const t=this.createBuffer(e.byteLength);return this.device.queue.writeBuffer(t,0,e.fullArrayBuffer,0,e.byteLength),t}createMapReadableBuffer(e){return this.device.createBuffer({size:e,usage:GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST})}createQueryBuffer(e){return this.device.createBuffer({size:e,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST})}createQuerySet(e){return this.device.createQuerySet({type:"timestamp",count:e})}getCanvasContext(e,t){const i=e.getContext("webgpu");if(!i)throw new Error("Could not get a WebGPU context for the given Canvas");return i.configure({device:this.device,format:this.preferredCanvasFormat,colorSpace:t,usage:GPUTextureUsage.COPY_SRC|GPUTextureUsage.RENDER_ATTACHMENT|(this.preferredCanvasFormat===this.preferredStorageFormat?GPUTextureUsage.STORAGE_BINDING:0),alphaMode:"premultiplied"}),i}async executeSingle(e,t){return new NM(this,t).executeSingle(e)}async execute(e,t){return new NM(this,t).execute(e)}async executeShader(e,t,i){return i=No({log:e.log},i),this.executeSingle(async(i,n)=>e.execute(n,t),i)}static async getDevice(e){const t=Vo()({maxLimits:!1,timestampQuery:!1,highPerformance:!0},e);let i=null;try{var n;const e=await(null===(n=navigator.gpu)||void 0===n?void 0:n.requestAdapter({powerPreference:t.highPerformance?"high-performance":"low-power"}));if(!e)return null;const r=e.features.has("bgra8unorm-storage")||!1?["bgra8unorm-storage"]:[];if(t.timestampQuery){if(!e.features.has("timestamp-query"))throw new Error("timestamp-query feature not available");r.push("timestamp-query")}const s={};t.maxLimits&&TM.forEach(t=>{s[t]=e.limits[t]}),i=await(null==e?void 0:e.requestDevice({requiredFeatures:r,requiredLimits:s}))||null}catch(r){console.log(r)}return i}dispose(){this.device.destroy()}static async getMappedFloatArray(e){await e.mapAsync(GPUMapMode.READ);const t=e.getMappedRange(),i=new Float32Array(t.byteLength/4);return i.set(new Float32Array(t)),e.unmap(),i}static async getMappedUintArray(e){await e.mapAsync(GPUMapMode.READ);const t=e.getMappedRange(),i=new Uint32Array(t.byteLength/4);return i.set(new Uint32Array(t)),e.unmap(),i}static async getMappedIntArray(e){await e.mapAsync(GPUMapMode.READ);const t=e.getMappedRange(),i=new Int32Array(t.byteLength/4);return i.set(new Int32Array(t)),e.unmap(),i}static async getMappedByteArray(e){await e.mapAsync(GPUMapMode.READ);const t=e.getMappedRange(),i=new Uint8Array(t.byteLength);return i.set(new Uint8Array(t)),e.unmap(),i}static async getMappedArrayBuffer(e){return(await PM.getMappedByteArray(e)).buffer}}St.register("DeviceContext",PM);const CM={timestampLog:!0,timestampLoggerCapacity:100,log:!1,logBufferSize:1<<22},VM={log:!1,dispose:_.noop};class RM{constructor(e,t){this.execute=e;const i=Ro()({},VM,t);this.log=i.log,this.dispose=i.dispose}}class NM extends class{constructor(e,t){_defineProperty(this,"buffersToCleanup",[]),_defineProperty(this,"logBarrierShader",null),this.deviceContext=e,this.encoder=t,this.bufferLogger=new ak(e)}createBuffer(e){const t=this.deviceContext.createBuffer(e);return this.buffersToCleanup.push(t),t}createDataBuffer(e){const t=this.deviceContext.createDataBuffer(e);return this.buffersToCleanup.push(t),t}createU32Buffer(e){const t=this.deviceContext.createU32Buffer(e);return this.buffersToCleanup.push(t),t}createI32Buffer(e){const t=this.deviceContext.createI32Buffer(e);return this.buffersToCleanup.push(t),t}createF32Buffer(e){const t=this.deviceContext.createF32Buffer(e);return this.buffersToCleanup.push(t),t}createByteEncoderBuffer(e){const t=this.deviceContext.createByteEncoderBuffer(e);return this.buffersToCleanup.push(t),t}async arrayBuffer(e){return this.bufferLogger.arrayBuffer(this.encoder,e)}async u32(e){return this.bufferLogger.u32(this.encoder,e)}async i32(e){return this.bufferLogger.i32(this.encoder,e)}async f32(e){return this.bufferLogger.f32(this.encoder,e)}async u32Numbers(e){return this.bufferLogger.u32Numbers(this.encoder,e)}async i32Numbers(e){return this.bufferLogger.i32Numbers(this.encoder,e)}async f32Numbers(e){return this.bufferLogger.f32Numbers(this.encoder,e)}setLogBarrierShader(e){this.logBarrierShader=e}dispatch(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;this.logBarrierShader&&this.logBarrierShader.dispatch(this.encoder,[],1,1,1,this.getDispatchOptions()),e.dispatch(this.encoder,t,i,n,r,this.getDispatchOptions())}dispatchIndirect(e,t,i,n){this.logBarrierShader&&this.logBarrierShader.dispatch(this.encoder,[],1,1,1,this.getDispatchOptions()),e.dispatchIndirect(this.encoder,t,i,n,this.getDispatchOptions())}}{constructor(e,t){super(e,e.device.createCommandEncoder({label:"the encoder"})),_defineProperty(this,"logBuffer",null);const i=Ro()({},CM,t);this.timestampLogger=new ok(i.timestampLog?e:null,i.timestampLoggerCapacity),this.timestampResultPromise=new Promise(e=>{this.timestampResultResolve=e}),this.log=i.log,this.logBufferSize=i.logBufferSize}getDispatchOptions(){return{timestampLogger:this.timestampLogger,logBuffer:this.logBuffer}}async executeInternal(e){this.logBuffer=this.log?this.createBuffer(this.logBufferSize):null;const t=e(this.encoder,this),i=this.logBuffer?this.arrayBuffer(this.logBuffer):Promise.resolve(null);this.timestampLogger.resolve(this.encoder,this.bufferLogger).then(e=>this.timestampResultResolve(e)).catch(e=>{throw e});const n=this.encoder.finish();this.deviceContext.device.queue.submit([n]),await this.bufferLogger.complete();const r=await i;if(r){const e=new Uint32Array(r),t=e[0],i=`logging used ${t} of ${e.length-1} u32s (${fl.roundSymmetric(100*t/(e.length-1))}%)`;console.log(i),tk.analyze(r).forEach(e=>{e.logLines.forEach(t=>{console.log(e.shaderName,`>>> ${t.info.logName}${null!==t.additionalIndex?` (${t.additionalIndex})`:""}`,t.info.lineToLog(t))})}),console.log(i)}return this.buffersToCleanup.forEach(e=>e.destroy()),this.timestampLogger.dispose(),t}async executeSingle(e){return this.executeInternal(e)}async execute(e){const t=this.executeInternal(e),i={};for(const n in t)i[n]=await t[n];return i}}St.register("BasicExecution",NM);class MM{constructor(e){this.mutateBindGroupLayoutEntry=e}getBindGroupLayoutEntry(e){const t={binding:e,visibility:GPUShaderStage.COMPUTE};return this.mutateBindGroupLayoutEntry(t),t}getBindGroupEntry(e,t){return{binding:e,resource:t instanceof GPUBuffer?{buffer:t}:t}}}_defineProperty(MM,"STORAGE_BUFFER",new(Je=MM)(e=>{e.buffer={type:"storage",hasDynamicOffset:!1}})),_defineProperty(MM,"READ_ONLY_STORAGE_BUFFER",new Je(e=>{e.buffer={type:"read-only-storage",hasDynamicOffset:!1}})),_defineProperty(MM,"UNIFORM_BUFFER",new Je(e=>{e.buffer={type:"uniform",hasDynamicOffset:!1}})),_defineProperty(MM,"TEXTURE_OUTPUT_RGBA8UNORM",new Je(e=>{e.storageTexture={access:"write-only",format:"rgba8unorm",viewDimension:"2d"}})),_defineProperty(MM,"TEXTURE_OUTPUT_BGRA8UNORM",new Je(e=>{e.storageTexture={access:"write-only",format:"bgra8unorm",viewDimension:"2d"}})),_defineProperty(MM,"TEXTURE_INPUT",new Je(e=>{e.texture={sampleType:"float",viewDimension:"2d",multisampled:!1}})),St.register("BindingType",MM);const kM={partialBeautify:!0,log:!1},LM={timestampLogger:null,timestampWrites:null,logBuffer:null},IM={log:!1,logBinding:64};class BM{constructor(e,t,i,n,r,s){this.name=e,this.bindingTypes=i,this.device=n;const a=Ro()({},kM,s);this.log=a.log,a.partialBeautify&&(t=xk(t)),this.wgsl=t,console.groupCollapsed("[shader] "+e),console.log(wk(t)),console.groupEnd(),this.module=n.createShaderModule({label:e,code:this.wgsl}),this.bindGroupLayout=n.createBindGroupLayout({label:e+" bindGroupLayout",entries:[...this.bindingTypes.map((e,t)=>e.getBindGroupLayoutEntry(t)),...this.log?[MM.STORAGE_BUFFER.getBindGroupLayoutEntry(64)]:[]]});const o={label:e+" pipeline",layout:n.createPipelineLayout({bindGroupLayouts:[this.bindGroupLayout]}),compute:{module:this.module,entryPoint:"main"}};r?(this.pipelinePromise=n.createComputePipelineAsync(o),this.pipelinePromise.then(e=>{this.pipeline=e}).catch(e=>{throw e})):(this.pipeline=n.createComputePipeline(o),this.pipelinePromise=Promise.resolve(this.pipeline))}getBindGroup(e,t){return this.device.createBindGroup({label:this.name+" bindGroup",layout:this.bindGroupLayout,entries:[...this.bindingTypes.map((t,i)=>t.getBindGroupEntry(i,e[i])),...this.log&&t?[MM.STORAGE_BUFFER.getBindGroupEntry(64,t)]:[]]})}dispatch(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=arguments.length>5?arguments[5]:void 0;const a=Ro()({},LM,s),o=e.beginComputePass(this.getComputePassDescriptor(!1,a.timestampLogger,a.timestampWrites));o.setPipeline(this.pipeline),o.setBindGroup(0,this.getBindGroup(t,a.logBuffer)),o.dispatchWorkgroups(i,n,r),o.end()}dispatchIndirect(e,t,i,n,r){const s=Ro()({},LM,r),a=e.beginComputePass(this.getComputePassDescriptor(!0,s.timestampLogger,s.timestampWrites));a.setPipeline(this.pipeline),a.setBindGroup(0,this.getBindGroup(t,s.logBuffer)),a.dispatchWorkgroupsIndirect(i,n),a.end()}getComputePassDescriptor(e,t,i){const n={label:`${this.name}${e?" indirect":""} compute pass`};if(t){const e=t.getGPUComputePassTimestampWrites(this.name);e&&(n.timestampWrites=e)}else i&&(n.timestampWrites=i);return n}static fromSource(e,t,i,n){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=No({shaderName:t},IM,r),a=s.log,o=wM.fromSource(i,s);return new BM(t,o.toString(),n,e,!1,{log:a})}static async fromSourceAsync(e,t,i,n){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=No({shaderName:t},IM,r),a=s.log,o=wM.fromSource(i,s);return BM.fromWGSLAsync(e,t,o.toString(),n,{log:a})}static async fromContextAsync(e,t,i,n,r){return BM.fromWGSLAsync(e,t,i.toString(),n,No({log:i.log},r))}static async fromWGSLAsync(e,t,i,n,r){const s=No({},kM,r),a=new BM(t,i,n,e,!0,s);return await a.pipelinePromise,a}}St.register("ComputeShader",BM);class DM{constructor(e,t){this.device=e,this.module=e.createShaderModule({label:"blitShaderModule",code:"@vertex\nfn vs_main(@builtin(vertex_index) ix: u32) -> @builtin(position) vec4<f32> {\n    // Generate a full screen quad in NDCs\n    var vertex = vec2(-1.0, 1.0);\n    switch ix {\n        case 1u: {\n            vertex = vec2(-1.0, -1.0);\n        }\n        case 2u, 4u: {\n            vertex = vec2(1.0, -1.0);\n        }\n        case 5u: {\n            vertex = vec2(1.0, 1.0);\n        }\n        default: {}\n    }\n    return vec4(vertex, 0.0, 1.0);\n}\n\n@group(0) @binding(0)\nvar fine_output: texture_2d<f32>;\n\n@fragment\nfn fs_main(@builtin(position) pos: vec4<f32>) -> @location(0) vec4<f32> {\n    return textureLoad(fine_output, vec2<i32>(pos.xy), 0);\n}\n      "}),this.bindGroupLayout=e.createBindGroupLayout({label:"blitShaderBindGroupLayout",entries:[{binding:0,visibility:GPUShaderStage.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}}]}),this.pipeline=e.createRenderPipeline({label:"blitShaderPipeline",layout:e.createPipelineLayout({label:"blitShaderPipelineLayout",bindGroupLayouts:[this.bindGroupLayout]}),vertex:{module:this.module,entryPoint:"vs_main"},fragment:{module:this.module,entryPoint:"fs_main",targets:[{format:t}]}})}dispatch(e,t,i){const n=e.beginRenderPass({label:"blit render pass",colorAttachments:[{view:t,clearValue:[0,0,0,0],loadOp:"clear",storeOp:"store"}]}),r=this.device.createBindGroup({label:"blit bind group",layout:this.bindGroupLayout,entries:[{binding:0,resource:i}]});n.setPipeline(this.pipeline),n.setBindGroup(0,r),n.draw(6),n.end()}}St.register("BlitShader",DM);const OM=new Uint8Array(4);class qM{constructor(e){e?(this._byteLength=e.byteLength,this._arrayBuffer=e):(this._byteLength=0,this._arrayBuffer=new ArrayBuffer(512)),this.setTypedArrays()}get fullU8Array(){return this._u8Array}get fullU32Array(){return this._u32Array}get fullI32Array(){return this._i32Array}get fullF32Array(){return this._f32Array}get fullArrayBuffer(){return this._arrayBuffer}get u8Array(){return new Uint8Array(this._arrayBuffer,0,this._byteLength)}get u32Array(){return new Uint32Array(this._arrayBuffer,0,this._byteLength/4)}get i32Array(){return new Int32Array(this._arrayBuffer,0,this._byteLength/4)}get f32Array(){return new Float32Array(this._arrayBuffer,0,this._byteLength/4)}get arrayBuffer(){return this._arrayBuffer.slice(0,this._byteLength)}clear(){this._byteLength=0,this._u8Array.fill(0)}pushByteEncoder(e){this.ensureSpaceFor(e._byteLength),this._u8Array.set(e._u8Array.slice(0,e._byteLength),this._byteLength),this._byteLength+=e._byteLength}pushF32(e){if(this.ensureSpaceFor(4),this._byteLength%4==0)this._f32Array[this._byteLength/4]=e;else{const t=qM.f32ToBytes(e);this._u8Array.set(t,this._byteLength)}this._byteLength+=4}pushU32(e){if(this.ensureSpaceFor(4),this._byteLength%4==0)this._u32Array[this._byteLength/4]=e;else{const t=qM.u32ToBytes(e);this._u8Array.set(t,this._byteLength)}this._byteLength+=4}pushI32(e){if(this.ensureSpaceFor(4),this._byteLength%4==0)this._i32Array[this._byteLength/4]=e;else{const t=qM.i32ToBytes(e);this._u8Array.set(t,this._byteLength)}this._byteLength+=4}pushReversedU32(e){this.ensureSpaceFor(4);const t=qM.u32ToBytes(e).reverse();this._u8Array.set(t,this._byteLength),this._byteLength+=4}pushU8(e){this.ensureSpaceFor(1),this._u8Array[this._byteLength]=e,this._byteLength+=1}get byteLength(){return this._byteLength}set byteLength(e){e>this._arrayBuffer.byteLength&&this.resize(e),this._byteLength=e}ensureSpaceFor(e){const t=this._byteLength+e;this._byteLength+e>this._arrayBuffer.byteLength&&this.resize(Math.max(2*this._arrayBuffer.byteLength,t))}setTypedArrays(){this._f32Array=new Float32Array(this._arrayBuffer),this._i32Array=new Int32Array(this._arrayBuffer),this._u32Array=new Uint32Array(this._arrayBuffer),this._u8Array=new Uint8Array(this._arrayBuffer)}resize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;e=e||2*this._arrayBuffer.byteLength,e=4*Math.ceil(e/4);const t=new ArrayBuffer(e);new Uint8Array(t).set(this._u8Array.slice(0,Math.min(this._byteLength,e))),this._arrayBuffer=t,this.setTypedArrays()}encodeValues(e,t){for(let i=0;i<e.length;i++)t(e[i],this);return this}decodeValues(e,t){const i=[],n=Math.floor(this.byteLength/t);for(let r=0;r<n;r++)i.push(e(this,r*t/4));return i}static padLeft(e,t,i){let n=e;const r=i-e.length;for(let s=0;s<r;s++)n=t+n;return n}static padRight(e,t,i){let n=e;const r=i-e.length;for(let s=0;s<r;s++)n+=t;return n}static toU32Hex(e){return qM.padLeft(e.toString(16),".",8)}static toU32Binary(e){return qM.padLeft(e.toString(2),"0",32)}static rightShiftU32(e,t){return t>=32?0:t>=0?e>>>t:t>=-31?e<<-t>>>0:0}getDebug32String(){const e=this.u32Array,t=this.i32Array,i=this.f32Array,n=Math.max(...e.map(e=>(""+e).length)),r=Math.max(...t.map(e=>(""+e).length)),s=Math.max(...i.map(e=>(""+e).length)),a=(""+(e.length-1)).length,o=(""+(e.length-1).toString(16)).length;let l="";l+=`${qM.padLeft("i"," ",a)} ${qM.padLeft("i"," ",o)} ${qM.padLeft("binary"," ",32)} ${qM.padLeft("hex"," ",8)} ${qM.padLeft("i32"," ",r)} ${qM.padLeft("u32"," ",n)} ${qM.padRight("f32"," ",s)}\n`;for(let h=0;h<e.length;h++){const u=e[h],c=t[h],d=i[h],p=qM.padLeft(""+h," ",a),m=qM.padLeft(""+h.toString(16)," ",o),g=qM.toU32Hex(u),f=qM.toU32Binary(u),y=qM.padLeft(""+u," ",n);l+=`${p} ${m} ${f} ${g} ${qM.padLeft(""+c," ",r)} ${y} ${qM.padRight(""+d," ",s)}\n`}return l}static alignUp(e,t){return e+(1+~e&t-1)}static nextMultipleOf(e,t){const i=e%t;return 0===i?e:e+(t-i)}static f32ToBytes(e){return new DataView(OM.buffer).setFloat32(0,e),[...OM].reverse()}static u32ToBytes(e){return new DataView(OM.buffer).setUint32(0,e),[...OM].reverse()}static i32ToBytes(e){return new DataView(OM.buffer).setInt32(0,e),[...OM].reverse()}static toStripedIndex(e,t,i){const n=e%(t*i);return Math.floor(e/(t*i))*t*i+e%i*t+Math.floor(n/i)}static fromStripedIndex(e,t,i){const n=e%(t*i);return Math.floor(e/(t*i))*t*i+e%t*i+Math.floor(n/t)}static getConvergentIndex(e,t){const i=Math.log2(t);let n=0;for(let r=0;r<32;r++)0!=(e&1<<r)&&(n|=r<i?1<<i-r-1:1<<r);return n>>>0}static getCorank(e,t,i,n){let r,s=Math.min(e,t),a=e-s,o=Math.max(0,e-i),l=Math.max(0,e-t);for(;;)if(s>0&&a<i&&n(s-1,a)>0)r=s-o+1>>1,l=a,a+=r,s-=r;else{if(!(a>0&&s<t&&n(s,a-1)<=0))break;r=a-l+1>>1,o=s,s+=r,a-=r}return s}}St.register("ByteEncoder",qM);const YM=new Jd,HM=(e,t,i)=>{const n=e.bytesPerElement/4;return{name:`${e.name}[${t}]`,bytesPerElement:e.bytesPerElement*t,equals(i,n){for(let r=0;r<t;r++)if(!e.equals(i[r],n[r]))return!1;return!0},equalsWGSL:(i,n)=>`( ${_.range(0,t).map(t=>e.equalsWGSL(`${i}[ ${xt(t)} ]`,`${n}[ ${xt(t)} ]`)).join(" && ")} )`,encode(n,r){for(let s=0;s<t;s++)e.encode(s<n.length?n[s]:i,r)},decode(i,r){const s=[];for(let a=0;a<t;a++)s.push(e.decode(i,r+a*n));return s},valueType:`array<${e.valueType}, ${t}>`,writeU32s:(i,r)=>_.range(0,t).map(t=>e.writeU32s((e,r)=>i(`( ${e} + ${xt(t*n)} )`,r),`${r}[ ${xt(t)} ]`)).join("\n"),generateRandom(){let i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return _.range(0,t).map(()=>e.generateRandom(i))},toDebugString:t=>`[${t.map(t=>e.toDebugString(t)).join(", ")}]`}};St.register("getArrayType",HM);const GM={name:"u32",bytesPerElement:4,equals:(e,t)=>e===t,equalsWGSL:(e,t)=>`( ${e} == ${t} )`,encode(e,t){t.pushU32(e)},decode:(e,t)=>e.fullU32Array[t],valueType:"u32",writeU32s:(e,t)=>`\n       ${e("0u",t)}\n    `,generateRandom:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return YM.nextIntBetween(0,e?4294967295:255)},toDebugString:e=>e.toString()};St.register("U32Type",GM);const FM={name:"u32 addition",type:GM,isCommutative:!0,identity:0,apply:(e,t)=>e+t,identityWGSL:"0u",combineExpression:(e,t)=>`( ${e} + ${t} )`,combineStatements:(e,t,i)=>`${e} = ${t} + ${i};`,atomicName:"atomicAdd"};St.register("U32Add",FM);const zM={name:"u32 order",type:GM,compare:(e,t)=>e-t,getBits:(e,t,i)=>(e>>>t&(1<<i)-1)>>>0,compareWGSL:(e,t)=>`select( -1i, select( 0i, 1i, ${e} > ${t} ), ${e} < ${t} )`,greaterThan:(e,t)=>`( ${e} > ${t} )`,lessThanOrEqual:(e,t)=>`( ${e} <= ${t} )`,getBitsWGSL:(e,t,i)=>`( ( ${e} >> ${xt(t)} ) & ${xt((1<<i)-1)} )`};St.register("U32Order",zM);const UM={name:"u32 reverse order",type:GM,compare:(e,t)=>t-e,getBits:(e,t,i)=>(4294967295-e>>>t&(1<<i)-1)>>>0,compareWGSL:(e,t)=>`select( -1i, select( 0i, 1i, ${e} < ${t} ), ${e} > ${t} )`,greaterThan:(e,t)=>`( ${e} < ${t} )`,lessThanOrEqual:(e,t)=>`( ${e} >= ${t} )`,getBitsWGSL:(e,t,i)=>`( ( ( 0xffffffffu - ${e} ) >> ${xt(t)} ) & ${xt((1<<i)-1)} )`};St.register("U32ReverseOrder",UM);const WM={name:"i32",bytesPerElement:4,equals:(e,t)=>e===t,equalsWGSL:(e,t)=>`( ${e} == ${t} )`,encode(e,t){t.pushI32(e)},decode:(e,t)=>e.fullI32Array[t],valueType:"i32",writeU32s:(e,t)=>`\n       ${e("0u",`bitcast<u32>( ${t} )`)}\n    `,generateRandom:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return YM.nextIntBetween(0,e?-2147483647:-127,e?2147483647:127)},toDebugString:e=>e.toString()};St.register("I32Type",WM);const XM={name:"vec2u",bytesPerElement:8,equals:(e,t)=>e.equals(t),equalsWGSL:(e,t)=>`all( ${e} == ${t} )`,encode(e,t){t.pushU32(e.x),t.pushU32(e.y)},decode:(e,t)=>new al(e.fullU32Array[t],e.fullU32Array[t+1]),valueType:"vec2u",writeU32s:(e,t)=>`\n       ${e("0u",t+".x")}\n       ${e("1u",t+".y")}\n    `,generateRandom:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new al(GM.generateRandom(e),GM.generateRandom(e))},toDebugString:e=>`vec2u(${e.x}, ${e.y})`};St.register("Vec2uType",XM);const jM={name:"vec2u addition",type:XM,isCommutative:!0,identity:al.ZERO,apply:(e,t)=>e.plus(t),identityWGSL:"vec2u()",combineExpression:(e,t)=>`( ${e} + ${t} )`,combineStatements:(e,t,i)=>`${e} = ${t} + ${i};`};St.register("Vec2uAdd",jM);const QM={name:"vec2u bicyclic semigroup",type:XM,isCommutative:!1,identity:al.ZERO,apply:(e,t)=>{const i=Math.min(e.y,t.x);return new al(e.x+t.x-i,e.y+t.y-i)},identityWGSL:"vec2( 0u )",combineExpression:(e,t)=>`( ${e} + ${t} - min( ${e}.y, ${t}.x ) )`,combineStatements:(e,t,i)=>`${e} = ${t} + ${i} - min( ${t}.y, ${i}.x );`};St.register("Vec2uBic",QM);const KM={name:"vec2u lexicographical order",type:XM,compare(e,t){const i=zM.compare(e.x,t.x);return 0!==i?i:zM.compare(e.y,t.y)},getBits:(e,t,i)=>((qM.rightShiftU32(e.x,t-32)&(1<<i)-1)>>>0)+((qM.rightShiftU32(e.y,t)&(1<<i)-1)>>>0),compareWGSL:(e,t)=>`select( -1i, select( select( -1i, select( 0i, 1i, ${e}.y > ${t}.y ), ${e}.y < ${t}.y ), 1i, ${e}.x > ${t}.x ), ${e}.x < ${t}.x )`,greaterThan:(e,t)=>`( ${e}.x > ${t}.x || ( ${e}.x == ${t}.x && ${e}.y > ${t}.y ) )`,lessThanOrEqual:(e,t)=>`( ${e}.x <= ${t}.x && ( ${e}.x != ${t}.x || ${e}.y <= ${t}.y ) )`,getBitsWGSL:(e,t,i)=>0===t?`( ( ${e}.y >> ${xt(t)} ) & ${xt((1<<i)-1)} )`:t<32?`( ( ( ${e}.x << ${xt(32-t)} ) & ${xt((1<<i)-1)} ) | ( ( ${e}.y >> ${xt(t)} ) & ${xt((1<<i)-1)} ) )`:`( ( ${e}.x >> ${xt(t-32)} ) & ${xt((1<<i)-1)} )`};St.register("Vec2uLexicographicalOrder",KM);const ZM={name:"vec3u",bytesPerElement:12,equals:(e,t)=>e.equals(t),equalsWGSL:(e,t)=>`all( ${e} == ${t} )`,encode(e,t){t.pushU32(e.x),t.pushU32(e.y),t.pushU32(e.z)},decode:(e,t)=>new bl(e.fullU32Array[t],e.fullU32Array[t+1],e.fullU32Array[t+2]),valueType:"vec3u",writeU32s:(e,t)=>`\n       ${e("0u",t+".x")}\n       ${e("1u",t+".y")}\n       ${e("2u",t+".z")}\n    `,generateRandom:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new bl(GM.generateRandom(e),GM.generateRandom(e),GM.generateRandom(e))},toDebugString:e=>`vec3u(${e.x}, ${e.y}, ${e.z})`};St.register("Vec3uType",ZM);const JM={name:"vec3u addition",type:ZM,isCommutative:!0,identity:bl.ZERO,apply:(e,t)=>e.plus(t),identityWGSL:"vec3u()",combineExpression:(e,t)=>`( ${e} + ${t} )`,combineStatements:(e,t,i)=>`${e} = ${t} + ${i};`};St.register("Vec3uAdd",JM);const $M={name:"vec4u",bytesPerElement:16,equals:(e,t)=>e.equals(t),equalsWGSL:(e,t)=>`all( ${e} == ${t} )`,encode(e,t){t.pushU32(e.x),t.pushU32(e.y),t.pushU32(e.z),t.pushU32(e.w)},decode:(e,t)=>new yl(e.fullU32Array[t],e.fullU32Array[t+1],e.fullU32Array[t+2],e.fullU32Array[t+3]),valueType:"vec4u",writeU32s:(e,t)=>`\n       ${e("0u",t+".x")}\n       ${e("1u",t+".y")}\n       ${e("2u",t+".z")}\n       ${e("3u",t+".w")}\n    `,generateRandom:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new yl(GM.generateRandom(e),GM.generateRandom(e),GM.generateRandom(e),GM.generateRandom(e))},toDebugString:e=>`vec4u(${e.x}, ${e.y}, ${e.z}, ${e.w})`};St.register("Vec4uType",$M);const ek={name:"vec4u addition",type:$M,isCommutative:!0,identity:yl.ZERO,apply:(e,t)=>e.plus(t),identityWGSL:"vec4u()",combineExpression:(e,t)=>`( ${e} + ${t} )`,combineStatements:(e,t,i)=>`${e} = ${t} + ${i};`};St.register("Vec4uAdd",ek);class tk{static register(e){const t=tk.nextGlobalId++;return e.id=t,tk.identifierMap.set(t,e),t}static analyze(e){const t=new qM(e),i=t.fullU32Array,n=i[0]+1,r=[];let s=new sk,a=1;for(;a<n;){const e=i[a++];if(0===e){s.isEmpty()||(s.finalize(),r.push(s),s=new sk);continue}const n=tk.identifierMap.get(e),o=new bl(i[a++],i[a++],i[a++]),l=new bl(i[a++],i[a++],i[a++]),h=n.hasAdditionalIndex?i[a++]:null;let u=null;if(n.type){const e=n.type,r=e.bytesPerElement/4,s=null===n.dataCount?i[a++]:n.dataCount,o=a;u=_.range(0,s).map(i=>e.decode(t,o+i*r)),a+=s*r}s.add(n,o,l,u,h)}return s.isEmpty()||(s.finalize(),r.push(s)),r}static async getLogBarrierComputeShader(e){return BM.fromSourceAsync(e.device,"log barrier",oo,[],{log:!0})}}_defineProperty(tk,"nextGlobalId",1),_defineProperty(tk,"identifierMap",new Map);class ik{constructor(e,t,i,n){this.info=e,this.data=t,this.additionalIndex=i;let r=`${e.id}:${i}`;for(;n.some(e=>e.uniqueId===r);)r+="!";this.uniqueId=r}}class nk{constructor(e,t){_defineProperty(this,"entries",[]),this.workgroupIndex=e,this.localIndex=t}add(e,t,i){this.entries.push(new ik(e,t,i,this.entries))}compare(e){return this.workgroupIndex.z!==e.workgroupIndex.z?this.workgroupIndex.z-e.workgroupIndex.z:this.workgroupIndex.y!==e.workgroupIndex.y?this.workgroupIndex.y-e.workgroupIndex.y:this.workgroupIndex.x!==e.workgroupIndex.x?this.workgroupIndex.x-e.workgroupIndex.x:this.localIndex.z!==e.localIndex.z?this.localIndex.z-e.localIndex.z:this.localIndex.y!==e.localIndex.y?this.localIndex.y-e.localIndex.y:this.localIndex.x!==e.localIndex.x?this.localIndex.x-e.localIndex.x:0}}class rk{constructor(e,t,i,n){this.info=e,this.additionalIndex=t,this.dataArray=i,this.threads=n}static toLogNull(e){return null}static toLogRaw(e){return e.dataArray}static toLogExisting(e){return e.dataArray.filter(e=>null!==e)}static toLogExistingFlat(e){return e.dataArray.filter(e=>null!==e).flat()}}class sk{constructor(){_defineProperty(this,"shaderName",null),_defineProperty(this,"threads",[]),_defineProperty(this,"threadMap",{}),_defineProperty(this,"logLines",[])}add(e,t,i,n,r){const s=`${t.x},${t.y},${t.z},${i.x},${i.y},${i.z}`;let a=this.threadMap[s];a||(a=new nk(t,i),this.threadMap[s]=a,this.threads.push(a)),a.add(e,n,r),null===this.shaderName&&(this.shaderName=e.shaderName)}isEmpty(){return 0===this.threads.length}finalize(){this.sortThreads();const e=new Set;for(const r of this.threads)for(const t of r.entries)e.add(t.uniqueId);const t=Array.from(e),i=new Map;for(let r=0;r<t.length;r++)for(let e=r+1;e<t.length;e++){const n=t[r],s=t[e];let a=0;for(const e of this.threads){const t=e.entries.findIndex(e=>e.uniqueId===n),i=e.entries.findIndex(e=>e.uniqueId===s);t>=0&&i>=0&&(a+=Math.sign(t-i))}i.set(`${n} ${s}`,a),i.set(`${s} ${n}`,-a)}const n=[];for(;t.length;){const e=t.map(e=>{let n=0;for(const a of t){if(e===a)continue;const t=(r=e,s=a,i.get(`${r} ${s}`));t>0?n+=65535:t<0&&n--}var r,s;return n}),r=e.indexOf(Math.min(...e)),s=t[r];n.push(s),t.splice(r,1)}n.forEach(e=>{const t=this.threads.map(t=>t.entries.find(t=>t.uniqueId===e)||null),i=t.find(e=>null!==e);this.logLines.push(new rk(i.info,i.additionalIndex,t.map(e=>e?e.data:null),this.threads))})}sortThreads(){this.threads.sort((e,t)=>e.compare(t))}}St.register("ConsoleLogger",tk);class ak{constructor(e){_defineProperty(this,"callbacksOnComplete",[]),this.deviceContext=e}async complete(){for(const e of this.callbacksOnComplete)await e();this.callbacksOnComplete.length=0}hasCallbacks(){return this.callbacksOnComplete.length>0}withBuffer(e,t,i){const n=this.deviceContext.createMapReadableBuffer(t.size);e.copyBufferToBuffer(t,0,n,0,n.size),this.callbacksOnComplete.push(async()=>{const e=await PM.getMappedArrayBuffer(n);await i(e),n.destroy()})}arrayBufferPromise(e,t){return new Promise((i,n)=>{this.withBuffer(e,t,async e=>{i(e)})})}async arrayBuffer(e,t){return this.arrayBufferPromise(e,t)}async u32(e,t){return new Uint32Array(await this.arrayBufferPromise(e,t))}async i32(e,t){return new Int32Array(await this.arrayBufferPromise(e,t))}async f32(e,t){return new Float32Array(await this.arrayBufferPromise(e,t))}async u32Numbers(e,t){return[...await this.u32(e,t)]}async i32Numbers(e,t){return[...await this.i32(e,t)]}async f32Numbers(e,t){return[...await this.f32(e,t)]}logIndexed(e,t,i,n){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.withBuffer(e,t,async e=>{let t=n.fromArrayBuffer(e);const s=r?r():t.length;t=t.slice(0,s),ak.startGroup(`[buffer] ${i} (${s})`),console.log(t.map(ak.toIndexedString).join("\n")),ak.endGroup()})}logIndexedMultiline(e,t,i,n){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.withBuffer(e,t,async e=>{let t=n.fromArrayBuffer(e);const s=r?r():t.length;t=t.slice(0,s),ak.startGroup(`[buffer] ${i} (${s})`),console.log(t.map(ak.toMultiIndexedString).join("\n")),ak.endGroup()})}logIndexedImmediate(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.callbacksOnComplete.push(async()=>{let r=i.fromArrayBuffer(e);const s=n?n():r.length;r=r.slice(0,s),ak.startGroup(`[buffer] ${t} (${s})`),console.log(r.map(ak.toIndexedString).join("\n")),ak.endGroup()})}static toIndexedString(e,t){return`${t} ${e.toString()}`}static toMultiIndexedString(e,t){const i=t.toString().replace(/./g," ");return e.toStrings().map((e,n)=>`${0===n?t:i} ${e}`).join("\n")}static startGroup(e){console.groupCollapsed(e)}static endGroup(){console.groupEnd()}}_defineProperty(ak,"RasterU32",{fromArrayBuffer:e=>[...new Uint32Array(e)]}),_defineProperty(ak,"RasterI32",{fromArrayBuffer:e=>[...new Int32Array(e)]}),_defineProperty(ak,"RasterF32",{fromArrayBuffer:e=>[...new Float32Array(e)]}),St.register("BufferLogger",ak);class ok{constructor(e,t){_defineProperty(this,"querySet",null),_defineProperty(this,"queryBuffer",null),_defineProperty(this,"index",0),_defineProperty(this,"timestampNames",[]),this.deviceContext=e,this.capacity=t,e&&e.device.features.has("timestamp-query")&&(this.querySet=e.createQuerySet(t),this.queryBuffer=e.createQueryBuffer(8*t))}getGPUComputePassTimestampWrites(e){if(this.querySet&&this.queryBuffer){this.timestampNames.push(e+" start"),this.timestampNames.push(e+" end");const t=this.index++,i=this.index++;return{querySet:this.querySet,beginningOfPassWriteIndex:t,endOfPassWriteIndex:i}}return null}resolve(e,t){if(this.querySet&&this.queryBuffer){e.resolveQuerySet(this.querySet,0,this.index,this.queryBuffer,0);const i=this.queryBuffer;return new Promise((n,r)=>{t.withBuffer(e,i,async e=>{const t=[...new BigInt64Array(e)].slice(0,this.index),i=t.map(e=>Number(e-t[0])),r=new lk(i,this.timestampNames);this.index=0,this.timestampNames=[],n(r)})})}return Promise.resolve(null)}dispose(){var e,t;null===(e=this.querySet)||void 0===e||e.destroy(),null===(t=this.queryBuffer)||void 0===t||t.destroy()}}class lk{constructor(e,t){this.timestamps=e,this.timestampNames=t,this.deltas=e.slice(1).map((t,i)=>t-e[i])}toString(){const e=e=>{let t="",i=""+fl.roundSymmetric(e);for(;i.length;)i.length>3?(t=","+i.slice(-3)+t,i=i.slice(0,-3)):(t=i+t,i="");return t},t=Math.max(...this.timestamps.map(t=>e(t).length)),i=Math.max(...this.deltas.map(t=>e(t).length)),n=Math.max(...this.timestampNames.map(e=>e.length));let r="";r+=`${qM.padLeft("time"," ",t)} ${qM.padRight("name"," ",n)} ${qM.padLeft("delta"," ",i)}\n`;for(let s=0;s<this.timestamps.length;s++){r+=`${qM.padLeft(e(this.timestamps[s])," ",t)} ${qM.padRight(this.timestampNames[s]," ",n)} ${s<this.deltas.length?qM.padLeft(e(this.deltas[s])," ",i):""}\n`}return r}static averageTimestamps(e){if(0===e.length)throw new Error("Need at least one result");const t=_.range(0,e[0].timestamps.length).map(t=>_.sum(e.map(e=>e.timestamps[t]))/e.length);return new lk(t,e[0].timestampNames)}}St.register("TimestampLogger",ok);class hk{constructor(e,t){this.buffer=e,this.type=t}setValue(e,t){const i=new qM;this.type.encode(t,i),e.queue.writeBuffer(this.buffer,0,i.fullArrayBuffer,0,i.byteLength)}async getValue(e,t){const i=await t.arrayBuffer(e,this.buffer);return this.type.decode(new qM(i),0)}dispose(){this.buffer.destroy()}static createArray(e,t,i,n){const r=e.createBuffer(i*t.bytesPerElement);return new hk(r,HM(t,i,n))}static createArrayFromData(e,t,i){const n=e.createBuffer(i.length*t.bytesPerElement),r=new hk(n,HM(t,i.length));return r.setValue(e.device,i),r}static wrapArray(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return 0===n&&(n=Math.floor(e.size/t.bytesPerElement)),new hk(e,HM(t,n,i))}}St.register("TypedBuffer",hk);class uk{constructor(e,t){this.groupIndex=e,this.bindingIndex=t}getWGSLAnnotation(){return`@group(${this.groupIndex}) @binding(${this.bindingIndex})`}}St.register("BindingLocation",uk);class ck{constructor(e,t){this.type=e,this.location=t}getBindGroupLayoutEntry(){return this.type.getBindGroupLayoutEntry(this.location.bindingIndex)}getBindGroupEntry(e){return this.type.getBindGroupEntry(this.location.bindingIndex,e)}getStorageAccess(){return this.type===MM.READ_ONLY_STORAGE_BUFFER?"read":"read_write"}}St.register("Binding",ck);class dk{constructor(e,t){this.resource=e,this.binding=t}getBindGroupEntry(){return this.binding.getBindGroupEntry(this.resource)}}St.register("BoundResource",dk);St.register("BoundBuffer",class extends dk{constructor(e,t){super(e.buffer,t),this.typedBuffer=e}});St.register("BoundTextureView",class extends dk{constructor(e,t){super(e,t),this.textureView=e}});class pk{constructor(e,t,i,n){this.deviceContext=e,this.name=t,this.groupIndex=i,this.bindingMap=n,this.layout=e.device.createBindGroupLayout({label:t+" bind group layout",entries:Object.keys(n).filter(e=>null!==n[e]).map(e=>n[e].getBindGroupLayoutEntry())})}static createZero(e,t,i,n){const r={};if(Object.keys(n).forEach((e,t)=>{const i=n[e];null!==i&&(r[e]=new ck(i,new uk(0,t)))}),i){const e=Pk.getBoundLogBinding();0===e.location.groupIndex&&(r.log=e)}else r.log=null;return new pk(e,t,0,r)}static createNonzero(e,t,i,n){const r={};return Object.keys(n).forEach((e,t)=>{const s=n[e];null!==s&&(r[e]=new ck(s,new uk(i,t)))}),new pk(e,t,i,r)}}St.register("BindGroupLayout",pk);class mk{constructor(e,t){this.deviceContext=e,this.bindGroupLayouts=t,this.layout=e.device.createPipelineLayout({bindGroupLayouts:t.map(e=>e.layout)}),this.bindingMap=No({},...t.map(e=>e.bindingMap))}static create(e,t,i,n,r){return new mk(e,[t,i,n,r].filter(_.identity))}}St.register("PipelineLayout",mk);class gk{constructor(e,t,i,n){this.deviceContext=e,this.name=t,this.layout=i,this.resourceMap=n,this.bindGroup=e.device.createBindGroup({label:this.name+" bind group",layout:i.layout,entries:Object.keys(n).filter(e=>{const t=null!==i.bindingMap[e],r=null!==n[e];return t&&r}).map(e=>{const t=i.bindingMap[e],r=n[e];return t.getBindGroupEntry(r instanceof hk?r.buffer:r)})})}static createZero(e,t,i,n,r){return new gk(e,t,i,{...r,log:n?e.getLogTypedBuffer():null})}}St.register("BindGroup",gk);class fk{constructor(e,t,i,n,r,s){_defineProperty(this,"logBarrierPipeline",null),this.deviceContext=e,this.name=t,this.wgsl=i,this.pipelineLayout=n,this.log=r,console.groupCollapsed("[shader] "+t),console.log(wk(i)),console.groupEnd();const a=e.device.createShaderModule({label:t,code:i,compilationHints:[{entryPoint:"main",layout:n.layout}]}),o={label:t+" pipeline",layout:n.layout,compute:{module:a,entryPoint:"main"}},l=r?{label:"logBarrier pipeline",layout:n.layout,compute:{module:e.device.createShaderModule({label:"logBarrier",code:fk.getLogBarrierWGSL()}),entryPoint:"main"}}:null;s?this.pipelinePromise=(async()=>(this.pipeline=await e.device.createComputePipelineAsync(o),l&&(this.logBarrierPipeline=await e.device.createComputePipelineAsync(l)),this.pipeline))():(this.pipeline=e.device.createComputePipeline(o),this.pipelinePromise=Promise.resolve(this.pipeline),l&&(this.logBarrierPipeline=e.device.createComputePipeline(l)))}static getLogBarrierWGSL(){const e=new Pk("log barrier",!0).with(e=>sL(e));return xk(Tk(e.toString()))}static withContext(e,t,i,n,r){const s=new Pk(t,r).with(i),a=xk(Tk(s.toString(),!1));return new fk(e,t,a,n,r,!1)}static async withContextAsync(e,t,i,n,r){const s=new Pk(t,r).with(i),a=xk(Tk(s.toString(),!1)),o=new fk(e,t,a,n,r,!0);return await o.pipelinePromise,o}}_defineProperty(fk,"logBarrierMap",new WeakMap),St.register("ComputePipeline",fk);class yk{constructor(e,t){_defineProperty(this,"currentPipeline",null),_defineProperty(this,"currentBindGroups",new Map),this.computePassEncoder=e.beginComputePass(t)}prepare(e,t){this.currentPipeline!==e&&(this.computePassEncoder.setPipeline(e.pipeline),this.currentPipeline=e);for(let i=0;i<t.length;i++){const e=t[i];this.currentBindGroups.get(i)!==e&&(this.computePassEncoder.setBindGroup(i,e.bindGroup),this.currentBindGroups.set(i,e))}}attemptLogBarrier(e){e.logBarrierPipeline&&(this.currentPipeline=null,this.computePassEncoder.setPipeline(e.logBarrierPipeline),this.computePassEncoder.dispatchWorkgroups(1,1,1))}dispatchPipeline(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return this.prepare(e,t),this.computePassEncoder.dispatchWorkgroups(i,n,r),this.attemptLogBarrier(e),this}dispatchPipelineIndirect(e,t,i,n){return this.prepare(e,t),this.computePassEncoder.dispatchWorkgroupsIndirect(i,n),this.attemptLogBarrier(e),this}end(){this.computePassEncoder.end()}}St.register("ComputePass",yk);const Ek={getTimestampWrites:_.constant(null)};class vk{constructor(e,t,i,n){this.deviceContext=e,this.encoder=t,this.bufferLogger=i;const r=Ro()({},Ek,n);this.getTimestampWrites=r.getTimestampWrites}getComputePass(e){const t={label:e+" compute pass"},i=this.getTimestampWrites(e);return null!==i&&(t.timestampWrites=i),new yk(this.encoder,t)}setTypedBufferValue(e,t){e.setValue(this.deviceContext.device,t)}async getTypedBufferValue(e){return e.getValue(this.encoder,this.bufferLogger)}async arrayBuffer(e){return this.bufferLogger.arrayBuffer(this.encoder,e)}async u32(e){return this.bufferLogger.u32(this.encoder,e)}async i32(e){return this.bufferLogger.i32(this.encoder,e)}async f32(e){return this.bufferLogger.f32(this.encoder,e)}async u32Numbers(e){return this.bufferLogger.u32Numbers(this.encoder,e)}async i32Numbers(e){return this.bufferLogger.i32Numbers(this.encoder,e)}async f32Numbers(e){return this.bufferLogger.f32Numbers(this.encoder,e)}static async execute(e,t,i,n){const r=e.device.createCommandEncoder({label:"the encoder"}),s=new ak(e),a=new vk(e,r,s,n),o=i(a),l=t?a.arrayBuffer(e.getLogTypedBuffer().buffer):Promise.resolve(null),h=r.finish();e.device.queue.submit([h]),await s.complete();const u=await l;if(u){const e=new Uint32Array(u),t=e[0],i=`logging used ${t} of ${e.length-1} u32s (${fl.roundSymmetric(100*t/(e.length-1))}%)`;console.log(i),tk.analyze(u).forEach(e=>{e.logLines.forEach(t=>{console.log(e.shaderName,`>>> ${t.info.logName}${null!==t.additionalIndex?` (${t.additionalIndex})`:""}`,t.info.lineToLog(t))})}),console.log(i)}return o}}St.register("Executor",vk);const Ak={globalIndex:"global_id.x"},bk={workgroupIndex:"workgroup_id.x"},Sk={localIndex:"local_id.x"},_k={lengthExpression:null},xk=e=>{const t=e.split("\n").filter(e=>e.trim().length>0);let i=0,n="";for(let r=0;r<t.length;r++){const e=t[r].trim();(e.startsWith("}")||e.startsWith(")"))&&i--,n+=`${"  ".repeat(Math.max(i,0))}${e}\n`,(e.endsWith("{")||e.endsWith("("))&&i++}return n};St.register("partialWGSLBeautify",xk);const wk=e=>e.split("\n").map((e,t)=>`${t+1} ${e}`).join("\n");St.register("addLineNumbers",wk);const Tk=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.replace(t?/\/\**?\*\//g:/\/\*[^*]*?[^*]\*\//g,"").replace(/\r\n/g,"\n").split("\n").map(e=>{const t=e.indexOf("//");return t>=0?e.substring(0,t):e}).join("\n")};St.register("stripWGSLComments",Tk);class Pk{constructor(e,t){_defineProperty(this,"declarations",[]),this.shaderName=e,this.log=t}static getLogBindingLocation(){return new uk(0,64)}static getBoundLogBinding(){return new ck(MM.STORAGE_BUFFER,Pk.getLogBindingLocation())}add(e,t){this.declarations.some(t=>t.name===e)||this.declarations.push(new Ck(e,t))}toString(){return this.declarations.map(e=>e.declarations).join("\n")}with(e){const t=e(this);return this.add("main",t),this}}St.register("WGSLContext",Pk);class Ck{constructor(e,t){this.name=e,this.declarations=t}}const Vk=(e,t,i,n,r)=>{if(t)return`${e} = ${t(n,r)};`;if(i)return`\n      ${i(e,n,r)}\n    `;throw new Error("Did not provide binaryExpression or binaryStatements")},Rk=Vk;St.register("binaryExpressionStatementWGSL",Vk);const Nk={..._k,...bk,...Sk},Mk=(e,t)=>{const i=Ro()({},Nk,t),n=i.workgroupSize,r=i.grainSize,s=i.lengthExpression,a=i.callback;return`\n    ${bL(0,i.grainSize,e=>`\n      {\n        let coalesced_local_index = ${xt(e*n)} + ${i.localIndex};\n        let coalesced_data_index = ${i.workgroupIndex} * ${xt(n*r)} + coalesced_local_index;\n        ${Dk(s?"coalesced_data_index < "+s:null,`\n          ${a("coalesced_local_index","coalesced_data_index")}\n        `)}\n      }\n    `)}\n  `},kk=Mk;St.register("coalescedLoopWGSL",Mk);const Lk=e=>`/*** ${e} ***/`,Ik=Lk;St.register("commentWGSL",Lk);const Bk=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return null===e?t:`\n      if ( ${e} ) {\n        ${t}\n      }\n      ${null!==i?`\n        else {\n          ${i}\n        }\n      `:""}\n    `},Dk=Bk;St.register("conditionalIfWGSL",Bk);const Ok=e=>{const t=e.i,i=e.workgroupSize,n=e.grainSize;return`\n    // TODO: optimizations if workgroupSize or grainSize is 1\n    (\n      ( ( ${t} ) / ${xt(i*n)} ) * ${xt(i*n)} +\n      ( ( ${t} ) % ${xt(i)} ) * ${xt(n)} +\n      ( ( ( ${t} ) % ${xt(i*n)} ) / ${xt(i)} )\n    )\n  `.split("\n").map(e=>e.trim()).join(" ")};St.register("fromStripedIndexWGSL",Ok);const qk=e=>{const t=e.i,i=e.size;return`( reverseBits( ${t} ) >> ${xt(32-Math.log2(i))} )`};St.register("getConvergentIndexWGSL",qk);const Yk=qk;St.register("toConvergentIndexWGSL",Yk);const Hk=qk;St.register("fromConvergentIndexWGSL",Hk);const Gk={loadExpression:null,loadStatements:null,outOfRangeValue:null,inputAccessOrder:"striped",factorOutSubexpressions:!0,...Ak,...bk,...Sk,..._k},Fk=e=>{const t=Ro()({},Gk,e),i=t.loadExpression,n=t.loadStatements,r=t.storeStatements,s=t.type,a=t.workgroupSize,o=t.grainSize,l=t.globalIndex,h=t.workgroupIndex,u=t.localIndex,c=t.lengthExpression,d=t.outOfRangeValue,p=t.inputOrder,m=t.inputAccessOrder,g=t.factorOutSubexpressions,f=[],y=[];let E=null,v=null;if("blocked"===m)g?(f.push(`let base_blocked_index = ${xt(o)} * ${l};`),y.push(e=>`let blocked_index = base_blocked_index + ${xt(e)};`),E=e=>"blocked_index",null!==c&&(v=E)):(E=e=>`${xt(o)} * ${l} + ${xt(e)}`,null!==c&&(v=E));else{if("striped"!==m)throw new Error("Unrecognized inputAccessOrder: "+m);if(g){if("striped"===p&&c?(f.push(`let base_workgroup = ${h} * ${xt(a*o)};`),f.push(`let base_striped_index = base_workgroup + ${u};`),f.push(`let base_blocked_index = base_workgroup + ${u} * ${xt(o)};`)):f.push(`let base_striped_index = ${h} * ${xt(a*o)} + ${u};`),y.push(e=>`let striped_index = base_striped_index + ${xt(e*a)};`),E=()=>"striped_index",null!==c)if("striped"===p)v=e=>"base_blocked_index + "+xt(e);else{if("blocked"!==p)throw new Error("Unrecognized inputOrder: "+p);v=E}}else if(E=e=>`${h} * ${xt(a*o)} + ${u} + ${xt(e*a)}`,null!==c)if("striped"===p)v=e=>`${h} * ${xt(a*o)} + ${u} * ${xt(o)} + ${xt(e)}`;else{if("blocked"!==p)throw new Error("Unrecognized inputOrder: "+p);v=E}}const A=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Dk(v?`${v(e)} < ${c}`:null,t,i)},b=(e,t,r)=>i?`\n    ${r?r+" ":""}${e} = ${i(E(t))};\n  `:`\n    ${r?`\n      var ${e}: ${s.valueType};\n    `:""}\n    ${n(e,E(t))}\n  `;return`\n    ${Ik("begin load_multiple")}\n    {\n      ${f.join("\n")}\n      ${bL(0,o,e=>`\n        {\n          ${y.map(t=>t(e)).join("\n")}\n\n          ${d?`\n            var lm_val: ${s.valueType};\n            ${A(e,`\n              ${b("lm_val",e)}\n            `,`\n              lm_val = ${d};\n            `)}\n\n            // TODO: can we further simplify?\n            ${r(`${E(e)} - ${h} * ${xt(a*o)}`,"lm_val")}\n          `:`\n            ${A(e,`\n              var lm_val: ${s.valueType};\n              ${b("lm_val",e)}\n\n              ${r(`${E(e)} - ${h} * ${xt(a*o)}`,"lm_val")}\n            `)}\n          `}\n        }\n      `)}\n    }\n    ${Ik("end load_multiple")}\n  `},zk=Fk;St.register("loadMultipleWGSL",Fk);const Uk={loadExpression:null,loadStatements:null,inputOrder:"blocked",inputAccessOrder:"striped",sequentialReduceStyle:"factored",useSelectIfOptional:!1,orderOverride:!1,...Ak,...bk,...Sk,..._k},Wk=e=>{const t=Ro()({},Uk,e),i=t.value,n=t.binaryOp,r=t.loadExpression,s=t.loadStatements,a=t.workgroupSize,o=t.grainSize,l=t.globalIndex,h=t.workgroupIndex,u=t.localIndex,c=t.lengthExpression,d=t.inputOrder,p=t.inputAccessOrder,m=t.sequentialReduceStyle,g=t.useSelectIfOptional,f=(t.orderOverride,[]),y=[];let E=null,v=null;if("blocked"===p)"factored"===m?(f.push(`let base_blocked_index = ${xt(o)} * ${l};`),y.push(e=>`let blocked_index = base_blocked_index + ${xt(e)};`),E=()=>"blocked_index",null!==c&&(v=E)):(E=e=>`${xt(o)} * ${l} + ${xt(e)}`,null!==c&&(v=E));else{if("striped"!==p)throw new Error("Unrecognized inputAccessOrder: "+p);if("factored"===m){if("striped"===d&&c?(f.push(`let base_workgroup = ${h} * ${xt(a*o)};`),f.push(`let base_striped_index = base_workgroup + ${u};`),f.push(`let base_blocked_index = base_workgroup + ${u} * ${xt(o)};`)):f.push(`let base_striped_index = ${h} * ${xt(a*o)} + ${u};`),y.push(e=>`let striped_index = base_striped_index + ${xt(e*a)};`),E=()=>"striped_index",null!==c)if("striped"===d)v=e=>"base_blocked_index + "+xt(e);else{if("blocked"!==d)throw new Error("Unrecognized inputOrder: "+d);v=E}}else if(E=e=>`${h} * ${xt(a*o)} + ${u} + ${xt(e*a)}`,null!==c)if("striped"===d)v=e=>`${h} * ${xt(a*o)} + ${u} * ${xt(o)} + ${xt(e)}`;else{if("blocked"!==d)throw new Error("Unrecognized inputOrder: "+d);v=E}}const A=e=>v?`select( ${n.identityWGSL}, ${r(E(e))}, ${v(e)} < ${c} )`:r(E(e)),b=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Dk(v?`${v(e)} < ${c}`:null,t,i)},S=(e,t,i)=>r?`\n    ${i?i+" ":""}${e} = ${r(E(t))};\n  `:`\n    ${i?`\n      var ${e}: ${n.type.valueType};\n    `:""}\n    ${s(e,E(t))}\n  `,_=e=>0===e?A(0):n.combineExpression(_(e-1),A(e)),x=(e,t,i)=>Rk(e,n.combineExpression||null,n.combineStatements||null,t,i);return"nested"===m?`\n    var ${i} = ${_(o-1)};\n  `:`\n    ${Ik("begin load_reduced")}\n    var ${i}: ${n.type.valueType};\n    {\n      ${f.join("\n")}\n      {\n        ${y.map(e=>e(0)).join("\n")}\n        ${r&&g?`\n          ${i} = ${A(0)};\n        `:`\n          ${w=i,T=0,b(T,`\n    ${S(w,T)}\n  `,`\n    ${w} = ${n.identityWGSL};\n  `)}\n        `}\n      }\n      ${bL(1,o,e=>`\n        {\n          ${y.map(t=>t(e)).join("\n")}\n          ${r&&g?`\n            ${x(i,i,A(e))}\n          `:`\n            ${b(e,`\n              ${S("next_value",e,"let")}\n              ${x(i,i,"next_value")}\n            `)}\n          `}\n        }\n      `)}\n    }\n    ${Ik("end load_reduced")}\n  `;var w,T},Xk=Wk;St.register("loadReducedWGSL",Wk);const jk={additionalIndex:null,type:null,writeData:null,dataCount:0,lineToLog:null},Qk=(e,t)=>{const i=Ro()({},jk,t),n=i.name,r=i.additionalIndex,s=i.type,a=i.writeData,o=i.dataCount;let l=i.lineToLog;if(!e.log)return"";if(e.add("log",`\n    struct _Log {\n      next_space: atomic<u32>,\n      data: array<u32>\n    };\n    ${Pk.getLogBindingLocation().getWGSLAnnotation()}\n    var<storage, read_write> _log: _Log;\n  `),l||(l=0===o?rk.toLogNull:rk.toLogExistingFlat),null===n)return"\n      {\n        let _log_offset = atomicAdd( &_log.next_space, 1u );\n        _log.data[ _log_offset ] = 0u;\n      }\n    ";{const t=tk.register({type:s,logName:n,shaderName:e.shaderName,dataCount:"number"==typeof o?o:null,hasAdditionalIndex:null!==r,lineToLog:l}),i=7+(null!==r?1:0)+("number"!=typeof o?1:0);let h=0;return`\n      {\n        ${"number"==typeof o?`\n          // handle a static dataCount\n          let _log_item_length = ${xt(i+o*(0===o?0:s.bytesPerElement/4))};\n        `:"string"==typeof o?`\n          // handle a dynamic (string:expression:u32) dataCount\n          let _log_data_count = ${o};\n          let _log_item_length = ${xt(i)} + _log_data_count * ${xt(s.bytesPerElement/4)};\n        `:`\n          // handle a dynamic (string:statements) dataCount\n          var _log_data_count: u32;\n          ${o("_log_data_count")}\n          let _log_item_length = ${xt(i)} + _log_data_count * ${xt(s.bytesPerElement/4)};\n        `}\n\n        var _log_offset = atomicAdd( &_log.next_space, _log_item_length );\n\n        // Don't write past the end (it could scribble, mess up our atomic counter, and make us think we did NOT overrun it)\n        if ( _log_offset + _log_item_length > arrayLength( &_log.data ) ) {\n          _log.data[ 0u ] = 0xffffffffu;\n          _log_offset = 1;\n        }\n\n        _log.data[ _log_offset + ${xt(h++)} ] = ${xt(t)};\n        _log.data[ _log_offset + ${xt(h++)} ] = workgroup_id.x;\n        _log.data[ _log_offset + ${xt(h++)} ] = workgroup_id.y;\n        _log.data[ _log_offset + ${xt(h++)} ] = workgroup_id.z;\n        _log.data[ _log_offset + ${xt(h++)} ] = local_id.x;\n        _log.data[ _log_offset + ${xt(h++)} ] = local_id.y;\n        _log.data[ _log_offset + ${xt(h++)} ] = local_id.z;\n\n        ${null!==r?`\n          _log.data[ _log_offset + ${xt(h++)} ] = ${r};\n        `:""}\n\n        ${"number"!=typeof o?`\n          _log.data[ _log_offset + ${xt(h++)} ] = _log_data_count;\n        `:""}\n\n        ${0!==o?`\n          ${a((e,t)=>s.writeU32s((t,i)=>`_log.data[ _log_offset + ${xt(h)} + ( ${e} ) * ${xt(s.bytesPerElement/4)} + ( ${t} ) ] = ${i};`,t))}\n        `:""}\n      }\n    `}},Kk=Qk;St.register("logWGSL",Qk);const Zk={lengthExpression:null,relativeLengthExpression:null,skipBarriers:!1,accessExpression:null,relativeAccessExpression:null},Jk=(e,t)=>{const i=No({},Zk,t),n=i.workgroupSize,r=i.grainSize,s=i.lengthExpression,a=i.relativeLengthExpression,o=i.skipBarriers,l=i.accessExpression,h=i.relativeAccessExpression;return e.log?`\n      {\n        ${o?"":"\n          workgroupBarrier();\n          storageBarrier();\n        "}\n\n        let base_log_index = workgroup_id.x * ${xt(n*r)};\n        let base_local_log_index = ${xt(r)} * local_id.x;\n        let combined_base = base_log_index + base_local_log_index;\n\n        ${null!==s?`\n          if ( combined_base < ${s} ) {\n        `:""}\n        ${null!==a?`\n          if ( base_local_log_index < ${a} ) {\n        `:""}\n\n        var log_length = ${xt(r)};\n        ${null!==s?`\n          log_length = min( log_length, ${s} - combined_base );\n        `:""}\n        ${null!==a?`\n          log_length = min( log_length, ${a} - base_local_log_index );\n        `:""}\n\n        ${Kk(e,No({dataCount:"log_length",writeData:e=>`\n            for ( var _i = 0u; _i < log_length; _i++ ) {\n              ${l?`\n                // "global" access\n                let _expr = ${l("combined_base + _i")};\n              `:`\n                // "local" access\n                let _expr = ${h("base_local_log_index + _i")};\n              `}\n              ${e("_i * "+xt(i.type.bytesPerElement/4),"_expr")}\n            }\n          `},i))}\n\n        ${null!==a?"\n          }\n        ":""}\n        ${null!==s?"\n          }\n        ":""}\n      }\n    `:""},$k=Jk;St.register("logRakedWGSL",Jk);const eL=(e,t)=>{const i=No({name:t.value,writeData:e=>`\n      ${e("0u","value")}\n    `,dataCount:1},t);return Kk(e,i)},tL=eL;St.register("logValueWGSL",eL);const iL=(e,t)=>Kk(e,{name:t}),nL=iL;St.register("logStringWGSL",iL);const rL=e=>`\n    @compute @workgroup_size(1)\n    fn main(\n      @builtin(global_invocation_id) global_id: vec3u,\n      @builtin(local_invocation_id) local_id: vec3u,\n      @builtin(workgroup_id) workgroup_id: vec3u\n    ) {\n      ${Kk(e,{name:null})}\n    }\n  `,sL=rL;St.register("mainLogBarrier",rL);const aL={stripeOutput:!1,convergentRemap:!1,loadReducedOptions:{},reduceOptions:{}},oL=(e,t)=>{const i=Ro()({},aL,t),n=i.workgroupSize,r=i.grainSize,s=i.binaryOp,a=i.stripeOutput,o=i.convergentRemap;return`\n    \n    ${i.bindings.input.location.getWGSLAnnotation()}\n    var<storage, ${i.bindings.input.getStorageAccess()}> input: array<${s.type.valueType}>;\n    \n    ${i.bindings.output.location.getWGSLAnnotation()}\n    var<storage, ${i.bindings.output.getStorageAccess()}> output: array<${s.type.valueType}>;\n    \n    var<workgroup> scratch: array<${s.type.valueType}, ${n}>;\n    \n    @compute @workgroup_size(${n})\n    fn main(\n      @builtin(global_invocation_id) global_id: vec3u,\n      @builtin(local_invocation_id) local_id: vec3u,\n      @builtin(workgroup_id) workgroup_id: vec3u\n    ) {\n      ${nL(e,"mainReduceWGSL start "+s.name)}\n    \n      ${Xk(No({value:"value",binaryOp:s,loadExpression:e=>`input[ ${e} ]`,workgroupSize:n,grainSize:r},i.loadReducedOptions))}\n    \n      ${o?`\n        scratch[ ${Yk({i:"local_id.x",size:n})} ] = value;\n    \n        workgroupBarrier();\n      `:""}\n    \n      ${cL(e,No({value:"value",binaryOp:s,scratch:"scratch",workgroupSize:n,scratchPreloaded:o,valuePreloaded:!o},i.reduceOptions))}\n    \n      if ( local_id.x == 0u ) {\n        output[ ${a?vL({i:"workgroup_id.x",workgroupSize:n,grainSize:r}):"workgroup_id.x"} ] = value;\n      }\n    }\n  `},lL=oL;St.register("mainReduceWGSL",oL);const hL={mapScratchIndex:_.identity,convergent:!1,scratchPreloaded:!1,valuePreloaded:!0,...Sk},uL=(e,t)=>{const i=Ro()({},hL,t),n=i.value,r=i.scratch,s=i.workgroupSize,a=i.binaryOp,o=i.localIndex,l=i.mapScratchIndex,h=i.convergent,u=i.scratchPreloaded,c=i.valuePreloaded,d=h?Math.log2(s):0,p=h?0:Math.log2(s);return`\n    ${Ik("begin reduce convergent:"+h)}\n    ${u?"":`\n      ${r}[ ${l(o)} ] = ${n};\n    `}\n    ${c?"":`\n      ${n} = ${r}[ ${l(o)} ];\n    `}\n    \n    ${tL(e,{name:"before reduce convergent:"+h,value:"value",type:a.type})}\n    \n    ${bL(d,p,(e,t,i)=>{return`\n      // We don't need the first workgroupBarrier() if scratchPreloaded is true\n      ${u&&t?"":"\n        workgroupBarrier();\n      "}\n\n      // TODO: check performance differences with a select/combine?\n      if ( ${(e=>h?`${o} < ${xt(1<<e-1)}`:`${o} % ${xt(1<<e+1)} == 0u`)(e)} ) {\n        ${s=n,c=n,d=`${r}[ ${l((e=>h?`${o} + ${xt(1<<e-1)}`:`${o} + ${xt(1<<e)}`)(e))} ]`,Rk(s,a.combineExpression||null,a.combineStatements||null,c,d)}\n\n        ${i?"":`\n          ${r}[ ${l(o)} ] = ${n};\n        `}\n      }\n    `;var s,c,d})}\n    ${Ik("end reduce")}\n  `},cL=uL;St.register("reduceWGSL",uL);const dL={direction:"left",exclusive:!1,mapScratchIndex:_.identity,needsValidScratch:!1,scratchPreloaded:!1,valuePreloaded:!0,...Sk},pL=(e,t)=>{const i=Ro()({},dL,t),n=i.value,r=i.scratch,s=i.direction,a=i.workgroupSize,o=i.binaryOp,l=i.localIndex,h=i.mapScratchIndex,u=i.exclusive,c=i.needsValidScratch,d=i.scratchPreloaded,p=i.valuePreloaded;return`\n    ${Ik(`begin scan direction:${s} exclusive:${u}`)}\n    ${d?"":`\n      ${r}[ ${h(l)} ] = ${n};\n    `}\n    ${p?"":`\n      ${n} = ${r}[ ${h(l)} ];\n    `}\n\n    ${bL(0,Math.log2(a),(e,t,i)=>{return`\n      // TODO: duplicated with reduce.wgsl... factor something out? Eventually?\n      // We don't need the first workgroupBarrier() if scratchPreloaded is true\n      ${d&&t?"":"\n        workgroupBarrier();\n      "}\n\n      // TODO: check performance differences with a select/combine?\n      if ( ${(e=>"left"===s?`${l} >= ${xt(1<<e)}`:`${l} < ${xt(a-(1<<e))}`)(e)} ) {\n        ${p=n,m=(e=>"left"===s?`${r}[ ${h(`${l} - ${xt(1<<e)}`)} ]`:n)(e),g=(e=>"left"===s?n:`${r}[ ${h(`${l} + ${xt(1<<e)}`)} ]`)(e),Rk(p,o.combineExpression||null,o.combineStatements||null,m,g)}\n      }\n\n      ${!i||c||u?`\n        workgroupBarrier();\n\n        ${r}[ ${h(l)} ] = ${n};\n      `:""}\n    `;var p,m,g})}\n\n    // TODO: consider shift at start to potentially avoid this workgroupBarrier?\n    ${u?`\n      workgroupBarrier();\n\n      ${"left"===s?`\n        ${n} = select( ${o.identityWGSL}, ${r}[ ${h(l+" - 1u")} ], ${l} > 0u );\n      `:`\n        ${n} = select( ${o.identityWGSL}, ${r}[ ${h(l+" + 1u")} ], ${l} < ${xt(a-1)} );\n      `}\n    `:""}\n\n    // TODO: consider if we should update the scratch values after, OR keep it nice after exclusive.\n    ${Ik("end scan")}\n  `},mL=pL;St.register("scanWGSL",pL);const gL={direction:"left",exclusive:!1,storeReduction:null,stripeReducedOutput:!1,getAddedValue:null,addedValueNeedsWorkgroupBarrier:!0,...bk,...Sk},fL=(e,t)=>{const i=Ro()({},gL,t),n=i.scratch,r=i.direction,s=i.binaryOp,a=i.workgroupSize,o=i.grainSize,l=i.workgroupIndex,h=i.localIndex,u=i.storeReduction,c=i.stripeReducedOutput,d=i.exclusive,p=i.getAddedValue,m=i.addedValueNeedsWorkgroupBarrier,g=(e,t,i)=>Rk(e,s.combineExpression||null,s.combineStatements||null,t,i);return`\n    ${Ik("begin scan_raked")}\n\n    // TODO: consider factoring out ${h} * ${xt(o)}? -- it will take up an extra register?\n\n    // TODO: isolate out into scan_sequential?\n    // Sequential scan of each thread's tile (inclusive)\n    ${Ik("begin (sequential scan of tile)")}\n    var value = ${n}[ ${h} * ${xt(o)} ];\n    ${bL(1,o,e=>`\n      {\n        ${g("value","value",`${n}[ ${h} * ${xt(o)} + ${xt(e)} ]`)}\n        ${n}[ ${h} * ${xt(o)} + ${xt(e)} ] = value;\n      }\n    `)}\n    ${Ik("end (sequential scan of tile)")}\n\n    // For the first scan step, since it will access other indices in scratch\n    workgroupBarrier();\n\n    // Scan the last-scanned element of each thread's tile (inclusive)\n    ${mL(e,{value:"value",scratch:n,workgroupSize:a,binaryOp:s,mapScratchIndex:e=>`( ${e} ) * ${xt(o)} + ${xt(o-1)}`,exclusive:!1,needsValidScratch:!0,scratchPreloaded:!0,valuePreloaded:!0})}\n\n    workgroupBarrier();\n\n    // IF exclusive and we want the full reduced value, we'd need to extract it now.\n    // TODO: we'll need to change indices if we allow right-scans(!)\n    ${u?`\n      ${Ik("begin (store reduction)")}\n      if ( ${h} == ${xt(a-1)} ) {\n        ${u(c?vL({i:l,workgroupSize:a,grainSize:o}):l,"value")}\n      }\n      ${Ik("end (store reduction)")}\n    `:""}\n\n    // Add those values into all the other elements of the next tile\n    ${Ik("begin (add scanned values to tile)")}\n    var added_value = select( ${s.identityWGSL}, ${n}[ ${h} * ${xt(o)} - 1u ], ${h} > 0 );\n    ${p?`\n      ${Ik("begin (get global added values)")}\n\n      // Get the value we'll add to everything\n      var workgroup_added_value: ${s.type.valueType};\n      ${p("workgroup_added_value")}\n\n      // We need to LOAD the value before anything writes to it, since we'll be modifying those values\n      ${m?"\n        workgroupBarrier();\n      ":""}\n\n      // Update the last element of this tile (which would otherwise go untouched)\n      {\n        let last_value = ${n}[ ${h} * ${xt(o)} + ${xt(o-1)} ];\n\n        var new_last_value: ${s.type.valueType};\n        ${g("new_last_value","workgroup_added_value","last_value")}\n\n        ${n}[ ${h} * ${xt(o)} + ${xt(o-1)} ] = new_last_value;\n      }\n\n      // Add the value to what we'll add to everything else\n      ${g("added_value","workgroup_added_value","added_value")}\n\n      ${Ik("end (get global added values)")}\n    `:"\n    "}\n    ${bL(0,o-1,e=>`\n      {\n        let index = ${h} * ${xt(o)} + ${xt(e)};\n        var current_value: ${s.type.valueType};\n        ${g("current_value","added_value",n+"[ index ]")}\n        ${n}[ index ] = current_value;\n      }\n    `)}\n    ${Ik("end (add scanned values to tile)")}\n    \n    // TODO: consider shift at start to potentially avoid this workgroupBarrier?\n    ${d?`\n      workgroupBarrier();\n      \n      // TODO: will it be more readable/maintainable for these two cases to be combined?\n      ${"left"===r?`\n        let exclusive_base_index = ${h} * ${xt(o)};\n        var exclusive_value = select( ${s.identityWGSL}, ${n}[ exclusive_base_index - 1u ], exclusive_base_index > 0u );\n        var next_value = ${n}[ exclusive_base_index ];\n        workgroupBarrier();\n        ${bL(0,o,(e,t,i)=>`\n          ${i?"":`\n            next_value = ${n}[ exclusive_base_index + ${xt(e)} ];\n          `}\n          ${n}[ exclusive_base_index + ${xt(e)} ] = exclusive_value;\n          ${i?"":"\n            exclusive_value = next_value;\n          "}\n        `)}\n      `:`\n        let exclusive_base_index = ${h} * ${xt(o)} + ${xt(o-1)};\n        var exclusive_value = select( ${s.identityWGSL}, ${n}[ exclusive_base_index + 1u ], exclusive_base_index < ${xt(a-1)} );\n        var next_value = ${n}[ exclusive_base_index ];\n        workgroupBarrier();\n        ${bL(0,o,(e,t,i)=>`\n          ${i?"":`\n            next_value = ${n}[ exclusive_base_index + ${xt(e)} ];\n          `}\n          ${n}[ exclusive_base_index - ${xt(e)} ] = exclusive_value;\n          ${i?"":"\n            exclusive_value = next_value;\n          "}\n        `)}\n      `}\n    `:""}\n\n    ${Ik("end scan_raked")}\n  `},yL=fL;St.register("scanRakedWGSL",fL);const EL=e=>{const t=e.i,i=e.workgroupSize,n=e.grainSize;return`\n    // TODO: optimizations if workgroupSize or grainSize is 1\n    (\n      ( ( ${t} ) / ${xt(i*n)} ) * ${xt(i*n)} +\n      ( ( ${t} ) % ${xt(n)} ) * ${xt(i)} +\n      ( ( ( ${t} ) % ${xt(i*n)} ) / ${xt(n)} )\n    )\n  `.split("\n").map(e=>e.trim()).join(" ")},vL=EL;St.register("toStripedIndexWGSL",EL);const AL=(e,t,i)=>_.range(e,t).map(n=>i(n,n===e,n===t+(e<t?-1:1))).join("\n"),bL=AL;St.register("unrollWGSL",AL);const SL=e=>{const t=e.bitVector,i=e.bits,n=(e.bitsPerInnerPass,e.bitVectorSize),r=e.maxCount,s=Math.ceil(Math.log2(r)),a=Math.floor(32/s);return`${1===a?"":"( "}${t}${n>1?`[ ${1===a?i:`( ${i} ) / ${xt(a)}`} ]`:""}${1===a?"":` >> ( ( ( ${i} ) % ${xt(a)} ) * ${xt(s)} ) ) & ${xt((1<<s)-1)}`}`},_L=SL;St.register("bitPackRadixAccessWGSL",SL);const xL=e=>{const t=e.bitVector,i=e.bitsPerInnerPass,n=e.bitVectorSize,r=e.maxCount,s=Math.ceil(Math.log2(r)),a=Math.floor(32/s);if(1!==a){const e=(1<<s>>>0)-1,r=4294967295,o=i=>{const r=n>1?[".x",".y",".z",".w"][Math.floor(i/a)]:"";let o=`${t}${r}`;const l=s*(i%a);return l>0&&(o=`( ${o} >> ${xt(l)} )`),`${o} & ${Tt(e)}`},l=(i,o)=>{const l=n>1?[".x",".y",".z",".w"][Math.floor(i/a)]:"",h=`${t}${l}`,u=s*(i%a),c=r-(e<<u>>>0),d=0===u?o:`( ( ${o} ) << ${xt(u)} )`;return`${h} = ( ${h} & ${Tt(c)} ) | ${d}`};let h="\n      var bitty_value = 0u;\n      var bitty_next_value = 0u;\n    ";const u=1<<i>>>0;for(let t=0;t<u;t++){const e=t===u-1;e||(h+=`bitty_next_value += ${o(t)};\n`),h+=l(t,"bitty_value")+";\n",e||(h+="bitty_value = bitty_next_value;\n")}return`\n      ${Ik("begin bit_pack_radix_exclusive_scan")}\n      ${h}\n      ${Ik("end bit_pack_radix_exclusive_scan")}\n    `}switch(n){case 1:return t+" = 0u;";case 2:return`${t} = vec2( 0u, ${t}.x );`;case 3:return`${t} = vec3( 0u, ${t}.x, ${t}.y );`;case 4:return`${t} = vec4( 0u, ${t}.x, ${t}.y, ${t}.z );`;default:throw new Error("Invalid bitVectorSize: "+n)}},wL=xL;St.register("bitPackRadixExclusiveScanWGSL",xL);const TL=e=>{const t=e.bitVector,i=e.bits,n=(e.bitsPerInnerPass,e.bitVectorSize),r=e.maxCount,s=Math.ceil(Math.log2(r)),a=Math.floor(32/s);return`\n    ${t}${n>1?`[ ${1===a?i:`( ${i} ) / ${xt(a)}`} ]`:""} += 1u${1===a?"":` << ( ( ( ${i} ) % ${xt(a)} ) * ${xt(s)} )`};\n  `},PL=TL;St.register("bitPackRadixIncrementWGSL",TL);const CL=(e,t)=>`( ( ( ${e} ) + ( ${t} ) - 1u ) / ( ${t} ) )`;St.register("ceilDivideWGSL",CL);const VL=(e,t)=>`( ( ( ${e} ) + ${xt(t-1)} ) / ${xt(t)} )`,RL=VL;St.register("ceilDivideConstantDivisorWGSL",VL);const NL={earlyLoad:!1,...Sk},ML=(e,t)=>{const i=Ro()({},NL,t),n=i.order,r=i.workgroupSize,s=i.grainSize,a=i.localIndex,o=i.bitsScratch,l=i.valueScratch,h=i.lengthExpression,u=i.getBits,c=i.earlyLoad,d=i.bitsPerInnerPass,p=i.bitVectorSize,m={1:GM,2:XM,3:ZM,4:$M}[p],g={1:FM,2:jM,3:JM,4:ek}[p],f=(t,i)=>Kk(e,{name:`${t} (countBitQuantity: ${Math.ceil(Math.log2(r*s))})`,type:m,dataCount:p,writeData:e=>m.writeU32s(e,i),lineToLog:rk.toLogExisting});return`\n    ${Ik("begin n_bit_compact_single_sort")}\n\n    ${nL(e,`n_bit_compact_single_sort workgroupSize:${r}, grainSize:${s}, bitsPerInnerPass:${d}, bitVectorSize:${p}, length:"${h}" earlyLoad:${c}`)}\n\n    {\n      var tb_bits_vector = ${{1:"0u",2:"vec2( 0u )",3:"vec3( 0u )",4:"vec4( 0u )"}[p]};\n\n      ${c?`\n        var tb_values: array<${n.type.valueType}, ${s}>;\n      `:""}\n\n      // Store our thread's "raked" values histogram into tb_bits_vector\n      ${bL(0,s,t=>`\n        // TODO: see if factoring out constants doesn't kill registers\n        if ( ${xt(s)} * ${a}.x + ${xt(t)} < ${h} ) {\n          let tb_value = ${l}[ ${xt(s)} * ${a}.x + ${xt(t)} ];\n          let tb_bits = ${u("tb_value")};\n\n          ${tL(e,{value:"tb_value",name:`tb_value (raked index ${t})`,type:n.type})}\n\n          ${tL(e,{value:"tb_bits",name:`tb_bits (raked index ${t})`,type:GM})}\n\n          ${PL({bitVector:"tb_bits_vector",bits:"tb_bits",bitsPerInnerPass:d,bitVectorSize:p,maxCount:r*s})}\n\n          ${c?`\n            tb_values[ ${xt(t)} ] = tb_value;\n          `:""}\n        }\n      `)}\n\n      ${f("n_bit histogram initial","tb_bits_vector")}\n\n      ${mL(e,{value:"tb_bits_vector",binaryOp:g,scratch:o,workgroupSize:r,exclusive:!0,needsValidScratch:!0})}\n\n      ${f("n_bit histogram scanned","tb_bits_vector")}\n\n      // now tb_bits_vector holds the partial exclusive scan, but the inclusive scan is still in the array\n      var tb_offsets = ${o}[ ${xt(r-1)} ];\n\n      ${wL({bitVector:"tb_offsets",bitsPerInnerPass:d,bitVectorSize:p,maxCount:r*s})}\n\n      ${c?"":`\n        var tb_values: array<${n.type.valueType}, ${s}>;\n\n        ${bL(0,s,e=>`\n          // TODO: see if factoring out constants doesn't kill registers\n          tb_values[ ${xt(e)} ] = ${l}[ ${xt(s)} * ${a}.x + ${xt(e)} ];\n        `)}\n\n        workgroupBarrier();\n      `}\n\n      ${bL(0,s,e=>`\n        // TODO: see if factoring out constants doesn't kill registers\n        if ( ${xt(s)} * ${a}.x + ${xt(e)} < ${h} ) {\n          let tb_value = tb_values[ ${xt(e)} ];\n          let tb_bits = ${u("tb_value")};\n\n          // TODO: a way to compute the index and access both of these efficiently?\n          ${l}[ ( ${_L({bitVector:"tb_offsets",bits:"tb_bits",bitsPerInnerPass:d,bitVectorSize:p,maxCount:r*s})} ) + ( ${_L({bitVector:"tb_bits_vector",bits:"tb_bits",bitsPerInnerPass:d,bitVectorSize:p,maxCount:r*s})} ) ] = tb_value;\n\n          // NOTE the increment, so that we'll write to the next location next time\n          ${PL({bitVector:"tb_bits_vector",bits:"tb_bits",bitsPerInnerPass:d,bitVectorSize:p,maxCount:r*s})}\n        }\n      `)}\n\n      workgroupBarrier();\n    }\n\n    ${Ik("end n_bit_compact_single_sort")}\n  `},kL=ML;St.register("nBitCompactSingleSortWGSL",ML);const LL=(e,t)=>{const i=Vo()({getBits:e=>t.getBitsAtIndex(e,"wrs_i")},t);return`\n    ${Ik("begin compact_single_radix_sort")}\n  \n    for ( var wrs_i = 0u; wrs_i < ${xt(i.totalBits)}; wrs_i += ${xt(i.bitsPerInnerPass)} ) {\n      ${kL(e,i)}\n  \n      // NOTE: no workgroupBarrier here, we already have it in the function\n    }\n  \n    ${Ik("end compact_single_radix_sort")}\n  `};St.register("compactSingleRadixSortWGSL",LL);const IL={greaterThan:null,lessThanOrEqual:null},BL=(e,t)=>{const i=Ro()({},IL,t),n=i.value,r=i.outputIndex,s=i.lengthA,a=i.lengthB,o=i.compare,l=i.greaterThan,h=i.lessThanOrEqual;return`\n    // TODO: add assertions\n  \n    ${Ik("begin get_corank")}\n  \n    var ${n} = min( ${r}, ${s} );\n    {\n      var gc_j = ${r} - ${n};\n  \n      // NOTE: Parameter order and boolean swapped here to avoid a bug in Metal\n      // See i32-test.html (reports out -992 buggily, where it takes the wrong branch of the select statement), or\n      // buggy_merge.wgsl.\n      // Bug report is https://bugs.chromium.org/p/tint/issues/detail?id=2087 (thanks James Price!)\n      var gc_i_low: u32 = select( ${r} - ${a}, 0u, ${r} <= ${a} );\n      var gc_j_low = select( ${r} - ${s}, 0u, ${r} <= ${s} );\n      var gc_delta: u32;\n  \n      // TODO: remove oops_count\n      var oops_count_corank = 0u;\n      while ( true ) {\n        oops_count_corank++;\n        if ( oops_count_corank > 0xffu ) {\n          break;\n        }\n  \n        if ( ${n} > 0u && gc_j < ${a} && ${l?l(n+" - 1u","gc_j"):o(n+" - 1u","gc_j")+" > 0i"} ) {\n          gc_delta = ( ${n} - gc_i_low + 1u ) >> 1u;\n          gc_j_low = gc_j;\n          gc_j = gc_j + gc_delta;\n          ${n} = ${n} - gc_delta;\n        }\n        else if ( gc_j > 0u && ${n} < ${s} && ${h?h(n,"gc_j - 1u"):o(n,"gc_j - 1u")+" <= 0i"} ) {\n          gc_delta = ( gc_j - gc_j_low + 1u ) >> 1u;\n          gc_i_low = ${n};\n          ${n} = ${n} + gc_delta;\n          gc_j = gc_j - gc_delta;\n        }\n        else {\n          break;\n        }\n      }\n    }\n  \n    ${Ik("end get_corank")}\n  `},DL=BL;St.register("getCorankWGSL",BL);const OL={...Nk},qL=(e,t)=>{const i=Ro()({},OL,t),n=i.histogramScratch,r=i.getBin;return`\n    ${Ik("begin histogram")}\n    {\n      ${kk(e,{workgroupSize:i.workgroupSize,grainSize:i.grainSize,lengthExpression:i.lengthExpression,workgroupIndex:i.workgroupIndex,localIndex:i.localIndex,callback:(e,t)=>`\n          atomicAdd( &${n}[ ${r(t)} ], 1u );\n        `})}\n    }\n    ${Ik("end histogram")}\n  `},YL=qL;St.register("histogramWGSL",qL);const HL=(e,t)=>{const i=t.workgroupSize,n=t.grainSize,r=t.lengthExpression,s=t.numBins,a=t.storeHistogram;return`\n    ${Ik("begin radix_histogram")}\n  \n    {\n      ${YL(e,t)}\n  \n      let num_valid_workgroups = ${RL(r,i*n)};\n      if ( workgroup_id.x < num_valid_workgroups ) {\n        // Should be uniform control flow for the workgroup\n        workgroupBarrier();\n  \n        ${bL(0,Math.ceil(s/i),e=>`\n          {\n            let local_index = ${xt(i*e)} + local_id.x;\n            if ( local_index < ${xt(s)} ) {\n              ${a("local_index * num_valid_workgroups + workgroup_id.x","atomicLoad( &histogram_scratch[ local_index ] )")}\n            }\n          }\n        `)}\n      }\n    }\n  \n    ${Ik("end radix_histogram")}\n  `},GL=HL;St.register("radixHistogramWGSL",HL);const FL=(e,t)=>{const i=t.workgroupSize,n=t.grainSize,r=t.order,s=t.pass,a=t.bitsPerPass,o=t.lengthExpression,l=t.bindings;return`\n    ${l.input.location.getWGSLAnnotation()}\n    var<storage, ${l.input.getStorageAccess()}> input: array<${r.type.valueType}>;\n    ${l.output.location.getWGSLAnnotation()}\n    var<storage, ${l.output.getStorageAccess()}> output: array<u32>;\n    \n    var<workgroup> histogram_scratch: array<atomic<u32>, ${1<<a}>;\n    \n    @compute @workgroup_size(${i})\n    fn main(\n      @builtin(global_invocation_id) global_id: vec3u,\n      @builtin(local_invocation_id) local_id: vec3u,\n      @builtin(workgroup_id) workgroup_id: vec3u\n    ) {\n      ${GL(e,{workgroupSize:i,grainSize:n,histogramScratch:"histogram_scratch",getBin:e=>r.getBitsWGSL(`input[ ${e} ]`,s*a,a),numBins:1<<a,lengthExpression:o,storeHistogram:(e,t)=>`output[ ${e} ] = ${t};`})}\n    }\n  `};St.register("mainRadixHistogramWGSL",FL);const zL={loadMultipleOptions:{}},UL=(e,t)=>{const i=Ro()({},zL,t),n=i.workgroupSize,r=i.grainSize,s=i.order,a=i.pass,o=i.bitsPerPass,l=i.bitsPerInnerPass,h=i.innerBitVectorSize,u=i.earlyLoad,c=i.lengthExpression,d=i.loadMultipleOptions,p=i.bindings,m=e=>s.getBitsWGSL(e,a*o,o);return`\n    ${p.input.location.getWGSLAnnotation()}\n    var<storage, ${p.input.getStorageAccess()}> input: array<${s.type.valueType}>;\n    ${p.histogramOffsets.location.getWGSLAnnotation()}\n    var<storage, ${p.histogramOffsets.getStorageAccess()}> histogram_offsets: array<u32>;\n    ${p.output.location.getWGSLAnnotation()}\n    var<storage, ${p.output.getStorageAccess()}> output: array<${s.type.valueType}>;\n    \n    // TODO: see how we can potentially reuse some memory?\n    var<workgroup> bits_scratch: array<${{1:"u32",2:"vec2u",3:"vec3u",4:"vec4u"}[h]}, ${n}>;\n    var<workgroup> value_scratch: array<${s.type.valueType}, ${n*r}>;\n    var<workgroup> local_histogram_offsets: array<u32, ${xt(1<<o)}>;\n    var<workgroup> start_indices: array<u32, ${n*r}>;\n    \n    @compute @workgroup_size(${n})\n    fn main(\n      @builtin(global_invocation_id) global_id: vec3u,\n      @builtin(local_invocation_id) local_id: vec3u,\n      @builtin(workgroup_id) workgroup_id: vec3u\n    ) {\n      ${nL(e,"main_radix_scatter start")}\n\n      let num_valid_workgroups = ${RL(c,n*r)};\n\n      ${tL(e,{value:"num_valid_workgroups",type:GM})}\n\n      if ( workgroup_id.x < num_valid_workgroups ) {\n        ${zk(No({loadExpression:e=>`input[ ${e} ]`,storeStatements:(e,t)=>`value_scratch[ ${e} ] = ${t};`,type:s.type,workgroupSize:n,grainSize:r,lengthExpression:c,outOfRangeValue:null,inputOrder:"blocked",inputAccessOrder:"striped"},d))}\n\n        ${$k(e,{name:"initial data",type:s.type,workgroupSize:n,grainSize:r,lengthExpression:c,relativeAccessExpression:e=>`value_scratch[ ${e} ]`})}\n\n        ${Ik("begin load histogram offsets")}\n        ${bL(0,Math.ceil((1<<o)/n),e=>`\n          {\n            let local_index = ${xt(n*e)} + local_id.x;\n            if ( local_index < ${xt(1<<o)} ) {\n              local_histogram_offsets[ local_index ] = histogram_offsets[ local_index * num_valid_workgroups + workgroup_id.x ];\n            }\n          }\n        `)}\n        ${Ik("end load histogram offsets")}\n\n        ${$k(e,{name:"scanned histogram",type:GM,workgroupSize:n,grainSize:r,relativeLengthExpression:xt(1<<o),relativeAccessExpression:e=>`histogram_offsets[ ${e} ]`})}\n\n        // Our workgroupBarrier will apply for value_scratch AND local_histogram_offsets\n        workgroupBarrier();\n\n        ${c?`\n          let reduced_length = ( ${c} ) - workgroup_id.x * ${xt(n*r)};\n        `:""}\n\n        ${tL(e,{value:"reduced_length",type:GM})}\n\n        for ( var srs_i = 0u; srs_i < ${xt(o)}; srs_i += ${xt(l)} ) {\n          ${tL(e,{value:"srs_i",type:GM})}\n\n          ${kL(e,{order:s,workgroupSize:n,grainSize:r,bitsPerInnerPass:l,bitVectorSize:h,bitsScratch:"bits_scratch",valueScratch:"value_scratch",lengthExpression:"reduced_length",getBits:e=>`( ( ( ${m(e)} ) >> srs_i ) & ${xt((1<<l)-1)} )`,earlyLoad:u})}\n\n          ${$k(e,{name:`after b_bit_sort ${l} ${h}`,type:s.type,workgroupSize:n,grainSize:r,lengthExpression:c,relativeAccessExpression:e=>`value_scratch[ ${e} ]`,additionalIndex:"srs_i"})}\n        }\n\n        // TODO: we can restructure this so we're not doing all of the reads/bits each time\n        ${Ik("begin write start_indices")}\n        ${bL(0,r,e=>`\n          {\n            let local_index = ${xt(n*e)} + local_id.x;\n            ${Dk(c?"local_index < reduced_length":null,`\n              var head_value = 0u;\n\n              if ( local_index > 0u && ${m("value_scratch[ local_index ]")} != ${m("value_scratch[ local_index - 1u ]")} ) {\n                head_value = local_index;\n              }\n\n              start_indices[ local_index ] = head_value;\n            `)}\n          }\n        `)}\n        ${Ik("end write start_indices")}\n\n        workgroupBarrier();\n\n        ${yL(e,{scratch:"start_indices",binaryOp:FM,workgroupSize:n,grainSize:r,exclusive:!1})}\n\n        workgroupBarrier();\n\n        ${Ik("begin write output")}\n        ${bL(0,r,e=>`\n          {\n            let local_index = ${xt(n*e)} + local_id.x;\n            ${Dk(c?"local_index < reduced_length":null,`\n              let local_offset = local_index - start_indices[ local_index ];\n              let value = value_scratch[ local_index ];\n              let offset = local_histogram_offsets[ ${m("value")} ] + local_offset;\n\n              output[ offset ] = value;\n            `)}\n          }\n        `)}\n        ${Ik("end write output")}\n\n        ${$k(e,{name:"exit(!) data",type:s.type,workgroupSize:n,grainSize:r,lengthExpression:c,accessExpression:e=>`output[ ${e} ]`})}\n      }\n    }\n  `};St.register("mainRadixScatterWGSL",UL);const WL={lengthExpression:null,loadReducedOptions:{inputAccessOrder:"striped"},reduceOptions:{convergent:!0}},XL=(e,t)=>{const i=Ro()({},WL,t),n=i.workgroupSize,r=i.grainSize,s=i.binaryOp;return`\n\n    ${i.bindings.input.location.getWGSLAnnotation()}\n    var<storage, ${i.bindings.input.getStorageAccess()}> input: array<${s.type.valueType}>;\n    ${i.bindings.output.location.getWGSLAnnotation()}\n    var<storage, ${i.bindings.output.getStorageAccess()}> output: atomic<${s.type.valueType}>;\n    \n    var<workgroup> scratch: array<${s.type.valueType}, ${n}>;\n    \n    @compute @workgroup_size(${n})\n    fn main(\n      @builtin(global_invocation_id) global_id: vec3u,\n      @builtin(local_invocation_id) local_id: vec3u,\n      @builtin(workgroup_id) workgroup_id: vec3u\n    ) {\n    \n      ${Xk(No({value:"value",binaryOp:s,loadExpression:e=>`input[ ${e} ]`,workgroupSize:n,grainSize:r},i.loadReducedOptions))}\n    \n      ${cL(e,No({value:"value",binaryOp:s,scratch:"scratch",workgroupSize:n},i.reduceOptions))}\n    \n      if ( local_id.x == 0u ) {\n        ${s.atomicName}( &output, value );\n      }\n    }\n  `};St.register("mainReduceAtomicWGSL",XL);const jL={stripeOutput:!1,reduceOptions:{}},QL=(e,t)=>{const i=Ro()({},jL,t),n=i.workgroupSize,r=i.grainSize,s=i.binaryOp,a=i.stripeOutput;return`\n    \n    ${i.bindings.input.location.getWGSLAnnotation()}\n    var<storage, ${i.bindings.input.getStorageAccess()}> input: array<${s.type.valueType}>;\n    \n    ${i.bindings.output.location.getWGSLAnnotation()}\n    var<storage, ${i.bindings.output.getStorageAccess()}> output: array<${s.type.valueType}>;\n    \n    var<workgroup> scratch: array<${s.type.valueType}, ${n}>;\n\n    @compute @workgroup_size(${n})\n    fn main(\n      @builtin(global_invocation_id) global_id: vec3u,\n      @builtin(local_invocation_id) local_id: vec3u,\n      @builtin(workgroup_id) workgroup_id: vec3u\n    ) {\n      // TODO: we can probably accomplish this with smarter use of the local variables\n      if ( local_id.x == 0u ) {\n        scratch[ 0u ] = ${s.identityWGSL};\n      }\n    \n      var value: ${s.type.valueType};\n      ${bL(0,r,(t,a,o)=>{return`\n          {\n            value = input[ workgroup_id.x * ${xt(n*r)} + ${xt(t*n)} + local_id.x ];\n            if ( local_id.x == 0u ) {\n              ${l="value",h="scratch[ 0u ]",u="value",Rk(l,s.combineExpression||null,s.combineStatements||null,h,u)}\n            }\n    \n            ${cL(e,No({value:"value",scratch:"scratch",binaryOp:s,workgroupSize:n},i.reduceOptions))}\n    \n            ${o?"":"\n              if ( local_id.x == 0u ) {\n                scratch[ 0u ] = value;\n              }\n            "}\n          }\n        `;var l,h,u})}\n    \n      if ( local_id.x == 0u ) {\n        output[ ${a?vL({i:"workgroup_id.x",workgroupSize:n,grainSize:r}):"workgroup_id.x"} ] = value;\n      }\n    }\n\n  `};St.register("mainReduceNonCommutativeWGSL",QL);const KL={exclusive:!1,getAddedValue:null},ZL=(e,t)=>{const i=Ro()({},KL,t),n=i.input,r=i.output,s=i.scratch,a=i.exclusive,o=i.getAddedValue,l=i.binaryOp;return`\n    ${Ik("begin scan_comprehensive")}\n\n    // Load into workgroup memory\n    ${zk({loadExpression:e=>`${n}[ ${e} ]`,storeStatements:(e,t)=>`${s}[ ${e} ] = ${t};`,workgroupSize:i.workgroupSize,grainSize:i.grainSize,type:l.type,lengthExpression:i.lengthExpression,globalIndex:i.globalIndex,workgroupIndex:i.workgroupIndex,localIndex:i.localIndex,outOfRangeValue:l.identityWGSL,inputOrder:i.inputOrder,inputAccessOrder:i.inputAccessOrder,factorOutSubexpressions:i.factorOutSubexpressions})}\n\n    workgroupBarrier();\n    \n    ${yL(e,{scratch:s,binaryOp:l,workgroupSize:i.workgroupSize,grainSize:i.grainSize,workgroupIndex:i.workgroupIndex,localIndex:i.localIndex,exclusive:a,getAddedValue:o,addedValueNeedsWorkgroupBarrier:i.addedValueNeedsWorkgroupBarrier,storeReduction:i.storeReduction,stripeReducedOutput:i.stripeReducedOutput})}\n\n    workgroupBarrier();\n\n    // Write our output in a coalesced order.\n    ${Ik("begin (output write)")}\n    ${kk(e,{workgroupSize:i.workgroupSize,grainSize:i.grainSize,lengthExpression:i.lengthExpression,workgroupIndex:i.workgroupIndex,localIndex:i.localIndex,callback:(e,t)=>`\n        ${r}[ ${t} ] = ${a?`select( ${o?"workgroup_added_value":l.identityWGSL}, ${s}[ ${e} - 1u ], ${e} > 0u )`:`${s}[ ${e} ]`};\n      `})}\n    ${Ik("end (output write)")}\n\n    ${Ik("end scan_comprehensive")}\n  `},JL=ZL;St.register("scanComprehensiveWGSL",ZL);const $L={greaterThan:null,lessThanOrEqual:null},eI=(e,t)=>{const i=Ro()({},$L,t),n=i.lengthA,r=i.lengthB,s=i.compare,a=i.setFromA,o=i.setFromB;return`\n    ${Ik("begin merge_sequential")}\n    {\n      var ms_i = 0u;\n      var ms_j = 0u;\n      var ms_k = 0u;\n  \n      // TODO: remove oops_count, also if keeping, make it generally high enough\n      var oops_count = 0u;\n  \n      // The overlap of A and B\n      while ( ms_i < ${n} && ms_j < ${r} ) {\n        oops_count++;\n        if ( oops_count > 0xffu ) {\n          break;\n        }\n  \n        if ( ${s("ms_i","ms_j")} <= 0i ) {\n          ${a("ms_k","ms_i")}\n          ms_i++;\n        }\n        else {\n          ${o("ms_k","ms_j")}\n          ms_j++;\n        }\n        ms_k++;\n      }\n  \n      // The remainder of A\n      while ( ms_i < ${n} ) {\n        oops_count++;\n        if ( oops_count > 0xffu ) {\n          break;\n        }\n  \n        ${a("ms_k","ms_i")}\n        ms_i++;\n        ms_k++;\n      }\n  \n      // The remainder of B\n      while ( ms_j < ${r} ) {\n        oops_count++;\n        if ( oops_count > 0xffu ) {\n          break;\n        }\n  \n        ${o("ms_k","ms_j")}\n        ms_j++;\n        ms_k++;\n      }\n    }\n    ${Ik("end merge_sequential")}\n  `},tI=eI;St.register("mergeSequentialWGSL",eI);const iI={greaterThan:null,lessThanOrEqual:null,...Ak},nI=(e,t)=>{const i=Ro()({},iI,t),n=i.lengthA,r=i.lengthB,s=i.compare,a=i.greaterThan,o=i.lessThanOrEqual,l=i.setFromA,h=i.setFromB,u=i.grainSize,c=i.globalIndex;return`\n    ${Ik("begin merge_simple")}\n    {\n      // TODO: don't assume a specific linear workgroup size? -- use local_invocation_index?\n      let max_output = ${n} + ${r};\n      let start_output = min( max_output, ${c} * ${xt(u)} );\n      let end_output = min( max_output, start_output + ${xt(u)} );\n  \n      if ( start_output != end_output ) {\n        ${DL(e,{value:"start_a",outputIndex:"start_output",lengthA:n,lengthB:r,compare:s,greaterThan:a,lessThanOrEqual:o})}\n        ${DL(e,{value:"end_a",outputIndex:"end_output",lengthA:n,lengthB:r,compare:s,greaterThan:a,lessThanOrEqual:o})}\n  \n        let start_b = start_output - start_a;\n        let end_b = end_output - end_a;\n  \n        let span_a = end_a - start_a;\n        let span_b = end_b - start_b;\n  \n        ${tI(e,{lengthA:"span_a",lengthB:"span_b",compare:(e,t)=>s("start_a + "+e,"start_b + "+t),setFromA:(e,t)=>l("start_output + "+e,"start_a + "+t),setFromB:(e,t)=>h("start_output + "+e,"start_b + "+t)})}\n      }\n    }\n    ${Ik("end merge_simple")}\n  `};St.register("mergeSimpleWGSL",nI);const rI={greaterThan:null,lessThanOrEqual:null,atomicConsumed:!0},sI=(e,t)=>{const i=Ro()({},rI,t),n=i.lengthA,r=i.lengthB,s=i.compare,a=i.greaterThan,o=i.lessThanOrEqual,l=i.workgroupA,h=i.workgroupB,u=i.loadFromA,c=i.loadFromB,d=i.storeOutput,p=i.blockOutputSize,m=i.sharedMemorySize,g=i.atomicConsumed,f=i.workgroupSize;return e.add("merge workgroup handling",`\n    ${g?"\n      var<workgroup> consumed_a: atomic<u32>;\n      var<workgroup> consumed_b: atomic<u32>;\n    ":""}\n    \n    var<workgroup> block_start_a: u32;\n    var<workgroup> block_end_a: u32;\n  `),`\n    ${Ik("begin merge")}\n\n    {\n      let max_output = ${n} + ${r};\n  \n      // Determine the output (merged) index range for this entire workgroup (block). We'll likely accomplish this over\n      // multiple iterations.\n      let block_start_output = min( max_output, workgroup_id.x * ${xt(p)} );\n      let block_end_output = min( max_output, block_start_output + ${xt(p)} );\n      let block_length = block_end_output - block_start_output;\n  \n      if ( block_length > 0u ) {\n        // Use the first 2 threads to load the coranks for the start/end of the block\n        if ( local_id.x < 2u ) {\n          let output_index = select( block_start_output, block_end_output, local_id.x == 1u );\n          ${DL(e,{value:"block_a",outputIndex:"output_index",lengthA:n,lengthB:r,compare:s?(e,t)=>s(u(e),c(t)):null,greaterThan:a?(e,t)=>a(u(e),c(t)):null,lessThanOrEqual:o?(e,t)=>o(u(e),c(t)):null})}\n          if ( local_id.x == 0u ) {\n            block_start_a = block_a;\n          }\n          else {\n            block_end_a = block_a;\n          }\n        }\n        workgroupBarrier();\n  \n        // compute the B corank for the start/end of the block\n        let block_start_b = block_start_output - block_start_a;\n        let block_end_b = block_end_output - block_end_a;\n  \n        // We now have the input index ranges [ block_start_a, block_end_a ) and [ block_start_b, block_end_b )\n        // that we'll pull from.\n  \n        // The "processed" indices indicate that we've sorted everything BEFORE this index, and we will make sure every\n        // iteration that we've loaded [ processed_index, processed_index + sharedMemorySize ) into shared memory (or\n        // at least the portion that is available, and doesn't go past the end of our block_end).\n        var processed_index_a = block_start_a;\n        var processed_index_b = block_start_b;\n  \n        // The "loaded" indices indicate that we've loaded the valid portion of [ loaded_index - sharedMemorySize, loaded_index )\n        // into our shared memory. When we go to future iterations, we'll only start loading memory there.\n        // NOTE: We use circular buffers, so we can just use % sharedMemorySize to get the actual resulting index into\n        // the workgroup arrays.\n        var loaded_index_a = block_start_a;\n        var loaded_index_b = block_start_b;\n  \n        // "Ceiling" of blockLength / sharedMemorySize (the total number of iterations we'll need to process the entire\n        // block).\n        let total_iterations = ( block_length + ${xt(m-1)} ) / ${xt(m)};\n        var iteration = 0u;\n  \n        var oops_count_merge = 0u;\n        while ( iteration < total_iterations ) {\n          oops_count_merge++;\n          if ( oops_count_merge > 0xffu ) {\n            break;\n          }\n  \n          // We'll load the next portion of A/B data into shared memory\n          // NOTE: two different unrolled loops here, so we (a) go memory accesses more in order, and (b) fewer registers.\n          // block_end_a/block_end_b also make sure we won't read past our lengthA/lengthB\n  \n          // Load "A" values into workgroup memory\n          let loading_a_quantity = min( min( block_end_a, processed_index_a + ${xt(m)} ) - loaded_index_a, ${xt(m)} );\n          ${bL(0,Math.ceil(m/f),e=>`\n            {\n              // TODO: consider more unique names, so they don't conflict with our loads/etc.\n              let relative_index = local_id.x + ${xt(e*f)};\n              if ( relative_index < loading_a_quantity ) {\n                let index = relative_index + loaded_index_a;\n                ${l}[ index % ${xt(m)} ] = ${u("index")};\n              }\n            }\n          `)}\n          loaded_index_a += loading_a_quantity;\n  \n          // Load "B" values into workgroup memory\n          let loading_b_quantity = min( min( block_end_b, processed_index_b + ${xt(m)} ) - loaded_index_b, ${xt(m)} );\n          ${bL(0,Math.ceil(m/f),e=>`\n            {\n              // TODO: consider more unique names, so they don't conflict with our loads/etc.\n              let relative_index = local_id.x + ${xt(e*f)};\n              if ( relative_index < loading_b_quantity ) {\n                let index = relative_index + loaded_index_b;\n                ${h}[ index % ${xt(m)} ] = ${c("index")};\n              }\n            }\n          `)}\n          loaded_index_b += loading_b_quantity;\n  \n          // We'll also zero out the consumed_a/consumed_b values if applicable (before the workgroupBarrier, so we don't\n          // need an extra one.\n          ${g?"\n            if ( local_id.x == 0u ) {\n              atomicStore( &consumed_a, 0u );\n              atomicStore( &consumed_b, 0u );\n            }\n          ":""}\n  \n          // AT LEAST a barrier for the shared workgroup arrays, but also potentially the atomics.\n          workgroupBarrier();\n  \n          // The base output index for this iteration (all threads). We're going to write into\n          // output[ base_iteration_index] to output[ base_iteration_index + sharedMemorySize ]\n          let base_iteration_index = block_start_output + iteration * ${xt(m)};\n  \n          // The output range for this individual thread [ thread_start_output, thread_end_output )\n          let thread_start_output = min( block_end_output, base_iteration_index + local_id.x * ${xt(m/f)} );\n          let thread_end_output = min( block_end_output, base_iteration_index + ( local_id.x + 1 ) * ${xt(m/f)} );\n          let thread_length = thread_end_output - thread_start_output;\n  \n          if ( thread_length > 0u ) {\n  \n            // The length of available A/B data in our current iteration (possibly shorter than sharedMemorySize, since\n            // one or both might be near the end). The range of A/B data is:\n            // [ processed_index_a, processed_index_a + iteration_length_a )\n            let iteration_length_a = loaded_index_a - processed_index_a;\n            let iteration_length_b = loaded_index_b - processed_index_b;\n  \n            // "block"-relative start/end (based on our in-shared-memory section)\n            let output_relative_start = thread_start_output - base_iteration_index;\n            let output_relative_end = thread_end_output - base_iteration_index;\n  \n            // Get the corank for the start of our thread's input ranges\n            ${DL(e,{value:"thread_relative_start_a",outputIndex:"output_relative_start",lengthA:"iteration_length_a",lengthB:"iteration_length_b",compare:s?(e,t)=>s(`${l}[ ( ${e} + processed_index_a ) % ${xt(m)} ]`,`${h}[ ( ${t} + processed_index_b ) % ${xt(m)} ]`):null,greaterThan:a?(e,t)=>a(`${l}[ ( ${e} + processed_index_a ) % ${xt(m)} ]`,`${h}[ ( ${t} + processed_index_b ) % ${xt(m)} ]`):null,lessThanOrEqual:o?(e,t)=>o(`${l}[ ( ${e} + processed_index_a ) % ${xt(m)} ]`,`${h}[ ( ${t} + processed_index_b ) % ${xt(m)} ]`):null})}\n  \n            // Get the corank for the end of our thread's input ranges\n            ${DL(e,{value:"thread_relative_end_a",outputIndex:"output_relative_end",lengthA:"iteration_length_a",lengthB:"iteration_length_b",compare:s?(e,t)=>s(`${l}[ ( ${e} + processed_index_a ) % ${xt(m)} ]`,`${h}[ ( ${t} + processed_index_b ) % ${xt(m)} ]`):null,greaterThan:a?(e,t)=>a(`${l}[ ( ${e} + processed_index_a ) % ${xt(m)} ]`,`${h}[ ( ${t} + processed_index_b ) % ${xt(m)} ]`):null,lessThanOrEqual:o?(e,t)=>o(`${l}[ ( ${e} + processed_index_a ) % ${xt(m)} ]`,`${h}[ ( ${t} + processed_index_b ) % ${xt(m)} ]`):null})}\n  \n            // Given the A coranks, compute the B coranks\n            let thread_relative_start_b = output_relative_start - thread_relative_start_a;\n            let thread_relative_end_b = output_relative_end - thread_relative_end_a;\n  \n            // How many elements of A and B respectively we'll process in this thread\n            let thread_length_a = thread_relative_end_a - thread_relative_start_a;\n            let thread_length_b = thread_relative_end_b - thread_relative_start_b;\n  \n            // Optionally store our counts for A/B length\n            ${g?"\n              atomicAdd( &consumed_a, thread_length_a );\n              atomicAdd( &consumed_b, thread_length_b );\n            ":""}\n  \n            // Actually write things into our output array serially.\n            ${tI(e,{lengthA:"thread_length_a",lengthB:"thread_length_b",compare:(e,t)=>s(`${l}[ ( ${e} + processed_index_a + thread_relative_start_a ) % ${xt(m)} ]`,`${h}[ ( ${t} + processed_index_b + thread_relative_start_b ) % ${xt(m)} ]`),setFromA:(e,t)=>d(`( ${e} + thread_start_output )`,`${l}[ ( ${t} + processed_index_a + thread_relative_start_a ) % ${xt(m)} ]`),setFromB:(e,t)=>d(`( ${e} + thread_start_output )`,`${h}[ ( ${t} + processed_index_b + thread_relative_start_b ) % ${xt(m)} ]`)})}\n  \n            // If we don't use atomics, we'll need another corank to determine how many elements we consumed.\n            ${g?"":`\n              let iteration_possible_a_length = loaded_index_a - processed_index_a;\n              let iteration_possible_b_length = loaded_index_b - processed_index_b;\n  \n              // NOTE: The output will be invalid once we're past the end of the block, but we don't care(?)\n              ${DL(e,{value:"consumed_a",outputIndex:xt(m),lengthA:"iteration_possible_a_length",lengthB:"iteration_possible_b_length",compare:s?(e,t)=>s(`${l}[ ( ${e} + processed_index_a ) % ${xt(m)} ]`,`${h}[ ( ${t} + processed_index_b ) % ${xt(m)} ]`):null,greaterThan:a?(e,t)=>a(`${l}[ ( ${e} + processed_index_a ) % ${xt(m)} ]`,`${h}[ ( ${t} + processed_index_b ) % ${xt(m)} ]`):null,lessThanOrEqual:o?(e,t)=>o(`${l}[ ( ${e} + processed_index_a ) % ${xt(m)} ]`,`${h}[ ( ${t} + processed_index_b ) % ${xt(m)} ]`):null})}\n  \n              let consumed_b = ${xt(m)} - consumed_a;\n  \n              processed_index_a += consumed_a;\n              processed_index_b += consumed_b;\n            `}\n          }\n  \n          ${g?"\n            workgroupBarrier();\n            processed_index_a += atomicLoad( &consumed_a );\n            processed_index_b += atomicLoad( &consumed_b );\n          ":""}\n          iteration++;\n        }\n      }\n    }\n    ${Ik("end merge")}\n  `};St.register("mergeWGSL",sI);const aI={inPlace:!1,storeReduction:!1,addScannedReduction:!1,addScannedDoubleReduction:!1,areScannedReductionsExclusive:!1},oI=(e,t)=>{const i=Ro()({},aI,t),n=i.binaryOp,r=i.workgroupSize,s=i.grainSize;return`\n    \n    ${i.inPlace?`\n      ${i.bindings.data.location.getWGSLAnnotation()}\n      var<storage, ${i.bindings.data.getStorageAccess()}> data: array<${n.type.valueType}>;\n    `:`\n      ${i.bindings.input.location.getWGSLAnnotation()}\n      var<storage, ${i.bindings.input.getStorageAccess()}> input: array<${n.type.valueType}>;\n      ${i.bindings.output.location.getWGSLAnnotation()}\n      var<storage, ${i.bindings.output.getStorageAccess()}> output: array<${n.type.valueType}>;\n    `}\n    ${i.storeReduction?`\n      ${i.bindings.reduction.location.getWGSLAnnotation()}\n      var<storage, ${i.bindings.reduction.getStorageAccess()}> reduction: array<${n.type.valueType}>;\n    `:""}\n    ${i.addScannedReduction?`\n      ${i.bindings.scannedReduction.location.getWGSLAnnotation()}\n      var<storage, ${i.bindings.scannedReduction.getStorageAccess()}> scanned_reduction: array<${n.type.valueType}>;\n      ${i.addScannedDoubleReduction?`\n        ${i.bindings.scannedDoubleReduction.location.getWGSLAnnotation()}\n        var<storage, ${i.bindings.scannedDoubleReduction.getStorageAccess()}> scanned_double_reduction: array<${n.type.valueType}>;\n      `:""}\n      \n      var<workgroup> reduction_value: ${n.type.valueType};\n    `:""}\n    \n    var<workgroup> scratch: array<${n.type.valueType}, ${r*s}>;\n    \n    @compute @workgroup_size(${r})\n    fn main(\n      @builtin(global_invocation_id) global_id: vec3u,\n      @builtin(local_invocation_id) local_id: vec3u,\n      @builtin(workgroup_id) workgroup_id: vec3u\n    ) {\n      ${JL(e,{input:i.inPlace?"data":"input",output:i.inPlace?"data":"output",scratch:"scratch",binaryOp:n,workgroupSize:r,grainSize:s,exclusive:i.exclusive,lengthExpression:i.lengthExpression,inputOrder:i.inputOrder,inputAccessOrder:i.inputAccessOrder,factorOutSubexpressions:i.factorOutSubexpressions,getAddedValue:i.addScannedReduction?i.addScannedDoubleReduction?e=>`\n          if ( local_id.x == 0u ) {\n            // If our reductions are scanned exclusively, then we can just use the value directly\n            ${i.areScannedReductionsExclusive?`\n              let middle_value = scanned_reduction[ workgroup_id.x ];\n              let lower_value = double_scanned_reduction[ workgroup_id.x / ${xt(r*s)} ];\n            `:`\n              var middle_value: ${n.type.valueType};\n              var lower_value: ${n.type.valueType};\n              // NOTE: assumes the same workgroup/grain size for each level\n              // This should work for any level of workgroup handling\n              if ( workgroup_id.x % ${xt(r*s)} == 0u ) {\n                middle_value = ${n.identityWGSL};\n              }\n              else {\n                middle_value = scanned_reduction[ workgroup_id.x - 1u ];\n              }\n              let lower_index = workgroup_id.x / ${xt(r*s)};\n              if ( lower_index % ${xt(r*s)} == 0u ) {\n                lower_value = ${n.identityWGSL};\n              }\n              else {\n                lower_value = double_scanned_reduction[ lower_index - 1u ];\n              }\n            `}\n    \n            ${Rk("reduction_value",n.combineExpression||null,n.combineStatements||null,"lower_value","middle_value")}\n          }\n    \n          workgroupBarrier();\n    \n          ${e} = reduction_value;\n        `:e=>`\n          if ( local_id.x == 0u ) {\n            // If our reductions are scanned exclusively, then we can just use the value directly\n            ${i.areScannedReductionsExclusive?"\n              reduction_value = scanned_reduction[ workgroup_id.x ];\n            ":`\n              // NOTE: assumes the same workgroup/grain size for each level\n              // This should work for any level of workgroup handling\n              if ( workgroup_id.x % ${xt(r*s)} == 0u ) {\n                reduction_value = ${n.identityWGSL};\n              }\n              else {\n                reduction_value = scanned_reduction[ workgroup_id.x - 1u ];\n              }\n            `}\n          }\n    \n          workgroupBarrier();\n    \n          ${e} = reduction_value;\n        `:i.getAddedValue,storeReduction:i.storeReduction?(e,t)=>`reduction[ ${e} ] = ${t};`:null})}\n    }\n\n  `};St.register("mainScanWGSL",oI);St.register("SingleReduceModule",class{constructor(e){console.log("SingleReduceModule constructor")}});class lI extends RM{static async create(e,t,i){const n=await BM.fromContextAsync(e.device,t,new Pk(t,!!i.log).with(e=>lL(e,i)),[MM.READ_ONLY_STORAGE_BUFFER,MM.STORAGE_BUFFER]),r=i.binaryOp.type;return new lI(async(e,t)=>{const s=Math.ceil(t.length/(i.workgroupSize*i.grainSize)),a=e.createByteEncoderBuffer((new qM).encodeValues(t,r.encode)),o=e.createBuffer(r.bytesPerElement*s);return e.dispatch(n,[a,o],s),new qM(await e.arrayBuffer(o)).decodeValues(r.decode,r.bytesPerElement).slice(0,s)},{log:i.log})}}St.register("SingleReduceShader",lI);const hI={workgroupSize:256,grainSize:8,lengthExpression:null,factorOutSubexpressions:!0,nestSubexpressions:!1,inputOrder:"blocked"},uI={atomicAdd:0,atomicMax:0,atomicMin:4294967295,atomicAnd:4294967295,atomicOr:0,atomicXor:0},cI={atomicAdd:0,atomicMax:-2147483647,atomicMin:2147483647,atomicAnd:-1,atomicOr:0,atomicXor:0},dI={atomicAdd:(e,t)=>`${e} + ${t}`,atomicMax:(e,t)=>`max( ${e}, ${t} )`,atomicMin:(e,t)=>`min( ${e}, ${t} )`,atomicAnd:(e,t)=>`${e} & ${t}`,atomicOr:(e,t)=>`${e} | ${t}`,atomicXor:(e,t)=>`${e} ^ ${t}`};class pI extends RM{static async create(e,t,i){const n=Ro()({},hI,i),r=await BM.fromSourceAsync(e.device,t,Ia,[MM.READ_ONLY_STORAGE_BUFFER,MM.STORAGE_BUFFER],{valueType:n.valueType,atomicOperation:n.atomicOperation,inputOrder:n.inputOrder,identity:pI.getIdentityExpression(n.atomicOperation,n.valueType),combineExpression:dI[n.atomicOperation],length:n.lengthExpression,workgroupSize:n.workgroupSize,grainSize:n.grainSize,factorOutSubexpressions:n.factorOutSubexpressions,nestSubexpressions:n.nestSubexpressions});return new pI(async(e,t)=>{const i=Math.ceil(t.length/(n.workgroupSize*n.grainSize)),s=(new qM).encodeValues(t,(e,t)=>{"u32"===n.valueType?t.pushU32(e):t.pushI32(e)}),a=e.createByteEncoderBuffer(s),o=pI.getIdentityNumericValue(n.atomicOperation,n.valueType),l=0===o?e.createBuffer(4*i):"u32"===n.valueType?e.createU32Buffer([o]):e.createI32Buffer([o]);e.dispatch(r,[a,l],i);const h=await e.arrayBuffer(l);return("u32"===n.valueType?new Uint32Array(h):new Int32Array(h))[0]})}static getIdentityNumericValue(e,t){return("u32"===t?uI:cI)[e]}static getIdentityExpression(e,t){const i=pI.getIdentityNumericValue(e,t);return"u32"===t?xt(i):Ct(i)}}St.register("AtomicReduceShader",pI);const mI={workgroupSize:256,grainSize:8,lengthExpression:null,numAtomics:8,directAtomics:!1};class gI extends RM{static async create(e,t,i){const n=Ro()({},mI,i),r=await BM.fromSourceAsync(e.device,t,qa,[MM.READ_ONLY_STORAGE_BUFFER,MM.STORAGE_BUFFER],{valueType:n.valueType,atomicOperation:n.atomicOperation,identity:pI.getIdentityExpression(n.atomicOperation,n.valueType),length:n.lengthExpression,workgroupSize:n.workgroupSize,grainSize:n.grainSize,numAtomics:n.numAtomics,directAtomics:n.directAtomics});return new gI(async(e,t)=>{const i=Math.ceil(t.length/(n.workgroupSize*n.grainSize)),s=(new qM).encodeValues(t,(e,t)=>{"u32"===n.valueType?t.pushU32(e):t.pushI32(e)}),a=e.createByteEncoderBuffer(s),o=pI.getIdentityNumericValue(n.atomicOperation,n.valueType),l=0===o?e.createBuffer(4*i):"u32"===n.valueType?e.createU32Buffer([o]):e.createI32Buffer([o]);e.dispatch(r,[a,l],i);const h=await e.arrayBuffer(l);return("u32"===n.valueType?new Uint32Array(h):new Int32Array(h))[0]})}}St.register("FullAtomicReduceShader",gI);const fI={workgroupSize:256,grainSize:8,lengthExpression:null,inputOrder:"blocked",inputAccessOrder:"striped",factorOutSubexpressions:!0,exclusive:!1,getAddedValue:null,log:!1};class yI extends RM{static async create(e,t,i){const n=Ro()({},fI,i),r=n.binaryOp,s=r.type,a=await BM.fromSourceAsync(e.device,t,Ua,[MM.READ_ONLY_STORAGE_BUFFER,MM.STORAGE_BUFFER],{valueType:s.valueType,identity:r.identityWGSL,combineExpression:r.combineExpression,combineStatements:r.combineExpression?null:r.combineStatements,length:n.lengthExpression,workgroupSize:n.workgroupSize,grainSize:n.grainSize,inputOrder:n.inputOrder,inputAccessOrder:n.inputAccessOrder,factorOutSubexpressions:n.factorOutSubexpressions,exclusive:n.exclusive,getAddedValue:n.getAddedValue,log:n.log,inPlace:!1});return new yI(async(e,t)=>{const i=Math.ceil(t.length/(n.workgroupSize*n.grainSize)),r=e.createByteEncoderBuffer((new qM).encodeValues(t,s.encode)),o=e.createBuffer(s.bytesPerElement*t.length);return e.dispatch(a,[r,o],i),new qM(await e.arrayBuffer(o)).decodeValues(s.decode,s.bytesPerElement).slice(0,t.length)},n)}}St.register("SingleScanShader",yI);const EI={workgroupSize:256,grainSize:8,combineExpression:null,combineStatements:null,lengthExpression:null,inputOrder:"blocked",inputAccessOrder:"striped",factorOutSubexpressions:!0,nestSubexpressions:!1,isReductionExclusive:!1,internalStriping:!1,exclusive:!1};class vI extends RM{static async create(e,t,i){const n=Ro()({},EI,i),r=n.workgroupSize*n.grainSize,s={valueType:n.valueType,identity:n.identityExpression,combineExpression:n.combineExpression,combineStatements:n.combineStatements,workgroupSize:n.workgroupSize,grainSize:n.grainSize,factorOutSubexpressions:n.factorOutSubexpressions,nestSubexpressions:n.nestSubexpressions},a="blocked"!==n.inputOrder||"striped"!==n.inputAccessOrder||n.isCommutative?await BM.fromSourceAsync(e.device,t+" reduction",ka,[MM.READ_ONLY_STORAGE_BUFFER,MM.STORAGE_BUFFER],No({length:n.lengthExpression,convergent:n.isCommutative,convergentRemap:!1,inputOrder:n.inputOrder,inputAccessOrder:n.inputAccessOrder,stripeOutput:n.internalStriping},s)):await BM.fromSourceAsync(e.device,t+" reduction (non-commutative)",Da,[MM.READ_ONLY_STORAGE_BUFFER,MM.STORAGE_BUFFER],No({length:n.lengthExpression,stripeOutput:n.internalStriping},s)),o=await BM.fromSourceAsync(e.device,t+" lower scan",Ua,[MM.STORAGE_BUFFER],No({length:n.lengthExpression?`( ${n.lengthExpression} + ${xt(r-1)} ) / ${xt(r)}`:null,inputOrder:n.internalStriping?"striped":"blocked",inputAccessOrder:n.inputAccessOrder,exclusive:n.isReductionExclusive,getAddedValue:null,inPlace:!0},s)),l=await BM.fromSourceAsync(e.device,t+" upper scan",Qa,[MM.READ_ONLY_STORAGE_BUFFER,MM.READ_ONLY_STORAGE_BUFFER,MM.STORAGE_BUFFER],No({length:n.lengthExpression,inputOrder:n.inputOrder,inputAccessOrder:n.inputAccessOrder,exclusive:n.exclusive,isReductionExclusive:n.isReductionExclusive,inPlace:!1},s));return new vI(async(e,t)=>{const i=Math.ceil(t.length/(n.workgroupSize*n.grainSize)),r=e.createByteEncoderBuffer((new qM).encodeValues(t,n.encodeElement)),s=e.createBuffer(n.bytesPerElement*i),h=e.createBuffer(n.bytesPerElement*t.length);return e.dispatch(a,[r,s],i),e.dispatch(o,[s]),e.dispatch(l,[r,s,h],i),new qM(await e.arrayBuffer(h)).decodeValues(n.decodeElement,n.bytesPerElement).slice(0,t.length)})}}St.register("DoubleReduceScanShader",vI);const AI={workgroupSize:256,grainSize:8,combineExpression:null,combineStatements:null,lengthExpression:null,inputOrder:"blocked",inputAccessOrder:"striped",factorOutSubexpressions:!0,nestSubexpressions:!1,isReductionExclusive:!1,exclusive:!1};class bI extends RM{static async create(e,t,i){const n=Ro()({},AI,i),r=n.workgroupSize*n.grainSize,s={valueType:n.valueType,identity:n.identityExpression,combineExpression:n.combineExpression,combineStatements:n.combineStatements,workgroupSize:n.workgroupSize,grainSize:n.grainSize,factorOutSubexpressions:n.factorOutSubexpressions,nestSubexpressions:n.nestSubexpressions},a="blocked"!==n.inputOrder||"striped"!==n.inputAccessOrder||n.isCommutative?await BM.fromSourceAsync(e.device,t+" reduction",ka,[MM.READ_ONLY_STORAGE_BUFFER,MM.STORAGE_BUFFER],No({convergent:n.isCommutative,convergentRemap:!1,inputOrder:n.inputOrder,inputAccessOrder:n.inputAccessOrder,length:n.lengthExpression,stripeOutput:!1},s)):await BM.fromSourceAsync(e.device,t+" reduction (non-commutative)",Da,[MM.READ_ONLY_STORAGE_BUFFER,MM.STORAGE_BUFFER],No({length:n.lengthExpression,stripeOutput:!1},s)),o=await BM.fromSourceAsync(e.device,t+" middle scan",Xa,[MM.STORAGE_BUFFER,MM.STORAGE_BUFFER],No({length:n.lengthExpression?`( ${n.lengthExpression} + ${xt(r-1)} ) / ${xt(r)}`:null,inputOrder:"blocked",inputAccessOrder:n.inputAccessOrder,exclusive:n.isReductionExclusive,getAddedValue:null,stripeReducedOutput:!1,inPlace:!0},s)),l=await BM.fromSourceAsync(e.device,t+" lower scan",Ua,[MM.STORAGE_BUFFER],No({length:n.lengthExpression?`( ${n.lengthExpression} + ${xt(r*r-1)} ) / ${xt(r*r)}`:null,inputOrder:"blocked",inputAccessOrder:n.inputAccessOrder,exclusive:n.isReductionExclusive,getAddedValue:null,inPlace:!0},s)),h=await BM.fromSourceAsync(e.device,t+" upper scan",Za,[MM.READ_ONLY_STORAGE_BUFFER,MM.READ_ONLY_STORAGE_BUFFER,MM.READ_ONLY_STORAGE_BUFFER,MM.STORAGE_BUFFER],No({length:n.lengthExpression,inputOrder:n.inputOrder,inputAccessOrder:n.inputAccessOrder,exclusive:n.exclusive,isReductionExclusive:n.isReductionExclusive,inPlace:!1},s));return new bI(async(e,t)=>{const i=Math.ceil(t.length/(n.workgroupSize*n.grainSize)),r=Math.ceil(t.length/(n.workgroupSize*n.workgroupSize*n.grainSize*n.grainSize)),s=e.createByteEncoderBuffer((new qM).encodeValues(t,n.encodeElement)),u=e.createBuffer(n.bytesPerElement*i),c=e.createBuffer(n.bytesPerElement*r),d=e.createBuffer(n.bytesPerElement*t.length);return e.dispatch(a,[s,u],i),e.dispatch(o,[u,c],r),e.dispatch(l,[c]),e.dispatch(h,[s,u,c,d],i),new qM(await e.arrayBuffer(d)).decodeValues(n.decodeElement,n.bytesPerElement).slice(0,t.length)})}}St.register("TripleReduceScanShader",bI);const SI={workgroupSize:256,grainSize:8,lengthExpression:null,bitsPerPass:8,bitsPerInnerPass:2,earlyLoad:!1,factorOutSubexpressions:!0,nestSubexpressions:!1,isReductionExclusive:!1,log:!1},_I=(e,t,i)=>{const n=Math.ceil(Math.log2(e*t)),r=Math.floor(32/n),s=Math.ceil((1<<i)/r);return s};class xI extends RM{static getMaximumElementQuantity(e,t,i){const n=e*t;return n*Math.floor(n*n*n/(1<<i))}static async create(e,t,i){const n=Ro()({},SI,i),r=n.order,s=r.type,a=n.workgroupSize*n.grainSize,o=Math.ceil(n.totalBits/n.bitsPerPass),l=_I(n.workgroupSize,n.grainSize,n.bitsPerInnerPass),h=[],u=[];for(let E=0;E<o;E++){const i={order:r,pass:E,workgroupSize:n.workgroupSize,grainSize:n.grainSize,factorOutSubexpressions:n.factorOutSubexpressions,nestSubexpressions:n.nestSubexpressions,length:n.lengthExpression,bitsPerPass:n.bitsPerPass,log:n.log};h.push(await BM.fromSourceAsync(e.device,`${t} histogram ${E}`,$a,[MM.READ_ONLY_STORAGE_BUFFER,MM.STORAGE_BUFFER],No({},i))),u.push(await BM.fromSourceAsync(e.device,`${t} scatter ${E}`,so,[MM.READ_ONLY_STORAGE_BUFFER,MM.READ_ONLY_STORAGE_BUFFER,MM.STORAGE_BUFFER],No({bitsPerInnerPass:n.bitsPerInnerPass,innerBitVectorSize:l,factorOutSubexpressions:n.factorOutSubexpressions,earlyLoad:n.earlyLoad},i)))}const c={valueType:"u32",workgroupSize:n.workgroupSize,grainSize:n.grainSize,identity:"0u",combineExpression:(e,t)=>`${e} + ${t}`,combineStatements:null,factorOutSubexpressions:n.factorOutSubexpressions,nestSubexpressions:n.nestSubexpressions,log:n.log},d=n.lengthExpression?`( ( ( ( ${n.lengthExpression} ) + ${xt(n.workgroupSize*n.grainSize-1)} ) / ${xt(n.workgroupSize*n.grainSize)} ) << ${xt(n.bitsPerPass)} )`:null,p=await BM.fromSourceAsync(e.device,t+" reduction",ka,[MM.READ_ONLY_STORAGE_BUFFER,MM.STORAGE_BUFFER],No({convergent:!0,convergentRemap:!1,inputOrder:"blocked",inputAccessOrder:"striped",length:d,stripeOutput:!1},c)),m=await BM.fromSourceAsync(e.device,t+" middle scan",Xa,[MM.STORAGE_BUFFER,MM.STORAGE_BUFFER],No({length:d?`( ${d} + ${xt(a-1)} ) / ${xt(a)}`:null,inputOrder:"blocked",inputAccessOrder:"striped",exclusive:n.isReductionExclusive,getAddedValue:null,stripeReducedOutput:!1,inPlace:!0},c)),g=await BM.fromSourceAsync(e.device,t+" lower scan",Ua,[MM.STORAGE_BUFFER],No({length:d?`( ${d} + ${xt(a*a-1)} ) / ${xt(a*a)}`:null,inputOrder:"blocked",inputAccessOrder:"striped",exclusive:n.isReductionExclusive,getAddedValue:null,inPlace:!0},c)),f=await BM.fromSourceAsync(e.device,t+" upper scan",Za,[MM.READ_ONLY_STORAGE_BUFFER,MM.READ_ONLY_STORAGE_BUFFER,MM.READ_ONLY_STORAGE_BUFFER,MM.STORAGE_BUFFER],No({length:d,inputOrder:"blocked",inputAccessOrder:"striped",exclusive:!0,isReductionExclusive:n.isReductionExclusive,inPlace:!1},c)),y=n.log?await tk.getLogBarrierComputeShader(e):null;return new xI(async(e,t)=>{const i=Math.ceil(t.length/(n.workgroupSize*n.grainSize)),r=i*(1<<n.bitsPerPass),a=Math.ceil(r/(n.workgroupSize*n.grainSize)),l=Math.ceil(r/(n.workgroupSize*n.workgroupSize*n.grainSize*n.grainSize)),c=e.createByteEncoderBuffer((new qM).encodeValues(t,s.encode)),d=e.createBuffer(4*r),E=e.createBuffer(4*r),v=e.createBuffer(4*a),A=e.createBuffer(4*l);let b=c,S=e.createBuffer(s.bytesPerElement*t.length);y&&e.setLogBarrierShader(y);for(let n=0;n<o;n++){e.dispatch(h[n],[b,d],i),e.dispatch(p,[d,v],a),e.dispatch(m,[v,A],l),e.dispatch(g,[A]),e.dispatch(f,[d,v,A,E],a),e.dispatch(u[n],[b,E,S],i);const t=b;b=S,S=t}return new qM(await e.arrayBuffer(b)).decodeValues(s.decode,s.bytesPerElement).slice(0,t.length)},n)}}St.register("TripleRadixSortShader",xI);const wI={workgroupSize:256,grainSize:8,lengthExpression:null,bitsPerPass:8,bitsPerInnerPass:2,earlyLoad:!1,factorOutSubexpressions:!0,nestSubexpressions:!1,isReductionExclusive:!1,log:!1};class TI extends RM{static getMaximumElementQuantity(e,t,i){const n=e*t;return n*Math.floor(n*n/(1<<i))}static async create(e,t,i){const n=Ro()({},wI,i),r=n.order,s=r.type,a=n.workgroupSize*n.grainSize,o=Math.ceil(n.totalBits/n.bitsPerPass),l=_I(n.workgroupSize,n.grainSize,n.bitsPerInnerPass),h=[],u=[];for(let y=0;y<o;y++){const i={order:r,pass:y,workgroupSize:n.workgroupSize,grainSize:n.grainSize,factorOutSubexpressions:n.factorOutSubexpressions,nestSubexpressions:n.nestSubexpressions,length:n.lengthExpression,bitsPerPass:n.bitsPerPass,log:n.log};h.push(await BM.fromSourceAsync(e.device,`${t} histogram ${y}`,$a,[MM.READ_ONLY_STORAGE_BUFFER,MM.STORAGE_BUFFER],No({},i))),u.push(await BM.fromSourceAsync(e.device,`${t} scatter ${y}`,so,[MM.READ_ONLY_STORAGE_BUFFER,MM.READ_ONLY_STORAGE_BUFFER,MM.STORAGE_BUFFER],No({bitsPerInnerPass:n.bitsPerInnerPass,innerBitVectorSize:l,factorOutSubexpressions:n.factorOutSubexpressions,earlyLoad:n.earlyLoad},i)))}const c={valueType:"u32",workgroupSize:n.workgroupSize,grainSize:n.grainSize,identity:"0u",combineExpression:(e,t)=>`${e} + ${t}`,combineStatements:null,factorOutSubexpressions:n.factorOutSubexpressions,nestSubexpressions:n.nestSubexpressions,log:n.log},d=n.lengthExpression?`( ( ( ( ${n.lengthExpression} ) + ${xt(n.workgroupSize*n.grainSize-1)} ) / ${xt(n.workgroupSize*n.grainSize)} ) << ${xt(n.bitsPerPass)} )`:null,p=await BM.fromSourceAsync(e.device,t+" reduction",ka,[MM.READ_ONLY_STORAGE_BUFFER,MM.STORAGE_BUFFER],No({length:d,convergent:!0,convergentRemap:!1,inputOrder:"blocked",inputAccessOrder:"striped",stripeOutput:!1},c)),m=await BM.fromSourceAsync(e.device,t+" lower scan",Ua,[MM.STORAGE_BUFFER],No({length:d?`( ${d} + ${xt(a-1)} ) / ${xt(a)}`:null,inputOrder:"blocked",inputAccessOrder:"striped",exclusive:n.isReductionExclusive,getAddedValue:null,inPlace:!0},c)),g=await BM.fromSourceAsync(e.device,t+" upper scan",Qa,[MM.READ_ONLY_STORAGE_BUFFER,MM.READ_ONLY_STORAGE_BUFFER,MM.STORAGE_BUFFER],No({length:d,inputOrder:"blocked",inputAccessOrder:"striped",exclusive:!0,isReductionExclusive:n.isReductionExclusive,inPlace:!1},c)),f=n.log?await tk.getLogBarrierComputeShader(e):null;return new TI(async(e,t)=>{const i=Math.ceil(t.length/(n.workgroupSize*n.grainSize)),r=i*2**n.bitsPerPass,a=Math.ceil(r/(n.workgroupSize*n.grainSize)),l=e.createByteEncoderBuffer((new qM).encodeValues(t,s.encode)),c=e.createBuffer(4*r),d=e.createBuffer(4*r),y=e.createBuffer(4*a);let E=l,v=e.createBuffer(s.bytesPerElement*t.length);f&&e.setLogBarrierShader(f);for(let n=0;n<o;n++){e.dispatch(h[n],[E,c],i),e.dispatch(p,[c,y],a),e.dispatch(m,[y]),e.dispatch(g,[c,y,d],a),e.dispatch(u[n],[E,d,v],i);const t=E;E=v,v=t}return new qM(await e.arrayBuffer(E)).decodeValues(s.decode,s.bytesPerElement).slice(0,t.length)},n)}}St.register("DoubleRadixSortShader",TI);class PI{static async render(){const e=await PM.getDevice(),t=new PM(e),i=document.createElement("canvas");i.width=512*window.devicePixelRatio,i.height=512*window.devicePixelRatio,i.style.width="512px",i.style.height="512px";const n=t.getCanvasContext(i,"srgb").getCurrentTexture(),r=PI.getTestPath().toEdgedFace().edges,s=e=>r.flatMap(t=>{const i=e.timesVector2(t.endPoint),n=e.timesVector2(t.startPoint);return[i.x,i.y,n.x,n.y]}),a=[...s(Mh.scaling(1.5)),...s(Mh.translation(150,0).timesMatrix(Mh.scaling(.2))),...s(Mh.translation(300,0).timesMatrix(Mh.scaling(.2))),...s(Mh.translation(450,0).timesMatrix(Mh.scaling(.2))),...s(Mh.translation(600,0).timesMatrix(Mh.scaling(.2))),...s(Mh.translation(750,0).timesMatrix(Mh.scaling(.2))),...s(Mh.translation(900,0).timesMatrix(Mh.scaling(.2))),..._.range(0,10).flatMap(e=>_.range(0,4).flatMap(t=>s(Mh.translation(100+40*e,800+40*t).timesMatrix(Mh.scaling(.05)))))];console.log("edge count: "+a.length/4);const o=e.createBuffer({label:"config buffer",size:16,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST});e.queue.writeBuffer(o,0,new Uint32Array([a.length/4]).buffer);const l=t.createBuffer(4*a.length);e.queue.writeBuffer(l,0,new Float32Array(a).buffer);const h=BM.fromSource(e,"shader",ho,[MM.UNIFORM_BUFFER,"bgra8unorm"===t.preferredStorageFormat?MM.TEXTURE_OUTPUT_BGRA8UNORM:MM.TEXTURE_OUTPUT_RGBA8UNORM,MM.READ_ONLY_STORAGE_BUFFER],{preferredStorageFormat:t.preferredStorageFormat}),u=new DM(e,t.preferredCanvasFormat),c=e.createCommandEncoder({label:"the encoder"}),d=n.format;if("bgra8unorm"!==d&&"rgba8unorm"!==d)throw new Error("unsupported format");const p=d===t.preferredStorageFormat;let m,g=null;const f=n.createView();p?m=f:(g=e.createTexture({label:"fineOutputTexture",size:{width:n.width,height:n.height,depthOrArrayLayers:1},format:t.preferredStorageFormat,usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.STORAGE_BINDING}),m=g.createView({label:"fineOutputTextureView",format:t.preferredStorageFormat,dimension:"2d"})),h.dispatch(c,[o,m,l],i.width/16,i.height/16),p||u.dispatch(c,f,m);const y=c.finish();e.queue.submit([y]);const E=Date.now();return e.queue.onSubmittedWorkDone().then(()=>{const e=Date.now();console.log(e-E)}).catch(e=>{throw e}),o.destroy(),g&&g.destroy(),i}static getTestPath(){return SR.deserialize(JSON.parse('{"polygons":[[{"x":340,"y":420},{"x":336.4552722930908,"y":419.95716361999513},{"x":332.9326568603515,"y":419.8293109130859},{"x":329.43309898376464,"y":419.6174265289307},{"x":325.95754394531247,"y":419.3224951171875},{"x":322.5069370269775,"y":418.94550132751476},{"x":319.0822235107421,"y":418.48742980957036},{"x":315.68434867858883,"y":417.9492652130127},{"x":312.3142578125,"y":417.33199218749996},{"x":308.97289619445803,"y":416.6365953826904},{"x":305.6612091064453,"y":415.8640594482422},{"x":302.38014183044436,"y":415.0153690338135},{"x":299.1306396484375,"y":414.0915087890625},{"x":295.9136478424072,"y":413.09346336364746},{"x":292.7301116943359,"y":412.02221740722655},{"x":289.580976486206,"y":410.878755569458},{"x":286.46718749999997,"y":409.6640625},{"x":283.38969001770016,"y":408.37912284851075},{"x":280.34942932128905,"y":407.02492126464847},{"x":277.347350692749,"y":405.6024423980713},{"x":274.38439941406244,"y":404.11267089843744},{"x":271.4615207672119,"y":402.5565914154053},{"x":268.57966003417965,"y":400.9351885986328},{"x":265.7397624969482,"y":399.2494470977783},{"x":262.94277343749997,"y":397.5003515625},{"x":260.1896381378174,"y":395.68888664245605},{"x":257.48130187988284,"y":393.81603698730464},{"x":254.8187099456787,"y":391.882787246704},{"x":252.2028076171875,"y":389.8901220703125},{"x":249.63454017639157,"y":387.8390261077881},{"x":247.11485290527344,"y":385.73048400878906},{"x":244.6446910858154,"y":383.5654804229737},{"x":242.225,"y":381.34499999999997},{"x":239.85672492980956,"y":379.07002738952644},{"x":237.54081115722653,"y":376.741547241211},{"x":235.27820396423337,"y":374.36054420471197},{"x":233.06984863281247,"y":371.9280029296875},{"x":230.91669044494628,"y":369.44490806579597},{"x":228.81967468261718,"y":366.91224426269537},{"x":226.77974662780764,"y":364.330996170044},{"x":224.79785156250003,"y":361.7021484375},{"x":222.87493476867672,"y":359.0266857147217},{"x":221.01194152832034,"y":356.3055926513672},{"x":219.20981712341307,"y":353.5398538970947},{"x":217.46950683593752,"y":350.7304541015625},{"x":215.79195594787598,"y":347.8783779144287},{"x":214.17810974121096,"y":344.98460998535154},{"x":212.6289134979248,"y":342.0501349639892},{"x":211.1453125,"y":339.0759375},{"x":209.72825202941897,"y":336.063002243042},{"x":208.37867736816406,"y":333.01231384277344},{"x":207.0975337982178,"y":329.92485694885255},{"x":205.8857666015625,"y":326.8016162109375},{"x":204.74432106018065,"y":323.6435762786865},{"x":203.6741424560547,"y":320.4517218017578},{"x":202.676176071167,"y":317.2270374298095},{"x":201.7513671875,"y":313.9705078125},{"x":200.90066108703613,"y":310.68311759948733},{"x":200.1250030517578,"y":307.3658514404297},{"x":199.42533836364743,"y":304.01969398498534},{"x":198.80261230468747,"y":300.6456298828125},{"x":198.25777015686032,"y":297.24464378356936},{"x":197.7917572021484,"y":293.817720336914},{"x":197.40551872253417,"y":290.3658441925049},{"x":197.1,"y":286.89},{"x":144.65,"y":246.355},{"x":92.2,"y":205.82},{"x":89.62759521484375,"y":209.07552734375},{"x":87.08294921875,"y":212.35531249999997},{"x":84.56803955078125,"y":215.66041015624998},{"x":82.08484375,"y":218.991875},{"x":79.63533935546874,"y":222.35076171875002},{"x":77.22150390625,"y":225.73812500000003},{"x":74.84531494140626,"y":229.15501953125},{"x":72.50875,"y":232.60250000000002},{"x":70.21378662109375,"y":236.08162109375},{"x":67.96240234375,"y":239.59343749999996},{"x":65.75657470703126,"y":243.13900390624994},{"x":63.59828125,"y":246.71937499999999},{"x":61.489499511718755,"y":250.33560546874997},{"x":59.43220703125,"y":253.98874999999998},{"x":57.428381347656256,"y":257.67986328125005},{"x":55.480000000000004,"y":261.40999999999997},{"x":54.67596367714076,"y":263.1231672908415},{"x":53.97347991908751,"y":264.88041887913425},{"x":53.37495277064072,"y":266.67574108627656},{"x":52.88243051556872,"y":268.5029899481301},{"x":52.49759866695683,"y":270.35591224093685},{"x":52.22177419903272,"y":272.22816688114483},{"x":52.05590104020802,"y":274.11334662590866},{"x":52.00054684276001,"y":276.005},{"x":52.05590104020802,"y":277.89665337409133},{"x":52.22177419903272,"y":279.7818331188551},{"x":52.49759866695683,"y":281.65408775906315},{"x":52.882430515568714,"y":283.5070100518699},{"x":53.37495277064071,"y":285.33425891372343},{"x":53.97347991908751,"y":287.12958112086574},{"x":54.67596367714076,"y":288.8868327091585},{"x":55.480000000000004,"y":290.6},{"x":58.06080154418946,"y":295.53463771820066},{"x":60.71857055664063,"y":300.4182931518555},{"x":63.45244735717773,"y":305.2501109695434},{"x":66.261572265625,"y":310.02923583984375},{"x":69.14508560180664,"y":314.7548124313355},{"x":72.10212768554689,"y":319.4259854125977},{"x":75.13183883666993,"y":324.0418994522095},{"x":78.23335937499999,"y":328.60169921875},{"x":81.40582962036132,"y":333.10452938079834},{"x":84.64838989257814,"y":337.5495346069336},{"x":87.9601805114746,"y":341.9358595657349},{"x":91.340341796875,"y":346.26264892578126},{"x":94.78801406860352,"y":350.52904735565187},{"x":98.30233764648438,"y":354.7341995239258},{"x":101.88245285034179,"y":358.8772500991821},{"x":105.52749999999999,"y":362.95734375000006},{"x":109.23661941528319,"y":366.9736251449585},{"x":113.0089514160156,"y":370.92523895263673},{"x":116.84363632202147,"y":374.81132984161377},{"x":120.73981445312499,"y":378.63104248046875},{"x":124.69662612915037,"y":382.3835215377807},{"x":128.71321166992186,"y":386.06791168212885},{"x":132.78871139526365,"y":389.6833575820923},{"x":136.92226562499997,"y":393.22900390625},{"x":141.11301467895507,"y":396.70399532318106},{"x":145.36009887695312,"y":400.1074765014649},{"x":149.66265853881836,"y":403.4385921096802},{"x":154.019833984375,"y":406.69648681640626},{"x":158.43076553344727,"y":409.88030529022217},{"x":162.89459350585938,"y":412.9891921997071},{"x":167.41045822143553,"y":416.02229221344},{"x":171.97750000000002,"y":418.97875},{"x":176.59485916137695,"y":421.8577102279663},{"x":181.2616760253906,"y":424.65831756591797},{"x":185.97709091186525,"y":427.37971668243404},{"x":190.74024414062498,"y":430.02105224609375},{"x":195.55027603149415,"y":432.5814689254761},{"x":200.40632690429683,"y":435.06011138916017},{"x":205.3075370788574,"y":437.4561243057251},{"x":210.25304687499997,"y":439.76865234375},{"x":215.2419966125488,"y":441.9968401718139},{"x":220.2735266113281,"y":444.13983245849613},{"x":225.3467771911621,"y":446.1967738723755},{"x":230.46088867187495,"y":448.16680908203125},{"x":235.615001373291,"y":450.0490827560425},{"x":240.80825561523434,"y":451.84273956298824},{"x":246.03979171752925,"y":453.54692417144776},{"x":251.30874999999997,"y":455.16078125},{"x":256.6142707824707,"y":456.6834554672241},{"x":261.95549438476553,"y":458.11409149169924},{"x":267.33156112670895,"y":459.45183399200437},{"x":272.741611328125,"y":460.6958276367187},{"x":278.18478530883783,"y":461.84521709442134},{"x":283.66022338867185,"y":462.8991470336914},{"x":289.1670658874512,"y":463.85676212310796},{"x":294.704453125,"y":464.71720703125},{"x":300.27152542114254,"y":465.4796264266968},{"x":305.8674230957031,"y":466.14316497802736},{"x":311.49128646850585,"y":466.7069673538208},{"x":317.142255859375,"y":467.17017822265626},{"x":322.8194715881348,"y":467.53194225311285},{"x":328.5220739746094,"y":467.79140411376954},{"x":334.24920333862303,"y":467.9477084732056},{"x":340,"y":468},{"x":345.0344946289062,"y":467.9535009765625},{"x":350.04673828125004,"y":467.8155078125},{"x":355.0367456054688,"y":467.5882763671875},{"x":360.00453125,"y":467.2740625},{"x":364.9501098632813,"y":466.87512207031256},{"x":369.87349609375,"y":466.39371093750003},{"x":374.7747045898438,"y":465.83208496093755},{"x":379.65375,"y":465.1925},{"x":384.5106469726562,"y":464.47721191406254},{"x":389.34541015625,"y":463.6884765625},{"x":394.1580541992187,"y":462.82854980468755},{"x":398.94859374999993,"y":461.89968749999997},{"x":403.71704345703125,"y":460.90414550781253},{"x":408.46341796875,"y":459.84417968749995},{"x":413.18773193359374,"y":458.7220458984375},{"x":417.89,"y":457.54},{"x":391.945,"y":437.46500000000003},{"x":366.00000000000006,"y":417.39},{"x":362.7817833913764,"y":417.9738784680733},{"x":359.55114628528406,"y":418.48458003869973},{"x":356.30975238236977,"y":418.921841712816},{"x":353.05927092277255,"y":419.2854383111443},{"x":349.8013758265054,"y":419.57518259015467},{"x":346.53774483142627,"y":419.79092533849087},{"x":343.2700586292436,"y":419.93255545381044}],[],[{"x":653.8199999999999,"y":478.1},{"x":598.545,"y":435.38},{"x":543.27,"y":392.66},{"x":546.391509482518,"y":389.99611061704934},{"x":549.4797786155692,"y":387.2937557447408},{"x":552.5343334314416,"y":384.55335012314424},{"x":555.5547051366799,"y":381.77531433211436},{"x":558.540430184033,"y":378.9600747267424},{"x":561.4910503435965,"y":376.10806337192196},{"x":564.4061127731386,"y":373.21971797603896},{"x":567.2851700875998,"y":370.29548182379426},{"x":570.1277804277539,"y":367.3358037081717},{"x":572.9335075280228,"y":364.3411378615598},{"x":575.7019207834309,"y":361.31194388603956},{"x":578.4325953156917,"y":358.2486866828474},{"x":581.125112038416,"y":355.1518363810251},{"x":583.7790577214296,"y":352.02186826526724},{"x":586.3940250541942,"y":348.85926270297836},{"x":588.9696127083182,"y":345.6645050705481},{"x":591.50542539915,"y":342.43808567885975},{"x":594.0010739464442,"y":339.18049969803974},{"x":596.4561753340901,"y":335.89224708146253},{"x":598.8703527688943,"y":332.5738324890211},{"x":601.2432357384096,"y":329.2257652096744},{"x":603.5744600677972,"y":325.84855908328564},{"x":605.8636679757196,"y":322.442732421761},{"x":608.1105081292496,"y":319.00880792950255},{"x":610.3146356977905,"y":315.547312623187},{"x":612.4757124059993,"y":312.05877775088254},{"x":614.5934065857023,"y":308.54373871051615},{"x":616.6673932267975,"y":305.00273496770455},{"x":618.6973540271354,"y":301.4363099729601},{"x":620.68297744137,"y":297.84501107828567},{"x":622.6239587287721,"y":294.22938945317037},{"x":624.52,"y":290.59000000000003},{"x":625.3240363228592,"y":288.8768327091585},{"x":626.0265200809124,"y":287.11958112086575},{"x":626.6250472293592,"y":285.32425891372344},{"x":627.1175694844312,"y":283.49701005186995},{"x":627.502401333043,"y":281.6440877590632},{"x":627.7782258009672,"y":279.77183311885517},{"x":627.9440989597919,"y":277.88665337409134},{"x":627.9994531572399,"y":275.995},{"x":627.9440989597919,"y":274.1033466259087},{"x":627.7782258009672,"y":272.21816688114495},{"x":627.502401333043,"y":270.34591224093685},{"x":627.1175694844312,"y":268.4929899481301},{"x":626.6250472293592,"y":266.6657410862766},{"x":626.0265200809124,"y":264.8704188791343},{"x":625.3240363228592,"y":263.1131672908415},{"x":624.52,"y":261.40000000000003},{"x":621.9391984558106,"y":256.46536228179934},{"x":619.2814294433595,"y":251.58170684814456},{"x":616.5475526428223,"y":246.7498890304566},{"x":613.738427734375,"y":241.97076416015628},{"x":610.8549143981934,"y":237.2451875686646},{"x":607.8978723144531,"y":232.5740145874024},{"x":604.86816116333,"y":227.95810054779056},{"x":601.7666406249999,"y":223.39830078125001},{"x":598.5941703796387,"y":218.8954706192017},{"x":595.351610107422,"y":214.45046539306642},{"x":592.0398194885255,"y":210.06414043426517},{"x":588.6596582031249,"y":205.73735107421876},{"x":585.2119859313965,"y":201.47095264434813},{"x":581.6976623535156,"y":197.2658004760742},{"x":578.1175471496581,"y":193.12274990081787},{"x":574.4725,"y":189.04265625000002},{"x":570.7633805847167,"y":185.02637485504147},{"x":566.9910485839844,"y":181.07476104736327},{"x":563.1563636779784,"y":177.18867015838623},{"x":559.260185546875,"y":173.36895751953125},{"x":555.3033738708496,"y":169.61647846221922},{"x":551.2867883300781,"y":165.9320883178711},{"x":547.2112886047364,"y":162.31664241790773},{"x":543.077734375,"y":158.77099609375},{"x":538.886985321045,"y":155.29600467681885},{"x":534.6399011230469,"y":151.89252349853516},{"x":530.3373414611817,"y":148.56140789031983},{"x":525.980166015625,"y":145.30351318359376},{"x":521.5692344665526,"y":142.11969470977783},{"x":517.1054064941407,"y":139.01080780029298},{"x":512.5895417785644,"y":135.97770778656007},{"x":508.0225,"y":133.02125},{"x":503.4051408386231,"y":130.1422897720337},{"x":498.73832397460933,"y":127.34168243408205},{"x":494.0229090881347,"y":124.62028331756592},{"x":489.259755859375,"y":121.97894775390627},{"x":484.44972396850585,"y":119.41853107452393},{"x":479.59367309570314,"y":116.93988861083986},{"x":474.6924629211426,"y":114.54387569427492},{"x":469.746953125,"y":112.23134765625001},{"x":464.75800338745114,"y":110.00315982818603},{"x":459.72647338867193,"y":107.86016754150391},{"x":454.6532228088379,"y":105.80322612762451},{"x":449.539111328125,"y":103.83319091796875},{"x":444.38499862670903,"y":101.95091724395752},{"x":439.1917443847656,"y":100.15726043701171},{"x":433.9602082824707,"y":98.45307582855226},{"x":428.69125,"y":96.83921875},{"x":423.38572921752933,"y":95.3165445327759},{"x":418.0445056152344,"y":93.8859085083008},{"x":412.668438873291,"y":92.54816600799562},{"x":407.258388671875,"y":91.30417236328125},{"x":401.8152146911621,"y":90.15478290557861},{"x":396.33977661132815,"y":89.10085296630858},{"x":390.8329341125488,"y":88.14323787689209},{"x":385.295546875,"y":87.28279296875},{"x":379.72847457885746,"y":86.52037357330323},{"x":374.1325769042969,"y":85.85683502197267},{"x":368.5087135314942,"y":85.2930326461792},{"x":362.857744140625,"y":84.82982177734375},{"x":357.1805284118652,"y":84.46805774688721},{"x":351.4779260253906,"y":84.20859588623047},{"x":345.75079666137697,"y":84.05229152679443},{"x":340,"y":84},{"x":335.1985487025351,"y":84.04322831525934},{"x":330.3983538815045,"y":84.16126614528878},{"x":325.6005810436157,"y":84.35408483002584},{"x":320.806395107509,"y":84.6216375523145},{"x":316.0169601209104,"y":84.96385934927218},{"x":311.2334389779963,"y":85.38066712806318},{"x":306.4569931370377,"y":85.8719596860737},{"x":301.6887823383938,"y":86.43761773548471},{"x":296.9299643229224,"y":87.077503932235},{"x":292.18169455087525,"y":87.79146290936933},{"x":287.44512592134816,"y":88.57932131476178},{"x":282.72140849235234,"y":89.44088785320662},{"x":278.0116892015752,"y":90.37595333286532},{"x":273.3171115879,"y":91.38429071605941},{"x":268.6388155137493,"y":92.46565517439598},{"x":263.97793688832223,"y":93.61978414821306},{"x":259.33560739179086,"y":94.84639741033021},{"x":254.71295420052377,"y":96.14519713408873},{"x":250.11109971340306,"y":97.51586796566528},{"x":245.53116127930156,"y":98.95807710064082},{"x":240.97425092578567,"y":100.4714743648073},{"x":236.4414750891106,"y":102.05569229919092},{"x":231.93393434557373,"y":103.71034624927296},{"x":227.45272314428945,"y":105.43503445838536},{"x":222.99892954145287,"y":107.2293381652587},{"x":218.57363493615554,"y":109.09282170569946},{"x":214.1779138078171,"y":111.0250326183708},{"x":209.81283345529738,"y":113.02550175465205},{"x":205.47945373775215,"y":115.09374339254987},{"x":201.17882681729458,"y":117.22925535463372},{"x":196.9119969035265,"y":119.4315191299662},{"x":192.68,"y":121.69999999999987},{"x":129.07,"y":72.53499999999994},{"x":65.46000000000001,"y":23.37},{"x":64.82829033313763,"y":22.902878403528547},{"x":64.17441177454202,"y":22.46732987614459},{"x":63.4999409370092,"y":22.06440459967859},{"x":62.80650408483404,"y":21.695074095735556},{"x":62.09577321260943,"y":21.360228883190644},{"x":61.369462013762,"y":21.06067633099615},{"x":60.62932174854486,"y":20.79713871147722},{"x":59.87713702145016,"y":20.57025145880999},{"x":59.11472147822319,"y":20.380561636881335},{"x":58.3439134328529,"y":20.228526620224493},{"x":57.5665714350832,"y":20.114512991211004},{"x":56.78456978913232,"y":20.038795656158044},{"x":55.99979403442546,"y":20.001557182482387},{"x":55.214136399237475,"y":20.0028873584992},{"x":54.429491238207554,"y":20.042782976927107},{"x":53.64775046472691,"y":20.121147842621465},{"x":52.8707989892127,"y":20.237793004517293},{"x":52.10051017426735,"y":20.392437211222536},{"x":51.33874131768159,"y":20.584707589163166},{"x":50.587329174172524,"y":20.814140541644996},{"x":49.84808552665457,"y":21.08018286666445},{"x":49.122792817721596,"y":21.382193090772976},{"x":48.4131998518737,"y":21.71944301577902},{"x":47.72101757885103,"y":22.09111947455814},{"x":47.047914968242054,"y":22.496326291737724},{"x":46.395514985313014,"y":22.934086444528724},{"x":45.76539067776168,"y":23.40334441849439},{"x":45.159061382830906,"y":23.902968752575664},{"x":44.577989063927255,"y":24.431754767236924},{"x":44.02357478557771,"y":24.98842746915392},{"x":43.49715533522402,"y":25.571644625440264},{"x":43.00000000000001,"y":26.179999999999996},{"x":33.185,"y":38.815},{"x":23.369999999999997,"y":51.45},{"x":22.903442023840576,"y":52.08158103552398},{"x":22.468432203959118,"y":52.73529152661177},{"x":22.066018252924806,"y":53.409557024442165},{"x":21.697169376799753,"y":54.10275357386578},{"x":21.362773940825342,"y":54.81321162466893},{"x":21.06363732981206,"y":55.53922005265238},{"x":20.800480008386067,"y":56.279030280840274},{"x":20.573935785764373,"y":57.03086049089322},{"x":20.384550289237822,"y":57.79289991458265},{"x":20.232779650038545,"y":58.56331319499036},{"x":20.118989404756867,"y":59.34024480692944},{"x":20.04345361495367,"y":60.121823525940094},{"x":20.006354207088496,"y":60.906166935096806},{"x":20.007780534353277,"y":61.69138595877241},{"x":20.04772916146694,"y":62.47558941243941},{"x":20.126103872949194,"y":63.25688855755068},{"x":20.242715904853647,"y":64.03340165052893},{"x":20.397284399402,"y":64.803258474909},{"x":20.58943708142452,"y":65.56460484571738},{"x":20.818711154977407,"y":66.31560707524002},{"x":21.084554417977685,"y":67.05445638942317},{"x":21.386326592171077,"y":67.77937328426981},{"x":21.723300865229476,"y":68.48861181174016},{"x":22.094665641264168,"y":69.18046378483282},{"x":22.49952649553847,"y":69.85326289171972},{"x":22.93690832867208,"y":70.5053887090251},{"x":23.40575771514871,"y":71.13527060458333},{"x":23.904945440470634,"y":71.74139152027543},{"x":24.433269220849553,"y":72.32229162583374},{"x":24.989456598883354,"y":72.8765718348142},{"x":25.57216800824468,"y":73.40289717426846},{"x":26.180000000000014,"y":73.9},{"x":320.35999999999996,"y":301.265},{"x":614.54,"y":528.63},{"x":615.1717096668624,"y":529.0971215964714},{"x":615.825588225458,"y":529.5326701238555},{"x":616.5000590629908,"y":529.9355954003214},{"x":617.193495915166,"y":530.3049259042645},{"x":617.9042267873906,"y":530.6397711168094},{"x":618.630537986238,"y":530.9393236690039},{"x":619.3706782514552,"y":531.2028612885229},{"x":620.1228629785498,"y":531.4297485411901},{"x":620.8852785217769,"y":531.6194383631187},{"x":621.6560865671471,"y":531.7714733797756},{"x":622.4334285649168,"y":531.885487008789},{"x":623.2154302108677,"y":531.9612043438419},{"x":624.0002059655745,"y":531.9984428175176},{"x":624.7858636007626,"y":531.9971126415008},{"x":625.5705087617924,"y":531.9572170230729},{"x":626.3522495352731,"y":531.8788521573786},{"x":627.1292010107874,"y":531.7622069954828},{"x":627.8994898257326,"y":531.6075627887775},{"x":628.6612586823185,"y":531.4152924108369},{"x":629.4126708258275,"y":531.185859458355},{"x":630.1519144733454,"y":530.9198171333355},{"x":630.8772071822784,"y":530.617806909227},{"x":631.5868001481264,"y":530.280556984221},{"x":632.2789824211491,"y":529.9088805254419},{"x":632.952085031758,"y":529.5036737082623},{"x":633.604485014687,"y":529.0659135554713},{"x":634.2346093222384,"y":528.5966555815056},{"x":634.8409386171692,"y":528.0970312474244},{"x":635.4220109360728,"y":527.568245232763},{"x":635.9764252144223,"y":527.011572530846},{"x":636.502844664776,"y":526.4283553745597},{"x":637,"y":525.8199999999999},{"x":646.8199999999999,"y":513.185},{"x":656.64,"y":500.55},{"x":657.1063472490254,"y":499.91819503526636},{"x":657.5411333621701,"y":499.2642697291709},{"x":657.9433110190528,"y":498.5897992684093},{"x":658.3119114471109,"y":497.8964083292048},{"x":658.6460467551972,"y":497.18576716375935},{"x":658.9449120723469,"y":496.4595875769211},{"x":659.2077874865655,"y":495.719618802759},{"x":659.434039778965,"y":494.96764329097715},{"x":659.6231239490729,"y":494.205472413319},{"x":659.7745845276384,"y":493.4349421003032},{"x":659.8880566737752,"y":492.6579084188024},{"x":659.9632670537962,"y":491.8762431011167},{"x":660.0000344996249,"y":491.0918290363124},{"x":659.9982704451957,"y":490.3065557346858},{"x":659.9579791397936,"y":489.5223147762779},{"x":659.8792576378187,"y":488.74099525440323},{"x":659.7622955649995,"y":487.96447922516916},{"x":659.6073746616194,"y":487.19463717394603},{"x":659.4148681038556,"y":486.43332350970934},{"x":659.1852396048658,"y":485.6823720981071},{"x":658.9190422977882,"y":484.9435918440125},{"x":658.6169174033441,"y":484.21876233420153},{"x":658.2795926852549,"y":483.5096295506542},{"x":657.9078806971916,"y":482.817901664802},{"x":657.5026768254818,"y":482.1452449228548},{"x":657.0649571322871,"y":481.49327963211834},{"x":656.5957760044475,"y":480.86357625796916},{"x":656.0962636136567,"y":480.2576516408904},{"x":655.5676231940836,"y":479.67696534268015},{"x":655.0111281440018,"y":479.12291613063303},{"x":654.4281189584051,"y":478.5968386081656}],[],[{"x":470.0999999999999,"y":336.1},{"x":450.44999999999993,"y":320.91},{"x":430.79999999999995,"y":305.71999999999997},{"x":431.40130787145887,"y":303.9242547258393},{"x":431.9666063019739,"y":302.11685052909576},{"x":432.4956694714439,"y":300.2985094146017},{"x":432.988286034689,"y":298.4699577561667},{"x":433.4442592058769,"y":296.63192600641213},{"x":433.86340683713297,"y":294.7851484049773},{"x":434.24556149130296,"y":292.930362685212},{"x":434.5905705088393,"y":291.0683097794739},{"x":434.8982960687839,"y":289.1997335231478},{"x":435.1686152438239,"y":287.32538035750514},{"x":435.40142004939725,"y":285.4459990315229},{"x":435.59661748682936,"y":283.56234030278006},{"x":435.75412958048355,"y":281.67515663755256},{"x":435.8738934089098,"y":279.7852019102245},{"x":435.95586112998006,"y":277.893231102138},{"x":436,"y":275.9999999999999},{"x":435.99605743513746,"y":273.2342366339812},{"x":435.91140063391276,"y":270.4697663833482},{"x":435.74610171415947,"y":267.70894425801},{"x":435.5003014914983,"y":264.9541221600937},{"x":435.1742093593781,"y":262.20764688039463},{"x":434.7681031106968,"y":259.4718580991817},{"x":434.2823287011542,"y":256.7490863930591},{"x":433.7172999545372,"y":254.0416512495838},{"x":433.07349821019,"y":251.3518590913299},{"x":432.35147191296807,"y":248.68200131108233},{"x":431.5518361460269,"y":246.03435231983428},{"x":430.6752721068416,"y":243.41116760925144},{"x":429.72252652690537,"y":240.8146818302531},{"x":428.69441103560047,"y":238.24710688934732},{"x":427.5918014687834,"y":235.71063006434142},{"x":426.41563712267384,"y":233.20741214103364},{"x":425.1669199536825,"y":230.7395855724728},{"x":423.8467137248599,"y":228.30925266235403},{"x":422.45614309969267,"y":225.9184837740985},{"x":420.99639268402024,"y":223.56931556714255},{"x":419.468706016887,"y":221.26374926193859},{"x":417.87438451119056,"y":219.00374893514606},{"x":416.2147863450279,"y":216.79123984646458},{"x":414.49132530468444,"y":214.62810679853462},{"x":412.7054695802509,"y":212.51619253130303},{"x":410.85874051489463,"y":210.4572961522211},{"x":408.95271130885084,"y":208.45317160361225},{"x":406.98900567923727,"y":206.50552616851567},{"x":404.96929647683436,"y":204.6160190162779},{"x":402.89530426100947,"y":202.7862597891318},{"x":400.76879583399847,"y":201.01780723096704},{"x":398.5915827357939,"y":199.31216785945998},{"x":396.36551970092205,"y":197.6707946826943},{"x":394.0925030784229,"y":196.09508596136573},{"x":391.7744692163791,"y":194.58638401762508},{"x":389.413392812371,"y":193.14597409157457},{"x":387.011285231262,"y":191.77508324639143},{"x":384.5701927917472,"y":190.47487932301158},{"x":382.0921950231264,"y":189.24646994526373},{"x":379.5794028937844,"y":188.09090157630175},{"x":377.03395701288963,"y":187.0091586271385},{"x":374.4580258068418,"y":186.00216261804138},{"x":371.85380367202276,"y":185.07077139350315},{"x":369.22350910542355,"y":184.21577839145738},{"x":366.5693828147411,"y":183.4379119673608},{"x":363.8936858095534,"y":182.73783477371848},{"x":361.1986974752001,"y":182.11614319558032},{"x":358.4867136310089,"y":181.57336684248952},{"x":355.76004457452245,"y":181.10996809731674},{"x":353.02101311339095,"y":180.72634172236275},{"x":350.271952586608,"y":180.4228145230668},{"x":347.5152048767748,"y":180.19964506960582},{"x":344.75311841508625,"y":180.05702347662276},{"x":341.988046180738,"y":179.99507124127044},{"x":339.2223436964601,"y":180.01384113971028},{"x":336.4583670218826,"y":180.11331718215303},{"x":333.69847074644485,"y":180.29341462648011},{"x":330.9450059835564,"y":180.55398005043423},{"x":328.20031836771994,"y":180.8947914823175},{"x":325.46674605632063,"y":181.31555859008563},{"x":322.746617737786,"y":181.81592292867742},{"x":320.04225064781167,"y":182.3954582453685},{"x":317.3559485953438,"y":183.05367084288972},{"x":314.6899999999998,"y":183.7900000000001},{"x":315.78077247564744,"y":185.33102652380168},{"x":316.80964175994575,"y":186.91405379347137},{"x":317.774992606505,"y":188.53659657680183},{"x":318.6753094880432,"y":190.19610760523997},{"x":319.50917897564875,"y":191.88998157290428},{"x":320.27529195775617,"y":193.6155592267167},{"x":320.97244569535144,"y":195.37013154122738},{"x":321.59954571018056,"y":197.15094397157813},{"x":322.1556075029971,"y":198.95520077792807},{"x":322.63975809915104,"y":200.78006941455214},{"x":323.05123741909244,"y":202.6226849767221},{"x":323.3893994716383,"y":204.48015469838876},{"x":323.6537133681297,"y":206.3495624936041},{"x":323.84376415588645,"y":208.22797353455425},{"x":323.9592534696511,"y":210.11243885901544},{"x":324,"y":211.99999999999991},{"x":323.92691977582797,"y":213.26508082024776},{"x":323.8194979640393,"y":214.52770933064818},{"x":323.6778138620041,"y":215.7869534754249},{"x":323.50197205906477,"y":217.0418836970958},{"x":323.2921023593298,"y":218.2915736226602},{"x":323.0483596858541,"y":219.53510074743508},{"x":322.7709239662766,"y":220.77154711603603},{"x":322.46000000000004,"y":221.9999999999999},{"x":285.655,"y":193.55499999999995},{"x":248.84999999999997,"y":165.11},{"x":251.24433132201136,"y":163.15291513896372},{"x":253.68062248678223,"y":161.24831833299083},{"x":256.15772308424494,"y":159.39710892751765},{"x":258.67446343422864,"y":157.6001610585949},{"x":261.2296551387792,"y":155.85832324012318},{"x":263.8220916433172,"y":154.1724179631871},{"x":266.45054880636997,"y":152.54324130767708},{"x":269.1137854776078,"y":150.97156256638272},{"x":271.81054408391157,"y":149.4581238817347},{"x":274.5395512231956,"y":148.00363989536737},{"x":277.2995182657046,"y":146.60879741066663},{"x":280.0891419625011,"y":145.27425506846328},{"x":282.9071050608561,"y":144.00064303602485},{"x":285.75207692625213,"y":142.78856270949214},{"x":288.62271417070525,"y":141.6385864299016},{"x":291.51766128710943,"y":140.55125721292748},{"x":294.435551289303,"y":139.52708849247128},{"x":297.37500635755623,"y":138.56656387821974},{"x":300.33463848917347,"y":137.67013692728557},{"x":303.3130501539048,"y":136.83823093003897},{"x":306.30883495385564,"y":136.07123871023126},{"x":309.3205782875844,"y":135.36952243950438},{"x":312.34685801807296,"y":134.73341346637451},{"x":315.3862451442563,"y":134.16321215977015},{"x":318.43730447579276,"y":133.6591877671989},{"x":321.4985953107569,"y":133.22157828760916},{"x":324.5686721159353,"y":132.8505903590081},{"x":327.64608520940334,"y":132.54639916088743},{"x":330.72938144506077,"y":132.30914833150436},{"x":333.8171048988038,"y":132.13894990005574},{"x":336.9077975560082,"y":132.03588423377846},{"x":339.99999999999994,"y":132},{"x":343.5344971396533,"y":132.04144216412328},{"x":347.0669104856565,"y":132.16967412645533},{"x":350.59510923065704,"y":132.38461853545732},{"x":354.1169651096163,"y":132.68614573327716},{"x":357.6303536836121,"y":133.07407383396125},{"x":361.13315562133414,"y":133.54816883317085},{"x":364.6232579774977,"y":134.10814474933719},{"x":368.0985554674057,"y":134.75366379617023},{"x":371.5569517368894,"y":135.48433658641636},{"x":374.99636062686244,"y":136.29972236674323},{"x":378.4147074317247,"y":137.19932928360888},{"x":381.8099301508576,"y":138.18261467995566},{"x":385.17998073245496,"y":139.2489854225495},{"x":388.52282630894047,"y":140.39779825976717},{"x":391.83645042322524,"y":141.62836020961578},{"x":395.1188542450666,"y":142.93992897775055},{"x":398.36805777679365,"y":144.33171340523825},{"x":401.58210104767346,"y":145.80287394579688},{"x":404.7590452961961,"y":147.35252317222321},{"x":407.89697413956605,"y":148.9797263117028},{"x":410.99399472969435,"y":150.68350180967954},{"x":414.0482388949948,"y":152.4628219219451},{"x":417.05786426729424,"y":154.3166133345902},{"x":420.0210553931777,"y":156.24375781144457},{"x":422.93602482909915,"y":158.2430928686145},{"x":425.80101421959506,"y":160.31341247571163},{"x":428.61429535795236,"y":162.4534677833492},{"x":431.37417122868993,"y":164.6619678764679},{"x":434.07897703122495,"y":166.93758055303613},{"x":436.72708118410685,"y":169.27893312765502},{"x":439.31688630921303,"y":171.68461325958413},{"x":441.8468301953124,"y":174.15316980468762},{"x":444.3153867404159,"y":176.68311369078702},{"x":446.72106687234503,"y":179.27291881589318},{"x":449.06241944696393,"y":181.9210229687751},{"x":451.3380321235321,"y":184.62582877131007},{"x":453.5465322166508,"y":187.38570464204764},{"x":455.6865875242884,"y":190.198985780405},{"x":457.7569071313855,"y":193.0639751709009},{"x":459.75624218855546,"y":195.97894460682232},{"x":461.68338666540984,"y":198.94213573270582},{"x":463.5371780780549,"y":201.95176110500518},{"x":465.3164981903205,"y":205.00600527030565},{"x":467.02027368829727,"y":208.103025860434},{"x":468.6474768277768,"y":211.24095470380388},{"x":470.1971260542032,"y":214.41789895232654},{"x":471.66828659476175,"y":217.63194222320638},{"x":473.0600710222495,"y":220.88114575493344},{"x":474.3716397903842,"y":224.16354957677476},{"x":475.6022017402329,"y":227.47717369105953},{"x":476.7510145774505,"y":230.82001926754506},{"x":477.81738532004437,"y":234.19006984914242},{"x":478.80067071639115,"y":237.5852925682753},{"x":479.7002776332568,"y":241.0036393731376},{"x":480.51566341358364,"y":244.44304826311063},{"x":481.2463362038298,"y":247.90144453259433},{"x":481.89185525066284,"y":251.3767420225023},{"x":482.45183116682915,"y":254.86684437866586},{"x":482.9259261660388,"y":258.3696463163879},{"x":483.31385426672284,"y":261.8830348903838},{"x":483.6153814645427,"y":265.40489076934296},{"x":483.83032587354467,"y":268.9330895143436},{"x":483.9585578358767,"y":272.46550286034676},{"x":484,"y":276.00000000000006},{"x":483.9845620727539,"y":278.0234945678711},{"x":483.93848876953126,"y":280.0383081054688},{"x":483.8621408081055,"y":282.0443728637695},{"x":483.75587890625,"y":284.04162109375005},{"x":483.6200637817383,"y":286.02998504638674},{"x":483.45505615234373,"y":288.0093969726563},{"x":483.26121673583987,"y":289.9797891235352},{"x":483.03890625,"y":291.94109375000005},{"x":482.7884854125976,"y":293.8932431030274},{"x":482.51031494140625,"y":295.8361694335938},{"x":481.87216796875,"y":299.69408203125005},{"x":481.1273510742187,"y":303.5142895507813},{"x":480.27875,"y":307.29625000000004},{"x":479.3292504882813,"y":311.0394213867188},{"x":478.28173828125,"y":314.74326171875003},{"x":477.13909912109375,"y":318.40722900390625},{"x":475.90421875,"y":322.0307812500001},{"x":474.5799829101562,"y":325.6133764648438},{"x":473.16927734374997,"y":329.15447265625005},{"x":471.67498779296875,"y":332.6535278320313},{"x":470.1,"y":336.11},{"x":470.09999999999997,"y":336.105}],[]]}'))}}St.register("TestToCanvas",PI);const CI=new WeakMap;St.register("TestRenderProgram",class{static evaluate(e,t,i,n,r,s,a,o,l,h,u,c,d){const p=e.device;if(!CI.has(e)){const t=BM.fromSource(p,"test_render_program",co,[MM.UNIFORM_BUFFER,MM.READ_ONLY_STORAGE_BUFFER,MM.READ_ONLY_STORAGE_BUFFER,MM.STORAGE_BUFFER],Po(Po({stackSize:10,instructionStackSize:8},rh.CODE_NAME_CONSTANTS,Vl,Ml,Il),ed));CI.set(e,t)}const m=CI.get(e),g=[];t.writeInstructions(g);const f=new qM;rh.instructionsToBinary(f,g),console.groupCollapsed("Instructions"),console.log(g.map(e=>e.toString()).join("\n")),console.log(f.getDebug32String()),console.groupEnd();const y=new qM;y.pushU32(0),y.pushU32(i),y.pushU32(n),y.pushU32(s?1:0),y.pushU32(a?1:0),y.pushF32(o),y.pushF32(l.minX),y.pushF32(l.minY),y.pushF32(l.maxX),y.pushF32(l.maxY),y.pushI32(h),y.pushI32(u),y.pushI32(c),y.pushI32(d);const E=p.createBuffer({label:"config buffer",size:y.byteLength,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST});p.queue.writeBuffer(E,0,y.arrayBuffer);const v=e.createBuffer(f.byteLength);p.queue.writeBuffer(v,0,f.arrayBuffer);const A=e.createBuffer(4*r.length);p.queue.writeBuffer(A,0,new Float32Array(r.flatMap(e=>[e.startPoint.x,e.startPoint.y,e.endPoint.x,e.endPoint.y])).buffer);const b=e.createBuffer(16);return new Promise((t,i)=>{const n=p.createCommandEncoder({label:"the encoder"});m.dispatch(n,[E,v,A,b]);const r=new ak(e);r.withBuffer(n,b,async e=>{const i=new Float32Array(e);t(new yl(i[0],i[1],i[2],i[3]))});const s=n.finish();p.queue.submit([s]),p.queue.onSubmittedWorkDone().then(async()=>{await r.complete()}).catch(e=>{i(e)}),E.destroy(),v.destroy(),A.destroy(),b.destroy()})}});const VI=new Jd;St.register("PerformanceTesting",class{static async loopExpensiveMultiple(){const e=await PM.getDevice();if(!e)return;const t=new PM(e),i=BM.fromSource(e,"copy_storage_operation",Eo,[MM.STORAGE_BUFFER,MM.STORAGE_BUFFER],{workgroupSize:256}),n=BM.fromSource(e,"expensive_operation",mo,[MM.READ_ONLY_STORAGE_BUFFER,MM.STORAGE_BUFFER],{workgroupSize:256}),r=BM.fromSource(e,"fake_combine_to_texture",fo,[MM.STORAGE_BUFFER,MM.STORAGE_BUFFER,MM.STORAGE_BUFFER,MM.STORAGE_BUFFER,"bgra8unorm"===t.preferredStorageFormat?MM.TEXTURE_OUTPUT_BGRA8UNORM:MM.TEXTURE_OUTPUT_RGBA8UNORM],{workgroupSize:1,preferredStorageFormat:t.preferredStorageFormat}),s=new DM(e,t.preferredCanvasFormat),a=document.createElement("canvas");a.width=16,a.height=16,document.body.appendChild(a);const o=t.getCanvasContext(a,"srgb");await async function l(){window.requestAnimationFrame(l,a);const h=new Float32Array(_.range(0,65536).map(()=>VI.nextDouble()-.5)),u=h.byteLength,c=o.getCurrentTexture(),d=c.format;if("bgra8unorm"!==d&&"rgba8unorm"!==d)throw new Error("unsupported format");const p=d===t.preferredStorageFormat;let m,g=null;const f=c.createView();p?m=f:(g=e.createTexture({label:"fineOutputTexture",size:{width:c.width,height:c.height,depthOrArrayLayers:1},format:t.preferredStorageFormat,usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.STORAGE_BINDING}),m=g.createView({label:"fineOutputTextureView",format:t.preferredStorageFormat,dimension:"2d"}));const y=[],E=t.createBuffer(u);e.queue.writeBuffer(E,0,h.buffer),y.push(E);const v=t.createBuffer(u);y.push(v);const A=t.createBuffer(u),b=t.createBuffer(u),S=t.createBuffer(u),x=t.createBuffer(u);y.push(A),y.push(b),y.push(S),y.push(x);const w=e.createCommandEncoder({label:"the encoder"});i.dispatch(w,[E,v]),n.dispatch(w,[v,A],256),n.dispatch(w,[v,b],256),n.dispatch(w,[v,S],256),n.dispatch(w,[v,x],256),r.dispatch(w,[A,b,S,x,m],1),p||s.dispatch(w,f,m);const T=w.finish();e.queue.submit([T]),y.forEach(e=>e.destroy())}()}});const RI=new Jd;St.register("BrokenTesting",class{static async test(){const e=await PM.getDevice();if(!e)return;const t=_.range(0,1300).map(()=>RI.nextIntBetween(0,2e3)).sort((e,t)=>e-t),i=_.range(0,1e3).map(()=>RI.nextIntBetween(0,2e3)).sort((e,t)=>e-t),n=t.length+i.length,r=Math.ceil(n/512),s=new PM(e),a=BM.fromSource(e,"i32_merge_simple",Vs,[MM.READ_ONLY_STORAGE_BUFFER,MM.READ_ONLY_STORAGE_BUFFER,MM.STORAGE_BUFFER],{workgroupSize:64,grainSize:8,sizeA:t.length,sizeB:i.length}),o=async()=>{window.requestAnimationFrame(o);const l=s.createBuffer(4*t.length);e.queue.writeBuffer(l,0,new Int32Array(t).buffer);const h=s.createBuffer(4*i.length);e.queue.writeBuffer(h,0,new Int32Array(i).buffer);const u=s.createBuffer(4*n),c=s.createMapReadableBuffer(4*n),d=e.createCommandEncoder({label:"the encoder"});a.dispatch(d,[l,h,u],r),d.copyBufferToBuffer(u,0,c,0,c.size);const p=d.finish();e.queue.submit([p]);const m=await PM.getMappedIntArray(c);l.destroy(),h.destroy(),u.destroy(),c.destroy();[...m].slice(0,n)};await o()}});class NI extends RM{static async create(e,t,i){const n=await BM.fromSourceAsync(e.device,t,rs,[MM.READ_ONLY_STORAGE_BUFFER,MM.STORAGE_BUFFER],{workgroupSize:i.workgroupSize,inputSize:i.inputSize,identity:"0f",combine:(e,t)=>`${e} + ${t}`});return new NI(async(e,t)=>{const i=e.createF32Buffer(t),r=e.createBuffer(4);return e.dispatch(n,[i,r]),(await e.f32Numbers(r))[0]})}}St.register("ExampleSimpleF32Reduce",NI);class MI{constructor(e,t){this.x=e,this.y=t}getNumbers(){return[this.x,this.y]}equals(e){return this.x===e.x&&this.y===e.y}toString(){return`Bic( ${this.x}, ${this.y} )`}static combine(e,t){const i=Math.min(e.y,t.x);return new MI(e.x+t.x-i,e.y+t.y-i)}static combineMultiple(){let e=MI.IDENTITY;for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return i.forEach(t=>{e=MI.combine(e,t)}),e}}_defineProperty(MI,"IDENTITY",new MI(0,0)),_defineProperty(MI,"BYTES",8),St.register("Bic",MI);const kI=new Jd;class LI{constructor(e,t){_defineProperty(this,"results",[]),this.name=e,this.callback=t}async addResult(){this.results.push(await this.callback())}async discardResult(){await this.callback()}getAverage(){return lk.averageTimestamps(this.results)}}class II{static async test(){const e=new Float32Array(_.range(0,16572481).map(()=>kI.nextDouble()));await II.loopingTest([t=>II.getReduceSimpleProfiler(t,256,e),t=>II.getReduceRakedBlockedProfiler(t,256,e,8),t=>II.getReduceRakedStripedBlockedProfiler(t,256,e,8),t=>II.getReduceRakedStripedBlockedConvergentProfiler(t,256,e,8)])}static async loopingTest(e){const t=await PM.getDevice({maxLimits:!0,timestampQuery:!0});if(!t)return;const i=new PM(t),n=[];for(const r of e)n.push(await r(i));console.log("warmup");for(let r=0;r<3;r++)for(const e of n)await e.discardResult();console.log("profiling");for(let r=1;r<=1e3;r++){const e=kI.shuffle(_.range(0,n.length));for(const t of e)await n[t].addResult();if(r%10==0){console.log(r);for(const e of n)console.log(e.name),console.log(e.getAverage().toString())}}}static async getReduceSimpleProfiler(e,t,i){const n=e.device,r=new ak(e),s=i.length,a={workgroupSize:t,identity:"0f",combine:(e,t)=>`${e} + ${t}`},o=BM.fromSource(n,"f32_reduce_simple 0",rs,[MM.READ_ONLY_STORAGE_BUFFER,MM.STORAGE_BUFFER],No({inputSize:s},a)),l=BM.fromSource(n,"f32_reduce_simple 1",rs,[MM.READ_ONLY_STORAGE_BUFFER,MM.STORAGE_BUFFER],No({inputSize:Math.ceil(s/t)},a)),h=BM.fromSource(n,"f32_reduce_simple 2",rs,[MM.READ_ONLY_STORAGE_BUFFER,MM.STORAGE_BUFFER],No({inputSize:Math.ceil(s/(t*t))},a));return new LI("f32_reduce_simple",async()=>{const a=new ok(e,100),u={timestampLogger:a},c=e.createBuffer(4*s);n.queue.writeBuffer(c,0,i.buffer);const d=e.createBuffer(4*Math.ceil(s/t)),p=e.createBuffer(4*Math.ceil(s/(t*t))),m=e.createBuffer(4),g=n.createCommandEncoder({label:"the encoder"});o.dispatch(g,[c,d],Math.ceil(s/t),1,1,u),l.dispatch(g,[d,p],Math.ceil(s/(t*t)),1,1,u),h.dispatch(g,[p,m],1,1,1,u);const f=r.arrayBufferPromise(g,m),y=a.resolve(g,r),E=g.finish();n.queue.submit([E]),await n.queue.onSubmittedWorkDone(),await r.complete();const v=await y,A=new Float32Array(await f);if(!v)throw new Error("missing timestamps");c.destroy(),d.destroy(),p.destroy(),m.destroy(),a.dispose();const b=_.sum([...i]),S=A[0];if(Math.abs(b-S)>1)throw new Error("invalid result");return v})}static async getReduceRakedBlockedProfiler(e,t,i,n){const r=e.device,s=new ak(e),a=i.length,o={workgroupSize:t,grainSize:n,identity:"0f",combine:(e,t)=>`${e} + ${t}`},l=BM.fromSource(r,"f32_reduce_raked_blocked 0",as,[MM.READ_ONLY_STORAGE_BUFFER,MM.STORAGE_BUFFER],No({inputSize:a},o)),h=BM.fromSource(r,"f32_reduce_raked_blocked 1",as,[MM.READ_ONLY_STORAGE_BUFFER,MM.STORAGE_BUFFER],No({inputSize:Math.ceil(a/(t*n))},o)),u=BM.fromSource(r,"f32_reduce_raked_blocked 2",as,[MM.READ_ONLY_STORAGE_BUFFER,MM.STORAGE_BUFFER],No({inputSize:Math.ceil(a/(t*t*n*n))},o));return new LI("f32_reduce_raked_blocked "+n,async()=>{const o=new ok(e,100),c={timestampLogger:o},d=e.createBuffer(4*a);r.queue.writeBuffer(d,0,i.buffer);const p=e.createBuffer(4*Math.ceil(a/(t*n))),m=e.createBuffer(4*Math.ceil(a/(t*t*n*n))),g=e.createBuffer(4),f=r.createCommandEncoder({label:"the encoder"});l.dispatch(f,[d,p],Math.ceil(a/(t*n)),1,1,c),h.dispatch(f,[p,m],Math.ceil(a/(t*t*n*n)),1,1,c),u.dispatch(f,[m,g],1,1,1,c);const y=s.arrayBufferPromise(f,g),E=o.resolve(f,s),v=f.finish();r.queue.submit([v]),await r.queue.onSubmittedWorkDone(),await s.complete();const A=await E,b=new Float32Array(await y);if(!A)throw new Error("missing timestamps");d.destroy(),p.destroy(),m.destroy(),g.destroy(),o.dispose();const S=_.sum([...i]),x=b[0];if(Math.abs(S-x)>1)throw new Error("invalid result");return A})}static async getReduceRakedStripedBlockedProfiler(e,t,i,n){const r=e.device,s=new ak(e),a=i.length,o={workgroupSize:t,grainSize:n,identity:"0f",combine:(e,t)=>`${e} + ${t}`},l=BM.fromSource(r,"f32_reduce_raked_striped_blocked 0",hs,[MM.READ_ONLY_STORAGE_BUFFER,MM.STORAGE_BUFFER],No({inputSize:a},o)),h=BM.fromSource(r,"f32_reduce_raked_striped_blocked 1",hs,[MM.READ_ONLY_STORAGE_BUFFER,MM.STORAGE_BUFFER],No({inputSize:Math.ceil(a/(t*n))},o)),u=BM.fromSource(r,"f32_reduce_raked_striped_blocked 2",hs,[MM.READ_ONLY_STORAGE_BUFFER,MM.STORAGE_BUFFER],No({inputSize:Math.ceil(a/(t*t*n*n))},o));return new LI("f32_reduce_raked_striped_blocked "+n,async()=>{const o=new ok(e,100),c={timestampLogger:o},d=e.createBuffer(4*a);r.queue.writeBuffer(d,0,i.buffer);const p=e.createBuffer(4*Math.ceil(a/(t*n))),m=e.createBuffer(4*Math.ceil(a/(t*t*n*n))),g=e.createBuffer(4),f=r.createCommandEncoder({label:"the encoder"});l.dispatch(f,[d,p],Math.ceil(a/(t*n)),1,1,c),h.dispatch(f,[p,m],Math.ceil(a/(t*t*n*n)),1,1,c),u.dispatch(f,[m,g],1,1,1,c);const y=s.arrayBufferPromise(f,g),E=o.resolve(f,s),v=f.finish();r.queue.submit([v]),await r.queue.onSubmittedWorkDone(),await s.complete();const A=await E,b=new Float32Array(await y);if(!A)throw new Error("missing timestamps");d.destroy(),p.destroy(),m.destroy(),g.destroy(),o.dispose();const S=_.sum([...i]),x=b[0];if(Math.abs(S-x)>1)throw new Error("invalid result");return A})}static async getReduceRakedStripedBlockedConvergentProfiler(e,t,i,n){const r=e.device,s=i.length,a={workgroupSize:t,grainSize:n,identity:"0f",combine:(e,t)=>`${e} + ${t}`},o=BM.fromSource(r,"f32_reduce_raked_striped_blocked_convergent 0",cs,[MM.READ_ONLY_STORAGE_BUFFER,MM.STORAGE_BUFFER],No({inputSize:s},a)),l=BM.fromSource(r,"f32_reduce_raked_striped_blocked_convergent 1",cs,[MM.READ_ONLY_STORAGE_BUFFER,MM.STORAGE_BUFFER],No({inputSize:Math.ceil(s/(t*n))},a)),h=BM.fromSource(r,"f32_reduce_raked_striped_blocked_convergent 2",cs,[MM.READ_ONLY_STORAGE_BUFFER,MM.STORAGE_BUFFER],No({inputSize:Math.ceil(s/(t*t*n*n))},a));return new LI("f32_reduce_raked_striped_blocked_convergent "+n,async()=>{const a=new NM(e),u=await a.executeSingle(async(e,a)=>{const u=a.createBuffer(4*s);r.queue.writeBuffer(u,0,i.buffer);const c=a.createBuffer(4*Math.ceil(s/(t*n))),d=a.createBuffer(4*Math.ceil(s/(t*t*n*n))),p=a.createBuffer(4);return a.dispatch(o,[u,c],Math.ceil(s/(t*n)),1,1),a.dispatch(l,[c,d],Math.ceil(s/(t*t*n*n)),1,1),a.dispatch(h,[d,p],1,1,1),a.f32Numbers(p)}),c=_.sum([...i]),d=u[0];if(Math.abs(c-d)>1)throw new Error("invalid result");const p=await a.timestampResultPromise;if(!p)throw new Error("missing timestamps");return p})}}St.register("GPUProfiling",II);const BI=new WeakMap,DI={colorSpace:"srgb",numStages:16,bufferExponent:20};class OI{static get(e){let t=BI.get(e);return t||(t=new OI(e),BI.set(e,t)),t}constructor(e){this.deviceContext=e,this.device=e.device,this.logger=new ak(e),this.zeroBuffer=this.device.createBuffer({size:16,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),this.device.queue.writeBuffer(this.zeroBuffer,0,new Uint32Array([0,0,0,0]).buffer),this.oneBuffer=this.device.createBuffer({size:16,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),this.device.queue.writeBuffer(this.oneBuffer,0,new Uint32Array([1,1,1,1]).buffer),this.twoBuffer=this.device.createBuffer({size:16,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),this.device.queue.writeBuffer(this.twoBuffer,0,new Uint32Array([2,2,2,2]).buffer),this.threeBuffer=this.device.createBuffer({size:16,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),this.device.queue.writeBuffer(this.threeBuffer,0,new Uint32Array([3,3,3,3]).buffer);const t={workgroupSize:128,boundsReduce:!1,debugReduceBuffers:!1,debugAccumulation:!1,integerScale:5e6,preferredStorageFormat:e.preferredStorageFormat,stackSize:10,instructionStackSize:8,...rh.CODE_NAME_CONSTANTS,...Vl,...Ml,...Il,...ed};this.initialChunksShader=BM.fromSource(this.device,"initial_chunks",pr,[MM.UNIFORM_BUFFER,MM.READ_ONLY_STORAGE_BUFFER,MM.STORAGE_BUFFER],t),this.initialClipShader=BM.fromSource(this.device,"initial_clip",gr,[MM.UNIFORM_BUFFER,MM.READ_ONLY_STORAGE_BUFFER,MM.READ_ONLY_STORAGE_BUFFER,MM.STORAGE_BUFFER,MM.STORAGE_BUFFER,MM.STORAGE_BUFFER],t),this.chunkReduceShader=BM.fromSource(this.device,"chunk_reduce",yr,[MM.UNIFORM_BUFFER,MM.UNIFORM_BUFFER,MM.READ_ONLY_STORAGE_BUFFER,MM.STORAGE_BUFFER,MM.STORAGE_BUFFER],t),this.initialSplitReduceShader=BM.fromSource(this.device,"initial_split_reduce",vr,[MM.UNIFORM_BUFFER,MM.READ_ONLY_STORAGE_BUFFER,MM.STORAGE_BUFFER],t),this.initialEdgeReduceShader=BM.fromSource(this.device,"initial_edge_reduce",br,[MM.UNIFORM_BUFFER,MM.READ_ONLY_STORAGE_BUFFER,MM.READ_ONLY_STORAGE_BUFFER,MM.STORAGE_BUFFER],t),this.splitReduceShader=BM.fromSource(this.device,"split_reduce",_r,[MM.UNIFORM_BUFFER,MM.UNIFORM_BUFFER,MM.STORAGE_BUFFER,MM.STORAGE_BUFFER],t),this.splitScanShader=BM.fromSource(this.device,"split_scan",wr,[MM.UNIFORM_BUFFER,MM.READ_ONLY_STORAGE_BUFFER,MM.READ_ONLY_STORAGE_BUFFER,MM.READ_ONLY_STORAGE_BUFFER,MM.READ_ONLY_STORAGE_BUFFER,MM.STORAGE_BUFFER,MM.STORAGE_BUFFER,MM.STORAGE_BUFFER],t),this.edgeScanShader=BM.fromSource(this.device,"edge_scan",Pr,[MM.UNIFORM_BUFFER,MM.READ_ONLY_STORAGE_BUFFER,MM.READ_ONLY_STORAGE_BUFFER,MM.READ_ONLY_STORAGE_BUFFER,MM.READ_ONLY_STORAGE_BUFFER,MM.READ_ONLY_STORAGE_BUFFER,MM.STORAGE_BUFFER,MM.STORAGE_BUFFER,MM.STORAGE_BUFFER],t),this.chunkIndexPatchShader=BM.fromSource(this.device,"chunk_index_patch",Vr,[MM.UNIFORM_BUFFER,MM.READ_ONLY_STORAGE_BUFFER,MM.READ_ONLY_STORAGE_BUFFER,MM.READ_ONLY_STORAGE_BUFFER,MM.STORAGE_BUFFER,MM.STORAGE_BUFFER],t),this.uniformUpdateShader=BM.fromSource(this.device,"uniform_update",Nr,[MM.READ_ONLY_STORAGE_BUFFER,MM.READ_ONLY_STORAGE_BUFFER,MM.STORAGE_BUFFER],t),this.edgeIndexPatchShader=BM.fromSource(this.device,"edge_index_patch",kr,[MM.UNIFORM_BUFFER,MM.READ_ONLY_STORAGE_BUFFER,MM.READ_ONLY_STORAGE_BUFFER,MM.STORAGE_BUFFER],t),this.accumulateShader=BM.fromSource(this.device,"accumulate",Ir,[MM.UNIFORM_BUFFER,MM.READ_ONLY_STORAGE_BUFFER,MM.READ_ONLY_STORAGE_BUFFER,MM.READ_ONLY_STORAGE_BUFFER,MM.STORAGE_BUFFER],t),this.toTextureShader=BM.fromSource(this.device,"to_texture",Dr,[MM.UNIFORM_BUFFER,MM.READ_ONLY_STORAGE_BUFFER,"bgra8unorm"===e.preferredStorageFormat?MM.TEXTURE_OUTPUT_BGRA8UNORM:MM.TEXTURE_OUTPUT_RGBA8UNORM],t),this.blitShader=new DM(this.device,e.preferredCanvasFormat)}static async test(){const e=await PM.getDevice(),t=new PM(e),i=new OI(t),n=document.createElement("canvas");n.width=256,n.height=256,n.style.width=256/window.devicePixelRatio+"px",n.style.height=256/window.devicePixelRatio+"px",document.body.appendChild(n);const r=t.getCanvasContext(n,"srgb"),s=PI.getTestPath().toEdgedFace().withReversedEdges(),a=Mh.scaling(.35),o=s.getTransformed(a),l=new RN(o,new hc(new al(1/256,0),0,lc.PixelCenter,new Fh(new yl(1,0,0,1)).colorConverted(zh.sRGB,zh.premultipliedOklab),new Fh(new yl(.5,0,1,1)).colorConverted(zh.sRGB,zh.premultipliedOklab)).colorConverted(zh.premultipliedOklab,zh.premultipliedLinearSRGB),o.getBounds()),h=Mh.translation(16,165).timesMatrix(Mh.scaling(.15)),u=s.getTransformed(h),c=new RN(u,new Fh(new yl(1,1,1,1)).colorConverted(zh.sRGB,zh.premultipliedLinearSRGB),u.getBounds()),d=SR.fromBoundsValues(0,0,128,256),p=YR.difference(new mh("nonzero",d.polygons),new mh("nonzero",o.toPolygonalFace().polygons)),m=YR.difference(new mh("nonzero",p),new mh("nonzero",u.toPolygonalFace().polygons)),g=new SR(m),f=new RN(g,new Fh(new yl(0,0,0,1)).colorConverted(zh.sRGB,zh.premultipliedLinearSRGB),g.getBounds()),y=SR.fromBoundsValues(128,0,256,256),E=YR.difference(new mh("nonzero",y.polygons),new mh("nonzero",o.toPolygonalFace().polygons)),v=new SR(E),A=new RN(v,new Fh(new yl(1,1,1,1)).colorConverted(zh.sRGB,zh.premultipliedLinearSRGB),v.getBounds());let b=0;await async function e(){b++>0||(window.requestAnimationFrame(e,n),await i.rasterize([l,c,f,A],r.getCurrentTexture(),{colorSpace:"srgb"}))}()}static async testWithRasterizer(){const e=await PM.getDevice(),t=new PM(e),i=document.createElement("canvas");i.width=512,i.height=512,i.style.width=512/window.devicePixelRatio+"px",i.style.height=512/window.devicePixelRatio+"px",document.body.appendChild(i);const n=t.getCanvasContext(i,"srgb"),r=PI.getTestPath(),s=r.getTransformed(Mh.scaling(.37)),a=r.getTransformed(Mh.translation(16,165).timesMatrix(Mh.scaling(.15))),o=zh.premultipliedLinearSRGB,l=new wu([new gh(mh.fromBounds(new Zl(0,0,128,256)),new Fh(new yl(0,0,0,1)).colorConverted(zh.sRGB,o),new Fh(new yl(1,1,1,1)).colorConverted(zh.sRGB,o)),gh.fromInside(new mh("nonzero",a.toPolygonalFace().polygons),new Fh(new yl(1,1,1,1)).colorConverted(zh.sRGB,o)),gh.fromInside(new mh("nonzero",s.toPolygonalFace().polygons),new hc(new al(1/256,0),0,lc.Accurate,new Fh(new yl(1,0,0,1)).colorConverted(zh.sRGB,zh.premultipliedOklab),new Fh(new yl(.5,0,1,1)).colorConverted(zh.sRGB,zh.premultipliedOklab)).colorConverted(zh.premultipliedOklab,o))]).transformed(Mh.scaling(2));let h=0;await async function e(){h++>0||(window.requestAnimationFrame(e,i),await FN.hybridRasterize(l,t,n,new Zl(0,0,512,512),"srgb",{rasterClipperOptions:{numStages:16,bufferExponent:14}}))}()}rasterize(e,t,i){const n=Ro()({},DI,i),r=t.width,s=t.height,a=this.device,o=this.deviceContext,l=new qM,h=new qM,u=new qM;let c=0,d=0;e.forEach(e=>{const t=e.renderProgram,i=d,n=c,r=e.bounds.roundedOut(),s=e.face.toEdgedClippedFaceWithoutCheck(r.minX,r.minY,r.maxX,r.maxY),a=s.edges;new eM(h.byteLength/4,t.needsFace||t.needsCentroid,t instanceof Fh,i,a.length,s.minX,s.minY,s.maxX,s.maxY,s.minXCount,s.minYCount,s.maxXCount,s.maxYCount).writeEncoding(l),c++,a.forEach((e,t)=>{new sM(n,0===t,t===a.length-1,e.startPoint,e.endPoint).writeEncoding(u),d++});const o=[];t.writeInstructions(o),rh.instructionsToBinary(h,o)});const p=2*c,m=2*d,g=[Math.ceil(c/128),1,1,Math.ceil(d/128),1,1,Math.ceil(d/16384),1,1,Math.ceil(d/2097152),1,1,Math.ceil(p/128),1,1,Math.ceil(m/128),1,1,Math.ceil(p/16384),1,1,Math.ceil(p/2097152),1,1,Math.ceil(m/16384),1,1,Math.ceil(m/2097152),1,1,0,0,0,c,d,p,m,0,0,0,0,r,s,0,0,{srgb:0,"display-p3":1}[n.colorSpace]],f=a.createBuffer({label:"config buffer",size:4*g.length,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST|GPUBufferUsage.STORAGE|GPUBufferUsage.INDIRECT|GPUBufferUsage.COPY_SRC});a.queue.writeBuffer(f,0,new Uint32Array(g).buffer);const y=o.createBuffer(h.byteLength);a.queue.writeBuffer(y,0,h.arrayBuffer);const E=o.createBuffer(eM.ENCODING_BYTE_LENGTH*c);a.queue.writeBuffer(E,0,l.arrayBuffer);const v=o.createBuffer(sM.ENCODING_BYTE_LENGTH*d);a.queue.writeBuffer(v,0,u.arrayBuffer);const A=o.createBuffer(16*r*s),b=t.format;if("bgra8unorm"!==b&&"rgba8unorm"!==b)throw new Error("unsupported format");const S=b===o.preferredStorageFormat;let _,x=null;const w=t.createView();S?_=w:(x=a.createTexture({label:"fineOutputTexture",size:{width:t.width,height:t.height,depthOrArrayLayers:1},format:o.preferredStorageFormat,usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.STORAGE_BINDING}),_=x.createView({label:"fineOutputTextureView",format:o.preferredStorageFormat,dimension:"2d"}));const T=a.createCommandEncoder({label:"the encoder"}),P=this.runAccumulate(T,f,y,E,v,A,n);this.toTextureShader.dispatch(T,[f,A,_],r/16,s/16),S||this.blitShader.dispatch(T,w,_);const C=T.finish();a.queue.submit([C]);const V=a.queue.onSubmittedWorkDone().then(async()=>{await this.logger.complete()}).catch(e=>{throw e});return f.destroy(),E.destroy(),v.destroy(),A.destroy(),x&&x.destroy(),P(),V}runAccumulate(e,t,i,n,r,s,a){{const o=new qI(this.deviceContext,a.bufferExponent);for(let l=0;l<a.numStages;l++)this.runStage(e,t,i,n,r,s,o),n=o.reducibleChunksBuffer,r=o.reducibleEdgesBuffer;return()=>o.destroy()}}runStage(e,t,i,n,r,s,a){this.initialChunksShader.dispatchIndirect(e,[t,n,a.clippedChunksBuffer],t,0),this.initialClipShader.dispatchIndirect(e,[t,n,r,a.clippedChunksBuffer,a.edgeClipsBuffer,a.chunkReduces0Buffer,...a.debugChunkReduces0Buffer?[a.debugChunkReduces0Buffer]:[]],t,12),a.debugChunkReduces0Buffer,this.chunkReduceShader.dispatchIndirect(e,[t,this.zeroBuffer,a.chunkReduces0Buffer,a.clippedChunksBuffer,a.chunkReduces1Buffer],t,24),this.chunkReduceShader.dispatchIndirect(e,[t,this.oneBuffer,a.chunkReduces1Buffer,a.clippedChunksBuffer,a.chunkReduces2Buffer],t,36),this.initialSplitReduceShader.dispatchIndirect(e,[t,a.clippedChunksBuffer,a.splitReduces0Buffer,...a.debugInitialSplitReduceBuffer?[a.debugInitialSplitReduceBuffer]:[]],t,48),this.initialEdgeReduceShader.dispatchIndirect(e,[t,a.clippedChunksBuffer,a.edgeClipsBuffer,a.edgeReduces0Buffer,...a.debugInitialEdgeReduceBuffer?[a.debugInitialEdgeReduceBuffer]:[]],t,60),a.debugInitialSplitReduceBuffer,this.splitReduceShader.dispatchIndirect(e,[t,this.zeroBuffer,a.splitReduces0Buffer,a.splitReduces1Buffer],t,72),this.splitReduceShader.dispatchIndirect(e,[t,this.oneBuffer,a.splitReduces1Buffer,a.splitReduces2Buffer],t,84);a.debugInitialEdgeReduceBuffer,this.splitReduceShader.dispatchIndirect(e,[t,this.twoBuffer,a.edgeReduces0Buffer,a.edgeReduces1Buffer],t,96),this.splitReduceShader.dispatchIndirect(e,[t,this.threeBuffer,a.edgeReduces1Buffer,a.edgeReduces2Buffer],t,108);this.splitScanShader.dispatchIndirect(e,[t,a.clippedChunksBuffer,a.splitReduces0Buffer,a.splitReduces1Buffer,a.splitReduces2Buffer,a.reducibleChunksBuffer,a.completeChunksBuffer,a.chunkIndexMapBuffer,...a.debugSplitScanReducesBuffer?[a.debugSplitScanReducesBuffer]:[]],t,48),a.debugSplitScanReducesBuffer,this.edgeScanShader.dispatchIndirect(e,[t,a.clippedChunksBuffer,a.edgeClipsBuffer,a.edgeReduces0Buffer,a.edgeReduces1Buffer,a.edgeReduces2Buffer,a.reducibleEdgesBuffer,a.completeEdgesBuffer,a.chunkIndicesBuffer],t,60),this.chunkIndexPatchShader.dispatchIndirect(e,[t,a.chunkIndexMapBuffer,a.chunkIndicesBuffer,a.clippedChunksBuffer,a.reducibleChunksBuffer,a.completeChunksBuffer],t,48),this.uniformUpdateShader.dispatch(e,[a.splitReduces2Buffer,a.edgeReduces2Buffer,t],1,1,1),this.edgeIndexPatchShader.dispatchIndirect(e,[t,a.chunkIndexMapBuffer,a.chunkIndicesBuffer,a.reducibleEdgesBuffer],t,12),this.accumulateShader.dispatchIndirect(e,[t,i,a.completeChunksBuffer,a.completeEdgesBuffer,s,...a.debugAccumulationBuffer?[a.debugAccumulationBuffer]:[]],t,120),a.debugAccumulationBuffer}}St.register("RasterClipper",OI);class qI{constructor(e,t){_defineProperty(this,"debugChunkReduces0Buffer",null),_defineProperty(this,"debugInitialSplitReduceBuffer",null),_defineProperty(this,"debugInitialEdgeReduceBuffer",null),_defineProperty(this,"debugSplitScanReducesBuffer",null),_defineProperty(this,"debugAccumulationBuffer",null);const i=2**t,n=2**t,r=2**t,s=2*2**t,a=2*r;this.clippedChunksBuffer=e.createBuffer(lM.ENCODING_BYTE_LENGTH*s),this.edgeClipsBuffer=e.createBuffer(aM.ENCODING_BYTE_LENGTH*a),this.chunkReduces0Buffer=e.createBuffer(nM.ENCODING_BYTE_LENGTH*Math.ceil(r/128)),this.chunkReduces1Buffer=e.createBuffer(nM.ENCODING_BYTE_LENGTH*Math.ceil(r/16384)),this.chunkReduces2Buffer=e.createBuffer(nM.ENCODING_BYTE_LENGTH*Math.ceil(r/2097152)),this.splitReduces0Buffer=e.createBuffer(hM.ENCODING_BYTE_LENGTH*Math.ceil(s/128)),this.edgeReduces0Buffer=e.createBuffer(hM.ENCODING_BYTE_LENGTH*Math.ceil(a/128)),this.splitReduces1Buffer=e.createBuffer(hM.ENCODING_BYTE_LENGTH*Math.ceil(s/16384)),this.splitReduces2Buffer=e.createBuffer(hM.ENCODING_BYTE_LENGTH*Math.ceil(s/2097152)),this.edgeReduces1Buffer=e.createBuffer(hM.ENCODING_BYTE_LENGTH*Math.ceil(a/16384)),this.edgeReduces2Buffer=e.createBuffer(hM.ENCODING_BYTE_LENGTH*Math.ceil(a/2097152)),this.reducibleChunksBuffer=e.createBuffer(eM.ENCODING_BYTE_LENGTH*s),this.completeChunksBuffer=e.createBuffer(rM.ENCODING_BYTE_LENGTH*i),this.chunkIndexMapBuffer=e.createBuffer(4*s),this.reducibleEdgesBuffer=e.createBuffer(sM.ENCODING_BYTE_LENGTH*a),this.completeEdgesBuffer=e.createBuffer(oM.ENCODING_BYTE_LENGTH*n),this.chunkIndicesBuffer=e.createBuffer(8*s)}destroy(){this.clippedChunksBuffer.destroy(),this.edgeClipsBuffer.destroy(),this.chunkReduces0Buffer.destroy(),this.debugChunkReduces0Buffer&&this.debugChunkReduces0Buffer.destroy(),this.chunkReduces1Buffer.destroy(),this.chunkReduces2Buffer.destroy(),this.splitReduces0Buffer.destroy(),this.debugInitialSplitReduceBuffer&&this.debugInitialSplitReduceBuffer.destroy(),this.edgeReduces0Buffer.destroy(),this.debugInitialEdgeReduceBuffer&&this.debugInitialEdgeReduceBuffer.destroy(),this.splitReduces1Buffer.destroy(),this.splitReduces2Buffer.destroy(),this.edgeReduces1Buffer.destroy(),this.edgeReduces2Buffer.destroy(),this.reducibleChunksBuffer.destroy(),this.completeChunksBuffer.destroy(),this.chunkIndexMapBuffer.destroy(),this.debugSplitScanReducesBuffer&&this.debugSplitScanReducesBuffer.destroy(),this.reducibleEdgesBuffer.destroy(),this.completeEdgesBuffer.destroy(),this.chunkIndicesBuffer.destroy(),this.debugAccumulationBuffer&&this.debugAccumulationBuffer.destroy()}}const YI=(async()=>{try{var e;const t=await(null===(e=navigator.gpu)||void 0===e?void 0:e.requestAdapter());return await(null==t?void 0:t.requestDevice())||null}catch(t){return null}})();St.register("shaderTestDevicePromise",YI);const HI=(e,t)=>{QUnit.test(e,async e=>{const i=e.async(),n=await YI;if(n){const i=await t(n,new PM(n));e.ok(null===i,i||"")}else e.expect(0);i()})};St.register("asyncTestWithDevice",HI);St.register("asyncTestWithDeviceContext",(e,t)=>{HI(e,(e,i)=>t(i))});St.register("compareArrays",(e,t,i,n)=>{for(let r=0;r<i.length;r++){const s=i[r],a=n[r];if(!e.equals(s,a))return console.log("input"),console.log(t),console.log("expected"),console.log(i),console.log("actual"),console.log(n),`expected ${e.toDebugString(s)}, actual ${e.toDebugString(a)} at index ${r}`}return null});class GI extends ty{constructor(e,t,i){Bo("Use EnumerationProperty. EnumerationDeprecated should be exchanged for classes that extend EnumerationValue, see WilderEnumerationPatterns for examples."),super(t,i=Po({valueType:e,phetioValueType:bh(e),validValues:e.VALUES},i)),this.enumeration=e}}ko.register("EnumerationDeprecatedProperty",GI);class FI extends Ub{constructor(e,t){super(new mg(e),t)}}ko.register("MappedProperty",FI);class zI extends Rb{constructor(e,t,i){super(e,t,Vo()({phetioFeatured:!0,phetioValueType:Om,tandemNameSuffix:"StringProperty"},i))}}ko.register("DerivedStringProperty",zI);const UI=e=>""+e;class WI extends zI{constructor(e,t,i){const n=Vo()({formatNames:[],decimalPlaces:null,phetioFeatured:!0,tandemNameSuffix:"StringProperty"},i),r=[e],s={},a=Object.keys(t);a.forEach(e=>{const i=t[e];(i instanceof _g||i instanceof mg)&&r.push(i);let a=UI;if(null!==n.decimalPlaces&&("number"==typeof n.decimalPlaces||null!==n.decimalPlaces[e])){const t="number"==typeof n.decimalPlaces||null===n.decimalPlaces?n.decimalPlaces:n.decimalPlaces[e];a=e=>UI("number"==typeof e?fl.toFixed(e,t):e)}n.maps&&n.maps.hasOwnProperty(e)?s[e]=t=>a(n.maps[e](t)):s[e]=a}),super(r,(function(){for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];const h=e=>{const t=r.indexOf(e);return t>=0?o[t]:e};let u=""+h(e);n.formatNames.forEach((e,t)=>{u=u.replace(new RegExp(`\\{${t}\\}`,"g"),`{{${e}}}`)});const c=u.match(/\{\{[^{}]+\}\}/g)||[];for(let e=0;e<c.length;e++){const i=c[e],n=i.replace("{{","").replace("}}","");if(a.includes(n)){let e=h(t[n]);s[n]&&(e=s[n](e)),u=u.replace(i,""+e)}}return u}),n)}}ko.register("PatternStringProperty",WI);class XI extends mg{constructor(e){super(e.value),_defineProperty(this,"isOverridden",!1),this._targetProperty=e,this._targetListener=this.onTargetPropertyChange.bind(this),this._targetProperty.lazyLink(this._targetListener)}set targetProperty(e){this.setTargetProperty(e)}setTargetProperty(e){if(this.targetProperty===e)return;const t=this.value;this.isOverridden||this._targetProperty.unlink(this._targetListener),this._targetProperty=e,this.isOverridden||(this._targetProperty.lazyLink(this._targetListener),this.equalsValue(t)||this.notifyListeners(t))}clearOverride(){if(this.isOverridden){const e=this.value;this.isOverridden=!1,this._targetProperty.lazyLink(this._targetListener),this.equalsValue(e)||this.notifyListeners(e)}}get(){return this.isOverridden?this._value:this._targetProperty.value}set(e){this.isOverridden||(this._value=this._targetProperty.value),super.set(e)}setPropertyValue(e){this.isOverridden||(this.isOverridden=!0,this._targetProperty.unlink(this._targetListener)),super.setPropertyValue(e)}equalsValue(e){return this.areValuesEqual(e,this.value)}onTargetPropertyChange(e,t){this.isOverridden||this.notifyListeners(t)}notifyListeners(e){this.emit(this.value,e,this)}dispose(){this.isOverridden||this._targetProperty.unlink(this._targetListener),super.dispose()}}function jI(e){return(e instanceof _g||e instanceof mg)&&e.isSettable()&&!!e.range&&!!e.rangeProperty}ko.register("TinyOverrideProperty",XI);ko.register("UnitConversionProperty",class extends FI{constructor(e,t){const i=e=>e*t.factor;super(e,Vo()({bidirectional:!0,map:i,inverseMap:e=>e/t.factor},t)),this._property=e,this.rangeProperty=new ty(Gb),jI(e)&&(this._rangeListener=e=>{const t=i(e.min),n=i(e.max);this.rangeProperty.value=new Hl(Math.min(t,n),Math.max(t,n))},e.rangeProperty.link(this._rangeListener))}get range(){return this.rangeProperty.value}set range(e){this.rangeProperty.value=e}dispose(){jI(this._property)&&this._property.rangeProperty.unlink(this._rangeListener),this.rangeProperty.dispose()}});const QI=new bt("bamboo"),KI={};class ZI{static registerDataURL(e,t,i){if(phet.chipper.queryParameters.binder){const r=`${e}/${t}`;KI[r]=KI[r]||[];try{i.toDataURL(e=>{KI[r].push(e)})}catch(n){}}}}ZI.map=KI,wo.register("InstanceRegistry",ZI);const JI=new bt("sceneryPhet");class $I extends Ip{constructor(e,t,i,n,r){if(super(),i!==e||n!==t){const s=$I.getArrowShapePoints(e,t,i,n,[],r);this.moveTo(s[0].x,s[0].y);const a=_.tail(s);_.each(a,e=>this.lineTo(e.x,e.y)),this.close()}}static getArrowShapePoints(e,t,i,n,r,s){const a=Vo()({tailWidth:5,headWidth:10,headHeight:10,fractionalHeadHeight:.5,doubleHead:!1,isHeadDynamic:!1,scaleTailToo:!1},s);if(r||(r=[]),i===e&&n===t)r.length=0;else{const s=new al(i-e,n-t),o=s.magnitude;let l=a.headWidth,h=a.headHeight,u=a.tailWidth;if(a.isHeadDynamic){const e=a.fractionalHeadHeight*o;a.headHeight>e&&(h=e,a.scaleTailToo&&(l=a.headWidth*h/a.headHeight,u=a.tailWidth*h/a.headHeight))}else h=Math.min(a.headHeight,a.doubleHead?.35*o:.99*o);let c=0;const d=s.normalized(),p=d.rotated(Math.PI/2),m=function(i,n){const s=d.x*i+p.x*n+e,a=d.y*i+p.y*n+t;r[c]?(r[c].x=s,r[c].y=a):r.push(new al(s,a)),c++};a.doubleHead?(m(0,0),m(h,l/2),m(h,u/2)):m(0,u/2),m(o-h,u/2),m(o-h,l/2),m(o,0),m(o-h,-l/2),m(o-h,-u/2),a.doubleHead?(m(h,-u/2),m(h,-l/2)):m(0,-u/2),c<r.length&&(r.length=c)}return r}}JI.register("ArrowShape",$I);class eB extends aA{constructor(e,t,i,n,r){const s=Vo()({headHeight:10,headWidth:10,tailWidth:5,isHeadDynamic:!1,scaleTailToo:!1,fractionalHeadHeight:.5,doubleHead:!1,fill:"black",stroke:"black",lineWidth:1},r);super(null),this.options=s,this.shapePoints=[],this._tailX=e,this._tailY=t,this._tipX=i,this._tipY=n,this.setTailAndTip(e,t,i,n),this.mutate(s)}get tailX(){return this._tailX}get tailY(){return this._tailY}get tipX(){return this._tipX}get tipY(){return this._tipY}setTailAndTip(e,t,i,n){this._tailX=e,this._tailY=t,this._tipX=i,this._tipY=n;const r=this.updateShapePoints();!this.shape||r?this.updateShape():this.shape.invalidatePoints()}updateShape(){const e=new Ip;if(this.shapePoints.length>1){e.moveToPoint(this.shapePoints[0]);for(let t=1;t<this.shapePoints.length;t++)e.lineToPoint(this.shapePoints[t]);e.close()}this.shape=e}setTail(e,t){this.setTailAndTip(e,t,this._tipX,this._tipY)}setTip(e,t){this.setTailAndTip(this._tailX,this._tailY,e,t)}updateShapePoints(){const e=this.shapePoints.length;return this.shapePoints=$I.getArrowShapePoints(this._tailX,this._tailY,this._tipX,this._tipY,this.shapePoints,this.options),this.shapePoints.length!==e}setTailWidth(e){this.options.tailWidth=e,this.updateShapePoints(),this.updateShape()}setDoubleHead(e){this.options.doubleHead=e,this.updateShapePoints(),this.updateShape()}}JI.register("ArrowNode",eB);class tB extends eB{constructor(e,t,i){const n=Vo()({value:0,extension:20,doubleHead:!0,headHeight:10,headWidth:10,tailWidth:2},i);super(0,0,0,0,n),this.chartTransform=e,this.axisOrientation=t,this.value=n.value,this.extension=n.extension,this.update();const r=()=>this.update();e.changedEmitter.addListener(r),this.disposeAxisNode=()=>e.changedEmitter.removeListener(r)}update(){const e=this.chartTransform.modelToView(this.axisOrientation.opposite,this.value);this.axisOrientation===Ql.VERTICAL?(this.setTailAndTip(e,this.chartTransform.viewHeight+this.extension,e,0-this.extension),this.setVisible(e>=0&&e<=this.chartTransform.viewWidth)):(this.setTailAndTip(0-this.extension,e,this.chartTransform.viewWidth+this.extension,e),this.setVisible(e>=0&&e<=this.chartTransform.viewHeight))}dispose(){this.disposeAxisNode(),super.dispose()}}QI.register("AxisArrowNode",tB);class iB extends SA{constructor(e,t,i){const n=Vo()({value:0,extension:0,stroke:"black",lineWidth:2},i);super(0,0,0,0,n),this.chartTransform=e,this.axisOrientation=t,this.value=n.value,this.extension=n.extension,this.update();const r=()=>this.update();e.changedEmitter.addListener(r),this.disposeAxisLine=()=>e.changedEmitter.removeListener(r)}update(){const e=this.chartTransform.modelToView(this.axisOrientation.opposite,this.value);this.axisOrientation===Ql.VERTICAL?(this.setLine(e,0-this.extension,e,this.chartTransform.viewHeight+this.extension),this.setVisible(e>=0&&e<=this.chartTransform.viewWidth)):(this.setLine(0-this.extension,e,this.chartTransform.viewWidth+this.extension,e),this.setVisible(e>=0&&e<=this.chartTransform.viewHeight))}dispose(){this.disposeAxisLine(),super.dispose()}}QI.register("AxisLine",iB);const nB=new bt("joist"),rB=_.sortBy(Object.keys(phet.chipper.strings),e=>Qb.localeToLocalizedName(e).toLowerCase()),sB=e=>!(!e||!rB.includes(e)),aB="string"==typeof phet.chipper.locale?phet.chipper.locale.slice(0,2):void 0,oB=sB(phet.chipper.locale)?phet.chipper.locale:sB(aB)?aB:"en";phet.chipper.locale=oB;const lB=new class extends ty{unguardedSet(e){rB.includes(e)&&super.unguardedSet(e)}}(oB,{tandem:Lm.GENERAL_MODEL.createTandem("localeProperty"),phetioFeatured:!0,phetioValueType:Om,validValues:rB,phetioDocumentation:"Specifies language currently displayed in the simulation"});if(phet.chipper.queryParameters.keyboardLocaleSwitcher){const e=Of.KEY_I,t=Of.KEY_U;_b.keydownEmitter.addListener(i=>{const n=e=>{i.preventDefault();const t=(rB.indexOf(lB.value)+e+rB.length)%rB.length;lB.value=rB[t],console.log(lB.value)};!i.ctrlKey||i.shiftKey||i.metaKey||i.altKey||(Of.isKeyEvent(i,e)?n(1):Of.isKeyEvent(i,t)&&n(-1))})}nB.register("localeProperty",lB);const hB=lB,uB=new ty([],{tandem:Lm.GENERAL_MODEL.createTandem("fallbackLocalesProperty"),phetioDocumentation:'An ordered list of locales to "fall back" on when a translation is missing for the selected locale, for example: ["es", "de" ]. "en" will always be added to the end of this, because it has guaranteed full coverage of all translated keys.',phetioFeatured:!0,isValidValue:e=>_.every(e,e=>!!Wb[e]),phetioValueType:xh(Om)});nB.register("fallbackLocalesProperty",uB);const cB=new Rb([hB,uB],(e,t)=>{const i=[e],n=e.slice(0,2);e===n||i.includes(n)||i.push(n);for(let s=0;s<t.length;s++){const e=t[s];i.includes(e)||i.push(e)}i.includes("en")||i.push("en");const r=i.indexOf("en");return i.slice(0,r+1)});nB.register("localeOrderProperty",cB);const dB=cB,pB=new bt("chipper");class mB extends Ub{constructor(e,t,i){const n=i&&"boolean"==typeof i.phetioReadOnly?i.phetioReadOnly:jo.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioReadOnly,r=!i||"boolean"!=typeof i.phetioFeatured||i.phetioFeatured,s=i&&"string"==typeof i.phetioDocumentation?i.phetioDocumentation:jo.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioDocumentation;super(hB,{derive:t=>e.getLocaleSpecificProperty(t),bidirectional:!0,phetioValueType:Om,phetioState:!1,tandem:t,phetioFeatured:r,phetioReadOnly:n,phetioDocumentation:s}),this.localizedString=e}get stringKey(){return this.localizedString.stringKey}}pB.register("LocalizedStringProperty",mB);const gB=mB;class fB{constructor(e,t,i,n){_defineProperty(this,"localePropertyMap",new Map),_defineProperty(this,"initialValues",{}),this.stringKey=e,this.englishProperty=new mg(t),this.initialValues.en=t,this.localeOrderListener=this.onLocaleOrderChange.bind(this),dB.lazyLink(this.localeOrderListener),this.property=new gB(this,i,n),EB.push(this)}setInitialValue(e,t){this.initialValues[e]=t,this.getLocaleSpecificProperty(e).value=t}getStateDelta(){const e={};return this.usedLocales.forEach(t=>{const i=this.getRawStringValue(t);null!==i&&i!==this.initialValues[t]&&(e[t]=i)}),e}setStateDelta(e){Object.keys(e).forEach(e=>this.getLocaleSpecificProperty(e)),this.usedLocales.forEach(t=>{const i=this.getLocaleSpecificProperty(t),n=void 0!==this.initialValues[t]?this.initialValues[t]:null,r=void 0!==e[t]?e[t]:null;null===r?null===n?i.clearOverride():i.value=n:i.value=r})}getRawStringValue(e){const t=this.getLocaleSpecificProperty(e);return t instanceof XI?t.isOverridden?t.value:null:t.value}get usedLocales(){return["en",...this.localePropertyMap.keys()]}onLocaleOrderChange(e){const t=[...this.usedLocales,...e];for(let i=t.length-1;i>=0;i--){const e=t[i],n=this.getLocaleSpecificProperty(e);n instanceof XI&&(n.targetProperty=this.getLocaleSpecificProperty(fB.getFallbackLocale(e)))}}getLocaleSpecificProperty(e){return"en"===e?this.englishProperty:(this.localePropertyMap.has(e)||this.localePropertyMap.set(e,new XI(this.getLocaleSpecificProperty(fB.getFallbackLocale(e)))),this.localePropertyMap.get(e))}static getFallbackLocale(e){if("en"===e)return"en";const t=dB.value,i=t.indexOf(e);return i>=0?t[i+1]:e.includes("_")?e.slice(0,2):"en"}dispose(){dB.unlink(this.localeOrderListener),this.property.dispose(),rm(EB,this)}restoreInitialValue(e){this.property.value=this.initialValues[e]}}pB.register("LocalizedString",fB);const yB=fB,EB=[];window.phet.chipper.localizedStrings=EB,window.phet.chipper.setAllStrings=e=>{EB.forEach(t=>{t.property.value=e})};const vB=new el("StringStateIO",{valueType:Km,toStateObject:()=>{const e={};return EB.forEach(t=>{const i=t.getStateDelta();Object.keys(i).length>0&&(e[t.property.tandem.phetioID]=i)}),{data:e}},stateSchema:{data:Wf},applyState:(e,t)=>{Object.keys(t.data).forEach(e=>{if(!EB.find(t=>t.property.tandem.phetioID===e))throw new xE}),EB.forEach(e=>{e.setStateDelta(t.data[e.property.tandem.phetioID]||{})})}});Km.create({phetioType:vB,tandem:Lm.GENERAL_MODEL.createTandem("stringsState"),phetioDocumentation:"Strings that have changed from their initial values. Each string value is specific to the locale it changed in.",phetioState:!0});const AB=e=>{const t=e+"/";let i=Object.keys(phet.chipper.strings.en).filter(e=>e.startsWith(t));phet.chipper.usedStringsEN&&(i=i.filter(e=>phet.chipper.usedStringsEN.hasOwnProperty(e)));const n={},r={};return i.forEach(i=>{const s=i.slice(t.length).split("."),a=s[s.length-1],o=s.slice(0,s.length-1);let l=r,h=t;if(o.forEach((e,t)=>{h+=`${t>0?".":""}${e}`,l[e]||(l[e]={}),l=l[e]}),"string"!=typeof l){let t=Lm.STRINGS.createTandem(_.camelCase(e));for(let e=0;e<s.length;e++){let i=s[e].replace(/(?:[-_\s]\w)/g,e=>e[1].toUpperCase());if(e===s.length-1){let e=i,n=0,r=!0;for(;r;)n++,e=`${i}${1===n?"":n}StringProperty`,r=t.hasChild(e);i=e}t=t.createTandem(i)}t.phetioID.includes(".a11y.")&&(t=Lm.OPT_OUT);const r=new yB(i,phet.chipper.mapString(phet.chipper.strings.en[i]),t,phet.chipper.stringMetadata[i]);n[i]=r,Object.keys(phet.chipper.strings).forEach(e=>{const t=phet.chipper.strings[e][i];"string"==typeof t&&""!==t&&r.setInitialValue(e,phet.chipper.mapString(t))}),l[a+"StringProperty"]=r.property,r.property.link(e=>{l[a]=e})}}),r},bB=AB("BAMBOO");QI.register("BambooStrings",bB);const SB={fill:"black"};class _B extends cv{constructor(e,t,i){const n=Vo()({barWidth:10,barTailValue:0,pointToPaintableFields:e=>SB},i);super(n),this.chartTransform=e,this.barTailValue=n.barTailValue,this.dataSet=t,this.barWidth=n.barWidth,this.pointToPaintableFields=n.pointToPaintableFields,this.rectangles=[],this.setDataSet(t);const r=()=>this.update();e.changedEmitter.addListener(r),this.disposeBarPlot=()=>e.changedEmitter.removeListener(r)}setDataSet(e){this.dataSet=e,this.update()}update(){for(;this.rectangles.length<this.dataSet.length;){const e=new xA(0,0,0,0);this.rectangles.push(e),this.addChild(e)}for(;this.rectangles.length>this.dataSet.length;){const e=this.rectangles.pop();this.removeChild(e)}for(let e=0;e<this.rectangles.length;e++){const t=this.chartTransform.modelToViewPosition(new al(this.dataSet[e].x,this.barTailValue)),i=this.chartTransform.modelToViewPosition(this.dataSet[e]),n=i.y-t.y,r=Math.min(t.y,i.y);this.rectangles[e].setRect(t.x-this.barWidth/2,r,this.barWidth,Math.abs(n));const s=this.pointToPaintableFields(this.dataSet[e]);this.rectangles[e].mutate(s)}}dispose(){this.disposeBarPlot(),super.dispose()}}QI.register("BarPlot",_B);class xB{constructor(e){const t=Vo()({visible:!0},e);this.visible=t.visible,this.isDisposed=!1}}QI.register("CanvasPainter",xB);const wB=xB;class TB extends wB{constructor(e,t,i,n){const r=Vo()({origin:0,clippingType:"strict",stroke:"black",lineWidth:1,lineDash:[1],lineDashOffset:0},n);super(),this.chartTransform=e,this.axisOrientation=t,this.spacing=i,this.origin=r.origin,this.clippingType=r.clippingType,this.stroke=r.stroke,this.lineDash=r.lineDash,this.lineWidth=r.lineWidth,this.lineDashOffset=r.lineDashOffset}setSpacing(e){this.spacing!==e&&(this.spacing=e)}setLineDashOffset(e){this.lineDashOffset=e}paintCanvas(e){e.strokeStyle=this.stroke,e.lineWidth=this.lineWidth,e.beginPath(),e.setLineDash(this.lineDash),e.lineDashOffset=this.lineDashOffset,this.chartTransform.forEachSpacing(this.axisOrientation,this.spacing,this.origin,this.clippingType,(t,i)=>{this.axisOrientation===Ql.VERTICAL?(e.moveTo(0,i),e.lineTo(this.chartTransform.viewWidth,i)):(e.moveTo(i,0),e.lineTo(i,this.chartTransform.viewHeight))}),e.stroke()}}QI.register("CanvasGridLineSet",TB);QI.register("CanvasLinePlot",class extends wB{constructor(e,t,i){const n=Vo()({stroke:"black",lineWidth:1,lineDash:[]},i);super(),this.chartTransform=e,this.dataSet=t,this.lineWidth=n.lineWidth,this.lineDash=n.lineDash,this.strokeCSS=null,this.setStroke(n.stroke)}setStroke(e){this.strokeCSS=e instanceof Hg?e.toCSS():e}set stroke(e){this.setStroke(e)}dispose(){this.isDisposed=!0}setDataSet(e){this.dataSet=e}paintCanvas(e){if(e.beginPath(),this.strokeCSS){e.strokeStyle=this.strokeCSS,e.lineWidth=this.lineWidth,e.setLineDash(this.lineDash);let t=!0;const i=this.dataSet.length;for(let n=0;n<i;n++){const i=this.dataSet[n];if(i){const n=this.chartTransform.modelToViewPosition(i);t?(e.moveTo(n.x,n.y),t=!1):e.lineTo(n.x,n.y)}else t=!0}e.stroke()}}});class PB extends vA{constructor(e,t,i){super(Vo()({canvasBounds:new Zl(0,0,e.viewWidth,e.viewHeight)},i)),this.chartTransform=e,this.painters=t,this.update();const n=()=>this.update();e.changedEmitter.addListener(n),this.disposeChartCanvasLinePlot=()=>e.changedEmitter.removeListener(n)}setPainters(e){this.painters=e,this.update()}update(){this.invalidatePaint()}paintCanvas(e){this.painters.forEach(t=>{t.visible&&(e.save(),t.paintCanvas(e),e.restore())})}dispose(){this.disposeChartCanvasLinePlot(),super.dispose()}}QI.register("ChartCanvasNode",PB);class CB extends xA{constructor(e,t){super(0,0,0,0,t),this.chartTransform=e,this.update();const i=()=>this.update();e.changedEmitter.addListener(i),this.disposeChartRectangle=()=>e.changedEmitter.removeListener(i)}update(){this.setRect(0,0,this.chartTransform.viewWidth,this.chartTransform.viewHeight)}dispose(){this.disposeChartRectangle(),super.dispose()}}QI.register("ChartRectangle",CB);class VB{constructor(e,t,i){i=Po({domain:new Hl(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY),range:new Hl(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY)},i),this.evaluationFunction=e,this.inverseFunction=t,this.domain=i.domain,this.range=i.range}evaluate(e){const t=this.evaluationFunction(e);return t}inverse(e){const t=this.inverseFunction(e);return t}}rl.register("Transform1",VB);const RB=VB;class NB{constructor(e){const t=Vo()({viewWidth:100,modelXRange:new Hl(-1,1),modelXRangeInverted:!1,xTransform:new RB(e=>e,e=>e),viewHeight:100,modelYRange:new Hl(-1,1),modelYRangeInverted:!1,yTransform:new RB(e=>e,e=>e)},e);this.changedEmitter=new hb,this.viewWidth=t.viewWidth,this.viewHeight=t.viewHeight,this.modelXRange=t.modelXRange,this.modelXRangeInverted=t.modelXRangeInverted,this.modelYRange=t.modelYRange,this.modelYRangeInverted=t.modelYRangeInverted,this.xTransform=t.xTransform,this.yTransform=t.yTransform}dispose(){this.changedEmitter.dispose()}forEachSpacing(e,t,i,n,r){const s=this.getSpacingBorders(e,t,i,n),a=s.min,o=s.max;for(let l=a;l<=o+1e-6;l++){const n=l*t+i;r(n,this.modelToView(e,n))}}modelToView(e,t){const i=e===Ql.HORIZONTAL?this.modelXRange:this.modelYRange,n=e===Ql.HORIZONTAL?this.viewWidth:this.viewHeight,r=e===Ql.HORIZONTAL?this.xTransform:this.yTransform,s=e===Ql.HORIZONTAL?this.modelXRangeInverted:this.modelYRangeInverted,a=r.evaluate(t),o=s?n:0,l=s?0:n,h=e===Ql.HORIZONTAL?fl.linear(r.evaluate(i.min),r.evaluate(i.max),o,l,a):fl.linear(r.evaluate(i.max),r.evaluate(i.min),o,l,a);return h}modelToViewX(e){return this.modelToView(Ql.HORIZONTAL,e)}modelToViewY(e){return this.modelToView(Ql.VERTICAL,e)}modelToViewXY(e,t){return new al(this.modelToViewX(e),this.modelToViewY(t))}modelToViewPosition(e){return this.modelToViewXY(e.x,e.y)}modelToViewDelta(e,t){return this.modelToView(e,t)-this.modelToView(e,0)}modelToViewDeltaX(e){return this.modelToViewDelta(Ql.HORIZONTAL,e)}modelToViewDeltaY(e){return this.modelToViewDelta(Ql.VERTICAL,e)}modelToViewDeltaXY(e,t){return new al(this.modelToViewDeltaX(e),this.modelToViewDeltaY(t))}viewToModel(e,t){const i=e===Ql.HORIZONTAL?this.modelXRange:this.modelYRange,n=e===Ql.HORIZONTAL?this.viewWidth:this.viewHeight,r=e===Ql.HORIZONTAL?this.xTransform:this.yTransform,s=e===Ql.HORIZONTAL?this.modelXRangeInverted:this.modelYRangeInverted,a=s?n:0,o=s?0:n,l=e===Ql.HORIZONTAL?fl.linear(a,o,r.evaluate(i.min),r.evaluate(i.max),t):fl.linear(a,o,r.evaluate(i.max),r.evaluate(i.min),t),h=r.inverse(l);return h}viewToModelX(e){return this.viewToModel(Ql.HORIZONTAL,e)}viewToModelY(e){return this.viewToModel(Ql.VERTICAL,e)}viewToModelXY(e,t){return new al(this.viewToModelX(e),this.viewToModelY(t))}viewToModelPosition(e){return this.viewToModelXY(e.x,e.y)}viewToModelDeltaX(e){return this.viewToModelX(e)-this.viewToModelX(0)}viewToModelDeltaY(e){return this.viewToModelY(e)-this.viewToModelY(0)}viewToModelDelta(e){return this.viewToModelPosition(e).minus(this.viewToModelPosition(al.ZERO))}setViewWidth(e){e!==this.viewWidth&&(this.viewWidth=e,this.changedEmitter.emit())}setViewHeight(e){e!==this.viewHeight&&(this.viewHeight=e,this.changedEmitter.emit())}setModelXRange(e){e.equals(this.modelXRange)||(this.modelXRange=e,this.changedEmitter.emit())}setModelYRange(e){e.equals(this.modelYRange)||(this.modelYRange=e,this.changedEmitter.emit())}getModelRange(e){return e===Ql.HORIZONTAL?this.modelXRange:this.modelYRange}setXTransform(e){this.xTransform!==e&&(this.xTransform=e,this.changedEmitter.emit())}setYTransform(e){this.yTransform!==e&&(this.yTransform=e,this.changedEmitter.emit())}getSpacingBorders(e,t,i,n){const r=this.getModelRange(e),s=MB(r.min,n,i,t,Math.ceil),a=MB(r.max,n,i,t,Math.floor);return new Hl(s,a)}}function MB(e,t,i,n,r){return"lenient"===t?fl.roundSymmetric((e-i)/n):r((e-i)/n)}QI.register("ChartTransform",NB);QI.register("ClippingTypeValues",["strict","lenient"]);class kB extends aA{constructor(e,t,i,n){const r=Vo()({origin:0,clippingType:"strict",stroke:"black"},n);super(null,r),this.chartTransform=e,this.axisOrientation=t,this.spacing=i,this.origin=r.origin,this.clippingType=r.clippingType,this.update();const s=()=>this.update();e.changedEmitter.addListener(s),this.disposeGridLineSet=()=>e.changedEmitter.removeListener(s)}update(){const e=new Ip;this.chartTransform.forEachSpacing(this.axisOrientation,this.spacing,this.origin,this.clippingType,(t,i)=>{this.axisOrientation===Ql.VERTICAL?(e.moveTo(0,i),e.lineTo(this.chartTransform.viewWidth,i)):(e.moveTo(i,0),e.lineTo(i,this.chartTransform.viewHeight))}),this.shape=e.makeImmutable()}setSpacing(e){this.spacing!==e&&(this.spacing=e,this.update())}getSpacing(){return this.spacing}dispose(){this.disposeGridLineSet(),super.dispose()}getSpacingBorders(){return this.chartTransform.getSpacingBorders(this.axisOrientation,this.spacing,this.origin,this.clippingType)}}QI.register("GridLineSet",kB);class LB extends aA{constructor(e,t,i){super(null,Vo()({stroke:"black"},i)),this.chartTransform=e,this.dataSet=t,this.update();const n=()=>this.update();e.changedEmitter.addListener(n),this.disposeLinePlot=()=>e.changedEmitter.removeListener(n)}setDataSet(e){this.dataSet=e,this.update()}update(){const e=new Ip;let t=!0;for(let i=0;i<this.dataSet.length;i++){const n=this.dataSet[i];if(n){const i=this.chartTransform.modelToViewPosition(n);t?(e.moveToPoint(i),t=!1):e.lineToPoint(i)}else t=!0}this.shape=e.makeImmutable()}dispose(){this.disposeLinePlot(),super.dispose()}}QI.register("LinePlot",LB);class IB extends SA{constructor(e,t,i,n){super(0,0,1,1,Vo()({stroke:"black",lineWidth:1},n)),this.chartTransform=e,this._m=t,this._b=i,this.update();const r=()=>this.update();e.changedEmitter.addListener(r),this.disposeStraightLinePlot=()=>e.changedEmitter.removeListener(r)}setSlope(e){this._m=e,this.update()}set m(e){this.setSlope(e)}get m(){return this._m}setYIntercept(e){this._b=e,this.update()}set b(e){this.setYIntercept(e)}get b(){return this._b}solve(e){return this._m*e+this._b}update(){if(this._m===1/0||this._m===-1/0){const e=0,t=this.chartTransform.modelYRange.min,i=this.chartTransform.modelYRange.max,n=this.chartTransform.modelToViewX(e),r=this.chartTransform.modelToViewY(t),s=this.chartTransform.modelToViewY(i);this.setLine(n,r,n,s)}else{const e=this.chartTransform.modelXRange.min,t=this.solve(e),i=this.chartTransform.modelXRange.max,n=this.solve(i),r=this.chartTransform.modelToViewX(e),s=this.chartTransform.modelToViewY(t),a=this.chartTransform.modelToViewX(i),o=this.chartTransform.modelToViewY(n);this.setLine(r,s,a,o)}}dispose(){this.disposeStraightLinePlot(),super.dispose()}}QI.register("LinearEquationPlot",IB);class BB extends aA{constructor(e,t,i){const n=Vo()({radius:2,fill:"black"},i);super(null,n),this.chartTransform=e,this.dataSet=t,this.radius=n.radius,this.update();const r=()=>this.update();e.changedEmitter.addListener(r),this.disposeScatterPlot=()=>e.changedEmitter.removeListener(r)}setDataSet(e){this.dataSet=e,this.update()}update(){const e=new Ip,t=this.dataSet.length;for(let i=0;i<t;i++){const t=this.dataSet[i];if(t.isFinite()){const i=this.chartTransform.modelToViewPosition(t);e.moveTo(i.x+this.radius,i.y),e.circle(i.x,i.y,this.radius)}}this.shape=e.makeImmutable()}dispose(){this.disposeScatterPlot(),super.dispose()}}QI.register("ScatterPlot",BB);const DB={doubleHead:!0,headHeight:4.5,headWidth:5,tailWidth:1.5,stroke:null};class OB extends Hw{constructor(e,t,i,n,r){const s=Vo()({color:"black",outerLineLength:6,spacing:0},r);super(),this.chartTransform=e,this.axisOrientation=t,this.delta=i,this.labelNode=n,this.color=s.color,this.outerLineLength=s.outerLineLength,this.viewWidth=0,this.arrowNodeOptions=No({fill:s.color},DB,s.arrowNodeOptions),this.update(),this.mutate(s);const a=()=>this.update();e.changedEmitter.addListener(a),this.disposeSpanNode=()=>e.changedEmitter.removeListener(a)}setDelta(e){e!==this.delta&&(this.delta=e,this.update())}update(){const e=this.chartTransform.modelToViewDelta(this.axisOrientation,this.delta);if(Math.abs(e-this.viewWidth)>1e-13){this.viewWidth=e;const t=e=>new SA(0,0,0,this.outerLineLength,{stroke:this.color,centerX:e}),i=t(0),n=t(e),r=new eB(i.right,i.centerY,n.left,n.centerY,this.arrowNodeOptions),s=new cv({children:[i,n,r]});this.labelNode.maxWidth=s.width,this.children=[s,this.labelNode]}}dispose(){this.disposeSpanNode(),super.dispose()}}QI.register("SpanNode",OB);class qB extends aA{constructor(e,t,i,n){const r=Vo()({value:0,edge:null,origin:0,skipCoordinates:[],stroke:"black",lineWidth:1,extent:qB.DEFAULT_EXTENT,clippingType:"strict"},n);r.edge,super(null,r),this.chartTransform=e,this.axisOrientation=t,this.spacing=i,this.value=r.value,this.edge=r.edge,this.origin=r.origin,this.skipCoordinates=r.skipCoordinates,this.extent=r.extent,this.clippingType=r.clippingType,this.update();const s=()=>this.update();e.changedEmitter.addListener(s),this.disposeTickMarkSet=()=>e.changedEmitter.removeListener(s)}setSpacing(e){e!==this.spacing&&(this.spacing=e,this.update())}getSpacing(){return this.spacing}update(){const e=new Ip;this.chartTransform.forEachSpacing(this.axisOrientation,this.spacing,this.origin,this.clippingType,(t,i)=>{if(!this.skipCoordinates.includes(t)){const t=new Zl(0,0,0,0);if(this.axisOrientation===Ql.HORIZONTAL){const n="min"===this.edge?this.chartTransform.viewHeight:"max"===this.edge?0:this.chartTransform.modelToView(this.axisOrientation.opposite,this.value);e.moveTo(i,n-this.extent/2),e.lineTo(i,n+this.extent/2),t.setMinMax(i,n-this.extent/2,i,n+this.extent/2)}else{const n="min"===this.edge?0:"max"===this.edge?this.chartTransform.viewWidth:this.chartTransform.modelToView(this.axisOrientation.opposite,this.value);e.moveTo(n-this.extent/2,i),e.lineTo(n+this.extent/2,i),t.setMinMax(n-this.extent/2,i,n+this.extent/2,i)}}}),this.shape=e.makeImmutable()}dispose(){this.disposeTickMarkSet(),super.dispose()}getSpacingBorders(){return this.chartTransform.getSpacingBorders(this.axisOrientation,this.spacing,this.origin,this.clippingType)}}_defineProperty(qB,"DEFAULT_EXTENT",10),QI.register("TickMarkSet",qB);const YB=qB;class HB extends aA{constructor(e,t,i,n){const r=Vo()({value:0,edge:null,origin:0,skipCoordinates:[],extent:YB.DEFAULT_EXTENT,clippingType:"strict",createLabel:e=>new gA(fl.toFixed(e,1),{fontSize:12}),positionLabel:(e,t,i)=>(i===Ql.HORIZONTAL?e.centerTop=t.centerBottom.plusXY(0,1):e.rightCenter=t.leftCenter.plusXY(-1,0),e)},n);r.edge,super(null,r),this.chartTransform=e,this.axisOrientation=t,this.spacing=i,this.origin=r.origin,this.skipCoordinates=r.skipCoordinates,this.extent=r.extent,this.value=r.value,this.clippingType=r.clippingType,this.edge=r.edge,this.createLabel=r.createLabel,this.positionLabel=r.positionLabel,this.labelMap=new Map,this.update();const s=()=>this.update();e.changedEmitter.addListener(s),this.disposeTickLabelSet=()=>e.changedEmitter.removeListener(s)}setSpacing(e){this.spacing!==e&&(this.spacing=e,this.update())}getSpacing(){return this.spacing}update(){const e=[],t=new Set;this.chartTransform.forEachSpacing(this.axisOrientation,this.spacing,this.origin,this.clippingType,(i,n)=>{if(!this.skipCoordinates.includes(i)){const r=new Zl(0,0,0,0);if(this.axisOrientation===Ql.HORIZONTAL){const e="min"===this.edge?this.chartTransform.viewHeight:"max"===this.edge?0:this.chartTransform.modelToView(this.axisOrientation.opposite,this.value);r.setMinMax(n,e-this.extent/2,n,e+this.extent/2)}else{const e="min"===this.edge?0:"max"===this.edge?this.chartTransform.viewWidth:this.chartTransform.modelToView(this.axisOrientation.opposite,this.value);r.setMinMax(e-this.extent/2,n,e+this.extent/2,n)}const s=this.labelMap.has(i)?this.labelMap.get(i):this.createLabel?this.createLabel(i):null;this.labelMap.set(i,s),s&&this.positionLabel(s,r,this.axisOrientation),s&&e.push(s),t.add(i)}});const i=[];for(const n of this.labelMap.keys())t.has(n)||i.push(n);i.forEach(e=>{this.labelMap.delete(e)}),this.children=e}invalidateTickLabelSet(){this.labelMap.clear(),this.update()}setCreateLabel(e){this.createLabel=e,this.invalidateTickLabelSet()}dispose(){this.disposeTickLabelSet(),super.dispose()}getSpacingBorders(){return this.chartTransform.getSpacingBorders(this.axisOrientation,this.spacing,this.origin,this.clippingType)}}QI.register("TickLabelSet",HB);const GB={fill:"black"};class FB extends cv{constructor(e,t,i){const n=Vo()({arrowNodeOptions:{},pointToPaintableFields:e=>GB},i);super(n),this.chartTransform=e,this.dataSet=t,this.pointToPaintableFields=n.pointToPaintableFields,this.arrowNodeOptions=n.arrowNodeOptions,this.arrowNodes=[],this.setDataSet(t);const r=()=>this.update();e.changedEmitter.addListener(r),this.disposeUpDownArrowPLot=()=>e.changedEmitter.removeListener(r)}setDataSet(e){this.dataSet=e,this.update()}update(){for(;this.arrowNodes.length<this.dataSet.length;){const e=new eB(0,0,0,0,this.arrowNodeOptions);this.arrowNodes.push(e),this.addChild(e)}for(;this.arrowNodes.length>this.dataSet.length;){const e=this.arrowNodes.pop();this.removeChild(e)}for(let e=0;e<this.arrowNodes.length;e++){const t=this.dataSet[e],i=this.chartTransform.modelToViewPosition(new al(t.x,0)),n=this.chartTransform.modelToViewPosition(t);this.arrowNodes[e].setTailAndTip(i.x,i.y,n.x,n.y);const r=this.pointToPaintableFields(t);this.arrowNodes[e].mutate(r)}}dispose(){this.disposeUpDownArrowPLot(),super.dispose()}}QI.register("UpDownArrowPlot",FB);class zB{constructor(e,t,i,n,r,s){this.minX=e,this.minY=t,this.minZ=i,this.maxX=n,this.maxY=r,this.maxZ=s}getWidth(){return this.maxX-this.minX}get width(){return this.getWidth()}getHeight(){return this.maxY-this.minY}get height(){return this.getHeight()}getDepth(){return this.maxZ-this.minZ}get depth(){return this.getDepth()}getX(){return this.minX}get x(){return this.getX()}getY(){return this.minY}get y(){return this.getY()}getZ(){return this.minZ}get z(){return this.getZ()}getMinX(){return this.minX}getMinY(){return this.minY}getMinZ(){return this.minZ}getMaxX(){return this.maxX}getMaxY(){return this.maxY}getMaxZ(){return this.maxZ}getLeft(){return this.minX}get left(){return this.minX}getTop(){return this.minY}get top(){return this.minY}getBack(){return this.minZ}get back(){return this.minZ}getRight(){return this.maxX}get right(){return this.maxX}getBottom(){return this.maxY}get bottom(){return this.maxY}getFront(){return this.maxZ}get front(){return this.maxZ}getCenterX(){return(this.maxX+this.minX)/2}get centerX(){return this.getCenterX()}getCenterY(){return(this.maxY+this.minY)/2}get centerY(){return this.getCenterY()}getCenterZ(){return(this.maxZ+this.minZ)/2}get centerZ(){return this.getCenterZ()}getCenter(){return new bl(this.getCenterX(),this.getCenterY(),this.getCenterZ())}get center(){return this.getCenter()}isEmpty(){return this.getWidth()<0||this.getHeight()<0||this.getDepth()<0}isFinite(){return isFinite(this.minX)&&isFinite(this.minY)&&isFinite(this.minZ)&&isFinite(this.maxX)&&isFinite(this.maxY)&&isFinite(this.maxZ)}hasNonzeroArea(){return this.getWidth()>0&&this.getHeight()>0&&this.getDepth()>0}isValid(){return!this.isEmpty()&&this.isFinite()}containsCoordinates(e,t,i){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY&&this.minZ<=i&&i<=this.maxZ}containsPoint(e){return this.containsCoordinates(e.x,e.y,e.z)}containsBounds(e){return this.minX<=e.minX&&this.maxX>=e.maxX&&this.minY<=e.minY&&this.maxY>=e.maxY&&this.minZ<=e.minZ&&this.maxZ>=e.maxZ}intersectsBounds(e){return!this.intersection(e).isEmpty()}toString(){return`[x:(${this.minX},${this.maxX}),y:(${this.minY},${this.maxY}),z:(${this.minZ},${this.maxZ})]`}equals(e){return this.minX===e.minX&&this.minY===e.minY&&this.minZ===e.minZ&&this.maxX===e.maxX&&this.maxY===e.maxY&&this.maxZ===e.maxZ}equalsEpsilon(e,t){t=void 0!==t?t:0;const i=this.isFinite(),n=e.isFinite();return i&&n?Math.abs(this.minX-e.minX)<t&&Math.abs(this.minY-e.minY)<t&&Math.abs(this.minZ-e.minZ)<t&&Math.abs(this.maxX-e.maxX)<t&&Math.abs(this.maxY-e.maxY)<t&&Math.abs(this.maxZ-e.maxZ)<t:i===n&&(this===e||(isFinite(this.minX+e.minX)?Math.abs(this.minX-e.minX)<t:this.minX===e.minX)&&(isFinite(this.minY+e.minY)?Math.abs(this.minY-e.minY)<t:this.minY===e.minY)&&(isFinite(this.minZ+e.minZ)?Math.abs(this.minZ-e.minZ)<t:this.minZ===e.minZ)&&(isFinite(this.maxX+e.maxX)?Math.abs(this.maxX-e.maxX)<t:this.maxX===e.maxX)&&(isFinite(this.maxY+e.maxY)?Math.abs(this.maxY-e.maxY)<t:this.maxY===e.maxY)&&(isFinite(this.maxZ+e.maxZ)?Math.abs(this.maxZ-e.maxZ)<t:this.maxZ===e.maxZ))}copy(e){return e?e.set(this):new zB(this.minX,this.minY,this.minZ,this.maxX,this.maxY,this.maxZ)}union(e){return new zB(Math.min(this.minX,e.minX),Math.min(this.minY,e.minY),Math.min(this.minZ,e.minZ),Math.max(this.maxX,e.maxX),Math.max(this.maxY,e.maxY),Math.max(this.maxZ,e.maxZ))}intersection(e){return new zB(Math.max(this.minX,e.minX),Math.max(this.minY,e.minY),Math.max(this.minZ,e.minZ),Math.min(this.maxX,e.maxX),Math.min(this.maxY,e.maxY),Math.min(this.maxZ,e.maxZ))}withCoordinates(e,t,i){return new zB(Math.min(this.minX,e),Math.min(this.minY,t),Math.min(this.minZ,i),Math.max(this.maxX,e),Math.max(this.maxY,t),Math.max(this.maxZ,i))}withPoint(e){return this.withCoordinates(e.x,e.y,e.z)}withMinX(e){return new zB(e,this.minY,this.minZ,this.maxX,this.maxY,this.maxZ)}withMinY(e){return new zB(this.minX,e,this.minZ,this.maxX,this.maxY,this.maxZ)}withMinZ(e){return new zB(this.minX,this.minY,e,this.maxX,this.maxY,this.maxZ)}withMaxX(e){return new zB(this.minX,this.minY,this.minZ,e,this.maxY,this.maxZ)}withMaxY(e){return new zB(this.minX,this.minY,this.minZ,this.maxX,e,this.maxZ)}withMaxZ(e){return new zB(this.minX,this.minY,this.minZ,this.maxX,this.maxY,e)}roundedOut(){return new zB(Math.floor(this.minX),Math.floor(this.minY),Math.floor(this.minZ),Math.ceil(this.maxX),Math.ceil(this.maxY),Math.ceil(this.maxZ))}roundedIn(){return new zB(Math.ceil(this.minX),Math.ceil(this.minY),Math.ceil(this.minZ),Math.floor(this.maxX),Math.floor(this.maxY),Math.floor(this.maxZ))}transformed(e){return this.copy().transform(e)}dilated(e){return this.dilatedXYZ(e,e,e)}dilatedX(e){return new zB(this.minX-e,this.minY,this.minZ,this.maxX+e,this.maxY,this.maxZ)}dilatedY(e){return new zB(this.minX,this.minY-e,this.minZ,this.maxX,this.maxY+e,this.maxZ)}dilatedZ(e){return new zB(this.minX,this.minY,this.minZ-e,this.maxX,this.maxY,this.maxZ+e)}dilatedXYZ(e,t,i){return new zB(this.minX-e,this.minY-t,this.minZ-i,this.maxX+e,this.maxY+t,this.maxZ+i)}eroded(e){return this.dilated(-e)}erodedX(e){return this.dilatedX(-e)}erodedY(e){return this.dilatedY(-e)}erodedZ(e){return this.dilatedZ(-e)}erodedXYZ(e,t,i){return this.dilatedXYZ(-e,-t,-i)}shiftedX(e){return new zB(this.minX+e,this.minY,this.minZ,this.maxX+e,this.maxY,this.maxZ)}shiftedY(e){return new zB(this.minX,this.minY+e,this.minZ,this.maxX,this.maxY+e,this.maxZ)}shiftedZ(e){return new zB(this.minX,this.minY,this.minZ+e,this.maxX,this.maxY,this.maxZ+e)}shiftedXYZ(e,t,i){return new zB(this.minX+e,this.minY+t,this.minZ+i,this.maxX+e,this.maxY+t,this.maxZ+i)}shifted(e){return this.shiftedXYZ(e.x,e.y,e.z)}setMinMax(e,t,i,n,r,s){return this.minX=e,this.minY=t,this.minZ=i,this.maxX=n,this.maxY=r,this.maxZ=s,this}setMinX(e){return this.minX=e,this}setMinY(e){return this.minY=e,this}setMinZ(e){return this.minZ=e,this}setMaxX(e){return this.maxX=e,this}setMaxY(e){return this.maxY=e,this}setMaxZ(e){return this.maxZ=e,this}set(e){return this.setMinMax(e.minX,e.minY,e.minZ,e.maxX,e.maxY,e.maxZ)}includeBounds(e){return this.setMinMax(Math.min(this.minX,e.minX),Math.min(this.minY,e.minY),Math.min(this.minZ,e.minZ),Math.max(this.maxX,e.maxX),Math.max(this.maxY,e.maxY),Math.max(this.maxZ,e.maxZ))}constrainBounds(e){return this.setMinMax(Math.max(this.minX,e.minX),Math.max(this.minY,e.minY),Math.max(this.minZ,e.minZ),Math.min(this.maxX,e.maxX),Math.min(this.maxY,e.maxY),Math.min(this.maxZ,e.maxZ))}addCoordinates(e,t,i){return this.setMinMax(Math.min(this.minX,e),Math.min(this.minY,t),Math.min(this.minZ,i),Math.max(this.maxX,e),Math.max(this.maxY,t),Math.max(this.maxZ,i))}addPoint(e){return this.addCoordinates(e.x,e.y,e.z)}roundOut(){return this.setMinMax(Math.floor(this.minX),Math.floor(this.minY),Math.floor(this.minZ),Math.ceil(this.maxX),Math.ceil(this.maxY),Math.ceil(this.maxZ))}roundIn(){return this.setMinMax(Math.ceil(this.minX),Math.ceil(this.minY),Math.ceil(this.minZ),Math.floor(this.maxX),Math.floor(this.maxY),Math.floor(this.maxZ))}transform(e){if(this.isEmpty())return this;if(e.isIdentity())return this;let t=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,s=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY;const o=new bl(0,0,0);function l(e){t=Math.min(t,e.x),i=Math.min(i,e.y),n=Math.min(n,e.z),r=Math.max(r,e.x),s=Math.max(s,e.y),a=Math.max(a,e.z)}return l(e.multiplyVector3(o.setXYZ(this.minX,this.minY,this.minZ))),l(e.multiplyVector3(o.setXYZ(this.minX,this.maxY,this.minZ))),l(e.multiplyVector3(o.setXYZ(this.maxX,this.minY,this.minZ))),l(e.multiplyVector3(o.setXYZ(this.maxX,this.maxY,this.minZ))),l(e.multiplyVector3(o.setXYZ(this.minX,this.minY,this.maxZ))),l(e.multiplyVector3(o.setXYZ(this.minX,this.maxY,this.maxZ))),l(e.multiplyVector3(o.setXYZ(this.maxX,this.minY,this.maxZ))),l(e.multiplyVector3(o.setXYZ(this.maxX,this.maxY,this.maxZ))),this.setMinMax(t,i,n,r,s,a)}dilate(e){return this.dilateXYZ(e,e,e)}dilateX(e){return this.setMinMax(this.minX-e,this.minY,this.minZ,this.maxX+e,this.maxY,this.maxZ)}dilateY(e){return this.setMinMax(this.minX,this.minY-e,this.minZ,this.maxX,this.maxY+e,this.maxZ)}dilateZ(e){return this.setMinMax(this.minX,this.minY,this.minZ-e,this.maxX,this.maxY,this.maxZ+e)}dilateXYZ(e,t,i){return this.setMinMax(this.minX-e,this.minY-t,this.minZ-i,this.maxX+e,this.maxY+t,this.maxZ+i)}erode(e){return this.dilate(-e)}erodeX(e){return this.dilateX(-e)}erodeY(e){return this.dilateY(-e)}erodeZ(e){return this.dilateZ(-e)}erodeXYZ(e,t,i){return this.dilateXYZ(-e,-t,-i)}shiftX(e){return this.setMinMax(this.minX+e,this.minY,this.minZ,this.maxX+e,this.maxY,this.maxZ)}shiftY(e){return this.setMinMax(this.minX,this.minY+e,this.minZ,this.maxX,this.maxY+e,this.maxZ)}shiftZ(e){return this.setMinMax(this.minX,this.minY,this.minZ+e,this.maxX,this.maxY,this.maxZ+e)}shiftXYZ(e,t,i){return this.setMinMax(this.minX+e,this.minY+t,this.minZ+i,this.maxX+e,this.maxY+t,this.maxZ+i)}shift(e){return this.shiftXYZ(e.x,e.y,e.z)}static cuboid(e,t,i,n,r,s){return new zB(e,t,i,e+n,t+r,i+s)}static point(e,t,i){return new zB(e,t,i,e,t,i)}}zB.prototype.isBounds=!0,zB.prototype.dimension=3,rl.register("Bounds3",zB),cy.mixInto(zB,{initialize:zB.prototype.setMinMax}),zB.NOTHING=new zB(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),zB.EVERYTHING=new zB(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),zB.Bounds3IO=new el("Bounds3IO",{valueType:zB,documentation:"a 3-dimensional bounds (bounding box)",stateSchema:{minX:il,minY:il,minZ:il,maxX:il,maxY:il,maxZ:il},toStateObject:e=>({minX:e.minX,minY:e.minY,minZ:e.minZ,maxX:e.maxX,maxY:e.maxY,maxZ:e.maxZ}),fromStateObject:e=>new zB(e.minX,e.minY,e.minZ,e.maxX,e.maxY,e.maxZ)});class UB{constructor(e){this.inclusions=e}size(){return this.inclusions.length}includes(e){return this.inclusions[e]}apply(e){return e.filter((e,t)=>this.inclusions[t])}inverted(){return new UB(this.inclusions.map(e=>!e))}getIncludedIndices(){return _.range(0,this.size()).filter(e=>this.inclusions[e])}toString(){return`C[${this.inclusions.map(e=>e?"1":"0").join("")}]`}equals(e){return this.inclusions.length===e.inclusions.length&&_.isEqual(this.inclusions,e.inclusions)}static empty(e){return new UB(_.range(0,e).map(()=>!1))}static full(e){return new UB(_.range(0,e).map(()=>!0))}static combinations(e){const t=[],i=[];return function n(r){r===e?t.push(new UB(i.slice())):(i.push(!1),n(r+1),i.pop(),i.push(!0),n(r+1),i.pop())}(0),t}static forEachCombination(e,t){const i=[];!function n(r){r===e.length?t(i):(n(r+1),i.push(e[r]),n(r+1),i.pop())}(0)}static combinationsOf(e){const t=[];return UB.forEachCombination(e,e=>{t.push(e.slice())}),t}}rl.register("Combination",UB);class WB{constructor(e){this.points=e.slice();for(let t=0;t<this.points.length-2;t++){const e=this.points[t],i=this.points[t+1],n=this.points[t+2];fl.arePointsCollinear(e,i,n)&&(this.points.splice(t+1,1),t--)}}findMatchingPair(e){let t=0;for(;t<this.points.length-2&&this.points[t+1].x<e;)t++;return[this.points[t],this.points[t+1]]}evaluate(e){if(1===this.points.length)return this.points[0].y;{const[t,i]=this.findMatchingPair(e);return t.x===e?t.y:i.x===e?i.y:fl.linear(t.x,i.x,t.y,i.y,e)}}getCombinedXValues(e){return WB.sortedUniqueEpsilon(this.points.map(e=>e.x).concat(e.points.map(e=>e.x)))}getIntersectedXValues(e){const t=this.getCombinedXValues(e),i=[];for(let r=0;r<t.length-1;r++){const n=t[r],s=t[r+1],a=fl.lineLineIntersection(new al(n,this.evaluate(n)),new al(s,this.evaluate(s)),new al(n,e.evaluate(n)),new al(s,e.evaluate(s)));a&&(0===r||a.x>n)&&(r===t.length-2||a.x<s)&&i.push(a.x)}const n=WB.sortedUniqueEpsilon([...t,...i]);return[n[0]-1,...n,n[n.length-1]+1]}binaryXOperation(e,t,i){return new WB(i.map(i=>new al(i,t(this.evaluate(i),e.evaluate(i)))))}binaryPointwiseOperation(e,t){return this.binaryXOperation(e,t,this.getCombinedXValues(e))}binaryIntersectingOperation(e,t){return this.binaryXOperation(e,t,this.getIntersectedXValues(e))}plus(e){return this.binaryPointwiseOperation(e,(e,t)=>e+t)}minus(e){return this.binaryPointwiseOperation(e,(e,t)=>e-t)}min(e){return this.binaryIntersectingOperation(e,Math.min)}max(e){return this.binaryIntersectingOperation(e,Math.max)}withXValues(e){return new WB(e.map(e=>new al(e,this.evaluate(e))))}inverted(){const e=this.points.map(e=>new al(e.y,e.x));return e.length>1&&e[0].x>e[1].x&&e.reverse(),new WB(e)}static sum(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.reduce((e,t)=>e.plus(t))}static min(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.reduce((e,t)=>e.min(t))}static max(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.reduce((e,t)=>e.max(t))}static constant(e){return new WB([new al(0,e)])}static linear(e,t){return new WB([new al(0,t),new al(1,e+t)])}static sortedUniqueEpsilon(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e-10;e=_.sortBy(e);for(let i=0;i<e.length-1;i++)Math.abs(e[i]-e[i+1])<t&&(e.splice(i,1),i--);return e}}rl.register("CompletePiecewiseLinearFunction",WB);const XB=WB;const jB={grahamScan:(e,t)=>{if(e.length<=2)return e;let i=Number.POSITIVE_INFINITY,n=null;_.each(e,e=>{e.y<=i&&(e.y===i&&n?e.x<n.x&&(n=e):(i=e.y,n=e))}),(e=_.sortBy(e,e=>e.minus(n).angle)).splice(_.indexOf(e,n),1);const r=[n];return _.each(e,e=>{if(n.x!==e.x||n.y!==e.y){for(;i();)r.pop();r.push(e)}function i(){if(r.length<2)return!1;const i=(n=r[r.length-2],s=r[r.length-1],a=e,s.minus(n).crossScalar(a.minus(n)));var n,s,a;return t?i<0:i<=0}}),r}};rl.register("ConvexHull2",jB);class QB extends Fl{}_defineProperty(QB,"OVER_DAMPED",new(et=QB)),_defineProperty(QB,"UNDER_DAMPED",new et),_defineProperty(QB,"CRITICALLY_DAMPED",new et),_defineProperty(QB,"UNKNOWN",new et),_defineProperty(QB,"enumeration",new Xl(et));class KB{constructor(e,t,i,n,r){this.dampingConstant=t/e,this.angularFrequencySquared=i/e,this.discriminant=this.dampingConstant*this.dampingConstant-4*this.angularFrequencySquared,this.solutionType=QB.UNKNOWN,this.c1=0,this.c2=0,Math.abs(this.discriminant)<1e-5?(this.solutionType=QB.CRITICALLY_DAMPED,this.angularFrequency=Math.sqrt(this.angularFrequencySquared),this.c1=n,this.c2=r+this.angularFrequency*n):this.discriminant<0?(this.solutionType=QB.UNDER_DAMPED,this.frequency=.5*Math.sqrt(-this.discriminant),this.c1=n,this.c2=this.dampingConstant*n/(2*this.frequency)+r/this.frequency):(this.solutionType=QB.OVER_DAMPED,this.positiveRoot=.5*(-this.dampingConstant+Math.sqrt(this.discriminant)),this.negativeRoot=.5*(-this.dampingConstant-Math.sqrt(this.discriminant)),this.c2=(this.negativeRoot*n-r)/(this.negativeRoot-this.positiveRoot),this.c1=n-this.c2)}getValue(e){if(this.solutionType===QB.CRITICALLY_DAMPED)return(this.c1+this.c2*e)*Math.exp(-this.angularFrequency*e);if(this.solutionType===QB.UNDER_DAMPED){const t=this.frequency*e;return Math.exp(-this.dampingConstant/2*e)*(this.c1*Math.cos(t)+this.c2*Math.sin(t))}if(this.solutionType===QB.OVER_DAMPED)return this.c1*Math.exp(this.negativeRoot*e)+this.c2*Math.exp(this.positiveRoot*e);throw new Error("Unknown solution type?")}getDerivative(e){if(this.solutionType===QB.CRITICALLY_DAMPED)return Math.exp(-this.angularFrequency*e)*(this.c2-this.angularFrequency*(this.c1+this.c2*e));if(this.solutionType===QB.UNDER_DAMPED){const t=this.frequency*e,i=Math.cos(t),n=Math.sin(t),r=this.frequency*(this.c2*i-this.c1*n),s=.5*this.dampingConstant*(this.c1*i+this.c2*n);return Math.exp(-.5*this.dampingConstant*e)*(r-s)}if(this.solutionType===QB.OVER_DAMPED)return this.c1*this.negativeRoot*Math.exp(this.negativeRoot*e)+this.c2*this.positiveRoot*Math.exp(this.positiveRoot*e);throw new Error("Unknown solution type?")}}rl.register("DampedHarmonic",KB);const ZB=KB;class JB{constructor(e,t,i){let n;if(i=Po({},i),this.points=e,this.constraints=t,this.triangles=[],this.edges=[],this.convexHull=[],0===e.length)return;for(this.vertices=e.map((e,t)=>new $B(e,t)),n=0;n<this.constraints.length;n++){const e=this.constraints[n],t=e[0],i=e[1];this.vertices[t].constrainedVertices.push(this.vertices[i])}for(this.vertices.sort(JB.vertexComparison),n=0;n<this.vertices.length;n++){const e=this.vertices[n];e.sortedIndex=n;for(let t=e.constrainedVertices.length-1;t>=0;t--){const i=e.constrainedVertices[t];-1===i.sortedIndex&&(i.constrainedVertices.push(e),e.constrainedVertices.splice(t,1))}}this.bottomVertex=this.vertices[0],this.remainingVertices=this.vertices.slice(1);const r=Zl.NOTHING.copy();for(n=e.length-1;n>=0;n--)r.addPoint(e[n]);this.artificialMinVertex=new $B(new al(r.minX-.4*r.width,r.minY-.4*r.height),-1),this.artificialMaxVertex=new $B(new al(r.maxX+.4*r.width,r.minY-.4*r.height),-2),this.edges.push(new eD(this.artificialMinVertex,this.artificialMaxVertex)),this.edges.push(new eD(this.artificialMaxVertex,this.bottomVertex)),this.edges.push(new eD(this.bottomVertex,this.artificialMinVertex)),this.triangles.push(new tD(this.artificialMinVertex,this.artificialMaxVertex,this.bottomVertex,this.edges[1],this.edges[2],this.edges[0])),this.firstFrontEdge=this.edges[1],this.edges[1].connectAfter(this.edges[2]),this.firstHullEdge=this.edges[0]}step(){const e=this.remainingVertices.shift(),t=e.point.x;let i=this.firstFrontEdge;for(;i;){if(t>i.endVertex.point.x){const t=new eD(i.startVertex,e),n=new eD(e,i.endVertex);t.connectAfter(n),this.edges.push(t),this.edges.push(n),this.triangles.push(new tD(i.endVertex,i.startVertex,e,t,n,i)),this.reconnectFrontEdges(i,i,t,n),this.legalizeEdge(i),this.addHalfPiHeuristic(t,n),this.constrainEdges(e,t,n);break}if(t===i.endVertex.point.x){const t=i.nextEdge,n=i,r=i.endVertex,s=t.endVertex,a=n.startVertex,o=new eD(e,s),l=new eD(a,e),h=new eD(r,e);l.connectAfter(o),this.edges.push(o),this.edges.push(l),this.edges.push(h),this.triangles.push(new tD(s,r,e,h,o,t)),this.triangles.push(new tD(r,a,e,l,h,n)),this.reconnectFrontEdges(n,t,l,o),this.legalizeEdge(t),this.legalizeEdge(n),this.legalizeEdge(h),this.addHalfPiHeuristic(l,o),this.constrainEdges(e,l,o);break}i=i.nextEdge}}fillBorderTriangle(e,t,i,n,r){const s=new eD(i,r);return this.edges.push(s),this.triangles.push(new tD(r,n,i,e,s,t)),this.legalizeEdge(e),this.legalizeEdge(t),s}reconnectFrontEdges(e,t,i,n){const r=e.previousEdge,s=t.nextEdge;r?(r.disconnectAfter(),r.connectAfter(i)):this.firstFrontEdge=i,s&&(t.disconnectAfter(),n.connectAfter(s))}addHalfPiHeuristic(e,t){const i=e.endVertex;for(;e.previousEdge&&fl.triangleAreaSigned(i.point,e.startVertex.point,e.previousEdge.startVertex.point)>0&&i.point.minus(e.startVertex.point).angleBetween(e.previousEdge.startVertex.point.minus(e.startVertex.point))<Math.PI/2;){const t=e.previousEdge,n=new eD(t.startVertex,i);this.edges.push(n),this.triangles.push(new tD(i,e.startVertex,t.startVertex,t,n,e)),this.reconnectFrontEdges(t,e,n,n),this.legalizeEdge(t),this.legalizeEdge(e),e=n}for(;t.nextEdge&&fl.triangleAreaSigned(i.point,t.nextEdge.endVertex.point,t.endVertex.point)>0&&i.point.minus(t.endVertex.point).angleBetween(t.nextEdge.endVertex.point.minus(t.endVertex.point))<Math.PI/2;){const e=t.nextEdge,n=new eD(i,e.endVertex);this.edges.push(n),this.triangles.push(new tD(i,t.nextEdge.endVertex,t.endVertex,e,t,n)),this.reconnectFrontEdges(t,e,n,n),this.legalizeEdge(e),this.legalizeEdge(t),t=n}}constrainEdges(e,t,i){for(let n=0;n<e.constrainedVertices.length;n++){const r=e.constrainedVertices[n];if(r===t.startVertex||r===i.endVertex)break;const s=[],a=[];let o=null,l=null;const h=[],u=[];let c=JB.vertexProduct(e,t.startVertex,r)>0,d=JB.vertexProduct(e,i.endVertex,r)<0;if(!c&&!d){let i,n=t.startVertex;for(o=t.triangles[0];JB.vertexProduct(e,i=o.getEdgeOppositeFromVertex(e).getOtherVertex(n),r)<0;)o=o.getEdgeOppositeFromVertex(n).getOtherTriangle(o),n=i;if(o.hasVertex(r))break;h.push(o),l=o.getEdgeOppositeFromVertex(e),u.push(l),s.push(o.getEdgeOppositeFromVertex(n)),a.push(o.getEdgeOppositeFromVertex(l.getOtherVertex(n)))}for(;!c&&!d;)if(l.triangles.length>1){const t=l.getOtherTriangle(o);if(t.hasVertex(r)){h.push(t),s.push(t.getNextEdge(l)),a.push(t.getPreviousEdge(l));break}{let i;t.aEdge!==l&&t.aEdge.intersectsConstrainedEdge(e,r)?i=t.aEdge:t.bEdge!==l&&t.bEdge.intersectsConstrainedEdge(e,r)?i=t.bEdge:t.cEdge!==l&&t.cEdge.intersectsConstrainedEdge(e,r)&&(i=t.cEdge),t.getNextEdge(i)===l?s.push(t.getPreviousEdge(i)):a.push(t.getNextEdge(i)),l=i,u.push(l),o=t,h.push(o)}}else r.point.x<e.point.x?d=!0:c=!0;for(let e=0;e<h.length;e++){const t=h[e];rm(this.triangles,t),t.remove()}for(let e=0;e<u.length;e++)rm(this.edges,u[e]);const p=new eD(r,e);p.isConstrained=!0,this.edges.push(p),s.push(p),a.push(p),a.reverse(),window.triDebug&&window.triDebug(this),this.triangulatePolygon(s),this.triangulatePolygon(a)}}triangulatePolygon(e){for(;e.length>3;){for(let t=0;t<e.length;t++){e.length}for(let t=0;t<e.length;t++){const i=t<e.length-1?t+1:0,n=e[t],r=e[i],s=n.getSharedVertex(r),a=n.getOtherVertex(s),o=r.getOtherVertex(s);if(fl.triangleAreaSigned(a.point,s.point,o.point)<=0)continue;const l=o.point.minus(s.point),h=a.point.minus(s.point),u=l.dot(l),c=l.dot(h),d=h.dot(h),p=u*d-c*c;let m=e[0].getSharedVertex(e[e.length-1]),g=!1;for(let t=0;t<e.length;t++){const i=e[t].getOtherVertex(m);if(i!==s&&i!==a&&i!==o){const e=i.point.minus(s.point),t=l.dot(e),n=h.dot(e),r=(d*t-c*n)/p,a=(u*n-c*t)/p;if(r>=-1e-10&&a>=-1e-10&&r+a<1+1e-10){g=!0;break}}m=i}if(!g){const l=new eD(a,o);this.edges.push(l),this.triangles.push(new tD(a,s,o,r,l,n)),i>t?e.splice(t,2,l):(e.splice(t,1,l),e.splice(i,1)),window.triDebug&&window.triDebug(this)}}}3===e.length&&(this.triangles.push(new tD(e[0].getSharedVertex(e[1]),e[1].getSharedVertex(e[2]),e[0].getSharedVertex(e[2]),e[2],e[0],e[1])),window.triDebug&&window.triDebug(this))}finalize(){const e=[];let t=this.firstFrontEdge.nextEdge;for(;t&&t.nextEdge;)e.push(t),t=t.nextEdge;const i=this.firstFrontEdge,n=t;for(let o=0;o<e.length-1;o++){const t=e[o],i=e[o+1];if(fl.triangleAreaSigned(i.endVertex.point,t.endVertex.point,t.startVertex.point)>1e-10){const n=this.fillBorderTriangle(t,i,t.startVertex,t.endVertex,i.endVertex);e.splice(o,2,n),o=Math.max(o-2,-1),window.triDebug&&window.triDebug(this)}}this.firstFrontEdge=null;const r=[],s=[i];let a=i;for(;a!==n;){const e=a.triangles[0];e.remove(),rm(this.triangles,e);const t=e.getNonArtificialEdge();if(t){r.push(t);const i=t.getSharedVertex(a);a=e.getEdgeOppositeFromVertex(i)}else s.push(e.getEdgeOppositeFromVertex(a.endVertex)),a=e.getEdgeOppositeFromVertex(a.startVertex);s.push(a)}for(let o=0;o<s.length;o++)rm(this.edges,s[o]);window.triDebug&&window.triDebug(this);for(let o=0;o<r.length-1;o++){const e=r[o+1],t=r[o],i=e.getSharedVertex(t),n=e.getOtherVertex(i),s=t.getOtherVertex(i);if(fl.triangleAreaSigned(s.point,i.point,n.point)>1e-10){const a=this.fillBorderTriangle(e,t,n,i,s);r.splice(o,2,a),o=Math.max(o-2,-1),window.triDebug&&window.triDebug(this)}}for(let o=0;o<e.length;o++)this.convexHull.push(e[o].startVertex);this.convexHull.push(e[e.length-1].endVertex);for(let o=r.length-1;o>=1;o--)this.convexHull.push(r[o].getSharedVertex(r[o-1]))}legalizeEdge(e){if(!_.includes(this.edges,e)||2!==e.triangles.length||e.isConstrained)return;const t=e.triangles[0],i=e.triangles[1],n=t.getVertexOppositeFromEdge(e),r=i.getVertexOppositeFromEdge(e);if(fl.pointInCircleFromPoints(t.aVertex.point,t.bVertex.point,t.cVertex.point,r.point)||fl.pointInCircleFromPoints(i.aVertex.point,i.bVertex.point,i.cVertex.point,n.point)){t.remove(),i.remove(),rm(this.triangles,t),rm(this.triangles,i),rm(this.edges,e);const s=new eD(n,r);this.edges.push(s);const a=i.getEdgeOppositeFromVertex(i.getVertexBefore(r)),o=t.getEdgeOppositeFromVertex(t.getVertexAfter(n)),l=t.getEdgeOppositeFromVertex(t.getVertexBefore(n)),h=i.getEdgeOppositeFromVertex(i.getVertexAfter(r));this.triangles.push(new tD(n,r,t.getVertexBefore(n),a,o,s)),this.triangles.push(new tD(r,n,i.getVertexBefore(r),l,h,s)),this.legalizeEdge(a),this.legalizeEdge(o),this.legalizeEdge(l),this.legalizeEdge(h)}}static vertexComparison(e,t){return e=e.point,t=t.point,e.y<t.y?-1:e.y>t.y?1:e.x<t.x?-1:e.x>t.x?1:0}static vertexProduct(e,t,i){const n=t.point.minus(e.point),r=i.point.minus(e.point);return n.crossScalar(r)}}rl.register("DelaunayTriangulation",JB);class $B{constructor(e,t){this.point=e,this.index=t,this.sortedIndex=-1,this.constrainedVertices=[]}isArtificial(){return this.index<0}}class eD{constructor(e,t){this.startVertex=e,this.endVertex=t,this.triangles=[],this.nextEdge=null,this.previousEdge=null,this.isConstrained=!1}isArtificial(){return this.startVertex.isArtificial()||this.endVertex.isArtificial()}connectAfter(e){this.nextEdge=e,e.previousEdge=this}disconnectAfter(){this.nextEdge.previousEdge=null,this.nextEdge=null}addTriangle(e){this.triangles.push(e)}removeTriangle(e){rm(this.triangles,e)}getSharedTriangle(e){for(let t=0;t<this.triangles.length;t++){const i=this.triangles[t];for(let t=0;t<e.triangles.length;t++)if(e.triangles[t]===i)return i}throw new Error("No common triangle")}getSharedVertex(e){return this.startVertex===e.startVertex||this.startVertex===e.endVertex?this.startVertex:this.endVertex}getOtherVertex(e){return e===this.startVertex?this.endVertex:this.startVertex}getOtherTriangle(e){return this.triangles[0]===e?this.triangles[1]:this.triangles[0]}intersectsConstrainedEdge(e,t){return fl.lineSegmentIntersection(e.point.x,e.point.y,t.point.x,t.point.y,this.startVertex.point.x,this.startVertex.point.y,this.endVertex.point.x,this.endVertex.point.y)}}class tD{constructor(e,t,i,n,r,s){this.aVertex=e,this.bVertex=t,this.cVertex=i,this.aEdge=n,this.bEdge=r,this.cEdge=s,this.aEdge.addTriangle(this),this.bEdge.addTriangle(this),this.cEdge.addTriangle(this)}hasVertex(e){return this.aVertex===e||this.bVertex===e||this.cVertex===e}getVertexOppositeFromEdge(e){return e===this.aEdge?this.aVertex:e===this.bEdge?this.bVertex:this.cVertex}getEdgeOppositeFromVertex(e){return e===this.aVertex?this.aEdge:e===this.bVertex?this.bEdge:this.cEdge}getVertexBefore(e){return e===this.aVertex?this.cVertex:e===this.bVertex?this.aVertex:this.bVertex}getVertexAfter(e){return e===this.aVertex?this.bVertex:e===this.bVertex?this.cVertex:this.aVertex}getNonArtificialEdge(){return this.aEdge.isArtificial()?this.bEdge.isArtificial()?this.cEdge.isArtificial()?null:this.cEdge:this.bEdge:this.aEdge}getNextEdge(e){if(this.aEdge===e)return this.bEdge;if(this.bEdge===e)return this.cEdge;if(this.cEdge===e)return this.aEdge;throw new Error("illegal edge")}getPreviousEdge(e){if(this.aEdge===e)return this.cEdge;if(this.bEdge===e)return this.aEdge;if(this.cEdge===e)return this.bEdge;throw new Error("illegal edge")}isArtificial(){return this.aVertex.isArtificial()||this.bVertex.isArtificial()||this.cVertex.isArtificial()}remove(){this.aEdge.removeTriangle(this),this.bEdge.removeTriangle(this),this.cEdge.removeTriangle(this)}}class iD{constructor(e,t,i,n){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.a1=e,this.a2=t,this.b1=i,this.b2=n,this.clamp=r}evaluate(e){return nD(this.a1,this.a2,this.b1,this.b2,e,this.clamp)}inverse(e){return nD(this.b1,this.b2,this.a1,this.a2,e,this.clamp)}}const nD=(e,t,i,n,r,s)=>{let a=fl.linear(e,t,i,n,r);if(s){const e=Math.max(i,n),t=Math.min(i,n);a=fl.clamp(a,t,e)}return a};rl.register("LinearFunction",iD);const rD=Math.sqrt(.5),sD={Array:rl.FastArray,index3:(e,t)=>3*e+t,set3(e,t){t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8]},transpose3(e,t){const i=e[3],n=e[6],r=e[1],s=e[7],a=e[2],o=e[5];t[0]=e[0],t[1]=i,t[2]=n,t[3]=r,t[4]=e[4],t[5]=s,t[6]=a,t[7]=o,t[8]=e[8]},det3:e=>e[0]*e[4]*e[8]+e[1]*e[5]*e[6]+e[2]*e[3]*e[7]-e[2]*e[4]*e[6]-e[1]*e[3]*e[8]-e[0]*e[5]*e[7],mult3(e,t,i){const n=e[0]*t[0]+e[1]*t[3]+e[2]*t[6],r=e[0]*t[1]+e[1]*t[4]+e[2]*t[7],s=e[0]*t[2]+e[1]*t[5]+e[2]*t[8],a=e[3]*t[0]+e[4]*t[3]+e[5]*t[6],o=e[3]*t[1]+e[4]*t[4]+e[5]*t[7],l=e[3]*t[2]+e[4]*t[5]+e[5]*t[8],h=e[6]*t[0]+e[7]*t[3]+e[8]*t[6],u=e[6]*t[1]+e[7]*t[4]+e[8]*t[7],c=e[6]*t[2]+e[7]*t[5]+e[8]*t[8];i[0]=n,i[1]=r,i[2]=s,i[3]=a,i[4]=o,i[5]=l,i[6]=h,i[7]=u,i[8]=c},mult3LeftTranspose(e,t,i){const n=e[0]*t[0]+e[3]*t[3]+e[6]*t[6],r=e[0]*t[1]+e[3]*t[4]+e[6]*t[7],s=e[0]*t[2]+e[3]*t[5]+e[6]*t[8],a=e[1]*t[0]+e[4]*t[3]+e[7]*t[6],o=e[1]*t[1]+e[4]*t[4]+e[7]*t[7],l=e[1]*t[2]+e[4]*t[5]+e[7]*t[8],h=e[2]*t[0]+e[5]*t[3]+e[8]*t[6],u=e[2]*t[1]+e[5]*t[4]+e[8]*t[7],c=e[2]*t[2]+e[5]*t[5]+e[8]*t[8];i[0]=n,i[1]=r,i[2]=s,i[3]=a,i[4]=o,i[5]=l,i[6]=h,i[7]=u,i[8]=c},mult3RightTranspose(e,t,i){const n=e[0]*t[0]+e[1]*t[1]+e[2]*t[2],r=e[0]*t[3]+e[1]*t[4]+e[2]*t[5],s=e[0]*t[6]+e[1]*t[7]+e[2]*t[8],a=e[3]*t[0]+e[4]*t[1]+e[5]*t[2],o=e[3]*t[3]+e[4]*t[4]+e[5]*t[5],l=e[3]*t[6]+e[4]*t[7]+e[5]*t[8],h=e[6]*t[0]+e[7]*t[1]+e[8]*t[2],u=e[6]*t[3]+e[7]*t[4]+e[8]*t[5],c=e[6]*t[6]+e[7]*t[7]+e[8]*t[8];i[0]=n,i[1]=r,i[2]=s,i[3]=a,i[4]=o,i[5]=l,i[6]=h,i[7]=u,i[8]=c},mult3BothTranspose(e,t,i){const n=e[0]*t[0]+e[3]*t[1]+e[6]*t[2],r=e[0]*t[3]+e[3]*t[4]+e[6]*t[5],s=e[0]*t[6]+e[3]*t[7]+e[6]*t[8],a=e[1]*t[0]+e[4]*t[1]+e[7]*t[2],o=e[1]*t[3]+e[4]*t[4]+e[7]*t[5],l=e[1]*t[6]+e[4]*t[7]+e[7]*t[8],h=e[2]*t[0]+e[5]*t[1]+e[8]*t[2],u=e[2]*t[3]+e[5]*t[4]+e[8]*t[5],c=e[2]*t[6]+e[5]*t[7]+e[8]*t[8];i[0]=n,i[1]=r,i[2]=s,i[3]=a,i[4]=o,i[5]=l,i[6]=h,i[7]=u,i[8]=c},mult3Vector3(e,t,i){const n=e[0]*t.x+e[1]*t.y+e[2]*t.z,r=e[3]*t.x+e[4]*t.y+e[5]*t.z,s=e[6]*t.x+e[7]*t.y+e[8]*t.z;i.x=n,i.y=r,i.z=s},swapNegateColumn(e,t,i){const n=e[t],r=e[t+3],s=e[t+6];e[t]=e[i],e[t+3]=e[i+3],e[t+6]=e[i+6],e[i]=-n,e[i+3]=-r,e[i+6]=-s},setIdentity3(e){e[0]=e[4]=e[8]=1,e[1]=e[2]=e[3]=e[5]=e[6]=e[7]=0},setGivens3(e,t,i,n,r){this.setIdentity3(e),e[this.index3(n,n)]=t,e[this.index3(r,r)]=t,e[this.index3(n,r)]=i,e[this.index3(r,n)]=-i},preMult3Givens(e,t,i,n,r){const s=3*n,a=3*r,o=t*e[s+0]+i*e[a+0],l=t*e[a+0]-i*e[s+0],h=t*e[s+1]+i*e[a+1],u=t*e[a+1]-i*e[s+1],c=t*e[s+2]+i*e[a+2],d=t*e[a+2]-i*e[s+2];e[s+0]=o,e[a+0]=l,e[s+1]=h,e[a+1]=u,e[s+2]=c,e[a+2]=d},postMult3Givens(e,t,i,n,r){const s=t*e[n+0]+i*e[r+0],a=t*e[r+0]-i*e[n+0],o=t*e[n+3]+i*e[r+3],l=t*e[r+3]-i*e[n+3],h=t*e[n+6]+i*e[r+6],u=t*e[r+6]-i*e[n+6];e[n+0]=s,e[r+0]=a,e[n+3]=o,e[r+3]=l,e[n+6]=h,e[r+6]=u},applyJacobi3(e,t,i,n){const r=e[3*i+i],s=e[3*i+n],a=e[3*n+n],o=s*s;let l=r-a;l*=l;const h=o<l,u=1/Math.sqrt(o+l),c=h?u*(r-a):rD,d=h?u*s:rD;this.preMult3Givens(e,c,d,i,n),this.postMult3Givens(e,c,d,i,n),this.preMult3Givens(t,c,d,i,n)},jacobiIteration3(e,t,i){for(let n=0;n<i;n++)this.applyJacobi3(e,t,0,1),this.applyJacobi3(e,t,0,2),this.applyJacobi3(e,t,1,2)},qrAnnihilate3(e,t,i,n){let r,s;const a=t[this.index3(n,n)],o=t[this.index3(i,n)],l=a*a,h=o*o;if(l+h<1e-10)r=a>0?1:0,s=0;else{const e=1/Math.sqrt(l+h);r=e*a,s=e*o}this.preMult3Givens(t,r,s,n,i),this.postMult3Givens(e,r,s,n,i)},svd3(e,t,i,n,r){const s=i,a=r,o=n;this.mult3LeftTranspose(e,e,o),this.setIdentity3(s),this.jacobiIteration3(o,s,t),this.transpose3(s,a),this.mult3(e,a,o);let l,h=o[0]*o[0]+o[3]*o[3]+o[6]*o[6],u=o[1]*o[1]+o[4]*o[4]+o[7]*o[7],c=o[2]*o[2]+o[5]*o[5]+o[8]*o[8];h<u&&(l=h,h=u,u=l,this.swapNegateColumn(o,0,1),this.swapNegateColumn(a,0,1)),h<c&&(l=h,h=c,c=l,this.swapNegateColumn(o,0,2),this.swapNegateColumn(a,0,2)),u<c&&(this.swapNegateColumn(o,1,2),this.swapNegateColumn(a,1,2)),this.setIdentity3(s),this.qrAnnihilate3(s,o,1,0),this.qrAnnihilate3(s,o,2,0),this.qrAnnihilate3(s,o,2,1);s[0]*s[0]+s[1]*s[1]+s[2]*s[2]<.001&&(s[0]=1),s[3]*s[3]+s[4]*s[4]+s[5]*s[5]<.001&&(s[4]=1),s[6]*s[6]+s[7]*s[7]+s[8]*s[8]<.001&&(s[8]=1)},setVectors3(e,t){const i=e.length;for(let n=0;n<i;n++){const r=e[n];t[n]=r.x,t[n+i]=r.y,t[n+2*i]=r.z}},getColumnVector3(e,t,i,n,r){r.x=i[n],r.y=i[n+t],r.z=i[n+2*t]},index:(e,t,i,n)=>t*i+n,transpose(e,t,i,n){for(let r=0;r<e;r++)for(let s=0;s<t;s++)n[e*s+r]=i[t*r+s]},mult(e,t,i,n,r,s){for(let a=0;a<e;a++)for(let o=0;o<i;o++){let l=0;for(let s=0;s<t;s++)l+=n[this.index(e,t,a,s)]*r[this.index(t,i,s,o)];s[this.index(e,i,a,o)]=l}},multRightTranspose(e,t,i,n,r,s){for(let a=0;a<e;a++)for(let o=0;o<i;o++){let l=0;for(let s=0;s<t;s++)l+=n[this.index(e,t,a,s)]*r[this.index(i,t,o,s)];s[this.index(e,i,a,o)]=l}},permuteColumns(e,t,i,n,r){for(let s=0;s<t;s++){const a=n.indices[s];for(let n=0;n<e;n++)r[this.index(e,t,n,s)]=i[this.index(e,t,n,a)]}}};rl.register("MatrixOps3",sD);class aD{constructor(e,t,i,n){this.setXYZW(e,t,i,n)}setXYZW(e,t,i,n){this.x=void 0!==e?e:0,this.y=void 0!==t?t:0,this.z=void 0!==i?i:0,this.w=void 0!==n?n:1}plus(e){return new aD(this.x+e.x,this.y+e.y,this.z+e.z,this.w+e.w)}timesScalar(e){return new aD(this.x*e,this.y*e,this.z*e,this.w*e)}timesQuaternion(e){return new aD(this.x*e.w-this.z*e.y+this.y*e.z+this.w*e.x,-this.x*e.z+this.y*e.w+this.z*e.x+this.w*e.y,this.x*e.y-this.y*e.x+this.z*e.w+this.w*e.z,-this.x*e.x-this.y*e.y-this.z*e.z+this.w*e.w)}timesVector3(e){return 0===e.magnitude?new bl(0,0,0):new bl(this.w*this.w*e.x+2*this.y*this.w*e.z-2*this.z*this.w*e.y+this.x*this.x*e.x+2*this.y*this.x*e.y+2*this.z*this.x*e.z-this.z*this.z*e.x-this.y*this.y*e.x,2*this.x*this.y*e.x+this.y*this.y*e.y+2*this.z*this.y*e.z+2*this.w*this.z*e.x-this.z*this.z*e.y+this.w*this.w*e.y-2*this.x*this.w*e.z-this.x*this.x*e.y,2*this.x*this.z*e.x+2*this.y*this.z*e.y+this.z*this.z*e.z-2*this.w*this.y*e.x-this.y*this.y*e.z+2*this.w*this.x*e.y-this.x*this.x*e.z+this.w*this.w*e.z)}getMagnitude(){return Math.sqrt(this.magnitudeSquared)}get magnitude(){return this.getMagnitude()}getMagnitudeSquared(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}get magnitudeSquared(){return this.getMagnitudeSquared()}normalized(){const e=this.magnitude;return this.timesScalar(1/e)}negated(){return new aD(-this.x,-this.y,-this.z,-this.w)}toRotationMatrix(){const e=this.magnitudeSquared,t=1===e?2:e>0?2/e:0,i=this.x*this.x*t,n=this.x*this.y*t,r=this.x*this.z*t,s=this.w*this.x*t,a=this.y*this.y*t,o=this.y*this.z*t,l=this.w*this.y*t,h=this.z*this.z*t,u=this.w*this.z*t;return Mh.pool.fetch().columnMajor(1-(a+h),n+u,r-l,n-u,1-(i+h),o+s,r+l,o-s,1-(i+a))}static fromEulerAngles(e,t,i){const n=Math.sin(.5*i),r=Math.cos(.5*i),s=Math.sin(.5*t),a=Math.cos(.5*t),o=Math.sin(.5*e),l=Math.cos(.5*e),h=a*r,u=s*n,c=a*n,d=s*r;return new aD(h*o+u*l,d*l+c*o,c*l-d*o,h*l-u*o)}static fromRotationMatrix(e){const t=e.m00(),i=e.m01(),n=e.m02(),r=e.m10(),s=e.m11(),a=e.m12(),o=e.m20(),l=e.m21(),h=e.m22(),u=t+s+h;let c;return u>=0?(c=Math.sqrt(u+1),new aD(.5*(l-a)/c,.5*(n-o)/c,.5*(r-i)/c,.5*c)):t>s&&t>h?(c=Math.sqrt(1+t-s-h),new aD(.5*c,.5*(r+i)/c,.5*(n+o)/c,.5*(l-a)/c)):s>h?(c=Math.sqrt(1+s-t-h),new aD(.5*(r+i)/c,.5*c,.5*(l+a)/c,.5*(n-o)/c)):(c=Math.sqrt(1+h-t-s),new aD(.5*(n+o)/c,.5*(l+a)/c,.5*c,.5*(r-i)/c))}static getRotationQuaternion(e,t){return aD.fromRotationMatrix(Mh.rotateAToB(e,t))}static slerp(e,t,i){if(e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w)return e;let n=e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w;n<0&&(t=t.negated(),n=-n);let r=1-i,s=i;if(1-n>.1){const e=Math.acos(n),t=1/Math.sin(e);r=Math.sin((1-i)*e)*t,s=Math.sin(i*e)*t}return new aD(r*e.x+s*t.x,r*e.y+s*t.y,r*e.z+s*t.z,r*e.w+s*t.w)}}aD.prototype.isQuaternion=!0,rl.register("Quaternion",aD),cy.mixInto(aD,{initialize:aD.prototype.setXYZW});class oD extends Zl{constructor(e,t,i,n){super(e,t,e+i,t+n)}}rl.register("Rectangle",oD);class lD{constructor(e,t){this.center=e,this.radius=t}intersect(e,t){const i=e.direction,n=e.position,r=n.minus(this.center),s=i.dot(r),a=4*s*s-4*(r.magnitudeSquared-this.radius*this.radius);if(a<t)return null;const o=i.dot(this.center)-i.dot(n),l=Math.sqrt(a)/2,h=o-l,u=o+l;if(u<t)return null;const c=e.pointAtDistance(u),d=c.minus(this.center).normalized();if(h<t)return{distance:u,hitPoint:c,normal:d.negated(),fromOutside:!1};{const t=e.pointAtDistance(h),i=t.minus(this.center).normalized();return{distance:h,hitPoint:t,normal:i,fromOutside:!0}}}intersections(e,t){const i=e.direction,n=e.position,r=n.minus(this.center),s=i.dot(r),a=4*s*s-4*(r.magnitudeSquared-this.radius*this.radius);if(a<t)return[];const o=i.dot(this.center)-i.dot(n),l=Math.sqrt(a)/2,h=o-l,u=o+l;if(u<t)return[];const c=e.pointAtDistance(u),d=c.minus(this.center).normalized(),p=e.pointAtDistance(h),m=p.minus(this.center).normalized(),g={distance:u,hitPoint:c,normal:d.negated(),fromOutside:!1},f={distance:h,hitPoint:p,normal:m,fromOutside:!0};return h<t?[g,f]:[f,g]}}rl.register("Sphere3",lD);const hD=new Ch;class uD{constructor(e){this.matrix=Ch.IDENTITY.copy(),this.inverse=Ch.IDENTITY.copy(),this.matrixTransposed=Ch.IDENTITY.copy(),this.inverseTransposed=Ch.IDENTITY.copy(),this.inverseValid=!0,this.transposeValid=!0,this.inverseTransposeValid=!0,this.changeEmitter=new np,e&&this.setMatrix(e)}setMatrix(e){this.matrix.set(e),this.invalidate()}invalidate(){this.inverseValid=!1,this.transposeValid=!1,this.inverseTransposeValid=!1,this.changeEmitter.emit()}prepend(e){hD.set(this.matrix),this.matrix.set(e),this.matrix.multiplyMatrix(hD),this.invalidate()}append(e){this.matrix.multiplyMatrix(e),this.invalidate()}prependTransform(e){this.prepend(e.matrix)}appendTransform(e){this.append(e.matrix)}applyToCanvasContext(e){e.setTransform(this.matrix.m00(),this.matrix.m10(),this.matrix.m01(),this.matrix.m11(),this.matrix.m03(),this.matrix.m13())}copy(){const e=new uD(this.matrix);e.inverse=this.inverse,e.matrixTransposed=this.matrixTransposed,e.inverseTransposed=this.inverseTransposed,e.inverseValid=this.inverseValid,e.transposeValid=this.transposeValid,e.inverseTransposeValid=this.inverseTransposeValid}getMatrix(){return this.matrix}getInverse(){return this.inverseValid||(this.inverseValid=!0,this.inverse.set(this.matrix),this.inverse.invert()),this.inverse}getMatrixTransposed(){return this.transposeValid||(this.transposeValid=!0,this.matrixTransposed.set(this.matrix),this.matrixTransposed.transpose()),this.matrixTransposed}getInverseTransposed(){return this.inverseTransposeValid||(this.inverseTransposeValid=!0,this.inverseTransposed.set(this.getInverse()),this.inverseTransposed.transpose()),this.inverseTransposed}isIdentity(){return this.matrix.type===Ch.Types.IDENTITY}isFinite(){return this.matrix.isFinite()}transformPosition3(e){return this.matrix.timesVector3(e)}transformDelta3(e){return this.matrix.timesRelativeVector3(e)}transformNormal3(e){return this.getInverse().timesTransposeVector3(e)}transformDeltaX(e){return this.transformDelta3(new bl(e,0,0)).x}transformDeltaY(e){return this.transformDelta3(new bl(0,e,0)).y}transformDeltaZ(e){return this.transformDelta3(new bl(0,0,e)).z}transformRay(e){return new Ru(this.transformPosition3(e.position),this.transformPosition3(e.position.plus(e.direction)).minus(this.transformPosition3(e.position)))}inversePosition3(e){return this.getInverse().timesVector3(e)}inverseDelta3(e){return this.inversePosition3(e).minus(this.inversePosition3(bl.ZERO))}inverseNormal3(e){return this.matrix.timesTransposeVector3(e)}inverseDeltaX(e){return this.inverseDelta3(new bl(e,0,0)).x}inverseDeltaY(e){return this.inverseDelta3(new bl(0,e,0)).y}inverseDeltaZ(e){return this.inverseDelta3(new bl(0,0,e)).z}inverseRay(e){return new Ru(this.inversePosition3(e.position),this.inversePosition3(e.position.plus(e.direction)).minus(this.inversePosition3(e.position)))}}rl.register("Transform4",uD);class cD{constructor(e){const t=e.slice();for(;t.length&&0===t[t.length-1];)t.pop();this.coefficients=t}plus(e){const t=[];for(let i=0;i<Math.max(this.coefficients.length,e.coefficients.length);i++)t.push(this.getCoefficient(i)+e.getCoefficient(i));return new cD(t)}minus(e){const t=[];for(let i=0;i<Math.max(this.coefficients.length,e.coefficients.length);i++)t.push(this.getCoefficient(i)-e.getCoefficient(i));return new cD(t)}times(e){const t=[];for(;t.length<this.coefficients.length+e.coefficients.length-1;)t.push(0);for(let i=0;i<this.coefficients.length;i++)for(let n=0;n<e.coefficients.length;n++)t[i+n]+=this.getCoefficient(i)*e.getCoefficient(n);return new cD(t)}dividedBy(e){let t=new cD([]),i=this;const n=e.degree,r=e.coefficients[e.coefficients.length-1];for(;i.degree>=n;){const s=cD.singleCoefficient(i.getCoefficient(i.degree)/r,i.degree-n);t=t.plus(s),i=i.minus(s.times(e))}return{quotient:t,remainder:i}}gcd(e){let t=this,i=e;for(;!i.isZero();){const e=i;i=t.dividedBy(i).remainder,t=e}return t}equals(e){return this.coefficients.length===e.coefficients.length&&this.coefficients.every((t,i)=>t===e.coefficients[i])}getCoefficient(e){return e<this.coefficients.length?this.coefficients[e]:0}get degree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients.length}getMonicPolynomial(){if(this.isZero())return this;{const e=this.coefficients[this.coefficients.length-1];return new cD(this.coefficients.map(t=>t/e))}}evaluate(e){let t=this.coefficients[this.coefficients.length-1];for(let i=this.coefficients.length-2;i>=0;i--)t=t*e+this.coefficients[i];return t}evaluateComplex(e){let t=Bd.real(this.coefficients[this.coefficients.length-1]);for(let i=this.coefficients.length-2;i>=0;i--)t=t.times(e).plus(Bd.real(this.coefficients[i]));return t}getRoots(){if(this.isZero()||0===this.degree)return[];if(1===this.degree)return[Bd.real(-this.coefficients[0]/this.coefficients[1])];if(0===this.coefficients[0]){const e=new cD(this.coefficients.slice(1)).getRoots();return e.some(e=>e.equalsEpsilon(Bd.real(0),1e-10))||e.push(Bd.real(0)),e}if(2===this.degree)return Bd.solveQuadraticRoots(Bd.real(this.coefficients[2]),Bd.real(this.coefficients[1]),Bd.real(this.coefficients[0]));if(3===this.degree)return Bd.solveCubicRoots(Bd.real(this.coefficients[3]),Bd.real(this.coefficients[2]),Bd.real(this.coefficients[1]),Bd.real(this.coefficients[0]));{const e=new Nd(this.degree,this.degree);for(let l=0;l<this.degree;l++)l<this.degree-1&&e.set(l+1,l,1),e.set(l,this.degree-1,-this.coefficients[l]/this.coefficients[this.degree]);console.log(e.toString());let t=e;const i=1e-13;for(let l=0;l<500;l++){const e=new Cd(t);if(t=e.getR().times(e.getQ()),l%10==0){let e=0;for(let i=0;i<this.degree;i++)for(let n=0;n<i;n++)e=Math.max(e,Math.abs(t.get(i,n)));if(e<i||l>1e3)break}}const n=_.range(0,this.degree).map(e=>Bd.real(t.get(e,e))),r=new Sd(e),s=r.getRealEigenvalues(),a=r.getImagEigenvalues(),o=_.range(0,this.degree).map(e=>new Bd(s[e],a[e]));return n||o}}static singleCoefficient(e,t){const i=[];for(;i.length<t;)i.push(0);return i.push(e),new cD(i)}}_defineProperty(cD,"ZERO",new cD([])),rl.register("UnivariatePolynomial",cD);const dD=new bt("griddle"),pD=QueryStringMachine.getAll({backgroundColor:{type:"string",defaultValue:"white"},slider:{type:"string",defaultValue:null},component:{type:"string",defaultValue:null},fontFamily:{type:"string",defaultValue:"Arial"}});JI.register("sceneryPhetQueryParameters",pD);const mD=pD;class gD extends nf{constructor(e){let t;t="number"==typeof e||"string"==typeof e?{size:e}:e||{},t=No({family:mD.fontFamily},t),t.family=t.family+", sans-serif",super(t)}}JI.register("PhetFont",gD);const fD=new bt("sun"),yD={fill:"white",stroke:"black",lineWidth:1,lineDash:[],xMargin:5,yMargin:5,cornerRadius:10,resize:!0,backgroundPickable:!0,excludeInvisibleChildrenFromBounds:!0,align:"left",minWidth:0,minHeight:0};class ED extends(Iv(cv)){constructor(e,t){const i=Ro()({},yD,t);super(),this._content=e,this._backgroundContainer=new cv,this._background=new xA(0,0,1,1,{lineWidth:i.lineWidth,pickable:i.backgroundPickable,lineDash:i.lineDash,cornerRadius:i.cornerRadius}),this.setStroke(i.stroke),this.setFill(i.fill),this.addChild(this._backgroundContainer),this.addChild(e),this.constraint=new vD(this,i),this.constraint.updateLayout(),this.constraint.enabled=i.resize,this.mutate(i)}getStroke(){return this._background.stroke}get stroke(){return this.getStroke()}set stroke(e){this.setStroke(e)}setStroke(e){this._background.stroke=e,this.constraint&&this.constraint.updateLayoutAutomatically()}getFill(){return this._background.fill}get fill(){return this.getFill()}set fill(e){this.setFill(e)}setFill(e){this._background.fill=e}setExcludeInvisibleChildrenFromBounds(e){super.setExcludeInvisibleChildrenFromBounds(e),this.constraint.updateLayoutAutomatically()}}_defineProperty(ED,"DEFAULT_PANEL_OPTIONS",yD);class vD extends gw{constructor(e,t){super(e),this.panel=e,this.minWidth=t.minWidth,this.minHeight=t.minHeight,this.xMargin=t.xMargin,this.yMargin=t.yMargin,this.lineWidth=t.lineWidth,this.align=t.align,this.panel.localPreferredWidthProperty.lazyLink(this._updateLayoutListener),this.panel.localPreferredHeightProperty.lazyLink(this._updateLayoutListener),this.addNode(e._content)}layout(){super.layout();const e=this.panel,t=e._content,i=e._background,n=null===e.stroke?0:this.lineWidth,r=e.isChildIncludedInLayout(t);if(e._backgroundContainer.children=r?[i]:[],!r)return e.localMinimumWidth=null,void(e.localMinimumHeight=null);const s=xv(t)&&null!==t.minimumWidth?t.minimumWidth:t.width,a=Vv(t)&&null!==t.minimumHeight?t.minimumHeight:t.height,o=Math.max(this.minWidth,s+2*this.xMargin)+n,l=Math.max(this.minHeight,a+2*this.yMargin)+n,h=Math.max(o,e.localPreferredWidth||0),u=Math.max(l,e.localPreferredHeight||0);xv(t)&&null!==e.localPreferredWidth&&(t.preferredWidth=h-n-2*this.xMargin),Vv(t)&&null!==e.localPreferredHeight&&(t.preferredHeight=u-n-2*this.yMargin),i.setRect(0,0,h-n,u-n),"center"===this.align?t.center=i.center:"left"===this.align?(t.left=i.centerX-i.rectWidth/2+this.xMargin,t.centerY=i.centerY):(t.right=i.centerX+i.rectWidth/2-this.xMargin,t.centerY=i.centerY),e.localMinimumWidth=o,e.localMinimumHeight=l}dispose(){this.panel.localPreferredWidthProperty.unlink(this._updateLayoutListener),this.panel.localPreferredHeightProperty.unlink(this._updateLayoutListener),super.dispose()}}fD.register("Panel",ED);class AD extends cv{constructor(e,t,i){i=Po({borderColor:"black",borderWidth:1,barWidth:15,showOffScaleArrow:!0,offScaleArrowFill:"#bbb",offScaleArrowOffset:5,invalidBarColor:"gray",scaleProperty:new zb(1)},i),super(),this.barEntries=e,this.totalRangeProperty=t,this.borderWidth=i.borderWidth,this.scaleProperty=i.scaleProperty,this.showOffScaleArrow=i.showOffScaleArrow,this.offScaleArrowOffset=i.offScaleArrowOffset,this.invalidBarColor=i.invalidBarColor,this.bars=this.barEntries.map(e=>new xA(0,0,i.barWidth,0,{centerX:0})),this.borderRectangle=new xA(0,0,i.barWidth+2*i.borderWidth,0,{fill:i.borderColor,centerX:0}),this.offScaleArrow=new eB(0,0,0,i.barWidth,{fill:i.offScaleArrowFill,stroke:"black",headHeight:i.barWidth/2,headWidth:i.barWidth,tailWidth:3*i.barWidth/5,centerX:0});const n=[this.borderRectangle].concat(this.bars);i.showOffScaleArrow&&n.push(this.offScaleArrow),i.children=n,this.mutate(i),this.update()}update(){const e=this.scaleProperty.value,t=this.offScaleArrow.height+this.offScaleArrowOffset;let i=this.totalRangeProperty.value;i=new Hl(i.min<0?i.min+this.borderWidth:i.min,i.max-this.borderWidth),this.showOffScaleArrow&&(i=new Hl(i.min<0?i.min+t:i.min,i.max-t));let n=0,r=!1;for(let a=0;a<this.barEntries.length;a++){const t=this.barEntries[a].property.value*e;t<0&&(r=!0),n+=t}let s=0;if(r&&this.barEntries.length>1){s=i.constrainValue(n);const e=this.bars[0];e.fill=this.invalidBarColor,bD(e,0,s),e.visible=!0;for(let t=1;t<this.barEntries.length;t++)this.bars[t].visible=!1}else for(let a=0;a<this.barEntries.length;a++){const t=this.barEntries[a],n=this.bars[a];n.fill=t.color;const r=t.property.value*e,o=i.constrainValue(s+r);o!==s?(bD(n,s,o),n.visible=!0):n.visible=!1,s=o}s===i.max?(this.offScaleArrow.visible=!0,this.offScaleArrow.rotation=0,this.offScaleArrow.y=i.max+this.offScaleArrowOffset):s===i.min&&s<0?(this.offScaleArrow.visible=!0,this.offScaleArrow.rotation=Math.PI,this.offScaleArrow.y=i.min-this.offScaleArrowOffset):this.offScaleArrow.visible=!1,bD(this.borderRectangle,0,s+this.borderWidth*Math.sign(s)),this.borderRectangle.visible=0!==s}}function bD(e,t,i){e.rectY=Math.min(t,i),e.rectHeight=Math.abs(t-i)}dD.register("BarNode",AD);const SD=AD;class _D extends cv{constructor(e,t,i){i=Po({barSpacing:12,xAxisOptions:{stroke:"black",lineWidth:1,minPadding:8,maxExtension:5},barOptions:{},barLabelOptions:null,labelBackgroundColor:Hg.TRANSPARENT},i),super(),this.bars=e,i.barOptions=Po({},i.barOptions,{rotation:Math.PI}),i.barLabelOptions=Po({font:new gD({size:12,weight:"bold"}),rotation:-Math.PI/2,maxWidth:40},i.barLabelOptions),this.barNodes=e.map(e=>{const n=Po({offScaleArrowFill:void 0===e.offScaleArrowFill?e.entries.length>1?"#bbb":e.entries[0].color:e.offScaleArrowFill},i.barOptions);return new SD(e.entries,t,n)}),this.barLabelNodes=e.map(e=>{const t=new aT({spacing:4});if(e.labelString){const n=new CT(e.labelString,Po({},i.barLabelOptions,{fill:e.labelColor||"black"})),r=new ED(n,{stroke:null,fill:i.labelBackgroundColor,cornerRadius:3,xMargin:0,yMargin:2});t.addChild(r)}return e.labelNode&&t.addChild(e.labelNode),t});const n=new sT({spacing:i.barSpacing,align:"origin",children:this.barNodes}),r=new cv({children:this.barLabelNodes});for(let l=0;l<e.length;l++)void 0!==r.children[l].children[0]&&(r.children[l].centerX=this.barNodes[l].centerX,r.children[l].top=3);this.addChild(n),this.addChild(r);const s=new SA(-i.xAxisOptions.minPadding,0,n.width+i.xAxisOptions.maxExtension,0,i.xAxisOptions);this.addChild(s);const a=new eB(0,0,0,-t.value.max,{tailWidth:.5,headHeight:9,headWidth:8});this.addChild(a);const o=e=>{a.setTailAndTip(-i.xAxisOptions.minPadding,0,-i.xAxisOptions.minPadding,-e.max),this.localBounds=this.localBounds.withMinY(Math.min(a.bottom,-e.max)).withMaxY(Math.max(i.xAxisOptions.lineWidth/2,-e.min,r.bottom))};t.link(o),this.mutate(i),this.disposeBarChartNode=()=>{t.unlink(o)}}dispose(){this.disposeBarChartNode(),super.dispose()}update(){for(let e=0;e<this.barNodes.length;e++)this.barNodes[e].update()}}dD.register("BarChartNode",_D);class xD{constructor(e){this.data=[],this.emitter=new hb,e=Po({color:new Hg("black"),lineWidth:1,lineJoin:"miter",radius:2,visibleProperty:new gy(!0)},e),this.color=e.color,this.lineWidth=e.lineWidth,this.lineJoin=e.lineJoin,this.radius=e.radius,this.visibleProperty=e.visibleProperty}shiftData(){this.data.shift(),this.emitter.emit()}getLength(){return this.data.length}addDynamicSeriesListener(e){this.emitter.addListener(e)}removeDynamicSeriesListener(e){this.emitter.removeListener(e)}clear(){this.data.length=0,this.emitter.emit()}addXYDataPoint(e,t){this.addDataPoint(new al(e,t))}addDataPoint(e){this.data.push(e),this.emitter.emit()}getDataPoint(e){return this.data[e]}hasData(){return this.data.length>0}removeDataPoints(e){e.forEach(e=>{this.data.slice().forEach((t,i)=>{e.equals(t)&&this.data.splice(i,1)})}),this.emitter.emit()}removeDataPointsAtX(e){e.forEach(e=>{this.data.slice().forEach((t,i)=>{e===t.x&&this.data.splice(i,1)})}),this.emitter.emit()}}dD.register("DynamicSeries",xD);const wD=xD,TD=Oo.byKeys(["SCATTER","LINE"]);class PD extends vA{constructor(e,t,i,n,r){r=Po({plotStyle:TD.LINE},r),super({canvasBounds:i}),this.modelViewTransformProperty=n,this.plotStyle=r.plotStyle,this.dynamicSeries=e;const s=e=>{this.visible=e};e.visibleProperty.link(s);const a=()=>{this.invalidatePaint()};e.addDynamicSeriesListener(a),n.link(a),e.visibleProperty.link(a),this.disposeDynamicSeriesNode=()=>{e.removeDynamicSeriesListener(a),e.visibleProperty.unlink(s),e.visibleProperty.unlink(a),n.unlink(a)}}paintCanvas(e){this.dynamicSeries.visibleProperty.get()&&(this.plotStyle===TD.LINE?this.drawDataLine(e):this.drawDataScatter(e))}drawDataScatter(e){const t=this.dynamicSeries.color instanceof Hg?this.dynamicSeries.color.toCSS():this.dynamicSeries.color;e.fillStyle=t;for(let i=0;i<this.dynamicSeries.getLength();i++){e.beginPath();const t=this.modelViewTransformProperty.get().modelToViewPosition(this.dynamicSeries.getDataPoint(i));e.arc(t.x,t.y,this.dynamicSeries.radius,0,2*Math.PI),e.fill()}}drawDataLine(e){e.beginPath();const t=this.dynamicSeries.color instanceof Hg?this.dynamicSeries.color.toCSS():this.dynamicSeries.color;e.strokeStyle=t,e.lineWidth=this.dynamicSeries.lineWidth,e.lineJoin=this.dynamicSeries.lineJoin;let i=!0;const n=this.modelViewTransformProperty.get();for(let r=0;r<this.dynamicSeries.getLength();r++){const t=this.dynamicSeries.getDataPoint(r);if(isNaN(t.y))i=!0;else{const r=n.modelToViewPosition(t);i?e.moveTo(r.x,r.y):e.lineTo(r.x,r.y),i=!1}}e.stroke()}setPlotStyle(e){e!==this.plotStyle&&(this.plotStyle=e,this.invalidatePaint())}dispose(){this.disposeDynamicSeriesNode(),super.dispose()}}PD.PlotStyle=TD,dD.register("DynamicSeriesNode",PD);const CD=PD,VD=Oo.byKeys(["MINOR_VERTICAL","MAJOR_VERTICAL","MINOR_HORIZONTAL","MAJOR_HORIZONTAL"]);class RD extends cv{constructor(e,t,i){const n=!(i=Po({majorHorizontalLineSpacing:null,majorVerticalLineSpacing:null,minorHorizontalLineSpacing:null,minorVerticalLineSpacing:null,modelViewTransformProperty:null,minorLineOptions:{stroke:"grey",lineWidth:1},majorLineOptions:{stroke:"black",lineWidth:3}},i)).modelViewTransformProperty;super(),this.gridWidth=e,this.gridHeight=t,this.minorHorizontalLineSpacing=null,this.minorVerticalLineSpacing=null,this.majorVerticalLineSpacing=null,this.majorHorizontalLineSpacing=null,this.modelViewTransformProperty=i.modelViewTransformProperty||new ty(Vx.createIdentity()),this.minorHorizontalLines=new aA(null,i.minorLineOptions),this.minorVerticalLines=new aA(null,i.minorLineOptions),this.majorHorizontalLines=new aA(null,i.majorLineOptions),this.majorVerticalLines=new aA(null,i.majorLineOptions),this.children=[this.minorHorizontalLines,this.minorVerticalLines,this.majorHorizontalLines,this.majorVerticalLines];const r=this.drawAllLines.bind(this);this.modelViewTransformProperty.lazyLink(r),this.setLineSpacings({majorVerticalLineSpacing:i.majorVerticalLineSpacing,majorHorizontalLineSpacing:i.majorHorizontalLineSpacing,minorVerticalLineSpacing:i.minorVerticalLineSpacing,minorHorizontalLineSpacing:i.minorHorizontalLineSpacing}),this.mutate(i),this.disposeGridNode=()=>{this.modelViewTransformProperty.unlink(r),n&&this.modelViewTransformProperty.dispose()}}setLineSpacings(e){const t={majorVerticalLineSpacing:null,minorVerticalLineSpacing:null,majorHorizontalLineSpacing:null,minorHorizontalLineSpacing:null};e=Po(t,e),this.validateMajorMinorPair(e.majorVerticalLineSpacing,e.minorVerticalLineSpacing),this.validateMajorMinorPair(e.majorHorizontalLineSpacing,e.minorHorizontalLineSpacing),this.majorVerticalLineSpacing===e.majorVerticalLineSpacing&&this.majorHorizontalLineSpacing===e.majorHorizontalLineSpacing||(this.majorVerticalLineSpacing=e.majorVerticalLineSpacing,this.majorHorizontalLineSpacing=e.majorHorizontalLineSpacing,this.drawMajorLines()),this.minorVerticalLineSpacing===e.minorVerticalLineSpacing&&this.minorHorizontalLineSpacing===e.minorHorizontalLineSpacing||(this.minorVerticalLineSpacing=e.minorVerticalLineSpacing,this.minorHorizontalLineSpacing=e.minorHorizontalLineSpacing,this.drawMinorLines())}validateMajorMinorPair(e,t){}setGridWidth(e){this.gridWidth=e,this.drawAllLines()}setGridHeight(e){this.gridHeight=e,this.drawAllLines()}drawMinorLines(){this.drawVerticalLines(this.minorVerticalLineSpacing,VD.MINOR_VERTICAL,this.minorVerticalLines),this.drawHorizontalLines(this.minorHorizontalLineSpacing,VD.MINOR_HORIZONTAL,this.minorHorizontalLines)}drawMajorLines(){this.drawVerticalLines(this.majorVerticalLineSpacing,VD.MAJOR_VERTICAL,this.majorVerticalLines),this.drawHorizontalLines(this.majorHorizontalLineSpacing,VD.MAJOR_HORIZONTAL,this.majorHorizontalLines)}drawVerticalLines(e,t,i){const n=new Ip,r=this.modelViewTransformProperty.get();this.getLinePositionsInGrid(e,t).forEach(e=>{const t=r.modelToViewX(e);n.moveTo(t,0),n.lineTo(t,this.gridHeight)}),i.lineDashOffset=-r.modelToViewY(0),i.shape=n}drawHorizontalLines(e,t,i){const n=new Ip,r=this.modelViewTransformProperty.get();this.getLinePositionsInGrid(e,t).forEach(e=>{const t=r.modelToViewY(e);n.moveTo(0,t),n.lineTo(this.gridWidth,t)}),i.lineDashOffset=-r.modelToViewX(0),i.shape=n}drawAllLines(){this.drawMajorLines(),this.drawMinorLines()}getLinePositionsInGrid(e,t){const i=[];if(null===e)return i;const n=this.modelViewTransformProperty.get();let r,s,a;if(t===VD.MAJOR_VERTICAL||t===VD.MINOR_VERTICAL?(r=n.viewToModelX(0),s=Math.abs(n.viewToModelDeltaX(this.gridWidth)),a=n.viewToModelX(this.gridWidth)):t!==VD.MAJOR_HORIZONTAL&&t!==VD.MINOR_HORIZONTAL||(r=n.viewToModelY(0),s=Math.abs(n.viewToModelDeltaY(this.gridHeight)),a=n.viewToModelY(this.gridHeight)),r>a){const e=r;r=a,a=e}const o=r+s,l=1e-7*(a-r);for(let h=r+(e-fl.toFixedNumber(r%e,10))%e;h<=o+l;h+=e)h>o&&(h=o),i.push(h);return i}dispose(){this.disposeGridNode()}}RD.LineType=VD,dD.register("GridNode",RD);const ND=RD,MD=AB("GRIDDLE");dD.register("GriddleStrings",MD);const kD={getValuesInRangeWithAnchor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const r=Math.floor((e-n)/i),s=Math.ceil((t-n)/i),a=[];for(let o=r;o<=s;o++){const r=n+o*i;r>=e&&r<=t&&a.push(r)}return a}};dD.register("GriddleUtils",kD);class LD{constructor(e){e=Po({opacity:null,visible:!0,strokeStyle:null,lineWidth:1,radius:null},e),this.opacity=e.opacity,this.radius=e.radius,this.visible=e.visible,this.lineWidth=e.lineWidth,this.strokeStyle=e.strokeStyle}}dD.register("PointStyle",LD);class ID extends al{constructor(e,t,i){super(e,t),this.pointStyle=i}}dD.register("PointStyledVector2",ID);class BD extends CD{constructor(e,t,i,n){super(e,t,i,n);const r=new AA(4.5,{fill:e.color,centerX:t,centerY:i.height/2});this.addChild(r);const s=()=>{const t=n.get(),i=e.getLength()-1;if(i>=0){const n=e.getDataPoint(i);isNaN(n.y)?r.centerY=t.modelToViewY(0):r.centerY=t.modelToViewY(n.y)}};e.addDynamicSeriesListener(s),n.link(s),this.disposeSeismographDynamicSeriesNode=()=>{e.removeDynamicSeriesListener(s),n.unlink(s)}}dispose(){this.disposeSeismographDynamicSeriesNode(),super.dispose()}}dD.register("SeismographDynamicSeriesNode",BD);const DD=BD;class OD extends aT{constructor(e,t,i){i=Po({spacing:-2},i);const n=e=>new SA(0,0,0,6,{stroke:"white",centerX:e}),r=n(0),s=n(t),a=new eB(r.right+1,r.centerY,s.left-1,s.centerY,{fill:"white",stroke:"white",doubleHead:!0,headHeight:3,headWidth:3.5,tailWidth:.5}),o=new cv({children:[r,s,a]});e.maxWidth=o.width,-i.spacing>e.height&&(i.spacing=-e.height),i.children=[o,e],super(i)}}dD.register("SpanNode",OD);const qD=OD;class YD extends cv{constructor(e){super(),e=Po({width:500,height:300,modelViewTransformProperty:null,defaultModelXRange:new Hl(0,4),defaultModelYRange:new Hl(-1,1),cornerRadius:5,verticalAxisLabelNode:null,horizontalAxisLabelNode:null,plotStyle:CD.PlotStyle.LINE,chartPanelOptions:null,showVerticalGridLabels:!0,showHorizontalGridLabels:!0,verticalGridLabelNumberOfDecimalPlaces:0,horizontalGridLabelNumberOfDecimalPlaces:0,gridLabelOptions:{},majorVerticalLineSpacing:1,majorHorizontalLineSpacing:1,gridNodeOptions:{majorLineOptions:{stroke:"lightGray",lineWidth:.8}},tandem:Lm.OPTIONAL},e),this.chartWidth=e.width,this.chartHeight=e.height,this.showVerticalGridLabels=e.showVerticalGridLabels,this.showHorizontalGridLabels=e.showHorizontalGridLabels,this.verticalGridLabelNumberOfDecimalPlaces=e.verticalGridLabelNumberOfDecimalPlaces,this.horizontalGridLabelNumberOfDecimalPlaces=e.horizontalGridLabelNumberOfDecimalPlaces,this.majorHorizontalLineSpacing=e.majorHorizontalLineSpacing,this.majorVerticalLineSpacing=e.majorVerticalLineSpacing,this.plotStyle=e.plotStyle,this.gridLabelOptions=e.gridLabelOptions,e.chartPanelOptions=Po({fill:"white",lineWidth:1,stroke:"black",right:this.chartWidth,pickable:!1},e.chartPanelOptions),e.chartPanelOptions=Po({clipArea:Ip.roundedRectangleWithRadii(0,0,this.chartWidth,this.chartHeight,{topLeft:e.cornerRadius,topRight:e.cornerRadius,bottomLeft:e.cornerRadius,bottomRight:e.cornerRadius})},e.chartPanelOptions);const t=new xA(0,0,this.chartWidth,this.chartHeight,e.cornerRadius,e.cornerRadius,e.chartPanelOptions);this.modelViewTransformProperty=e.modelViewTransformProperty||new ty(this.createRectangularModelViewTransform(e.defaultModelXRange,e.defaultModelYRange));const i=Po({majorHorizontalLineSpacing:this.majorHorizontalLineSpacing,majorVerticalLineSpacing:this.majorVerticalLineSpacing,modelViewTransformProperty:this.modelViewTransformProperty},e.gridNodeOptions);this.gridNode=new ND(this.chartWidth,this.chartHeight,i),t.addChild(this.gridNode),this.verticalGridLabelLayer=new cv,this.horizontalGridLabelLayer=new cv,this.addChild(this.verticalGridLabelLayer),this.addChild(this.horizontalGridLabelLayer);const n=this.chartWidth;this.dynamicSeriesMap=new Map,this.addChild(t),this.chartPanel=t,this.redrawLabels();const r=(e,t)=>{const i=e.matrix.minus(t.matrix),n=i.scaleVector,r=i.translation,s=0!==n.x||0!==r.x;(0!==n.y||0!==r.y)&&this.redrawVerticalLabels(),s&&this.redrawHorizontalLabels()};if(this.modelViewTransformProperty.lazyLink(r),this.scrollingChartNodeDisposeEmitter=new hb,t.addChild(new xA(0,0,this.chartWidth,this.chartHeight,e.cornerRadius,e.cornerRadius,{stroke:t.stroke,lineWidth:t.lineWidth,pickable:!1})),e.verticalAxisLabelNode&&(e.verticalAxisLabelNode.mutate({maxHeight:t.height,right:this.bounds.minX-8,centerY:t.centerY}),this.addChild(e.verticalAxisLabelNode)),e.horizontalAxisLabelNode){this.addChild(e.horizontalAxisLabelNode),e.horizontalAxisLabelNode.maxWidth=t.right-8;const i=this.showHorizontalGridLabels?this.horizontalGridLabelLayer.bottom+3:t.bottom+3;e.horizontalAxisLabelNode.mutate({top:i,centerX:n/2+t.bounds.minX}),e.horizontalAxisLabelNode.left<4&&(e.horizontalAxisLabelNode.left=4)}this.mutate(e),this.disposeScrollingChartNode=()=>{this.scrollingChartNodeDisposeEmitter.emit(),this.scrollingChartNodeDisposeEmitter.dispose(),this.modelViewTransformProperty.unlink(r)}}setVerticalGridLabelNumberOfDecimalPlaces(e){this.verticalGridLabelNumberOfDecimalPlaces=e,this.redrawVerticalLabels()}setHorizontalGridLabelNumberOfDecimalPlaces(e){this.horizontalGridLabelNumberOfDecimalPlaces=e,this.redrawHorizontalLabels()}addDynamicSeries(e){const t=new CD(e,this.chartWidth,new Zl(0,0,this.chartWidth,this.chartHeight),this.modelViewTransformProperty);this.dynamicSeriesMap.set(e,t),this.chartPanel.addChild(t),this.scrollingChartNodeDisposeEmitter.addListener(()=>t.dispose())}addDynamicSeriesArray(e){e.forEach(this.addDynamicSeries.bind(this))}removeDynamicSeries(e){this.chartPanel.removeChild(this.dynamicSeriesMap.get(e)),this.dynamicSeriesMap.delete(e)}setLineSpacings(e){e=Po({majorVerticalLineSpacing:null,majorHorizontalLineSpacing:null,minorVerticalLineSpacing:null,minorHorizontalLineSpacing:null},e),this.majorHorizontalLineSpacing=e.majorHorizontalLineSpacing,this.majorVerticalLineSpacing=e.majorVerticalLineSpacing,this.gridNode.setLineSpacings(e),this.redrawLabels()}redrawVerticalLabels(){if(this.showVerticalGridLabels){const e=[];this.gridNode.getLinePositionsInGrid(this.majorHorizontalLineSpacing,ND.LineType.MAJOR_HORIZONTAL).forEach(t=>{const i=this.modelViewTransformProperty.get().modelToViewY(t),n=this.chartPanel.localToParentPoint(new al(this.gridNode.bounds.left,i)),r=new gA(fl.toFixed(t,this.verticalGridLabelNumberOfDecimalPlaces),Po({rightCenter:n.plusXY(-3,0)},this.gridLabelOptions));e.push(r)}),this.verticalGridLabelLayer.children=e}}redrawHorizontalLabels(){if(this.showHorizontalGridLabels){const e=[];this.gridNode.getLinePositionsInGrid(this.majorVerticalLineSpacing,ND.LineType.MAJOR_VERTICAL).forEach(t=>{const i=this.modelViewTransformProperty.get().modelToViewX(t),n=this.chartPanel.localToParentPoint(new al(i,this.gridNode.bounds.bottom)),r=new gA(fl.toFixed(t,this.horizontalGridLabelNumberOfDecimalPlaces),Po({centerTop:n.plusXY(0,3)},this.gridLabelOptions));e.push(r)}),this.horizontalGridLabelLayer.children=e}}redrawLabels(){this.redrawVerticalLabels(),this.redrawHorizontalLabels()}setPlotStyle(e){this.plotStyle=e,this.dynamicSeriesMap.forEach(t=>{t.setPlotStyle(e)})}createRectangularModelViewTransform(e,t){return Vx.createRectangleInvertedYMapping(new Zl(e.min,t.min,e.max,t.max),new Zl(0,0,this.chartWidth,this.chartHeight))}dispose(){this.disposeScrollingChartNode(),super.dispose()}}dD.register("XYChartNode",YD);const HD=YD;class GD extends HD{constructor(e,t,i,n){const r=new ty(Vx.createIdentity());(n=Po({verticalRanges:[new Hl(-1,1)],initialVerticalRangeIndex:0,verticalRangeProperty:new ty(new Hl(-1,1)),horizontalRangeProperty:new ty(new Hl(0,4)),numberHorizontalLines:5,numberVerticalLines:5,horizontalAxisLabelNode:null,showHorizontalGridLabels:!1,scrollGridNode:!1,gridLabelOptions:{fill:"white"},gridNodeOptions:{majorLineOptions:{stroke:"lightGray",lineDash:[5,5],lineWidth:.8,lineDashOffset:2.5}},rightMargin:10,tandem:Lm.OPTIONAL},n)).gridNodeOptions.modelViewTransformProperty=r,super(n),this.rightMargin=n.rightMargin,this.verticalRangeProperty=n.verticalRangeProperty,this.horizontalRangeProperty=n.horizontalRangeProperty,this.addDynamicSeriesArray(t);const s=new ty(n.initialVerticalRangeIndex,{isValidValue:e=>e>=0&&e<n.verticalRanges.length}),a=e=>{this.verticalRangeProperty.set(n.verticalRanges[e])};s.link(a);const o=this.chartWidth-n.rightMargin,l=pS.multilink([e,this.verticalRangeProperty],(e,t)=>{const i=Vx.createRectangleInvertedYMapping(new Zl(e-4,t.min,e,t.max),new Zl(0,0,o,this.chartHeight));if(this.modelViewTransformProperty.set(i),n.scrollGridNode)r.set(i);else{const e=Vx.createRectangleInvertedYMapping(new Zl(0,t.min,4,t.max),new Zl(0,0,o,this.chartHeight));e.matrix.equals(r.get().matrix)||r.set(e)}}),h=r.get().modelToViewDeltaX(this.majorVerticalLineSpacing),u=new qD(i,h,{left:this.chartPanel.left,top:this.chartPanel.bottom+2});n.horizontalAxisLabelNode&&n.horizontalAxisLabelNode.left<u.right+4&&(n.horizontalAxisLabelNode.left=u.right+4,n.horizontalAxisLabelNode.maxWidth=this.chartWidth-u.width-4),this.addChild(u),this.verticalRangeProperty.link(e=>{const t=e.getLength()/(n.numberHorizontalLines-1),i=this.horizontalRangeProperty.get().getLength()/(n.numberVerticalLines-1);this.setLineSpacings({majorVerticalLineSpacing:i,majorHorizontalLineSpacing:t})}),this.resetSeismographNode=()=>{s.reset()},this.disposeSeismographNode=()=>{s.unlink(a),pS.unmultilink(l)}}addDynamicSeries(e){const t=new DD(e,this.chartWidth-this.rightMargin,new Zl(0,0,this.chartWidth,this.chartHeight),this.modelViewTransformProperty);this.chartPanel.addChild(t),this.scrollingChartNodeDisposeEmitter.addListener(()=>t.dispose())}reset(){this.resetSeismographNode()}dispose(){this.disposeSeismographNode(),super.dispose()}}dD.register("SeismographNode",GD);const FD=GD,zD=new Hg(50,50,200,.2),UD=Hg.DARK_GRAY,WD=new Hg(180,180,230),XD=Hg.DARK_GRAY;class jD extends HD{constructor(e){super(e=Po({cursorOptions:null,chartPanelOptions:{pickable:!0},tandem:Lm.OPTIONAL},e)),this._cursorVisibleOverride=null,this.cursorValue=0,this.minRecordedXValue=0,this.maxRecordedXValue=0,this.dynamicSeriesListenerMap=new Map,this.dynamicSeriesArray=[],this.chartCursor=new QD(this,this.modelViewTransformProperty,e.cursorOptions),this.chartPanel.addChild(this.chartCursor),this.updateCursor()}addDynamicSeries(e){super.addDynamicSeries(e),this.dynamicSeriesArray.push(e);const t=()=>{this.updateMinMaxRecordedValues(),this.updateCursor()};this.dynamicSeriesListenerMap.set(e,t),e.addDynamicSeriesListener(t)}removeDynamicSeries(e){super.removeDynamicSeries(e);const t=this.dynamicSeriesArray.indexOf(e);this.dynamicSeriesArray.splice(t,1),e.removeDynamicSeriesListener(this.dynamicSeriesListenerMap.get(e)),this.dynamicSeriesListenerMap.delete(e)}setCursorValue(e){const t=this.modelViewTransformProperty.get(),i=t.viewToModelX(0),n=t.viewToModelX(this.chartWidth+this.chartCursor.width/2);this.cursorValue=fl.clamp(e,i,n),this.updateCursor()}getCursorValue(){return this.cursorValue}resetCursor(){this.chartCursor.reset()}setCursorVisibleOverride(e){this._cursorVisibleOverride=e,this.updateCursorVisibility()}updateCursor(){this.updateCursorVisibility(),this.chartCursor.isVisible()&&this.updateCursorPosition()}updateCursorPosition(){this.moveCursorToValue(this.cursorValue)}updateCursorVisibility(){const e=this.chartCursor.visible;if("boolean"==typeof this._cursorVisibleOverride)this.chartCursor.setVisible(this._cursorVisibleOverride);else{const e=this.modelViewTransformProperty.get().viewToModelX(this.chartWidth+this.chartCursor.width/2),t=this.modelViewTransformProperty.get().viewToModelX(0),i=this.cursorValue>=t&&this.cursorValue<=e,n=this.hasData(),r=i&&n;this.chartCursor.setVisible(r)}!this.chartCursor.visible&&e&&this.chartCursor.interruptDrag()}hasData(){return _.some(this.dynamicSeriesArray,e=>e.hasData())}moveCursorToValue(e){const t=this.modelViewTransformProperty.get().modelToViewX(e);this.chartCursor.centerX=fl.clamp(t,0,this.chartWidth),this.chartCursor.centerY=this.gridNode.centerY}updateMinMaxRecordedValues(){let e=Number.POSITIVE_INFINITY,t=Number.NEGATIVE_INFINITY;this.dynamicSeriesArray.forEach(i=>{if(i.getLength()>0){const n=i.getDataPoint(0).x,r=i.getDataPoint(i.getLength()-1).x;n<e&&(e=n),r>t&&(t=r)}}),this.minRecordedXValue=e,this.maxRecordedXValue=t}}class QD extends xA{constructor(e,t,i){i=Po({startDrag:()=>{},endDrag:()=>{},drag:()=>{},includeDragCue:!1,tandem:Lm.OPTIONAL},i);const n=.013*e.chartWidth,r=e.chartHeight;super(0,-r,n,r,0,0,{cursor:"ew-resize",fill:zD,stroke:UD,lineWidth:.4,lineDash:[4,4]}),this.chart=e,this.modelViewTransformProperty=t,this.mouseArea=this.localBounds.dilatedX(12),this.touchArea=this.localBounds.dilatedX(12),this.includeDragCue=i.includeDragCue,this.includeDragCue&&(this.dragCueArrowNode=new eB(2*-n,0,2*n,0,{doubleHead:!0,headWidth:12,headHeight:10,fill:WD,stroke:XD,center:this.center.plusXY(0,.4*r)}),this.addChild(this.dragCueArrowNode));const s=new cv,a=.05*r;for(let o=0;o<3;o++){const e=new KD(n/2,zD);e.top=o*(e.height+a),s.addChild(e)}s.center=this.center,this.addChild(s),this.dragListener=new xx({start:(e,t)=>{i.startDrag()},drag:(e,t)=>{const n=t.parentPoint.x;let r=this.modelViewTransformProperty.get().viewToModelX(n);r=fl.clamp(r,this.chart.minRecordedXValue,this.chart.maxRecordedXValue),this.chart.setCursorValue(r),i.drag()},end:()=>{i.endDrag(),this.includeDragCue&&(this.dragCueArrowNode.visible=!1)},tandem:i.tandem.createTandem("dragListener")}),this.addInputListener(this.dragListener)}interruptDrag(){this.dragListener.interrupt()}reset(){this.includeDragCue&&(this.dragCueArrowNode.visible=!0)}}class KD extends AA{constructor(e,t,i){i=Po({lineWidth:.5},i);const n=t.darkerColor(.9),r=new Hg(n.getRed(),n.getGreen(),n.getBlue(),t.getAlpha()),s=t.brighterColor(.9),a=new Hg(s.getRed(),s.getGreen(),s.getBlue(),t.getAlpha());super(e/2-i.lineWidth,{fill:r,stroke:a,lineWidth:i.lineWidth})}}dD.register("XYCursorChartNode",jD);const ZD=new class{constructor(){this.pendingLocks=[],this.loadComplete=!1,this.listeners=[]}reset(){this.loadComplete=!1}addListener(e){this.listeners.push(e)}proceedIfReady(){0===this.pendingLocks.length&&(this.loadComplete=!0,this.listeners.forEach(e=>e()))}createLock(e){return this.pendingLocks.push(e),()=>{rm(this.pendingLocks,e),this.proceedIfReady()}}};wo.register("asyncLoader",ZD);const JD=ZD,$D=new Image,eO=JD.createLock($D);$D.onload=eO,$D.src="data:image/png;base64,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";const tO=$D,iO=AB("SCENERY_PHET");JI.register("SceneryPhetStrings",iO);const nO=iO;class rO extends cv{constructor(e,t){var i,n;const r=!(null!=t&&t.basePositionProperty),s=!(null!=t&&t.tipPositionProperty),a=Vo()({basePositionProperty:new xw(new al(0,0)),tipPositionProperty:new xw(new al(1,0)),hasValue:!0,dragBounds:Zl.EVERYTHING,textPosition:new al(0,30),modelViewTransform:Vx.createIdentity(),significantFigures:1,textColor:"white",textBackgroundColor:null,textBackgroundXMargin:4,textBackgroundYMargin:2,textBackgroundCornerRadius:2,textMaxWidth:200,textFont:new gD({size:16,weight:"bold"}),baseScale:.8,lineColor:"gray",tapeLineWidth:2,tipCircleColor:"rgba(0,0,0,0.1)",tipCircleRadius:10,crosshairColor:"rgb(224, 95, 32)",crosshairSize:5,crosshairLineWidth:2,isBaseCrosshairRotating:!0,isTipCrosshairRotating:!0,isTipDragBounded:!0,interactive:!0,baseDragStarted:_.noop,baseDragEnded:_.noop,phetioReadoutStringPropertyInstrumented:!0,phetioFeaturedMeasuredDistanceProperty:!1,keyboardDragListenerOptions:{baseDragVelocity:600,baseShiftDragVelocity:300,tipDragVelocity:600,tipShiftDragVelocity:150}},t);super(),this.unitsProperty=e,this.significantFigures=a.significantFigures,this.dragBoundsProperty=new ty(a.dragBounds),this.modelViewTransformProperty=new ty(a.modelViewTransform),this.isTipDragBounded=a.isTipDragBounded,this.basePositionProperty=a.basePositionProperty,this.tipPositionProperty=a.tipPositionProperty,this.ownsBasePositionProperty=r,this.ownsTipPositionProperty=s,this._isTipUserControlledProperty=new ty(!1),this.isTipUserControlledProperty=this._isTipUserControlledProperty,this._isBaseUserControlledProperty=new ty(!1),this.isBaseUserControlledProperty=this._isBaseUserControlledProperty,this.measuredDistanceProperty=new Rb([this.basePositionProperty,this.tipPositionProperty],(e,t)=>e.distance(t),{tandem:null===(i=a.tandem)||void 0===i?void 0:i.createTandem("measuredDistanceProperty"),phetioDocumentation:"The distance measured by the measuring tape",phetioValueType:il,phetioFeatured:a.phetioFeaturedMeasuredDistanceProperty,units:this.basePositionProperty.units});const o=(new Ip).moveTo(-a.crosshairSize,0).moveTo(-a.crosshairSize,0).lineTo(a.crosshairSize,0).moveTo(0,-a.crosshairSize).lineTo(0,a.crosshairSize),l=new aA(o,{stroke:a.crosshairColor,lineWidth:a.crosshairLineWidth}),h=new aA(o,{stroke:a.crosshairColor,lineWidth:a.crosshairLineWidth}),u=new AA(a.tipCircleRadius,{fill:a.tipCircleColor}),c=new Cb({interactiveHighlightEnabled:!1});this.baseImage=new rA(tO,{scale:a.baseScale,cursor:"pointer",tagName:"div",focusable:!0,ariaRole:"application",innerContent:nO.a11y.measuringTapeStringProperty,ariaLabel:nO.a11y.measuringTapeStringProperty}),c.addChild(this.baseImage);const d=new SA(this.basePositionProperty.value,this.tipPositionProperty.value,{stroke:a.lineColor,lineWidth:a.tapeLineWidth}),p=new Cb({children:[u,h],cursor:"pointer",interactiveHighlightEnabled:!1,tagName:"div",focusable:!0,ariaRole:"application",innerContent:nO.a11y.measuringTapeTipStringProperty,ariaLabel:nO.a11y.measuringTapeTipStringProperty}),m=new zI([this.unitsProperty,this.measuredDistanceProperty,nO.measuringTapeReadoutPatternStringProperty],(e,t,i)=>{const n=fl.toFixed(e.multiplier*t,this.significantFigures);return Qb.fillIn(i,{distance:n,units:e.name})},{tandem:a.phetioReadoutStringPropertyInstrumented?null===(n=a.tandem)||void 0===n?void 0:n.createTandem("readoutStringProperty"):Lm.OPT_OUT,phetioDocumentation:"The text content of the readout on the measuring tape",accessNonDependencies:!0});this.valueNode=new gA(m,{font:a.textFont,fill:a.textColor,maxWidth:a.textMaxWidth}),this.valueBackgroundNode=new xA(0,0,1,1,{cornerRadius:a.textBackgroundCornerRadius,fill:a.textBackgroundColor});const g=()=>{const e=this.valueNode.width+2*a.textBackgroundXMargin,t=this.valueNode.height+2*a.textBackgroundYMargin;this.valueBackgroundNode.setRect(0,0,e,t),this.valueBackgroundNode.center=this.valueNode.center};let f;if(this.valueNode.boundsProperty.lazyLink(g),g(),p.touchArea=p.localBounds.dilated(15),this.baseImage.touchArea=this.baseImage.localBounds.dilated(20),this.baseImage.mouseArea=this.baseImage.localBounds.dilated(10),this.addChild(d),this.addChild(l),this.addChild(c),this.valueContainer=new cv({children:[this.valueBackgroundNode,this.valueNode]}),a.hasValue&&this.addChild(this.valueContainer),this.addChild(p),this.baseDragListener=null,a.interactive){var y,E,v,A;c.interactiveHighlightEnabled=!0,p.interactiveHighlightEnabled=!0;const e=()=>{this.moveToFront(),a.baseDragStarted(),this._isBaseUserControlledProperty.value=!0},t=()=>{this._isBaseUserControlledProperty.value=!1,a.baseDragEnded()},i=e=>{if(!this.isTipUserControlledProperty.value){const t=e.plus(this.tipPositionProperty.value);if(a.isTipDragBounded){const e=this.dragBoundsProperty.value.closestPointTo(t);this.tipPositionProperty.set(e)}else this.tipPositionProperty.set(t)}};this.baseDragListener=new xx({tandem:null===(y=a.tandem)||void 0===y?void 0:y.createTandem("baseDragListener"),start:t=>{e();const i=this.modelViewTransformProperty.value.modelToViewPosition(this.basePositionProperty.value);f=t.currentTarget.globalToParentPoint(t.pointer.point).minus(i)},drag:(e,t)=>{const n=t.currentTarget.globalToParentPoint(e.pointer.point).minus(f),r=this.modelViewTransformProperty.value.viewToModelPosition(n),s=this.dragBoundsProperty.value.closestPointTo(r),a=s.minus(this.basePositionProperty.value);this.basePositionProperty.set(s),i(a)},end:t}),this.baseImage.addInputListener(this.baseDragListener);const n=new jx({tandem:null===(E=a.tandem)||void 0===E?void 0:E.createTandem("baseKeyboardDragListener"),positionProperty:this.basePositionProperty,transform:this.modelViewTransformProperty,dragBoundsProperty:this.dragBoundsProperty,dragVelocity:a.keyboardDragListenerOptions.baseDragVelocity,shiftDragVelocity:a.keyboardDragListenerOptions.baseShiftDragVelocity,start:e,drag:i,end:t});this.baseImage.addInputListener(n);const r=()=>{this._isTipUserControlledProperty.value=!1};let s;const o=new xx({tandem:null===(v=a.tandem)||void 0===v?void 0:v.createTandem("tipDragListener"),start:e=>{this.moveToFront(),this._isTipUserControlledProperty.value=!0;const t=this.modelViewTransformProperty.value.modelToViewPosition(this.tipPositionProperty.value);s=e.currentTarget.globalToParentPoint(e.pointer.point).minus(t)},drag:(e,t)=>{const i=t.currentTarget.globalToParentPoint(e.pointer.point).minus(s),n=this.modelViewTransformProperty.value.viewToModelPosition(i);a.isTipDragBounded?this.tipPositionProperty.value=this.dragBoundsProperty.value.closestPointTo(n):this.tipPositionProperty.value=n},end:r});p.addInputListener(o);const l=new jx({tandem:null===(A=a.tandem)||void 0===A?void 0:A.createTandem("tipKeyboardDragListener"),positionProperty:this.tipPositionProperty,dragBoundsProperty:a.isTipDragBounded?this.dragBoundsProperty:null,transform:this.modelViewTransformProperty,dragVelocity:a.keyboardDragListenerOptions.tipDragVelocity,shiftDragVelocity:a.keyboardDragListenerOptions.tipShiftDragVelocity,start:()=>{this.moveToFront(),this._isTipUserControlledProperty.value=!0},end:r});p.addInputListener(l)}const b=()=>{this.valueNode.centerTop=this.baseImage.center.plus(a.textPosition.times(a.baseScale))};m.link(b);const S=pS.multilink([this.measuredDistanceProperty,e,this.modelViewTransformProperty,this.tipPositionProperty,this.basePositionProperty],(e,t,i,n,r)=>{const s=i.modelToViewPosition(n),o=i.modelToViewPosition(r),h=this.baseImage.getRotation(),u=Math.atan2(s.y-o.y,s.x-o.x),c=u-h;l.center=o,p.center=s,this.baseImage.setRotation(0),this.baseImage.rightBottom=o,this.baseImage.rotateAround(this.baseImage.rightBottom,u),d.setLine(o.x,o.y,s.x,s.y),a.isTipCrosshairRotating&&p.rotateAround(s,c),a.isBaseCrosshairRotating&&l.rotateAround(o,c),b()});this.disposeMeasuringTapeNode=()=>{S.dispose(),m.dispose(),this.ownsBasePositionProperty&&this.basePositionProperty.dispose(),this.ownsTipPositionProperty&&this.tipPositionProperty.dispose(),c.dispose(),p.dispose()},this.mutate(a)}reset(){this.ownsBasePositionProperty&&this.basePositionProperty.reset(),this.ownsTipPositionProperty&&this.tipPositionProperty.reset()}dispose(){this.disposeMeasuringTapeNode(),super.dispose()}setDragBounds(e){const t=e.copy();this.dragBoundsProperty.value=t,this.basePositionProperty.value=t.closestPointTo(this.basePositionProperty.value),this.isTipDragBounded&&(this.tipPositionProperty.value=t.closestPointTo(this.tipPositionProperty.value))}getDragBounds(){return this.dragBoundsProperty.value.copy()}getLocalBaseCenter(){return new al(-this.baseImage.imageWidth/2,-this.baseImage.imageHeight/2)}getLocalBaseBounds(){return this.baseImage.bounds.copy()}startBaseDrag(e){this.baseDragListener&&this.baseDragListener.press(e)}static createIcon(e){const t=Vo()({tapeLength:30},e),i=new rO(new ty({name:"",multiplier:1}),{tipPositionProperty:new xw(new al(t.tapeLength,0)),hasValue:!1,interactive:!1});t.children=[i];const n=new cv(t);return i.toImage(e=>n.setChildren([new rA(e)])),n}}JI.register("MeasuringTapeNode",rO);const sO=rO,aO=(e,t)=>{const i=t.replace(new RegExp("^.*,"),""),n=atob(i),r=new Uint8Array(n.length);for(let s=0;s<r.length;s++)r[s]=n.charCodeAt(s);return r},oO=new bt("tambo");class lO{constructor(){this.audioBufferProperty=new mg(null)}}oO.register("WrappedAudioBuffer",lO);const hO=lO;let uO;window.AudioContext?uO=new window.AudioContext:window.webkitAudioContext?uO=new window.webkitAudioContext:(uO={},console.error("error: this browser does not support Web Audio")),oO.register("phetAudioContext",uO);const cO=uO,dO="data:audio/mpeg;base64,//tQxAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAAFAAAE5AAzMzMzMzMzMzMzMzMzMzMzMzMzZmZmZmZmZmZmZmZmZmZmZmZmZmaZmZmZmZmZmZmZmZmZmZmZmZmZmczMzMzMzMzMzMzMzMzMzMzMzMzM//////////////////////////8AAAA5TEFNRTMuOTlyAaUAAAAAAAAAABRAJAZmQgAAQAAABOTGvClKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/7UMQAAAjxrv+ggLoZGTXh9oJQAa222FG3ASABBG51MY/j4AAB4AYI3/H3//Pqd/zv0Jp/8//zn3n6Mmf/J7f//8jf+fOeeggHA4RXkGh8XEwHAMHD4udyCYuhAALhgJqWJAEDGMYxvHlyAHxc9P76dP//T/Rm//p+v9tvb0Tzr1XyfnelP/3b0//5vo86Mlm0dHQrscccRQg5oSYpziaiB52oQCkxnR6LQisRCEMhluyeqEhIiWMiSvQjhwDTCtCPyDkNrP+UsBTNwVsJGSD/+1LEFoAQMWtluYaQEWGP7H+wYAR9IvpDLBawV8OWbG5oShmbiVnh8GAU6ZIjnetMKuOcpmaSndX80HuS7puaIKq/6lvM36lIJf8+Zm6CFA0t3fV/91IOhPJ1GCH13q//5o6DJl9/F3ErtwAGRlJ26tx4H5gV4lzzrIqy8jTNBZl1Hep3doI2/x6AMOljV5/M4clzeagOVs4SmnmZk2fTyahylhxZ1R7/1HlnhEe4KgF3SISoKnviYs9T8sp4Ku5ICsAAg3RwNdct5GVqea2W4P/7UsQHgAuZRzrtmE8JO4qkaa4M4MXAzUcoyYPSsZe/D4w5DUicEmE/ziQka1VaLTh0y8+qp/UtRMpQoli5jYCz6St//RjTOrPXlI/KJaZ2RHX6mMrJqxfqVjPM/K/thi6pyAAPlyOxkEr9tPgR2ldNwBRI0383ZJR5NmIAG2zBZOw1tKaJR6jzjIxgTlVLjBgJmawwRo8JXAUYCz1gr/q+aVWur8tO+j4iUe////6ii3UCwZHQhxd93nYdy9H1MjPwThY/VGgQQLo200aOkCDF//tSxA+CCwg1HK3lIQHXlCPo97AIw8D44EBOcB8oGBIND4gcCBc+IFHC7wwUOA+oMiAaH1PDCw+mxbydxPV3/zjbCnci8p/9nIJTQYSH5vktZIAEdHIA5HkiS4k11MYsCUFS8QSbEVhJUnQlFpKIJNQhJJrBKEZ8kiKoJIkqToSj5KJJ6hiCTXCUJUZJEl45Ek9TCUfQkkyuSSbzS72V1mVruLnhMeBUsHREPDQiPA0VOiJwdKuBlR5Fqtbk3f///t8FdSogAuxJp2uAWhIWFmv/+1LEBgPGHADHoIhgIAAANIAAAATcLVLFRWKCwsLCyxUVFVf6xVmLCws1YqKior////2RVn/+LCwtTEFNRTMuOTkuM1VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ==",pO=aO(cO,dO),mO=JD.createLock(dO),gO=new hO;let fO=!1;const yO=()=>{fO||(mO(),fO=!0)},EO=cO.decodeAudioData(pO.buffer,e=>{null===gO.audioBufferProperty.value&&(gO.audioBufferProperty.set(e),yO())},e=>{console.warn("decode of audio data failed, using stubbed sound, error: "+e),gO.audioBufferProperty.set(cO.createBuffer(1,1,cO.sampleRate)),yO()});EO&&EO.then(e=>{null===gO.audioBufferProperty.value&&(gO.audioBufferProperty.set(e),yO())}).catch(e=>{console.warn("promise rejection caught for audio decode, error = "+e),yO()});const vO=gO,AO=[],bO=[],SO={addStateChangeListener(e,t){let i,n=AO.indexOf(e);-1===n?(AO.push(e),n=AO.length-1,i=[],bO.push(i),e.onstatechange=()=>{_.clone(i).forEach(t=>{t(e.state)})}):i=bO[n],i.push(t)},removeStateChangeListener(e,t){const i=AO.indexOf(e),n=bO[i],r=n.indexOf(t);n.splice(r,1)},hasListener(e,t){let i=!1;const n=AO.indexOf(e);if(n>=0){const e=bO[n];e&&(i=e.includes(t))}return i}};oO.register("audioContextStateChangeMonitor",SO);const _O=SO,xO={DEFAULT_PARAM_CHANGE_TIME_CONSTANT:.015,DEFAULT_LINEAR_GAIN_CHANGE_TIME:.1,TWELFTH_ROOT_OF_TWO:Math.pow(2,1/12)};oO.register("soundConstants",xO);const wO=xO,TO={detectSoundBounds:e=>{const t=e.length,i=[],n=[];for(let s=0;s<e.numberOfChannels;s++){const r=e.getChannelData(s);i[s]=PO(r,t,.05),n[s]=CO(r,t,.05)}const r=e.sampleRate;return{soundStart:_.min(i)/r,soundEnd:_.max(n)/r}}},PO=(e,t,i)=>{let n,r=0,s=!1;for(n=0;n<t-1&&!s;n++)e[n]>i&&e[n+1]>e[n]&&(r=n,s=!0);let a=0;for(s=!1,n=r;n>0&&!s;n--){const t=e[n];t<=0&&(a=0===t?n:n+1,s=!0)}let o=0,l=0;for(n=0;n<a;n++)o=Math.max(o,e[n]),l=Math.min(l,e[n]);return a},CO=(e,t,i)=>{let n,r=t-1,s=!1;for(n=t-1;n>0&&!s;n--)e[n]<=-i&&e[n-1]<e[n]&&(r=n,s=!0);let a=r;for(s=!1,n=r;n<t-1&&!s;n++)e[n+1]>=0&&(a=n,s=!0);let o=0,l=0;for(n=a;n<t;n++)o=Math.max(o,e[n]),l=Math.min(l,e[n]);return a};oO.register("SoundUtils",TO);const VO=TO,RO=wO.DEFAULT_PARAM_CHANGE_TIME_CONSTANT,NO=Rb.not(zE);class MO extends Um{constructor(e){super();const t=Vo()({initialOutputLevel:1,audioContext:cO,connectImmediately:!1,enableControlProperties:[],additionalAudioNodes:[],enabledDuringPhetioStateSetting:!1},e);this.audioContext=t.audioContext,this._outputLevel=t.initialOutputLevel,this.connectionList=[],this.enableControlProperties=yx(),this.fullyEnabledProperty=new gy(!0);const i=()=>{this.fullyEnabledProperty.value=_.every(this.enableControlProperties,e=>e.value)};this.enableControlProperties.addItemAddedListener(e=>{e.link(i);const t=n=>{n===e&&(n.unlink(i),this.enableControlProperties.removeItemRemovedListener(t))};this.enableControlProperties.addItemRemovedListener(t)}),t.enableControlProperties.forEach(e=>{this.addEnableControlProperty(e)}),this.locallyEnabledProperty=new gy(!0),this.addEnableControlProperty(this.locallyEnabledProperty),this.mainGainNode=this.audioContext.createGain(),this.mainGainNode.gain.setValueAtTime(this._outputLevel,this.audioContext.currentTime),t.connectImmediately&&this.mainGainNode.connect(this.audioContext.destination),this.fullyEnabledProperty.link(e=>{const t=e?0:this._outputLevel,i=e?this._outputLevel:0,n=this.audioContext.currentTime;this.mainGainNode.gain.setValueAtTime(t,n),this.mainGainNode.gain.linearRampToValueAtTime(i,this.audioContext.currentTime+wO.DEFAULT_LINEAR_GAIN_CHANGE_TIME)}),this.soundSourceDestination=this.mainGainNode;for(let n=t.additionalAudioNodes.length-1;n>=0;n--){const e=t.additionalAudioNodes[n];e.connect(this.soundSourceDestination),this.soundSourceDestination=e}Lm.PHET_IO_ENABLED&&!t.enabledDuringPhetioStateSetting&&this.addEnableControlProperty(NO),this.disposeEmitter.addListener(()=>{this.enableControlProperties.clear()})}connect(e){this.mainGainNode.connect(e),this.connectionList.push(e)}disconnect(e){this.mainGainNode.disconnect(e),this.connectionList=_.without(this.connectionList,e)}isConnectedTo(e){return this.connectionList.includes(e)}setOutputLevel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:RO;if(e!==this._outputLevel){const i=this.audioContext.currentTime;this.fullyEnabledProperty.value&&(this.mainGainNode.gain.cancelScheduledValues(i),0===t?this.mainGainNode.gain.setValueAtTime(e,i):"running"===this.audioContext.state?this.mainGainNode.gain.setTargetAtTime(e,i,t):this.mainGainNode.gain.linearRampToValueAtTime(e,i+wO.DEFAULT_LINEAR_GAIN_CHANGE_TIME)),this._outputLevel=e}}set outputLevel(e){this.setOutputLevel(e)}get outputLevel(){return this.getOutputLevel()}getOutputLevel(){return this._outputLevel}addEnableControlProperty(e){this.enableControlProperties.push(e)}removeEnableControlProperty(e){this.enableControlProperties.remove(e)}get locallyEnabled(){return this.locallyEnabledProperty.value}set locallyEnabled(e){this.locallyEnabledProperty.value=e}get fullyEnabled(){return this.fullyEnabledProperty.value}}oO.register("SoundGenerator",MO);const kO=MO,LO=wO.DEFAULT_PARAM_CHANGE_TIME_CONSTANT;class IO extends kO{constructor(e,t){const i=Vo()({loop:!1,trimSilence:!0,initialPlaybackRate:1,initiateWhenDisabled:!1,rateChangesAffectPlayingSounds:!0},t);if(super(i),this.wrappedAudioBuffer=e,this.loop=i.loop,this.rateChangesAffectPlayingSounds=i.rateChangesAffectPlayingSounds,this.initiateWhenDisabled=i.initiateWhenDisabled,this.soundStart=0,this.soundEnd=null,i.trimSilence){const e=t=>{if(t){const i=VO.detectSoundBounds(t);this.soundStart=i.soundStart,this.soundEnd=i.soundEnd,this.wrappedAudioBuffer.audioBufferProperty.unlink(e)}};this.wrappedAudioBuffer.audioBufferProperty.link(e)}this.activeBufferSources=[],this.localGainNode=this.audioContext.createGain(),this.localGainNode.connect(this.soundSourceDestination),this._playbackRate=i.initialPlaybackRate,this.isPlayingProperty=new gy(!1),this.timeOfDeferredPlayRequest=Number.NEGATIVE_INFINITY,this.audioContextStateChangeListener=e=>{"running"===e&&((this.loop||(Date.now()-this.timeOfDeferredPlayRequest)/1e3<.2)&&this.play(.1),_O.removeStateChangeListener(this.audioContext,this.audioContextStateChangeListener))},this.fullyEnabledProperty.lazyLink(e=>{this.loop||e||this.stop()})}play(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if("running"===this.audioContext.state&&this.wrappedAudioBuffer.audioBufferProperty.value){const t=this.audioContext.currentTime;if(this.loop&&!this.isPlayingProperty.get()||!this.loop&&(this.fullyEnabled||this.initiateWhenDisabled)){const i=this.audioContext.createBufferSource();i.buffer=this.wrappedAudioBuffer.audioBufferProperty.value,i.loop=this.loop,i.loopStart=this.soundStart,this.soundEnd&&(i.loopEnd=this.soundEnd),this.localGainNode.gain.cancelScheduledValues(t),this.localGainNode.gain.setValueAtTime(1,t),i.connect(this.soundSourceDestination),this.activeBufferSources.push(i),this.loop||(i.onended=()=>{const e=this.activeBufferSources.indexOf(i);e>-1&&this.activeBufferSources.splice(e,1),this.isPlayingProperty.value=this.activeBufferSources.length>0}),i.playbackRate.setValueAtTime(this._playbackRate,t),i.start(t+e,this.soundStart),this.isPlayingProperty.value=!0}}else"suspended"===this.audioContext.state&&(this.timeOfDeferredPlayRequest=Date.now(),_O.hasListener(this.audioContext,this.audioContextStateChangeListener)||_O.addStateChangeListener(this.audioContext,this.audioContextStateChangeListener))}stop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.1;const t=e>0?e/4.61:wO.DEFAULT_PARAM_CHANGE_TIME_CONSTANT,i=this.audioContext.currentTime,n=i+e;this.localGainNode.gain.cancelScheduledValues(i),this.localGainNode.gain.setTargetAtTime(0,i,t),this.activeBufferSources.forEach(e=>{e.stop(n)}),this.activeBufferSources.length=0,this.isPlayingProperty.value=!1,_O.hasListener(this.audioContext,this.audioContextStateChangeListener)&&_O.removeStateChangeListener(this.audioContext,this.audioContextStateChangeListener)}setPlaybackRate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:LO;if(this.rateChangesAffectPlayingSounds){const i=this.audioContext.currentTime;this.activeBufferSources.forEach(n=>{n.playbackRate.cancelScheduledValues(i),n.playbackRate.setTargetAtTime(e,i,t)})}this._playbackRate=e}getPlaybackRate(){return this._playbackRate}get playbackRate(){return this.getPlaybackRate()}get isPlaying(){return this.isPlayingProperty.value}getNumberOfPlayingInstances(){return this.activeBufferSources.length}}oO.register("SoundClip",IO);const BO=IO,DO="data:audio/mpeg;base64,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",OO=aO(cO,DO),qO=JD.createLock(DO),YO=new hO;let HO=!1;const GO=()=>{HO||(qO(),HO=!0)},FO=cO.decodeAudioData(OO.buffer,e=>{null===YO.audioBufferProperty.value&&(YO.audioBufferProperty.set(e),GO())},e=>{console.warn("decode of audio data failed, using stubbed sound, error: "+e),YO.audioBufferProperty.set(cO.createBuffer(1,1,cO.sampleRate)),GO()});FO&&FO.then(e=>{null===YO.audioBufferProperty.value&&(YO.audioBufferProperty.set(e),GO())}).catch(e=>{console.warn("promise rejection caught for audio decode, error = "+e),GO()});const zO=YO;class UO extends Fl{}_defineProperty(UO,"BASIC",new(it=UO)),_defineProperty(UO,"EXTRA",new it),_defineProperty(UO,"enumeration",new Xl(it,{phetioDocumentation:"describes whether a sound is considered part of the basic or the extra sounds for the sim"})),oO.register("SoundScope",UO);const WO=UO,XO=wO.DEFAULT_LINEAR_GAIN_CHANGE_TIME;const jO=new class extends Km{constructor(e){super({tandem:e,phetioState:!1,phetioDocumentation:"Controls the simulation's sound. For sims that do not support sound, this element and its children can be ignored."}),_defineProperty(this,"viewNodeDisplayedPropertyMap",new Map),this.enabledProperty=new gy(phet.chipper.queryParameters.supportsSound,{tandem:null==e?void 0:e.createTandem("enabledProperty"),phetioState:!1,phetioDocumentation:"Determines whether sound is enabled. Supported only if this sim supportsSound=true."}),this.extraSoundEnabledProperty=new gy(phet.chipper.queryParameters.extraSoundInitiallyEnabled,{tandem:null==e?void 0:e.createTandem("extraSoundEnabledProperty"),phetioState:!1,phetioDocumentation:"Determines whether extra sound is enabled. Extra sound is additional sounds that can serve to improve the learning experience for individuals with visual disabilities. Note that not all simulations that support sound also support extra sound. Also note that the value is irrelevant when enabledProperty is false."}),this.soundGeneratorInfoArray=[],this._mainOutputLevel=1,this._reverbLevel=.02,this.gainNodesForCategories=new Map,this.duckingProperties=yx(),this.initialized=!1,this.soundGeneratorsAwaitingAdd=[],this.mainGainNode=null,this.duckingGainNode=null,this.convolver=null,this.reverbGainNode=null,this.dryGainNode=null}initialize(e,t,i,n,r,s){const a=Vo()({categories:["sim-specific","user-interface"]},s),o=cO.currentTime,l=cO.createDynamicsCompressor();l.threshold.setValueAtTime(-6,o),l.knee.setValueAtTime(5,o),l.ratio.setValueAtTime(12,o),l.attack.setValueAtTime(0,o),l.release.setValueAtTime(.25,o),l.connect(cO.destination),this.duckingGainNode=cO.createGain(),this.duckingGainNode.connect(l),this.mainGainNode=cO.createGain(),this.mainGainNode.connect(this.duckingGainNode),this.convolver=cO.createConvolver();const h=e=>{e&&(this.convolver.buffer=e,zO.audioBufferProperty.unlink(h))};zO.audioBufferProperty.link(h),this.reverbGainNode=cO.createGain(),this.reverbGainNode.connect(this.mainGainNode),this.reverbGainNode.gain.setValueAtTime(this._reverbLevel,cO.currentTime),this.convolver.connect(this.reverbGainNode),this.dryGainNode=cO.createGain(),this.dryGainNode.gain.setValueAtTime(1-this._reverbLevel,cO.currentTime),this.dryGainNode.gain.linearRampToValueAtTime(1-this._reverbLevel,cO.currentTime+XO),this.dryGainNode.connect(this.mainGainNode),a.categories.forEach(e=>{const t=cO.createGain();t.connect(this.convolver),t.connect(this.dryGainNode),this.gainNodesForCategories.set(e,t)}),pS.multilink([this.enabledProperty,t,e,i,n,r],(e,t,i,n,r,s)=>{const a=e&&t&&i&&n&&r&&!s?this._mainOutputLevel:0;this.mainGainNode.gain.linearRampToValueAtTime(a,cO.currentTime+XO)});const u=new gy(!1),c=()=>{u.value=this.duckingProperties.reduce((e,t)=>e||t.value,!1)};u.lazyLink(e=>{var t,i;const n=e?.05:.5,r=cO.currentTime;null===(t=this.duckingGainNode)||void 0===t||t.gain.cancelScheduledValues(r),null===(i=this.duckingGainNode)||void 0===i||i.gain.setTargetAtTime(e?.15:1,r,n)}),this.duckingProperties.addItemAddedListener(e=>{e.link(c);const t=i=>{i===e&&(i.unlink(c),this.duckingProperties.removeItemRemovedListener(t))};this.duckingProperties.addItemRemovedListener(t)});const d=()=>{window.removeEventListener("touchstart",p,!1),SV.userGestureEmitter.hasListener(p)&&SV.userGestureEmitter.removeListener(p)},p=()=>{"running"!==cO.state?(phet.log&&phet.log("audio context not running, attempting to resume, state = "+cO.state),cO.resume().then(()=>{phet.log&&phet.log("resume appears to have succeeded, phetAudioContext.state = "+cO.state),d()}).catch(e=>{const t="error when trying to resume audio context, err = "+e;console.error(t)})):d()};window.addEventListener("touchstart",p,!1),SV.userGestureEmitter.addListener(p);let m=cO.state;_O.addStateChangeListener(cO,e=>{phet.log&&phet.log(`audio context state changed, old state = ${m}, new state = ${e}, audio context time = ${cO.currentTime}`),"running"!==e?(window.addEventListener("touchstart",p,!1),SV.userGestureEmitter.hasListener(p)||SV.userGestureEmitter.addListener(p)):console.log("AudioContext is now running."),m=e}),this.initialized=!0,this.soundGeneratorsAwaitingAdd.forEach(e=>{this.addSoundGenerator(e.soundGenerator,e.soundGeneratorAddOptions)}),this.soundGeneratorsAwaitingAdd.length=0}hasSoundGenerator(e){return _.some(this.soundGeneratorInfoArray,t=>t.soundGenerator===e)}addSoundGenerator(e,t){if(void 0===t&&(t={}),!this.initialized)return void this.soundGeneratorsAwaitingAdd.push({soundGenerator:e,soundGeneratorAddOptions:t});this.hasSoundGenerator(e);const i=Vo()({sonificationLevel:WO.BASIC,associatedViewNode:null,categoryName:null},t);null===i.categoryName?(e.connect(this.convolver),e.connect(this.dryGainNode)):e.connect(this.gainNodesForCategories.get(i.categoryName));const n={soundGenerator:e,sonificationLevel:i.sonificationLevel};if(this.soundGeneratorInfoArray.push(n),e.addEnableControlProperty(this.enabledProperty),i.sonificationLevel===WO.EXTRA&&e.addEnableControlProperty(this.extraSoundEnabledProperty),i.associatedViewNode){const t=new yy(i.associatedViewNode);e.addEnableControlProperty(t),this.viewNodeDisplayedPropertyMap.set(e,t)}}removeSoundGenerator(e){if(!this.initialized){const t=this.soundGeneratorsAwaitingAdd.filter(t=>t.soundGenerator===e);for(;t.length>0;)rm(this.soundGeneratorsAwaitingAdd,t[0]),t.shift();return}let t=null;for(let i=0;i<this.soundGeneratorInfoArray.length;i++)if(this.soundGeneratorInfoArray[i].soundGenerator===e){t=this.soundGeneratorInfoArray[i];break}e.isConnectedTo(this.convolver)&&e.disconnect(this.convolver),e.isConnectedTo(this.dryGainNode)&&e.disconnect(this.dryGainNode),this.gainNodesForCategories.forEach(t=>{e.isConnectedTo(t)&&e.disconnect(t)}),t&&this.soundGeneratorInfoArray.splice(this.soundGeneratorInfoArray.indexOf(t),1),this.viewNodeDisplayedPropertyMap.has(e)&&(this.viewNodeDisplayedPropertyMap.get(e).dispose(),this.viewNodeDisplayedPropertyMap.delete(e))}setMainOutputLevel(e){this.initialized?(this._mainOutputLevel=e,this.enabledProperty.value&&this.mainGainNode.gain.linearRampToValueAtTime(e,cO.currentTime+XO)):console.warn("an attempt was made to set the main output level on an uninitialized sound manager, ignoring")}set mainOutputLevel(e){this.setMainOutputLevel(e)}get mainOutputLevel(){return this.getMainOutputLevel()}getMainOutputLevel(){return this._mainOutputLevel}setOutputLevelForCategory(e,t){if(!this.initialized)return void console.warn("an attempt was made to set the output level for a sound category on an uninitialized sound manager, ignoring");const i=this.gainNodesForCategories.get(e);i&&i.gain.setValueAtTime(t,cO.currentTime)}addDuckingProperty(e){this.duckingProperties.add(e)}removeDuckingProperty(e){this.duckingProperties.remove(e)}getOutputLevelForCategory(e){if(!this.initialized)return console.warn("an attempt was made to get the output level for a sound category on an uninitialized sound manager, returning 0"),0;const t=this.gainNodesForCategories.get(e);return t.gain.value}setReverbLevel(e){if(this.initialized){if(e!==this._reverbLevel){const t=cO.currentTime;this.reverbGainNode.gain.linearRampToValueAtTime(e,t+XO),this.dryGainNode.gain.linearRampToValueAtTime(1-e,t+XO),this._reverbLevel=e}}else console.warn("an attempt was made to set the reverb level on an uninitialized sound manager, ignoring")}set reverbLevel(e){this.setReverbLevel(e)}get reverbLevel(){return this.getReverbLevel()}getReverbLevel(){return this._reverbLevel}set enabled(e){this.enabledProperty.value=e}get enabled(){return this.enabledProperty.value}set sonificationLevel(e){this.extraSoundEnabledProperty.value=e===WO.EXTRA}get sonificationLevel(){return this.extraSoundEnabledProperty.value?WO.EXTRA:WO.BASIC}logGain(e,t){t=t||1;Date.now()}logMainGain(e){this.mainGainNode&&this.logGain(this.mainGainNode,e)}logReverbGain(e){this.reverbGainNode&&this.logGain(this.reverbGainNode,e)}};oO.register("soundManager",jO);const QO=jO;class KO{constructor(e,t){this.soundPlayer=e,this.playbackRate=t}play(){this.soundPlayer.setPlaybackRate(this.playbackRate),this.soundPlayer.play()}stop(){this.soundPlayer.stop()}}const ZO=new class{constructor(){this._basisSoundClip=null,this.soundPlayers=[]}getSoundClipInstance(){return this._basisSoundClip||(this._basisSoundClip=new BO(vO,{initialOutputLevel:.7,rateChangesAffectPlayingSounds:!1}),QO.addSoundGenerator(this._basisSoundClip,{categoryName:"user-interface"})),this._basisSoundClip}getSelectionSoundPlayer(e){if(!this.soundPlayers[e]){const t=Math.pow(2,-e/12);this.soundPlayers[e]=new KO(this.getSoundClipInstance(),t)}return this.soundPlayers[e]}};oO.register("multiSelectionSoundPlayerFactory",ZO);const JO=ZO;class $O extends(Tv(DS(cv))){constructor(e,t,i,n){const r=Vo()({centerColor:"black",radius:$O.DEFAULT_RADIUS,selectedColor:"rgb( 143, 197, 250 )",deselectedColor:"white",xSpacing:8,stroke:"black",soundPlayer:JO.getSelectionSoundPlayer(0),a11yNameAttribute:null,touchAreaXDilation:0,touchAreaYDilation:0,mouseAreaXDilation:0,mouseAreaYDilation:0,cursor:"pointer",disabledOpacity:Bg.DISABLED_OPACITY,tandem:Lm.REQUIRED,tandemNameSuffix:"RadioButton",visiblePropertyOptions:{phetioFeatured:!0},phetioEnabledPropertyInstrumented:!0,tagName:"input",inputType:"radio",containerTagName:"li",labelTagName:"label",appendLabel:!0,appendDescription:!0},n);super(),_defineProperty(this,"onInputEmitter",new hb),_defineProperty(this,"_isMouseAreaCustomized",!1),_defineProperty(this,"_isTouchAreaCustomized",!1),_defineProperty(this,"_isSettingAreas",!1),this.value=t;const s=new cv,a=new AA(r.radius/3,{fill:r.centerColor}),o=new AA(r.radius,{fill:r.selectedColor,stroke:r.stroke}),l=new cv({children:[o,a]});s.addChild(l);const h=new cv,u=new AA(r.radius,{fill:r.deselectedColor,stroke:r.stroke});h.addChild(u);const c=new cv({children:[s,h],pickable:!1}),d=()=>{i.left=u.right+r.xSpacing,i.centerY=u.centerY};i.boundsProperty.link(d);const p=new xA({});s.pickable=h.pickable=!1,i.pickable=!1,this.children=[c,i,p],this.constraint=new eq(this,c,i,p,r),this.constraint.updateLayout();const m=e=>{s.visible=e===t,h.visible=!s.visible};e.link(m);const g=()=>{const i=e.value;e.set(t),i!==e.value&&this.onInputEmitter.emit()},f=new Sx({fire:g,tandem:r.tandem.createTandem("fireListener")});this.addInputListener(f),this.onInputEmitter.addListener(()=>r.soundPlayer.play());const y={change:g};this.addInputListener(y),e.value===t&&this.setPDOMAttribute("checked","checked");const E=e=>{this.pdomChecked=e===t};e.link(E),null!==r.a11yNameAttribute&&this.setPDOMAttribute("name",r.a11yNameAttribute),this.mutate(r),this.disposeAquaRadioButton=()=>{this.constraint.dispose(),this.onInputEmitter.dispose(),this.removeInputListener(f),this.removeInputListener(y),e.unlink(E),e.unlink(m),i.boundsProperty.hasListener(d)&&i.boundsProperty.unlink(d),f.dispose()}}dispose(){this.disposeAquaRadioButton(),super.dispose()}}_defineProperty($O,"DEFAULT_RADIUS",7),_defineProperty($O,"TANDEM_NAME_SUFFIX","RadioButton");class eq extends gw{constructor(e,t,i,n,r){super(e),this.radioButton=e,this.radioNode=t,this.content=i,this.rectangle=n,this.options=r,this.radioButton.localPreferredWidthProperty.lazyLink(this._updateLayoutListener),this.addNode(i)}layout(){super.layout();const e=this.createLayoutProxy(this.content),t=e.minimumWidth,i=this.radioNode.width+this.options.xSpacing+t,n=Math.max(i,this.radioButton.localPreferredWidth||0);xv(this.content)&&(e.preferredWidth=n-this.radioNode.width-this.options.xSpacing),e.left=this.radioNode.right+this.options.xSpacing,e.centerY=this.radioNode.centerY,this.rectangle.rectBounds=this.radioNode.bounds.union(e.bounds).withMaxX(Math.max(this.radioNode.left+n,e.right)),this.radioButton._isSettingAreas=!0,this.radioButton._isTouchAreaCustomized||(this.radioButton.touchArea=this.radioButton.localBounds.dilatedXY(this.options.touchAreaXDilation,this.options.touchAreaYDilation)),this.radioButton._isMouseAreaCustomized||(this.radioButton.mouseArea=this.radioButton.localBounds.dilatedXY(this.options.mouseAreaXDilation,this.options.mouseAreaYDilation)),this.radioButton._isSettingAreas=!1,e.dispose(),this.radioButton.localMinimumWidth=i}dispose(){this.radioButton.localPreferredWidthProperty.unlink(this._updateLayoutListener),super.dispose()}}function tq(e,t){return e.map(e=>e.createNode(t&&e.tandemName?t.createTandem(e.tandemName):Lm.OPTIONAL))}fD.register("AquaRadioButton",$O);let iq=0;class nq extends Hw{constructor(e,t,i){iq++;const n=Vo()({touchAreaXDilation:0,touchAreaYDilation:0,mouseAreaXDilation:0,mouseAreaYDilation:0,orientation:"vertical",spacing:3,stretch:!0,disabledOpacity:Bg.DISABLED_OPACITY,tandem:Lm.REQUIRED,tandemNameSuffix:"RadioButtonGroup",visiblePropertyOptions:{phetioFeatured:!0},phetioEnabledPropertyInstrumented:!0,phetioFeatured:!0,tagName:"ul",labelTagName:"h3",ariaRole:"radiogroup",groupFocusHighlight:!0},i),r=tq(t,n.tandem);"vertical"===n.orientation&&(n.align=n.align||"left");const s=t.map((t,i)=>{const s=r[i];return new $O(e,t.value,s,No({a11yNameAttribute:"AquaRadioButtonGroup"+iq,labelContent:t.labelContent||null,soundPlayer:JO.getSelectionSoundPlayer(i),tandem:t.tandemName?n.tandem.createTandem(t.tandemName):n.tandem===Lm.OPT_OUT?Lm.OPT_OUT:Lm.REQUIRED,touchAreaXDilation:n.touchAreaXDilation,touchAreaYDilation:"vertical"===n.orientation?n.spacing/2:n.touchAreaYDilation,mouseAreaXDilation:n.mouseAreaXDilation,mouseAreaYDilation:"vertical"===n.orientation?n.spacing/2:n.mouseAreaYDilation},n.radioButtonOptions,t.options))});n.children=s,super(n),_defineProperty(this,"onInputEmitter",new hb),this.addAriaLabelledbyAssociation({thisElementName:C_.PRIMARY_SIBLING,otherNode:this,otherElementName:C_.LABEL_SIBLING});const a=new Kx({keys:["arrowLeft","arrowRight","arrowUp","arrowDown"],callback:e=>{e&&e.pointer.reserveForKeyboardDrag()}});this.addInputListener(a);const o=this.onRadioButtonInput.bind(this);for(let l=0;l<s.length;l++){s[l].onInputEmitter.addListener(o)}this.addLinkedElement(e,{tandemName:"property"}),this.disposeAquaRadioButtonGroup=()=>{this.removeInputListener(a),a.dispose(),s.forEach(e=>e.dispose()),this.onInputEmitter.dispose(),r.forEach(e=>e.dispose())},this.radioButtons=s}onRadioButtonInput(){this.onInputEmitter.emit()}dispose(){this.disposeAquaRadioButtonGroup(),super.dispose()}getButton(e){const t=_.find(this.radioButtons,t=>t.value===e);return t}}fD.register("AquaRadioButtonGroup",nq);const rq=new Ip("M1120 1280h-832q-66 0 -113 -47t-47 -113v-832q0 -66 47 -113t113 -47h832q66 0 113 47t47 113v832q0 66 -47 113t-113 47zM1408 1120v-832q0 -119 -84.5 -203.5t-203.5 -84.5h-832q-119 0 -203.5 84.5t-84.5 203.5v832q0 119 84.5 203.5t203.5 84.5h832 q119 0 203.5 -84.5t84.5 -203.5z").makeImmutable(),sq=new Ip("M1408 606v-318q0 -119 -84.5 -203.5t-203.5 -84.5h-832q-119 0 -203.5 84.5t-84.5 203.5v832q0 119 84.5 203.5t203.5 84.5h832q63 0 117 -25q15 -7 18 -23q3 -17 -9 -29l-49 -49q-10 -10 -23 -10q-3 0 -9 2q-23 6 -45 6h-832q-66 0 -113 -47t-47 -113v-832 q0 -66 47 -113t113 -47h832q66 0 113 47t47 113v254q0 13 9 22l64 64q10 10 23 10q6 0 12 -3q20 -8 20 -29zM1639 1095l-814 -814q-24 -24 -57 -24t-57 24l-430 430q-24 24 -24 57t24 57l110 110q24 24 57 24t57 -24l263 -263l647 647q24 24 57 24t57 -24l110 -110 q24 -24 24 -57t-24 -57z").makeImmutable(),aq="data:audio/mpeg;base64,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VxjMbjCAqV6+9lyLbLv3a0X6ESHnjmkrTgX6ewW628bWpy6aAAAEIBKAAYVGgQJzEA7MHBAeERhQBG6YsEF4lDMeEoCAUYKgI6ZVAYEguZjC2ZGtMcWpghOAQLKNr1LwVPu2Wuurc61Zm1tOXWe/o1tDZJ5cXoLq47k/vbkMSqQ57UHqbUISVThclJqqsAa1V3dqUsXjENcTVSBUCQHmLDZKQCFtO+lwC+DVGKFZhA8Ck5ACX2THBAR54Dl4c+jQuNtZdZ7rPuOGX//7cMTJAk6AYtSvdwcB3graIe684Jd3Kc5TLcMqa1j+V2z++ZfljKYdvVqa/VlNNTWpkJR7VjzOVVd5NBQlGc8z5NIkUcNIozLbzkcqq84/8kUcf1PnK74dLEkq30DAFGtNIonJMclvNIy5wMFJGkUZk4lppFE4ldVr+qreaiclZEjO/scSJEtxTEFNRTMuOTguM6qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqCQACQKKEgQswmgpKTiyiyizTjSizDzDy2eLzc/ypo0osoCEihIoDEA5BDcqWco0FBgUUBgQsQLAzjSizDzDy2drzcqpo0ov/+3LE5QJOoF7PjnWHApQz1oW8mbkoso404so8w+GdnZ4tv//+7VNSUWUWUKEihIELECxAoSBFmHxcNebNGlFmnCRQkCFiBYkUJFAYgWIFgZRZRZh5h9VVVUUJppI1VUxBTUUzLjk4LjNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7cMS2A9IFejpDGM3IAAA0gAAABFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU=",oq=aO(cO,aq),lq=JD.createLock(aq),hq=new hO;let uq=!1;const cq=()=>{uq||(lq(),uq=!0)},dq=cO.decodeAudioData(oq.buffer,e=>{null===hq.audioBufferProperty.value&&(hq.audioBufferProperty.set(e),cq())},e=>{console.warn("decode of audio data failed, using stubbed sound, error: "+e),hq.audioBufferProperty.set(cO.createBuffer(1,1,cO.sampleRate)),cq()});dq&&dq.then(e=>{null===hq.audioBufferProperty.value&&(hq.audioBufferProperty.set(e),cq())}).catch(e=>{console.warn("promise rejection caught for audio decode, error = "+e),cq()});const pq=hq;class mq{constructor(e,t){const i=Vo()({soundClipOptions:{},soundManagerOptions:{}},t);this._soundClip=new BO(e,i.soundClipOptions),QO.addSoundGenerator(this._soundClip,i.soundManagerOptions)}play(){this._soundClip.play()}stop(){this._soundClip.stop()}getSoundClip(){return this._soundClip}}oO.register("SoundClipPlayer",mq);const gq=mq,fq=new gq(pq,{soundClipOptions:{initialOutputLevel:.7},soundManagerOptions:{categoryName:"user-interface"}});oO.register("checkboxCheckedSoundPlayer",fq);const yq=fq,Eq="data:audio/mpeg;base64,//swxAAAB3BPLHWkgAEQCy03MPADAYAEAMYCIAZnV5vYJv2ZoxqgRhBhkBBkRJhwZa9g7/tbYe1+jC4beogQMZ4Z5zn7mgQQdxOH//////6SQAIzbNJJdtgAAAAAAHjcV2B1EBJLBB4wV9rCWp5eq0EHE43FpgLhkjdNEqGhFqhSQlQ4TwqZdZ7fN/Hm6YKiu/33NoUAACApAAAI//syxAOCSGxzQ123gDkDjCZJvLDmDQ0HhMRgBVEjBws2OIM9Cky1VU0REAhgK47nqWwHAkIYcB7ePHvXeo2cV1nG4uL6rjXjzXt951bbjQs/hQuyxEeFQaEGUgRohuYvQkhIfrBnlFyQoUla/qMye4qGxUqjhxTJIFPCOfamTewcOH2SkYCFVa21OLZrySygx+bV4B1xgBhA1DB0Bf/7MsQFAAfISyw1x4AxL4ssNzGAAigYRigH0YoI18mGQKOgZ+FY0UWnyRsLJgZYCShStOpdQYKdeV5/q9jbIDYPkLAYtiTETvrZLIYEb2u2uogAAAAAAhkChusjjbfkXleOGpiySKjhjUIlMla3JEsHQqgBs2ns50DIPtDIgjJE46JnUPRPPPOG5G8/yKxQADAZFTP1KgAAIX0AGkv/+zLEA4IIRJ9DPaUAMQuN5o2tmYqinck4ucZbhxEBHFls3WFfhr6dyvz3zgxEmEABChAREwQIwJRfc1jx6QHFWNNqQkrG5wvNNbdf1b//kxUACACHIGAlgmUgpccbebl+BkKCZXQyCAwpKkwRUzEk7AIAwgTBahUNNHisAuFoYmM12rXbbUJ2v5Cwa++fDf///+mgDERUoJgUemjg//swxAUDSExLJi3phxEQCmQBrbx0BkCOdSyG/xxiJyFwYUOAZiABRh0Zh64k8Pj7NAJTjWFStFgyvxBK5IhTLDstCt9Y/SAqpLqiYU1gRqYoIfCMbtwYtoG77YMaQdBGoPhoQOPIxjIsCrswBnOHTzqNAI9TIQEiAQc0oSX9JssKWBt5O9HJA8fEWBHxeXEQzXUAKsQAXwMjEM3O//syxAUCSDxVLM1lJzEbCWPFrmxBNqHM4RC+k5ZUzwUcEaSmKZZCdwJRBNZkJiwDdFN36YdSqdqUT6pYDZ5ScxSDVfZPSpL8M//b6NxDNtjDhTpxDmMDKQMMw1k08tNDTxrGMKLQxRDCMevDKlACBZi1WYsoiEOBwEwdI9e0vdBptNKZfgzJsVH29qtOpUET8k9v4mAAAExTEHgUKP/7MsQEggfQUyJNc0QA2AklmY2YpukjMG6N4KPFG4xmOjdBnIQqBgcbgGQGmcNGdaHtBQplqcsNdnbkroa0zXiUXxyr9wz/WF9usagQAkSHDHulGU3DjA44xIgQwADplHVAGUl7G/MbPAcXSMAgRGUSoN9OUp+zGuLf///V3//+ugKcCSTofFaj5oNcoyUgyJfAIDMwsQBGeEBQiGf/+zLEDgJHUD8UDOksQN6F39wxsAA60sBDGHr5bR5oZBEMkscKhnEIJPCh6j//////+n6AmBgKjhFZNEIgmCyGD2UQjAVEweC2peqxVyOIpL/WDXZ7cNcFTtQdJCEFQVGLPFgaUHJ6dhojDlVttOCJU4BB0qsXplV/tncqptv/p//+n//6abf////9QTTTTRVV9UEJK0kIixWmqoc///swxBiDxvgCi4CEYAgAADSAAAAE/1TTVEWK6UxBTUUzLjk5LjNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",vq=aO(cO,Eq),Aq=JD.createLock(Eq),bq=new hO;let Sq=!1;const _q=()=>{Sq||(Aq(),Sq=!0)},xq=cO.decodeAudioData(vq.buffer,e=>{null===bq.audioBufferProperty.value&&(bq.audioBufferProperty.set(e),_q())},e=>{console.warn("decode of audio data failed, using stubbed sound, error: "+e),bq.audioBufferProperty.set(cO.createBuffer(1,1,cO.sampleRate)),_q()});xq&&xq.then(e=>{null===bq.audioBufferProperty.value&&(bq.audioBufferProperty.set(e),_q())}).catch(e=>{console.warn("promise rejection caught for audio decode, error = "+e),_q()});const wq=new gq(bq,{soundClipOptions:{initialOutputLevel:.7},soundManagerOptions:{categoryName:"user-interface"}});oO.register("checkboxUncheckedSoundPlayer",wq);const Tq=wq,Pq={valueType:"boolean"},Cq=Lh(.025,0,0,0,-.025,0,0,0,1),Vq=rq.transformed(Cq),Rq=sq.transformed(Cq);class Nq extends(Tv(DS(cv))){constructor(e,t,i){const n=Vo()({spacing:5,boxWidth:21,checkboxColor:"black",checkboxColorBackground:"white",touchAreaXDilation:0,touchAreaYDilation:0,mouseAreaXDilation:0,mouseAreaYDilation:0,checkedSoundPlayer:yq,uncheckedSoundPlayer:Tq,phetioLinkProperty:!0,cursor:"pointer",disabledOpacity:Bg.DISABLED_OPACITY,tandem:Lm.REQUIRED,tandemNameSuffix:"Checkbox",phetioEventType:vm.USER,visiblePropertyOptions:{phetioFeatured:!0},phetioEnabledPropertyInstrumented:!0,phetioReadOnly:Km.DEFAULT_OPTIONS.phetioReadOnly,phetioFeatured:!0,tagName:"input",inputType:"checkbox",appendDescription:!0,voicingCheckedObjectResponse:null,voicingUncheckedObjectResponse:null,checkedContextResponse:null,uncheckedContextResponse:null,voiceNameResponseOnSelection:!0},i);super(),_defineProperty(this,"_isMouseAreaCustomized",!1),_defineProperty(this,"_isTouchAreaCustomized",!1),_defineProperty(this,"_isSettingAreas",!1);const r=new yb(()=>{e.value=!e.value,Fo(e.value,Pq),e.value?(n.checkedSoundPlayer.play(),n.checkedContextResponse&&this.alertDescriptionUtterance(n.checkedContextResponse),this.voicingSpeakResponse({nameResponse:n.voiceNameResponseOnSelection?this.voicingNameResponse:null,objectResponse:lS.alertableToText(n.voicingCheckedObjectResponse),contextResponse:lS.alertableToText(n.checkedContextResponse)})):(n.uncheckedSoundPlayer.play(),n.uncheckedContextResponse&&this.alertDescriptionUtterance(n.uncheckedContextResponse),this.voicingSpeakResponse({nameResponse:n.voiceNameResponseOnSelection?this.voicingNameResponse:null,objectResponse:lS.alertableToText(n.voicingUncheckedObjectResponse),contextResponse:lS.alertableToText(n.uncheckedContextResponse)}))},{parameters:[],tandem:n.tandem.createTandem("toggleAction"),phetioDocumentation:"Emits when user input causes the checkbox to toggle, emitting a single arg: the new boolean value of the checkbox state.",phetioReadOnly:!0,phetioEventType:vm.USER});this.backgroundNode=new xA(0,-n.boxWidth,.95*n.boxWidth,.95*n.boxWidth,.2*n.boxWidth,.2*n.boxWidth,{fill:n.checkboxColorBackground}),this.uncheckedNode=new aA(Vq,{fill:n.checkboxColor});const s=n.boxWidth/this.uncheckedNode.width;this.uncheckedNode.scale(s),this.checkedNode=new aA(Rq,{scale:s,fill:n.checkboxColor});const a=new cv({children:[this.backgroundNode,this.checkedNode,this.uncheckedNode]}),o=new xA({});this.children=[a,t,o],this.constraint=new Mq(this,a,this.checkedNode,t,o,n),this.constraint.updateLayout(),t.pickable=!1,t.pdomVisible=!1;const l=new Sx({fire:()=>r.execute(),tandem:n.tandem.createTandem("fireListener")});this.addInputListener(l);const h=e=>{this.checkedNode.visible=e,this.uncheckedNode.visible=!e,this.pdomChecked=e};e.link(h),this.mutate(n),this.setExcludeLabelSiblingFromInput(),n.phetioLinkProperty&&this.addLinkedElement(e,{tandemName:"property"}),this.disposeCheckbox=()=>{o.dispose(),this.backgroundNode.dispose(),this.uncheckedNode.dispose(),this.checkedNode.dispose(),a.dispose(),l.dispose(),e.hasListener(h)&&e.unlink(h),r.dispose()}}dispose(){this.constraint.dispose(),this.disposeCheckbox(),super.dispose()}setCheckboxColorBackground(e){this.backgroundNode.fill=e}set checkboxColorBackground(e){this.setCheckboxColorBackground(e)}get checkboxColorBackground(){return this.getCheckboxColorBackground()}getCheckboxColorBackground(){return this.backgroundNode.fill}setCheckboxColor(e){this.checkedNode.fill=this.uncheckedNode.fill=e}set checkboxColor(e){this.setCheckboxColor(e)}get checkboxColor(){return this.getCheckboxColor()}getCheckboxColor(){return this.checkedNode.fill}setMouseArea(e){return this._isSettingAreas||(this._isMouseAreaCustomized=!0),super.setMouseArea(e)}setTouchArea(e){return this._isSettingAreas||(this._isTouchAreaCustomized=!0),super.setTouchArea(e)}}class Mq extends gw{constructor(e,t,i,n,r,s){super(e),this.checkbox=e,this.checkboxNode=t,this.checkedNode=i,this.content=n,this.rectangle=r,this.options=s,this.checkbox.localPreferredWidthProperty.lazyLink(this._updateLayoutListener),this.addNode(n)}layout(){super.layout();const e=this.createLayoutProxy(this.content),t=e.minimumWidth,i=this.checkedNode.right-this.checkboxNode.left,n=i+this.options.spacing+t,r=Math.max(n,this.checkbox.localPreferredWidth||0);xv(this.content)&&null!==this.checkbox.localPreferredWidth&&(e.preferredWidth=r-i-this.options.spacing),e.left=this.checkedNode.right+this.options.spacing,e.centerY=this.checkedNode.centerY,this.rectangle.rectBounds=this.checkboxNode.bounds.union(e.bounds).withMaxX(Math.max(this.checkboxNode.left+r,e.right)),this.checkbox._isSettingAreas=!0,this.checkbox._isTouchAreaCustomized||(this.checkbox.touchArea=this.checkbox.localBounds.dilatedXY(this.options.touchAreaXDilation,this.options.touchAreaYDilation)),this.checkbox._isMouseAreaCustomized||(this.checkbox.mouseArea=this.checkbox.localBounds.dilatedXY(this.options.mouseAreaXDilation,this.options.mouseAreaYDilation)),this.checkbox._isSettingAreas=!1,e.dispose(),this.checkbox.localMinimumWidth=n}dispose(){this.checkbox.localPreferredWidthProperty.unlink(this._updateLayoutListener),super.dispose()}}fD.register("Checkbox",Nq);class kq extends ty{constructor(e,t){const i=Vo()({enumeration:e.enumeration},t);super(e,Vo()({validValues:i.enumeration.values,phetioValueType:bh({enumeration:i.enumeration})},i))}}ko.register("EnumerationProperty",kq);const Lq="data:audio/mpeg;base64,//swxAAABlAhPLTAgDE1De+/HoACAH4CwkCAJDo5gDgPRksn2WLHOB8EHShd5cHwfBBwgBBOJw/UCAY/lAxWD/4DB9+CH/6XQjMTIIcYUIQPQIRAIBAACUIawkYq7IQ/BawVqEc7mTjD+OFygBAnHbHq7UkLJ8aCnnrZlPpg3IkRJBgPH/MCQCI985/yAnHAAhmv3lHuAgAgAxJF//syxAOACHQpa7zBAAD8EunxpI3HUCEZHQlA2EYuDsSjE5EkSQGhUDYDxOARLoiBmIgalVgq4qWeWBqsNYKywNO+p/sxFyKwVOlXRFDtZ0S86oQ0C2W+wBOmlaWuS6+BIqZMz+AYy3FuwBkKXM2idVoKlYwUd/oIGgsbLpEbaCsmIyZRtbw6TPwj+mYmGr8QqnGHBLo3LKAAxKabZ//7MsQGAAhsl1OsPMcxAo3mpbCaAvIuuQRmW4WNHhDBJnoBORIlh+I9dvGCTCKP0kzo7rHHTi87diQ2XqnRN77y8lnKUl8zf+X0Fu0iCDV/9AP7el8Cw8raZKqiYShe+6bzYk0zXmEuGnBDcQhyRzPeI4Jbsmj5OxzZVhSX9adVU4Kk9r9esE3etv+/6wUIg3Wm62nA3Ab0EIcLUQ7/+zLECABGICs9oemDMLwEZrQcvFYyDBCUCgUAwQCUSvgROof5poGn9O7o70P/X9P/T+360+lAhIJVtyuNDljXzM7Ek0fGUB/ltZQF8iD7dBcVTs00f31POqR0/V/q/pjEe1z3jyAAQRBHGmSBEEVK6QIYH2miQZKNfgCVtiH9vVLp+w7an/d0jdUx9VnqZIJSvFtsaUFKKFBVCzoe//swxBwABSAhLaDl4nCsA+a0fDyG3vbgKx5OhNXyuPYt7kJJSg9B6heqxP93q/9P6IwSQ8LbYIFBVUF85RwseJPX6+Q7qIq7f/8ayokh7P//V8oyAABbhbGEIBBhOJgEGTBx6KjUiosS54l6y0i3jOz/6f///RVMQU1FMy45OS41VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//syxDWABEQTMaCF4HCNAmL0EJgGVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ==",Iq=aO(cO,Lq),Bq=JD.createLock(Lq),Dq=new hO;let Oq=!1;const qq=()=>{Oq||(Bq(),Oq=!0)},Yq=cO.decodeAudioData(Iq.buffer,e=>{null===Dq.audioBufferProperty.value&&(Dq.audioBufferProperty.set(e),qq())},e=>{console.warn("decode of audio data failed, using stubbed sound, error: "+e),Dq.audioBufferProperty.set(cO.createBuffer(1,1,cO.sampleRate)),qq()});Yq&&Yq.then(e=>{null===Dq.audioBufferProperty.value&&(Dq.audioBufferProperty.set(e),qq())}).catch(e=>{console.warn("promise rejection caught for audio decode, error = "+e),qq()});const Hq=new gq(Dq,{soundClipOptions:{initialOutputLevel:.5},soundManagerOptions:{categoryName:"user-interface"}});oO.register("pushButtonSoundPlayer",Hq);const Gq=Hq;class Fq extends Fl{}_defineProperty(Fq,"IDLE",new(nt=Fq)),_defineProperty(Fq,"OVER",new nt),_defineProperty(Fq,"PRESSED",new nt),_defineProperty(Fq,"enumeration",new Xl(nt)),fD.register("ButtonInteractionState",Fq);class zq extends Bb{constructor(e){super([e.focusedProperty,e.overProperty,e.looksOverProperty,e.looksPressedProperty],(e,t,i,n)=>i&&!n?Fq.OVER:(t||e)&&n?Fq.PRESSED:Fq.IDLE,{valueType:Fq})}}fD.register("PushButtonInteractionStateProperty",zq);class Uq extends qb{constructor(e){const t=Vo()({startCallback:_.noop,endCallback:_.noop,tandem:Lm.REQUIRED,phetioState:Km.DEFAULT_OPTIONS.phetioState,phetioReadOnly:Km.DEFAULT_OPTIONS.phetioReadOnly,phetioFeatured:Km.DEFAULT_OPTIONS.phetioFeatured},e);t.enabledPropertyOptions=No({phetioState:t.phetioState,phetioReadOnly:t.phetioReadOnly,phetioDocumentation:"When disabled, the button is grayed out and cannot be pressed",phetioFeatured:!0},t.enabledPropertyOptions),super(t),this.overProperty=new gy(!1),this.downProperty=new gy(!1,{reentrant:!0}),this.focusedProperty=new gy(!1),this.looksPressedProperty=new gy(!1),this.looksOverProperty=new gy(!1),this.produceSoundEmitter=new hb,this.interrupted=!1,this.listeners=[],this.looksPressedMultilink=null,this.looksOverMultilink=null,this.downProperty.lazyLink(e=>{e?t.startCallback():t.endCallback(this.looksOverProperty.get())}),this.enabledProperty.link(e=>{if(!e)for(let t=0;t<this.listeners.length;t++){const e=this.listeners[t];e.interrupt&&e.interrupt()}}),this.disposeButtonModel=()=>{this.overProperty.dispose(),this.downProperty.dispose(),this.produceSoundEmitter.dispose(),this.looksPressedMultilink&&this.looksPressedMultilink.dispose(),this.looksOverMultilink&&this.looksOverMultilink.dispose(),this.listeners=[]}}dispose(){this.disposeButtonModel(),super.dispose()}createPressListener(e){var t=this;e=No({canStartPress:()=>this.enabledProperty.value},e);const i=new Ax(e);this.listeners.push(i),i.isPressedProperty.lazyLink(e=>{this.interrupted=i.interrupted,this.downProperty.set(e)}),i.isOverProperty.lazyLink(this.overProperty.set.bind(this.overProperty)),i.isFocusedProperty.lazyLink(this.focusedProperty.set.bind(this.focusedProperty)),this.looksPressedMultilink&&this.looksPressedMultilink.dispose(),this.looksOverMultilink&&this.looksOverMultilink.dispose();const n=this.listeners.map(e=>e.looksPressedProperty);n.push(this.downProperty),this.looksPressedMultilink=pS.multilinkAny(n,(function(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];t.looksPressedProperty.value=_.reduce(i,(e,t)=>e||t,!1)}));const r=this.listeners.map(e=>e.looksOverProperty);return this.looksOverMultilink=pS.multilinkAny(r,(function(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];t.looksOverProperty.value=_.reduce(i,(e,t)=>e||t,!1)})),i}}fD.register("ButtonModel",Uq);class Wq extends Uq{constructor(e){const t=Vo()({fireOnDown:!1,listener:null,interruptListener:null,fireOnHold:!1,fireOnHoldDelay:400,fireOnHoldInterval:100,tandem:Lm.REQUIRED,phetioReadOnly:Km.DEFAULT_OPTIONS.phetioReadOnly},e);super(t),_defineProperty(this,"startEvent",null),this.isFiringProperty=new gy(!1),this.firedEmitter=new hb({tandem:t.tandem.createTandem("firedEmitter"),phetioDocumentation:"Emits when the button is fired",phetioReadOnly:t.phetioReadOnly,phetioEventType:vm.USER,hasListenerOrderDependencies:!0}),t.interruptListener&&this.firedEmitter.addListener(()=>{t.interruptListener(this.startEvent)}),null!==t.listener&&this.firedEmitter.addListener(t.listener),t.fireOnHold&&(this.timer=new bx({callback:this.fire.bind(this),delay:t.fireOnHoldDelay,interval:t.fireOnHoldInterval}));const i=e=>{if(e){var i,n,r,s;if(this.enabledProperty.get())this.startEvent=(null===(i=phet)||void 0===i||null===(n=i.joist)||void 0===n||null===(r=n.display)||void 0===r||null===(s=r._input)||void 0===s?void 0:s.currentSceneryEvent)||null,t.fireOnDown&&this.fire(),this.timer&&this.timer.start(),(t.fireOnDown||this.timer)&&this.produceSoundEmitter.emit()}else{const e=!t.fireOnDown&&(this.overProperty.get()||this.focusedProperty.get())&&this.enabledProperty.get()&&!this.interrupted;this.timer?this.timer.stop(e):e&&(this.produceSoundEmitter.emit(),this.fire())}};this.downProperty.link(i);const n=e=>{!e&&this.timer&&this.timer.stop(!1)};this.enabledProperty.link(n),this.disposePushButtonModel=()=>{this.isFiringProperty.value=!1,this.isFiringProperty.dispose(),this.firedEmitter.dispose(),this.downProperty.unlink(i),this.enabledProperty.unlink(n),this.timer&&(this.timer.dispose(),this.timer=null)}}dispose(){this.disposePushButtonModel(),super.dispose()}addListener(e){this.firedEmitter.addListener(e)}removeListener(e){this.firedEmitter.removeListener(e)}fire(){this.isFiringProperty.value=!0,this.firedEmitter.emit(),this.isFiringProperty.value=!1}}fD.register("PushButtonModel",Wq);const Xq={LIGHT_BLUE:new Hg(153,206,255),LIGHT_GRAY:new Hg(220,220,220)},jq=new BE(.7),Qq=new IE(1.2);class Kq extends(Iv(DS(cv))){constructor(e,t,i,n){var r;const s=Vo()({content:null,minUnstrokedWidth:null,minUnstrokedHeight:null,xMargin:10,yMargin:5,xAlign:"center",yAlign:"center",xContentOffset:0,yContentOffset:0,baseColor:Xq.LIGHT_BLUE,cursor:"pointer",buttonAppearanceStrategy:Kq.FlatAppearanceStrategy,buttonAppearanceStrategyOptions:{},contentAppearanceStrategy:null,contentAppearanceStrategyOptions:{},enabledAppearanceStrategy:(e,t,i,n)=>{i.filters=e?[]:[jq,Qq],n&&(n.filters=e?[]:[DE.FULL],n.opacity=e?1:Bg.DISABLED_OPACITY)},disabledColor:Xq.LIGHT_GRAY,aspectRatio:null,tagName:"button",visiblePropertyOptions:{phetioFeatured:!0},phetioEnabledPropertyInstrumented:!0},n);s.listenerOptions=No({tandem:null===(r=s.tandem)||void 0===r?void 0:r.createTandem("pressListener")},s.listenerOptions),s.enabledProperty=e.enabledProperty,super(),_defineProperty(this,"buttonNodeConstraint",null),this.content=s.content,this.buttonModel=e,this._settableBaseColorProperty=new DA(s.baseColor),this._disabledColorProperty=new DA(s.disabledColor),this.baseColorProperty=new Rb([this._settableBaseColorProperty,this.enabledProperty,this._disabledColorProperty],(e,t,i)=>t?e:i),this._pressListener=e.createPressListener(s.listenerOptions),this.addInputListener(this._pressListener),t.fill=this.baseColorProperty,this.addChild(t);const a=new s.buttonAppearanceStrategy(t,i,this.baseColorProperty,s.buttonAppearanceStrategyOptions);let o;s.contentAppearanceStrategy&&s.content&&(o=new s.contentAppearanceStrategy(s.content,i,s.contentAppearanceStrategyOptions)),this.maxLineWidth=a.maxLineWidth;let l=null,h=null;if(s.content){const e=s.content;e.pickable=!1,this.buttonNodeConstraint=new Zq(this,{content:s.content,xMargin:s.xMargin,yMargin:s.yMargin,maxLineWidth:this.maxLineWidth,minUnstrokedWidth:s.minUnstrokedWidth,minUnstrokedHeight:s.minUnstrokedHeight,aspectRatio:s.aspectRatio}),this.layoutSizeProperty=this.buttonNodeConstraint.layoutSizeProperty,l=new eT(e,{xAlign:s.xAlign,yAlign:s.yAlign,leftMargin:s.xMargin+s.xContentOffset,rightMargin:s.xMargin-s.xContentOffset,topMargin:s.yMargin+s.yContentOffset,bottomMargin:s.yMargin-s.yContentOffset}),h=pS.multilink([t.boundsProperty,this.layoutSizeProperty],(e,t)=>{l.alignBounds=Zl.point(e.center).dilatedXY(t.width/2,t.height/2)}),this.addChild(l)}else this.layoutSizeProperty=new mg(new My(s.minUnstrokedWidth+this.maxLineWidth,s.minUnstrokedHeight+this.maxLineWidth));this.mutate(s),this.enabledProperty.link(e=>s.enabledAppearanceStrategy(e,this,t,l)),this.disposeButtonNode=()=>{l&&l.dispose(),h&&h.dispose(),a.dispose&&a.dispose(),o&&o.dispose&&o.dispose(),this._pressListener.dispose(),this.baseColorProperty.dispose()}}dispose(){this.buttonNodeConstraint&&this.buttonNodeConstraint.dispose(),this.disposeButtonNode(),super.dispose()}setBaseColor(e){this._settableBaseColorProperty.paint=e}set baseColor(e){this.setBaseColor(e)}get baseColor(){return this.getBaseColor()}getBaseColor(){return this._settableBaseColorProperty.paint}pdomClick(){this._pressListener.click(null)}isPDOMClicking(){return this._pressListener.pdomClickingProperty.get()}}class Zq extends gw{constructor(e,t){super(e),_defineProperty(this,"layoutSizeProperty",new mg(new My(0,0))),_defineProperty(this,"isFirstLayout",!0),_defineProperty(this,"lastLocalPreferredWidth",0),_defineProperty(this,"lastLocalPreferredHeight",0),this.buttonNode=e,this.content=t.content,this.xMargin=t.xMargin,this.yMargin=t.yMargin,this.maxLineWidth=t.maxLineWidth,this.minUnstrokedWidth=t.minUnstrokedWidth,this.minUnstrokedHeight=t.minUnstrokedHeight,this.aspectRatio=t.aspectRatio,this.buttonNode.localPreferredWidthProperty.lazyLink(this._updateLayoutListener),this.buttonNode.localPreferredHeightProperty.lazyLink(this._updateLayoutListener),this.addNode(this.content,!1),this.layout()}layout(){super.layout();const e=this.buttonNode,t=this.content;let i=Math.max(this.isFirstLayout||e.widthSizable?(xv(t)?t.minimumWidth||0:t.width)+2*this.xMargin:e.localMinimumWidth,null===this.minUnstrokedWidth?0:this.minUnstrokedWidth+this.maxLineWidth),n=Math.max(this.isFirstLayout||e.heightSizable?(Vv(t)?t.minimumHeight||0:t.height)+2*this.yMargin:e.localMinimumHeight,null===this.minUnstrokedHeight?0:this.minUnstrokedHeight+this.maxLineWidth);null!==this.aspectRatio&&(i<n*this.aspectRatio&&(i=n*this.aspectRatio),n<i/this.aspectRatio&&(n=i/this.aspectRatio)),this.lastLocalPreferredWidth=this.isFirstLayout||xv(e)?Math.max(i,e.localPreferredWidth||0):this.lastLocalPreferredWidth,this.lastLocalPreferredHeight=this.isFirstLayout||Vv(e)?Math.max(n,e.localPreferredHeight||0):this.lastLocalPreferredHeight,this.isFirstLayout=!1,this.layoutSizeProperty.value=new My(this.lastLocalPreferredWidth,this.lastLocalPreferredHeight),e.localMinimumWidth=i,e.localMinimumHeight=n}dispose(){this.buttonNode.localPreferredWidthProperty.unlink(this._updateLayoutListener),this.buttonNode.localPreferredHeightProperty.unlink(this._updateLayoutListener),super.dispose()}}Kq.FlatAppearanceStrategy=class{constructor(e,t,i,n){const r=new DA(i,{luminanceFactor:.4}),s=new DA(i,{luminanceFactor:-.4}),a=i,o=r,l=s,h=No({stroke:s},n),u="number"==typeof h.lineWidth?h.lineWidth:1;function c(t){switch(t){case Fq.IDLE:e.fill=a;break;case Fq.OVER:e.fill=o;break;case Fq.PRESSED:e.fill=l;break;default:throw new Error("unsupported interactionState: "+t)}}e.stroke=h.stroke||s,e.lineWidth=u,this.maxLineWidth=e.hasStroke()?u:0,e.cachedPaints=[a,o,l],t.link(c),this.disposeFlatAppearanceStrategy=()=>{t.hasListener(c)&&t.unlink(c),r.dispose(),s.dispose()}}dispose(){this.disposeFlatAppearanceStrategy()}},fD.register("ButtonNode",Kq);class Jq extends Kq{constructor(e,t,i){const n=Vo()({size:null,minWidth:10,minHeight:10,xMargin:8,yMargin:5,touchAreaXDilation:0,touchAreaYDilation:0,mouseAreaXDilation:0,mouseAreaYDilation:0,touchAreaXShift:0,touchAreaYShift:0,mouseAreaXShift:0,mouseAreaYShift:0,stroke:null,lineWidth:.5,cornerRadius:4,leftTopCornerRadius:null,rightTopCornerRadius:null,leftBottomCornerRadius:null,rightBottomCornerRadius:null,buttonAppearanceStrategy:Jq.ThreeDAppearanceStrategy},i);let r,s;n.content,n.size?(n.minUnstrokedWidth=n.size.width,n.minUnstrokedHeight=n.size.height):(void 0!==n.minWidth&&(n.minUnstrokedWidth=n.minWidth),void 0!==n.minHeight&&(n.minUnstrokedHeight=n.minHeight)),n.buttonAppearanceStrategyOptions||(n.buttonAppearanceStrategyOptions={stroke:n.stroke,lineWidth:n.lineWidth}),n.size?(r=n.size.width,s=n.size.height):(r=Math.max(n.content?n.content.width+2*n.xMargin:0,n.minWidth),s=Math.max(n.content?n.content.height+2*n.yMargin:0,n.minHeight));const a=new aA($q(r,s,n));if(n.size&&n.content){const e=n.content,t=Math.min((n.size.width-2*n.xMargin)/e.width,(n.size.height-2*n.yMargin)/e.height);n.content=new cv({children:[e],scale:t})}super(e,a,t,n);let o=!0;pS.multilink([this.isWidthResizableProperty,this.isHeightResizableProperty,this.layoutSizeProperty],(e,t,i)=>{(e||t)&&(a.shape=$q(e?i.width-this.maxLineWidth:r,t?i.height-this.maxLineWidth:s,n)),(o||e||t)&&(this.touchArea=a.localBounds.dilatedXY(n.touchAreaXDilation,n.touchAreaYDilation).shiftedXY(n.touchAreaXShift,n.touchAreaYShift),this.mouseArea=a.localBounds.dilatedXY(n.mouseAreaXDilation,n.mouseAreaYDilation).shiftedXY(n.mouseAreaXShift,n.mouseAreaYShift)),o=!1})}}function $q(e,t,i){const n=Math.min(e/2,t/2);return Ip.roundedRectangleWithRadii(0,0,e,t,{topLeft:Math.min(n,null!==i.leftTopCornerRadius?i.leftTopCornerRadius:i.cornerRadius),topRight:Math.min(n,null!==i.rightTopCornerRadius?i.rightTopCornerRadius:i.cornerRadius),bottomLeft:Math.min(n,null!==i.leftBottomCornerRadius?i.leftBottomCornerRadius:i.cornerRadius),bottomRight:Math.min(n,null!==i.rightBottomCornerRadius?i.rightBottomCornerRadius:i.cornerRadius)})}Jq.ThreeDAppearanceStrategy=class{constructor(e,t,i,n){const r=n&&n.stroke?n.stroke:new DA(i,{luminanceFactor:-.4}),s=n&&void 0!==n.lineWidth?n.lineWidth:.5,a=Vo()({stroke:r,lineWidth:s,overStroke:r,overLineWidth:s,overFill:i,overButtonOpacity:1,selectedStroke:r,selectedLineWidth:s,selectedButtonOpacity:1,deselectedStroke:r,deselectedLineWidth:s,deselectedButtonOpacity:1},n),o=new DA(i,{luminanceFactor:.7}),l=new DA(i,{luminanceFactor:.5}),h=new DA(i,{luminanceFactor:.2}),u=new DA(i,{luminanceFactor:-.3}),c=new DA(i,{luminanceFactor:-.4}),d=new DA(i,{luminanceFactor:-.5}),p=new Rb([i],e=>e.withAlpha(0)),m=new Hg(255,255,255,.7),g=new aA(null,{stroke:a.stroke,lineWidth:a.lineWidth,pickable:!1});let f;e.addChild(g),this.maxLineWidth="number"==typeof a.lineWidth?a.lineWidth:0;const y=()=>{const n=e.shape.bounds.width,r=e.shape.bounds.height;g.shape=e.shape;const s=Math.min(7/r,1),c=Math.max(1-3/r,0),y=Math.min(7/n,1),E=Math.max(1-3/n,0),v=new mE(0,0,0,r).addColorStop(0,o).addColorStop(s,i).addColorStop(c,i).addColorStop(1,d),A=new mE(0,0,n,0).addColorStop(0,m).addColorStop(y,p).addColorStop(E,p).addColorStop(1,d),b=new mE(0,0,0,r).addColorStop(0,o).addColorStop(s,l).addColorStop(c,l).addColorStop(1,d),S=new mE(0,0,n,0).addColorStop(0,m).addColorStop(y/2,new Hg(255,255,255,0)).addColorStop(E,p).addColorStop(1,u),_=new mE(0,0,0,r).addColorStop(0,o).addColorStop(.67*s,u).addColorStop(c,h).addColorStop(1,d);e.cachedPaints=[v,b,_],g.cachedPaints=[A,S],f&&t.unlink(f),f=t=>{switch(t){case Fq.IDLE:e.fill=v,e.stroke=a.deselectedStroke,e.lineWidth=a.deselectedLineWidth,e.opacity=a.deselectedButtonOpacity,g.fill=A,g.opacity=a.deselectedButtonOpacity;break;case Fq.OVER:e.fill=b,e.stroke=a.overStroke,e.lineWidth=a.overLineWidth,e.opacity=a.overButtonOpacity,g.fill=S,g.opacity=a.overButtonOpacity;break;case Fq.PRESSED:e.fill=_,e.stroke=a.selectedStroke,e.lineWidth=a.selectedLineWidth,e.opacity=a.selectedButtonOpacity,g.fill=S,g.opacity=a.selectedButtonOpacity;break;default:throw new Error("unsupported interactionState: "+t)}},t.link(f)};e.selfBoundsProperty.link(y),this.disposeThreeDAppearanceStrategy=()=>{e.selfBoundsProperty.unlink(y),t.hasListener(f)&&t.unlink(f),o.dispose(),l.dispose(),h.dispose(),u.dispose(),c.dispose(),d.dispose(),p.dispose()}}dispose(){this.disposeThreeDAppearanceStrategy()}},fD.register("RectangularButton",Jq);class eY extends Jq{constructor(e){const t=Vo()({soundPlayer:Gq,tandem:Lm.REQUIRED,tandemNameSuffix:"Button"},e),i=t.listener,n=_.omit(t,["listener"]),r=new Wq(n);super(r,new zq(r),n),this.pushButtonModel=r,i&&this.addListener(i);const s=()=>{t.soundPlayer.play()};r.produceSoundEmitter.addListener(s),this.disposeRectangularPushButton=function(){r.produceSoundEmitter.removeListener(s),r.dispose()}}dispose(){super.dispose(),this.disposeRectangularPushButton()}addListener(e){this.pushButtonModel.addListener(e)}removeListener(e){this.pushButtonModel.removeListener(e)}}fD.register("RectangularPushButton",eY);class tY extends cv{constructor(e,t,i){var n;const r=Vo()({alignChildren:tY.CENTER,unselectedChildrenSceneGraphStrategy:"included"},i),s=tq(t,null===(n=r.tandem)||void 0===n?void 0:n.createTandem("elements"));r.children=s,r.alignChildren(r.children),super(r);const a=e=>{const i=[];for(let n=0;n<t.length;n++){const r=t[n].value===e;s[n].visible=r,r&&i.push(s[n])}"excluded"===r.unselectedChildrenSceneGraphStrategy&&(this.children=i)};e.link(a),this.nodes=s,this.disposeToggleNode=function(){e.unlink(a),s.forEach(e=>e.dispose())}}dispose(){this.disposeToggleNode(),super.dispose()}static CENTER(e){for(let t=1;t<e.length;t++)e[t].center=e[0].center}static CENTER_X(e){for(let t=1;t<e.length;t++)e[t].centerX=e[0].centerX}static CENTER_Y(e){for(let t=1;t<e.length;t++)e[t].centerY=e[0].centerY}static LEFT(e){for(let t=1;t<e.length;t++)e[t].left=e[0].left}static BOTTOM(e){for(let t=1;t<e.length;t++)e[t].bottom=e[0].bottom}static CENTER_BOTTOM(e){for(let t=1;t<e.length;t++)e[t].centerBottom=e[0].centerBottom}static RIGHT(e){for(let t=1;t<e.length;t++)e[t].right=e[0].right}static NONE(e){}}fD.register("ToggleNode",tY);class iY extends tY{constructor(e,t,i,n){super(e,[{value:!0,createNode:()=>t},{value:!1,createNode:()=>i}],n)}}fD.register("BooleanToggleNode",iY);const nY="data:audio/mpeg;base64,//swxAAABdzxBVQRADFFHaWrNxAA6lqlJJEQAExvBGPAACkboRpPkaQjfnfz5z/zvk6HfzvO//6nzn/8n8Wo50RIcE5h04AwQBAIwAHAAGGKl44UnQFxrI7b6JARZgWfzRC7X2cjUCZG/TgeAfXziIB7AOgm3/Dlw5chhj/4aoJEnxOhr/+bkURTNP+37dN///zd5/WqMcFKOhHs//syxAMACFBlQBnXgAEQCuRbvLAAMh2cNcpzMDxDOxVSMlAjYsYOAlbMUQJ8hAkSABkLAPbGhQfrk7xotjWuYO3uc9FKLMWDXX39eK91WL8a4ARAYAYFAQZg2BpmMcTuZ9zx5rwEJFAZZgjA1mC8BuLASofGAOAMhs/U/GV40k0Dkso2K6Npbban/lI2Pnd6J3///t66ABTcYocjaf/7MsQDgAX8JTutseaw6RRnNZCJDkFdpsKMGTznDUOCFN3UBmSx0M4MasPlPO6Ar07embS//T/2f27SK//YUG03dpZI2oMaBN8MJA5tI6MkldtNZgLZ+dUe9LvQy6Odv9a9cr9VPRUaBtgq9EWmz6Xj3KZTzOv1ylUAC+0kk0oAEUn+I0HZ6jICCWahweFTlrz07qq2Ls9T3N/Xljr/+zLEEgAFSBMjQWBgUI8CIvA3vAbc1Vf//uoAABTglUoQoEElDJAFw2zpqMe6sqMzu59/9uvz32/t/onv/5FMQU1FMy45OS41VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//swxC8DwAABpAAAACAAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",rY=aO(cO,nY),sY=JD.createLock(nY),aY=new hO;let oY=!1;const lY=()=>{oY||(sY(),oY=!0)},hY=cO.decodeAudioData(rY.buffer,e=>{null===aY.audioBufferProperty.value&&(aY.audioBufferProperty.set(e),lY())},e=>{console.warn("decode of audio data failed, using stubbed sound, error: "+e),aY.audioBufferProperty.set(cO.createBuffer(1,1,cO.sampleRate)),lY()});hY&&hY.then(e=>{null===aY.audioBufferProperty.value&&(aY.audioBufferProperty.set(e),lY())}).catch(e=>{console.warn("promise rejection caught for audio decode, error = "+e),lY()});const uY=aY,cY=new gq(uY,{soundClipOptions:{initialOutputLevel:.7},soundManagerOptions:{categoryName:"user-interface"}});oO.register("toggleOffSoundPlayer",cY);const dY=cY,pY="data:audio/mpeg;base64,//swxAAAByAnDnWRADEZkyy3M0ALJQcEAMk013znpOVkWGNCg9vD4oJlTQcNxQBIJ0PxSUlJSCwfB8Hz+CAIAN/DH/gg78EHS7//9QIJSLq/wFHg+AwFAAAAAAfFvo6+SmoCLgXFVlJaBRlrks8EfgdfwNGNDIX1icAtgSPunkTDV42yCf+OWMmXBP4hJ/+RAZg8nmowgLA3CbIw//syxAOACDxjRhnXgAEOCqVnuqAERLIypm8wTCMyMagDMoYEAyRAAgCAQ9za/ELra7bNcNI9BMVmPx3pF7P7a/wstMTOL6//gwrwjSeVKioAAkqgEBggJpjMDZgiPBm+0xy7jJ482ppET4kOhhSHhg8CKMhgGASP09uliMpAaC+Gyqiiyjd9/QiJjzxL//////p9lUBqv86UKJp6wP/7MsQEgAWgKTMsbMLwvwUmdaCI3g146KXMwJVAHDYhAjvxQKf+SIBJPJWbIrZ/1aVs/k7Lf2//7QQilFbJGkVBjWeEsADYyEamuw0dNdmGxS1qmJCrAKrGJZ+TX/V+1zX0fitWyROXKQQiijI22kTAod9keTOhUgChZfu1VSXOv2ubHdG+h4jXu2fLMV00rQvomqNH8kAAAARGFj3/+zLEGgDFrBkvoeWAcKKCYxBngBYhtAWgNUjlVDuFH+de4qlT5ENEZ7/8t7K3cKjB1Q/kmOcRTEFNRTMuOTkuNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//swxDMDwAABpAAAACAAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",mY=aO(cO,pY),gY=JD.createLock(pY),fY=new hO;let yY=!1;const EY=()=>{yY||(gY(),yY=!0)},vY=cO.decodeAudioData(mY.buffer,e=>{null===fY.audioBufferProperty.value&&(fY.audioBufferProperty.set(e),EY())},e=>{console.warn("decode of audio data failed, using stubbed sound, error: "+e),fY.audioBufferProperty.set(cO.createBuffer(1,1,cO.sampleRate)),EY()});vY&&vY.then(e=>{null===fY.audioBufferProperty.value&&(fY.audioBufferProperty.set(e),EY())}).catch(e=>{console.warn("promise rejection caught for audio decode, error = "+e),EY()});const AY=fY,bY=new gq(AY,{soundClipOptions:{initialOutputLevel:.7},soundManagerOptions:{categoryName:"user-interface"}});oO.register("toggleOnSoundPlayer",bY);const SY=bY;class _Y extends Ib{constructor(e){super([e.looksOverProperty,e.looksPressedProperty],(e,t)=>e&&!t?Fq.OVER:t?Fq.PRESSED:Fq.IDLE,{valueType:Fq})}}fD.register("ToggleButtonInteractionStateProperty",_Y);class xY extends Uq{constructor(e,t,i,n){const r=Vo()({tandem:Lm.REQUIRED},n);super(r),this.valueOff=e,this.valueOn=t,this.valueProperty=i;const s=e=>{(this.overProperty.get()||this.focusedProperty.get())&&this.enabledProperty.get()&&!this.interrupted&&(e||this.toggle())};this.downProperty.link(s),this.toggledEmitter=new hb({tandem:r.tandem.createTandem("toggledEmitter"),phetioDocumentation:"Emits when the button is toggled",phetioEventType:vm.USER});this.toggledEmitter.addListener(()=>{this.valueProperty.value=this.valueProperty.value===this.valueOff?this.valueOn:this.valueOff}),this.disposeToggleButtonModel=()=>{this.downProperty.unlink(s),this.toggledEmitter.dispose()}}dispose(){this.disposeToggleButtonModel(),super.dispose()}toggle(){this.toggledEmitter.emit(),this.produceSoundEmitter.emit()}}fD.register("ToggleButtonModel",xY);class wY extends Jq{constructor(e,t,i,n){const r=Vo()({valueOffSoundPlayer:dY,valueOnSoundPlayer:SY,tandem:Lm.REQUIRED,phetioFeatured:!0,tandemNameSuffix:"Button"},n),s=new xY(t,i,e,r),a=new _Y(s);super(s,a,r),this.addLinkedElement(e,{tandemName:"property"});const o=()=>{e.value===t?r.valueOffSoundPlayer.play():e.value===i&&r.valueOnSoundPlayer.play()};this.buttonModel.produceSoundEmitter.addListener(o),this.disposeRectangularToggleButton=()=>{this.buttonModel.produceSoundEmitter.removeListener(o),s.dispose()}}dispose(){this.disposeRectangularToggleButton(),super.dispose()}}fD.register("RectangularToggleButton",wY);class TY extends wY{constructor(e,t,i,n){const r=new iY(e,t,i);super(e,!1,!0,Vo()({content:r,tandem:Lm.REQUIRED,tandemNameSuffix:"Button"},n)),this.disposeBooleanRectangularToggleButton=()=>{r.dispose()}}dispose(){this.disposeBooleanRectangularToggleButton(),super.dispose()}}fD.register("BooleanRectangularToggleButton",TY);class PY extends TY{constructor(e,t){const i=Vo()({sideLength:25,stroke:"black",touchAreaXDilation:5,touchAreaYDilation:5,tandem:Lm.REQUIRED,tandemNameSuffix:"Button"},t);i.cornerRadius=.1*i.sideLength,i.xMargin=.2*i.sideLength,i.yMargin=i.xMargin,i.buttonAppearanceStrategy=Kq.FlatAppearanceStrategy;const n=.6*i.sideLength,r={lineWidth:.15*i.sideLength,stroke:"white",centerX:i.sideLength/2,centerY:i.sideLength/2,pickable:!1},s=(new Ip).moveTo(n/2,0).lineTo(n/2,n).moveTo(0,n/2).lineTo(n,n/2),a=new aA(s,r),o=(new Ip).moveTo(-n/2,0).lineTo(n/2,0),l=new aA(o,r);super(e,l,a,i);const h=e=>{this.baseColor=e?"rgb( 255, 85, 0 )":"rgb( 0, 179, 0 )",this.setPDOMAttribute("aria-expanded",e)};e.link(h),this.disposeExpandCollapseButton=()=>{e.unlink(h)}}dispose(){this.disposeExpandCollapseButton(),super.dispose()}}fD.register("ExpandCollapseButton",PY);const CY=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return fl.toFixed(e,t)};class VY extends Fl{}_defineProperty(VY,"MOUSE",new(rt=VY)),_defineProperty(VY,"TOUCH",new rt),_defineProperty(VY,"NONE",new rt),_defineProperty(VY,"enumeration",new Xl(rt));class RY{constructor(e,t){this.sim=e,this.simDisplay=t,this.activeProperty=new mg(!1),this.visualTreeVisibleProperty=new gy(!1,{tandem:Lm.OPT_OUT}),this.pdomTreeVisibleProperty=new gy(!1,{tandem:Lm.OPT_OUT}),this.underPointerVisibleProperty=new gy(!0,{tandem:Lm.OPT_OUT}),this.optionsVisibleProperty=new gy(!0,{tandem:Lm.OPT_OUT}),this.previewVisibleProperty=new gy(!1,{tandem:Lm.OPT_OUT}),this.selectedNodeContentVisibleProperty=new gy(!0,{tandem:Lm.OPT_OUT}),this.selectedTrailContentVisibleProperty=new gy(!0,{tandem:Lm.OPT_OUT}),this.highlightVisibleProperty=new gy(!0,{tandem:Lm.OPT_OUT}),this.boundsVisibleProperty=new gy(!0,{tandem:Lm.OPT_OUT}),this.selfBoundsVisibleProperty=new gy(!1,{tandem:Lm.OPT_OUT}),this.getHelperNodeVisibleProperty=new gy(!0,{tandem:Lm.OPT_OUT}),this.helperVisibleProperty=new gy(!0,{tandem:Lm.OPT_OUT}),this.inputBasedPickingProperty=new gy(!0,{tandem:Lm.OPT_OUT}),this.useLeafNodeProperty=new gy(!1,{tandem:Lm.OPT_OUT}),this.pointerAreaTypeProperty=new kq(VY.MOUSE,{tandem:Lm.OPT_OUT}),this.pointerPositionProperty=new mg(al.ZERO),this.overInterfaceProperty=new gy(!1,{tandem:Lm.OPT_OUT}),this.selectedTrailProperty=new mg(null),this.treeHoverTrailProperty=new mg(null),this.pointerTrailProperty=new Rb([this.pointerPositionProperty,this.overInterfaceProperty,this.pointerAreaTypeProperty,this.inputBasedPickingProperty],(e,i,n,r)=>{if(i)return null;if(!r)return zY(t.rootNode,e);let s=t.rootNode.hitTest(e,n===VY.MOUSE,n===VY.TOUCH);if(s&&!this.useLeafNodeProperty.value){for(;s.length>0&&0===s.lastNode().inputListeners.length;)s.removeDescendant();if(0===s.length)s=null;else{const e=s.lastNode().inputListeners[0];e instanceof Ax&&e.targetNode&&e.targetNode!==s.lastNode()&&s.containsNode(e.targetNode)&&(s=s.subtrailTo(e.targetNode))}}return s},{tandem:Lm.OPT_OUT,valueComparisonStrategy:"equalsFunction",accessNonDependencies:!0}),this.previewTrailProperty=new Rb([this.selectedTrailProperty,this.treeHoverTrailProperty,this.pointerTrailProperty],(e,t,i)=>e||(t||i)),this.previewShapeProperty=new Rb([this.previewTrailProperty,this.inputBasedPickingProperty,this.pointerAreaTypeProperty],(e,t,i)=>e?t?XY(e,i===VY.MOUSE,i===VY.TOUCH):XY(e,!1,!1):null),this.helperNodeProperty=new Rb([this.selectedTrailProperty],e=>{if(e){const t=e.lastNode();return(e=>!!e.getHelperNode)(t)?t.getHelperNode():null}return null}),this.screenViewProperty=new mg(null),this.imageDataProperty=new mg(null),this.colorProperty=new Rb([this.pointerPositionProperty,this.imageDataProperty],(e,t)=>{if(!t)return Hg.TRANSPARENT;const i=Math.floor(e.x/this.simDisplay.width*t.width),n=Math.floor(e.y/this.simDisplay.height*t.height),r=4*(i+t.width*n);return i<0||n<0||i>t.width||n>t.height?Hg.TRANSPARENT:new Hg(t.data[r],t.data[r+1],t.data[r+2],t.data[r+3]/255)},{tandem:Lm.OPT_OUT});const i=new gy(phet.chipper.queryParameters.fuzz,{tandem:Lm.OPT_OUT});i.lazyLink(e=>{phet.chipper.queryParameters.fuzz=e});const n=new gy(!1,{tandem:Lm.OPT_OUT}),r=new mg({name:"view units",multiplier:0}),s=new mg(Zl.NOTHING),a=new cv({renderer:"svg"}),o=new FI(this.pointerPositionProperty,{tandem:Lm.OPT_OUT,bidirectional:!0,map:e=>{const t=this.screenViewProperty.value;if(t){const i=t.globalToLocalPoint(e);return`global: x: ${CY(e.x)}, y: ${CY(e.y)}<br>view: x: ${CY(i.x)}, y: ${CY(i.y)}`}return"-"}}),l=new CT(o,{font:new gD(12)}),h=new FI(this.colorProperty,{tandem:Lm.OPT_OUT,bidirectional:!0,map:e=>`${e.toHexString()} ${e.toCSS()}`}),u=new CT(h,{font:new gD(12)});this.colorProperty.link(e=>{u.fill=Hg.getLuminance(e)>128?Hg.BLACK:Hg.WHITE});const c=new Hg("#804000"),d=new Hg("#208020"),p=new Hg(255,100,0),m=new Hg(0,0,255),g=new Hg(255,0,0),f=new Hg(200,0,200),y=new Rb([this.inputBasedPickingProperty,this.pointerAreaTypeProperty],(e,t)=>e?t===VY.MOUSE?m:t===VY.TOUCH?g:f:p,{tandem:Lm.OPT_OUT}),E=new ED(u,{cornerRadius:0,stroke:null,fill:this.colorProperty}),v=new cv({visibleProperty:this.previewVisibleProperty}),A=new xA(0,0,200,200,{fill:new yE(new cv({children:[new xA(0,0,10,10,{fill:"#ddd"}),new xA(10,10,10,10,{fill:"#ddd"}),new xA(0,10,10,10,{fill:"#fafafa"}),new xA(10,0,10,10,{fill:"#fafafa"})]}),2,0,0,20,20),stroke:"black",visibleProperty:this.previewVisibleProperty});this.previewTrailProperty.link(e=>{if(v.removeAllChildren(),e){v.addChild(A);const t=e.lastNode();if(t.bounds.isValid()){const e=.9*window.devicePixelRatio*Math.min(A.selfBounds.width/t.width,A.selfBounds.height/t.height);v.addChild(new cv({scale:e/window.devicePixelRatio,center:A.center,children:[t.rasterized({resolution:e,sourceBounds:t.bounds.dilated(.01*t.bounds.width).roundedOut()})]}))}}});const b=new aT({spacing:3,align:"left",visibleProperty:this.selectedNodeContentVisibleProperty});this.previewTrailProperty.link(e=>{b.children=e?HY(e):[]});const S=new NY(i,"Fuzz"),x=new NY(n,"Measuring Tape"),w=new NY(this.visualTreeVisibleProperty,"Visual Tree"),T=new NY(this.pdomTreeVisibleProperty,"PDOM Tree"),P=new NY(this.inputBasedPickingProperty,"Input-based"),C=new NY(this.useLeafNodeProperty,"Use Leaf",{enabledProperty:this.inputBasedPickingProperty}),V=new NY(this.highlightVisibleProperty,"Highlight",{labelOptions:{fill:y}}),R=new NY(this.boundsVisibleProperty,"Bounds",{labelOptions:{fill:c}}),N=new NY(this.selfBoundsVisibleProperty,"Self Bounds",{labelOptions:{fill:d}}),M=new NY(this.getHelperNodeVisibleProperty,"getHelperNode()"),k=new nq(this.pointerAreaTypeProperty,[{value:VY.MOUSE,createNode:e=>new gA("Mouse",{fontSize:12})},{value:VY.TOUCH,createNode:e=>new gA("Touch",{fontSize:12})},{value:VY.NONE,createNode:e=>new gA("None",{fontSize:12})}],{orientation:"horizontal",enabledProperty:this.inputBasedPickingProperty,radioButtonOptions:{xSpacing:3},spacing:10,tandem:Lm.OPT_OUT}),L=new aT({align:"left",visibleProperty:this.selectedTrailContentVisibleProperty});this.previewTrailProperty.link(e=>{if(L.children=[],e){e.nodes.slice().forEach((t,i)=>{L.addChild(new CT(`${i>0?e.nodes[i-1].children.indexOf(t):"-"} ${t.constructor.name}`,{font:new gD(12),fill:i===e.nodes.length-1?"black":"#bbb",layoutOptions:{leftMargin:10*i},cursor:"pointer",inputListeners:[new Sx({fire:()=>{this.selectedTrailProperty.value=e.subtrailTo(t),D()},tandem:Lm.OPT_OUT})]}))}),e.lastNode().children.forEach((t,i)=>{L.addChild(new CT(`${e.lastNode().children.indexOf(t)} ${t.constructor.name}`,{font:new gD(12),fill:"#88f",layoutOptions:{leftMargin:10*e.nodes.length},cursor:"pointer",inputListeners:[new Sx({fire:()=>{this.selectedTrailProperty.value=e.copy().addDescendant(t,i),D()},tandem:Lm.OPT_OUT})]}))}),e.isVisible()||L.addChild(new gA("invisible",{fill:"#60a",fontSize:12})),1!==e.getOpacity()&&L.addChild(new gA("opacity: "+e.getOpacity(),{fill:"#888",fontSize:12}));const t=_.some(e.nodes,e=>!1===e.pickable||!e.visible),i=_.some(e.nodes,e=>e.inputListeners.length>0||!0===e.pickable);!t&&i&&L.addChild(new gA("Hit Tested",{fill:"#f00",fontSize:12})),e.getMatrix().isIdentity()||L.addChild(new cv({children:[new OY(e.getMatrix())]}))}});const I=new IY(this.visualTreeVisibleProperty,this,()=>new kY(new Dv(t.rootNode),this)),B=new IY(this.pdomTreeVisibleProperty,this,()=>new LY(t._rootPDOMInstance,this)),D=()=>{I.focusSelected(),B.focusSelected()},O=new aA(null,{visibleProperty:this.boundsVisibleProperty,stroke:c,fill:c.withAlpha(.1),lineDash:[2,2],lineDashOffset:2});this.previewTrailProperty.link(e=>{e&&e.lastNode().localBounds.isValid()?O.shape=Ip.bounds(e.lastNode().localBounds).transformed(e.getMatrix()):O.shape=null});const q=new aA(null,{visibleProperty:this.selfBoundsVisibleProperty,stroke:d,fill:d.withAlpha(.1),lineDash:[2,2],lineDashOffset:1});this.previewTrailProperty.link(e=>{e&&e.lastNode().selfBounds.isValid()?q.shape=Ip.bounds(e.lastNode().selfBounds).transformed(e.getMatrix()):q.shape=null});const Y=new Rb([y],e=>e.withAlpha(.2),{tandem:Lm.OPT_OUT}),H=new aA(null,{stroke:y,lineDash:[2,2],fill:Y,visibleProperty:this.highlightVisibleProperty});this.previewShapeProperty.link(e=>{H.shape=e});const G=new cv({visibleProperty:this.getHelperNodeVisibleProperty});this.selectedTrailProperty.link(e=>{e&&(G.matrix=e.getMatrix())}),this.helperNodeProperty.link(e=>{G.removeAllChildren(),e&&G.addChild(e)}),a.addChild(O),a.addChild(q),a.addChild(H);const F=new cv;F.addInputListener(new Ax({press:()=>{this.selectedTrailProperty.value=this.pointerTrailProperty.value,D()},tandem:Lm.OPT_OUT})),a.addChild(F),a.addChild(G);const z=new Hw({orientation:"vertical",spacing:5,align:"left",children:[l,E],visibleProperty:this.underPointerVisibleProperty}),U=new aT({spacing:3,align:"left",children:[BY("Tools"),new aT({spacing:3,align:"left",children:[new sT({spacing:10,children:[S,x]}),new sT({spacing:10,children:[w,...t._accessible?[T]:[]]})]}),BY("Picking",void 0,{layoutOptions:{topMargin:3}}),new aT({spacing:3,align:"left",children:[new sT({spacing:10,children:[P,C]}),k]}),BY("Show",void 0,{layoutOptions:{topMargin:3}}),new aT({spacing:3,align:"left",children:[new sT({spacing:10,children:[V,M]}),new sT({spacing:10,children:[R,N]})]})],visibleProperty:this.optionsVisibleProperty}),W=new aT({spacing:5,align:"left",children:[DY("Under Pointer",this.underPointerVisibleProperty,z,{layoutOptions:{topMargin:0}}),z,DY("Options",this.optionsVisibleProperty,U),U,DY("Preview",this.previewVisibleProperty,v),v,DY("Selected Trail",this.selectedTrailContentVisibleProperty,L),L,DY("Selected Node",this.selectedNodeContentVisibleProperty,b),b],visibleProperty:this.helperVisibleProperty}),X=new aT({spacing:5,align:"left",children:[DY("Helper",this.helperVisibleProperty,W),new dw,W]}),j=new ED(X,{fill:"rgba(255,255,255,0.85)",stroke:"rgba(0,0,0,0.85)",cornerRadius:0});j.addInputListener(new xx({translateNode:!0,targetNode:j,tandem:Lm.OPT_OUT})),j.addInputListener({wheel:e=>{const t=e.domEvent.deltaY;j.y-=1*t}}),a.addChild(j),a.addChild(I),a.addChild(B);const Q=new sO(r,{tandem:Lm.OPT_OUT,visibleProperty:n,textBackgroundColor:"rgba(0,0,0,0.5)"});Q.basePositionProperty.value=new al(100,300),Q.tipPositionProperty.value=new al(200,300),a.addChild(Q);const K=e=>{this.helperDisplay.width=e.width,this.helperDisplay.height=e.height,s.value=s.value.withMaxX(e.width).withMaxY(e.height),F.mouseArea=new Zl(0,0,e.width,e.height),F.touchArea=new Zl(0,0,e.width,e.height),I.resize(e),B.resize(e)},Z=e=>{var t;this.overInterfaceProperty.value=j.bounds.containsPoint(this.pointerPositionProperty.value)||this.visualTreeVisibleProperty.value&&I.bounds.containsPoint(this.pointerPositionProperty.value)||this.pdomTreeVisibleProperty.value&&B.bounds.containsPoint(this.pointerPositionProperty.value)||G.containsPoint(this.pointerPositionProperty.value),null===(t=this.helperDisplay)||void 0===t||t.updateDisplay()};document.addEventListener("keyup",e=>{"Escape"===e.key&&(this.selectedTrailProperty.value=null)}),this.activeProperty.lazyLink(t=>{if(t){e.activeProperty.value=!1;const t=e.selectedScreenProperty.value;t.hasView()?this.screenViewProperty.value=t.view:this.screenViewProperty.value=null,this.helperDisplay=new SV(a,{assumeFullWindow:!0}),this.helperDisplay.initializeEvents(),e.dimensionProperty.link(K),ym.addListener(Z),document.body.appendChild(this.helperDisplay.domElement),this.helperDisplay.domElement.style.zIndex="10000";const i=e=>{this.pointerPositionProperty.value=e.pointer.point};this.helperDisplay.addInputListener({move:i,down:i,up:i}),this.screenViewProperty.value&&(r.value={name:"view units",multiplier:this.screenViewProperty.value.getGlobalToLocalMatrix().getScaleVector().x}),this.simDisplay.foreignObjectRasterization(e=>{if(e){const t=document.createElement("img");t.addEventListener("load",()=>{const e=t.width,i=t.height,n=document.createElement("canvas"),r=n.getContext("2d");n.width=e,n.height=i,r.drawImage(t,0,0),this.activeProperty.value&&(this.imageDataProperty.value=r.getImageData(0,0,e,i))}),t.src=e}else console.log("Could not load foreign object rasterization")})}else e.dimensionProperty.unlink(K),ym.removeListener(Z),document.body.removeChild(this.helperDisplay.domElement),this.helperDisplay.dispose(),e.activeProperty.value=!0,this.imageDataProperty.value=null,this.visualTreeVisibleProperty.value=!1})}static initialize(e,t){document.addEventListener("keydown",i=>{i.ctrlKey&&"H"===i.key&&(RY.helper||(RY.helper=new RY(e,t)),RY.helper.activeProperty.value=!RY.helper.activeProperty.value)})}}nB.register("Helper",RY);class NY extends Nq{constructor(e,t,i){const n=Vo()({tandem:Lm.OPT_OUT,boxWidth:14,labelOptions:{font:new gD(12)}},i);super(e,new CT(t,n.labelOptions),n)}}class MY extends cv{constructor(e,t){const i=Vo()({createChildren:()=>[],spacing:0,indent:5},t);super({excludeInvisibleChildrenFromBounds:!0}),this.selfNode=e,this.selfNode.centerY=0,this.expandedProperty=new mg(!0),this.childTreeNodes=yx({elements:i.createChildren()});const n=(new Ip).moveToPoint(al.createPolar(4.8,3/4*Math.PI).plusXY(1.5,0)).lineTo(1.5,0).lineToPoint(al.createPolar(4.8,5/4*Math.PI).plusXY(1.5,0));this.expandCollapseButton=new xA(-6,-6,12,12,{children:[new aA(n,{stroke:"#888",lineCap:"round",lineWidth:1.5})],visible:!1,cursor:"pointer",right:0}),this.expandedProperty.link(e=>{this.expandCollapseButton.rotation=e?Math.PI/2:0}),this.expandCollapseButton.addInputListener(new Sx({fire:()=>{this.expandedProperty.value=!this.expandedProperty.value},tandem:Lm.OPT_OUT})),this.addChild(this.expandCollapseButton),this.childContainer=new Hw({orientation:"vertical",align:"left",spacing:i.spacing,children:this.childTreeNodes,x:i.indent,y:this.selfNode.bottom+i.spacing,visibleProperty:this.expandedProperty}),this.addChild(this.childContainer),this.addChild(e);const r=()=>{this.childContainer.children=this.childTreeNodes,this.expandCollapseButton.visible=this.childTreeNodes.length>0};this.childTreeNodes.addItemAddedListener(()=>{r()}),this.childTreeNodes.addItemRemovedListener(()=>{r()}),r(),this.mutate(i)}expand(){this.expandedProperty.value=!0}collapse(){this.expandedProperty.value=!1}expandRecusively(){this.expandedProperty.value=!0,this.childTreeNodes.forEach(e=>{e.expandRecusively()})}collapseRecursively(){this.expandedProperty.value=!1,this.childTreeNodes.forEach(e=>{e.collapseRecursively()})}}class kY extends MY{constructor(e,t){const i=e.lastNode(),n=e.isVisible(),r=new nf({size:12}),s=new sT({spacing:5}),a=i.constructor.name;a&&s.addChild(new gA(a,{font:r,pickable:!1,fill:n?"#000":"#60a"})),i instanceof gA&&s.addChild(new gA('"'+i.string+'"',{font:r,pickable:!1,fill:"#666"}));const o=xA.bounds(s.bounds,{children:[s],cursor:"pointer",fill:new Rb([t.selectedTrailProperty,t.pointerTrailProperty],(t,i)=>t&&e.equals(t)?"rgba(0,128,255,0.4)":i&&e.equals(i)?"rgba(0,128,255,0.2)":"transparent",{tandem:Lm.OPT_OUT})});o.addInputListener({enter:()=>{t.treeHoverTrailProperty.value=e},exit:()=>{t.treeHoverTrailProperty.value=null}}),o.addInputListener(new Sx({fire:()=>{t.selectedTrailProperty.value=e},tandem:Lm.OPT_OUT})),super(o,{createChildren:()=>e.lastNode().children.map(i=>new kY(e.copy().addDescendant(i),t))}),i.visible||(this.expandedProperty.value=!1),this.trail=e}find(e){if(e.equals(this.trail))return this;{const t=_.find(this.childTreeNodes,t=>e.isExtensionOf(t.trail,!0));return t?t.find(e):null}}}class LY extends MY{constructor(e,t){const i=e.trail,n=i.isPDOMVisible(),r=new nf({size:12}),s=new sT({spacing:5});if(i.nodes.length){const t=n?"#000":"#60a",a=i.lastNode();a.tagName&&s.addChild(new gA(a.tagName,{font:new nf({size:12,weight:"bold"}),fill:t})),a.labelContent&&s.addChild(new gA(a.labelContent,{font:r,fill:"#800"})),a.innerContent&&s.addChild(new gA(a.innerContent,{font:r,fill:"#080"})),a.descriptionContent&&s.addChild(new gA(a.descriptionContent,{font:r,fill:"#444"}));const o=e.parent?e.parent.trail:new Dv,l=i.nodes.slice(o.nodes.length).map(e=>e.constructor.name).filter(e=>"Node"!==e).join(",");l&&s.addChild(new gA(`(${l})`,{font:r,fill:"#008"}))}else s.addChild(new gA("(root)",{font:r}));const a=xA.bounds(s.bounds,{children:[s],cursor:"pointer",fill:new Rb([t.selectedTrailProperty,t.pointerTrailProperty],(e,t)=>e&&i.equals(e)?"rgba(0,128,255,0.4)":t&&i.equals(t)?"rgba(0,128,255,0.2)":"transparent",{tandem:Lm.OPT_OUT})});i.length&&(a.addInputListener({enter:()=>{t.treeHoverTrailProperty.value=i},exit:()=>{t.treeHoverTrailProperty.value=null}}),a.addInputListener(new Sx({fire:()=>{t.selectedTrailProperty.value=i},tandem:Lm.OPT_OUT}))),super(a,{createChildren:()=>e.children.map(e=>new LY(e,t))}),this.instance=e,this.trail=i}find(e){if(e.equals(this.instance.trail))return this;{const t=_.find(this.childTreeNodes,t=>e.isExtensionOf(t.instance.trail,!0));return t?t.find(e):null}}}class IY extends xA{constructor(e,t,i){super({fill:"rgba(255,255,255,0.85)",stroke:"black",rectWidth:400,visibleProperty:e,pickable:!0}),this.helper=t,this.treeContainer=new cv,this.addChild(this.treeContainer),this.addInputListener(new xx({targetNode:this,drag:(e,t)=>{this.x=this.x+t.modelDelta.x},tandem:Lm.OPT_OUT})),this.addInputListener({wheel:e=>{const t=e.domEvent.deltaX,i=e.domEvent.deltaY;this.treeNode&&(this.treeNode.x-=1*t,this.treeNode.y-=1*i),this.constrainTree()}}),t.pointerTrailProperty.lazyLink(()=>{t.selectedTrailProperty.value||this.focusPointer()}),pS.multilink([t.activeProperty,e],(e,t)=>{e&&t?(this.treeNode=i(),this.treeNode.x=500,this.treeNode.y=500,this.treeContainer.children=[this.treeNode],this.focusSelected(),this.constrainTree()):this.treeContainer.children=[]})}resize(e){this.rectHeight=e.height,this.right=e.width,this.treeContainer.clipArea=Ip.bounds(this.localBounds.dilated(10))}constrainTree(){this.treeNode&&(this.treeNode.bottom<this.selfBounds.bottom-5&&(this.treeNode.bottom=this.selfBounds.bottom-5),this.treeNode.top>this.selfBounds.top+5&&(this.treeNode.top=this.selfBounds.top+5),this.treeNode.right<this.selfBounds.right-8&&(this.treeNode.right=this.selfBounds.right-8),this.treeNode.left>this.selfBounds.left+8&&(this.treeNode.left=this.selfBounds.left+8))}focusTrail(e){if(this.treeNode){const t=this.treeNode.find(e);if(t){const e=t.localToGlobalPoint(t.selfNode.center).y-this.centerY;this.treeNode.y-=e,this.constrainTree()}}}focusPointer(){this.helper.pointerTrailProperty.value&&this.focusTrail(this.helper.pointerTrailProperty.value)}focusSelected(){null!==this.helper.selectedTrailProperty.value&&this.focusTrail(this.helper.selectedTrailProperty.value)}}const BY=(e,t,i)=>new gA(e,Po({fontSize:14,fontWeight:"bold",visibleProperty:t?new Rb([t.boundsProperty],e=>!e.isEmpty()):new mg(!0)},i)),DY=(e,t,i,n)=>{const r=BY(e,i,n);return r.addInputListener(new Sx({fire:()=>{t.value=!t.value},tandem:Lm.OPT_OUT})),r.cursor="pointer",new sT({spacing:7,children:[new PY(t,{tandem:Lm.OPT_OUT,sideLength:14}),r],visibleProperty:r.visibleProperty})};class OY extends Kw{constructor(e){super({xSpacing:5,ySpacing:0,children:[new gA(e.m00(),{layoutOptions:{column:0,row:0}}),new gA(e.m01(),{layoutOptions:{column:1,row:0}}),new gA(e.m02(),{layoutOptions:{column:2,row:0}}),new gA(e.m10(),{layoutOptions:{column:0,row:1}}),new gA(e.m11(),{layoutOptions:{column:1,row:1}}),new gA(e.m12(),{layoutOptions:{column:2,row:1}}),new gA(e.m20(),{layoutOptions:{column:0,row:2}}),new gA(e.m21(),{layoutOptions:{column:1,row:2}}),new gA(e.m22(),{layoutOptions:{column:2,row:2}})]})}}class qY extends aA{constructor(e){super(e,{maxWidth:15,maxHeight:15,stroke:"black",cursor:"pointer",strokePickable:!0}),this.addInputListener(new Sx({fire:()=>UY(e.getSVGPath()),tandem:Lm.OPT_OUT}))}}class YY extends rA{constructor(e){super(e.getImage(),{maxWidth:15,maxHeight:15})}}const HY=e=>{const t=[],i=e.lastNode(),n=Ul(i.constructor).map(e=>e.name).filter(e=>e&&"Object"!==e),r=n.includes("Node")?n.slice(0,n.indexOf("Node")):n;r.length>0&&t.push(new CT(r.map((e,t)=>0===t?`<b>${e}</b>`:`<br>&nbsp;${_.repeat("  ",t)}extends ${e}`).join(""),{font:new gD(12)}));const s=(e,i)=>{t.push(new sT({spacing:0,align:"top",children:[new gA(e+": ",{fontSize:12}),i]}))},a=(e,t)=>{void 0!==t&&s(e,new CT(""+t,{lineWrap:400,font:new gD(12),cursor:"pointer",inputListeners:[new Sx({fire:()=>UY(""+t),tandem:Lm.OPT_OUT})]}))},o=e=>new sT({spacing:4,children:[new xA(0,0,10,10,{fill:e,stroke:"black",lineWidth:.5}),new gA(e.toHexString(),{fontSize:12}),new gA(e.toCSS(),{fontSize:12})],cursor:"pointer",inputListeners:[new Sx({fire:()=>UY(e.toHexString()),tandem:Lm.OPT_OUT})]}),l=(e,t)=>{const i=e=>new sT({spacing:3,children:[new gA(e.ratio,{fontSize:12}),o(GY(e.color)||Hg.TRANSPARENT)]});t instanceof dE?t instanceof mE?s(e,new aT({align:"left",spacing:3,children:[new gA(`LinearGradient (${t.start.x},${t.start.y}) => (${t.end.x},${t.end.y})`,{fontSize:12}),...t.stops.map(i)]})):t instanceof gE?s(e,new aT({align:"left",spacing:3,children:[new gA(`RadialGradient (${t.start.x},${t.start.y}) ${t.startRadius} => (${t.end.x},${t.end.y}) ${t.endRadius}`,{fontSize:12}),...t.stops.map(i)]})):t instanceof fE&&s(e,new aT({align:"left",spacing:3,children:[new gA("Pattern",{fontSize:12}),new rA(t.image,{maxWidth:10,maxHeight:10})]})):((e,t)=>{const i=GY(t);null!==i&&s(e,o(i))})(e,t)},h=(e,t)=>{t.equals(Zl.NOTHING)||(t.equals(Zl.EVERYTHING)?a(e,"everything"):s(e,new CT(`x: [${t.minX}, ${t.maxX}]<br>y: [${t.minY}, ${t.maxY}]`,{font:new gD(12)})))},u=(e,t)=>s(e,new qY(t));return i.tandem.supplied&&a("tandem",i.tandem.phetioID.split(".").join(" ")),i instanceof bA&&a("element",i.element.constructor.name),wv(i)&&(!i.widthSizable&&a("widthSizable",i.widthSizable),null!==i.preferredWidth&&a("preferredWidth",i.preferredWidth),i.preferredWidth!==i.localPreferredWidth&&a("localPreferredWidth",i.localPreferredWidth),null!==i.minimumWidth&&a("minimumWidth",i.minimumWidth),i.minimumWidth!==i.localMinimumWidth&&a("localMinimumWidth",i.localMinimumWidth)),Rv(i)&&(!i.heightSizable&&a("heightSizable",i.heightSizable),null!==i.preferredHeight&&a("preferredHeight",i.preferredHeight),i.preferredHeight!==i.localPreferredHeight&&a("localPreferredHeight",i.localPreferredHeight),null!==i.minimumHeight&&a("minimumHeight",i.minimumHeight),i.minimumHeight!==i.localMinimumHeight&&a("localMinimumHeight",i.localMinimumHeight)),i.layoutOptions&&a("layoutOptions",JSON.stringify(i.layoutOptions,null,2)),i instanceof Tw&&(!i.resize&&a("resize",i.resize),!i.layoutOrigin.equals(al.ZERO)&&a("layoutOrigin",i.layoutOrigin)),i instanceof Hw&&(a("orientation",i.orientation),a("align",i.align),i.spacing&&a("spacing",i.spacing),i.lineSpacing&&a("lineSpacing",i.lineSpacing),a("justify",i.justify),i.justifyLines&&a("justifyLines",i.justifyLines),i.wrap&&a("wrap",i.wrap),i.stretch&&a("stretch",i.stretch),i.grow&&a("grow",i.grow),i.leftMargin&&a("leftMargin",i.leftMargin),i.rightMargin&&a("rightMargin",i.rightMargin),i.topMargin&&a("topMargin",i.topMargin),i.bottomMargin&&a("bottomMargin",i.bottomMargin),null!==i.minContentWidth&&a("minContentWidth",i.minContentWidth),null!==i.minContentHeight&&a("minContentHeight",i.minContentHeight),null!==i.maxContentWidth&&a("maxContentWidth",i.maxContentWidth),null!==i.maxContentHeight&&a("maxContentHeight",i.maxContentHeight)),i instanceof Kw&&(a("xAlign",i.xAlign),a("yAlign",i.yAlign),i.xSpacing&&a("xSpacing",i.xSpacing),i.ySpacing&&a("ySpacing",i.ySpacing),i.xStretch&&a("xStretch",i.xStretch),i.yStretch&&a("yStretch",i.yStretch),i.xGrow&&a("xGrow",i.xGrow),i.yGrow&&a("yGrow",i.yGrow),i.leftMargin&&a("leftMargin",i.leftMargin),i.rightMargin&&a("rightMargin",i.rightMargin),i.topMargin&&a("topMargin",i.topMargin),i.bottomMargin&&a("bottomMargin",i.bottomMargin),null!==i.minContentWidth&&a("minContentWidth",i.minContentWidth),null!==i.minContentHeight&&a("minContentHeight",i.minContentHeight),null!==i.maxContentWidth&&a("maxContentWidth",i.maxContentWidth),null!==i.maxContentHeight&&a("maxContentHeight",i.maxContentHeight)),i instanceof xA&&(h("rectBounds",i.rectBounds),(i.cornerXRadius||i.cornerYRadius)&&(i.cornerXRadius===i.cornerYRadius?a("cornerRadius",i.cornerRadius):(a("cornerXRadius",i.cornerXRadius),a("cornerYRadius",i.cornerYRadius)))),i instanceof SA&&(a("x1",i.x1),a("y1",i.y1),a("x2",i.x2),a("y2",i.y2)),i instanceof AA&&a("radius",i.radius),i instanceof gA&&(a("text",i.string),a("font",i.font),"hybrid"!==i.boundsMethod&&a("boundsMethod",i.boundsMethod)),i instanceof CT&&(a("text",i.string),a("font",i.font instanceof nf?i.font.getFont():i.font),l("fill",i.fill),l("stroke",i.stroke),"hybrid"!==i.boundsMethod&&a("boundsMethod",i.boundsMethod),null!==i.lineWrap&&a("lineWrap",i.lineWrap)),i instanceof rA&&(s("image",new YY(i)),a("imageWidth",i.imageWidth),a("imageHeight",i.imageHeight),1!==i.imageOpacity&&a("imageOpacity",i.imageOpacity),i.imageBounds&&h("imageBounds",i.imageBounds),i.initialWidth&&a("initialWidth",i.initialWidth),i.initialHeight&&a("initialHeight",i.initialHeight),i.hitTestPixels&&a("hitTestPixels",i.hitTestPixels)),(i instanceof vA||i instanceof TA)&&h("canvasBounds",i.canvasBounds),i instanceof aA&&(i.shape&&u("shape",i.shape),"accurate"!==i.boundsMethod&&a("boundsMethod",i.boundsMethod)),(i instanceof aA||i instanceof gA)&&(l("fill",i.fill),l("stroke",i.stroke),i.lineDash.length&&a("lineDash",i.lineDash),i.fillPickable||a("fillPickable",i.fillPickable),i.strokePickable&&a("strokePickable",i.strokePickable),1!==i.lineWidth&&a("lineWidth",i.lineWidth),"butt"!==i.lineCap&&a("lineCap",i.lineCap),"miter"!==i.lineJoin&&a("lineJoin",i.lineJoin),0!==i.lineDashOffset&&a("lineDashOffset",i.lineDashOffset),10!==i.miterLimit&&a("miterLimit",i.miterLimit)),i.tagName&&a("tagName",i.tagName),i.accessibleName&&a("accessibleName",i.accessibleName),i.helpText&&a("helpText",i.helpText),i.pdomHeading&&a("pdomHeading",i.pdomHeading),i.containerTagName&&a("containerTagName",i.containerTagName),i.containerAriaRole&&a("containerAriaRole",i.containerAriaRole),i.innerContent&&a("innerContent",i.innerContent),i.inputType&&a("inputType",i.inputType),i.inputValue&&a("inputValue",i.inputValue),i.pdomNamespace&&a("pdomNamespace",i.pdomNamespace),i.ariaLabel&&a("ariaLabel",i.ariaLabel),i.ariaRole&&a("ariaRole",i.ariaRole),i.ariaValueText&&a("ariaValueText",i.ariaValueText),i.labelTagName&&a("labelTagName",i.labelTagName),i.labelContent&&a("labelContent",i.labelContent),i.appendLabel&&a("appendLabel",i.appendLabel),i.descriptionTagName&&a("descriptionTagName",i.descriptionTagName),i.descriptionContent&&a("descriptionContent",i.descriptionContent),i.appendDescription&&a("appendDescription",i.appendDescription),i.pdomVisible||a("pdomVisible",i.pdomVisible),i.pdomOrder&&a("pdomOrder",i.pdomOrder.map(e=>null===e?"null":e.constructor.name)),i.visible||a("visible",i.visible),1!==i.opacity&&((e,t)=>{a(e,t)})("opacity",i.opacity),null!==i.pickable&&a("pickable",i.pickable),i.enabled||a("enabled",i.enabled),i.inputEnabled||a("inputEnabled",i.inputEnabled),null!==i.cursor&&a("cursor",i.cursor),i.transformBounds&&a("transformBounds",i.transformBounds),i.renderer&&a("renderer",i.renderer),i.usesOpacity&&a("usesOpacity",i.usesOpacity),i.layerSplit&&a("layerSplit",i.layerSplit),i.cssTransform&&a("cssTransform",i.cssTransform),i.excludeInvisible&&a("excludeInvisible",i.excludeInvisible),i.preventFit&&a("preventFit",i.preventFit),null!==i.webglScale&&a("webglScale",i.webglScale),i.matrix.isIdentity()||((e,t)=>{s(e,new OY(t))})("matrix",i.matrix),null!==i.maxWidth&&a("maxWidth",i.maxWidth),null!==i.maxHeight&&a("maxHeight",i.maxHeight),null!==i.clipArea&&u("clipArea",i.clipArea),null!==i.mouseArea&&(i.mouseArea instanceof Zl?h("mouseArea",i.mouseArea):u("mouseArea",i.mouseArea)),null!==i.touchArea&&(i.touchArea instanceof Zl?h("touchArea",i.touchArea):u("touchArea",i.touchArea)),i.inputListeners.length&&a("inputListeners",i.inputListeners.map(e=>e.constructor.name).join(", ")),t.push(new VA(5,5)),h("localBounds",i.localBounds),i.localBoundsOverridden&&a("localBoundsOverridden",i.localBoundsOverridden),h("bounds",i.bounds),isFinite(i.width)&&a("width",i.width),isFinite(i.height)&&a("height",i.height),t.push(new eY({content:new gA("Copy Path",{fontSize:12}),listener:()=>UY("phet.joist.display.rootNode"+e.indices.map(e=>`.children[ ${e} ]`).join("")),tandem:Lm.OPT_OUT})),t},GY=e=>{const t=e instanceof _g||e instanceof mg?e.value:e;return null===t?null:Hg.toColor(t)},FY=e=>{if(e instanceof dE)return!0;{const t=GY(e);return!!t&&t.alpha>0}},zY=(e,t)=>{if(!e.visible)return null;const i=e._transform.getInverse().timesVector2(t),n=e.clipArea;if(null!==n&&!n.containsPoint(i))return null;for(let r=e._children.length-1;r>=0;r--){const t=e._children[r],n=zY(t,i);if(n)return n.addAncestor(e,r)}if(e.selfBounds.containsPoint(i))if(e instanceof aA&&e.hasShape()){if(FY(e.fill)&&e.getShape().containsPoint(i))return new Dv(e);if(FY(e.stroke)&&e.getStrokedShape().containsPoint(i))return new Dv(e)}else if(e.containsPointSelf(i))return new Dv(e);return null},UY=async e=>{var t;await(null===(t=navigator.clipboard)||void 0===t?void 0:t.writeText(e))},WY=(e,t,i)=>{let n=Ip.union([...t&&e.mouseArea?[e.mouseArea instanceof Ip?e.mouseArea:Ip.bounds(e.mouseArea)]:[],...i&&e.touchArea?[e.touchArea instanceof Ip?e.touchArea:Ip.bounds(e.touchArea)]:[],e.getSelfShape(),...e.children.filter(e=>e.visible&&!1!==e.pickable).map(e=>WY(e,t,i).transformed(e.matrix))].filter(e=>e.bounds.isValid()));return e.hasClipArea()&&(n=n.shapeIntersection(e.clipArea)),n},XY=(e,t,i)=>{let n=WY(e.lastNode(),t,i);for(let r=e.nodes.length-1;r>=0;r--){const t=e.nodes[r];t.hasClipArea()&&(n=n.shapeIntersection(t.clipArea)),n=n.transformed(t.matrix)}return n};class jY extends sT{constructor(e,t,i){const n=Vo()({fill:"white",highlightWidth:1,pickable:!1},i);n.spacing=e;const r=n.fill,s=Hg.toColor(r).withAlpha(0),a={fill:new mE(0,0,0,t).addColorStop(0,s).addColorStop(.5,r).addColorStop(1,s)},o=new xA(0,0,n.highlightWidth,t,a),l=new xA(0,0,n.highlightWidth,t,a);n.children=[o,l],super(n)}}nB.register("HighlightNode",jY);const QY=jY;class KY extends(DS(cv)){constructor(e,t,i){const n=Vo()({cursor:"pointer",listener:null,highlightExtensionWidth:0,highlightExtensionHeight:0,highlightCenterOffsetX:0,highlightCenterOffsetY:0,pointerAreaDilationX:0,pointerAreaDilationY:0,enabledPropertyOptions:{phetioFeatured:!1},disabledOpacity:Bg.DISABLED_OPACITY,tagName:"button"},i),r=function(t){return new QY(e.width+n.highlightExtensionWidth,e.height+n.highlightExtensionHeight,{centerX:e.centerX+n.highlightCenterOffsetX,centerY:e.centerY+n.highlightCenterOffsetY,fill:t,pickable:!1})},s=r("white"),a=r("black");n.children=[e,s,a],super(n),this.buttonModel=new Wq(n);const o=new zq(this.buttonModel);this.interactionStateProperty=o,pS.multilink([o,t,this.buttonModel.enabledProperty],(e,t,i)=>{const n=!t.equals(Hg.BLACK);s.visible=!n&&i&&(e===Fq.OVER||e===Fq.PRESSED),a.visible=n&&i&&(e===Fq.OVER||e===Fq.PRESSED)}),this.buttonModel.enabledProperty.link(e=>{this.cursor=e?n.cursor:null}),this._pressListener=this.buttonModel.createPressListener({tandem:n.tandem.createTandem("pressListener")}),this.addInputListener(this._pressListener),this.mouseArea=this.touchArea=Ip.bounds(this.bounds.dilatedXY(n.pointerAreaDilationX,n.pointerAreaDilationY));const l=KS.getOuterLineWidthFromNode(this);this.focusHighlight=Ip.bounds(this.bounds.shiftedY(-l))}isPDOMClicking(){return this._pressListener.pdomClickingProperty.get()}}nB.register("JoistButton",KY);class ZY extends aA{constructor(e){const t=new Ip;for(let i=0;i<3;i++)t.circle(0,3.543*i*2.5,2.5);super(t,e)}}nB.register("KebabMenuIcon",ZY);class JY{constructor(e){this.windowSize=e,this.samples=new Array(e),this.sampleIndex=0,this.total=0,this.numSamples=0,this.clear()}clear(){this.total=0,this.numSamples=0;for(let e=0;e<this.windowSize;e++)this.samples[e]=0}getRunningAverage(){return this.total/this.numSamples}isSaturated(){return this.numSamples>=this.windowSize}updateRunningAverage(e){return this.numSamples=Math.min(this.windowSize,this.numSamples+1),this.total-=this.samples[this.sampleIndex],this.total+=e,this.samples[this.sampleIndex]=e,this.sampleIndex=(this.sampleIndex+1)%this.windowSize,this.getRunningAverage()}}rl.register("RunningAverage",JY);const $Y=JY;let eH=!1;class tH{constructor(e){const t=Vo()({windowSize:2e3,memoryLimit:phet.chipper.queryParameters.memoryLimit},e);this.memoryLimit=1048576*t.memoryLimit,this.runningAverage=new $Y(t.windowSize),this.lastMemory=0}measure(){if(!window.performance||!window.performance.memory||!window.performance.memory.usedJSHeapSize)return;const e=window.performance.memory.usedJSHeapSize;this.lastMemory=e;const t=this.runningAverage.updateRunningAverage(e);if(this.memoryLimit&&this.runningAverage.isSaturated()&&!eH&&t>this.memoryLimit&&e>.5*this.memoryLimit)throw eH=!0,new Error(`Average memory used (${tH.memoryString(t)}) is above our memoryLimit (${tH.memoryString(this.memoryLimit)}). Current memory: ${tH.memoryString(e)}.`)}static memoryString(e){return Math.ceil(e/1048576)+"MB"}}nB.register("MemoryMonitor",tH);class iH{constructor(){_defineProperty(this,"allTimes",[]),_defineProperty(this,"histogram",[]),_defineProperty(this,"longTimes",[]),_defineProperty(this,"frameStartTime",0),_defineProperty(this,"previousFrameStartTime",0);for(let e=0;e<30;e++)this.histogram.push(0);$("body").append('<div style="z-index: 99999999;position: absolute;color:red; left: 10px;" id="phetProfiler" ></div>')}static start(e){const t=new iH;e.frameStartedEmitter.addListener(()=>t.frameStarted()),e.frameEndedEmitter.addListener(()=>t.frameEnded())}frameStarted(){this.frameStartTime=Date.now()}frameEnded(){if(this.allTimes.length>0&&this.allTimes.length%60==0){let e=0;for(let i=0;i<this.allTimes.length;i++)e+=this.allTimes[i];let t=fl.roundSymmetric(1e3/(e/this.allTimes.length))+" FPS";t=t+" — "+fl.roundSymmetric(e/this.allTimes.length)+"ms/frame",t=t+" — "+this.histogram,this.longTimes.length>0&&(this.longTimes.sort((e,t)=>t-e),t=t+" — "+this.longTimes),$("#phetProfiler").html(t);for(let i=0;i<30;i++)this.histogram[i]=0;this.longTimes.length=0,this.allTimes.length=0}if(this.previousFrameStartTime){const e=this.frameStartTime-this.previousFrameStartTime;this.allTimes.push(e),e<30?this.histogram[e]++:this.longTimes.push(e)}this.previousFrameStartTime=this.frameStartTime}}nB.register("Profiler",iH);class nH extends cv{constructor(e,t){super(Vo()({containerTagName:"section",tagName:"div",labelContent:e,labelTagName:"h2"},t))}}JI.register("PDOMSectionNode",nH);class rH extends nH{constructor(e){super(nO.a11y.simSection.controlAreaStringProperty,e)}}JI.register("ControlAreaNode",rH);class sH extends nH{constructor(e){super(nO.a11y.simSection.playAreaStringProperty,e)}}JI.register("PlayAreaNode",sH);class aH extends cv{constructor(){super(),this.openingSummaryNode=new cv({tagName:"p"});const e=new cv({tagName:"p",innerContent:nO.a11y.simSection.screenSummary.keyboardShortcutsHintStringProperty});this.addChild(this.openingSummaryNode),this.addChild(e),this.pdomOrder=[this.openingSummaryNode,null,e]}setIntroString(e,t,i){this.openingSummaryNode.innerContent=i&&t?Qb.fillIn(nO.a11y.simSection.screenSummary.multiScreenIntroStringProperty,{screen:t}):Qb.fillIn(nO.a11y.simSection.screenSummary.singleScreenIntroPatternStringProperty,{sim:e})}}JI.register("ScreenSummaryNode",aH);const oH=new Zl(0,0,1024,618);class lH extends cv{constructor(e){const t=Vo()({layoutBounds:oH.copy(),layerSplit:!0,excludeInvisible:!0,tandem:Lm.REQUIRED,visiblePropertyOptions:{phetioState:!1,phetioReadOnly:!0},containerTagName:"article",tagName:"div",screenSummaryContent:null,includePDOMNodes:!0},e);super(t),_defineProperty(this,"_screenSummaryContent",null),this.layoutBounds=t.layoutBounds,this.visibleBoundsProperty=new ty(t.layoutBounds),this.pdomTitleNode=new cv({tagName:"h1",focusHighlight:"invisible"}),this.pdomPlayAreaNode=new sH,this.pdomControlAreaNode=new rH,this.pdomScreenSummaryNode=new aH,t.screenSummaryContent&&this.setScreenSummaryContent(t.screenSummaryContent),this.visibleProperty.lazyLink(e=>{e?(this.pdomTitleNode.focusable=!0,this.pdomTitleNode.focus()):this.pdomTitleNode.focusable=!1}),this.pdomTitleNode.addInputListener({blur:()=>{this.pdomTitleNode.focusable=!1}}),this.pdomParentNode=new cv({children:t.includePDOMNodes?[this.pdomTitleNode,this.pdomScreenSummaryNode,this.pdomControlAreaNode,this.pdomPlayAreaNode]:[this.pdomTitleNode]}),this.addChild(this.pdomParentNode),this.pdomParentNode.pdomOrder=t.includePDOMNodes?[this.pdomTitleNode,this.pdomScreenSummaryNode,this.pdomPlayAreaNode,this.pdomControlAreaNode]:[this.pdomTitleNode]}setPDOMOrder(e){throw new Error("should not need to set accessible order on a ScreenView")}setChildren(e){return cv.prototype.setChildren.call(this,e),this.pdomParentNode&&!this.hasChild(this.pdomParentNode)&&(this.addChild(this.pdomParentNode),this.pdomParentNode.moveToBack()),this}getLayoutScale(e){return lH.getLayoutScale(this.layoutBounds,e)}layout(e,t){this.matrix=lH.getLayoutMatrix(this.layoutBounds,e,t),this.visibleBoundsProperty.value=this.parentToLocalBounds(e)}get screenSummaryContent(){return this._screenSummaryContent}set screenSummaryContent(e){this.setScreenSummaryContent(e)}setScreenSummaryContent(e){this._screenSummaryContent&&this.pdomScreenSummaryNode.removeChild(this._screenSummaryContent),this._screenSummaryContent=e,e&&this.pdomScreenSummaryNode.addChild(e)}setScreenSummaryIntroAndTitle(e,t,i,n){this.pdomScreenSummaryNode.setIntroString(e,t,n),this.pdomTitleNode.innerContent=i}getVoicingOverviewContent(){throw new Error("The ScreenView should implement getVoicingOverviewContent if Voicing is enabled")}getVoicingDetailsContent(){throw new Error("The ScreenView should implement getVoicingDetailsContent when the Voicing feature is enabled.")}getVoicingHintContent(){throw new Error("The ScreenView should implement getVoicingHintContent when Voicing is enabled.")}interruptSubtreeInput(){var e,t,i;return null===(e=window.phet)||void 0===e||null===(t=e.joist)||void 0===t||null===(i=t.display)||void 0===i||i.interruptOtherPointers(),super.interruptSubtreeInput()}static getLayoutScale(e,t){return Math.min(t.width/e.width,t.height/e.height)}static getLayoutMatrix(e,t,i){const n=Vo()({verticalAlign:"center"},i),r=t.width,s=t.height,a=lH.getLayoutScale(e,t);let o=0,l=0;return a===r/e.width?(l=s/a-e.height,"center"===n.verticalAlign&&(l/=2)):a===s/e.height&&(o=(r/a-e.width)/2),Mh.rowMajor(a,0,o*a+t.left,0,a,l*a+t.top,0,0,1)}step(e){}}_defineProperty(lH,"DEFAULT_LAYOUT_BOUNDS",oH),nB.register("ScreenView",lH);const hH=lH,uH=new bt("mobius"),cH=QueryStringMachine.getAll({mobiusCanvasSupersampling:{type:"number",defaultValue:1},mobiusCanvasSkipGamma:{type:"boolean",defaultValue:!0}});uH.register("MobiusQueryParameters",cH);const dH=cH;class pH extends THREE.Texture{constructor(e,t,i){const n=new cv({renderer:"canvas",preventFit:!0});n.addChild(e);const r=new SV(n,{width:t,height:i,accessibility:!1});r.updateDisplay(),super(r.rootBackbone.blocks[0].canvas),this._display=r,this._scene=n,this._width=t,this._height=i,this.needsUpdate=!0}update(){this._display.updateDisplay(),this.needsUpdate=!0}dispose(){this._display.dispose(),this._scene.dispose(),super.dispose()}}uH.register("NodeTexture",pH);class mH{constructor(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:bl.ZERO;this.positionArray=e,this.normalArray=t,this.uvArray=i,this.positionIndex=3*n,this.normalIndex=3*n,this.uvIndex=2*n,this.offset=n,this.offsetPosition=r}position(e,t,i){this.positionArray&&(this.positionArray[this.positionIndex++]=e+this.offsetPosition.x,this.positionArray[this.positionIndex++]=t+this.offsetPosition.y,this.positionArray[this.positionIndex++]=i+this.offsetPosition.z),this.offset++}normal(e,t,i){this.normalArray&&(this.normalArray[this.normalIndex++]=e,this.normalArray[this.normalIndex++]=t,this.normalArray[this.normalIndex++]=i)}uv(e,t){this.uvArray&&(this.uvArray[this.uvIndex++]=e,this.uvArray[this.uvIndex++]=t)}getOffset(){return this.offset}}uH.register("TriangleArrayWriter",mH);class gH extends THREE.BufferGeometry{constructor(e,t,i,n,r,s,a,o,l,h,u,c,d,p,m){super();const g=new Float32Array(18),f=new Float32Array(18),y=new Float32Array(12);gH.updateArrays(g,f,y,e,t,i,n,r,s,a,o,l,h,u,c,d,p,m),this.addAttribute("position",new THREE.BufferAttribute(g,3)),this.addAttribute("normal",new THREE.BufferAttribute(f,3)),this.addAttribute("uv",new THREE.BufferAttribute(y,2)),this._update=(e,t,i,n,r,s,a,o,l,h,u,c,d,p,m)=>{gH.updateArrays(g,f,y,e,t,i,n,r,s,a,o,l,h,u,c,d,p,m),this.attributes.position.needsUpdate=!0,this.attributes.normal.needsUpdate=!0,this.computeBoundingSphere()}}set(e,t,i,n,r,s,a,o,l,h,u,c,d,p,m){this._update(e,t,i,n,r,s,a,o,l,h,u,c,d,p,m)}static updateArrays(e,t,i,n,r,s,a,o,l,h,u,c,d,p,m,g,f,y){let E=arguments.length>18&&void 0!==arguments[18]?arguments[18]:0,v=arguments.length>19&&void 0!==arguments[19]?arguments[19]:bl.ZERO;const A=new mH(e,t,i,E,v);return A.position(n,r,s),A.position(a,o,l),A.position(h,u,c),A.position(n,r,s),A.position(h,u,c),A.position(d,p,m),A.uv(0,0),A.uv(1,0),A.uv(1,1),A.uv(0,0),A.uv(1,1),A.uv(0,1),A.normal(g,f,g),A.getOffset()}}uH.register("Quad",gH);class fH extends THREE.Mesh{constructor(e,t,i,n){const r=new gH(0,0,0,t,0,0,t,i,0,0,i,0,0,0,1),s=new THREE.MeshBasicMaterial(Po({transparent:!0,depthTest:!1,map:e},n));super(r,s),this.quadGeometry=r,this.basicMaterial=s,this.textureQuadWidth=t,this.textureQuadHeight=i}updateTexture(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.textureQuadWidth,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.textureQuadHeight;this.basicMaterial.map=e,this.basicMaterial.needsUpdate=!0,t===this.textureQuadWidth&&i===this.textureQuadHeight||(this.textureQuadWidth=t,this.textureQuadHeight=i,this.quadGeometry.set(0,0,0,t,0,0,t,i,0,0,i,0,0,0,1))}dispose(){this.quadGeometry.dispose(),this.basicMaterial.dispose(),super.dispose&&super.dispose()}}uH.register("TextureQuad",fH);class yH extends Km{constructor(e){super(Vo()({phetioType:yH.ThreeObject3DIO,tandem:Lm.REQUIRED},e))}}_defineProperty(yH,"ThreeObject3DIO",new el("ThreeObject3DIO",{valueType:yH,toStateObject:()=>({}),stateSchema:{}})),uH.register("ThreeObject3DPhetioObject",yH);const EH=bv(e=>class extends e{constructor(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const n=t[t.length-1];super(...t.slice(0,t.length-1)),this.phetioObject=new yH(n)}dispose(){super.dispose&&super.dispose(),this.phetioObject.dispose()}});uH.register("ThreeInstrumentable",EH);const vH=new Ip("M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z").makeImmutable();class AH extends eY{constructor(e,t){const i=Vo()({font:nf.DEFAULT,textFill:"black",maxTextWidth:null,tandem:Lm.REQUIRED,tandemNameSuffix:"Button",innerContent:e},t),n=new gA(e,No({font:i.font,fill:i.textFill,maxWidth:i.maxTextWidth},i.textNodeOptions));i.content=n,super(i),this.disposeTextPushButton=()=>{n.dispose()}}dispose(){this.disposeTextPushButton(),super.dispose()}}fD.register("TextPushButton",AH);const bH=e=>{const t=_.get(window,e);return void 0!==t?t:null};wo.register("getGlobal",bH);const SH=bH,_H=new Hg(0,200,0),xH=new Hg(255,85,0),wH=new Hg(0,135,0),TH=new Hg(106,206,245),PH=new Hg(254,225,5),CH={ACCELERATION:new Hg(255,255,50),APPLIED_FORCE:new Hg(236,153,55),BUTTON_YELLOW:PH,ELASTIC_POTENTIAL_ENERGY:new Hg(0,204,255),FRICTION_FORCE:xH,GRAVITATIONAL_FORCE:new Hg(50,130,215),GRAVITATIONAL_POTENTIAL_ENERGY:new Hg(55,130,215),HEAT_THERMAL_ENERGY:xH,IMAGINARY_PART:new Hg(153,51,102),KINETIC_ENERGY:new Hg(30,200,45),MOMENTUM:new Hg(50,50,255),NET_WORK:_H,NORMAL_FORCE:new Hg(255,235,0),PHET_LOGO_BLUE:TH,PHET_LOGO_YELLOW:PH,POSITION:Hg.BLUE,REAL_PART:new Hg(255,153,0),RED_COLORBLIND:xH,RESET_ALL_BUTTON_BASE_COLOR:new Hg(247,151,34),GREEN_COLORBLIND:wH,TOTAL_ENERGY:new Hg(180,180,0),TOTAL_FORCE:_H,VELOCITY:new Hg(50,255,50),WALL_FORCE:new Hg(153,51,0),SCREEN_ICON_FRAME:"#dddddd"};JI.register("PhetColorScheme",CH);const VH=CH;class RH extends eY{constructor(e){const t=Vo()({iconLength:16,pathOptions:{stroke:"white",lineWidth:2.5,lineCap:"round"},baseColor:VH.RED_COLORBLIND,xMargin:4,yMargin:4,innerContent:nO.a11y.closeStringProperty,voicingNameResponse:nO.a11y.closeStringProperty},e),i=(new Ip).moveTo(-t.iconLength/2,-t.iconLength/2).lineTo(t.iconLength/2,t.iconLength/2).moveTo(t.iconLength/2,-t.iconLength/2).lineTo(-t.iconLength/2,t.iconLength/2);t.content=new aA(i,t.pathOptions),super(t)}}JI.register("CloseButton",RH);const NH="data:audio/mpeg;base64,//swxAAAB5gnMzRhAAEHDWyDNLAAAAAaAQAu7tjAQAAABgMBgNNiBBAWD7ykMQf1g+D5/qBMHwfB/iAEPWCDv+o5wfPg+8EAQBMHz6gQB8Hwfsu2uWDrkw/a9xgUaMwFxxwCLsWS7MHN7VJki8fVT75eTqpn7/Xt1QxW//lJVbnfNuFRTzwrLn/5GVBnKMy/FVs5dTYABARKCMRm//syxAQACHBHWZ2kAAEJi+jxpg1Qlry2AYclVGyMwNoFJ29hqHqa1TRqRMCoetKstcqUzHBxQdCJmVcSJ/EQdEo0FXSoNLGkav/ljqPtEvjAoAE0zuEoM3lMJlLY3Uj65AMeMzQN6QWeLFdCcxLNFy4dBVXVfZ1L+gIki4KPQVBb4dERU6CrsFSoaLVHv/Ev9Hw4ANdAAG7VBBhVdP/7MsQFAAh8YybVowABG49vdx6AAm8ODBg8FDy9pmwIBsHPVGiPMueyERxZdIFnSpkzI8fezb+0z6OJVv7HHw7XBWdXwa6/y34l6sq7uitTjFTEgsFYrFQqFQDAGrQXMbpbb3ZGQWPWvTnyyeKKHgQ/nvlUf/u74oOHp/8v3R/dl/UcSXDz+kMBEHI0p5efiDJqb/64foFiBSWqB2r/+zLEA4AIVDlivZGAAQePKiWmDNhtwTYmBYyxnJdmZwmMtZ8ZjInEMMpo+VFWESqmhsWBoClhKKEhCW5UNPCsFVgqImyWS6KTAhEUrYoO7kaAWIJCwQzbgl5XrFBB27xoQwfnY6kozJtFz0SgICsWM3VIKWs6qr0tgI15/pQomHhblqjycRUCWe1dUOpxFOiJ/ooQC+IEEBlVdh0r//swxAUACGCjMy0kSsDoiCAA95gpQaBI041ceup5PSlsv5QNXMyixFLVkTXWpYUBYy/lEl4YCdWlLoZ//zGlKUBEhV0SiFT+us7WdBXqAbQ2hdxgDfH4RQsI+kgo2RnWVECiCa0TrUSNjalrUVVKyg0yapYqqVlRTNVLFf/2P/1qVadsTFKlitVMQU1FMy45OS4zVVVVVVVVVVVV",MH=aO(cO,NH),kH=JD.createLock(NH),LH=new hO;let IH=!1;const BH=()=>{IH||(kH(),IH=!0)},DH=cO.decodeAudioData(MH.buffer,e=>{null===LH.audioBufferProperty.value&&(LH.audioBufferProperty.set(e),BH())},e=>{console.warn("decode of audio data failed, using stubbed sound, error: "+e),LH.audioBufferProperty.set(cO.createBuffer(1,1,cO.sampleRate)),BH()});DH&&DH.then(e=>{null===LH.audioBufferProperty.value&&(LH.audioBufferProperty.set(e),BH())}).catch(e=>{console.warn("promise rejection caught for audio decode, error = "+e),BH()});const OH=new gq(LH,{soundClipOptions:{initialOutputLevel:.4},soundManagerOptions:{categoryName:"user-interface"}});oO.register("generalCloseSoundPlayer",OH);const qH=OH,YH="data:audio/mpeg;base64,//swxAAABswbPzQxABEQFyzDMlAAAAGoGRIdz0AAARQAAAAAMCd5QEAxBA4sPlz/BAMfw+ooc8EA/EAYKAh/qBBYfwfD4jB/4nD98ZXetEKIxIqnuursF7pTGkY4dNYcaZhOjzgxDNndb75ggdCsIvV3qoeM9HIX215a6Hftuc5FhwFRhvuJuhxbMPp+ir0KlAaCTHVtZuCsLISS//syxAYACGhJXR2jABEVIGmw8YpieZwGg6y5/p6bf69uls4kMS9HVvrXl8hI5WPBY8FawqGh3PYlLA0HQm6ZHvUe/4UB4ChNzls1AZIAAxJNQMBOy4KAeSsL0QgRcxFInzpyhsQ6tvdvaM160ZnbY/2bY19dTlJVJmhrQpT/Vf0eVjfzG////6PMYzmtqJdg0WqADvRwaGDBgBO5T//7MsQFgAkEZSA1swABDRYvdx5QAhmAEZHdFc2HHLBy/LcmfqWvq1yftVsQSJAxzSi25i5w6qqvMy/cjgNSoKu2Q1LHp1S4NCJQsHfLUSINPxK6oxocyIhmMRkMhQAQBuyhLerW2u5zoV4af2nULcHzwOiPxQjFU/nvIyflMKARabfnQqGI/v/FAIV6UJnPAgAca//9NZUgFEnVWuP/+zLEA4AIVL1vnYQAEQkIajDMpMja7T9a7DL+uzSEg2RRajlNmUzFPCBtL7Uyoa/iVlabnj1+Pi9f61X5WuJ9V1XhkOmtYltLGPI1//8s/0PMAKmLuWQPy0Hrh0Uy4C5MCaWoC5bwOjrQpVOQIn9JNDksr2zEBLvAp3LCI8Is9BX1FTsS50j5Us8OCIqEg73ZZ9QByyIAiddlUPU0//swxAUCSEyXLMywatDDBOHA8zBIRfBtlFDU3P7EItHsWE51WgaTVpJLPMzOMYE1qUSth4pRSd1WkZLqqrnGPUobBm4oDUDHol//+rJBUlwL0rYuAoOSuFITEsfTp5a46IhKRBQ6FQkBQCWJESR0KhIeNASKGnsJgJCf///1VUxBTUUzLjk5LjNVVVVVVVVVVVVVVVVVVVVVVVVV",HH=aO(cO,YH),GH=JD.createLock(YH),FH=new hO;let zH=!1;const UH=()=>{zH||(GH(),zH=!0)},WH=cO.decodeAudioData(HH.buffer,e=>{null===FH.audioBufferProperty.value&&(FH.audioBufferProperty.set(e),UH())},e=>{console.warn("decode of audio data failed, using stubbed sound, error: "+e),FH.audioBufferProperty.set(cO.createBuffer(1,1,cO.sampleRate)),UH()});WH&&WH.then(e=>{null===FH.audioBufferProperty.value&&(FH.audioBufferProperty.set(e),UH())}).catch(e=>{console.warn("promise rejection caught for audio decode, error = "+e),UH()});const XH=new gq(FH,{soundClipOptions:{initialOutputLevel:.4},soundManagerOptions:{categoryName:"user-interface"}});oO.register("generalOpenSoundPlayer",XH);const jH=XH;const QH=new class{play(){}stop(){}};oO.register("nullSoundPlayer",QH);const KH=QH,ZH=new el("DynamicMarkerIO",{supertype:el.ObjectIO,applyState:_.noop,toStateObject:()=>({}),isValidValue:_.stubTrue,documentation:"IO Type used as a place holder for dynamic elements to be created when set for state."});zo.register("DynamicMarkerIO",ZH);const JH=ZH,$H=e=>{const t=e.split("."),i=t.pop(),n=_.get(window,t);return n?n[i].bind(n):null};wo.register("gracefulBind",$H);const eG=$H,tG=(e,t)=>class extends e{constructor(){for(var e,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];super(...n);const s=n[t]||{},a=(n[n.length-1],eG("phet.joist.sim.showPopup")),o=eG("phet.joist.sim.hidePopup"),l=Vo()({showPopup:a,hidePopup:o,isModal:!0,layoutBounds:null,focusOnShowNode:null,focusOnHideNode:null,disableModals:_.get(window,"phet.chipper.queryParameters.disableModals")||!1},s);this.layoutBounds=l.layoutBounds,this._focusOnShowNode=l.focusOnShowNode,this._focusOnHideNode=l.focusOnHideNode,this._nodeToFocusOnHide=null,this.popupParent=new iG(this,{show:this.show.bind(this),hide:this.hide.bind(this),layout:this.layout.bind(this)}),this.isShowingProperty=new gy(!1,{tandem:null===(e=l.tandem)||void 0===e?void 0:e.createTandem("isShowingProperty"),phetioReadOnly:!0,phetioFeatured:!0}),this.isShowingProperty.lazyLink(e=>{l.disableModals&&l.isModal||(e?l.showPopup(this.popupParent,l.isModal):l.hidePopup(this.popupParent,l.isModal))})}layout(e){this.layoutBounds&&(this.popupParent.matrix=hH.getLayoutMatrix(this.layoutBounds,e))}show(){this._nodeToFocusOnHide=this._focusOnHideNode||GS.pdomFocusedNode,this.isShowingProperty.value=!0,this._focusOnShowNode&&this._focusOnShowNode.focusable&&this._focusOnShowNode.focus()}hide(){this.interruptSubtreeInput(),this.isShowingProperty.value=!1,this._nodeToFocusOnHide&&this._nodeToFocusOnHide.focusable&&this._nodeToFocusOnHide.focus()}get focusOnHideNode(){return this._focusOnHideNode}dispose(){this.hide(),this.isShowingProperty.dispose(),super.dispose()}};class iG extends cv{constructor(e,t){const i=Vo()({children:[e]},t);super(i),this.show=i.show,this.hide=i.hide,this.layout=i.layout}}fD.register("Popupable",tG);const nG=tG,rG=AB("SUN");fD.register("SunStrings",rG);const sG=rG;class aG extends(nG(ED,1)){constructor(e,t){var i;const n=Vo()({xSpacing:10,ySpacing:10,topMargin:15,bottomMargin:15,leftMargin:null,maxWidthMargin:12,maxHeightMargin:12,closeButtonLength:18.2,closeButtonTopMargin:10,closeButtonRightMargin:10,title:null,titleAlign:"center",addAriaLabelledByFromTitle:!0,layoutStrategy:oG,closeButtonListener:()=>this.hide(),closeButtonColor:"black",closeButtonTouchAreaXDilation:0,closeButtonTouchAreaYDilation:0,closeButtonMouseAreaXDilation:0,closeButtonMouseAreaYDilation:0,closeButtonVoicingDialogTitle:null,closeButtonLastInPDOM:!1,openedSoundPlayer:jH,closedSoundPlayer:qH,sim:SH("phet.joist.sim"),showCallback:null,hideCallback:null,layoutBounds:hH.DEFAULT_LAYOUT_BOUNDS,focusOnShowNode:null,cornerRadius:10,resize:!0,fill:"white",stroke:"black",backgroundPickable:!0,maxHeight:null,maxWidth:null,phetioType:aG.DialogIO,phetioState:!0,phetioVisiblePropertyInstrumented:!1,tagName:"div",ariaRole:"dialog"},t);n.xMargin=0,n.yMargin=0,null===n.leftMargin&&(n.leftMargin=n.xSpacing+n.closeButtonLength+n.closeButtonRightMargin),!n.maxWidth&&n.layoutBounds&&(n.maxWidth=lG(n.layoutBounds.width,n.maxWidthMargin)),!n.maxHeight&&n.layoutBounds&&(n.maxHeight=lG(n.layoutBounds.height,n.maxHeightMargin));const r=new lS({priority:lS.MEDIUM_PRIORITY,voicingCanAnnounceProperties:[SS.voicingFullyEnabledProperty]}),s=new RH({iconLength:n.closeButtonLength,baseColor:"transparent",buttonAppearanceStrategy:Kq.FlatAppearanceStrategy,xMargin:0,yMargin:0,listener:()=>{s.voicingSpeakContextResponse({utterance:r}),n.closeButtonListener()},pathOptions:{stroke:n.closeButtonColor},tandem:null===(i=n.tandem)||void 0===i?void 0:i.createTandem("closeButton"),phetioState:!1,phetioVisiblePropertyInstrumented:!1,phetioEnabledPropertyInstrumented:!1,soundPlayer:KH,tagName:"button",innerContent:sG.a11y.closeStringProperty,voicingContextResponse:sG.a11y.closedStringProperty});let a;if(n.closeButtonVoicingDialogTitle){const e="string"==typeof n.closeButtonVoicingDialogTitle?new mg(n.closeButtonVoicingDialogTitle):n.closeButtonVoicingDialogTitle;a=s.voicingNameResponse=new WI(sG.a11y.titleClosePatternStringProperty,{title:e},{tandem:Lm.OPT_OUT})}s.touchArea=s.bounds.dilatedXY(n.closeButtonTouchAreaXDilation,n.closeButtonTouchAreaYDilation),s.mouseArea=s.bounds.dilatedXY(n.closeButtonMouseAreaXDilation,n.closeButtonMouseAreaYDilation);let o=[n.title,e];n.closeButtonLastInPDOM?o.push(s):o.unshift(s),o=o.filter(e=>null!=e),n.focusOnShowNode=n.focusOnShowNode?n.focusOnShowNode:o[0].focusable?o[0]:s;const l=new aT({children:n.title?[n.title,e]:[e],spacing:n.ySpacing,align:n.titleAlign}),h=new eT(l,{topMargin:n.topMargin,bottomMargin:n.bottomMargin,leftMargin:n.leftMargin}),u=new eT(s,{topMargin:n.closeButtonTopMargin,rightMargin:n.closeButtonRightMargin}),c=new sT({children:[h,u],spacing:n.xSpacing,align:"top"});super(c,n),this.isShowingProperty.lazyLink(e=>{e?(n.openedSoundPlayer.play(),n.showCallback&&n.showCallback()):(n.closedSoundPlayer.play(),n.hideCallback&&n.hideCallback())}),this.sim=n.sim,this.closeButton=s;const d=pS.multilink([this.sim.boundsProperty,this.sim.screenBoundsProperty,this.sim.scaleProperty,this.sim.selectedScreenProperty,this.isShowingProperty,this.localBoundsProperty],(e,t,i)=>{e&&t&&i&&n.layoutStrategy(this,e,t,i)});this.pdomOrder=o,n.title&&n.title.tagName&&n.addAriaLabelledByFromTitle&&this.addAriaLabelledbyAssociation({thisElementName:C_.PRIMARY_SIBLING,otherNode:n.title,otherElementName:C_.PRIMARY_SIBLING});const p=new Kx({keys:["escape","tab"],callback:(e,t)=>{const i=e.domEvent;if("escape"===t)i.preventDefault(),this.hide();else if("tab"===t&&hy.isFullScreen()){const e=GS.pdomFocus.trail.getUniqueId(),t=nE.getNextFocusable().id===e,n=nE.getPreviousFocusable().id===e;t&&n&&i.preventDefault()}}});this.addInputListener(p),this.disposeDialog=()=>{d.dispose(),u.dispose(),this.removeInputListener(p),p.dispose(),a&&a.dispose(),s.dispose(),r.dispose(),l.dispose(),c.removeAllChildren(),c.detach()}}dispose(){this.disposeDialog(),super.dispose()}}function oG(e,t,i,n){e.layoutBounds&&(e.center=e.layoutBounds.center)}function lG(e,t){return e>2*t?e-2*t:e}_defineProperty(aG,"DialogIO",new el("DialogIO",{valueType:aG,supertype:JH})),fD.register("Dialog",aG);class hG extends aG{constructor(e){const t=Vo()({reload:()=>window.location.reload(),xSpacing:30,topMargin:30,bottomMargin:30,leftMargin:30},e),i=new aA(vH,{fill:"#E87600",scale:.048}),n=new gA(nO.webglWarning.contextLossFailureStringProperty,{font:new gD(12)}),r=new AH(nO.webglWarning.contextLossReloadStringProperty,{font:new gD(12),baseColor:"#E87600",listener:()=>this.hide(),tandem:Lm.OPT_OUT});super(new sT({children:[i,n,r],spacing:10}),t),this.reload=t.reload,this.disposeContextLossFailureDialog=()=>{n.dispose(),r.dispose()}}dispose(){this.disposeContextLossFailureDialog(),super.dispose()}hide(){this.reload(),super.hide()}hideWithoutReload(){super.hide()}}JI.register("ContextLossFailureDialog",hG);let uG=null;const cG=new Float32Array(128),dG={vectorToThree:e=>new THREE.Vector3(e.x,e.y,e.z),threeToVector:e=>new bl(e.x,e.y,e.z),colorToThree:e=>new THREE.Color(e.toNumber()),frontVertices:(e,t)=>cG.slice(0,dG.writeFrontVertices(cG,0,e,t)),topVertices:(e,t)=>cG.slice(0,dG.writeTopVertices(cG,0,e,t)),rightVertices:(e,t)=>cG.slice(0,dG.writeRightVertices(cG,0,e,t)),leftVertices:(e,t)=>cG.slice(0,dG.writeLeftVertices(cG,0,e,t)),writeTriangle:(e,t,i,n,r,s,a,o,l,h,u)=>(e[t+0]=i,e[t+1]=n,e[t+2]=r,e[t+3]=s,e[t+4]=a,e[t+5]=o,e[t+6]=l,e[t+7]=h,e[t+8]=u,t+9),writeQuad:(e,t,i,n,r,s,a,o,l,h,u,c,d,p)=>(t=dG.writeTriangle(e,t,i,n,r,s,a,o,l,h,u),t=dG.writeTriangle(e,t,i,n,r,l,h,u,c,d,p)),writeFrontVertices:(e,t,i,n)=>dG.writeQuad(e,t,i.minX,i.maxY,n,i.minX,i.minY,n,i.maxX,i.minY,n,i.maxX,i.maxY,n),writeTopVertices:(e,t,i,n)=>dG.writeQuad(e,t,i.minX,n,i.maxY,i.maxX,n,i.maxY,i.maxX,n,i.minY,i.minX,n,i.minY),writeRightVertices:(e,t,i,n)=>dG.writeQuad(e,t,n,i.minY,i.maxX,n,i.minY,i.minX,n,i.maxY,i.minX,n,i.maxY,i.maxX),writeLeftVertices:(e,t,i,n)=>dG.writeQuad(e,t,n,i.minY,i.maxX,n,i.maxY,i.maxX,n,i.maxY,i.minX,n,i.minY,i.minX),get textureLoader(){return uG||(uG=new THREE.TextureLoader),uG},imageToTexture:(e,t)=>t?dG.textureLoader.load(e.src,JD.createLock()):dG.textureLoader.load(e.src),isWebGLEnabled:()=>phet.chipper.queryParameters.webgl&&_f.isWebGLSupported,showWebGLWarning(e){const t=new sT({children:[new aA(vH,{fill:"#E87600",scale:.06}),new gA(nO.webglWarning.bodyStringProperty,{font:new gD(16),fill:"#000",maxWidth:600})],spacing:12,align:"center",cursor:"pointer",center:e.layoutBounds.center});e.addChild(t),t.mouseArea=t.touchArea=t.localBounds,t.addInputListener({up:function(){const e=_.get(window,"phet.joist",null),t=e?e.sim.locale:"en";Sy("https://phet.colorado.edu/webgl-disabled-page?simLocale="+t)}})}};uH.register("ThreeUtils",dG);const pG=dG;class mG{constructor(e){_defineProperty(this,"threeRenderer",null);const t=Vo()({backgroundProperty:new ty(Hg.BLACK),cameraPosition:new bl(0,0,10)},e);if(this.activeScale=1,this.canvasWidth=0,this.canvasHeight=0,this.threeScene=new THREE.Scene,this.threeCamera=new THREE.PerspectiveCamera,this.threeCamera.near=1,this.threeCamera.far=100,pG.isWebGLEnabled())try{this.threeRenderer=new THREE.WebGLRenderer({antialias:!0,alpha:!0,preserveDrawingBuffer:phet.chipper.queryParameters.preserveDrawingBuffer})}catch(i){console.log(i)}this.threeRenderer&&this.threeRenderer.setPixelRatio(window.devicePixelRatio||1),this.contextLossDialog=null,this.threeRenderer&&this.threeRenderer.context.canvas.addEventListener("webglcontextlost",e=>{this.showContextLossDialog()}),this.threeRenderer&&this.threeRenderer.context.canvas.addEventListener("webglcontextrestored",e=>{this.contextLossDialog&&this.contextLossDialog.hideWithoutReload()}),this.backgroundProperty=t.backgroundProperty,this.colorListener=e=>{this.threeRenderer&&this.threeRenderer.setClearColor(e.toNumber(),e.alpha)},this.backgroundProperty.link(this.colorListener),this.threeCamera.position.copy(pG.vectorToThree(t.cameraPosition)),this.dimensionsChangedEmitter=new np}renderToCanvas(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const i=Math.ceil(this.canvasWidth*t),n=Math.ceil(this.canvasHeight*t),r=i*e,s=n*e,a=document.createElement("canvas");if(a.width=i,a.height=n,this.threeRenderer){const t=new THREE.WebGLRenderTarget(r,s,{minFilter:THREE.LinearFilter,magFilter:THREE.NearestFilter,format:THREE.RGBAFormat});this.render(t);const o=new window.ArrayBuffer(r*s*4),l=new window.Uint8Array(o),h=this.threeRenderer.getContext();let u;if(h.readPixels(0,0,r,s,h.RGBA,h.UNSIGNED_BYTE,l),1===e)u=new window.Uint8ClampedArray(o);else{u=new window.Uint8ClampedArray(i*n*4);const t=1/(e*e);if(dH.mobiusCanvasSkipGamma)for(let s=0;s<i;s++){const a=s*e;for(let o=0;o<n;o++){const n=o*e,h=4*(s+o*i);let c=0,d=0,p=0,m=0;for(let t=0;t<e;t++)for(let i=0;i<e;i++){const e=4*(a+t+(n+i)*r),s=l[e+3];c+=l[e+0]*s,d+=l[e+1]*s,p+=l[e+2]*s,m+=s}0===m?(u[h+0]=0,u[h+1]=0,u[h+2]=0,u[h+3]=0):(u[h+0]=Math.floor(c/m),u[h+1]=Math.floor(d/m),u[h+2]=Math.floor(p/m),u[h+3]=Math.floor(m*t))}}else for(let s=0;s<i;s++){const a=s*e;for(let o=0;o<n;o++){const n=o*e,h=4*(s+o*i);let c=0,d=0,p=0,m=0;for(let t=0;t<e;t++)for(let i=0;i<e;i++){const e=4*(a+t+(n+i)*r),s=Math.pow(l[e+3],2.2);c+=Math.pow(l[e+0],2.2)*s,d+=Math.pow(l[e+1],2.2)*s,p+=Math.pow(l[e+2],2.2)*s,m+=s}0===m?(u[h+0]=0,u[h+1]=0,u[h+2]=0,u[h+3]=0):(u[h+0]=Math.floor(Math.pow(c/m,1/2.2)),u[h+1]=Math.floor(Math.pow(d/m,1/2.2)),u[h+2]=Math.floor(Math.pow(p/m,1/2.2)),u[h+3]=Math.floor(Math.pow(m*t,1/2.2)))}}}const c=a.getContext("2d"),d=c.createImageData(i,n);d.data.set(u),c.putImageData(d,0,0),t.dispose()}return a}showContextLossDialog(){this.contextLossDialog||(this.contextLossDialog=new hG),this.contextLossDialog.show()}getRaycasterFromScreenPoint(e){const t=2*e.x/this.canvasWidth-1,i=2*(1-e.y/this.canvasHeight)-1,n=new THREE.Vector3(t,i,0),r=new THREE.Raycaster;return r.setFromCamera(n,this.threeCamera),r}projectPoint(e){const t=pG.vectorToThree(e);return t.project(this.threeCamera),isFinite(t.x)||(t.x=0),isFinite(t.y)||(t.y=0),new al((t.x+1)*this.canvasWidth/2,(1-t.y)*this.canvasHeight/2)}getRayFromScreenPoint(e){const t=this.getRaycasterFromScreenPoint(e).ray;return new Ru(pG.threeToVector(t.origin),pG.threeToVector(t.direction).normalize())}setDimensions(e,t){this.canvasWidth=e,this.canvasHeight=t,this.threeCamera.updateProjectionMatrix(),this.threeRenderer&&this.threeRenderer.setSize(this.canvasWidth,this.canvasHeight),this.dimensionsChangedEmitter.emit()}adjustViewOffset(e){const t=this.threeCamera.near*Math.tan(Math.PI/360*this.threeCamera.fov)/this.threeCamera.zoom,i=this.threeCamera.aspect*t,n=new Zl(0,0,this.canvasWidth,this.canvasHeight).shifted(e.center.negated()),r=e.width,s=e.height,a=-i,o=t,l=(n.left*i/(.5*e.width)-a)*r/(2*i),h=(o- -n.top*t/(.5*e.height))*s/(2*t);this.threeCamera.setViewOffset(r,s,l,h,this.canvasWidth,this.canvasHeight),this.threeCamera.aspect=e.width/e.height,this.threeCamera.updateProjectionMatrix()}get width(){return this.canvasWidth}get height(){return this.canvasHeight}render(e){this.threeRenderer&&(this.threeRenderer.setRenderTarget(e||null),this.threeRenderer.render(this.threeScene,this.threeCamera),this.threeRenderer.autoClear=!1)}dispose(){this.threeRenderer&&this.threeRenderer.dispose(),this.threeScene.dispose(),this.backgroundProperty.unlink(this.colorListener)}static computeIsometricFOV(e,t,i,n,r){const s=t/n,a=i/r;return s>a?e:360*Math.atan(Math.tan(e*Math.PI/360)*a/s)/Math.PI}}uH.register("ThreeStage",mG);uH.register("ThreeIsometricNode",class extends cv{constructor(e,t){const i=Vo()({parentMatrixProperty:new ty(Mh.IDENTITY),fov:50,getPhetioMouseHit:null},t);super(),this.layoutBounds=e,this._getPhetioMouseHit=i.getPhetioMouseHit,this.stage=new mG(i),this.stage.threeCamera.fov=i.fov,this.stage.threeCamera.aspect=this.layoutBounds.width/this.layoutBounds.height,this.parentMatrixProperty=i.parentMatrixProperty,this.backgroundEventTarget=new xA({}),this.addChild(this.backgroundEventTarget),this.stage.threeRenderer&&(this.domNode=new bA(this.stage.threeRenderer.domElement,{preventTransform:!0,pickable:!1}),this.domNode.invalidateDOM=()=>this.domNode.invalidateSelf(new Zl(0,0,0,0)),this.domNode.invalidateDOM(),this.domNode.renderToCanvasSelf=(e,t)=>{const i=e.context,n=t.timesMatrix(this.getUniqueTrail().getMatrix().inverted()).m00(),r=this.stage.renderToCanvas(dH.mobiusCanvasSupersampling,n);i.save(),i.setTransform(1,0,0,-1,0,r.height),i.drawImage(r,0,0),i.restore()},this.addChild(this.domNode)),this.viewOffsetListener=()=>{const e=this.stage.width,t=this.stage.height;e&&t&&this.stage.adjustViewOffset(this.parentToGlobalBounds(new Zl(0,0,this.layoutBounds.width,this.layoutBounds.height)))},this.parentMatrixProperty.lazyLink(this.viewOffsetListener),this.mutate(i)}getPhetioMouseHit(e){return this._getPhetioMouseHit&&this.isPhetioMouseHittable(e)?this._getPhetioMouseHit(e):super.getPhetioMouseHit(e)}projectPoint(e){return this.stage.projectPoint(e)}getRayFromScreenPoint(e){return this.stage.getRayFromScreenPoint(e)}layout(e,t){if(_.hasIn(window,"phet.joist.sim")){const i=phet.joist.sim.dimensionProperty.value;e=i.width,t=i.height}this.stage.setDimensions(e,t),this.backgroundEventTarget.setRectBounds(this.globalToLocalBounds(new Zl(0,0,e,t)));const i=e/this.layoutBounds.width,n=t/this.layoutBounds.height;0!==i&&0!==n&&(this.stage.activeScale=n>i?i:n,this.viewOffsetListener(),this.stage.threeRenderer&&this.domNode.invalidateDOM())}render(e){this.stage.render(e)}dispose(){this.parentMatrixProperty.unlink(this.viewOffsetListener),super.dispose(),this.stage.dispose()}});uH.register("ThreeNode",class extends cv{constructor(e,t,i){const n=Vo()({fov:50},i);if(super(),this.stage=new mG(n),this.layoutWidth=e,this.layoutHeight=t,this.stage.threeCamera.fov=n.fov,this.stage.threeCamera.aspect=e/t,this.offsetProperty=new xw(al.ZERO),this.backgroundEventTarget=new xA(0,0,e,t),this.addChild(this.backgroundEventTarget),this.stage.threeRenderer){this.domNode=new bA(this.stage.threeRenderer.domElement,{preventTransform:!0,pickable:!1}),this.domNode.invalidateDOM=()=>this.domNode.invalidateSelf(new Zl(0,0,0,0)),this.domNode.invalidateDOM();const e=new Mh;_f.prepareForTransform(this.stage.threeRenderer.domElement),this.offsetProperty.link(t=>{e.setToTranslation(t.x,t.y),_f.applyPreparedTransform(e,this.stage.threeRenderer.domElement)}),this.domNode.renderToCanvasSelf=e=>{const t=this.stage.renderToCanvas(dH.mobiusCanvasSupersampling),i=e.context;i.save(),i.setTransform(1,0,this.offsetProperty.value.x,-1,0,this.stage.canvasHeight+this.offsetProperty.value.y),i.drawImage(t,0,0),i.restore()},this.addChild(this.domNode)}this.mutate(n)}projectPoint(e){return this.stage.projectPoint(e)}getRayFromScreenPoint(e){return this.stage.getRayFromScreenPoint(e)}layout(){const e=this.localToGlobalBounds(this.backgroundEventTarget.bounds).roundedOut();this.stage.setDimensions(e.width,e.height),this.offsetProperty.value=e.leftTop,this.stage.threeCamera.updateProjectionMatrix(),this.stage.threeRenderer&&this.domNode.invalidateDOM()}render(e){this.stage.render(e)}dispose(){super.dispose(),this.stage.dispose()}});const gG=new el("ThreeQuaternionIO",{valueType:THREE.Quaternion,documentation:"A numerical object representing a quaternion",toStateObject:e=>({x:e.x,y:e.y,z:e.z,w:e.w}),stateSchema:{x:il,y:il,z:il,w:il},fromStateObject:e=>new THREE.Quaternion(e.x,e.y,e.z,e.w),applyState:(e,t)=>{e.set(t.x,t.y,t.z,t.w)},stateObjectToCreateElementArguments:e=>[e.x,e.y,e.z,e.w]});uH.register("ThreeQuaternionIO",gG);const fG=new bt("nitroglycerin");class yG extends AA{constructor(e,t){const i=Vo()({mainColor:"gray",highlightColor:"white",shadowColor:"black",highlightDiameterRatio:.5,highlightXOffset:-.4,highlightYOffset:-.4},t);super(e/2,i),this.updateShadedSphereFill=()=>{const e=this.radius,t=e*i.highlightXOffset,n=e*i.highlightYOffset;this.fill=new gE(t,n,0,t,n,2*e).addColorStop(0,i.highlightColor).addColorStop(i.highlightDiameterRatio,i.mainColor).addColorStop(1,i.shadowColor)},this.updateShadedSphereFill()}invalidatePath(){super.invalidatePath(),this.updateShadedSphereFill&&this.updateShadedSphereFill()}}JI.register("ShadedSphereNode",yG);class EG{constructor(e,t,i,n,r,s){this.symbol=e,this.covalentRadius=t,this.vanDerWaalsRadius=i,this.electronegativity=n,this.atomicWeight=r,this.color=s}static getElementBySymbol(e){const t=EG.elementMap.get(e);return t}isSameElement(e){return e.symbol===this.symbol}isHydrogen(){return this.isSameElement(EG.H)}isCarbon(){return this.isSameElement(EG.C)}isOxygen(){return this.isSameElement(EG.O)}toString(){return this.symbol}}_defineProperty(EG,"Ar",new(ot=EG)("Ar",97,188,null,39.948,"#FFAFAF")),_defineProperty(EG,"B",new ot("B",85,192,2.04,10.811,"rgb(255,170,119)")),_defineProperty(EG,"Be",new ot("Be",105,153,1.57,9.012182,"rgb(194,255,95)")),_defineProperty(EG,"Br",new ot("Br",114,185,2.96,79.904,"rgb(190,30,20)")),_defineProperty(EG,"C",new ot("C",77,170,2.55,12.0107,"rgb(178,178,178)")),_defineProperty(EG,"Cl",new ot("Cl",100,175,3.16,35.4527,"rgb(136,242,21)")),_defineProperty(EG,"F",new ot("F",72,147,3.98,18.9984032,"rgb(245,255,36)")),_defineProperty(EG,"H",new ot("H",37,120,2.2,1.00794,"#ffffff")),_defineProperty(EG,"I",new ot("I",133,198,2.66,126.90447,"#940094")),_defineProperty(EG,"N",new ot("N",75,155,3.04,14.00674,"#0000ff")),_defineProperty(EG,"Ne",new ot("Ne",69,154,null,20.1797,"#1AFFFB")),_defineProperty(EG,"O",new ot("O",73,152,3.44,15.9994,VH.RED_COLORBLIND)),_defineProperty(EG,"P",new ot("P",110,180,2.19,30.973762,"rgb(255,154,0)")),_defineProperty(EG,"S",new ot("S",103,180,2.58,32.066,"rgb(212,181,59)")),_defineProperty(EG,"Si",new ot("Si",118,210,1.9,28.0855,"rgb(240,200,160)")),_defineProperty(EG,"Sn",new ot("Sn",145,217,1.96,118.71,"#668080")),_defineProperty(EG,"Xe",new ot("Xe",108,216,2.6,131.293,"#429eb0")),_defineProperty(EG,"elements",[ot.Ar,ot.B,ot.Be,ot.Br,ot.C,ot.Cl,ot.F,ot.H,ot.I,ot.N,ot.Ne,ot.O,ot.P,ot.S,ot.Si,ot.Sn,ot.Xe]),_defineProperty(EG,"elementMap",function(e){const t=new Map;return e.forEach(e=>t.set(e.symbol,e)),t}(ot.elements)),fG.register("Element",EG);const vG=EG.P.covalentRadius;class AG extends yG{constructor(e,t){const i=Vo()({mainColor:e.color},t);var n;super(2*(n=e.covalentRadius,.11*(vG-.75*(vG-n))),i)}}fG.register("AtomNode",AG);class bG extends cv{constructor(e,t){super(Vo()({children:[new cv({children:e,center:al.ZERO})]},t))}}fG.register("MoleculeNode",bG);class SG extends bG{constructor(e,t){const i=Vo()({direction:"leftToRight",overlapPercent:.25},t),n=[];let r=null;e.forEach(e=>{const t=new AG(e,i.atomNodeOptions);if(n.push(t),null!==r){const e=i.overlapPercent*t.width;"leftToRight"===i.direction?t.left=r.right-e:t.right=r.left+e}r=t}),super(n,i)}}fG.register("HorizontalMoleculeNode",SG);fG.register("C2H2Node",class extends SG{constructor(e){super([EG.H,EG.C,EG.C,EG.H],Vo()({overlapPercent:.35},e))}});fG.register("C2H4Node",class extends bG{constructor(e){const t=null==e?void 0:e.atomNodeOptions,i=new AG(EG.C,t),n=.165*i.width,r=new AG(EG.C,No({left:i.centerX+.25*i.width,centerY:i.centerY},t)),s=new AG(EG.H,No({centerX:i.left+n,centerY:i.top+n},t));super([new AG(EG.H,No({centerX:r.right-n,centerY:r.top+n},t)),s,i,r,new AG(EG.H,No({centerX:i.left+n,centerY:i.bottom-n},t)),new AG(EG.H,No({centerX:r.right-n,centerY:r.bottom-n},t))],e)}});fG.register("C2H5ClNode",class extends bG{constructor(e){const t=null==e?void 0:e.atomNodeOptions,i=new AG(EG.C,t),n=new AG(EG.C,No({centerX:i.right+.25*i.width,centerY:i.centerY},t)),r=new AG(EG.H,No({centerX:i.centerX,centerY:i.top},t)),s=new AG(EG.H,No({centerX:r.centerX,centerY:i.bottom},t)),a=new AG(EG.H,No({centerX:i.left,centerY:i.centerY},t)),o=new AG(EG.H,No({centerX:n.centerX,centerY:n.top},t));super([new AG(EG.H,No({centerX:n.centerX,centerY:n.bottom},t)),o,n,new AG(EG.Cl,No({left:n.centerX+.11*i.width,centerY:n.centerY},t)),a,i,s,r],e)}});fG.register("C2H5OHNode",class extends bG{constructor(e){const t=null==e?void 0:e.atomNodeOptions,i=new AG(EG.C,t),n=new AG(EG.C,No({centerX:i.right+.25*i.width,centerY:i.centerY},t)),r=new AG(EG.H,No({centerX:i.centerX,centerY:i.top},t)),s=new AG(EG.H,No({centerX:r.centerX,centerY:i.bottom},t)),a=new AG(EG.H,No({centerX:i.left,centerY:i.centerY},t)),o=new AG(EG.H,No({centerX:n.centerX,centerY:n.top},t)),l=new AG(EG.H,No({centerX:n.centerX,centerY:n.bottom},t)),h=new AG(EG.O,No({centerX:n.right,centerY:n.centerY},t));super([l,o,n,new AG(EG.H,No({centerX:h.right,centerY:h.centerY},t)),h,a,i,s,r],e)}});fG.register("C2H6Node",class extends bG{constructor(e){const t=null==e?void 0:e.atomNodeOptions,i=new AG(EG.C,t),n=new AG(EG.C,Po({centerX:i.right+.25*i.width,centerY:i.centerY},t)),r=new AG(EG.H,Po({centerX:i.centerX,centerY:i.top},t)),s=new AG(EG.H,Po({centerX:r.centerX,centerY:i.bottom},t)),a=new AG(EG.H,Po({centerX:i.left,centerY:i.centerY},t)),o=new AG(EG.H,Po({centerX:n.centerX,centerY:n.top},t));super([new AG(EG.H,Po({centerX:n.centerX,centerY:n.bottom},t)),o,n,new AG(EG.H,Po({centerX:n.right,centerY:n.centerY},t)),a,i,s,r],e)}});fG.register("CH2ONode",class extends bG{constructor(e){const t=null==e?void 0:e.atomNodeOptions,i=new AG(EG.C,t),n=.165*i.width,r=new AG(EG.O,Po({centerX:i.right+.25*i.width,centerY:i.centerY},t)),s=new AG(EG.H,Po({centerX:i.left+n,centerY:i.top+n},t));super([s,i,r,new AG(EG.H,Po({centerX:s.centerX,centerY:i.bottom-n},t))],e)}});fG.register("CH3OHNode",class extends bG{constructor(e){const t=null==e?void 0:e.atomNodeOptions,i=new AG(EG.C,t),n=new AG(EG.H,Po({centerX:i.centerX,centerY:i.top},t)),r=new AG(EG.H,Po({centerX:n.centerX,centerY:i.bottom},t)),s=new AG(EG.H,Po({centerX:i.left,centerY:i.centerY},t)),a=new AG(EG.O,Po({centerX:i.right+.25*i.width,centerY:i.centerY},t));super([r,n,i,s,new AG(EG.H,Po({centerX:a.right,centerY:a.centerY},t)),a],e)}});fG.register("CH4Node",class extends bG{constructor(e){const t=null==e?void 0:e.atomNodeOptions,i=new AG(EG.C,t),n=.165*i.width,r=new AG(EG.H,Po({centerX:i.left+n,centerY:i.top+n},t)),s=new AG(EG.H,Po({centerX:i.right-n,centerY:r.centerY},t)),a=new AG(EG.H,Po({centerX:r.centerX,centerY:i.bottom-n},t));super([s,a,i,r,new AG(EG.H,Po({centerX:s.centerX,centerY:a.centerY},t))],e)}});fG.register("CNode",class extends SG{constructor(e){super([EG.C],e)}});class _G extends SG{constructor(e){super([EG.O,EG.C,EG.O],e)}}fG.register("CO2Node",_G);class xG extends SG{constructor(e){super([EG.C,EG.O],e)}}fG.register("CONode",xG);fG.register("CS2Node",class extends SG{constructor(e){super([EG.S,EG.C,EG.S],e)}});fG.register("Cl2Node",class extends SG{constructor(e){super([EG.Cl,EG.Cl],e)}});fG.register("F2Node",class extends SG{constructor(e){super([EG.F,EG.F],e)}});fG.register("H2Node",class extends SG{constructor(e){super([EG.H,EG.H],e)}});class wG extends bG{constructor(e){const t=null==e?void 0:e.atomNodeOptions,i=new AG(EG.O,t),n=new AG(EG.H,Po({centerX:i.left,centerY:i.bottom-.25*i.height},t));super([i,n,new AG(EG.H,Po({centerX:i.right,centerY:n.centerY},t))],e)}}fG.register("H2ONode",wG);fG.register("H2SNode",class extends bG{constructor(e){const t=null==e?void 0:e.atomNodeOptions,i=new AG(EG.S,t),n=new AG(EG.H,Po({centerX:i.left,centerY:i.bottom-.25*i.height},t));super([i,n,new AG(EG.H,Po({centerX:i.right,centerY:n.centerY},t))],e)}});class TG extends SG{constructor(e){const t=Vo()({direction:"rightToLeft",overlapPercent:.5},e);super([EG.Cl,EG.H],t)}}fG.register("HClNode",TG);fG.register("HFNode",class extends SG{constructor(e){const t=Vo()({direction:"rightToLeft",overlapPercent:.5},e);super([EG.F,EG.H],t)}});fG.register("N2Node",class extends SG{constructor(e){super([EG.N,EG.N],e)}});fG.register("N2ONode",class extends SG{constructor(e){super([EG.N,EG.N,EG.O],e)}});fG.register("NH3Node",class extends bG{constructor(e){const t=null==e?void 0:e.atomNodeOptions,i=new AG(EG.N,t),n=new AG(EG.H,No({centerX:i.left,centerY:i.bottom-.25*i.height},t));super([n,new AG(EG.H,No({centerX:i.right,centerY:n.centerY},t)),i,new AG(EG.H,No({centerX:i.centerX,centerY:i.bottom},t))],e)}});fG.register("NO2Node",class extends bG{constructor(e){const t=null==e?void 0:e.atomNodeOptions,i=new AG(EG.N,t),n=new AG(EG.O,No({centerX:i.left,centerY:i.centerY+.25*i.height},t));super([n,i,new AG(EG.O,No({centerX:i.right,centerY:n.centerY},t))],e)}});fG.register("NONode",class extends SG{constructor(e){super([EG.N,EG.O],e)}});fG.register("O2Node",class extends SG{constructor(e){super([EG.O,EG.O],e)}});fG.register("OF2Node",class extends bG{constructor(e){const t=null==e?void 0:e.atomNodeOptions,i=new AG(EG.O,t);super([new AG(EG.F,No({centerX:i.left,centerY:i.centerY+.25*i.height},t)),i,new AG(EG.F,No({centerX:i.right,centerY:i.centerY+.25*i.height},t))],e)}});fG.register("P4Node",class extends bG{constructor(e){const t=null==e?void 0:e.atomNodeOptions,i=new AG(EG.P,t),n=new AG(EG.P,No({centerX:i.left+.3*i.width,centerY:i.bottom+.2*i.width},t)),r=new AG(EG.P,No({centerX:i.right,centerY:i.bottom},t));super([new AG(EG.P,No({centerX:i.left,centerY:i.centerY+.2*i.height},t)),r,n,i],e)}});fG.register("PCl3Node",class extends bG{constructor(e){const t=null==e?void 0:e.atomNodeOptions,i=new AG(EG.P,t),n=new AG(EG.Cl,No({centerX:i.left,centerY:i.bottom-.25*i.height},t));super([n,new AG(EG.Cl,No({centerX:i.right,centerY:n.centerY},t)),i,new AG(EG.Cl,No({centerX:i.centerX,centerY:i.bottom},t))],e)}});fG.register("PCl5Node",class extends bG{constructor(e){const t=null==e?void 0:e.atomNodeOptions,i=new AG(EG.P,t),n=new AG(EG.Cl,No({centerX:i.centerX,centerY:i.top},t)),r=new AG(EG.Cl,No({centerX:i.centerX,centerY:i.bottom},t));super([new AG(EG.Cl,No({centerX:i.right,centerY:i.centerY},t)),r,new AG(EG.Cl,No({centerX:i.left+.25*i.width,centerY:i.top+.25*i.height},t)),i,n,new AG(EG.Cl,No({centerX:i.left+.1*i.width,centerY:i.bottom-.1*i.height},t))],e)}});fG.register("PF3Node",class extends bG{constructor(e){const t=null==e?void 0:e.atomNodeOptions,i=new AG(EG.P,t),n=new AG(EG.F,No({centerX:i.left,centerY:i.bottom-.25*i.height},t));super([n,new AG(EG.F,No({centerX:i.right,centerY:n.centerY},t)),i,new AG(EG.F,No({centerX:i.centerX,centerY:i.bottom},t))],e)}});fG.register("PH3Node",class extends bG{constructor(e){const t=null==e?void 0:e.atomNodeOptions,i=new AG(EG.P,t),n=new AG(EG.H,No({centerX:i.left,centerY:i.bottom-.25*i.height},t));super([n,new AG(EG.H,No({centerX:i.right,centerY:n.centerY},t)),i,new AG(EG.H,No({centerX:i.centerX,centerY:i.bottom},t))],e)}});fG.register("SNode",class extends SG{constructor(e){super([EG.S],e)}});fG.register("SO2Node",class extends bG{constructor(e){const t=null==e?void 0:e.atomNodeOptions,i=new AG(EG.S,t);super([new AG(EG.O,No({centerX:i.left,centerY:i.centerY+.2*i.height},t)),i,new AG(EG.O,No({centerX:i.right,centerY:i.centerY+.2*i.height},t))],e)}});fG.register("SO3Node",class extends bG{constructor(e){const t=null==e?void 0:e.atomNodeOptions,i=new AG(EG.S,t),n=new AG(EG.O,No({centerX:i.left,centerY:i.centerY+.2*i.height},t)),r=new AG(EG.O,No({centerX:i.right,centerY:i.centerY+.2*i.height},t));super([new AG(EG.O,No({centerX:i.centerX+.08*i.width,centerY:i.left+.08*i.height},t)),n,i,r],e)}});let PG=1;class CG{constructor(e){this.element=e,this.symbol=e.symbol,this.covalentRadius=e.covalentRadius,this.covalentDiameter=2*e.covalentRadius,this.electronegativity=e.electronegativity,this.atomicWeight=e.atomicWeight,this.color=e.color,this.reference=(PG++).toString(16),this.id=`${this.symbol}_${this.reference}`}static createAtomFromSymbol(e){return new CG(EG.getElementBySymbol(e))}hasSameElement(e){return this.element.isSameElement(e.element)}isHydrogen(){return this.element.isHydrogen()}isCarbon(){return this.element.isCarbon()}isOxygen(){return this.element.isOxygen()}toString(){return this.symbol}}fG.register("Atom",CG);const VG={createSymbol:function(e){return VG.toSubscript(VG.createSymbolWithoutSubscripts(e))},createSymbolWithoutSubscripts:function(e){let t="",i=1;const n=e.length;for(let r=0;r<n;r++)0===r?t+=e[r].symbol:e[r]===e[r-1]?i++:(i>1&&(t+=i),i=1,t+=e[r].symbol);return i>1&&(t+=i),t},nonCarbonHillSortValue:function(e){let t=1e3*e.symbol.charCodeAt(0);return e.symbol.length>1&&(t+=e.symbol.charCodeAt(1)),t},carbonHillSortValue:function(e){return e.isCarbon()?0:e.isHydrogen()?1:VG.nonCarbonHillSortValue(e)},toSubscript:function(e){let t="",i=!1;const n=e=>e>="0"&&e<="9";for(let r=0;r<e.length;r++){const s=e.charAt(r);!i&&n(s)?(t+="<sub>",i=!0):i&&!n(s)&&(t+="</sub>",i=!1),t+=s}return i&&(t+="</sub>",i=!1),t},hillOrderedSymbol:function(e){const t=_.some(e,e=>e.isCarbon())?VG.carbonHillSortValue:VG.nonCarbonHillSortValue,i=_.sortBy(e,t);return VG.createSymbol(i)}};fG.register("ChemUtils",VG);function RG(e){const t=[];return e(e=>{t.push(e)}),t}wo.register("collect",RG);function NG(e,t,i){const n=[];return function e(t,r){return r.forEach((r,s)=>{n.push(s),1===t?i(...[r].concat(n)):e(t-1,r),n.pop()})}(e,t)}wo.register("dimensionForEach",NG);function MG(e,t,i){const n=[];return function e(t,r){return r.map((r,s)=>{n.push(s);const a=1===t?i(...[r].concat(n)):e(t-1,r);return n.pop(),a})}(e,t)}wo.register("dimensionMap",MG);class kG{constructor(e,t){this.eventModel=e,this.eventCallback=t,this.period=this.eventModel.getPeriodBeforeNextEvent(),this.timeBeforeNextEvent=this.period}step(e){for(;e>=this.timeBeforeNextEvent;)e-=this.timeBeforeNextEvent,this.period=this.eventModel.getPeriodBeforeNextEvent(),this.timeBeforeNextEvent=this.period,this.eventCallback(e);this.timeBeforeNextEvent-=e}getRatio(){return(this.period-this.timeBeforeNextEvent)/this.period}}function LG(e,t){const i=[],n=2*e.length-1;for(let r=0;r<n;r++)r%2==0?i.push(e[r/2]):i.push(t((r-1)/2));return i}_defineProperty(kG,"ConstantEventModel",class{constructor(e){this.rate=e}getPeriodBeforeNextEvent(){return 1/this.rate}}),_defineProperty(kG,"UniformEventModel",class{constructor(e,t){this.rate=e,this.pseudoRandomNumberSource=t}getPeriodBeforeNextEvent(){const e=this.pseudoRandomNumberSource();return 2*e/this.rate}}),_defineProperty(kG,"PoissonEventModel",class{constructor(e,t){this.rate=e,this.pseudoRandomNumberSource=t}getPeriodBeforeNextEvent(){const e=this.pseudoRandomNumberSource();return-Math.log(e)/this.rate}}),wo.register("EventTimer",kG),wo.register("interleave",LG);function IG(e){"string"==typeof e&&(e={src:e});const t=e.src,i=e.callback,n=void 0===e.async||e.async,r=void 0!==e.cacheBust&&e.cacheBust;let s=!1;const a=document.createElement("script");a.type="text/javascript",a.async=n,a.onload=a.onreadystatechange=function(){const e=this.readyState;e&&"complete"!==e&&"loaded"!==e||s||(s=!0,i&&i())},a.src=t+(r?"?random="+Math.random().toFixed(10):"");const o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(a,o)}wo.register("loadScript",IG);function BG(e){const t=[],i=e.length;if(i>1)for(let n=0;n<i-1;n++){const r=e[n];for(let s=n+1;s<i;s++)t.push([r,e[s]])}return t}wo.register("pairs",BG);function DG(e,t){const i=[],n=[],r=e.length;for(let s=0;s<r;s++)t(e[s])?i.push(e[s]):n.push(e[s]);return[i,n]}wo.register("partition",DG);class OG extends Km{constructor(e){const t=Vo()({position:al.ZERO,size:new My(200,50),baseColor:"#ff0000",captionText:"",captionColor:"white",invertY:!1},e);super(t),this.position=t.position,this.baseColor=t.baseColor,this.captionText=t.captionText,this.captionColor=t.captionColor,this.size=t.size;const i=this.size,n=i.width/2,r=.25*i.height/2;this.holeShape=Ip.ellipse(0,0,n,r,0);const s=.875*i.height,a=t.invertY?1:-1;this.containerShape=(new Ip).moveTo(.5*-i.width,0).lineTo(.4*-i.width,a*s*.8).cubicCurveTo(.3*-i.width,a*(.8*s+.25*i.height*.6),.3*i.width,a*(.8*s+.25*i.height*.6),.4*i.width,a*s*.8).lineTo(.5*i.width,0).ellipticalArc(0,0,n,r,0,-.01*Math.PI,-.99*Math.PI,!t.invertY).close()}}Xb.register("Bucket",OG);const qG=OG;class YG{constructor(e,t){this._numerator=e,this._denominator=t}set numerator(e){this._numerator=e}get numerator(){return this._numerator}set denominator(e){this._denominator=e}get denominator(){return this._denominator}getValue(){return this.numerator/this.denominator}get value(){return this.getValue()}isInteger(){return this.numerator%this.denominator==0}toString(){return`${this.numerator}/${this.denominator}`}copy(){return new YG(this.numerator,this.denominator)}reduce(){const e=fl.gcd(this.numerator,this.denominator);return this.numerator=0===e?0:fl.roundSymmetric(this.numerator/e),this.denominator=0===e?0:fl.roundSymmetric(this.denominator/e),this}reduced(){return this.copy().reduce()}isReduced(){return 1===fl.gcd(this.numerator,this.denominator)}equals(e){return this.numerator===e.numerator&&this.denominator===e.denominator}isLessThan(e){return-1===HG.set(this).subtract(e).sign}get sign(){return Math.sign(this.getValue())}abs(){return new YG(Math.abs(this.numerator),Math.abs(this.denominator))}set(e){return this.numerator=e.numerator,this.denominator=e.denominator,this}setToSum(e,t,i,n){const r=fl.lcm(t,n);return this.numerator=fl.roundSymmetric(e*r/t)+fl.roundSymmetric(i*r/n),this.denominator=r,this}add(e){return this.setToSum(this.numerator,this.denominator,e.numerator,e.denominator)}plus(e){return this.copy().add(e)}subtract(e){return this.setToSum(this.numerator,this.denominator,-e.numerator,e.denominator)}minus(e){return this.copy().subtract(e)}multiply(e){return this.numerator*=e.numerator,this.denominator*=e.denominator,this}times(e){return this.copy().multiply(e)}divide(e){return this.numerator*=e.denominator,this.denominator*=e.numerator,this}divided(e){return this.copy().divide(e)}plusInteger(e){return new YG(this.numerator+e*this.denominator,this.denominator)}minusInteger(e){return new YG(this.numerator-e*this.denominator,this.denominator)}timesInteger(e){return new YG(this.numerator*e,this.denominator)}dividedInteger(e){return new YG(this.numerator,this.denominator*e)}static fromInteger(e){return new YG(e,1)}static fromDecimal(e){if(Number.isInteger(e))return YG.fromInteger(e);{const t=e-fl.toFixedNumber(e,0),i=Math.pow(10,fl.numberOfDecimalPlaces(t)),n=fl.toFixedNumber(e*i,0);return new YG(n,i).reduce()}}toStateObject(){return{numerator:this._numerator,denominator:this._denominator}}static fromStateObject(e){return new YG(e.numerator,e.denominator)}}_defineProperty(YG,"ZERO",new(lt=YG)(0,1)),_defineProperty(YG,"ONE",new lt(1,1)),_defineProperty(YG,"FractionIO",new el("FractionIO",{valueType:lt,stateSchema:{numerator:il,denominator:il},toStateObject:e=>e.toStateObject(),fromStateObject:e=>lt.fromStateObject(e)}));const HG=new YG(1,1);Xb.register("Fraction",YG);const GG=xh(PE(el.ObjectIO));class FG extends qG{constructor(e){const t=Vo()({sphereRadius:10,usableWidthProportion:1,tandem:Lm.OPTIONAL,phetioType:FG.SphereBucketIO,verticalParticleOffset:null},e);super(t),_defineProperty(this,"_particles",[]),this.sphereBucketTandem=t.tandem,this._sphereRadius=t.sphereRadius,this._usableWidthProportion=t.usableWidthProportion,this._verticalParticleOffset=null===t.verticalParticleOffset?.4*-this._sphereRadius:t.verticalParticleOffset,this._particles=[]}addParticleFirstOpen(e,t){e.destinationProperty.set(this.getFirstOpenPosition()),this.addParticle(e,t)}addParticleNearestOpen(e,t){e.destinationProperty.set(this.getNearestOpenPosition(e.destinationProperty.get())),this.addParticle(e,t)}addParticle(e,t){t||e.positionProperty.set(e.destinationProperty.get()),this._particles.push(e);const i=t=>{t&&this.removeParticle(e)};e.userControlledProperty.lazyLink(i),e.bucketRemovalListener=i}removeParticle(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._particles=_.without(this._particles,e),e.bucketRemovalListener&&(e.userControlledProperty.unlink(e.bucketRemovalListener),delete e.bucketRemovalListener),t||this.relayoutBucketParticles()}containsParticle(e){return this._particles.includes(e)}extractClosestParticle(e){let t=null;this._particles.forEach(i=>{(null===t||t.positionProperty.get().distance(e)>i.positionProperty.get().distance(e))&&(t=i)});return null!==t&&t.userControlledProperty.set(!0),t}getParticleList(){return this._particles}reset(){this._particles.forEach(e=>{"function"==typeof e.bucketRemovalListener&&(e.userControlledProperty.unlink(e.bucketRemovalListener),delete e.bucketRemovalListener)}),Yp(this._particles)}isPositionOpen(e){let t=!0;for(let i=0;i<this._particles.length;i++){if(this._particles[i].destinationProperty.get().equals(e)){t=!1;break}}return t}getFirstOpenPosition(){let e=al.ZERO;const t=this.size.width*this._usableWidthProportion-2*this._sphereRadius;let i=(this.size.width-t)/2+this._sphereRadius,n=Math.floor(t/(2*this._sphereRadius)),r=0,s=0,a=!1;for(;!a;){const t=new al(this.position.x-this.size.width/2+i+2*s*this._sphereRadius,this.getYPositionForLayer(r));this.isPositionOpen(t)?(e=t,a=!0):(s++,s>=n&&(r++,s=0,n--,i+=this._sphereRadius,0===n&&(n=1,i-=this._sphereRadius)))}return e}getLayerForYPosition(e){return Math.abs(fl.roundSymmetric((e-(this.position.y+this._verticalParticleOffset))/(2*this._sphereRadius*.866)))}getNearestOpenPosition(e){let t=0;_.each(this._particles,e=>{const i=this.getLayerForYPosition(e.destinationProperty.get().y);i>t&&(t=i)});const i=[],n=this.size.width*this._usableWidthProportion-2*this._sphereRadius;let r=(this.size.width-n)/2+this._sphereRadius,s=Math.floor(n/(2*this._sphereRadius));for(let o=0;o<=t+1;o++){for(let e=0;e<s;e++){const t=new al(this.position.x-this.size.width/2+r+2*e*this._sphereRadius,this.getYPositionForLayer(o));this.isPositionOpen(t)&&(0!==o&&2!==this.countSupportingParticles(t)||i.push(t))}s--,r+=this._sphereRadius,0===s&&(s=1,r-=this._sphereRadius)}let a=i[0]||al.ZERO;return _.each(i,t=>{t.distance(e)<a.distance(e)&&(a=t)}),a}getYPositionForLayer(e){return this.position.y+this._verticalParticleOffset+e*this._sphereRadius*2*.866}isDangling(e){return!(e.destinationProperty.get().y===this.position.y+this._verticalParticleOffset)&&this.countSupportingParticles(e.destinationProperty.get())<2}countSupportingParticles(e){let t=0;for(let i=0;i<this._particles.length;i++){const n=this._particles[i];n.destinationProperty.get().y<e.y&&n.destinationProperty.get().distance(e)<3*this._sphereRadius&&t++}return t}relayoutBucketParticles(){let e;do{for(let t=0;t<this._particles.length;t++){e=!1;const i=this._particles[t];if(this.isDangling(i)){i.destinationProperty.set(this.getNearestOpenPosition(i.destinationProperty.get())),e=!0;break}}}while(e)}}_defineProperty(FG,"SphereBucketIO",new el("SphereBucketIO",{valueType:FG,documentation:"A model of a bucket into which spherical objects can be placed.",stateSchema:{particles:GG},toStateObject:e=>({particles:GG.toStateObject(e._particles)}),applyState:(e,t)=>{e.reset(),GG.fromStateObject(t.particles).forEach(t=>{e.addParticle(t)})}})),Xb.register("SphereBucket",FG);class zG extends cv{constructor(e,t){const i=Vo()({headFill:Hg.YELLOW,headStroke:null,eyeFill:"black",mouthStroke:"black",headLineWidth:1},t);super();const n=new DA(i.headFill);i.headStroke=i.headStroke||new Rb([n],e=>e.darkerColor()),this.addChild(new AA(e/2,{fill:i.headFill,stroke:i.headStroke,lineWidth:i.headLineWidth}));const r=.075*e;this.addChild(new AA(r,{fill:i.eyeFill,centerX:.2*-e,centerY:.1*-e})),this.addChild(new AA(r,{fill:i.eyeFill,centerX:.2*e,centerY:.1*-e}));const s=.05*e;this.smileMouth=new aA((new Ip).arc(0,.05*e,.25*e,.2*Math.PI,.8*Math.PI),{stroke:i.mouthStroke,lineWidth:s,lineCap:"round"}),this.addChild(this.smileMouth),this.frownMouth=new aA((new Ip).arc(0,.4*e,.2*e,.75*-Math.PI,.25*-Math.PI),{stroke:i.mouthStroke,lineWidth:s,lineCap:"round"}),this.addChild(this.frownMouth),this.smile(),this.mutate(i)}smile(){return this.smileMouth.visible=!0,this.frownMouth.visible=!1,this}frown(){return this.smileMouth.visible=!1,this.frownMouth.visible=!0,this}}JI.register("FaceNode",zG);class UG extends xA{constructor(e){super({}),this._leftMargin=0,this._rightMargin=0,this._topMargin=0,this._bottomMargin=0,this._extension=0,this._roundMargins=!0,this._fillProperty=new DA(this.fill),this._borderOverrideProperty=new DA(null),this._borderProperty=new Rb([this._fillProperty,this._borderOverrideProperty],(e,t)=>null===this._borderOverrideProperty.paint?e.withAlpha(0):t),this.roundedShape=(new Ip).moveTo(0,0).arc(0,0,1,0,Math.PI/2,!1).close().makeImmutable(),this.rectangularShape=Ip.rectangle(0,0,1,1).makeImmutable(),this.leftSide=new xA(0,0,1,1),this.rightSide=new xA(0,0,1,1),this.topSide=new xA(0,0,1,1),this.bottomSide=new xA(0,0,1,1),this.topLeftCorner=new aA(null),this.topRightCorner=new aA(null),this.bottomLeftCorner=new aA(null),this.bottomRightCorner=new aA(null),this.invalidateGradients(),this.invalidateRoundMargins(),this.invalidateMargin(),this.mutate(e)}invalidateRoundMargins(){this._roundMargins?(this.topLeftCorner.shape=this.roundedShape,this.topRightCorner.shape=this.roundedShape,this.bottomLeftCorner.shape=this.roundedShape,this.bottomRightCorner.shape=this.roundedShape):(this.topLeftCorner.shape=this.rectangularShape,this.topRightCorner.shape=this.rectangularShape,this.bottomLeftCorner.shape=this.rectangularShape,this.bottomRightCorner.shape=this.rectangularShape)}invalidateGradients(){const e=new mE(0,0,1,0).addColorStop(this._extension,this._fillProperty).addColorStop(1,this._borderProperty),t=new gE(0,0,0,0,0,1).addColorStop(this._extension,this._fillProperty).addColorStop(1,this._borderProperty);this.leftSide.fill=e,this.rightSide.fill=e,this.topSide.fill=e,this.bottomSide.fill=e,this.topLeftCorner.fill=t,this.topRightCorner.fill=t,this.bottomLeftCorner.fill=t,this.bottomRightCorner.fill=t}invalidateRectangle(){super.invalidateRectangle(),this.invalidateMargin()}invalidateMargin(){this.children=[...this._leftMargin>0&&this.rectHeight>0?[this.leftSide]:[],...this._rightMargin>0&&this.rectHeight>0?[this.rightSide]:[],...this._topMargin>0&&this.rectWidth>0?[this.topSide]:[],...this._bottomMargin>0&&this.rectWidth>0?[this.bottomSide]:[],...this._topMargin>0&&this._leftMargin>0?[this.topLeftCorner]:[],...this._topMargin>0&&this._rightMargin>0?[this.topRightCorner]:[],...this._bottomMargin>0&&this._leftMargin>0?[this.bottomLeftCorner]:[],...this._bottomMargin>0&&this._rightMargin>0?[this.bottomRightCorner]:[]];const e=this.rectWidth,t=this.rectHeight,i=this.rectX,n=this.rectY,r=this.rectX+e,s=this._rectY+t;this.leftSide.hasParent()&&(this.leftSide.matrix=(new Mh).rowMajor(-this._leftMargin,0,i,0,t,n,0,0,1)),this.rightSide.hasParent()&&(this.rightSide.matrix=(new Mh).rowMajor(this._rightMargin,0,r,0,t,n,0,0,1)),this.topSide.hasParent()&&(this.topSide.matrix=(new Mh).rowMajor(0,e,i,-this._topMargin,0,n,0,0,1)),this.bottomSide.hasParent()&&(this.bottomSide.matrix=(new Mh).rowMajor(0,e,i,this._bottomMargin,0,s,0,0,1)),this.topLeftCorner.hasParent()&&(this.topLeftCorner.matrix=(new Mh).rowMajor(-this._leftMargin,0,i,0,-this._topMargin,n,0,0,1)),this.topRightCorner.hasParent()&&(this.topRightCorner.matrix=(new Mh).rowMajor(this._rightMargin,0,r,0,-this._topMargin,n,0,0,1)),this.bottomLeftCorner.hasParent()&&(this.bottomLeftCorner.matrix=(new Mh).rowMajor(-this._leftMargin,0,i,0,this._bottomMargin,s,0,0,1)),this.bottomRightCorner.hasParent()&&(this.bottomRightCorner.matrix=(new Mh).rowMajor(this._rightMargin,0,r,0,this._bottomMargin,s,0,0,1))}dispose(){this._fillProperty.dispose(),this._borderOverrideProperty.dispose(),super.dispose()}setFill(e){return super.setFill(e),this._fillProperty.paint=e,this}setStroke(e){return super.setStroke(e),this}set leftMargin(e){this._leftMargin!==e&&(this._leftMargin=e,this.invalidateMargin())}get leftMargin(){return this._leftMargin}set rightMargin(e){this._rightMargin!==e&&(this._rightMargin=e,this.invalidateMargin())}get rightMargin(){return this._rightMargin}set topMargin(e){this._topMargin!==e&&(this._topMargin=e,this.invalidateMargin())}get topMargin(){return this._topMargin}set bottomMargin(e){this._bottomMargin!==e&&(this._bottomMargin=e,this.invalidateMargin())}get bottomMargin(){return this._bottomMargin}set xMargin(e){this._leftMargin===e&&this._rightMargin===e||(this._leftMargin=e,this._rightMargin=e,this.invalidateMargin())}get xMargin(){return this._leftMargin}set yMargin(e){this._topMargin===e&&this._bottomMargin===e||(this._topMargin=e,this._bottomMargin=e,this.invalidateMargin())}get yMargin(){return this._topMargin}set margin(e){this._leftMargin===e&&this._rightMargin===e&&this._topMargin===e&&this._bottomMargin===e||(this._leftMargin=e,this._rightMargin=e,this._topMargin=e,this._bottomMargin=e,this.invalidateMargin())}get margin(){return this._leftMargin}set roundMargins(e){this._roundMargins!==e&&(this._roundMargins=e,this.invalidateRoundMargins())}get roundMargins(){return this._roundMargins}set border(e){this._borderOverrideProperty.paint!==e&&(this._borderOverrideProperty.paint=e)}get border(){return this._borderOverrideProperty.paint}set extension(e){this._extension!==e&&(this._extension=e,this.invalidateGradients())}get extension(){return this._extension}mutate(e){return super.mutate(e)}}UG.prototype._mutatorKeys=["roundMargins","border","extension","margin","xMargin","yMargin","leftMargin","rightMargin","topMargin","bottomMargin",...xA.prototype._mutatorKeys],JI.register("GradientRectangle",UG);JI.register("GridNode",class extends aA{constructor(e,t,i,n,r){super(null,Vo()({stroke:"gray"},r)),e.link(e=>{const r=new Ip,s=-n*t+i.x,a=n*t+i.x,o=-n*t+i.y,l=n*t+i.y;for(let h=-n;h<=n;h++){const e=h*t+i.x,n=h*t+i.y;r.moveTo(s,n).lineTo(a,n),r.moveTo(e,o).lineTo(e,l)}this.shape=e.modelToViewShape(r)})}});class WG extends qb{constructor(e){const t=Vo()({alertToVoicing:!0,descriptionAlertNode:null},e);super(t),this.alertToVoicing=t.alertToVoicing,this.descriptionAlertNode=t.descriptionAlertNode}alert(e){this.enabled&&(this.alertToVoicing&&DS.alertUtterance(e),this.alertDescriptionUtterance(e))}alertDescriptionUtterance(e){this.enabled&&this.descriptionAlertNode&&this.descriptionAlertNode.alertDescriptionUtterance(e)}forEachUtteranceQueue(e){this.enabled&&this.descriptionAlertNode&&this.descriptionAlertNode.forEachUtteranceQueue(e)}}JI.register("Alerter",WG);const XG=WG,jG=Oo.byKeys(["LEFT","RIGHT","UP","DOWN","UP_LEFT","UP_RIGHT","DOWN_LEFT","DOWN_RIGHT"],{beforeFreeze:e=>{e.isRelativeDirection=function(t){return t===e.LEFT||t===e.RIGHT||t===e.UP||t===e.DOWN},e.directionToRelativeDirections=function(t){return t===e.UP_LEFT?[e.UP,e.LEFT]:t===e.UP_RIGHT?[e.UP,e.RIGHT]:t===e.DOWN_LEFT?[e.DOWN,e.LEFT]:t===e.DOWN_RIGHT?[e.DOWN,e.RIGHT]:[e[t]]},e.isHorizontalDirection=function(t){return t===e.LEFT||t===e.RIGHT},e.keyToDirection=function(t){return t===Of.KEY_UP_ARROW||t===Of.KEY_W?e.UP:t===Of.KEY_LEFT_ARROW||t===Of.KEY_A?e.LEFT:t===Of.KEY_DOWN_ARROW||t===Of.KEY_S?e.DOWN:t===Of.KEY_RIGHT_ARROW||t===Of.KEY_D?e.RIGHT:null}}});JI.register("DirectionEnum",jG);const QG=jG,KG=nO.a11y.movementAlerter.leftBorderAlert,ZG=nO.a11y.movementAlerter.rightBorderAlert,JG=nO.a11y.movementAlerter.topBorderAlert,$G=nO.a11y.movementAlerter.bottomBorderAlert,eF=JG;class tF{constructor(e){e=Po({boundsProperty:new ty(new Zl(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY)),leftAlert:KG,rightAlert:ZG,topAlert:eF,bottomAlert:$G,utteranceOptions:{}},e),this[QG.LEFT]=null,this[QG.RIGHT]=null,this[QG.UP]=null,this[QG.DOWN]=null,this.setDirectionUtterance(e.leftAlert,QG.LEFT,e.utteranceOptions),this.setDirectionUtterance(e.rightAlert,QG.RIGHT,e.utteranceOptions),this.setDirectionUtterance(e.topAlert,QG.UP,e.utteranceOptions),this.setDirectionUtterance(e.bottomAlert,QG.DOWN,e.utteranceOptions),this.boundsProperty=e.boundsProperty}setDirectionUtterance(e,t,i){null!==e&&(this[t]=e instanceof lS?e:new lS(Po({alert:new iS({objectResponse:e})},i)))}getAlertAtBorder(e,t){let i;const n=[];if(e.x===this.boundsProperty.value.left&&n.push(QG.LEFT),e.x===this.boundsProperty.value.right&&n.push(QG.RIGHT),e.y===this.boundsProperty.value.top&&n.push(QG.UP),e.y===this.boundsProperty.value.bottom&&n.push(QG.DOWN),n.length>1){t=t||"";const e=QG.keyToDirection(t);e&&n.indexOf(e)>=0&&(i=e)}else 1===n.length&&(i=n[0]);if(i){const e=this[i];if(e)return e}return null}getAlertOnEndDrag(e,t){let i;return t&&(i=Of.getEventCode(t)),this.getAlertAtBorder(e,i)}reset(){this[QG.LEFT]&&this[QG.LEFT].reset(),this[QG.RIGHT]&&this[QG.RIGHT].reset(),this[QG.UP]&&this[QG.UP].reset(),this[QG.DOWN]&&this[QG.DOWN].reset()}static getDefaultTopAlert(){return eF}}JI.register("BorderAlertsDescriber",tF);const iF=tF,nF=nO.a11y.movementAlerter.down,rF=nO.a11y.movementAlerter.left,sF=nO.a11y.movementAlerter.right,aF=nO.a11y.movementAlerter.up,oF=nO.a11y.movementAlerter.upAndToTheLeft,lF=nO.a11y.movementAlerter.upAndToTheRight,hF=nO.a11y.movementAlerter.downAndToTheLeft,uF=nO.a11y.movementAlerter.downAndToTheRight,cF=15*Math.PI/180,dF={UP:new Hl(-3*Math.PI/4+cF,-Math.PI/4-cF),DOWN:new Hl(Math.PI/4+cF,3*Math.PI/4-cF),RIGHT:new Hl(-Math.PI/4+cF,Math.PI/4-cF),LEFT:new Hl(3*Math.PI/4+cF,Math.PI),UP_LEFT:new Hl(-3*Math.PI-cF,-3*Math.PI/4+cF),DOWN_LEFT:new Hl(3*Math.PI/4-cF,3*Math.PI/4+cF),UP_RIGHT:new Hl(-Math.PI/4-cF,-Math.PI/4+cF),DOWN_RIGHT:new Hl(Math.PI/4-cF,Math.PI/4+cF)},pF=Object.keys(dF);const mF={LEFT:rF,RIGHT:sF,UP:aF,DOWN:nF,UP_LEFT:oF,UP_RIGHT:lF,DOWN_LEFT:hF,DOWN_RIGHT:uF};class gF extends XG{constructor(e,t){super(t=Po({borderAlertsOptions:null,movementAlerts:mF,modelViewTransform:Vx.createIdentity(),alertDiagonal:!1},t)),this.movementAlertKeys=Object.keys(t.movementAlerts),this.movementAlerts=t.movementAlerts,this.alertDiagonal=t.alertDiagonal,this.modelViewTransform=t.modelViewTransform,this.borderAlertsDescriber=new iF(t.borderAlertsOptions),this.directionChangeUtterance=new lS({alert:new iS}),this.initialFirstPosition=e.get(),this.positionProperty=e,this.lastAlertedPosition=this.initialFirstPosition}alert(e){super.alert(e),this.lastAlertedPosition=this.positionProperty.get()}alertDirections(e){QG.includes(e)&&(e=[e]),e.forEach(e=>{this.directionChangeUtterance.alert.objectResponse=this.movementAlerts[e],this.alert(this.directionChangeUtterance)})}alertDirectionalMovement(){const e=this.positionProperty.get();if(!e.equals(this.lastAlertedPosition)){const t=this.getDirections(e,this.lastAlertedPosition);0,this.alertDirections(t)}}getDirections(e,t){const i=gF.getDirectionEnumerable(e,t,this.modelViewTransform);return this.alertDiagonal?[i]:QG.directionToRelativeDirections(i)}static getDirectionEnumerable(e,t,i){let n;const r=i.modelToViewPosition(e),s=i.modelToViewPosition(t),a=r.x-s.x,o=r.y-s.y,l=Math.atan2(o,a);dF.LEFT.contains(Math.abs(l))&&(n=QG.LEFT);for(let h=0;h<pF.length;h++){if(dF[pF[h]].contains(l)){n=QG[pF[h]];break}}return n}static getDirectionDescriptionFromAngle(e,t){t=Po({modelViewTransform:Vx.createIdentity()},t);const i=new al(0,0),n=fl.toFixedNumber(Math.cos(e),8),r=fl.toFixedNumber(Math.sin(e),8),s=new al(n,r),a=gF.getDirectionEnumerable(s,i,t.modelViewTransform);return mF[a]}endDrag(e){this.alertDirectionalMovement();const t=this.borderAlertsDescriber.getAlertOnEndDrag(this.positionProperty.get(),e);t&&this.alert(t)}reset(){this.lastAlertedPosition=this.initialFirstPosition,this.movementAlertKeys.forEach(e=>{const t=this.movementAlerts[e];t&&t.reset&&t.reset()}),this.borderAlertsDescriber.reset()}static getDefaultMovementDescriptions(){return Po({},mF)}}JI.register("MovementAlerter",gF);class fF extends eY{constructor(e,t,i){const n=Vo()({cursor:"pointer",baseColor:"white",stroke:"black",lineWidth:1,cornerRadius:4,xMargin:7,yMargin:5,touchAreaXDilation:7,touchAreaYDilation:7,arrowHeight:20,arrowWidth:20*Math.sqrt(3)/2,arrowFill:"black",arrowStroke:null,arrowLineWidth:1,numberOfArrows:1,arrowSpacing:-10,fireOnHold:!0,fireOnHoldDelay:400,fireOnHoldInterval:100,startCallback:_.noop,endCallback:_.noop},i);n.listener=t;const r=new Ip;for(let s=0;s<n.numberOfArrows;s++){const t=s*(n.arrowHeight+n.arrowSpacing);if("up"===e)r.moveTo(n.arrowHeight/2,t).lineTo(n.arrowHeight,n.arrowWidth+t).lineTo(0,n.arrowWidth+t).close();else if("down"===e)r.moveTo(0,t).lineTo(n.arrowHeight,t).lineTo(n.arrowHeight/2,n.arrowWidth+t).close();else if("left"===e)r.moveTo(t,n.arrowHeight/2).lineTo(n.arrowWidth+t,0).lineTo(n.arrowWidth+t,n.arrowHeight).close();else{if("right"!==e)throw new Error("unsupported direction: "+e);r.moveTo(t,0).lineTo(n.arrowWidth+t,n.arrowHeight/2).lineTo(t,n.arrowHeight).close()}}n.content=new aA(r,{fill:n.arrowFill,stroke:n.arrowStroke,lineWidth:n.arrowLineWidth,pickable:!1}),super(n)}}fD.register("ArrowButton",fF);const yF={},EF=(e,t,i)=>{let n=yF,r=yF;return e.hasOwnProperty(t)&&(n=e[t]),e.hasOwnProperty(i)&&(r=e[i]),n!==yF?e[i]=n:delete e[i],r!==yF?e[t]=r:delete e[t],e};wo.register("swapObjectKeys",EF);const vF=EF,AF="data:audio/mpeg;base64,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qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr/+xDE1gPAAAGkAAAAIAAANIAAAASqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqv/7EMTWA8AAAaQAAAAgAAA0gAAABKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//sQxNYDwAABpAAAACAAADSAAAAEqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr/+xDE1gPAAAGkAAAAIAAANIAAAASqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqg==",bF=aO(cO,AF),SF=JD.createLock(AF),_F=new hO;let xF=!1;const wF=()=>{xF||(SF(),xF=!0)},TF=cO.decodeAudioData(bF.buffer,e=>{null===_F.audioBufferProperty.value&&(_F.audioBufferProperty.set(e),wF())},e=>{console.warn("decode of audio data failed, using stubbed sound, error: "+e),_F.audioBufferProperty.set(cO.createBuffer(1,1,cO.sampleRate)),wF()});TF&&TF.then(e=>{null===_F.audioBufferProperty.value&&(_F.audioBufferProperty.set(e),wF())}).catch(e=>{console.warn("promise rejection caught for audio decode, error = "+e),wF()});const PF=_F,CF="data:audio/mpeg;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAAEAAAE/QCbm5ubm5ubm5ubm5ubm5ubm5ubm5ubm5vBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHB4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4P////////////////////////////////8AAAAUTEFNRTMuMTAwBJgAAAAAAAAAABUgJAXmQQABpAAABP2CPnqIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//ugxAAAAZABXJQAACjSBy/7MvJBlbA24AeHxx+Z+DJ48Acl/O7e/c+wAAAAAAAEggodS1KhDIMHY9Flj8OAaLhIDnqje9htgSxoj0q3Fksjnr007hUgBFiJkAAAAJRul9HpGarkErUNUSqvEO5RRnr0CYblhVBIAACITTDJN3xrY6pMQU1FMy4xMDCqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqpcJoKAAAAAArSgBAzM3OFUFV0GH4AAagOAQ5P8ZoVVMQU1FMy4xMDBVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//sgxNoAw8QpV9zxgCg6A+w4kAkEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7EMTlgMI4H1/EgQggMYHqUBQYBVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//sQxNYDwAAB/gAAACAAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU=",VF=aO(cO,CF),RF=JD.createLock(CF),NF=new hO;let MF=!1;const kF=()=>{MF||(RF(),MF=!0)},LF=cO.decodeAudioData(VF.buffer,e=>{null===NF.audioBufferProperty.value&&(NF.audioBufferProperty.set(e),kF())},e=>{console.warn("decode of audio data failed, using stubbed sound, error: "+e),NF.audioBufferProperty.set(cO.createBuffer(1,1,cO.sampleRate)),kF()});LF&&LF.then(e=>{null===NF.audioBufferProperty.value&&(NF.audioBufferProperty.set(e),kF())}).catch(e=>{console.warn("promise rejection caught for audio decode, error = "+e),kF()});const IF=NF,BF=new gq(PF,{soundClipOptions:{initialOutputLevel:.2},soundManagerOptions:{categoryName:"user-interface"}});oO.register("generalBoundaryBoopSoundPlayer",BF);const DF=BF,OF=new gq(IF,{soundClipOptions:{initialOutputLevel:.2},soundManagerOptions:{categoryName:"user-interface"}});oO.register("generalSoftClickSoundPlayer",OF);const qF=OF,YF=new gq(PF,{soundClipOptions:{initialOutputLevel:.2,initialPlaybackRate:1/Math.pow(2,1/6)},soundManagerOptions:{categoryName:"user-interface"}}),HF=new gq(IF,{soundClipOptions:{initialOutputLevel:.2,initialPlaybackRate:1/Math.pow(2,1/6)},soundManagerOptions:{categoryName:"user-interface"}}),GF=e=>fl.roundToInterval(e,1e-9),FF=()=>1,zF=()=>{};class UF{constructor(e,t){const i=Vo()({middleMovingUpSoundPlayer:qF,middleMovingDownSoundPlayer:HF,middleMovingUpPlaybackRateMapper:FF,middleMovingDownPlaybackRateMapper:FF,numberOfMiddleThresholds:null,interThresholdDelta:null,constrainValue:GF,minSoundPlayer:YF,maxSoundPlayer:DF,minimumInterMiddleSoundTime:.035},t);null===i.numberOfMiddleThresholds&&null===i.interThresholdDelta&&(i.numberOfMiddleThresholds=5),null!==i.numberOfMiddleThresholds?this.interThresholdDistance=e.getLength()/(i.numberOfMiddleThresholds+1):null!==i.interThresholdDelta?this.interThresholdDistance=i.interThresholdDelta:this.interThresholdDistance=e.getLength()/2,this.valueRange=e,this.middleMovingUpSoundPlayer=i.middleMovingUpSoundPlayer,this.middleMovingDownSoundPlayer=i.middleMovingDownSoundPlayer,this.middleMovingUpPlaybackRateMapper=i.middleMovingUpPlaybackRateMapper,this.middleMovingDownPlaybackRateMapper=i.middleMovingDownPlaybackRateMapper,this.minSoundPlayer=i.minSoundPlayer,this.maxSoundPlayer=i.maxSoundPlayer,this.minimumInterMiddleSoundTime=i.minimumInterMiddleSoundTime,this.timeOfMostRecentMiddleSound=0,this.constrainValue=i.constrainValue}playSoundIfThresholdReached(e,t){if(e!==t){const i=this.constrainValue(e),n=this.constrainValue(t),r=this.getSurroundingThresholds(n),s=this.getSurroundingThresholds(i),a=1===r.length&&1===s.length&&Math.abs(r[0]-s[0])>this.interThresholdDistance||1===r.length&&2===s.length&&r[0]!==s[0]&&r[0]!==s[1]||2===r.length&&1===s.length&&s[0]!==r[0]&&s[0]!==r[1]||2===r.length&&2===s.length&&s[0]!==r[0],o=1===s.length&&(2===r.length||r[0]!==s[0]);(a||o||i===this.valueRange.min||i===this.valueRange.max)&&this.playSoundForValueChange(e,t)}}playSoundForValueChange(e,t){const i=this.constrainValue(e),n=this.constrainValue(t);if(i!==n||t!==e&&(e===this.valueRange.min||e===this.valueRange.max))if(e===this.valueRange.min&&this.minSoundPlayer!==UF.USE_MIDDLE_SOUND)this.minSoundPlayer.play();else if(e===this.valueRange.max&&this.maxSoundPlayer!==UF.USE_MIDDLE_SOUND)this.maxSoundPlayer.play();else{const t=cO.currentTime;if(t-this.timeOfMostRecentMiddleSound>this.minimumInterMiddleSoundTime){let r,s;i>n?(r=this.middleMovingUpPlaybackRateMapper,s=this.middleMovingUpSoundPlayer):(r=this.middleMovingUpPlaybackRateMapper,s=this.middleMovingDownSoundPlayer),r!==FF&&s.setPlaybackRate(r(e)),s.play(),this.timeOfMostRecentMiddleSound=t}}}getSurroundingThresholds(e){const t=Math.floor(fl.roundToInterval((e-this.valueRange.min)/this.interThresholdDistance,1e-7)),i=fl.roundToInterval(t*this.interThresholdDistance+this.valueRange.min,1e-7),n=[i];if(i!==e){const e=Math.min(fl.roundToInterval(i+this.interThresholdDistance,1e-7),this.valueRange.max);e>i&&n.push(e)}return n}}_defineProperty(UF,"NO_SOUND",new UF(new Hl(0,1),{middleMovingUpSoundPlayer:KH,minSoundPlayer:KH,maxSoundPlayer:KH})),_defineProperty(UF,"USE_MIDDLE_SOUND",{play:zF,stop:zF}),oO.register("ValueChangeSoundPlayer",UF);const WF=UF,XF=e=>""+e,jF={withNameResponse:!1,withObjectResponse:!0,onlyOnValueChange:!0},QF=(e,t)=>class extends(DS(e)){constructor(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];const r=i[t],s=r.enabledRangeProperty;const a={startInput:_.noop,endInput:_.noop,onInput:_.noop,constrainValue:_.identity,keyboardStep:(s.get().max-s.get().min)/20,shiftKeyboardStep:(s.get().max-s.get().min)/100,pageKeyboardStep:(s.get().max-s.get().min)/10,ariaOrientation:Ql.HORIZONTAL,panTargetNode:null,roundToStepSize:!1,a11yMapPDOMValue:_.identity,a11yMapValue:_.identity,a11yRepeatEqualValueText:!0,a11yCreateAriaValueText:XF,a11yCreateContextResponseAlert:null,contextResponsePerValueChangeDelay:700,contextResponseMaxDelay:1500,a11yDependencies:[],voicingOnEndResponseOptions:jF,tagName:"input",inputType:null},o=Vo()(a,r);o.inputType="range",i[t]=o,super(...i),Fv(this,["inputValue","setPDOMAttribute"]),this._valueProperty=o.valueProperty,this._enabledRangeProperty=s,this._startInput=o.startInput,this._onInput=o.onInput,this._endInput=o.endInput,this._constrainValue=o.constrainValue,this._a11yMapValue=o.a11yMapValue,this._panTargetNode=o.panTargetNode,this._keyboardStep=a.keyboardStep,this.setKeyboardStep(o.keyboardStep),this._shiftKeyboardStep=a.shiftKeyboardStep,this.setShiftKeyboardStep(o.shiftKeyboardStep),this._pageKeyboardStep=a.pageKeyboardStep,this.setPageKeyboardStep(o.pageKeyboardStep),this._shiftKey=!1,this._ariaOrientation=a.ariaOrientation,this.ariaOrientation=o.ariaOrientation,this._oldValue=null,this._valueOnStart=this._valueProperty.value,this._a11yCreateContextResponseAlert=o.a11yCreateContextResponseAlert,this._timesValueTextChangedBeforeAlerting=0,this._contextResponseUtterance=new lS,this._contextResponsePerValueChangeDelay=o.contextResponsePerValueChangeDelay,this._contextResponseMaxDelay=o.contextResponseMaxDelay,this._a11yInputHandled=!1,this._blockInput=!1,this._rangeKeysDown={},this._roundToStepSize=o.roundToStepSize,this._a11yMapPDOMValue=o.a11yMapPDOMValue,this._a11yCreateAriaValueText=o.a11yCreateAriaValueText,this._dependenciesMultilink=null,this._a11yRepeatEqualValueText=o.a11yRepeatEqualValueText,this._timesChangedBeforeAlerting=0,this._voicingOnEndResponseOptions=o.voicingOnEndResponseOptions,this.setA11yDependencies(o.a11yDependencies);const l=e=>{const t=this._getMappedValue(e.min),i=this._getMappedValue(e.max);this.setPDOMAttribute("min",t),this.setPDOMAttribute("max",i),this._updateSiblingStepAttribute()};this._enabledRangeProperty.link(l);const h=()=>{const e=this._getMappedValue();this.setPDOMAttribute("aria-valuenow",e),this.inputValue=e};this._valueProperty.link(h),this._disposeAccessibleValueHandler=()=>{this._enabledRangeProperty.unlink(l),this._valueProperty.unlink(h),this._dependenciesMultilink&&this._dependenciesMultilink.dispose(),this._panTargetNode=null}}setA11yDependencies(e){this._dependenciesMultilink&&this._dependenciesMultilink.dispose(),this._dependenciesMultilink=pS.multilinkAny(e.concat([this._valueProperty]),()=>{this._updateAriaValueText(this._oldValue),this._oldValue=this._valueProperty.value})}_updateAriaValueText(e){const t=this._getMappedValue(),i=this._a11yCreateAriaValueText(t,this._valueProperty.value,e);let n=nE.unwrapStringProperty(i);this._a11yRepeatEqualValueText&&this.ariaValueText&&n===this.ariaValueText.replace(new RegExp(" ","g"),"")&&(n=this.ariaValueText+" "),this.ariaValueText=n}alertContextResponse(){let e=!1;if(this._a11yCreateContextResponseAlert){const t=this._getMappedValue(),i=this._a11yCreateContextResponseAlert(t,this._valueProperty.value,this._valueOnStart);i&&(this._contextResponseUtterance.alert=i,this.forEachUtteranceQueue(t=>{e||(t.hasUtterance(this._contextResponseUtterance)?(e=!0,this._timesChangedBeforeAlerting++):this._timesChangedBeforeAlerting=1),this._contextResponseUtterance.alertStableDelay=Math.min(this._contextResponseMaxDelay,this._timesChangedBeforeAlerting*this._contextResponsePerValueChangeDelay),t.addToBack(this._contextResponseUtterance)}))}}reset(){this._a11yCreateAriaValueText.reset&&this._a11yCreateAriaValueText.reset(),this._a11yCreateContextResponseAlert&&this._a11yCreateContextResponseAlert.reset&&this._a11yCreateContextResponseAlert.reset(),this._timesChangedBeforeAlerting=0,this._updateAriaValueText(null)}_getMappedValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._valueProperty.value;return this._a11yMapPDOMValue(e)}getAccessibleValueHandlerInputListener(){return{keydown:this.handleKeyDown.bind(this),keyup:this.handleKeyUp.bind(this),input:this.handleInput.bind(this),change:this.handleChange.bind(this),blur:this.handleBlur.bind(this)}}handleKeyDown(e){const t=e.domEvent,i=Of.getEventCode(t);if(i&&(this._shiftKey=t.shiftKey,Of.isKeyEvent(t,Of.KEY_TAB)&&(this._blockInput=!0),this.enabledProperty.get()&&Of.isRangeKey(t)&&(t.preventDefault(),!t.metaKey))){e.pointer.reserveForKeyboardDrag();let n=!0;this._anyKeysDown()||this._onInteractionStart(e),this._rangeKeysDown[i]=!0;let r=this._valueProperty.get();if(Of.isAnyKeyEvent(t,[Of.KEY_END,Of.KEY_HOME]))i===Of.KEY_END?r=this._enabledRangeProperty.get().max:i===Of.KEY_HOME&&(r=this._enabledRangeProperty.get().min);else{let e;i===Of.KEY_PAGE_UP||i===Of.KEY_PAGE_DOWN?(e=this.pageKeyboardStep,i===Of.KEY_PAGE_UP?r=this._valueProperty.get()+e:i===Of.KEY_PAGE_DOWN&&(r=this._valueProperty.get()-e)):Of.isArrowKey(t)&&(e=t.shiftKey?this.shiftKeyboardStep:this.keyboardStep,n=!t.shiftKey,i===Of.KEY_RIGHT_ARROW||i===Of.KEY_UP_ARROW?r=this._valueProperty.get()+e:i!==Of.KEY_LEFT_ARROW&&i!==Of.KEY_DOWN_ARROW||(r=this._valueProperty.get()-e),this._roundToStepSize&&(r=KF(r,this._valueProperty.get(),e)))}const s=this._a11yMapValue(r,this._valueProperty.get());let a=s;n&&(a=this._constrainValue(s)),this._valueProperty.set(fl.clamp(a,this._enabledRangeProperty.get().min,this._enabledRangeProperty.get().max)),this._onInput(e);const o=this._panTargetNode||this;zx.initialized&&zx.listener.panToNode(o,!0,o.limitPanDirection)}}handleKeyUp(e){const t=Of.getEventCode(e.domEvent);this._allKeysUp()||(Of.SHIFT_KEYS.includes(t)&&(this._shiftKey=!1),this.enabledProperty.get()&&Of.isRangeKey(e.domEvent)&&(this._rangeKeysDown[t]=!1,this._allKeysUp()&&this._onInteractionEnd(e)))}handleChange(e){this._a11yInputHandled||this.handleInput(e),this._a11yInputHandled=!1}handleInput(e){if(this.enabledProperty.get()&&!this._blockInput){this._a11yInputHandled=!0;let t=this._valueProperty.get();const i=parseFloat(e.domEvent.target.value),n=this._shiftKey?this.shiftKeyboardStep:this.keyboardStep,r=this._getMappedValue();this._onInteractionStart(e),i>r?t=this._valueProperty.get()+n:i<r&&(t=this._valueProperty.get()-n),this._roundToStepSize&&(t=KF(t,this._valueProperty.get(),n)),t=fl.clamp(t,this._enabledRangeProperty.get().min,this._enabledRangeProperty.get().max),this._valueProperty.set(this._constrainValue(this._a11yMapValue(t,this._valueProperty.get()))),this._onInput(e),this._onInteractionEnd(e)}this._blockInput=!1}handleBlur(e){this._anyKeysDown()&&this._onInteractionEnd(e),this._shiftKey=!1,this._blockInput=!1,this._rangeKeysDown={}}_onInteractionStart(e){this._valueOnStart=this._valueProperty.value,this._startInput(e)}_onInteractionEnd(e){this.alertContextResponse(),this.voicingOnEndResponse(this._valueOnStart),this._endInput(e)}setKeyboardStep(e){this._keyboardStep=e}set keyboardStep(e){this.setKeyboardStep(e)}get keyboardStep(){return this.getKeyboardStep()}getKeyboardStep(){return this._keyboardStep}setShiftKeyboardStep(e){this._shiftKeyboardStep=e}set shiftKeyboardStep(e){this.setShiftKeyboardStep(e)}get shiftKeyboardStep(){return this.getShiftKeyboardStep()}getShiftKeyboardStep(){return this._shiftKeyboardStep}getShiftKeyDown(){return this._shiftKey}get shiftKeyDown(){return this.getShiftKeyDown()}setPageKeyboardStep(e){this._pageKeyboardStep=e}set pageKeyboardStep(e){this.setPageKeyboardStep(e)}get pageKeyboardStep(){return this.getPageKeyboardStep()}getPageKeyboardStep(){return this._pageKeyboardStep}setAriaOrientation(e){this._ariaOrientation=e,this.setPDOMAttribute("aria-orientation",e.ariaOrientation)}set ariaOrientation(e){this.setAriaOrientation(e)}get ariaOrientation(){return this._ariaOrientation}getAriaOrientation(){return this._ariaOrientation}_allKeysUp(){return _.every(this._rangeKeysDown,e=>!e)}_anyKeysDown(){return!!_.find(this._rangeKeysDown,e=>e)}_updateSiblingStepAttribute(){const e=Math.min(this.keyboardStep,this.shiftKeyboardStep,this.pageKeyboardStep);let t=Math.pow(10,-fl.numberOfDecimalPlaces(e));const i=this._getMappedValue(this._enabledRangeProperty.get().min),n=this._getMappedValue(this._enabledRangeProperty.get().max);t/(n-i)<1e-5&&(t=n/100),this.setPDOMAttribute("step",t)}voicingOnEndResponse(e,t){const i=No({},this._voicingOnEndResponseOptions,t),n=e!==this._valueProperty.value,r=this._valueProperty.value===this._enabledRangeProperty.value.min||this._valueProperty.value===this._enabledRangeProperty.value.max,s=!(!i.withNameResponse||!this.voicingNameResponse)||!(!i.withObjectResponse||!this.voicingObjectResponse);(!i.onlyOnValueChange||r||n)&&s&&this.voicingSpeakFullResponse({nameResponse:i.withNameResponse?this.voicingNameResponse:null,objectResponse:i.withObjectResponse?this.voicingObjectResponse:null,hintResponse:null})}dispose(){this._disposeAccessibleValueHandler(),super.dispose()}};fD.register("AccessibleValueHandler",QF);const KF=function(e,t,i){let n=e;return 0!==i&&(n=fl.roundSymmetric(n/i)*i,n=ZF(n,t,i)),n},ZF=function(e,t,i){let n=e;const r=Math.abs(e-t),s=r>i,a=fl.equalsEpsilon(r,i,1e-14);return s&&!a&&(n+=e>t?-i:i),n};QF.DEFAULT_TAG_NAME="input";const JF=QF,$F=(e,t)=>class extends(JF(e,t)){constructor(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];const r=i[t],s=Vo()({startDrag:_.noop,endDrag:_.noop,drag:_.noop},r);s.startInput=s.startDrag,s.endInput=s.endDrag,s.onInput=s.drag,i[t]=s,super(...i),Fv(this,["addInputListener","removeInputListener"]);const a=this.getAccessibleValueHandlerInputListener();this.addInputListener(a),this._disposeAccessibleSlider=()=>{this.removeInputListener(a)}}dispose(){this._disposeAccessibleSlider(),super.dispose()}};fD.register("AccessibleSlider",$F);const ez=$F;class tz extends(Tv(cv)){constructor(e,t,i,n){super(),this.rangeProperty=i instanceof Hl?new mg(i):i;const r=Vo()({size:new My(100,5),startDrag:_.noop,drag:_.noop,endDrag:_.noop,constrainValue:_.identity,enabledRangeProperty:this.rangeProperty,soundGenerator:hz.DEFAULT_SOUND,valueChangeSoundGeneratorOptions:{},voicingOnEndResponse:_.noop,leftVisualOverflow:0,rightVisualOverflow:0,tandem:Lm.REQUIRED,tandemNameSuffix:"TrackNode"},n);r.soundGenerator===hz.DEFAULT_SOUND?r.soundGenerator=new WF(this.rangeProperty.value,r.valueChangeSoundGeneratorOptions||{}):null===r.soundGenerator&&(r.soundGenerator=WF.NO_SOUND),this.leftVisualOverflow=r.leftVisualOverflow,this.rightVisualOverflow=r.rightVisualOverflow,this.minimumSize=r.size,this.minimumWidth=this.minimumSize.width,this.internalWidthProperty=new Rb([this.localPreferredWidthProperty],e=>(null===e?this.minimumSize.width:Math.max(this.minimumSize.width,e))-r.leftVisualOverflow-r.rightVisualOverflow),this.sizeProperty=new Rb([this.internalWidthProperty],e=>new My(e,this.minimumSize.height)),this.valueToPositionProperty=new Rb([this.rangeProperty,this.internalWidthProperty],(e,t)=>new iD(e.min,e.max,0,t,!0));const s=(t,i)=>{const n=e.value,s=i.subtrailTo(this).getTransform().inversePosition2(t.pointer.point).x,a=this.valueToPositionProperty.value.inverse(s),o=r.enabledRangeProperty.value.constrainValue(a),l=r.constrainValue(o);e.set(l),"down"===t.type&&r.soundGenerator.playSoundIfThresholdReached(l,n)};this.addChild(t);let a=e.value;this.dragListener=new xx({tandem:r.tandem.createTandem("dragListener"),start:(t,i)=>{r.startDrag(t),a=e.value,s(t,i.pressedTrail)},drag:(e,t)=>{r.drag(e),s(e,t.pressedTrail)},end:e=>{r.endDrag(e),r.voicingOnEndResponse(a)}}),t.addInputListener(this.dragListener),this.mutate(r),this.disposeSliderTrack=()=>{t.removeInputListener(this.dragListener),this.dragListener.dispose()}}dispose(){this.disposeSliderTrack(),super.dispose()}}fD.register("SliderTrack",tz);class iz extends tz{constructor(e,t,i){const n=Vo()({fillEnabled:"white",fillDisabled:"gray",stroke:"black",lineWidth:1,cornerRadius:0},i),r=new xA({fill:n.fillDisabled,stroke:n.stroke,lineWidth:n.lineWidth,cornerRadius:n.cornerRadius,cursor:"default",pickable:!1}),s=new xA({fill:n.fillEnabled,stroke:n.stroke,lineWidth:n.lineWidth,cornerRadius:n.cornerRadius});super(e,new cv({children:[r,s]}),t,No({leftVisualOverflow:null!==n.stroke?n.lineWidth/2:0,rightVisualOverflow:null!==n.stroke?n.lineWidth/2:0},n));const a=pS.multilink([n.enabledRangeProperty,this.valueToPositionProperty,this.sizeProperty],(e,t,i)=>{const n=t.evaluate(e.min),a=t.evaluate(e.max);r.setRect(0,0,i.width,i.height),s.setRect(n,0,a-n,i.height)});this.disposeDefaultSliderTrack=()=>{a.dispose()}}dispose(){this.disposeDefaultSliderTrack(),super.dispose()}}fD.register("DefaultSliderTrack",iz);class nz extends xA{constructor(e){const t=Vo()({size:new My(22,45),fillHighlighted:"rgb( 71, 207, 255 )",centerLineStroke:"white",fill:"rgb( 50, 145, 184 )",stroke:"black",lineWidth:1,tandem:Lm.REQUIRED,tandemNameSuffix:"ThumbNode"},e);void 0===t.cornerRadius&&(t.cornerRadius=.25*t.size.width),t.cachedPaints=[t.fill,t.fillHighlighted],super(0,0,t.size.width,t.size.height,t);const i=xA.bounds(this.bounds.dilated(5),{fill:"transparent",localBounds:this.bounds,pickable:!1});this.addChild(i);this.addChild(new aA(Ip.lineSegment(t.size.width/2,3,t.size.width/2,t.size.height-3),{stroke:t.centerLineStroke}));const n=new Ax({attach:!1,tandem:Lm.OPT_OUT});n.isHighlightedProperty.link(e=>{this.fill=e?t.fillHighlighted:t.fill}),this.addInputListener(n)}}fD.register("SliderThumb",nz);const rz={VALUE_NAMED_PLACEHOLDER:"{{value}}",VALUE_NUMBERED_PLACEHOLDER:"{0}",SLIDER_VERTICAL_ROTATION:-Math.PI/2};fD.register("SunConstants",rz);const sz=rz;class az{constructor(e,t,i,n,r,s,a,o,l){this.parent=e,this.value=t,this.label=i,this.labelXProperty=new Rb([l.valueToPositionProperty],e=>e.evaluate(t)),this.tickNode=new cv,e.addChild(this.tickNode);const h=new aA((new Ip).moveTo(0,l.top).lineTo(0,l.top-n),{stroke:r,lineWidth:s});this.labelXProperty.link(e=>{h.x=e}),this.tickNode.addChild(h),i&&(this.labelContainer=new cv({pickable:!1}),this.tickNode.addChild(this.labelContainer),this.labelContainer.addChild(i),o===Ql.VERTICAL&&(this.labelContainer.rotation=-sz.SLIDER_VERTICAL_ROTATION),this.labelManualConstraint=Zw.create(this.tickNode,[h,this.labelContainer],(e,t)=>{t.centerX=e.centerX,t.bottom=e.top-a.tickLabelSpacing}))}dispose(){this.parent.removeChild(this.tickNode),this.labelContainer&&this.labelContainer.dispose(),this.labelXProperty.dispose(),this.labelManualConstraint&&this.labelManualConstraint.dispose()}}fD.register("SliderTick",az);const oz=new My(100,5),lz=new My(17,34);class hz extends(Iv(ez(cv,0))){constructor(e,t,i){const n=Vo()({orientation:Ql.HORIZONTAL,trackNode:null,trackSize:null,trackFillEnabled:"white",trackFillDisabled:"gray",trackStroke:"black",trackLineWidth:1,trackCornerRadius:0,trackPickable:!0,thumbNode:null,thumbSize:null,thumbFill:"rgb(50,145,184)",thumbFillHighlighted:"rgb(71,207,255)",thumbStroke:"black",thumbLineWidth:1,thumbCenterLineStroke:"white",thumbTouchAreaXDilation:11,thumbTouchAreaYDilation:11,thumbMouseAreaXDilation:0,thumbMouseAreaYDilation:0,thumbYOffset:0,tickLabelSpacing:6,majorTickLength:25,majorTickStroke:"black",majorTickLineWidth:1,minorTickLength:10,minorTickStroke:"black",minorTickLineWidth:1,cursor:"pointer",startDrag:_.noop,drag:_.noop,endDrag:_.noop,constrainValue:_.identity,disabledOpacity:Bg.DISABLED_OPACITY,soundGenerator:hz.DEFAULT_SOUND,valueChangeSoundGeneratorOptions:{},phetioLinkedProperty:null,tandem:Lm.REQUIRED,tandemNameSuffix:"Slider",phetioType:hz.SliderIO,phetioFeatured:!0,visiblePropertyOptions:{phetioFeatured:!0},phetioEnabledPropertyInstrumented:!0},i),r=t instanceof Hl?new mg(t):t;if(n.soundGenerator===hz.DEFAULT_SOUND?n.soundGenerator=new WF(r.value,n.valueChangeSoundGeneratorOptions||{}):null===n.soundGenerator&&(n.soundGenerator=WF.NO_SOUND),n.soundGenerator!==WF.NO_SOUND){let t=e.value;const i=n.drag;n.drag=r=>{r.isFromPDOM()?n.soundGenerator.playSoundForValueChange(e.value,t):n.soundGenerator.playSoundIfThresholdReached(e.value,t),i(r),t=e.value}}n.orientation===Ql.VERTICAL&&(n.trackSize&&(n.trackSize=n.trackSize.swapped()),n.thumbSize&&(n.thumbSize=n.thumbSize.swapped()),vF(n,"thumbTouchAreaXDilation","thumbTouchAreaYDilation"),vF(n,"thumbMouseAreaXDilation","thumbMouseAreaYDilation")),n.trackSize=n.trackSize||oz,n.thumbSize=n.thumbSize||lz;const s=n.tandem.createTandem(hz.THUMB_NODE_TANDEM_NAME);Lm.VALIDATION&&n.thumbNode;const a=n.thumbNode||new nz({size:n.thumbSize,fill:n.thumbFill,fillHighlighted:n.thumbFillHighlighted,stroke:n.thumbStroke,lineWidth:n.thumbLineWidth,centerLineStroke:n.thumbCenterLineStroke,tandem:s}),o=!n.enabledRangeProperty,l=_.pick(n,cv.REQUIRES_BOUNDS_OPTION_KEYS),h=No({ariaOrientation:n.orientation,valueProperty:e,panTargetNode:a,enabledRangeProperty:n.enabledRangeProperty||(t instanceof Hl?new ty(t,{valueType:Hl,isValidValue:e=>e.min>=t.min&&e.max<=t.max,tandem:n.tandem.createTandem("enabledRangeProperty"),phetioValueType:Hl.RangeIO,phetioDocumentation:"Sliders support two ranges: the outer range which specifies the min and max of the track and the enabledRangeProperty, which determines how low and high the thumb can be dragged within the track."}):t)},n);super(h),_defineProperty(this,"ticks",yx()),_defineProperty(this,"proposedValue",null),this.orientation=h.orientation,this.enabledRangeProperty=h.enabledRangeProperty,this.tickOptions=_.pick(n,"tickLabelSpacing","majorTickLength","majorTickStroke","majorTickLineWidth","minorTickLength","minorTickStroke","minorTickLineWidth");const u=[];this.majorTicksParent=new cv,this.minorTicksParent=new cv,u.push(this.majorTicksParent),u.push(this.minorTicksParent);const c=n.tandem.createTandem(hz.TRACK_NODE_TANDEM_NAME);Lm.VALIDATION&&n.trackNode;const d=new cv;u.push(d),this.track=n.trackNode||new iz(e,t,{size:h.trackSize,fillEnabled:h.trackFillEnabled,fillDisabled:h.trackFillDisabled,stroke:h.trackStroke,lineWidth:h.trackLineWidth,cornerRadius:h.trackCornerRadius,startDrag:h.startDrag,drag:h.drag,endDrag:h.endDrag,constrainValue:h.constrainValue,enabledRangeProperty:this.enabledRangeProperty,soundGenerator:n.soundGenerator,pickable:h.trackPickable,voicingOnEndResponse:this.voicingOnEndResponse.bind(this),tandem:c}),u.push(this.track),a.setCenterY(this.track.centerY+n.thumbYOffset),u.push(a);const p=new cv({children:u});n.orientation===Ql.VERTICAL&&(p.rotation=sz.SLIDER_VERTICAL_ROTATION),this.addChild(p),n.thumbNode||!n.thumbTouchAreaXDilation&&!n.thumbTouchAreaYDilation||(a.touchArea=a.localBounds.dilatedXY(n.thumbTouchAreaXDilation,n.thumbTouchAreaYDilation)),n.thumbNode||!n.thumbMouseAreaXDilation&&!n.thumbMouseAreaYDilation||(a.mouseArea=a.localBounds.dilatedXY(n.thumbMouseAreaXDilation,n.thumbMouseAreaYDilation));let m=0,g=e.value;const f=new xx({tandem:a.tandem.createTandem("dragListener"),start:(t,i)=>{if(this.enabledProperty.get()){g=e.value,n.startDrag(t);const r=i.pressedTrail.subtrailTo(p).getTransform();m=r.inversePosition2(t.pointer.point).x-a.centerX}},drag:(t,i)=>{if(this.enabledProperty.get()){const r=i.pressedTrail.subtrailTo(p).getTransform().inversePosition2(t.pointer.point).x-m;this.proposedValue=this.track.valueToPositionProperty.value.inverse(r);const s=this.enabledRangeProperty.get().constrainValue(this.proposedValue);e.set(n.constrainValue(s)),n.drag(t)}},end:e=>{this.enabledProperty.get()&&(n.endDrag(e),this.voicingOnEndResponse(g)),this.proposedValue=null}});a.addInputListener(f),this.thumbDragListener=f,this.trackDragListener=this.track.dragListener;const y=pS.multilink([e,this.track.valueToPositionProperty],(e,t)=>{a.centerX=t.evaluate(e)}),E=t=>{if(!e.isPhetioInstrumented()||!zE.value)if(null===this.proposedValue)e.set(fl.clamp(e.value,t.min,t.max));else{const i=fl.clamp(this.proposedValue,t.min,t.max),r=n.constrainValue(i);e.set(r)}};this.enabledRangeProperty.link(E);const v=new uz(this,this.track,a,p,n.orientation,d,this.ticks);this.disposeSlider=()=>{v.dispose(),a.dispose&&a.dispose(),this.track.dispose&&this.track.dispose(),o?this.enabledRangeProperty.dispose():this.enabledRangeProperty.unlink(E),y.dispose(),f.dispose()},this.focusHighlight=new JS(a);const A=n.phetioLinkedProperty||(e instanceof _g?e:null);A&&this.addLinkedElement(A,{tandemName:"valueProperty"}),!o&&this.enabledRangeProperty instanceof _g&&this.addLinkedElement(this.enabledRangeProperty,{tandemName:"enabledRangeProperty"}),this.mutate(l)}get majorTicksVisible(){return this.getMajorTicksVisible()}set majorTicksVisible(e){this.setMajorTicksVisible(e)}get minorTicksVisible(){return this.getMinorTicksVisible()}set minorTicksVisible(e){this.setMinorTicksVisible(e)}dispose(){this.disposeSlider(),this.ticks.forEach(e=>{e.dispose()}),super.dispose()}addMajorTick(e,t){this.addTick(this.majorTicksParent,e,t,this.tickOptions.majorTickLength,this.tickOptions.majorTickStroke,this.tickOptions.majorTickLineWidth)}addMinorTick(e,t){this.addTick(this.minorTicksParent,e,t,this.tickOptions.minorTickLength,this.tickOptions.minorTickStroke,this.tickOptions.minorTickLineWidth)}addTick(e,t,i,n,r,s){this.ticks.push(new az(e,t,i,n,r,s,this.tickOptions,this.orientation,this.track))}setMajorTicksVisible(e){this.majorTicksParent.visible=e}getMajorTicksVisible(){return this.majorTicksParent.visible}setMinorTicksVisible(e){this.minorTicksParent.visible=e}getMinorTicksVisible(){return this.minorTicksParent.visible}}ct=hz,_defineProperty(hz,"DEFAULT_SOUND",new WF(new Hl(0,1))),_defineProperty(hz,"THUMB_NODE_TANDEM_NAME","thumbNode"),_defineProperty(hz,"TRACK_NODE_TANDEM_NAME","trackNode"),_defineProperty(hz,"SliderIO",new el("SliderIO",{valueType:ct,documentation:"A traditional slider component, with a knob and possibly tick marks",supertype:cv.NodeIO}));class uz extends gw{constructor(e,t,i,n,r,s,a){super(e),this.slider=e,this.track=t,this.thumb=i,this.sliderPartsNode=n,this.orientation=r,this.trackSpacer=s,this.ticks=a,r===Ql.HORIZONTAL?(e.heightSizable=!1,this.preferredProperty=this.slider.localPreferredWidthProperty):(e.widthSizable=!1,this.preferredProperty=this.slider.localPreferredHeightProperty),this.preferredProperty.lazyLink(this._updateLayoutListener),this.track.rangeProperty.lazyLink(this._updateLayoutListener),this.thumb.localBoundsProperty.lazyLink(this._updateLayoutListener);const o=e=>{e.tickNode.localBoundsProperty.lazyLink(this._updateLayoutListener),a.addItemRemovedListener(t=>{t===e&&t.tickNode.localBoundsProperty.hasListener(this._updateLayoutListener)&&e.tickNode.localBoundsProperty.unlink(this._updateLayoutListener)})};a.addItemAddedListener(o),this.addNode(t),this.layout(),this.disposeSliderConstraint=()=>{a.removeItemAddedListener(o),this.preferredProperty.unlink(this._updateLayoutListener),this.track.rangeProperty.unlink(this._updateLayoutListener),this.thumb.localBoundsProperty.unlink(this._updateLayoutListener)}}layout(){super.layout();const e=this.slider,t=this.track,i=this.thumb;this.trackSpacer.localBounds=t.localBounds.dilatedX(i.width/2);const n=t.leftVisualOverflow+t.rightVisualOverflow,r=t.minimumWidth,s=r-n,a=e=>fl.linear(t.rangeProperty.value.min,t.rangeProperty.value.max,0,1,e),o=-i.width/2-t.leftVisualOverflow,l=i.width/2-t.leftVisualOverflow,h=new Hl(o,r+l);if(this.ticks.forEach(e=>{const t=s*a(e.value),i=e.tickNode.width/2;h.includeRange(new Hl(-i,i).shifted(t))}),e.widthSizable&&null!==this.preferredProperty.value){const e=XB.max(XB.linear(1,l),...this.ticks.map(e=>{const t=a(e.value);return XB.linear(t,e.tickNode.width/2-n*t)})).minus(XB.min(XB.constant(o),...this.ticks.map(e=>{const t=a(e.value);return XB.linear(t,-e.tickNode.width/2-n*t)}))),i=e.withXValues([r-1,r,...e.points.map(e=>e.x).filter(e=>e>r+1e-10)]).inverted();t.preferredWidth=Math.max(r,i.evaluate(this.preferredProperty.value))}else t.preferredWidth=t.minimumWidth;const u=h.getLength();this.orientation===Ql.HORIZONTAL?e.localMinimumWidth=u:e.localMinimumHeight=u}dispose(){this.disposeSliderConstraint(),super.dispose()}}fD.register("Slider",hz);class cz extends hz{constructor(e,t,i){super(e,t,Vo()({orientation:Ql.HORIZONTAL},i))}}fD.register("HSlider",cz);const dz={PLUS:"+",MINUS:"−",TIMES:"×",DIVIDE:"÷",DOT:"⋅",UNARY_PLUS:"+",UNARY_MINUS:"-",EQUAL_TO:"=",NOT_EQUAL_TO:"≠",GREATER_THAN:">",LESS_THAN:"<",LESS_THAN_OR_EQUAL:"≤",GREATER_THAN_OR_EQUAL:"≥",PERCENT:"%",INFINITY:"∞",PI:"π",PLUS_MINUS:"±",THETA:"θ",NO_VALUE:"—",DEGREES:"°"};JI.register("MathSymbols",dz);const pz=dz,mz=new gD(20);class gz extends cv{constructor(e,t,i){const n=Vo()({align:"right",valuePattern:sz.VALUE_NAMED_PLACEHOLDER,decimalPlaces:0,numberFormatter:null,useRichText:!1,useFullHeight:!1,textOptions:{font:mz,fill:"black",maxWidth:null,phetioReadOnly:!0},xMargin:8,yMargin:2,cornerRadius:0,backgroundFill:"white",backgroundStroke:"lightGray",backgroundLineWidth:1,backgroundLineDash:[],minBackgroundWidth:0,noValueString:pz.NO_VALUE,noValueAlign:null,noValuePattern:null,tandem:Lm.OPT_OUT,phetioType:gz.NumberDisplayIO},i);const r=new mg(n.numberFormatter?n.numberFormatter:e=>null===n.decimalPlaces?""+e:fl.toFixed(e,n.decimalPlaces));n.noValueAlign||(n.noValueAlign=n.align);const s=e=>e.includes(sz.VALUE_NUMBERED_PLACEHOLDER)?Qb.format(e,sz.VALUE_NAMED_PLACEHOLDER):e,a="string"==typeof n.valuePattern?new mg(s(n.valuePattern)):new Rb([n.valuePattern],s);n.noValuePattern||(n.noValuePattern=new Rb([a],e=>e));const o="string"==typeof n.noValuePattern?new mg(n.noValuePattern):n.noValuePattern,l=new Rb([r],e=>fz(t.min,n.noValueString,e),{accessNonDependencies:!0}),h=new Rb([r],e=>fz(t.max,n.noValueString,e),{accessNonDependencies:!0}),u=new Rb([a,l,h],(e,t,i)=>Qb.fillIn(e,{value:t.length>i.length?t:i})),c=n.useRichText?CT:gA,d=n.textOptions.tandem||n.tandem.createTandem("valueText"),p=new zI([e,o,a,r],(e,t,i,r)=>{const s=null===e&&t?t:i,a=fz(e,n.noValueString,r);return Qb.fillIn(s,{value:a})},{tandem:d.createTandem(gA.STRING_PROPERTY_TANDEM_NAME),accessNonDependencies:!0}),m=No({tandem:d},n.textOptions,{maxWidth:null}),g=new c(p,m),f=g.height,y=new xA({cornerRadius:n.cornerRadius,fill:n.backgroundFill,stroke:n.backgroundStroke,lineWidth:n.backgroundLineWidth,lineDash:n.backgroundLineDash});u.link(e=>{const t=new c(e,_.omit(m,"tandem"));g.maxWidth=null!==n.textOptions.maxWidth?n.textOptions.maxWidth:0!==t.width?t.width:null,t.maxWidth=g.maxWidth,y.rectWidth=Math.max(n.minBackgroundWidth,t.width+2*n.xMargin),y.rectHeight=(n.useFullHeight?f:t.height)+2*n.yMargin}),n.children=[y,g],super(),this.numberFormatterProperty=r,this.valueText=g,this.backgroundNode=y,Zw.create(this,[g,y],(t,i)=>{const r=null===e.value?n.noValueAlign:n.align;"center"===r?t.centerX=i.centerX:"left"===r?t.left=i.left+n.xMargin:t.right=i.right-n.xMargin,t.centerY=i.centerY}),this.mutate(n),this.disposeNumberDisplay=()=>{p.dispose(),a.dispose()}}setNumberFormatter(e){this.numberFormatterProperty.value=e}recomputeText(){}dispose(){this.disposeNumberDisplay(),super.dispose()}setNumberFont(e){this.valueText.font=e}set numberFont(e){this.setNumberFont(e)}setNumberFill(e){this.valueText.fill=e}set numberFill(e){this.setNumberFill(e)}setBackgroundFill(e){this.backgroundNode.fill=e}set backgroundFill(e){this.setBackgroundFill(e)}get backgroundFill(){return this.getBackgroundFill()}getBackgroundFill(){return this.backgroundNode.fill}setBackgroundStroke(e){this.backgroundNode.stroke=e}set backgroundStroke(e){this.setBackgroundStroke(e)}getBackgroundWidth(){return this.backgroundNode.getRectWidth()}setBackgroundWidth(e){this.backgroundNode.setRectWidth(e)}get backgroundWidth(){return this.getBackgroundWidth()}set backgroundWidth(e){this.setBackgroundWidth(e)}}_defineProperty(gz,"NumberDisplayIO",new el("NumberDisplayIO",{valueType:gz,supertype:cv.NodeIO,documentation:"A numeric readout with a background"})),JI.register("NumberDisplay",gz);const fz=(e,t,i)=>{let n=t;return null!==e&&(n=i(e)),n},yz=["startDrag","endDrag","leftStart","leftEnd","rightStart","rightEnd"],Ez=["touchAreaXDilation","touchAreaYDilation","mouseAreaXDilation","mouseAreaYDilation"],vz=new WF(new Hl(0,1));class Az extends(Tv(cv)){constructor(e,t,i,n){!function(e){!e.startCallback&&e.endCallback;let t=!1,i=!1;e.arrowButtonOptions&&(t=bz(e.arrowButtonOptions));e.sliderOptions&&(i=bz(e.sliderOptions))}(n||{});const r=Vo()({numberDisplayOptions:{},sliderOptions:{},arrowButtonOptions:{},titleNodeOptions:{},startCallback:_.noop,endCallback:_.noop,delta:1,disabledOpacity:.5,layoutFunction:Az.createLayoutFunction1(),includeArrowButtons:!0,soundGenerator:vz,valueChangeSoundGeneratorOptions:{},tandem:Lm.REQUIRED,tandemNameSuffix:"Control",phetioType:Az.NumberControlIO,phetioEnabledPropertyInstrumented:!0,visiblePropertyOptions:{phetioFeatured:!0}},n);super();const s=r.arrowButtonOptions&&r.arrowButtonOptions.hasOwnProperty("scale"),a=()=>l.enabledRangeProperty?l.enabledRangeProperty.value:i,o=e=>{const t=fl.roundToInterval(e,l.delta);return a().constrainValue(t)};if(r.soundGenerator===vz){let e=r.valueChangeSoundGeneratorOptions;_.isEmpty(r.valueChangeSoundGeneratorOptions)&&(e={interThresholdDelta:r.delta,constrainValue:o}),r.soundGenerator=new WF(i,e)}else null===r.soundGenerator&&(r.soundGenerator=WF.NO_SOUND);const l=No({arrowButtonOptions:{touchAreaXDilation:3.5,touchAreaYDilation:7,mouseAreaXDilation:0,mouseAreaYDilation:0,enabledEpsilon:0,leftStart:r.startCallback,leftEnd:r.endCallback,rightStart:r.startCallback,rightEnd:r.endCallback,enabledPropertyOptions:{phetioReadOnly:!0,phetioFeatured:!1}},sliderOptions:{startDrag:r.startCallback,endDrag:r.endCallback,majorTickLength:20,minorTickStroke:"rgba( 0, 0, 0, 0.3 )",majorTicks:[],minorTickSpacing:0,constrainValue:o,soundGenerator:r.soundGenerator,tandem:r.tandem.createTandem(Az.SLIDER_TANDEM_NAME)},numberDisplayOptions:{textOptions:{font:new gD(12),stringPropertyOptions:{phetioFeatured:!0}},tandem:r.tandem.createTandem("numberDisplay"),visiblePropertyOptions:{phetioFeatured:!0}},titleNodeOptions:{font:new gD(12),maxWidth:null,fill:"black",tandem:r.tandem.createTandem("titleText")}},r);l.enabledRangeProperty&&(l.sliderOptions.enabledRangeProperty=l.enabledRangeProperty);const h=_.pick(l.arrowButtonOptions,Ez);l.arrowButtonOptions=_.omit(l.arrowButtonOptions,Ez),l.arrowButtonOptions.tagName=null,this.groupFocusHighlight=l.includeArrowButtons,l.sliderOptions.trackNode||(l.sliderOptions=No({trackSize:new My(180,3)},l.sliderOptions)),l.sliderOptions.thumbNode||(l.sliderOptions=No({thumbSize:new My(17,34),thumbTouchAreaXDilation:6},l.sliderOptions)),l.sliderOptions=No({shiftKeyboardStep:l.delta,phetioType:hz.SliderIO},l.sliderOptions),l.sliderOptions.thumbFill&&!l.sliderOptions.thumbFillHighlighted&&(this.thumbFillProperty=new DA(l.sliderOptions.thumbFill),l.sliderOptions.thumbFillHighlighted=new Rb([this.thumbFillProperty],e=>e.brighterColor()));const u=new gA(e,l.titleNodeOptions),c=new gz(t,i,l.numberDisplayOptions);this.slider=new cz(t,i,l.sliderOptions);let d=null,p=null,m=null;if(l.includeArrowButtons){if(d=new fF("left",()=>{const e=t.get();let i=t.get()-l.delta;i=fl.roundToInterval(i,l.delta),i=Math.max(i,a().min),t.set(i),l.soundGenerator.playSoundForValueChange(i,e),this.slider.voicingOnEndResponse(e)},No({soundPlayer:KH,startCallback:l.arrowButtonOptions.leftStart,endCallback:l.arrowButtonOptions.leftEnd,tandem:l.tandem.createTandem("decrementButton")},l.arrowButtonOptions)),p=new fF("right",()=>{const e=t.get();let i=t.get()+l.delta;i=fl.roundToInterval(i,l.delta),i=Math.min(i,a().max),t.set(i),l.soundGenerator.playSoundForValueChange(i,e),this.slider.voicingOnEndResponse(e)},No({soundPlayer:KH,startCallback:l.arrowButtonOptions.rightStart,endCallback:l.arrowButtonOptions.rightEnd,tandem:l.tandem.createTandem("incrementButton")},l.arrowButtonOptions)),!s){d.setScaleMagnitude(1);const e=c.localBounds.height/d.height;d.setScaleMagnitude(e),p.setScaleMagnitude(e)}d.touchArea=d.localBounds.dilatedXY(h.touchAreaXDilation,h.touchAreaYDilation).shiftedX(-h.touchAreaXDilation),p.touchArea=p.localBounds.dilatedXY(h.touchAreaXDilation,h.touchAreaYDilation).shiftedX(h.touchAreaXDilation),d.mouseArea=d.localBounds.dilatedXY(h.mouseAreaXDilation,h.mouseAreaYDilation).shiftedX(-h.mouseAreaXDilation),p.mouseArea=p.localBounds.dilatedXY(h.mouseAreaXDilation,h.mouseAreaYDilation).shiftedX(h.mouseAreaXDilation),m=()=>{const e=t.value;d.enabled=e-l.arrowButtonOptions.enabledEpsilon>a().min&&!this.slider.isFocused(),p.enabled=e+l.arrowButtonOptions.enabledEpsilon<a().max&&!this.slider.isFocused()},t.lazyLink(m),l.enabledRangeProperty&&l.enabledRangeProperty.lazyLink(m),m(),this.slider.addInputListener({focus:()=>{d.enabled=!1,p.enabled=!1},blur:()=>m()})}const g=l.sliderOptions.majorTicks;for(let y=0;y<g.length;y++)this.slider.addMajorTick(g[y].value,g[y].label);if(l.sliderOptions.minorTickSpacing>0)for(let y=i.min;y<=i.max;)_.find(g,e=>e.value===y)||this.slider.addMinorTick(y),y+=l.sliderOptions.minorTickSpacing;const f=l.layoutFunction(u,c,this.slider,d,p);if(this.widthSizable=xv(f),wv(f)){const e=e=>{this.localMinimumWidth=e};f.minimumWidthProperty.link(e);const t=e=>{f.preferredWidth=e};this.localPreferredWidthProperty.link(t),this.disposeEmitter.addListener(()=>{f.minimumWidthProperty.unlink(e),this.localPreferredWidthProperty.unlink(t)})}l.children=[f],this.mutate(l),this.numberDisplay=c,this.disposeNumberControl=()=>{u.dispose(),c.dispose(),this.slider.dispose(),this.thumbFillProperty&&this.thumbFillProperty.dispose(),d&&d.dispose(),p&&p.dispose(),m&&t.unlink(m),m&&l.enabledRangeProperty&&l.enabledRangeProperty.unlink(m)}}redrawNumberDisplay(){this.numberDisplay.recomputeText()}dispose(){this.disposeNumberControl(),super.dispose()}setNumberFormatter(e){this.numberDisplay.setNumberFormatter(e)}static withMinMaxTicks(e,t,i,n){const r=Vo()({tickLabelFont:new gD(12)},n);return r.sliderOptions=No({majorTicks:[{value:i.min,label:new gA(i.min,{font:r.tickLabelFont})},{value:i.max,label:new gA(i.max,{font:r.tickLabelFont})}]},r.sliderOptions),new Az(e,t,i,r)}static createLayoutFunction1(e){const t=Vo()({align:"center",titleXSpacing:5,arrowButtonsXSpacing:15,ySpacing:5},e);return(e,i,n,r,s)=>(n.mutateLayoutOptions({grow:1}),new aT({align:t.align,spacing:t.ySpacing,children:[new sT({spacing:t.titleXSpacing,children:[e,i]}),new sT({layoutOptions:{stretch:!0},spacing:t.arrowButtonsXSpacing,children:[r,n,s]})]}))}static createLayoutFunction2(e){const t=Vo()({align:"center",xSpacing:5,ySpacing:5},e);return(e,i,n,r,s)=>(n.mutateLayoutOptions({stretch:!0}),new aT({align:t.align,spacing:t.ySpacing,children:[new sT({spacing:t.xSpacing,children:[e,r,i,s]}),n]}))}static createLayoutFunction3(e){const t=Vo()({alignTitle:"center",alignNumber:"center",titleLeftIndent:0,xSpacing:5,ySpacing:5},e);return(e,i,n,r,s)=>{n.mutateLayoutOptions({stretch:!0});const a=new aT({spacing:t.ySpacing,align:t.alignTitle,children:[new eT(e,{leftMargin:t.titleLeftIndent}),new aT({layoutOptions:{stretch:!0},spacing:t.ySpacing,align:t.alignNumber,children:[new sT({spacing:t.xSpacing,children:[r,i,s]}),n]})]});return e.boundsProperty.lazyLink(()=>{a.updateLayout()}),a}}static createLayoutFunction4(e){const t=Vo()({sliderPadding:0,verticalSpacing:5,arrowButtonSpacing:5,hasReadoutProperty:null,layoutInvisibleButtons:!1,createBottomContent:null},e);return(e,i,n,r,s)=>{n.mutateLayoutOptions({grow:1});const a=!!r,o=new sT({spacing:t.arrowButtonSpacing,children:a?[r,n,s]:[n],excludeInvisibleChildrenFromBounds:!t.layoutInvisibleButtons}),l=t.createBottomContent?t.createBottomContent(o):o;return l.mutateLayoutOptions({stretch:!0,xMargin:t.sliderPadding}),new aT({spacing:t.verticalSpacing,children:[new sT({spacing:t.sliderPadding,children:[e,new cv({children:[i],visibleProperty:t.hasReadoutProperty||null,excludeInvisibleChildrenFromBounds:!0})],layoutOptions:{stretch:!0}}),l]})}}}function bz(e){const t=Object.keys(e);return yz.filter(e=>_.includes(t,e)).length>0}_defineProperty(Az,"NumberControlIO",new el("NumberControlIO",{valueType:Az,documentation:"A number control with a title, slider and +/- buttons",supertype:cv.NodeIO})),_defineProperty(Az,"SLIDER_TANDEM_NAME","slider"),JI.register("NumberControl",Az);const Sz={DEFAULT_BUTTON_RADIUS:20.8,PLAY_CONTROL_BUTTON_RADIUS:28};JI.register("SceneryPhetConstants",Sz);const _z=Sz;class xz extends Ip{constructor(e){super(),this.rect(0,0,e,e)}}JI.register("StopIconShape",xz);class wz extends Kq{constructor(e,t,i){const n=Vo()({radius:i&&i.content?null:30,lineWidth:.5,stroke:null,touchAreaDilation:0,mouseAreaDilation:0,touchAreaXShift:0,touchAreaYShift:0,mouseAreaXShift:0,mouseAreaYShift:0,aspectRatio:1,cursor:"pointer",xMargin:5,yMargin:5,buttonAppearanceStrategy:wz.ThreeDAppearanceStrategy},i);n.content,n.radius&&(n.minUnstrokedWidth=2*n.radius,n.minUnstrokedHeight=2*n.radius),n.buttonAppearanceStrategyOptions||(n.buttonAppearanceStrategyOptions={stroke:n.stroke,lineWidth:n.lineWidth});const r=n.radius||Math.max(n.content.width+2*n.xMargin,n.content.height+2*n.yMargin)/2;if(n.content&&n.radius){const e=n.content,t=Math.min(2*(n.radius-n.xMargin)/e.width,2*(n.radius-n.yMargin)/e.height);n.content=new cv({children:[e],scale:t})}const s=new AA(r);super(e,s,t,n);const a=s.localBounds.width/2;this.touchArea=Ip.circle(n.touchAreaXShift,n.touchAreaYShift,a+n.touchAreaDilation),this.mouseArea=Ip.circle(n.mouseAreaXShift,n.mouseAreaYShift,a+n.mouseAreaDilation),this.focusHighlight=Ip.circle(0,0,a+5)}}wz.ThreeDAppearanceStrategy=class{constructor(e,t,i,n){const r=n&&n.stroke?n.stroke:new DA(i,{luminanceFactor:-.4}),s=n&&void 0!==n.lineWidth?n.lineWidth:.3,a=Vo()({stroke:r,lineWidth:s,overStroke:r,overLineWidth:s,overButtonOpacity:1,selectedStroke:r,selectedLineWidth:s,selectedButtonOpacity:1,deselectedStroke:r,deselectedLineWidth:s,deselectedButtonOpacity:1,overFill:i},n),o=new DA(i,{luminanceFactor:.8}),l=new DA(i,{luminanceFactor:.7}),h=new DA(i,{luminanceFactor:.3}),u=new DA(i,{luminanceFactor:-.1}),c=new DA(i,{luminanceFactor:-.2}),d=new DA(i,{luminanceFactor:-.4}),p=new DA(i,{luminanceFactor:-.5}),m=new Rb([i],e=>e.withAlpha(0)),g=e.width/2,f=g-2.5,y=g+2.5,E=new gE(2.5,2.5,f,2.5,2.5,y).addColorStop(0,i).addColorStop(1,l),v=new gE(-2.5,-2.5,f,-2.5,-2.5,y).addColorStop(0,m).addColorStop(1,p),A=new gE(2.5,2.5,f,2.5,2.5,y).addColorStop(0,h).addColorStop(1,o),b=new gE(-2.5,-2.5,f,-2.5,-2.5,y).addColorStop(0,m).addColorStop(1,p),S=new gE(-2.5,-2.5,0,0,0,y).addColorStop(0,u).addColorStop(.6,c).addColorStop(.8,i).addColorStop(1,o),_=new AA(g,{stroke:a.stroke?a.stroke:d,lineWidth:a.lineWidth,pickable:!1});function x(t){switch(t){case Fq.IDLE:e.fill=E,e.stroke=a.deselectedStroke,e.lineWidth=a.deselectedLineWidth,e.opacity=a.deselectedButtonOpacity,_.fill=v,_.opacity=a.deselectedButtonOpacity;break;case Fq.OVER:e.fill=A,e.stroke=a.overStroke,e.lineWidth=a.overLineWidth,e.opacity=a.overButtonOpacity,_.fill=b,_.opacity=a.overButtonOpacity;break;case Fq.PRESSED:e.fill=S,e.stroke=a.selectedStroke,e.lineWidth=a.selectedLineWidth,e.opacity=a.selectedButtonOpacity,_.fill=b,_.opacity=a.selectedButtonOpacity;break;default:throw new Error("unsupported interactionState: "+t)}}e.addChild(_),this.maxLineWidth=_.hasStroke()&&a&&"number"==typeof a.lineWidth?a.lineWidth:0,e.cachedPaints=[E,A,S],_.cachedPaints=[v,b],t.link(x),this.disposeThreeDAppearanceStrategy=()=>{t.hasListener(x)&&t.unlink(x),o.dispose(),l.dispose(),h.dispose(),u.dispose(),c.dispose(),d.dispose(),p.dispose(),m.dispose()}}dispose(){this.disposeThreeDAppearanceStrategy()}},fD.register("RoundButton",wz);class Tz extends wz{constructor(e,t,i,n){const r=Vo()({valueOffSoundPlayer:dY,valueOnSoundPlayer:SY,tandem:Lm.REQUIRED,phetioFeatured:!0,tandemNameSuffix:"Button"},n),s=new xY(t,i,e,r),a=new _Y(s);super(s,a,r),this.addLinkedElement(e,{tandemName:"property"});const o=()=>{e.value===t?r.valueOffSoundPlayer.play():e.value===i&&r.valueOnSoundPlayer.play()};this.buttonModel.produceSoundEmitter.addListener(o),this.disposeRoundToggleButton=()=>{this.buttonModel.produceSoundEmitter.removeListener(o),s.dispose()}}dispose(){this.disposeRoundToggleButton(),super.dispose()}}fD.register("RoundToggleButton",Tz);class Pz extends Tz{constructor(e,t,i,n){const r=Vo()({content:null,tandem:Lm.REQUIRED,tandemNameSuffix:"Button"},n),s=new iY(e,t,i,{tandem:r.tandem.createTandem("toggleNode")});r.content=s,super(e,!1,!0,r),this.disposeBooleanRoundToggleButton=function(){s.dispose()}}dispose(){this.disposeBooleanRoundToggleButton(),super.dispose()}}fD.register("BooleanRoundToggleButton",Pz);const Cz=Pz,Vz="data:audio/mpeg;base64,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",Rz=aO(cO,Vz),Nz=JD.createLock(Vz),Mz=new hO;let kz=!1;const Lz=()=>{kz||(Nz(),kz=!0)},Iz=cO.decodeAudioData(Rz.buffer,e=>{null===Mz.audioBufferProperty.value&&(Mz.audioBufferProperty.set(e),Lz())},e=>{console.warn("decode of audio data failed, using stubbed sound, error: "+e),Mz.audioBufferProperty.set(cO.createBuffer(1,1,cO.sampleRate)),Lz()});Iz&&Iz.then(e=>{null===Mz.audioBufferProperty.value&&(Mz.audioBufferProperty.set(e),Lz())}).catch(e=>{console.warn("promise rejection caught for audio decode, error = "+e),Lz()});const Bz=new gq(Mz,{soundClipOptions:{initialOutputLevel:.7},soundManagerOptions:{categoryName:"user-interface"}});oO.register("pauseSoundPlayer",Bz);const Dz=Bz,Oz="data:audio/mpeg;base64,//swxAAAB1BHOnWmABEWjO23MPACAM4AAka0C2CViDZjzZoUIKXmGQHLmnHZgZuIghjiBjgxeiMuWAQDhMhMyefxsGZPP38oscKBjgh7vuRIAKJJltl/4AAAAAAAeIQEujEqiqRmMJCES5WG2gJpbTG4Ow/M4mn/Qr2Js5qIuqgsklNZOqlEOMfLXi1GSdQzuEW0dE8qAAAwLYAA//syxAMCCDhjP123gAEEiuWNvCUaBpRaYSCm0Kg6aZJnFNZzqgY+cBgqYYFmJBqWAkHQEu2XFwmiO5lSznWcKmje3hW8HX3bwt0/3XUHQ/5sFAYACqnqDC8MFAAYjK0cc9HHDBpgmZQQhSpXRTUQnFAiSUey+KNyollAoIHkq4CYarC6S3YyUWYjae5ECrd//DlNiAACxKE0C6BbAf/7MsQFgwhgbzhtsFDxHA3mTb6ZItBjJRcHVJgRkcS2mcgBlQ4kyhGWnb+PtLXw1x9GdIJksprlMmS4Cg6y44yjbH5yKe05wYGI/v2JDYn4Auuq25bxHxJsxhAOAFTHWY1ZXPRRiMTRQRuKAOQJOsy1I6WV2TO0w6Sw7LS7gfm9kt6zyIwPOZ+BkYQHFqf/C3p//+hgG5wCQFYWCTD/+zLEBIMIdGkkLfUHWQONZU2+tSrxQUTDm+024/MxgnMkFRN85yMUCVEQLGBASqdpAKDFymGvanI7suWZGZeSHQoo10ND7uHsPDn/79gtWEzPwBSpvpilULMOAU5TLsYQJ4ZCgQ9OwiJIhwZaiyx9mjv225SaC56XS3HG/Z1fwfNN60notpag8MGez2/u//6VAGEm4IBuHC+wVGDp//swxAYCSDRpLu1xKLEYjeYNzRlZUhKGOGCWs0pA08Q6K8x4tJypSP7GoqwEicWBqgRes01nKVlIf053z99P+/0iOm5f3fR///9Yeo0+yXyIBggABwAMUlMw6A1DDFqjO9soQjM898y6I4jYzAJOUFB4ETkVwvSE4xN36KAAwrAce3hDuTP35zIZyYUyDMn+ISyAC3LdqAAB+ahk//syxAWASOxvWaw8zzD+imZNnjEV3JHJkEvdhpKPigJmMTjXO9IRmHkCqmDRKV0S1IC1jOP85Y5MSCkCH+gU0ozUUqNPx272KtThMKOJhxfE5TgmVUjBYXxXAW5sXB65hsAyY00YTHRJGOIapLBEXyyrAEARSqei0NSmHSQ/MpWStQ6L6Im3GvCmsSb/VQ/9phwACuMnDtxuEFAJjv/7MsQGAwhMYyxM9ScZHQskja6ZIlHP4HxIAwAPxmmJhhEGJh/EgkZBgEDYAANr7gthXLGdmFBIAYAqpKM51ULEenPZ/PqtNKhQTIERxwAhyCooMRAK0AYgsiRNABMGlBB+MSidMKAAMja+NcgkUmPB4DgRW4pi/z0r7lTL3mtAoCoCJSTl5o8wz6QWiqx3/t//ag4AAAHJdov6Bwb/+zLEBQBIGE8qbXGIwR8NaSmnshcFWggYaHqGTQEOEZ41iIjI4SMAxo8wMgSAh4CI5iQEBwYQPZZDoLFNxeOBwy8x25B1GfiR6RaiAQapdQ1tmbRXvfpSCabcGCo4qoNLVEaIiIUxwGpGODgKkYyxOJI96yKt45ruMnyxlWKW2neqTQDgdhIIn0oSL0P0PnmwJ9O6SgAAAimCDqAR//swxASAR2xhPG1xLHkNjihdvTFPEpiKw4gABcIXQCEimJjZJrgZaA4iNiY7pINEZ7B2yElTIU2qu13xUoQq4yhd5VFpCRiwDLsEWaepoozJUXWnIcTERUZVTpYMxkOCj0FNBgieh9D7wlVcTR0Cc7LaU/cmuQwN5fCnK9Y+smsQkY/6QmSHAyiWWkAAKUgAAAsuCvppLKVG2IlA//syxAiCR4RvRUztKLDhDWfpvJlXJkEg3k+NKBQuFAEtagUYOQvtmVDLVmD5053TkiO+N9YuviT/LfTXQp2mxoFqSCPM4X1E0nVwR0FAIsOghXOsahIZRDbGwM43kS6lJK4rwAxwCGDcpCWXtpEQ53S1v35WuSjUtQAy0AAARJmTVA8AQOqVoNF3zdAMLw71BQgkAgMjwTQkGxgCVv/7MsQSAkdMaTLs8Qjg2w0m5c0lTgCVz8xnJhCG2pRs414U2SyOm+uNZ8NANeEExBpChMMiwDXAgQQiBQiPKksIEwUGFC4Lkj7r2VWUR4NIzyJ6UGkkqnW2vrW7c/H+of4OqgAzcAGTpJfEADXaDgsX7Dh6DjKYFhZpmAAoDgEYF+gKFTEhuV2/NZ/21pKIRZ9bUlgxBiLU//Ce/V7/+zLEHQNHUGkwzhjwsOWNJM2elOSgTRFJwgCZsX4M8Ey4BGGYWAqYuJyfIDeDjBMHwQMDgAS9MnhnJgUlrzvaptVGAQec6lMQ/3f/6jPXTHReMiqMGMWUxc1k858QWJowORAyihcwxFJBEEAcYEiIZKisXjRJa1CZRJpRjQWbPNYwE6FUu//4kDgOawFnzmmWBnQC1CtjH4cMxyw6//swxCcDhzBpGA10R4DYByKNjmTKvZANJytIEhBhR0LrVuwNjTP9fxs5asiIqWf/Lf/////+tQnIJAGuAaNRprSJykgqQzgLjF/HCsDeTcUqKus9P66P1f/4oZYBGjiY1AXQLGWOYOSMStAB/8FTIsVCgeAoqKt7ajS0MdUhaVJ/rUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVV//syxDKCRnwlDGNh4vBbgB4kMIwOVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ==",qz=aO(cO,Oz),Yz=JD.createLock(Oz),Hz=new hO;let Gz=!1;const Fz=()=>{Gz||(Yz(),Gz=!0)},zz=cO.decodeAudioData(qz.buffer,e=>{null===Hz.audioBufferProperty.value&&(Hz.audioBufferProperty.set(e),Fz())},e=>{console.warn("decode of audio data failed, using stubbed sound, error: "+e),Hz.audioBufferProperty.set(cO.createBuffer(1,1,cO.sampleRate)),Fz()});zz&&zz.then(e=>{null===Hz.audioBufferProperty.value&&(Hz.audioBufferProperty.set(e),Fz())}).catch(e=>{console.warn("promise rejection caught for audio decode, error = "+e),Fz()});const Uz=new gq(Hz,{soundClipOptions:{initialOutputLevel:.7},soundManagerOptions:{categoryName:"user-interface"}});oO.register("playSoundPlayer",Uz);const Wz=Uz;class Xz extends Ip{constructor(e,t){super(),this.moveTo(0,0),this.lineTo(e,t/2),this.lineTo(0,t),this.close()}}JI.register("PlayIconShape",Xz);class jz extends Cz{constructor(e,t,i){const n=Vo()({radius:_z.PLAY_CONTROL_BUTTON_RADIUS,scaleFactorWhenNotPlaying:1,includeGlobalHotkey:!1,startPlayingLabel:nO.a11y.playControlButton.playStringProperty,endPlayingLabel:null,valueOffSoundPlayer:Dz,valueOnSoundPlayer:Wz,xMargin:0,yMargin:0},i),r=.8*n.radius,s=n.radius,a=new aA(new Xz(r,s),{fill:"black",centerX:.05*n.radius,centerY:0}),o=new AA(n.radius,{children:[a]});t.centerX=0,t.centerY=0;const l=new AA(n.radius,{children:[t]});super(e,l,o,n);const h=(e,t)=>{this.innerContent=e?n.endPlayingLabel:n.startPlayingLabel;const i=null===t?1:1/n.scaleFactorWhenNotPlaying;this.scale(e?i:n.scaleFactorWhenNotPlaying)};e.link(h);const u=["alt+k"];let c=null;n.includeGlobalHotkey&&phet.chipper.queryParameters.supportsInteractiveDescription&&(c=new Kx({keys:u,global:!0,listenerFireTrigger:"up",callback:()=>{e.set(!e.get());const t=e.get()?n.valueOnSoundPlayer:n.valueOffSoundPlayer;t&&t.play()}}),this.addInputListener(c)),this.disposePlayStopButton=()=>{e.hasListener(h)&&e.unlink(h),c&&(this.removeInputListener(c),c.dispose())}}dispose(){this.disposePlayStopButton(),super.dispose()}}JI.register("PlayControlButton",jz);JI.register("PlayStopButton",class extends jz{constructor(e,t){const i=Vo()({radius:_z.PLAY_CONTROL_BUTTON_RADIUS,endPlayingLabel:nO.a11y.playControlButton.stopStringProperty},t),n=.75*i.radius;super(e,new aA(new xz(n),{fill:"black"}),i)}});JI.register("ShadedRectangle",class extends cv{constructor(e,t){super();const i=Vo()({baseColor:new Hg(80,130,230),lightFactor:.5,lighterFactor:.1,darkFactor:.5,darkerFactor:.1,cornerRadius:10,lightSource:"leftTop",lightOffset:.525,darkOffset:.375},t),n=i.lightSource.includes("left"),r=i.lightSource.includes("Top"),s=i.cornerRadius;this.lighterPaintProperty=new DA(i.baseColor,{luminanceFactor:i.lightFactor+i.lighterFactor}),this.lightPaintProperty=new DA(i.baseColor,{luminanceFactor:i.lightFactor}),this.darkPaintProperty=new DA(i.baseColor,{luminanceFactor:-i.darkFactor}),this.darkerPaintProperty=new DA(i.baseColor,{luminanceFactor:-i.darkFactor-i.darkerFactor});const a=r?this.lighterPaintProperty:this.darkerPaintProperty,o=n?this.lightPaintProperty:this.darkPaintProperty,l=n?this.darkPaintProperty:this.lightPaintProperty,h=r?this.darkerPaintProperty:this.lighterPaintProperty,u=i.lightOffset*s,c=i.darkOffset*s,d=r?u:c,p=n?u:c,m=n?c:u,g=r?c:u,f=xA.roundedBounds(e,s,s,{pickable:!1}),y=xA.roundedBounds(e,s,s,{pickable:!1});f.fill=new mE(f.left,0,f.right,0).addColorStop(0,o).addColorStop(p/y.width,i.baseColor).addColorStop(1-m/y.width,i.baseColor).addColorStop(1,l),y.fill=new mE(0,y.top,0,y.bottom).addColorStop(0,a).addColorStop(d/y.height,new Rb([a],e=>e.withAlpha(0))).addColorStop(1-g/y.height,new Rb([h],e=>e.withAlpha(0))).addColorStop(1,h);const E=(new Ip).moveTo(0,0).arc(0,0,s,-Math.PI/2,0,!1).close(),v={leftTop:-Math.PI/2,rightTop:0,rightBottom:Math.PI/2,leftBottom:Math.PI}[i.lightSource],A=e.eroded(s),b=new aA(E,{x:n?A.minX:A.maxX,y:r?A.minY:A.maxY,rotation:v,fill:new gE(0,0,0,0,0,s).addColorStop(0,i.baseColor).addColorStop(1-u/s,i.baseColor).addColorStop(1,this.lighterPaintProperty),pickable:!1}),S=new aA(E,{x:n?A.maxX:A.minX,y:r?A.maxY:A.minY,rotation:v+Math.PI,fill:new gE(0,0,0,0,0,s).addColorStop(0,i.baseColor).addColorStop(1-c/s,i.baseColor).addColorStop(1,this.darkerPaintProperty),pickable:!1}),_=xA.roundedBounds(e,s,s,{stroke:new Rb([l],e=>e.withAlpha(.4))});this.addChild(f),this.addChild(y),this.addChild(b),this.addChild(S),this.addChild(_),this.mutate(i)}dispose(){this.lighterPaintProperty.dispose(),this.lightPaintProperty.dispose(),this.darkPaintProperty.dispose(),this.darkerPaintProperty.dispose(),super.dispose()}});class Qz extends Db{constructor(e){super([e.focusedProperty,e.overProperty,e.looksOverProperty,e.looksPressedProperty,e.valueProperty],(t,i,n,r,s)=>{const a=s===e.valueDown;return!n||r||a?(i||t)&&(r||a)||a?Fq.PRESSED:Fq.IDLE:Fq.OVER},{valueType:Fq})}}fD.register("StickyToggleButtonInteractionStateProperty",Qz);class Kz extends Uq{constructor(e,t,i,n){const r=Vo()({tandem:Lm.REQUIRED},n);super(r),this.valueUp=e,this.valueDown=t,this.valueProperty=i,this.toggledEmitter=new hb({tandem:r.tandem.createTandem("toggledEmitter"),phetioDocumentation:"Emits when the button is toggled",phetioEventType:vm.USER}),this.toggledEmitter.addListener(()=>{this.valueProperty.value=this.valueProperty.value===this.valueUp?this.valueDown:this.valueUp}),this.pressedWhileDownProperty=new gy(!1);const s=n=>{const r=this.overProperty.get()||this.focusedProperty.get();this.enabledProperty.get()&&r&&!this.interrupted&&(n&&i.value===e&&(this.toggle(),this.pressedWhileDownProperty.set(!1)),n||i.value!==t||(this.pressedWhileDownProperty.get()?this.toggle():this.pressedWhileDownProperty.set(!0))),n||r||this.pressedWhileDownProperty.set(!0)};this.downProperty.link(s);const a=e=>{this.downProperty.set(e===t)};i.link(a);const o=e=>{e&&this.pressedWhileDownProperty.set(!0)};this.enabledProperty.link(o),this.disposeToggleButtonModel=()=>{this.downProperty.unlink(s),this.enabledProperty.unlink(o),i.unlink(a),this.toggledEmitter.dispose()}}dispose(){this.disposeToggleButtonModel(),super.dispose()}toggle(){this.toggledEmitter.emit(),this.produceSoundEmitter.emit()}}fD.register("StickyToggleButtonModel",Kz);class Zz extends Jq{constructor(e,t,i,n){const r=new Kz(t,i,e,n),s=new Qz(r);super(r,s,n),this.disposeRectangularStickyToggleButton=()=>{r.dispose()}}dispose(){this.disposeRectangularStickyToggleButton(),super.dispose()}}fD.register("RectangularStickyToggleButton",Zz);fD.register("BooleanRectangularStickyToggleButton",class extends Zz{constructor(e,t){super(e,!1,!0,t)}});class Jz extends wz{constructor(e,t,i,n){const r=Vo()({soundPlayer:Gq,tandem:Lm.REQUIRED,tandemNameSuffix:"Button"},n),s=new Kz(t,i,e,r),a=new Qz(s);super(s,a,r);const o=()=>r.soundPlayer.play();s.produceSoundEmitter.addListener(o);const l=t=>this.setPDOMAttribute("aria-pressed",e.value===i);e.link(l),this.disposeRoundStickyToggleButton=()=>{e.unlink(l),s.produceSoundEmitter.removeListener(o),s.dispose()}}dispose(){this.disposeRoundStickyToggleButton(),super.dispose()}}fD.register("RoundStickyToggleButton",Jz);fD.register("BooleanRoundStickyToggleButton",class extends Jz{constructor(e,t){super(e,!1,!0,t)}});const $z={up:0,down:Math.PI,left:-Math.PI/2,right:Math.PI/2};class eU extends eY{constructor(e){const t=Vo()({arrowDirection:"up",arrowSize:new My(20,7),arrowPathOptions:{stroke:"black",lineWidth:3,lineCap:"round"},baseColor:"rgba( 200, 200, 200, 0.5 )",buttonAppearanceStrategy:Kq.FlatAppearanceStrategy,cornerRadius:4},e);let i=null;void 0===t.stroke&&(i=new DA(t.baseColor,{luminanceFactor:-.8}),t.stroke=i);let n=(new Ip).moveTo(0,0).lineTo(t.arrowSize.width/2,-t.arrowSize.height).lineTo(t.arrowSize.width,0);n=n.transformed(Mh.rotation2($z[t.arrowDirection])),t.content=new aA(n,t.arrowPathOptions);const r=t.arrowDirection,s=t.cornerRadius;if(t.leftTopCornerRadius="up"===r||"left"===r?s:0,t.rightTopCornerRadius="up"===r||"right"===r?s:0,t.leftBottomCornerRadius="down"===r||"left"===r?s:0,t.rightBottomCornerRadius="down"===r||"right"===r?s:0,"up"===r||"down"===r){const e=t.mouseAreaYDilation/2||0,i=t.touchAreaYDilation/2||0;t.mouseAreaYDilation=e,t.touchAreaYDilation=i,t.mouseAreaYShift="up"===r?-e:e,t.touchAreaYShift="up"===r?-i:i}else{const e=t.mouseAreaXDilation/2||0,i=t.touchAreaXDilation/2||0;t.mouseAreaXDilation=e,t.touchAreaXDilation=i,t.mouseAreaXShift="left"===r?-e:e,t.touchAreaXShift="left"===r?-i:i}super(t),this.customStrokeProperty=i}dispose(){this.customStrokeProperty&&this.customStrokeProperty.dispose(),super.dispose()}}fD.register("CarouselButton",eU);class tU extends Ib{constructor(e){super([e.looksOverProperty,e.looksPressedProperty],(e,t)=>e&&!t?Fq.OVER:t?Fq.PRESSED:Fq.IDLE,{valueType:Fq})}}fD.register("MomentaryButtonInteractionStateProperty",tU);class iU extends Uq{constructor(e,t,i,n){super(Vo()({tandem:Lm.REQUIRED,phetioReadOnly:Km.DEFAULT_OPTIONS.phetioReadOnly},n));const r=n=>{n?this.enabledProperty.get()&&i.set(t):i.set(e)};this.downProperty.lazyLink(r);const s=e=>{this.downProperty.set(e===t)};i.link(s),this.disposeMomentaryButtonModel=()=>{this.downProperty.unlink(r),i.unlink(s)}}dispose(){this.disposeMomentaryButtonModel(),super.dispose()}}fD.register("MomentaryButtonModel",iU);class nU extends Fl{}_defineProperty(nU,"SELECTED",new(mt=nU)),_defineProperty(nU,"DESELECTED",new mt),_defineProperty(nU,"OVER",new mt),_defineProperty(nU,"PRESSED",new mt),_defineProperty(nU,"enumeration",new Xl(mt)),fD.register("RadioButtonInteractionState",nU);class rU extends Db{constructor(e,t,i){super([e.focusedProperty,e.overProperty,e.looksOverProperty,e.looksPressedProperty,t],(e,t,n,r,s)=>{const a=s===i;return!n||r||a?(t||e)&&r?nU.PRESSED:a?nU.SELECTED:nU.DESELECTED:nU.OVER},{valueType:nU})}}fD.register("RadioButtonInteractionStateProperty",rU);fD.register("RectangularMomentaryButton",class extends Jq{constructor(e,t,i,n){const r=Vo()({tandem:Lm.REQUIRED,tandemNameSuffix:"Button"},n),s=new iU(t,i,e,r);super(s,new tU(s),r),this.disposeRectangularMomentaryButton=()=>{s.dispose()}}dispose(){this.disposeRectangularMomentaryButton(),super.dispose()}});class sU extends Jq{constructor(e,t,i){const n=Vo()({soundPlayer:null,baseColor:Xq.LIGHT_BLUE,buttonAppearanceStrategy:sU.FlatAppearanceStrategy,buttonAppearanceStrategyOptions:{overButtonOpacity:.8,overStroke:null,selectedStroke:Hg.BLACK,selectedLineWidth:1.5,selectedButtonOpacity:1,deselectedStroke:new Hg(50,50,50),deselectedLineWidth:1,deselectedButtonOpacity:.6},contentAppearanceStrategy:sU.ContentAppearanceStrategy,contentAppearanceStrategyOptions:{overContentOpacity:.8,selectedContentOpacity:1,deselectedContentOpacity:.6},tagName:"input",inputType:"radio",labelTagName:"label",containerTagName:"li",appendDescription:!0,appendLabel:!0,tandem:Lm.REQUIRED,tandemNameSuffix:"Button",phetioReadOnly:Km.DEFAULT_OPTIONS.phetioReadOnly},i),r=new Uq({enabledPropertyOptions:n.enabledPropertyOptions,tandem:n.tandem,phetioEnabledPropertyInstrumented:n.phetioEnabledPropertyInstrumented}),s=new rU(r,e,t);super(r,s,n),this.interactionStateProperty=s,e.value===t&&this.setPDOMAttribute("checked","checked");const a=e=>{this.pdomChecked=e===t};e.link(a),this.property=e,this.value=t,this.firedEmitter=new hb({tandem:n.tandem.createTandem("firedEmitter"),phetioDocumentation:"Emits when the radio button is pressed",phetioReadOnly:n.phetioReadOnly,phetioEventType:vm.USER}),this.firedEmitter.addListener(()=>e.set(t)),r.downProperty.link(e=>{e||!r.overProperty.get()&&!r.focusedProperty.get()||r.interrupted||(this.fire(),this.voicingSpeakFullResponse({hintResponse:null}))});const o=n.soundPlayer||Gq,l=()=>{o.play()};r.produceSoundEmitter.addListener(l),this.disposeRectangularRadioButton=()=>{e.unlink(a),this.firedEmitter.dispose(),r.produceSoundEmitter.removeListener(l),r.dispose(),this.interactionStateProperty.dispose()}}dispose(){this.disposeRectangularRadioButton(),super.dispose()}fire(){this.buttonModel.enabledProperty.get()&&(this.firedEmitter.emit(),this.buttonModel.produceSoundEmitter.emit())}}_defineProperty(sU,"TANDEM_NAME_SUFFIX","RadioButton"),_defineProperty(sU,"FlatAppearanceStrategy",class{constructor(e,t,i,n){const r=Vo()({stroke:i,lineWidth:1,deselectedButtonOpacity:1,deselectedLineWidth:1,deselectedStroke:"gray",overButtonOpacity:.8,overFill:null,overLineWidth:0,overStroke:null,selectedButtonOpacity:1,selectedLineWidth:1,selectedStroke:"black"},n),s=new DA(i,{luminanceFactor:-.4}),a=new DA(r.overFill||i,{luminanceFactor:n&&n.overFill?0:.4}),o=new DA(r.overStroke||r.deselectedStroke,{luminanceFactor:n&&n.overStroke?0:-.4});function l(t){switch(t){case nU.SELECTED:e.fill=i,e.stroke=r.selectedStroke,e.lineWidth=r.selectedLineWidth,e.opacity=r.selectedButtonOpacity;break;case nU.DESELECTED:e.fill=i,e.stroke=r.deselectedStroke,e.lineWidth=r.deselectedLineWidth,e.opacity=r.deselectedButtonOpacity;break;case nU.OVER:e.fill=a,e.stroke=o,e.lineWidth=Math.max(r.overLineWidth,r.deselectedLineWidth),e.opacity=r.overButtonOpacity;break;case nU.PRESSED:e.fill=s,e.stroke=r.deselectedStroke,e.lineWidth=r.deselectedLineWidth,e.opacity=r.selectedButtonOpacity;break;default:throw new Error("unsupported interactionState: "+t)}}this.maxLineWidth=Math.max(r.selectedLineWidth,r.deselectedLineWidth,r.overLineWidth),e.cachedPaints=[i,a,s,o,r.selectedStroke,r.deselectedStroke],t.link(l),this.disposeFlatAppearanceStrategy=()=>{t.hasListener(l)&&t.unlink(l),o.dispose(),a.dispose(),s.dispose()}}dispose(){this.disposeFlatAppearanceStrategy()}}),_defineProperty(sU,"ContentAppearanceStrategy",class{constructor(e,t,i){const n=Vo()({deselectedContentOpacity:1,overContentOpacity:1,selectedContentOpacity:1},i);function r(t){if(null!==e)switch(t){case nU.DESELECTED:e.opacity=n.deselectedContentOpacity;break;case nU.OVER:e.opacity=n.overContentOpacity;break;case nU.SELECTED:e.opacity=n.selectedContentOpacity;break;case nU.PRESSED:e.opacity=n.deselectedContentOpacity;break;default:throw new Error("unsupported state: "+t)}}t.link(r),this.disposeContentAppearanceStrategy=()=>{t.hasListener(r)&&t.unlink(r)}}dispose(){this.disposeContentAppearanceStrategy()}}),fD.register("RectangularRadioButton",sU);let aU=0;fD.register("RectangularRadioButtonGroup",class extends Hw{constructor(e,t,i){const n=Vo()({soundPlayers:null,labelAlign:"bottom",labelSpacing:0,a11yHighlightXDilation:0,a11yHighlightYDilation:0,touchAreaXDilation:0,touchAreaYDilation:0,mouseAreaXDilation:0,mouseAreaYDilation:0,radioButtonOptions:{baseColor:Xq.LIGHT_BLUE,cornerRadius:4,xMargin:5,yMargin:5,xAlign:"center",yAlign:"center",buttonAppearanceStrategyOptions:{selectedStroke:"black",selectedLineWidth:1.5,selectedButtonOpacity:1,deselectedStroke:new Hg(50,50,50),deselectedLineWidth:1,deselectedButtonOpacity:.6,overButtonOpacity:.8},contentAppearanceStrategy:sU.ContentAppearanceStrategy,contentAppearanceStrategyOptions:{overContentOpacity:.8,selectedContentOpacity:1,deselectedContentOpacity:.6}},spacing:10,orientation:"vertical",disabledOpacity:Bg.DISABLED_OPACITY,tandem:Lm.REQUIRED,tandemNameSuffix:"ButtonGroup",visiblePropertyOptions:{phetioFeatured:!0},phetioEnabledPropertyInstrumented:!0,phetioFeatured:!0,tagName:"ul",labelTagName:"h3",ariaRole:"radiogroup",groupFocusHighlight:!0},i);aU++;const r=new Map,s=Math.max(n.radioButtonOptions.buttonAppearanceStrategyOptions.selectedLineWidth,n.radioButtonOptions.buttonAppearanceStrategyOptions.deselectedLineWidth),a=tq(t,n.tandem),o=_.maxBy(a,e=>e.width).width,l=_.maxBy(a,e=>e.height).height,h=[],u=[],c=[],d=n.radioButtonOptions.xMargin,p=n.radioButtonOptions.yMargin;for(let y=0;y<t.length;y++){const i=t[y],m=No({content:a[y],minWidth:o+2*d,minHeight:l+2*p,soundPlayer:n.soundPlayers?n.soundPlayers[y]:JO.getSelectionSoundPlayer(y),tandem:i.tandemName?n.tandem.createTandem(i.tandemName):n.tandem===Lm.OPT_OUT?Lm.OPT_OUT:Lm.REQUIRED,phetioDocumentation:i.phetioDocumentation||""},n.radioButtonOptions,i.options);i.labelContent&&(m.labelContent=i.labelContent,m.voicingNameResponse=i.labelContent),i.descriptionContent&&(m.descriptionContent=i.descriptionContent),i.voicingContextResponse&&(m.voicingContextResponse=i.voicingContextResponse);const g=new sU(e,i.value,m);r.set(i.value,g),g.setPDOMAttribute("name","RectangularRadioButtonGroup"+aU);const f=new xA(0,0,s+o+2*d,s+l+2*p,{fill:"rgba(0,0,0,0)",center:g.center});let E;if(g.addChild(f),i.label){const e=i.label,t="bottom"===n.labelAlign||"top"===n.labelAlign?"vertical":"horizontal",r="left"===n.labelAlign||"top"===n.labelAlign?[e,g]:[g,e];E=new Hw({children:r,spacing:n.labelSpacing,orientation:t}),e.pickable=!1,n.radioButtonOptions.contentAppearanceStrategy&&c.push(new n.radioButtonOptions.contentAppearanceStrategy(e,g.interactionStateProperty,n.radioButtonOptions.contentAppearanceStrategyOptions))}else E=g;h.push(E),u.push({radioButton:g,layoutNode:E})}n.children=h;const m=_.maxBy(u,e=>e.layoutNode.width).layoutNode.width,g=_.maxBy(u,e=>e.layoutNode.height).layoutNode.height;u.forEach(e=>{e.radioButton.touchArea=Ip.rectangle(-n.touchAreaXDilation-s/2,-n.touchAreaYDilation-s/2,m+2*n.touchAreaXDilation,g+2*n.touchAreaYDilation),e.radioButton.mouseArea=Ip.rectangle(-n.mouseAreaXDilation-s/2,-n.mouseAreaYDilation-s/2,m+2*n.mouseAreaXDilation,g+2*n.mouseAreaYDilation);const t=KS.getDilationCoefficient(e.layoutNode);e.radioButton.focusHighlight=Ip.rectangle(-n.a11yHighlightXDilation-s/2-t,-n.a11yHighlightYDilation-s/2-t,m+2*(n.a11yHighlightXDilation+t),g+2*(n.a11yHighlightYDilation+t))}),super(n),this.radioButtonMap=r,this.addAriaLabelledbyAssociation({thisElementName:C_.PRIMARY_SIBLING,otherNode:this,otherElementName:C_.LABEL_SIBLING});const f={keydown:e=>e.pointer.reserveForKeyboardDrag()};this.addInputListener(f),this.addLinkedElement(e,{tandemName:"property"}),this.disposeRadioButtonGroup=()=>{this.removeInputListener(f),h.forEach(e=>e.dispose()),c.forEach(e=>e.dispose&&e.dispose()),a.forEach(e=>e.dispose())}}getButtonForValue(e){const t=this.radioButtonMap.get(e);return t}dispose(){this.radioButtonMap.clear(),this.disposeRadioButtonGroup(),super.dispose()}});fD.register("RoundMomentaryButton",class extends wz{constructor(e,t,i,n){const r=Vo()({tandem:Lm.REQUIRED,tandemNameSuffix:"Button"},n),s=new iU(t,i,e,r);super(s,new tU(s),r),this.disposeRoundMomentaryButton=()=>{s.dispose()}}dispose(){this.disposeRoundMomentaryButton(),super.dispose()}});fD.register("RoundPushButton",class extends wz{constructor(e){const t=Vo()({soundPlayer:Gq,tandem:Lm.REQUIRED,tandemNameSuffix:"Button"},e),i=t.listener,n=_.omit(t,["listener"]),r=new Wq(n);super(r,new zq(r),n),this.pushButtonModel=r,i&&this.addListener(i);const s=()=>{t.soundPlayer.play()};r.produceSoundEmitter.addListener(s),this.disposeRoundPushButton=()=>{r.produceSoundEmitter.removeListener(s),r.dispose()}}dispose(){super.dispose(),this.disposeRoundPushButton()}addListener(e){this.pushButtonModel.addListener(e)}removeListener(e){this.pushButtonModel.removeListener(e)}});const oU="data:audio/mpeg;base64,//swxAAAA8ADNZQRgDGHni23MIAC1bbaiNgdgM+wEHBiogUAbxA4MT+////gh//8Mf4YzNI0kYiNYjDZaLJCYAZZgbhKQTNx5Vp34WpSu/bhLvzLYwWSHokUhx0EBR4FA/Mp8sOz3gcWfL9YqH7kKIkzd9fLvSkB201St7337UyHKf7X9Pf//Ue9/6irjy/l3s5gqCo1lPVlVSBj//syxAOACFB7hZyUgDEUCu008ZpKfZq0pMq3UhCDwXYfD+n5X+IUp5YiEYMB0CgRCwfQF0AmAUjAlZVJuE4ZaTbKK0AIJCxUAwrWLf////l1oFP9Yo2m1QI89G8bsISUXc8TjPs5pDlVUzUq1VJLFYcIlvdQS0P1lohZFx5hFpVDCPaSKlRsdgIslDzfeqxt8iVd+v6aClA3ydRso//7MsQDgAhYV13sGEqhEJFpcZMJqE0gGS8ZU3ekWmMRbO4kqZnMgAHAFiPmBRdQFgRZHZrTNwZcRTYLKU4qxy3ieKohBwSNif5UwYc4W/ywiEYAtIWoggTByJ+YPcFxgdYE5MVlD41ZJSYBdPF8gQIZtZPy/cZWxBR5Bm7WwZdGkolTRTQXLpSOcoUvf3in/dyBZwzRXAF3ieJEAxD/+zLEBAAIkJlXlYaAARIWb3MegACpLHqwdgk0mfJ913UT0LiL5W+nIh+DsKATQJ4F0E4PF8c7FxaaaCZ80SpqZbfX7J/99fN0p/Onf+zSaVmKSAKAgKAgMAAAAAEBCVMt4sfsyRdHO3PTH0SBFi4jhEgNBinEXeeDSKeby9zBMKun3/pKZ6L//H/6T/p/82bkkAyj/5m7WOWuRFpI//swxAOACDgvi7zDADEQkW289AoWMABHxkZCUEwfjodDiYmpiWw9NWjIAhJEFkFSo4GnxwiDsrBoGn/g0DT64Kgq9BUFQWBo3WFDf4B//ljZRUwaFSyREkApYqDmkM8qYgtylZx9ZL7knEF4rFKLgqfa4GHahJbD5q+ZdeybNpd1LOzqJVWdmJgs9uNUoK61I9Pf1runDP5da2kA//syxAQACHita6eYTzEMFSdkzAigHGL2uEMDLL6xtFmUuujunUP9ODzjFKbt2J5yt77uOmiJWXQ6GAbIjvu17WVn/dDEccwhLJLW6dXU/dcsEAvP8BAST22Qg8WJEX2Cxxs84/BnOt15rGZwVs2FEtKWVPRHZitdbuySkumtHlb0M/U5QwcQRYSLI91T/epbUqPPogEGy4Ldq0ABj//7MsQEgAfcrTesFG1owIRiqMyYmD9U8MBcisSsURTFgBykNZkSUjL+oDB8VGCT310AYfb2ZlVRgEvbASNp8ptD8y7lYYlvxtFsCgAAYAQABAzjzrwIrmT2cuLIZOOOhHHQELC2rOtlix709VXnYiej4dx2rz2Vd/xL6QQAAHCikADAVHicCJrfesiRcXCNaoKuuneW+r1dXxFDvZf/+zLEEQBFcCEJoLHi8JuFVvDMGGz/vqeWI50KHuGnJHLWAAQIl4qgkpSn8oGq1rUCoSk3UAhEYtCgKWWwwIDo////4sLVTEFNRTMuOTkuNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",lU=aO(cO,oU),hU=JD.createLock(oU),uU=new hO;let cU=!1;const dU=()=>{cU||(hU(),cU=!0)},pU=cO.decodeAudioData(lU.buffer,e=>{null===uU.audioBufferProperty.value&&(uU.audioBufferProperty.set(e),dU())},e=>{console.warn("decode of audio data failed, using stubbed sound, error: "+e),uU.audioBufferProperty.set(cO.createBuffer(1,1,cO.sampleRate)),dU()});pU&&pU.then(e=>{null===uU.audioBufferProperty.value&&(uU.audioBufferProperty.set(e),dU())}).catch(e=>{console.warn("promise rejection caught for audio decode, error = "+e),dU()});const mU=new gq(uU,{soundClipOptions:{initialOutputLevel:.2},soundManagerOptions:{categoryName:"user-interface"}});oO.register("switchToLeftSoundPlayer",mU);const gU=mU,fU="data:audio/mpeg;base64,//swxAAABQQDHVQRABFbki33MLACAFiANEhrgagQWfE6eUcJxwPv5wuD/ynh/aXfLvD/9HlwfD//EEEPD7ZhOAkFSjlaqEIiQQAEs4eiJWJc1P1YWHlShsUzcufWA094Hx1uq0G20l0OwMrP+XF59gcKx8JP77pO3m998s/Yw/nLVXnrrpQBsXJUFMLEnmlFmN/yDRSkA2wbEgAA//syxAQACKRzd7zHgAkGB+81hgxyg9V/KSvjePEM6MTwDABAfIScR33O56q5d4xqkH7v3jiaZMD6kY9sjxrY2dnb1HHfvNR/kWIABj/dYQ11+H0jIKJAJJKoO2kaXeWiJIkiSIKkCp6SSSRawEonOLl37VSoUBXLB1R4RArEQNHoKne/wVBU9wWDv4KhL8s9QNP/QiqohANaOyIgAP/7MsQEgAhwYVvmPMihFovqvMwtRAH6Ae14cRCJA0gkI0l3oAaVhTxL2UFGwRUl00mkOm7spnrNztCVjBca9pe1ZAAImV6HsdkkYbqCJBixaWQQZZKZsggAaovjuRz0ay4sAStsBa8qCRLYzJqRvdo6N8kxL5ulvc1t68seeejKSpp09k0Niw9j0xU7cwYDINIb9ZH0VZtohLZJIkj/+zLEA4AIWItlrCBPcRURrbawIAYAJxeV16k/ZdmXyuGXKtUDPLTyWvc8HhHuEmbDWxZs3a26Jzoe0n+dLpP9moqDULbjgomp6BR7tp47Kkb/Yy7HHGiQALQa4vBYdia742/8Tg6Ha/Yveot5iAggAUDAwPPgRG2IQAAAAjEAwP1yvoQIToEAAAQ5YPg+BwcOf+D4PhgAJtta7sOB//swxAOACHRxgbj0gAENjex3sIAAQAgIBAQABwvF95I9BqsaLjRfG8H8voXioPoFOTnP5fr6BAbTCiaJqU//xNPUyOwkrvuV+H0skfwwkh/8uGgaN7U4ykgBI0Wl0NRp9iTTuOtTP3h74fLq2RJI5YD4IhSIZoj1X1UVJEZr6+eMZdiQADi2WsYqaj6u1HKNo9Ta1BZ2GWfu2RpE//syxAOAyERfc6ekbHEFiy24x5gugCwNDM0QkIOIpArkSBqEiqI+lT4jPXA6p0BJyc7A/ueQIEDN8GVxZ0NRU6hwZWZ+u0vmJAcZH1s/fvWToCKjwqgrRCT5TA2SpWReMQaRbtiwvwoHGQwVTzCMlEnyNn9u7MLAVgshUNiq2C20CCygTEZw56WOpYszR3GtXoW6ht/2WRFEABIUbP/7MsQFgAjAk2OsvQGxFRLo9YYU3I5XmAGmX2GjdKVSyEyfEei2W4xByQeX12Jv+JSUCUNe3dQcxD//+rd/xZysTZIrIiZR7qJWtsem773JLgTX0uaaZAEhq87YWCLAk2QPRDsijCdQMyTfTUASGYWdhh0rvEmDrF/obq13lSbEnO6iu0XtJAY0AlnTooDLWLYz1nXalTIJHLdbYmT/+zLEA4AHVLVPoTyjMJ8D5egwvAIAa4iOYBvORuqckKIjmT0f3wGoJDpymlsoq0IgUcZlalKJoqD63behXSb3dH1aMG7tj51oii6lBlJ0AStbgiTFQn40KM3C3KpNO+tnib+WCg+IpL/ez9P/2v9tCgACxBbaTwBY2euQgIjICwBbIKp9DCz6zvsneDLl1hU6BTvZ5Wj+z/wVV9QI//swxBYABVwfGUM8wlB8giG0EIgOCIelakAcALdhRIwrRYRkcReWf6vb///KypL96vYV11222AVLFlA4Q0hOHgNAKIBOJRUqoJdlVUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//syxDSDwxQk0ISZIHgAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ==",yU=aO(cO,fU),EU=JD.createLock(fU),vU=new hO;let AU=!1;const bU=()=>{AU||(EU(),AU=!0)},SU=cO.decodeAudioData(yU.buffer,e=>{null===vU.audioBufferProperty.value&&(vU.audioBufferProperty.set(e),bU())},e=>{console.warn("decode of audio data failed, using stubbed sound, error: "+e),vU.audioBufferProperty.set(cO.createBuffer(1,1,cO.sampleRate)),bU()});SU&&SU.then(e=>{null===vU.audioBufferProperty.value&&(vU.audioBufferProperty.set(e),bU())}).catch(e=>{console.warn("promise rejection caught for audio decode, error = "+e),bU()});const _U=new gq(vU,{soundClipOptions:{initialOutputLevel:.2},soundManagerOptions:{categoryName:"user-interface"}});oO.register("switchToRightSoundPlayer",_U);const xU=_U,wU=new My(60,30);class TU extends(DS(cv)){constructor(e,t,i,n){const r=Vo()({size:wU,toggleWhileDragging:null,dragThreshold:3,toggleThreshold:1,thumbFill:null,thumbStroke:"black",thumbTouchAreaXDilation:8,thumbTouchAreaYDilation:8,thumbMouseAreaXDilation:0,thumbMouseAreaYDilation:0,trackFillLeft:null,trackFillRight:null,trackStroke:"black",cursor:"pointer",disabledOpacity:Bg.DISABLED_OPACITY,switchToLeftSoundPlayer:gU,switchToRightSoundPlayer:xU,tandem:Lm.REQUIRED,tandemNameSuffix:"Switch",phetioEventType:vm.USER,phetioReadOnly:Km.DEFAULT_OPTIONS.phetioReadOnly,visiblePropertyOptions:{phetioFeatured:!0},phetioEnabledPropertyInstrumented:!0,phetioFeatured:!0,tagName:"button",ariaRole:"switch",a11yName:null,leftValueContextResponse:null,rightValueContextResponse:null},n);let s=null;r.trackFillLeft&&r.trackFillRight||(s=new mE(0,0,0,r.size.height).addColorStop(0,"rgb( 40, 40, 40 )").addColorStop(1,"rgb( 200, 200, 200 )")),r.trackFillLeft=r.trackFillLeft||s,r.trackFillRight=r.trackFillRight||s,r.thumbFill=r.thumbFill||new mE(0,0,0,r.size.height).addColorStop(0,"white").addColorStop(1,"rgb( 200, 200, 200 )"),r.a11yName&&(r.voicingNameResponse=r.a11yName,r.innerContent=r.a11yName),super(),_defineProperty(this,"onInputEmitter",new hb);const a=r.size.height/2,o=new xA(0,0,r.size.width,r.size.height,a,a,{stroke:r.trackStroke,fill:r.trackFillLeft});this.addChild(o);const l=new xA(0,0,r.size.width,r.size.height,a,a,{stroke:r.trackStroke,fill:r.trackFillRight});this.addChild(l);const h=new xA(0,0,.5*r.size.width,r.size.height,a,a,{fill:r.thumbFill,stroke:r.thumbStroke});this.addChild(h),(r.thumbTouchAreaXDilation||r.thumbTouchAreaYDilation)&&(h.touchArea=Ip.roundRect(-r.thumbTouchAreaXDilation,-r.thumbTouchAreaYDilation,.5*r.size.width+2*r.thumbTouchAreaXDilation,r.size.height+2*r.thumbTouchAreaYDilation,a,a)),(r.thumbMouseAreaXDilation||r.thumbMouseAreaYDilation)&&(h.mouseArea=Ip.roundRect(-r.thumbMouseAreaXDilation,-r.thumbMouseAreaYDilation,.5*r.size.width+2*r.thumbMouseAreaXDilation,r.size.height+2*r.thumbMouseAreaYDilation,a,a));const u=e=>{const i=o.lineWidth/2;e===t?h.left=-i:h.right=r.size.width+i,l.rectWidth=h.right-i,this.setPDOMAttribute("aria-pressed",e!==t),this.setPDOMAttribute("aria-checked",e!==t)};e.link(u);const c=r.dragThreshold*r.dragThreshold,d=new al(0,0);let p=!1;const m=new yb(t=>{e.value=t,this.onInputEmitter.emit()},{parameters:[{validValues:[t,i],phetioPrivate:!0}],tandem:r.tandem.createTandem("toggleAction"),phetioDocumentation:"Occurs when the switch is toggled via user interaction",phetioReadOnly:r.phetioReadOnly,phetioEventType:vm.USER});this.onInputEmitter.addListener(()=>{e.value===t?r.switchToLeftSoundPlayer.play():r.switchToRightSoundPlayer.play();const n=e.value===i?r.rightValueContextResponse:r.leftValueContextResponse;n&&(this.alertDescriptionUtterance(n),this.voicingSpeakResponse({contextResponse:lS.alertableToText(n)}))});const g=()=>h.centerX<o.centerX?t:i,f=new xx({tandem:r.tandem.createTandem("dragListener"),canStartPress:e=>!e||"move"!==e.type&&"enter"!==e.type||_.includes(e.trail.nodes,h),start:()=>{d.setXY(0,0),p=!1},drag:(t,i)=>{d.add(i.modelDelta),p=p||d.magnitudeSquared>c;const n=i.getCurrentTarget().globalToLocalPoint(t.pointer.point),s=h.width/2,a=o.lineWidth/2;h.centerX=fl.clamp(n.x,s-a,r.size.width-s+a),l.rectWidth=h.right-a;const u=n.x<(1-2*r.toggleThreshold)*s||n.x>(2*r.toggleThreshold-1)*s+r.size.width,f=g();(!0===r.toggleWhileDragging||u&&null===r.toggleWhileDragging)&&e.value!==f&&m.execute(f)},end:()=>{const n=e.value===t?i:t,r=p?g():n;e.value!==r&&m.execute(r),u(r)},canClick:!0});this.addInputListener(f),this.mutate(r),this.addLinkedElement(e,{tandemName:"property"}),this.switchToLeftSoundPlayer=r.switchToLeftSoundPlayer,this.switchToRightSoundPlayer=r.switchToRightSoundPlayer,this.disposeToggleSwitch=()=>{o.dispose(),l.dispose(),e.unlink(u),m.dispose(),f.dispose(),this.onInputEmitter.dispose()}}dispose(){this.disposeToggleSwitch(),super.dispose()}}fD.register("ToggleSwitch",TU);const PU=(e,t)=>{e.opacity=t?1:Bg.DISABLED_OPACITY};fD.register("ABSwitch",class extends sT{constructor(e,t,i,n,r,s){const a=Vo()({toggleSwitchOptions:{enabledPropertyOptions:{phetioFeatured:!1}},setLabelEnabled:PU,centerOnSwitch:!1,cursor:"pointer",disabledOpacity:Bg.DISABLED_OPACITY,spacing:8,tandem:Lm.REQUIRED,tandemNameSuffix:"Switch",visiblePropertyOptions:{phetioFeatured:!0},phetioEnabledPropertyInstrumented:!0},s),o=new TU(e,t,n,No({tandem:a.tandem.createTandem("toggleSwitch")},a.toggleSwitchOptions));let l=i,h=r;if(a.centerOnSwitch){const e=new rT;l=new eT(i,{group:e,xAlign:"right"}),h=new eT(r,{group:e,xAlign:"left"})}a.children=[l,o,h],super(a),_defineProperty(this,"onInputEmitter",new hb),this.property=e,this.valueA=t,this.valueB=n,this.labelA=i,this.labelB=r,this.toggleSwitch=o,this.setLabelEnabled=a.setLabelEnabled;const u=()=>this.updateLabelsEnabled();e.link(u);const c=new Ax({release:()=>{const i=e.value;e.value=t,i!==t&&this.onInputEmitter.emit()},tandem:i.tandem.createTandem("pressListener")});i.addInputListener(c);const d=new Ax({release:()=>{const t=e.value;e.value=n,t!==n&&this.onInputEmitter.emit()},tandem:r.tandem.createTandem("pressListener")});r.addInputListener(d),o.onInputEmitter.addListener(()=>this.onInputEmitter.emit()),this.onInputEmitter.addListener(()=>{e.value===n&&o.switchToRightSoundPlayer.play(),e.value===t&&o.switchToLeftSoundPlayer.play()}),this.disposeABSwitch=()=>{e.unlink(u),o.dispose(),this.onInputEmitter.dispose(),i.removeInputListener(c),r.removeInputListener(d),c.dispose(),d.dispose()}}dispose(){this.disposeABSwitch(),super.dispose()}onEnabledPropertyChange(e){!e&&this.interruptSubtreeInput(),this.inputEnabled=e,this.toggleSwitch.enabled=e,this.updateLabelsEnabled()}updateLabelsEnabled(){this.setLabelEnabled(this.labelA,this.enabled&&this.property.value===this.valueA),this.setLabelEnabled(this.labelB,this.enabled&&this.property.value===this.valueB)}});const CU="data:audio/mpeg;base64,//swxAAABSAbF7TAgDE5nqu/MHICAAAAcDYkDIEtmZ+0OAIDonAEAIOjgnenW/yhz/g+fh+CEocif//+c5RVQlRIdHdXcHffj/DYYCgBdaS6OzOU+xCNTd7EPI6nQ7mODNUkXlljx1AXgvbsgTi8z3+Z7a8aMfHP9uQFmXb1f/cmZM/9//sIhYP//sNqQJAgNJhWTyGAwFAoAATS//syxAeACW0Hgbi1EBESBuvjNGAAfDtZrw0MQaBPJj2MwQyJDLEhJZGoPjAvCMnP3dlJiAtJ8xr/PKk5hYV//3KDxif//6MYVcnt//+VFswo04EQAACAAC9YdezBqNoZHHQDlUSCuyZAkxazLI1qAeiR+JfccaBj1xti9B5JXrESzzBnSIgoXKxEzkQCos+pbPmxfwWXkwAAFm+93//7MsQDgAh4Z1G5gwABEY3y9x5iAuzlQAAAAAB2Wop4QsaAhgpWdRTKJsZcpp1XP57ykSikyYckLZ4Ty1TSs+HageepBZpVjXhgAMSIXXKmU65I0d/7dt7v7sNgMBwALVb09GkvHVk7fqBciIEitH44DchaeFCkbZVn3vi+3iz997uspO3MNCwv4nKHDdB/+gTro/8WA6oYAgMAeW//+zLEAwAIZH9bHaGAAQMgrTTxid9Ko07zWxQmamYZMUXJVhdXnyiL/VNVCqJJVOgImNStCjd9bH2ZjwZ/qQYUyG79QVWCpgKmMChqVd/4VIkkywFXa2uRpIAhLLU5m1VG6LimpHOKzIapjKZdQGJoCUbq7bMoVyt+j5W6t+WZ/r/KqPLMbv1Kxurf//8tBTuFZBUABV3GwiMDZuFj//swxAUCB4SDK0ywaICeAyN0wyROlYmGu6/rSDZ4E2kDhIFxZeHE1XJXBGqqqgLGqsZQ8m6ArsXr1fUvL1lChr+v/7fq//SC5HLZU2AEjwW0VUCig+dQNmTNmsUQ+tQt+EhX+skFfU3+n+u7/hV6TEFNRTMuOTkuNaqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",VU=aO(cO,CU),RU=JD.createLock(CU),NU=new hO;let MU=!1;const kU=()=>{MU||(RU(),MU=!0)},LU=cO.decodeAudioData(VU.buffer,e=>{null===NU.audioBufferProperty.value&&(NU.audioBufferProperty.set(e),kU())},e=>{console.warn("decode of audio data failed, using stubbed sound, error: "+e),NU.audioBufferProperty.set(cO.createBuffer(1,1,cO.sampleRate)),kU()});LU&&LU.then(e=>{null===NU.audioBufferProperty.value&&(NU.audioBufferProperty.set(e),kU())}).catch(e=>{console.warn("promise rejection caught for audio decode, error = "+e),kU()});const IU=new gq(NU,{soundClipOptions:{initialOutputLevel:.5},soundManagerOptions:{categoryName:"user-interface"}});oO.register("accordionBoxClosedSoundPlayer",IU);const BU=IU,DU="data:audio/mpeg;base64,//swxAAABsArNnTzABEnmTA3HoACAAIOAYznNNVnYDYAWAjClBSA3BwKB48VkSUAABBynBhYP5QMCc+T4JnwQcoH/6gff/Of/l4gAIJkjluslkskluuAAAkTmCV7K1w6pqz7VkryDnmQVVFCJY0HRFDgrNPT7QRsUHNV+KVNJRPtYt0/426/nj/Tv/sPVjjhtrzPbywAATqIdRsL//syxAOACHStW/2RACEMj6e2smAEqYAYhGmdJfGbQRJM6d5rUVhcXmZTOP9blIoBChWlL5hQoqBgpUdHqJ/1McBGpaGctDO3++hgIUqDV8QgqAAntdpnEwAD6ruLLBhIIEPkpGtP5xWnwVF2czcptv1Fgk0VRRGN9VJRU46pQrSVRX///853QKKZ0dz3cGnwCKBwcHYEIC0hEM5EMv/7MsQEAAiQXW+5hIAREZRslzKwACEMBgAAD9/MyuFW/l8vMAkS99TuX45zufo9JjH/gbUAtafz/MqCaqJP4IIAARGcawPpR8H3iefS7zg45qAIBFAAV1AtJXsx44xwqAZ24lKIsEc5bDMUuS6XnBEXQqAakxM3KX8vlruv28Pc++21X/p71t0ufET/PUOSB+v8FT3Fl3GALLrbdbr/+zLEA4AIWHtvuPWAEROSLXcegALRIIBAAAAIpME09Jpkm6HEpcYWjTFeQLCjn4NAjRM5fbfr4UULuXdO+HtlGqi0a/9EFQ66zxGCz/4GGlyg0HFHJZM7ZIAwEAAAErGUoi0JXI6UF+hiurPpjdxalUIbk1pRYWEUpY39w/BVt/p1i48ySduL+KRKEg8sPo/yoV/yLlIIpJIQSCOJ//swxAODxLAbO7xggDAAADSAAAAEweQCRznEiWHEqW49z3nuJf8Fbqzvw1+e6j3TPf/BakxBTUUzLjk5LjWqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",OU=aO(cO,DU),qU=JD.createLock(DU),YU=new hO;let HU=!1;const GU=()=>{HU||(qU(),HU=!0)},FU=cO.decodeAudioData(OU.buffer,e=>{null===YU.audioBufferProperty.value&&(YU.audioBufferProperty.set(e),GU())},e=>{console.warn("decode of audio data failed, using stubbed sound, error: "+e),YU.audioBufferProperty.set(cO.createBuffer(1,1,cO.sampleRate)),GU()});FU&&FU.then(e=>{null===YU.audioBufferProperty.value&&(YU.audioBufferProperty.set(e),GU())}).catch(e=>{console.warn("promise rejection caught for audio decode, error = "+e),GU()});const zU=new gq(YU,{soundClipOptions:{initialOutputLevel:.5},soundManagerOptions:{categoryName:"user-interface"}});oO.register("accordionBoxOpenedSoundPlayer",zU);const UU=zU;class WU extends(Iv(cv)){constructor(e,t){const i=Vo()({titleNode:null,expandedProperty:null,resize:!0,overrideTitleNodePickable:!0,allowContentToOverlapTitle:!1,cursor:"pointer",lineWidth:1,cornerRadius:10,stroke:"black",fill:"rgb( 238, 238, 238 )",minWidth:0,titleAlignX:"center",titleAlignY:"center",titleXMargin:10,titleYMargin:2,titleXSpacing:5,showTitleWhenExpanded:!0,useExpandedBoundsWhenCollapsed:!0,titleBarExpandCollapse:!0,buttonAlign:"left",buttonXMargin:4,buttonYMargin:2,contentAlign:"center",contentVerticalAlign:"center",contentXMargin:15,contentYMargin:8,contentXSpacing:5,contentYSpacing:8,expandedSoundPlayer:UU,collapsedSoundPlayer:BU,tagName:"div",headingTagName:"h3",accessibleNameBehavior:WU.ACCORDION_BOX_ACCESSIBLE_NAME_BEHAVIOR,voicingNameResponse:null,voicingObjectResponse:null,voicingContextResponse:null,voicingHintResponse:null,tandem:Lm.REQUIRED,tandemNameSuffix:"AccordionBox",phetioType:WU.AccordionBoxIO,phetioEventType:vm.USER,visiblePropertyOptions:{phetioFeatured:!0},titleBarOptions:{fill:null,stroke:null}},t);i.expandCollapseButtonOptions=No({sideLength:16,cursor:i.cursor,valueOnSoundPlayer:i.expandedSoundPlayer,valueOffSoundPlayer:i.collapsedSoundPlayer,voicingNameResponse:i.voicingNameResponse,voicingObjectResponse:i.voicingObjectResponse,voicingContextResponse:i.voicingContextResponse,voicingHintResponse:i.voicingHintResponse,tandem:i.tandem.createTandem("expandCollapseButton")},i.expandCollapseButtonOptions),super(),_defineProperty(this,"expandedBoxOutline",null),_defineProperty(this,"collapsedBoxOutline",null);let n=i.titleNode;n||(n=new gA("",{tandem:i.tandem.createTandem("titleText")}),this.disposeEmitter.addListener(()=>n.dispose())),i.overrideTitleNodePickable&&(n.pickable=!1),this.expandedProperty=i.expandedProperty,this.expandedProperty||(this.expandedProperty=new gy(!0,{tandem:i.tandem.createTandem("expandedProperty")}),this.disposeEmitter.addListener(()=>this.expandedProperty.dispose())),this.expandCollapseButton=new PY(this.expandedProperty,i.expandCollapseButtonOptions),this.disposeEmitter.addListener(()=>this.expandCollapseButton.dispose());const r={fill:i.fill,cornerRadius:i.cornerRadius};this.expandedBox=new xA(r),this.collapsedBox=new xA(r),this.expandedTitleBar=new XU(null,No({lineWidth:i.lineWidth,cursor:i.cursor},i.titleBarOptions)),this.expandedBox.addChild(this.expandedTitleBar),this.collapsedTitleBar=new jU(No({cornerRadius:i.cornerRadius,cursor:i.cursor},i.titleBarOptions)),this.collapsedBox.addChild(this.collapsedTitleBar),this.disposeEmitter.addListener(()=>{this.collapsedTitleBar.dispose(),this.expandedTitleBar.dispose()}),i.titleBarExpandCollapse?this.collapsedTitleBar.addInputListener({down:()=>{this.expandCollapseButton.isEnabled()&&(this.phetioStartEvent("expanded"),this.expandedProperty.value=!0,i.expandedSoundPlayer.play(),this.phetioEndEvent())}}):(this.expandedTitleBar.interactiveHighlight="invisible",this.collapsedTitleBar.interactiveHighlight="invisible"),i.showTitleWhenExpanded&&i.titleBarExpandCollapse&&this.expandedTitleBar.addInputListener({down:()=>{this.expandCollapseButton.isEnabled()&&(this.phetioStartEvent("collapsed"),i.collapsedSoundPlayer.play(),this.expandedProperty.value=!1,this.phetioEndEvent())}});const s=()=>{const e=this.expandCollapseButton.visible&&this.expandCollapseButton.pickable;this.collapsedTitleBar.pickable=e,this.expandedTitleBar.pickable=e};if(this.expandCollapseButton.visibleProperty.lazyLink(s),this.expandCollapseButton.pickableProperty.lazyLink(s),this.expandCollapseButton.enabledProperty.link(e=>{const t=i.titleBarExpandCollapse&&e;this.collapsedTitleBar.cursor=t&&i.cursor||null,this.expandedTitleBar.cursor=t&&i.cursor||null}),this.expandCollapseButton.setFocusHighlight(new JS(this.expandedTitleBar)),this.expandedBox.addChild(e),i.stroke){const e={stroke:i.stroke,lineWidth:i.lineWidth,cornerRadius:i.cornerRadius,pickable:!1};this.expandedBoxOutline=new xA(e),this.expandedBox.addChild(this.expandedBoxOutline),this.collapsedBoxOutline=new xA(e),this.collapsedBox.addChild(this.collapsedBoxOutline)}const a=new cv({excludeInvisibleChildrenFromBounds:!i.useExpandedBoundsWhenCollapsed});this.addChild(a);const o=new cv({tagName:"div",ariaRole:"region",pdomOrder:[e],ariaLabelledbyAssociations:[{otherNode:this.expandCollapseButton,otherElementName:C_.PRIMARY_SIBLING,thisElementName:C_.PRIMARY_SIBLING}]}),l=new cv({tagName:i.headingTagName,pdomOrder:[this.expandCollapseButton]}),h=new cv({children:[l,o]});this.addChild(h),this.constraint=new QU(this,e,a,this.expandedBox,this.collapsedBox,this.expandedTitleBar,this.collapsedTitleBar,this.expandedBoxOutline,this.collapsedBoxOutline,n,this.expandCollapseButton,i),this.constraint.updateLayout(),this.constraint.enabled=i.resize;const u=()=>{const e=this.expandedProperty.value;this.expandedBox.visible=e,this.collapsedBox.visible=!e,n.visible=e&&i.showTitleWhenExpanded||!e,h.setPDOMAttribute("aria-hidden",!e),this.expandCollapseButton.voicingSpeakFullResponse({hintResponse:null})};this.expandedProperty.link(u),this.disposeEmitter.addListener(()=>this.expandedProperty.unlink(u)),this.mutate(_.omit(i,"cursor")),this.resetAccordionBox=()=>{i.expandedProperty||this.expandedProperty.reset()}}getCollapsedBoxHeight(){const e=this.constraint.lastCollapsedBoxHeight;return e}getExpandedBoxHeight(){const e=this.constraint.lastExpandedBoxHeight;return e}reset(){this.resetAccordionBox()}}_defineProperty(WU,"AccordionBoxIO",new el("AccordionBoxIO",{valueType:WU,supertype:cv.NodeIO,events:["expanded","collapsed"]})),_defineProperty(WU,"ACCORDION_BOX_ACCESSIBLE_NAME_BEHAVIOR",(e,t,i,n)=>(n.push(()=>{e.expandCollapseButton.accessibleName=i}),t));class XU extends(Tb(aA)){}class jU extends(Tb(xA)){}class QU extends gw{constructor(e,t,i,n,r,s,a,o,l,h,u,c){super(e),_defineProperty(this,"lastCollapsedBoxHeight",null),_defineProperty(this,"lastExpandedBoxHeight",null),this.accordionBox=e,this.contentNode=t,this.containerNode=i,this.expandedBox=n,this.collapsedBox=r,this.expandedTitleBar=s,this.collapsedTitleBar=a,this.expandedBoxOutline=o,this.collapsedBoxOutline=l,this.titleNode=h,this.expandCollapseButton=u,this.options=c,this.accordionBox.localPreferredWidthProperty.lazyLink(this._updateLayoutListener),this.accordionBox.localPreferredHeightProperty.lazyLink(this._updateLayoutListener),this.accordionBox.expandedProperty.lazyLink(this._updateLayoutListener),this.addNode(t),this.addNode(h)}layout(){super.layout();const e=this.options;if(!this.accordionBox.isChildIncludedInLayout(this.contentNode))return void(this.containerNode.children=[]);this.containerNode.children=[this.expandedBox,this.collapsedBox,this.titleNode,this.expandCollapseButton];const t=this.accordionBox.expandedProperty.value||e.useExpandedBoundsWhenCollapsed,i=null===e.stroke?0:e.lineWidth,n=this.createLayoutProxy(this.contentNode),r=this.createLayoutProxy(this.titleNode),s=n.minimumWidth,a=n.minimumHeight,o=r.minimumWidth,l=Math.max(this.expandCollapseButton.height+2*e.buttonYMargin,this.titleNode.height+2*e.titleYMargin),h=e.showTitleWhenExpanded?Math.max((e.allowContentToOverlapTitle?e.contentYMargin:l+e.contentYSpacing)+a+e.contentYMargin,l):Math.max(this.expandCollapseButton.height+2*e.buttonYMargin,a+2*e.contentYMargin);let u=Math.max(e.minWidth,e.buttonXMargin+this.expandCollapseButton.width+e.titleXSpacing+o+e.titleXMargin);"center"===e.titleAlignX&&(u=Math.max(u,2*(e.buttonXMargin+this.expandCollapseButton.width+e.titleXSpacing)+o),u=Math.max(u,2*e.titleXMargin+o)),u=e.showTitleWhenExpanded?Math.max(u,s+2*e.contentXMargin):Math.max(u,this.expandCollapseButton.width+s+e.buttonXMargin+e.contentXMargin+e.contentXSpacing);const c=u+i,d=(t?h:l)+i,p=Math.max(c,this.accordionBox.localPreferredWidth||0)-i,m=Math.max(d,this.accordionBox.localPreferredHeight||0)-i;this.lastCollapsedBoxHeight=l,t&&(this.lastExpandedBoxHeight=m),this.collapsedBox.rectWidth=p,this.collapsedBox.rectHeight=l;const g=this.collapsedBox.selfBounds;if(this.collapsedTitleBar.rectWidth=p,this.collapsedTitleBar.rectHeight=l,this.collapsedBoxOutline&&(this.collapsedBoxOutline.rectWidth=p,this.collapsedBoxOutline.rectHeight=l),t){this.expandedBox.rectWidth=p,this.expandedBox.rectHeight=m;const t=this.expandedBox.selfBounds;this.expandedBoxOutline&&(this.expandedBoxOutline.rectWidth=p,this.expandedBoxOutline.rectHeight=m),this.expandedTitleBar.shape=Ip.roundedRectangleWithRadii(0,0,p,l,{topLeft:e.cornerRadius,topRight:e.cornerRadius});let i=t.left+e.contentXMargin,n=t.right-e.contentXMargin;e.showTitleWhenExpanded||("left"===e.buttonAlign?i+=this.expandCollapseButton.width+e.contentXSpacing:n-=this.expandCollapseButton.width+e.contentXSpacing);const r=n-i,s=m-(e.showTitleWhenExpanded&&!e.allowContentToOverlapTitle?l+e.contentYMargin+e.contentYSpacing:2*e.contentYMargin);xv(this.contentNode)&&null!==this.accordionBox.localPreferredWidth&&(this.contentNode.preferredWidth=r),Vv(this.contentNode)&&null!==this.accordionBox.localPreferredHeight&&(this.contentNode.preferredHeight=s),"top"===e.contentVerticalAlign?this.contentNode.top=t.bottom-e.contentYMargin-s:"bottom"===e.contentVerticalAlign?this.contentNode.bottom=t.bottom-e.contentYMargin:this.contentNode.centerY=t.bottom-e.contentYMargin-s/2,"left"===e.contentAlign?this.contentNode.left=i:"right"===e.contentAlign?this.contentNode.right=n:this.contentNode.centerX=(i+n)/2}let f=g.left+e.titleXMargin,y=g.right-e.titleXMargin;"left"===e.buttonAlign?(this.expandCollapseButton.left=g.left+e.buttonXMargin,f=this.expandCollapseButton.right+e.titleXSpacing):(this.expandCollapseButton.right=g.right-e.buttonXMargin,y=this.expandCollapseButton.left-e.titleXSpacing),xv(this.titleNode)&&(this.titleNode.preferredWidth=y-f),"left"===e.titleAlignX?this.titleNode.left=f:"right"===e.titleAlignX?this.titleNode.right=y:this.titleNode.centerX=g.centerX,"top"===e.titleAlignY?(this.expandCollapseButton.top=this.collapsedBox.top+Math.max(e.buttonYMargin,e.titleYMargin),this.titleNode.top=this.expandCollapseButton.top):(this.expandCollapseButton.centerY=this.collapsedBox.centerY,this.titleNode.centerY=this.expandCollapseButton.centerY),n.dispose(),r.dispose(),this.accordionBox.localMinimumWidth=c,this.accordionBox.localMinimumHeight=d}dispose(){this.accordionBox.localPreferredWidthProperty.unlink(this._updateLayoutListener),this.accordionBox.localPreferredHeightProperty.unlink(this._updateLayoutListener),this.accordionBox.expandedProperty.unlink(this._updateLayoutListener),super.dispose()}}fD.register("AccordionBox",WU);const KU=new bt("twixt");class ZU{constructor(e,t,i){this.value=e,this.derivative=t,this.secondDerivative=i}static polynomialEaseInValue(e,t){return Math.pow(t,e)}static polynomialEaseOutValue(e,t){return 1-Math.pow(1-t,e)}static polynomialEaseInOutValue(e,t){return t<=.5?.5*Math.pow(2*t,e):1-ZU.polynomialEaseInOutValue(e,1-t)}static polynomialEaseInDerivative(e,t){return e*Math.pow(t,e-1)}static polynomialEaseOutDerivative(e,t){return e*Math.pow(1-t,e-1)}static polynomialEaseInOutDerivative(e,t){return t<=.5?Math.pow(2,e-1)*e*Math.pow(t,e-1):ZU.polynomialEaseInOutDerivative(e,1-t)}static polynomialEaseInSecondDerivative(e,t){return(e-1)*e*Math.pow(t,e-2)}static polynomialEaseOutSecondDerivative(e,t){return-(e-1)*e*Math.pow(1-t,e-2)}static polynomialEaseInOutSecondDerivative(e,t){return t<=.5?Math.pow(2,e-1)*(e-1)*e*Math.pow(t,e-2):-ZU.polynomialEaseInOutSecondDerivative(e,1-t)}static polynomialEaseIn(e){return new ZU(ZU.polynomialEaseInValue.bind(null,e),ZU.polynomialEaseInDerivative.bind(null,e),ZU.polynomialEaseInSecondDerivative.bind(null,e))}static polynomialEaseOut(e){return new ZU(ZU.polynomialEaseOutValue.bind(null,e),ZU.polynomialEaseOutDerivative.bind(null,e),ZU.polynomialEaseOutSecondDerivative.bind(null,e))}static polynomialEaseInOut(e){return new ZU(ZU.polynomialEaseInOutValue.bind(null,e),ZU.polynomialEaseInOutDerivative.bind(null,e),ZU.polynomialEaseInOutSecondDerivative.bind(null,e))}}_defineProperty(ZU,"LINEAR",(ft=ZU).polynomialEaseIn(1)),_defineProperty(ZU,"QUADRATIC_IN",ft.polynomialEaseIn(2)),_defineProperty(ZU,"QUADRATIC_OUT",ft.polynomialEaseOut(2)),_defineProperty(ZU,"QUADRATIC_IN_OUT",ft.polynomialEaseInOut(2)),_defineProperty(ZU,"CUBIC_IN",ft.polynomialEaseIn(3)),_defineProperty(ZU,"CUBIC_OUT",ft.polynomialEaseOut(3)),_defineProperty(ZU,"CUBIC_IN_OUT",ft.polynomialEaseInOut(3)),_defineProperty(ZU,"QUARTIC_IN",ft.polynomialEaseIn(4)),_defineProperty(ZU,"QUARTIC_OUT",ft.polynomialEaseOut(4)),_defineProperty(ZU,"QUARTIC_IN_OUT",ft.polynomialEaseInOut(4)),_defineProperty(ZU,"QUINTIC_IN",ft.polynomialEaseIn(5)),_defineProperty(ZU,"QUINTIC_OUT",ft.polynomialEaseOut(5)),_defineProperty(ZU,"QUINTIC_IN_OUT",ft.polynomialEaseInOut(5)),KU.register("Easing",ZU);const JU=ZU;class $U{constructor(e){_defineProperty(this,"startingValue",null),_defineProperty(this,"endingValue",null);const t=Vo()({setValue:null,getValue:null,property:null,object:null,attribute:null,to:null,delta:null,speed:null,from:null,easing:JU.CUBIC_IN_OUT,blend:$U.DEFAULT_BLEND,distance:$U.DEFAULT_DISTANCE,add:$U.DEFAULT_ADD},e);t.object&&(t.setValue=$U.OBJECT_SET(t.object,t.attribute),t.getValue=$U.OBJECT_GET(t.object,t.attribute)),t.property&&(t.setValue=$U.PROPERTY_SET(t.property),t.getValue=$U.PROPERTY_GET(t.property)),this.getValue=t.getValue,this.setValue=t.setValue,this.easing=t.easing,this.from=t.from,this.to=t.to,this.delta=t.delta,this.speed=t.speed,this.blend=t.blend,this.distance=t.distance,this.add=t.add}static DEFAULT_BLEND(e,t,i){if(0===i)return e;if(1===i)return t;if("number"==typeof e&&"number"==typeof t)return e+(t-e)*i;if("object"==typeof e&&"object"==typeof t&&"function"==typeof e.blend)return e.blend(t,i);throw new Error(`Blending not supported for: ${JSON.stringify(e)}, ${JSON.stringify(t)}, pass in a blend option`)}static DEFAULT_DISTANCE(e,t){if("number"==typeof e&&"number"==typeof t)return Math.abs(e-t);if("object"==typeof e&&"object"==typeof t&&"function"==typeof e.distance)return e.distance(t);throw new Error(`Distance (required for speed) by default not supported for: ${JSON.stringify(e)}, ${JSON.stringify(t)}, pass in a distance option`)}static DEFAULT_ADD(e,t){if("number"==typeof e&&"number"==typeof t)return e+t;if("object"==typeof e&&"object"==typeof t&&"function"==typeof e.plus)return e.plus(t);throw new Error(`Addition (required for delta) by default not supported for: ${JSON.stringify(e)}, ${JSON.stringify(t)}, pass in an add option`)}static OBJECT_SET(e,t){return function(i){e[t]=i}}static OBJECT_GET(e,t){return function(){return e[t]}}static PROPERTY_SET(e){return function(t){e.value=t}}static PROPERTY_GET(e){return function(){return e.value}}computeStartEnd(){this.startingValue=null!==this.from?this.from:this.getValue(),this.endingValue=null!==this.to?this.to:this.add(this.startingValue,this.delta)}update(e){this.setValue(this.blend(this.startingValue,this.endingValue,this.easing.value(e)))}hasPreferredDuration(){return null!==this.speed}getPreferredDuration(){return null===this.speed?null:this.speed*this.distance(this.startingValue,this.delta)}}KU.register("AnimationTarget",$U);const eW=$U;class tW extends Um{constructor(e){const t=Vo()({targets:null,duration:null,delay:0,stepEmitter:vb},e);super(t),_defineProperty(this,"length",0),_defineProperty(this,"remainingDelay",0),_defineProperty(this,"remainingAnimation",0),_defineProperty(this,"runningProperty",new gy(!1)),_defineProperty(this,"animatingProperty",new gy(!1)),_defineProperty(this,"startEmitter",new hb),_defineProperty(this,"beginEmitter",new hb),_defineProperty(this,"finishEmitter",new hb({parameters:[{valueType:"number"}]})),_defineProperty(this,"stopEmitter",new hb),_defineProperty(this,"endedEmitter",new hb({hasListenerOrderDependencies:!0})),_defineProperty(this,"updateEmitter",new hb),this.targets=(null===t.targets?[t]:t.targets).map(e=>new eW(e)),this.duration=t.duration,this.delay=t.delay;const i=t.stepEmitter;if(i){const e=this.step.bind(this);this.runningProperty.link(t=>{t&&!i.hasListener(e)?i.addListener(e):!t&&i.hasListener(e)&&i.removeListener(e)}),this.disposeEmitter.addListener(()=>{i.hasListener(e)&&i.removeListener(e)})}}start(e){return this.runningProperty.value||(this.remainingDelay=this.delay,this.runningProperty.value=!0,this.startEmitter.emit(),this.step(void 0!==e?e:0)),this}stop(){return this.runningProperty.value?(this.runningProperty.value=!1,this.stopEmitter.emit(),this.endedEmitter.emit(),this):this}step(e){if(!this.runningProperty.value)return this;if(!this.animatingProperty.value){if(this.remainingDelay-=e,e=-this.remainingDelay,this.remainingDelay>0)return this;this.length=this.duration;for(let e=0;e<this.targets.length;e++){const t=this.targets[e];t.computeStartEnd(),null===this.length&&(this.length=t.getPreferredDuration())}this.remainingAnimation=this.length,this.animatingProperty.value=!0,this.beginEmitter.emit()}this.remainingAnimation-=e,e=-this.remainingAnimation;const t=this.length>0?fl.clamp((this.length-this.remainingAnimation)/this.length,0,1):1;for(let i=0;i<this.targets.length;i++)this.targets[i].update(t);return this.updateEmitter.emit(),1===t&&(this.animatingProperty.value=!1,this.runningProperty.value=!1,this.finishEmitter.emit(e),this.endedEmitter.emit()),this}then(e){return this.finishEmitter.addListener(t=>e.start(t)),e}dispose(){this.runningProperty.dispose(),this.animatingProperty.dispose(),this.startEmitter.dispose(),this.beginEmitter.dispose(),this.finishEmitter.dispose(),this.stopEmitter.dispose(),this.endedEmitter.dispose(),this.updateEmitter.dispose(),super.dispose()}}KU.register("Animation",tW);const iW=tW,nW=new My(20,7);class rW extends cv{constructor(e,t){let i=!1;const n=Vo()({orientation:"horizontal",fill:"white",stroke:"black",lineWidth:1,cornerRadius:4,defaultPageNumber:0,itemsPerPage:4,spacing:12,margin:6,alignBoxOptions:{phetioType:PV,phetioState:!0,visiblePropertyOptions:{phetioFeatured:!0}},buttonOptions:{xMargin:5,yMargin:5,touchAreaXDilation:0,touchAreaYDilation:0,mouseAreaXDilation:0,mouseAreaYDilation:0,baseColor:"rgba( 200, 200, 200, 0.5 )",disabledColor:Xq.LIGHT_GRAY,lineWidth:1,arrowPathOptions:{stroke:"black",lineWidth:3},arrowSize:nW,enabledPropertyOptions:{phetioReadOnly:!0,phetioFeatured:!1},soundPlayer:Gq},separatorsVisible:!1,separatorOptions:{stroke:"rgb( 180, 180, 180 )",lineWidth:.5,pickable:!1},animationEnabled:!0,animationOptions:{duration:.4,stepEmitter:vb,easing:JU.CUBIC_IN_OUT},tandem:Lm.OPTIONAL,visiblePropertyOptions:{phetioFeatured:!0}},t);super(),_defineProperty(this,"isAnimatingProperty",new gy(!1)),this.animationEnabled=n.animationEnabled,this.items=e,this.itemsPerPage=n.itemsPerPage,this.defaultPageNumber=n.defaultPageNumber;const r=Ql.fromLayoutOrientation(n.orientation),s=new rT,a=n.tandem.createTandem("items");this.carouselItemNodes=tq(e,a),this.alignBoxes=e.map((e,t)=>s.createBox(this.carouselItemNodes[t],No({tandem:e.tandemName?a.createTandem(e.tandemName):Lm.OPTIONAL},n.alignBoxOptions,e.alignBoxOptions))),this.scrollingNode=new sW(this,{children:this.alignBoxes,orientation:n.orientation,spacing:n.spacing,[r.opposite.coordinate+"Margin"]:n.margin}),this.visibleAlignBoxesProperty=Rb.deriveAny(this.alignBoxes.map(e=>e.visibleProperty),()=>this.getVisibleAlignBoxes()),this.scrollingNode.childrenReorderedEmitter.addListener(()=>this.visibleAlignBoxesProperty.recomputeDerivation());const o=No({cornerRadius:n.cornerRadius},n.buttonOptions),l=n.separatorsVisible?new cv({pickable:!1}):null,h=new cv({children:n.separatorsVisible?[l,this.scrollingNode]:[this.scrollingNode]}),u=e=>Math.max(Math.ceil(e.length/n.itemsPerPage),1);this.numberOfPagesProperty=new Rb([this.visibleAlignBoxesProperty],e=>u(e),{isValidValue:e=>e>0});const c=u(this.alignBoxes);this.pageNumberProperty=new zb(n.defaultPageNumber,{tandem:n.tandem.createTandem("pageNumberProperty"),numberType:"Integer",isValidValue:e=>e<this.numberOfPagesProperty.value&&e>=0,range:new Hl(0,c-1),phetioFeatured:!0});const d=new Rb([this.numberOfPagesProperty],e=>e>1),p=new eU(No({arrowDirection:r===Ql.HORIZONTAL?"right":"down",tandem:n.tandem.createTandem("nextButton"),listener:()=>this.pageNumberProperty.set(this.pageNumberProperty.get()+1),enabledProperty:new Rb([this.pageNumberProperty,this.numberOfPagesProperty],(e,t)=>e<t-1),visibleProperty:d},o)),m=new eU(No({arrowDirection:r===Ql.HORIZONTAL?"left":"up",tandem:n.tandem.createTandem("previousButton"),listener:()=>this.pageNumberProperty.set(this.pageNumberProperty.get()-1),enabledProperty:new Rb([this.pageNumberProperty],e=>e>0),visibleProperty:d},o)),g=new cv({children:[h]}),f=new xA({cornerRadius:n.cornerRadius,fill:n.fill}),y=new xA({cornerRadius:n.cornerRadius,stroke:n.stroke,pickable:!1});this.carouselConstraint=new aW(this,f,y,g,m,p,h,this.alignBoxes,r,this.scrollingNode,this.itemsPerPage,n.margin,s,l,n.separatorOptions);let E=null;const v=new Zl(0,0,0,0);pS.multilink([this.pageNumberProperty,h.localBoundsProperty],(e,t)=>{if(e>=this.numberOfPagesProperty.value)return;E&&E.stop();const s=this.visibleAlignBoxesProperty.value[e*n.itemsPerPage],a=s?-s[r.minSide]+n.margin:0,o=null===v||!v.equals(t);v.set(t),!this.animationEnabled||null!=zE&&zE.value||!i||o?h[r.coordinate]=a:(E=new iW(No({},n.animationOptions,{to:a,getValue:()=>h[r.coordinate],setValue:e=>{h[r.coordinate]=e}})),E.endedEmitter.addListener(()=>this.isAnimatingProperty.set(!1)),E.start(),this.isAnimatingProperty.value=!0)}),this.visibleAlignBoxesProperty.link(()=>{this.pageNumberProperty.value=Math.min(this.pageNumberProperty.value,this.numberOfPagesProperty.value-1)}),n.children=[f,g,p,m,y],this.disposeCarousel=()=>{this.visibleAlignBoxesProperty.dispose(),this.pageNumberProperty.dispose(),this.alignBoxes.forEach(e=>{e.dispose()}),this.scrollingNode.dispose(),this.carouselConstraint.dispose(),this.carouselItemNodes.forEach(e=>e.dispose())},this.mutate(n),i=!0}dispose(){this.disposeCarousel(),super.dispose()}reset(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.animationEnabled;this.animationEnabled=e,this.pageNumberProperty.value=Math.min(this.defaultPageNumber,this.numberOfPagesProperty.value-1),this.animationEnabled=t}scrollToItemVisibleIndex(e){this.pageNumberProperty.set(this.itemVisibleIndexToPageNumber(e))}scrollToItem(e){this.scrollToAlignBox(this.getAlignBoxForItem(e))}scrollToAlignBox(e){const t=this.visibleAlignBoxesProperty.value.indexOf(e);t>=0&&this.scrollToItemVisibleIndex(t)}setItemVisible(e,t){this.getAlignBoxForItem(e).visible=t}getAlignBoxForItem(e){const t=this.alignBoxes[this.items.indexOf(e)];return t}getNodeForItem(e){const t=this.carouselItemNodes[this.items.indexOf(e)];return t}itemVisibleIndexToPageNumber(e){return Math.floor(e/this.itemsPerPage)}getVisibleAlignBoxes(){return _.sortBy(this.alignBoxes.filter(e=>e.visible),e=>this.scrollingNode.children.indexOf(e))}}class sW extends Hw{constructor(e,t){super(t),this.carousel=e}onIndexedNodeIOChildMoved(e){this.carousel.scrollToAlignBox(e)}}class aW extends gw{constructor(e,t,i,n,r,s,a,o,l,h,u,c,d,p,m){super(e),this.carousel=e,this.backgroundNode=t,this.foregroundNode=i,this.windowNode=n,this.previousButton=r,this.nextButton=s,this.scrollingNodeContainer=a,this.alignBoxes=o,this.orientation=l,this.scrollingNode=h,this.itemsPerPage=u,this.margin=c,this.alignGroup=d,this.separatorLayer=p,this.separatorOptions=m,[this.backgroundNode,this.foregroundNode,this.windowNode,this.previousButton,this.nextButton,this.scrollingNodeContainer,...this.alignBoxes].forEach(e=>this.addNode(e,!1)),this.separatorLayer&&this.scrollingNode.constraint.finishedLayoutEmitter.addListener(()=>{this.updateSeparators()}),this.updateLayout()}updateSeparators(){const e=this.carousel.getVisibleAlignBoxes(),t=e.length>=2?_.range(1,e.length):[];this.separatorLayer.children=t.map(t=>{const i=(e[t-1][this.orientation.maxSide]+e[t][this.orientation.minSide])/2;return new uw(No({[this.orientation.coordinate+"1"]:i,[this.orientation.coordinate+"2"]:i,[this.orientation.opposite.coordinate+"2"]:this.scrollingNode[this.orientation.opposite.size]},this.separatorOptions))})}computeClipArea(){const e=this.orientation,t=this.carousel.getVisibleAlignBoxes();if(0===t.length)return new My(0,0);{const i=t[this.itemsPerPage-1]||t[t.length-1],n=new My(i[e.maxSide]-t[0][e.minSide]+2*this.margin,this.scrollingNodeContainer.boundsProperty.value[e.opposite.size]);return this.orientation===Ql.HORIZONTAL?n:n.swapped()}}getBackgroundDimension(){let e,t;if(this.orientation===Ql.HORIZONTAL){const i=this.nextButton.visible?this.nextButton.width:0,n=this.previousButton.visible?this.previousButton.width:0;e=this.windowNode.width+i+n,t=this.windowNode.height}else{const i=this.nextButton.visible?this.nextButton.height:0,n=this.previousButton.visible?this.previousButton.height:0;e=this.windowNode.width,t=this.windowNode.height+i+n}return new My(e,t)}layout(){super.layout();const e=this.orientation,t=this.alignGroup.getMaxSizeProperty(e.opposite).value+2*this.margin;this.nextButton[e.opposite.preferredSize]=t,this.previousButton[e.opposite.preferredSize]=t,this.nextButton[e.opposite.centerCoordinate]=this.backgroundNode[e.opposite.centerCoordinate],this.previousButton[e.opposite.centerCoordinate]=this.backgroundNode[e.opposite.centerCoordinate],this.windowNode[e.opposite.centerCoordinate]=this.backgroundNode[e.opposite.centerCoordinate],this.previousButton[e.minSide]=this.backgroundNode[e.minSide],this.nextButton[e.maxSide]=this.backgroundNode[e.maxSide],this.windowNode[e.centerCoordinate]=this.backgroundNode[e.centerCoordinate];const i=this.computeClipArea().toBounds();this.windowNode.clipArea=Ip.bounds(i),this.windowNode.localBounds=i;const n=this.getBackgroundDimension();this.carousel.backgroundWidth=n.width,this.carousel.backgroundHeight=n.height;const r=n.toBounds();this.backgroundNode.rectBounds=r,this.foregroundNode.rectBounds=r,this.separatorLayer&&this.updateSeparators()}}fD.register("Carousel",rW);class oW extends(DS(cv)){constructor(e,t,i,n,r){const s=Vo()({cursor:"pointer",align:"left",xMargin:6,highlightFill:"rgb( 245, 245, 245 )",highlightCornerRadius:4,tagName:"li",focusable:!0,ariaRole:"option",positionInPDOM:!0,voicingFocusListener:()=>this.comboBoxListItemNodeVoicingFocusListener(),comboBoxVoicingNameResponsePattern:sz.VALUE_NAMED_PLACEHOLDER,tandem:Lm.REQUIRED,tandemNameSuffix:"Item",phetioType:PV,phetioState:!0,visiblePropertyOptions:{phetioFeatured:!0}},r);s.comboBoxVoicingNameResponsePattern=s.comboBoxVoicingNameResponsePattern.get?s.comboBoxVoicingNameResponsePattern.get():s.comboBoxVoicingNameResponsePattern,s.innerContent=e.a11yName||null,s.voicingObjectResponse=e.a11yName||null;const a="string"==typeof s.comboBoxVoicingNameResponsePattern?new ty(s.comboBoxVoicingNameResponsePattern):s.comboBoxVoicingNameResponsePattern,o=new WI(a,{value:e.a11yName},{tandem:Lm.OPT_OUT});s.voicingNameResponse=o;const l=new xA({cornerRadius:s.highlightCornerRadius}),h=new cv({children:[t]}),u=e=>{l.rectWidth=e,h.maxWidth=e};i.link(u);const c=e=>{l.rectHeight=e,h.maxHeight=e};n.link(c);const d=()=>{"left"===s.align?h.left=l.left+s.xMargin:"right"===s.align?h.right=l.right-s.xMargin:h.centerX=l.centerX,h.centerY=l.centerY};h.boundsProperty.lazyLink(d),d(),s.children=[l,h],super(s),this._supplyOpenResponseOnNextFocus=!1,this.item=e,this.localBoundsProperty.link(e=>{this.focusHighlight=Ip.bounds(e)}),this.addInputListener({enter(){l.fill=s.highlightFill},exit(){l.fill=null}}),this.disposeComboBoxListItemNode=()=>{o.dispose(),i.unlink(u),n.unlink(c)}}supplyOpenResponseOnNextFocus(){this._supplyOpenResponseOnNextFocus=!0}dispose(){this.disposeComboBoxListItemNode(),super.dispose()}comboBoxListItemNodeVoicingFocusListener(){this.voicingSpeakFullResponse({nameResponse:this._supplyOpenResponseOnNextFocus?this.voicingNameResponse:null,objectResponse:this._supplyOpenResponseOnNextFocus?null:this.voicingObjectResponse,contextResponse:null,hintResponse:this._supplyOpenResponseOnNextFocus?this.voicingHintResponse:null}),this._supplyOpenResponseOnNextFocus=!1}}fD.register("ComboBoxListItemNode",oW);class lW extends ED{constructor(e,t,i,n,r,s,a,o){const l=Vo()({highlightFill:"rgb( 245, 245, 245 )",comboBoxListItemNodeOptions:{},xMargin:12,yMargin:8,backgroundPickable:!0,tagName:"ul",ariaRole:"listbox",groupFocusHighlight:!0,focusable:!0,openedSoundPlayer:jH,closedNoChangeSoundPlayer:qH,visiblePropertyOptions:{phetioReadOnly:!0}},o),h=new yb(t=>{const i=e.value,s=t.currentTarget;r(),e.value=s.item.value,n(),this.voiceOnNewSelection(e.value,i,s),t.abort()},{parameters:[{phetioPrivate:!0,valueType:j_}],tandem:a.createTandem("fireAction"),phetioEventType:vm.USER}),u={up(e){h.execute(e)},keyup:e=>{e.domEvent&&Of.isAnyKeyEvent(e.domEvent,[Of.KEY_ENTER,Of.KEY_SPACE])&&h.execute(e)},click:e=>{h.execute(e)}},c=cW.getMaxItemWidthProperty(i),d=cW.getMaxItemHeightProperty(i),p=new Rb([c],e=>e+l.xMargin),m=new Rb([d],e=>e+l.yMargin),g=[];let f;t.forEach((e,t)=>{const n=new oW(e,i[t],p,m,No({align:l.align,highlightFill:l.highlightFill,highlightCornerRadius:l.cornerRadius,xMargin:.5*l.xMargin,tandem:e.tandemName?a.createTandem(e.tandemName):Lm.OPTIONAL},l.comboBoxListItemNodeOptions,e.comboBoxListItemNodeOptions));g.push(n),n.addInputListener(u)}),super(new aT({spacing:0,excludeInvisibleChildrenFromBounds:!0,children:g}),No({},l,{xMargin:l.xMargin/2,yMargin:l.yMargin/2})),this.voiceOnSelectionNode=s;const y=t.map(e=>e.soundPlayer?e.soundPlayer:JO.getSelectionSoundPlayer(t.indexOf(e)));this.visibleProperty.lazyLink(i=>{if(i)l.openedSoundPlayer.play(),f=e.value;else if(f===e.value)l.closedNoChangeSoundPlayer.play();else{const i=t.findIndex(t=>t.value===e.value);y[i].play()}});const E=new Kx({keys:["escape","tab","arrowUp","arrowDown","home","end"],callback:(e,t)=>{const i=e;if("escape"===t||"tab"===t)i.abort(),n(),r();else if("arrowUp"===t||"arrowDown"===t){const e=i.domEvent;e.preventDefault();const n="arrowDown"===t?1:-1,r=this.visibleListItemNodes.indexOf(this.getFocusedItemNode()),s=r+n;this.visibleListItemNodes[s]&&this.visibleListItemNodes[s].focus(),i.pointer.reserveForKeyboardDrag()}else"home"===t?this.visibleListItemNodes[0].focus():"end"===t&&this.visibleListItemNodes[this.visibleListItemNodes.length-1].focus()}});this.addInputListener(E),this.listItemNodes=g,this.visibleListItemNodes=g.slice(),this.disposeComboBoxListBox=()=>{for(let e=0;e<g.length;e++)g[e].dispose();this.removeInputListener(E),E.dispose(),h.dispose(),c.dispose(),d.dispose()}}dispose(){this.disposeComboBoxListBox(),super.dispose()}setItemVisible(e,t){this.getListItemNode(e).visible=t,this.visibleListItemNodes=_.filter(this.listItemNodes,e=>e.visible)}isItemVisible(e){return this.getListItemNode(e).visible}getListItemNode(e){const t=_.find(this.listItemNodes,t=>t.item.value===e);return t}getFocusedItemNode(){const e=_.find(this.listItemNodes,e=>e.focused);return e}focusListItemNode(e){const t=this.getListItemNode(e);t.supplyOpenResponseOnNextFocus(),t.focus()}voiceOnNewSelection(e,t,i){const n={nameResponse:i.voicingNameResponse,objectResponse:null,contextResponse:i.voicingContextResponse,hintResponse:null};t===e&&(n.contextResponse=null),this.voiceOnSelectionNode.voicingSpeakResponse(n)}}fD.register("ComboBoxListBox",lW);const hW=(e,t,i,n)=>(n.push(()=>{e.button.accessibleName=i}),t),uW=(e,t,i,n)=>(n.push(()=>{e.button.helpText=i}),t);class cW extends(Tv(cv)){constructor(e,t,i,n){const r=Vo()({align:"left",listPosition:"below",labelXSpacing:10,disabledOpacity:.5,cornerRadius:4,highlightFill:"rgb( 245, 245, 245 )",xMargin:12,yMargin:8,buttonFill:"white",buttonStroke:"black",buttonLineWidth:1,buttonTouchAreaXDilation:0,buttonTouchAreaYDilation:0,buttonMouseAreaXDilation:0,buttonMouseAreaYDilation:0,listFill:"white",listStroke:"black",listLineWidth:1,openedSoundPlayer:jH,closedNoChangeSoundPlayer:qH,tagName:"div",accessibleNameBehavior:hW,helpTextBehavior:uW,comboBoxVoicingNameResponsePattern:sz.VALUE_NAMED_PLACEHOLDER,comboBoxVoicingContextResponse:null,comboBoxVoicingHintResponse:null,tandem:Lm.REQUIRED,tandemNameSuffix:"ComboBox",phetioType:cW.ComboBoxIO,phetioFeatured:!0,phetioEventType:vm.USER,visiblePropertyOptions:{phetioFeatured:!0},phetioEnabledPropertyInstrumented:!0},n),s=tq(t,r.tandem.createTandem("items"));super(),this.nodes=s,this.listPosition=r.listPosition,this.button=new pW(e,t,s,{align:r.align,arrowDirection:"below"===r.listPosition?"down":"up",cornerRadius:r.cornerRadius,xMargin:r.xMargin,yMargin:r.yMargin,baseColor:r.buttonFill,stroke:r.buttonStroke,lineWidth:r.buttonLineWidth,touchAreaXDilation:r.buttonTouchAreaXDilation,touchAreaYDilation:r.buttonTouchAreaYDilation,mouseAreaXDilation:r.buttonMouseAreaXDilation,mouseAreaYDilation:r.buttonMouseAreaYDilation,localPreferredWidthProperty:this.localPreferredWidthProperty,localMinimumWidthProperty:this.localMinimumWidthProperty,comboBoxVoicingNameResponsePattern:r.comboBoxVoicingNameResponsePattern,tandem:r.tandem.createTandem("button")}),this.addChild(this.button),this.listBox=new lW(e,t,s,this.hideListBox.bind(this),()=>{this.button.blockNextVoicingFocusListener(),this.button.focus()},this.button,r.tandem.createTandem("listBox"),{align:r.align,highlightFill:r.highlightFill,xMargin:r.xMargin,yMargin:r.yMargin,cornerRadius:r.cornerRadius,fill:r.listFill,stroke:r.listStroke,lineWidth:r.listLineWidth,visible:!1,comboBoxListItemNodeOptions:{comboBoxVoicingNameResponsePattern:r.comboBoxVoicingNameResponsePattern,voicingContextResponse:r.comboBoxVoicingContextResponse,voicingHintResponse:r.comboBoxVoicingHintResponse},openedSoundPlayer:r.openedSoundPlayer,closedNoChangeSoundPlayer:r.closedNoChangeSoundPlayer,ariaLabelledbyAssociations:[{otherNode:this.button,otherElementName:C_.LABEL_SIBLING,thisElementName:C_.PRIMARY_SIBLING}]}),i.addChild(this.listBox),this.listParent=i;const a=new Hv(this.button,this.listParent,{fromCoordinateFrame:"parent",toCoordinateFrame:"local"});pS.multilink([a,this.button.localBoundsProperty,this.listBox.localBoundsProperty],e=>{this.scaleAndPositionListBox(e)}),this.opacityProperty.link(e=>{this.listBox.opacityProperty.value=e}),this.mutate(r),this.button.addListener(()=>{this.listBox.visibleProperty.value=!this.listBox.visibleProperty.value,this.listBox.focusListItemNode(e.value)}),this.display=null,this.clickToDismissListener={down:e=>{(!phet.chipper.isFuzzEnabled()||ep.nextDouble()<.005)&&(e.trail.containsNode(this.button)||e.trail.containsNode(this.listBox)||this.hideListBox())}},this.dismissWithFocusListener=e=>{e&&!e.trail.containsNode(this.listBox)&&this.hideListBox()},GS.pdomFocusProperty.link(this.dismissWithFocusListener),this.listBox.visibleProperty.link(e=>{e?(this.scaleListBox(),this.listBox.moveToFront(),this.display=this.getUniqueTrail().rootNode().getRootedDisplays()[0],this.display.addInputListener(this.clickToDismissListener)):this.display&&this.display.hasInputListener(this.clickToDismissListener)&&(this.display.removeInputListener(this.clickToDismissListener),this.display=null)}),this.displayOnlyProperty=new gy(!1,{tandem:r.tandem.createTandem("displayOnlyProperty"),phetioFeatured:!0,phetioDocumentation:"disables interaction with the ComboBox and makes it appear like a display that shows the current selection"}),this.displayOnlyProperty.link(e=>{this.hideListBox(),this.button.setDisplayOnly(e),this.pickable=!e}),this.addLinkedElement(e,{tandemName:"property"}),this.disposeComboBox=()=>{a.dispose(),this.display&&this.display.hasInputListener(this.clickToDismissListener)&&this.display.removeInputListener(this.clickToDismissListener),GS.pdomFocusProperty.unlink(this.dismissWithFocusListener),this.displayOnlyProperty.dispose(),this.listBox.dispose(),this.button.dispose(),s.forEach(e=>e.dispose())}}dispose(){this.disposeComboBox(),super.dispose()}showListBox(){this.listBox.visibleProperty.value=!0}hideListBox(){this.listBox.visibleProperty.value=!1}scaleListBox(){if(!this.listBox.localBounds.isEmpty()){const e=this.button.localToGlobalBounds(this.button.localBounds).width/this.button.localBounds.width,t=this.listBox.localToGlobalBounds(this.listBox.localBounds).width/this.listBox.localBounds.width;this.listBox.scale(e/t)}}scaleAndPositionListBox(e){e&&(this.scaleListBox(),"above"===this.listPosition?this.listBox.leftBottom=e.timesVector2(this.button.leftTop):this.listBox.leftTop=e.timesVector2(this.button.leftBottom))}setItemVisible(e,t){this.listBox.setItemVisible(e,t)}isItemVisible(e){return this.listBox.isItemVisible(e)}static getMaxItemWidthProperty(e){const t=_.flatten(e.map(e=>{const t=[e.boundsProperty];return wv(e)&&(t.push(e.isWidthResizableProperty),t.push(e.minimumWidthProperty)),t}));return Rb.deriveAny(t,()=>Math.max(...e.map(e=>xv(e)?e.minimumWidth||0:e.width)),{accessNonDependencies:!0})}static getMaxItemHeightProperty(e){const t=e.map(e=>e.boundsProperty);return Rb.deriveAny(t,()=>Math.max(...e.map(e=>e.height)),{accessNonDependencies:!0})}}yt=cW,_defineProperty(cW,"ITEM_TANDEM_NAME_SUFFIX","Item"),_defineProperty(cW,"ComboBoxIO",new el("ComboBoxIO",{valueType:yt,documentation:"A combo box is composed of a push button and a listbox. The listbox contains items that represent choices. Pressing the button pops up the listbox. Selecting from an item in the listbox sets the value of an associated Property. The button shows the item that is currently selected.",supertype:cv.NodeIO,events:["listBoxShown","listBoxHidden"]})),fD.register("ComboBox",cW);const dW=(e,t,i)=>(t.labelTagName="p",t.labelContent=i,t);class pW extends eY{constructor(e,t,i,n){const r=Vo()({align:"left",arrowDirection:"down",arrowFill:"black",comboBoxVoicingNameResponsePattern:sz.VALUE_NAMED_PLACEHOLDER,cursor:"pointer",baseColor:"white",buttonAppearanceStrategy:Kq.FlatAppearanceStrategy,xMargin:12,yMargin:8,stroke:"black",lineWidth:1,soundPlayer:KH,enabledPropertyOptions:{phetioFeatured:!1},visiblePropertyOptions:{phetioFeatured:!1},localPreferredWidthProperty:new mg(null),localMinimumWidthProperty:new mg(null),containerTagName:"div",accessibleNameBehavior:dW},n),s=r.xMargin,a=r.yMargin,o=cW.getMaxItemWidthProperty(i),l=cW.getMaxItemHeightProperty(i),h=new aA(null,{fill:r.arrowFill}),u=_.find(t,t=>t.value===e.value),c=t.indexOf(u),d=new cv({layoutOptions:{yMargin:a,grow:1,xAlign:r.align},children:[i[c]]}),p=new SA(0,0,0,0,{stroke:"black",lineWidth:r.lineWidth});r.content=new Kw({rows:[[d,p,h]]}),pS.multilink([o,l],(e,t)=>{const i=t+2*a,n=i,o=.35*n,l=2*o*Math.sqrt(3)/3,u=s,c=s-r.lineWidth/2,m=-r.lineWidth/2;var g,f,y;h.shape=(g=r.arrowDirection,f=l,y=o,"up"===g?(new Ip).moveTo(0,y).lineTo(f/2,0).lineTo(f,y).close():(new Ip).moveTo(0,0).lineTo(f,0).lineTo(f/2,y).close()),h.mutateLayoutOptions({minContentWidth:n,minContentHeight:n}),d.mutateLayoutOptions({minContentWidth:e,minContentHeight:t,leftMargin:u,rightMargin:c}),p.y2=i,p.mutateLayoutOptions({rightMargin:m})}),r.xMargin=0,r.yMargin=0,super(r),this.minimumWidthProperty.link(e=>{r.localMinimumWidthProperty.value=e});const m=e=>{this.preferredWidth=e};r.localPreferredWidthProperty.link(m),this._blockNextVoicingFocusListener=!1,this.voicingFocusListener=()=>{!this._blockNextVoicingFocusListener&&this.defaultFocusListener(),this._blockNextVoicingFocusListener=!1};let g=null,f=null;const y=e=>{d.removeAllChildren(),f=_.find(t,t=>t.value===e);const n=t.indexOf(f),s=i[n];d.addChild(s),this.innerContent=f.a11yName||null;const a="string"==typeof r.comboBoxVoicingNameResponsePattern?new ty(r.comboBoxVoicingNameResponsePattern):r.comboBoxVoicingNameResponsePattern;g&&g.dispose(),this.voicingNameResponse=g=new WI(a,{value:f.a11yName},{tandem:Lm.OPT_OUT})};e.link(y),this.ariaLabelledbyAssociations=[{otherNode:this,otherElementName:C_.LABEL_SIBLING,thisElementName:C_.PRIMARY_SIBLING},{otherNode:this,otherElementName:C_.PRIMARY_SIBLING,thisElementName:C_.PRIMARY_SIBLING}],$A.mutateNode(this,"listbox"),this.disposeComboBoxButton=()=>{o.dispose(),l.dispose(),e.unlink(y),r.localPreferredWidthProperty.unlink(m),g&&g.dispose()},this.arrow=h,this.separatorLine=p}setDisplayOnly(e){this.arrow.visible=!e,this.separatorLine.visible=!e}blockNextVoicingFocusListener(){this._blockNextVoicingFocusListener=!0}dispose(){this.disposeComboBoxButton(),super.dispose()}}fD.register("ComboBoxButton",pW);class mW extends cv{constructor(e,t,i){const n=Vo()({interactive:!1,orientation:"horizontal",dotRadius:3,lineWidth:1,dotSpacing:10,dotTouchAreaDilation:4,dotMouseAreaDilation:4,currentPageFill:"black",currentPageStroke:null,pageFill:"rgb( 200, 200, 200 )",pageStroke:null,tandem:Lm.REQUIRED,tandemNameSuffix:"PageControl",visiblePropertyOptions:{phetioFeatured:!0}},i),r=new Ax({press:t=>{t.currentTarget instanceof gW&&(e.value=t.currentTarget.pageNumber)},tandem:n.tandem.createTandem("pressListener")}),s={lineWidth:n.lineWidth,mouseArea:0===n.dotMouseAreaDilation?null:Ip.circle(0,0,n.dotRadius+n.dotMouseAreaDilation),touchArea:0===n.dotTouchAreaDilation?null:Ip.circle(0,0,n.dotRadius+n.dotTouchAreaDilation),boundsMethod:"unstroked",cursor:n.interactive?"pointer":null,inputListeners:n.interactive?[r]:[]},a=new Hw({orientation:n.orientation,spacing:n.dotSpacing});let o=[];a.boundsProperty.link(()=>{a.center=al.ZERO});const l=e=>{o.forEach(t=>{t.fill=e===t.pageNumber?n.currentPageFill:n.pageFill,t.stroke=e===t.pageNumber?n.currentPageStroke:n.pageStroke})};e.link(l);const h=t=>{o=_.range(0,t).map(e=>new gW(e,n.dotRadius,s)),a.children=o,l(e.value)};t.link(h),n.children=[a],super(n),this.disposePageControl=()=>{r.dispose(),t.unlink(h),e.unlink(l)}}dispose(){this.disposePageControl(),super.dispose()}}class gW extends AA{constructor(e,t,i){super(t,i),this.pageNumber=e}}fD.register("PageControl",mW);class fW extends(Tv(cv)){constructor(e,t,i){const n=Vo()({itemNodeOptions:{align:"left",overColor:Hg.grayColor(245),selectedColor:"yellow",xMargin:6,yMargin:2},carouselOptions:{buttonOptions:{arrowSize:new My(20,4)},orientation:"vertical",spacing:0,margin:0,itemsPerPage:15},pageControlOptions:{interactive:!0},buttonOptions:{arrowDirection:"down",baseColor:"rgb( 218, 236, 255 )",xMargin:6,yMargin:4},tandem:Lm.OPTIONAL},i);n.carouselOptions.itemsPerPage=Math.min(n.carouselOptions.itemsPerPage,t.length),n.carouselOptions.tandem=n.carouselOptions.tandem||n.tandem.createTandem("carousel"),n.buttonOptions.tandem=n.buttonOptions.tandem||n.tandem.createTandem("button"),super();const r=new rT,s=tq(t,n.tandem.createTandem("items")),a=_.map(t,(t,i)=>({createNode:()=>new yW(e,t,s[i],r,n.itemNodeOptions)})),o=[],l=new rW(a,n.carouselOptions);o.push(l);let h=null;l.numberOfPagesProperty.value>1&&(h=new mW(l.pageNumberProperty,l.numberOfPagesProperty,No({orientation:n.carouselOptions.orientation},n.pageControlOptions)),o.push(h));const u=new sT({spacing:4,children:o}),c=new pW(e,t,s,No({listener:()=>{u.visible=!u.visible},widthSizable:n.widthSizable,localPreferredWidthProperty:this.localPreferredWidthProperty,localMinimumWidthProperty:this.localMinimumWidthProperty},n.buttonOptions)),d=new aT({spacing:0,align:"left",children:[c,u]});n.children=[d],this.mutate(n);const p=()=>{u.visible=!1};e.link(p);const m={down:e=>{if(!phet.chipper.isFuzzEnabled()||ep.nextDouble()<.25){const t=e.trail;t.containsNode(c)||t.containsNode(l)||h&&t.containsNode(h)||(u.visible=!1)}}};let g=null;u.visibleProperty.link(e=>{e?(g=this.getUniqueTrail().rootNode().getRootedDisplays()[0],g.addInputListener(m)):g&&g.hasInputListener(m)&&(g.removeInputListener(m),g=null)}),this.disposeCarouselComboBox=()=>{e.unlink(p),c.dispose(),h&&h.dispose(),l.dispose(),s.forEach(e=>e.dispose())}}dispose(){this.disposeCarouselComboBox(),super.dispose()}}class yW extends cv{constructor(e,t,i,n,r){const s=Vo()({align:"left",xMargin:6,yMargin:2,overColor:Hg.grayColor(245),selectedColor:"yellow",tandem:Lm.OPTIONAL},r),a=new eT(i,{xAlign:s.align,group:n}),o=new xA(0,0,1,1);a.boundsProperty.link(e=>{o.setRectBounds(e.dilatedXY(s.xMargin,s.yMargin))}),s.children=[o,a],super(s);const l=new Ax({press:()=>{e.value=t.value},tandem:s.tandem.createTandem("pressListener")});this.addInputListener(l);const h=new pS([e,l.isOverProperty],(e,i)=>{e===t.value?o.fill=s.selectedColor:o.fill=i?s.overColor:"transparent"});this.disposeCarouselItemNode=()=>{h.dispose()}}dispose(){this.disposeCarouselItemNode(),super.dispose()}}fD.register("CarouselComboBox",fW);fD.register("ClosestDragForwardingListener",class{constructor(e,t){this.touchThreshold=e,this.mouseThreshold=t,this.items=[]}addDraggableItem(e){this.items.push(e)}removeDraggableItem(e){const t=_.indexOf(this.items,e);this.items.splice(t,1)}down(e){if(e.target===e.currentTarget){let t=0;if(e.pointer.isTouchLike()&&(t=this.touchThreshold),e.pointer instanceof G_&&(t=this.mouseThreshold),t){let i=null,n=Number.POSITIVE_INFINITY;const r=e.pointer.point,s=this.items.length;for(let e=0;e<s;e++){const t=this.items[e],s=t.computeDistance(r);s<n&&(n=s,i=t)}i&&n<t&&i.startDrag(e)}}}});fD.register("HorizontalAquaRadioButtonGroup",class extends nq{constructor(e,t,i){super(e,t,Vo()({orientation:"horizontal"},i))}});const EW=new Ip("M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z").makeImmutable(),vW=new aA(EW,{fill:"rgba(0,0,0,0.7)",maxWidth:15.5}),AW=vW.width+2;class bW extends(Tv(DS(cv))){constructor(e,t,i,n,r,s){var a;const o=Vo()({separatorBefore:!1,checkedProperty:null,textFill:"black",cursor:"pointer",phetioDocumentation:"Item buttons shown in a popup menu",phetioEventType:vm.USER,tagName:"button",containerTagName:"li",containerAriaRole:"none",ariaRole:"menuitem",positionInPDOM:!0},s);super(),r&&this.setVisibleProperty(Ay);const l=e=>{this.innerContent=e,this.voicingNameResponse=e};t.link(l),this.present=n;const h=new gA(t,{font:new gD(18),fill:o.textFill,maxWidth:400}),u=new xA({cornerRadius:5});h.boundsProperty.link(e=>{this.localMinimumWidth=e.width+2+5+AW,u.rectHeight=e.height+3+3}),this.localPreferredWidthProperty.link(e=>{(e=null===e?this.localMinimumWidth:Math.max(this.localMinimumWidth||0,e))&&(u.rectWidth=e)}),this.addChild(u),this.addChild(h),Zw.create(this,[u,h],(e,t)=>{t.left=e.left+2+AW,t.centerY=e.centerY}),this.addInputListener({enter:()=>{u.fill="#a6d2f4"},exit:()=>{u.fill=null}}),this.addInputListener(new Sx({tandem:null===(a=o.tandem)||void 0===a?void 0:a.createTandem("fireListener"),fire:t=>{e(t),i(t)}})),this.separatorBefore=o.separatorBefore;let c=null;if(o.checkedProperty){const e=new cv({children:[vW],right:h.left-2,centerY:h.centerY});c=t=>{e.visible=t},o.checkedProperty.link(c),this.addChild(e)}this.mutate(o),this.disposeMenuItem=()=>{o.checkedProperty&&c&&o.checkedProperty.hasListener(c)&&o.checkedProperty.unlink(c),t.hasListener(l)&&t.unlink(l),h.dispose()}}dispose(){this.disposeMenuItem(),super.dispose()}}fD.register("MenuItem",bW);class SW extends cv{constructor(e,t,i,n,r){super(),this.nodeProperty=new ty(null),this._constructInstance=()=>Reflect.construct(e,[...t,Po(_.mapValues(n,e=>e.value),i)]),this.multilink=pS.multilink(_.values(n),this.replaceCopy.bind(this)),this.mutate(r)}replaceCopy(){const e=this._constructInstance(),t=this.nodeProperty.value;this.nodeProperty.value=e,this.addChild(e),t&&(this.removeChild(t),this.disposeCopy(t))}disposeCopy(e){e.dispose&&e.dispose()}dispose(){this.multilink.dispose(),this.disposeCopy(this.nodeProperty.value),this.nodeProperty.dispose(),super.dispose()}}fD.register("MutableOptionsNode",SW);const _W=new yh,xW=e=>{if(!_W.has(e)){const t=e.join(",");_W.set(e,new el(`StringUnionIO<${t}>`,{documentation:"An IOType validating on specific string values.",isValidValue:t=>e.includes(t),toStateObject:_.identity,fromStateObject:_.identity,stateSchema:Zo.asValue(`StringUnionIO<${t}>`,{isValidValue:t=>e.includes(t)})}))}return _W.get(e)};zo.register("StringUnionIO",xW);const wW=xW;class TW extends ty{constructor(e,t){super(e,Vo()({phetioValueType:wW(t.validValues)},t))}}ko.register("StringUnionProperty",TW);const PW=(e,t)=>class extends(JF(e,t)){constructor(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];const r=i[t],s=Vo()({timerDelay:400,timerInterval:100,ariaOrientation:Ql.VERTICAL},r);i[t]=s,super(...i),Fv(this,["addInputListener"]),this._callbackTimer=new bx({delay:s.timerDelay,interval:s.timerInterval}),this.incrementDownEmitter=new hb({parameters:[{valueType:"boolean"}]}),this.decrementDownEmitter=new hb({parameters:[{valueType:"boolean"}]}),this.setPDOMAttribute("aria-roledescription",sG.a11y.numberSpinnerRoleDescriptionStringProperty);let a=null,o=null;const l={keydown:e=>{if(this.enabledProperty.get()&&Of.isRangeKey(e.domEvent)){const t=e.domEvent;t.preventDefault(),t.metaKey||this._callbackTimer.isRunning()||(this._accessibleNumberSpinnerHandleKeyDown(e),a=this._accessibleNumberSpinnerHandleKeyDown.bind(this,e),o=t,this._callbackTimer.addCallback(a),this._callbackTimer.start())}},keyup:e=>{const t=Of.getEventCode(e.domEvent);Of.isRangeKey(e.domEvent)&&(o&&t===Of.getEventCode(o)&&(this._emitKeyState(e.domEvent,!1),this._callbackTimer.stop(!1),this._callbackTimer.removeCallback(a),a=null,o=null),this.handleKeyUp(e))},blur:e=>{a&&(this._emitKeyState(o,!1),this._callbackTimer.stop(!1),this._callbackTimer.removeCallback(a)),this.handleBlur(e)},input:this.handleInput.bind(this),change:this.handleChange.bind(this)};this.addInputListener(l),this._disposeAccessibleNumberSpinner=()=>{this._callbackTimer.dispose(),this.incrementDownEmitter.dispose(),this.decrementDownEmitter.dispose(),this.removeInputListener(l)}}_accessibleNumberSpinnerHandleKeyDown(e){this.handleKeyDown(e),this._emitKeyState(e.domEvent,!0)}_emitKeyState(e,t){Fo(e,{valueType:Event}),Of.isAnyKeyEvent(e,[Of.KEY_UP_ARROW,Of.KEY_RIGHT_ARROW])?this.incrementDownEmitter.emit(t):Of.isAnyKeyEvent(e,[Of.KEY_DOWN_ARROW,Of.KEY_LEFT_ARROW])&&this.decrementDownEmitter.emit(t)}dispose(){this._disposeAccessibleNumberSpinner(),super.dispose()}};fD.register("AccessibleNumberSpinner",PW);const CW=PW,VW=["up","down","over","out"];class RW extends(CW(cv,0)){constructor(e,t,i){const n=Vo()({color:new Hg(0,0,255),backgroundColor:"white",cornerRadius:6,xMargin:3,yMargin:3,decimalPlaces:0,font:new gD(24),incrementFunction:e=>e+1,decrementFunction:e=>e-1,timerDelay:400,timerInterval:100,noValueString:pz.NO_VALUE,align:"center",touchAreaXDilation:10,touchAreaYDilation:10,mouseAreaXDilation:0,mouseAreaYDilation:5,backgroundStroke:"gray",backgroundLineWidth:.5,arrowHeight:6,arrowYSpacing:3,arrowStroke:"black",arrowLineWidth:.25,valueMaxWidth:null,onInput:_.noop,incrementEnabledFunction:(e,t)=>null!=e&&e<t.max,decrementEnabledFunction:(e,t)=>null!=e&&e>t.min,disabledOpacity:Bg.DISABLED_OPACITY,valueChangedSoundPlayer:qF,boundarySoundPlayer:DF,cursor:"pointer",valueProperty:e,enabledRangeProperty:t,pageKeyboardStep:2,voicingObjectResponse:()=>e.value,tandem:Lm.REQUIRED,tandemNameSuffix:"Picker",phetioReadOnly:Km.DEFAULT_OPTIONS.phetioReadOnly,visiblePropertyOptions:{phetioFeatured:!0},phetioEnabledPropertyInstrumented:!0,phetioFeatured:!0},i);n.formatValue||(n.formatValue=e=>fl.toFixed(e,n.decimalPlaces));let r=null;void 0===n.pressedColor&&(r=new DA(n.color),n.pressedColor=new Rb([r],e=>e.darkerColor()));let s=e.value;const a=n.onInput;n.onInput=()=>{a(),e.value!==s&&(e.value===t.get().max||e.value===t.get().min?n.boundarySoundPlayer.play():n.valueChangedSoundPlayer.play()),s=e.value};const o=n.incrementFunction(e.get())-e.get();n.keyboardStep=o,n.shiftKeyboardStep=o;const l=_.pick(n,cv.REQUIRES_BOUNDS_OPTION_KEYS);super(_.omit(n,cv.REQUIRES_BOUNDS_OPTION_KEYS));const h=new TW("up",{validValues:VW}),u=new TW("down",{validValues:VW}),c=new Rb([e,t],n.incrementEnabledFunction),d=new Rb([e,t],n.decrementEnabledFunction),p=new gA("",{font:n.font,pickable:!1});let m=t.get().min;const g=[];for(;m<=t.get().max;)g.push(m),m=n.incrementFunction(m);let f=Math.max.apply(null,g.map(e=>(p.string=n.formatValue(e),p.width)));null!==n.valueMaxWidth&&(f=Math.min(f,n.valueMaxWidth));const y=f+2*n.xMargin,E=p.height+2*n.yMargin,v=n.cornerRadius;p.maxWidth=f;const A=new aA((new Ip).arc(v,v,v,Math.PI,3*Math.PI/2,!1).arc(y-v,v,v,-Math.PI/2,0,!1).lineTo(y,E/2+1).lineTo(0,E/2+1).close(),{pickable:!1}),b=new aA((new Ip).arc(y-v,E-v,v,0,Math.PI/2,!1).arc(v,E-v,v,Math.PI/2,Math.PI,!1).lineTo(0,E/2).lineTo(y,E/2).close(),{pickable:!1}),S=new xA(0,0,y,E,v,v,{pickable:!1,stroke:n.backgroundStroke,lineWidth:n.backgroundLineWidth}),x=new My(.5*y,n.arrowHeight),w={stroke:n.arrowStroke,lineWidth:n.arrowLineWidth,pickable:!1};this.incrementArrow=new aA((new Ip).moveTo(x.width/2,0).lineTo(x.width,x.height).lineTo(0,x.height).close(),w),this.incrementArrow.centerX=A.centerX,this.incrementArrow.bottom=A.top-n.arrowYSpacing,this.decrementArrow=new aA((new Ip).moveTo(x.width/2,x.height).lineTo(0,0).lineTo(x.width,0).close(),w),this.decrementArrow.centerX=b.centerX,this.decrementArrow.top=b.bottom+n.arrowYSpacing;const T=new cv({children:[A,this.incrementArrow]});T.addChild(new xA(T.localBounds));const P=new cv({children:[b,this.decrementArrow]});P.addChild(new xA(P.localBounds)),this.addChild(T),this.addChild(P),this.addChild(S),this.addChild(p),T.touchArea=Ip.rectangle(T.left-n.touchAreaXDilation/2,T.top-n.touchAreaYDilation,T.width+n.touchAreaXDilation,T.height+n.touchAreaYDilation),P.touchArea=Ip.rectangle(P.left-n.touchAreaXDilation/2,P.top,P.width+n.touchAreaXDilation,P.height+n.touchAreaYDilation),T.mouseArea=Ip.rectangle(T.left-n.mouseAreaXDilation/2,T.top-n.mouseAreaYDilation,T.width+n.mouseAreaXDilation,T.height+n.mouseAreaYDilation),P.mouseArea=Ip.rectangle(P.left-n.mouseAreaXDilation/2,P.top,P.width+n.mouseAreaXDilation,P.height+n.mouseAreaYDilation);const C={up:n.color,over:n.color,down:n.pressedColor,out:n.color,disabled:"rgb(176,176,176)"},V=MW(n.color,n.backgroundColor,n.color,E),R=MW(n.pressedColor,n.backgroundColor,n.pressedColor,E),N={up:n.backgroundColor,over:V,down:R,out:R,disabled:n.backgroundColor},M={fireOnHold:!0,fireOnHoldDelay:n.timerDelay,fireOnHoldInterval:n.timerInterval};this.incrementInputListener=new NW(h,No({tandem:n.tandem.createTandem("incrementInputListener"),fire:i=>{e.set(Math.min(n.incrementFunction(e.get()),t.get().max)),n.onInput(i),this.voicingSpeakFullResponse({nameResponse:null,hintResponse:null})}},M)),T.addInputListener(this.incrementInputListener),this.decrementInputListener=new NW(u,No({tandem:n.tandem.createTandem("decrementInputListener"),fire:i=>{e.set(Math.max(n.decrementFunction(e.get()),t.get().min)),n.onInput(i),this.voicingSpeakFullResponse({nameResponse:null,hintResponse:null})}},M)),P.addInputListener(this.decrementInputListener),c.link(e=>{!e&&this.incrementInputListener.interrupt(),T.pickable=e}),d.link(e=>{!e&&this.decrementInputListener.interrupt(),P.pickable=e});const k=e=>{if(null==e)p.string=n.noValueString,p.x=(y-p.width)/2;else if(p.string=n.formatValue(e),"center"===n.align)p.centerX=A.centerX;else if("right"===n.align)p.right=A.right-n.xMargin;else{if("left"!==n.align)throw new Error("unsupported value for options.align: "+n.align);p.left=A.left+n.xMargin}p.centerY=E/2};e.link(k),pS.multilink([h,c],(e,t)=>{kW(e,t,A,this.incrementArrow,N,C)}),pS.multilink([u,d],(e,t)=>{kW(e,t,b,this.decrementArrow,N,C)});const L=this.localBounds.dilated(KS.getDilationCoefficient(this));this.focusHighlight=new KS(Ip.roundedRectangleWithRadii(L.minX,L.minY,L.width,L.height,{topLeft:n.cornerRadius,topRight:n.cornerRadius,bottomLeft:n.cornerRadius,bottomRight:n.cornerRadius})),this.incrementDownEmitter.addListener(e=>{h.value=e?"down":"up"}),this.decrementDownEmitter.addListener(e=>{u.value=e?"down":"up"}),this.addLinkedElement(e,{tandemName:"valueProperty"}),this.mutate(l),this.disposeNumberPicker=()=>{r&&r.dispose(),c.dispose(),d.dispose(),e.hasListener(k)&&e.unlink(k)}}static createIcon(e,t){const i=Vo()({highlightIncrement:!1,highlightDecrement:!1,range:new Hl(e-1,e+1),numberPickerOptions:{pickable:!1,tandem:Lm.OPT_OUT}},t),n=new RW(new zb(e),new ty(i.range),i.numberPickerOptions);return n.removeFromPDOM(),i.highlightDecrement&&(n.decrementInputListener.isOverProperty.value=!0),i.highlightIncrement&&(n.incrementInputListener.isOverProperty.value=!0),n}dispose(){this.disposeNumberPicker(),super.dispose()}setArrowsVisible(e){e||(this.incrementInputListener.interrupt(),this.decrementInputListener.interrupt()),this.incrementArrow.visible=e,this.decrementArrow.visible=e}}class NW extends Sx{constructor(e,t){super(t),pS.multilink([this.isOverProperty,this.isPressedProperty],(t,i)=>{e.set(t&&!i?"over":t&&i?"down":t||i?"out":"up")})}}function MW(e,t,i,n){return new mE(0,0,0,n).addColorStop(0,e).addColorStop(.5,t).addColorStop(1,i)}function kW(e,t,i,n,r,s){if(t)if(n.stroke="black","up"===e)i.fill=r.up,n.fill=s.up;else if("over"===e)i.fill=r.over,n.fill=s.over;else if("down"===e)i.fill=r.down,n.fill=s.down;else{if("out"!==e)throw new Error("unsupported buttonState: "+e);i.fill=r.out,n.fill=s.out}else i.fill=r.disabled,n.fill=s.disabled,n.stroke=s.disabled}fD.register("NumberPicker",RW);class LW extends(CW(cv,0)){constructor(e,t,i){const n=Vo()({arrowsSoundPlayer:Gq,arrowsPosition:"bothRight",arrowsScale:null,arrowButtonFill:"white",arrowButtonStroke:"black",arrowButtonLineWidth:1,deltaValue:1,xSpacing:5,ySpacing:3,numberDisplayOptions:{cornerRadius:5,backgroundStroke:"black"},touchAreaXDilation:0,touchAreaYDilation:0,mouseAreaXDilation:0,mouseAreaYDilation:0,valueProperty:e,enabledRangeProperty:t,disabledOpacity:Bg.DISABLED_OPACITY,interactiveHighlight:"invisible",tandem:Lm.REQUIRED,tandemNameSuffix:"Spinner",phetioFeatured:!0,phetioEnabledPropertyInstrumented:!0},i),r=n.incrementFunction||(e=>e+n.deltaValue),s=n.decrementFunction||(e=>e-n.deltaValue),a=new gz(e,t.value,No({tandem:n.tandem.createTandem("numberDisplay")},n.numberDisplayOptions)),o={baseColor:n.arrowButtonFill,stroke:n.arrowButtonStroke,lineWidth:n.arrowButtonLineWidth,focusable:!1,soundPlayer:n.arrowsSoundPlayer,enabledPropertyOptions:{phetioReadOnly:!0,phetioFeatured:!1}},l=new fF("topBottom"===n.arrowsPosition||"bothRight"===n.arrowsPosition?"up":"right",()=>e.set(r(e.get())),No({tandem:n.tandem.createTandem("incrementButton")},o)),h=new fF("topBottom"===n.arrowsPosition||"bothRight"===n.arrowsPosition?"down":"left",()=>e.set(s(e.get())),No({tandem:n.tandem.createTandem("decrementButton")},o));let u;u||(u="leftRight"===n.arrowsPosition?a.height/l.height:"topBottom"===n.arrowsPosition?a.width/l.width:"bothRight"===n.arrowsPosition?(a.height/2-n.ySpacing/2)/l.height:(a.width/2-n.xSpacing/2)/l.width),n.arrowsScale&&(u*=n.arrowsScale),l.setScaleMagnitude(u),h.setScaleMagnitude(u);a.boundsProperty.link(()=>{"leftRight"===n.arrowsPosition?(l.left=a.right+n.xSpacing,h.right=a.left-n.xSpacing,l.centerY=h.centerY=a.centerY):"topBottom"===n.arrowsPosition?(l.centerX=h.centerX=a.centerX,l.bottom=a.top-n.ySpacing,h.top=a.bottom+n.ySpacing):"bothRight"===n.arrowsPosition?(l.left=h.left=a.right+n.xSpacing,l.bottom=a.centerY-n.ySpacing/2,h.top=a.centerY+n.ySpacing/2):(l.left=a.centerX+n.xSpacing/2,h.right=a.centerX-n.xSpacing/2,l.top=h.top=a.bottom+n.ySpacing)}),(n.touchAreaXDilation||n.touchAreaYDilation)&&(l.touchArea=l.localBounds.dilatedXY(n.touchAreaXDilation,n.touchAreaYDilation),h.touchArea=h.localBounds.dilatedXY(n.touchAreaXDilation,n.touchAreaYDilation),"bothRight"===n.arrowsPosition?(l.touchArea=l.touchArea.shiftedY(-n.touchAreaYDilation),h.touchArea=h.touchArea.shiftedY(n.touchAreaYDilation)):"bothBottom"===n.arrowsPosition&&(l.touchArea=l.touchArea.shiftedX(n.touchAreaXDilation),h.touchArea=h.touchArea.shiftedX(-n.touchAreaXDilation))),(n.mouseAreaXDilation||n.mouseAreaYDilation)&&(l.mouseArea=l.localBounds.dilatedXY(n.mouseAreaXDilation,n.mouseAreaYDilation),h.mouseArea=h.localBounds.dilatedXY(n.mouseAreaXDilation,n.mouseAreaYDilation),"bothRight"===n.arrowsPosition?(l.mouseArea=l.mouseArea.shiftedY(-n.mouseAreaYDilation),h.mouseArea=h.mouseArea.shiftedY(n.mouseAreaYDilation)):"bothBottom"===n.arrowsPosition&&(l.mouseArea=l.mouseArea.shiftedX(n.mouseAreaXDilation),h.mouseArea=h.mouseArea.shiftedX(-n.mouseAreaXDilation))),n.children=[a,l,h],n.keyboardStep=0,n.shiftKeyboardStep=0,n.pageKeyboardStep=0;const c=_.pick(n,cv.REQUIRES_BOUNDS_OPTION_KEYS);super(_.omit(n,cv.REQUIRES_BOUNDS_OPTION_KEYS));const d=()=>{l.enabled=r(e.value)<=t.value.max,h.enabled=s(e.value)>=t.value.min},p=e=>{d()};e.link(p);const m=t=>{e.value=t.constrainValue(e.value),d()};t.link(m);const g=e=>e&&l.pdomClick(),f=e=>e&&h.pdomClick();this.incrementDownEmitter.addListener(g),this.decrementDownEmitter.addListener(f),this.disposeNumberSpinner=()=>{a.dispose(),l.dispose(),h.dispose(),this.incrementDownEmitter.removeListener(g),this.decrementDownEmitter.removeListener(f),e.unlink(p),t.unlink(m)},this.mutate(c),this.numberDisplay=a,this.addLinkedElement(e,{tandemName:"property"})}dispose(){this.disposeNumberSpinner(),super.dispose()}setNumberFormatter(e){this.numberDisplay.setNumberFormatter(e)}}fD.register("NumberSpinner",LW);fD.register("OnOffSwitch",class extends TU{constructor(e,t){super(e,!1,!0,Vo()({trackFillLeft:"white",trackFillRight:"rgb( 0, 200, 0 )"},t))}});fD.register("VSlider",class extends hz{constructor(e,t,i){super(e,t,i=Vo()({orientation:Ql.VERTICAL},i))}});fD.register("VerticalAquaRadioButtonGroup",class extends nq{constructor(e,t,i){super(e,t,Vo()({orientation:"vertical",align:"left"},i))}});fD.register("VerticalCheckboxGroup",class extends aT{constructor(e,t){const i=Vo()({touchAreaXDilation:5,mouseAreaXDilation:5,spacing:10,align:"left",stretch:!0,tandem:Lm.REQUIRED},t),n=tq(e,i.tandem),r=[];i.children=[];for(let s=0;s<e.length;s++){const t=e[s],a=n[s],o=i.spacing/2,l=new Nq(t.property,a,No({tandem:t.tandemName?i.tandem.createTandem(t.tandemName):Lm.OPTIONAL,mouseAreaXDilation:i.mouseAreaXDilation,touchAreaXDilation:i.touchAreaXDilation,mouseAreaYDilation:o,touchAreaYDilation:o},i.checkboxOptions,t.options));r.push(l),i.children.push(l)}super(i),this.disposeVerticalCheckboxGroup=()=>{r.forEach(e=>e.dispose()),n.forEach(e=>e.dispose())}}dispose(){this.disposeVerticalCheckboxGroup(),super.dispose()}});const IW="data:audio/mpeg;base64,//swxAAAB5g/PnT2AAEODWz3MPACATcwAQxWRG8v4t4m5Y0gGrH+vEEIQ0J864QJgfEs//KUlhYscDHWH/BDD+7p8EAQBB3pBAEAQBABg+fwQAAABLbkkl+wAAAAAAApUEcylxWEbBYbjKTtTlM3eamWe5RAcBxA6VypWY/T+Lr1S1waL6rSucRXH9ORv3pvMuaX8aPVHAAHBUpB//syxAMCSChfPF28ABkDiqWd3bC1gSAHIAIB+Eua0PmBBI8GxoUDjBQgFHgkCKwrcSkWU6j9Sd+KaBUriJjhajVnvzMt1d7qnsZ///XxGarCW8ICUBSEMlofMKEEMUxHBpw1wME1UzDAIKgQMlzDhMDDKBify5qB0oNf2gp6peEUEQRlcTW9MN8XxQTaJeim2apgHXh0BA42HdjNLf/7MsQFggh4Wyguaea5EwulXc0k5sOdsU8HATEgJBsocOAYml+fvgPRkTAMqGk6FmJpDTjOn1MGkcUStpHsmIbInFwJGEsLanJYVDH8wCQSw4BWcJUpo5emDQ4bvFJ8R8GGQ8Y04EKYPAAk7BdNV8H2mJ54aS6xWdoQwIjE7LBlCLKCIUyihd/5O1Pr/Z//r//+ugAkgUDASheRbs7/+zLEBQIIMF0i7mknUQqKI43cjOo+4jDKZN4nQ+nnzAIQAIFAOgYZUEPnmTwex2HYpllk6m47QrXB/jCOonH1PVe/P+7f/yX////+oAJ/YCSrrMBgnNhCHMIDzMAgfM3JgRnS+W8QBgr0D4Pqy1k7lMfZVff9q1aA+omBkMhA4OM8FGFw99bPp+T/fX//9dUAKAcCZaSBQNNowTBB//swxAaDB/xNGm7hhtEICaLN3DDSlmkhAGok1mBAQFtknQ4AT4+pYJAiw0w4BwzUW4PaQgrVEGL6z0z0QVwH+d6Zr///6v8oAG7eA3pboQCSbFGAYeB2anAuc/ywAh/BhEZkqxPg7Bp8kJci1ITUM1YE9UZUPaWOT+Ks/zzcz8VejwR+j/T+z9HSADd3AQ+ZeKCgZHp2Fh8NAB5O//syxAkDR9RNFG7hJpD2jqINzpSynmlDBxw8IELTAVYo5IBlgwaHhk9qYTAyl58Dpjtf6q3Dv1vTRnvlv8S/6P9ABicJuxgUDmP6IKqoMDx1iggKEpYCCGUl4HnjMrXBkpxbk2rPIg7z9PwGIK9Ap1blL/0jaJjb9f+W/PU/5aoApe4BRQuWYMAobdPOYFIYaMk6fJDqYhBGg0Dsu//7MsQOgwiUUQZu4MdRBQogTdwY6oFDoaFxGnF+6NKF+px/5Pgxp7nlue5Ehb/4DjJz2n9+z8633/7v/KgFMbgIZImmDYHG86VGIYtGiJdHPZNmA4QJDruegBSAp2mvCtqonzjRyjPTPpc6RzbxeJPndFfzH/Zkv/9X75b/LSHIAAIqqsBDGcsQI0YnBj5+kYCQsu4vQoAi2rOVhXH/+zLED4JGvEEAbm0jUKoO4KmTCVZRFoN0WXzjW0zW6Q28yWOZvKPjXpnMNBsVda1ccCOMpS9GgcVUAh+JxR+hMHbWqv3wolHgh/gLfq3QCfwYlZ2+kmoAAAqSPYAAAZXQtxfw5RFhnCEoyBHegrALYEK6pBnXpBhS/4ci6AoaNlhus1y3kjUghRNDGRIyxJtzBboYMpeic0Op0DSX//swxCMCxQBO96eMy3C2A0AB73hMkPMgl18xMmNDDAXHMEdYykxBTUUzLjk5LjWqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",BW=aO(cO,IW),DW=JD.createLock(IW),OW=new hO;let qW=!1;const YW=()=>{qW||(DW(),qW=!0)},HW=cO.decodeAudioData(BW.buffer,e=>{null===OW.audioBufferProperty.value&&(OW.audioBufferProperty.set(e),YW())},e=>{console.warn("decode of audio data failed, using stubbed sound, error: "+e),OW.audioBufferProperty.set(cO.createBuffer(1,1,cO.sampleRate)),YW()});HW&&HW.then(e=>{null===OW.audioBufferProperty.value&&(OW.audioBufferProperty.set(e),YW())}).catch(e=>{console.warn("promise rejection caught for audio decode, error = "+e),YW()});const GW=new gq(OW,{soundClipOptions:{initialOutputLevel:.8},soundManagerOptions:{categoryName:"user-interface"}});oO.register("boundaryReachedSoundPlayer",GW);const FW="data:audio/mpeg;base64,//swxAAABognHnWRADEriei3OrACCEgYAPOkFXghY6uD++Piw3kA4B4y7hchMBxIxLKSksCwfB8Hw+7wfB8H3/E4P+GP/++D58AABoNsRiAAegAAAcAAwfGEzHKEwATU0FYIw6Dg+OLEOCqwYUAazcxYAwgAWZl5g4CTyjQM3o0EQLO/PjeedH/0g7/quk7v////9CoAAgKS3agA//syxAOACFhpYb2WADkFBWUpz2ROAUr4AUY00DNWPwkiueFpjWamdXncJm4WSUvPYHtdLyIybUkqNbEdOAeIJqJS89odMGRdRGULsKEKKu9sAAFgQA2oDCIoIgGYfBxqSpmFgSkaq7FxnJizGCsESGsoBS/52SlqFCkhXIYlBMPwLKiSRYVd1f///7f/lUfvy2gAAL45ZHAEVS5wEP/7MsQFgkd0HRVM9wJwooOhqMw8TrAOxggWZrdB4KswIKoWwjoMDKpkDpawRH8EDMvQbb5c2fQ5IXBwEGakBD9/3/5ub1lQm4/cLYHDTARtPRS+xTotNKqDqFAVBUFeVBUFU4lBYO8sDQNB3iIGqkxBTUUzLjk5LjWqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr/+zLEFwPAAAGkAAAAIAAANIAAAASqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//swxFsDwAABpAAAACAAADSAAAAEqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//syxJ6DwAABpAAAACAAADSAAAAEqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqg==",zW=aO(cO,FW),UW=JD.createLock(FW),WW=new hO;let XW=!1;const jW=()=>{XW||(UW(),XW=!0)},QW=cO.decodeAudioData(zW.buffer,e=>{null===WW.audioBufferProperty.value&&(WW.audioBufferProperty.set(e),jW())},e=>{console.warn("decode of audio data failed, using stubbed sound, error: "+e),WW.audioBufferProperty.set(cO.createBuffer(1,1,cO.sampleRate)),jW()});QW&&QW.then(e=>{null===WW.audioBufferProperty.value&&(WW.audioBufferProperty.set(e),jW())}).catch(e=>{console.warn("promise rejection caught for audio decode, error = "+e),jW()});const KW=new gq(WW,{soundClipOptions:{initialOutputLevel:.7},soundManagerOptions:{categoryName:"user-interface"}});oO.register("grabSoundPlayer",KW);const ZW="data:audio/mpeg;base64,//swxAAABpAhE1WQgDEChGf3OiJCAAAJRgWMA3lCIUyXzv3PfM52Qw9nimjE2HsTh+X09sHwQBB10u/y4e//+gEAQ5cP/u//4nAABASEQsFsvw9GFpIAMRiGNLEgMlRmNb+1MIjHNu4KFilyMxQYzAAc3e/P+566F6J7olttvvTZ9lv1/6++U+z1qgAJHLdLYAABaRtXAaLgn8Bq//syxAiAiaBvUb22ADjOA6MNz+wKcSQr2BxEgs/qJ0XkEPODBEPhEBEOh7HwdhJLwTjcKQmIaxUepm3yySi6sRnp0hr1J8lYfUroW0RJYrMlFAAMN5mqFGCchxplBCFCZuwLfmAFg8RsPKaZAGhqJlpCZMCBA+iTjFW///////Xb//1B2gACzEgggAM2IOQFMKEH4x1EgzS0KJMJgP/7MsQMAkZUGwtNe0BwqQNgNawkjoI6rU0xQyo8AgUADX4Q45so+ubX4c/Qr//w0AVA5axJGw1awwFk8Bk0bAWushk77jjeDg6Vcjgr38sDQNfUJZ3KgqCoK0xBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+zLEIYPAAAGkAAAAIAAANIAAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//swxGWDwAABpAAAACAAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVMQU1FMy45OS41VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//syxKkDwAABpAAAACAAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVMQU1FMy45OS41VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7MsS7g8AAAaQAAAAgAAA0gAAABFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+zLEu4PAAAGkAAAAIAAANIAAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//swxLwDwAABpAAAACAAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",JW=aO(cO,ZW),$W=JD.createLock(ZW),eX=new hO;let tX=!1;const iX=()=>{tX||($W(),tX=!0)},nX=cO.decodeAudioData(JW.buffer,e=>{null===eX.audioBufferProperty.value&&(eX.audioBufferProperty.set(e),iX())},e=>{console.warn("decode of audio data failed, using stubbed sound, error: "+e),eX.audioBufferProperty.set(cO.createBuffer(1,1,cO.sampleRate)),iX()});nX&&nX.then(e=>{null===eX.audioBufferProperty.value&&(eX.audioBufferProperty.set(e),iX())}).catch(e=>{console.warn("promise rejection caught for audio decode, error = "+e),iX()});const rX=new gq(eX,{soundClipOptions:{initialOutputLevel:.7},soundManagerOptions:{categoryName:"user-interface"}});oO.register("releaseSoundPlayer",rX);const sX="data:audio/mpeg;base64,//swxAADBmUg7gCM3gjdH+EKkCADXz1BJf+Sv+D////B/+wLRCz8Ob7nQMDFvER3BwvY1oeojPpiEQYQL0nv/PTaE9Mj+CGSDyAlZCn+8ALh+7wp/1AwM6X1dlkJsf90b/9q79N/rXbyJO1mvPWrJd51MyMpH2ewI2SON/D/ewqahUQACtOQSosYwemRvEQowgEMcAgGEnpMUTvv//syxA4ACWhZFlm3gBFDi2o3N4ACrPHCPBpQhfbtmAGADTeZ8V0FwZZz7p/u/7+JQnto6loivZdV4Z1XlUuVdY1Lv+XQAAaMTt1uEgAAAAAAAQ8AArHCEEcJahjISY0EG2FI4VnM4hqpkY8GtFIRBaKjcwWceAuhbBTW6J8QDSFrH/mEBxb5d8U53t7PlPAT2yll2jZVACnAARxCcv/7MsQDgkgkcTrd5IA5BAvmCd0NJwsw0uCYBQDJggBQmDskmY6QmZhRg+GCmBMoavWoyp1qZ9gRJUQaaFMf69Sa+yTfVe4x/3OVdnVKMdKDDvJ8gUKw4NzA4GAUJBhODx2QtRhi5B4/L5/Up6DBhyokLWexBtC7iXyfKsZbB1IHwsB9K4vS+CEluYQqOR1866oAMyABVggADJrmg5n/+zLEBgJIfGE2zHjFsQIJ5MmvbIl6YGQHxijkGGCiVoaIA7gQAgYCIETlr1EgBV3RdMlXzWbjsuq6UvqokR/EJJkyOmHTj41omg1p0jAzELohQsQEB1CaikKiLmCCpiHEnncwfadxBGfHpoo+CBIBDCLIqAshdpPKZeluUP5zbxQ5Fvu3t44/T/SvuKjVZsAAAibS0LyzYwBg4UmQ//swxAeCSRxvOG5oy2kGiScdjuSUyKaeHhoOrm7C+YolB04mHJEmPFg4ujKsBTWWAOCpfJlb1d2tzlTmTiLTV3bp7za0Z/919hjJC4APjwAlCbqVZYa9YIgfTGCoeGQZ8GAyeg5QzFUojk+KBe8LhA45CbHJ6Wx5yp6IS93Z2hpf1lDT/OnWyBVfjBwNDw7BVQA2AAC20yWHGcEh//syxAWCSLRTNsz3ZLkJC2fZnrDmJOtswTCEwVN8w4N80jCgRg+bgQ2ZlAGvCpvr+ZeNGYDibCEiEtbiF7+U8GyfPP4FqrmjcgsZvxZu2TncBoq1zVeNoY3tzesBa4DAHRBDkHKgFGZqaGFJMGK8lmeI9GGYaDIEgYMS87YKktC0Pz1IYF1ycmq1d0oztLpbo5gygAAB90/gLdWCH//7MsQFgkeAWThscMVhCQzoqY2xHxCNEsAkwwkGjTICZWaqqJgEyHApoFgGLG1qpMAIEeuJRoLRRABh1Kd0TrzK2zTrRhwIQoA4D5tDKCOUoYhib/itAWJjBk7QIQA3VAMuAxkaMcQTn4E7xdMJHCYATHJ8d7xtudt5pTp/HOv92wABEZXvyYJqAACc4AAh5LJFIWLDCEUAnCYgIj7/+zLECgJHZGNFLG0I8N6L51mNmK4yEwQ9TLMqnwSCuIOiZh5cUHAqAFrkflFRxoKSzB1zNV+bVtzTFHMF8HTNtWTD7ASgQgc8wMwEIoVoSwAJZC4xnnwayFLcWOArlnjWXqlphKpea1oUJjGplVrUSVbIaiwACIKXqAIbCkJolC4htvvMPaJlGBGYs2GDTZ7rCAg0SGnnVO/c3LyA//swxBSARyBfQkzsyrjmjOoo/bCnJEpkPd0gZ9iC7vtGGGKl2kAAGUwCYNUOItz9IT7nuDEarEhGGGU6xn4Q6OKkFzuWPvOXdUnrrRKeZPeqVXa/AuutA8vEkmy0FMVcAAVUU0IjaWiOiMxgzCUhZ452o+UIOYiwkOM20SlAsByQFGEgK1KgqRcBUIw4K60iIsW3kfsKtgyMuAJc//syxB6CRyRfPE1warjhDShc/aSnMUBRTh/IBPpIoaDjIcYxIsSxGgc6qlMXBVILmTyCxPmJV0cW5rMG2YbGyBvyyM8l55zY60oAAIU4AAAIaSrYqIQEfElFgTjnMJHw2qQzO5RX6DQMYziCHJljXIGj1Lg/uRPwjmJqURp8anVTfz/nwJWgAAylAgV/25sFV0/TWgoQTu6sMMgQ5f/7MsQpgEeEa0NM8Mcw4ozpacyZHxExUrTH9IkGJYwZHotnZK1ACitNzotE/KtCjBtkWyT9CpJAAE04AAAIGSFa0o8/kXFQCJSNOjlJMXBfPZVljvn0SHByx0nZmaLtLZhUWI5MxZ8Vqyq/kRNb2FhWAQhF4JzlAWIwJGUCBBgo+ZpSGWanAYmIEgCUkgQuDGq0yGTougTEXYxG8sf/+zLEMwBHPFtBTuUouOEI5pm/bMZ7l8v/mPO/hZqS//RVAAAOQAAABeSt7bAgBtszxhYB4GhfmCazGYHQSxoQqCi4uCYPNhyKv5nqAI+IEn81YVP23nVTg1UKuJgFBcym6jqc1tgSKh7+GcQgsYlghYvyKyCSZhDpfp7VtsLhMhne1ss5ulprWdgGhF1////+lQAAmgBXCzVTjx0u//swxD2CR1RJMU9tKKDTh+Xhn2jGmIARjRpwsB9K/Rp2OQcULFsrMTgiJbVVFARDTgVIrO2LM68uO+Xe6zoLygqYDAHXZYv9C93GliIAACIpsJhZlACo2KnowEyySIHOkHgQ+aPVbNfq0Idrtr///3feAEAAQNgC8i/YOQQHX0FADwKHQYrzKQgCvBcYRHzAgjoF1LnpKoJPe2+e//syxEkCBsBJLw13JjDHhual3LEWrn0OVaiFf///////+sxI8BpgATI1M9DEswQBM5HQWsHIy9CZMJBRtJKIlYABR29sLIgCFgqVFEs/rzNwr16lxYzk0Z+XTSEQCCAaYLrFgYBAgVEmUMG/hn5EUmnhYmUaAkKOhzS6R4YwrNB5+N09H+Wozq88qPEZf/7//+x3rXWiaAA8DIxYRv/7MsRZAsboNyjMe0Rg4YcjQb9swKRhyQCk0QC4oGAk5NY/jOVggMbME4ayRZYUkctGgKLVUbKAgFH2NxZ/52lux9zP73//c1l0f////9m/zSoAYUYAACIg6AStCbiiMpEADA0QTO3szEocjNHR5sswK0CJHEaIaHHaDxon+uQx2/vt1HT+z////6cb9qVYwBnDKpuBeYELM+DoUNT/+zLEZQMHeDkmTXdGMQmJI8m/bMDzfQbiMjoeMxKQWjBMAHMKIOwUOcyQHoIyJdArUH6cSRQxIZHHqep/7/dm+gAPGACIGIX5smYGDLCmKBGdTnm6GiiZYY1YTx1RIeKgO2Q9j4eT/DoIYkNeluT+WUtBez//+mz+pX7jFgKFVaY0D5jYKGAAYYPFpiQqGY9KaK18Zj8BnHvCuFxe//swxGmCR2RHKu7pKLDtiOMBv2jIIxmZF8Y0QmBDgMMlANpjL4zGpXS16K1hPX0GxomhBGQuZhxKHHQwKmNkAiHzBdYytG2gIEWD2sLFBWQnbWwKXmHg0MBwWp554rO1RUAB2G/VFKedTFtPHfo/+z/r8+Y+NgyRCPYKpxnY+AAYEmJoRObfqEZknjeGtw6MiMOSJyXKGrAElmIA//syxHGDx1A3IG17JgDsh2LBz3DAAULJfLtM4iEspM564AP//////R7/SgAKAADCBEEJICixwVRlMVATFDgzGtNGA7sxnAzxgeBgbKonCvXFQykQQgswmAL+UWfmxSfdMGV////UJHIBCjtSJHYxkuBwSIAc0iWMzl+4w9wNwj+AZkmFQsde7wdWgcASELlYukkOySVRrlq3XDW6Nv/7MsR6g4iMLxxt+2YQ+Qbiwb9wwKKMJiAaczkM0yBfYsOOo5MLlbkwJQtDGxZDD8EBg6GmDOQUHgGpAeFEvrRuMVKX9ascvQ1Y0DQDhBYpAJUAiQIIqHhhQzaw9Z2DOxjMuhBipf8yY7ywAX0T2XLRxQNY4Ifo06c5/f93T0//o/+6T1MOpjIiBEQCxg0RQxrE7RA+1oQ1BEwwgA7/+zDEfQPHXDUabfuGANeG4oG/cMBIYwLBQxCV4HGcjSiEJBO0KRUtDKrdm4ef//////1P0SAWJAAUgK8B7ha0wDSy5dQ2dzYbwzNQEw1aX4VYcWMDpDQ1tjRerYl7y6marf//orbXQzEH0HP0U0AISQC0hKmN0MDByAK8YAOOZjDCSAMDgE0adk+VJhTBMEBZgZAS8FWW39NCYrv/+zLEiAMGjDsWDXuGAOmGo82uDNqf///p/6v9uvpCgCIxk4AHdsBA5CBAYnMSCT5mqzTUsDgjzYoE5TwUAV2ZRKRI7GobqUUvzvVwO7/////9vxXVYK9yiYaJgUkDVQUggWtZJMswWJzvUFMzDEcES1TkN+hVkFtgYfVyshBp9CVHASd9/+lfVoffs/aT/+3oSkBBgT5AlYk6rQms//syxJSDBzw1FA3roIDkBWNNnujApKRAhozVgIwtAQowEhGngjd6dRpDYQBq26snZ3+jl3//5H/9LPxm6ggbKSQTGkBwJDr9AEAZRWZh0SYgjAAdh4nEPHBJ1I+L20Vnud4NBUNXf//9lH9PR6myyEnLxTHIxkgIFsgoOhuNFBgNIiwaOJzpdEzxASS7XUMuZitqGWgTH0gqoIlpBP/7MsSfA4boLRZte2YA5YaiAb7owLmO6v9fR6/KM+v+tPb6ahpQsqVkpWKwJLBg4DAOB0YyeFg4COajuYRQYQP8HpT1wceQNLJHn2f///47Y9VxKxrhCkWPuCFhWo81A1FdTJHImAMYU1ZBCzE1tMDAQ7B43PHRwJxW4JQqQFtJU2s7///1dLdz7TLkFTS2Co0qLGjYngEk7e9diUP/+zDEqoMHICsabPMmEM4Eow2e5MIIZrVcxtoYKA8xbIDmUnGddoh0rLaVhaELboGA3I///+32tj0qUhAXA4lABA0VFRzYs5Bxwo8cRAZqIgBjC0wyrCVrVBy0Sl3U0lLcrNkmJX3vXQ9xHrF1kft9KnLd0/5XIPY0tSK0DTykPgmqBACpusgAjZhT0YwByozh1IJWKp2KmeLt9Ov/+zLEt4MG7C8QLXcGENuFYg2eZMLR2pQ6RirmqAoCYKg0PHnDwUA5I6x8afWSCCjoaGWkABNLoLs3MMFnGvzaGfMY2VvKaYxjfVvVP6f/9DGVtSlb//VsrzTGDCnJFXIg08GgaduIVUxBTUUzLjk5LjNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//syxMQDx4gzCgzwxsDphiFBzJkQVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7MsTMggc4KQgN5YhA0YShqJwkmlVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+zDE2QBG9BsHQYXiANIdX3A0iMBVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU=",aX=aO(cO,sX),oX=JD.createLock(sX),lX=new hO;let hX=!1;const uX=()=>{hX||(oX(),hX=!0)},cX=cO.decodeAudioData(aX.buffer,e=>{null===lX.audioBufferProperty.value&&(lX.audioBufferProperty.set(e),uX())},e=>{console.warn("decode of audio data failed, using stubbed sound, error: "+e),lX.audioBufferProperty.set(cO.createBuffer(1,1,cO.sampleRate)),uX()});cX&&cX.then(e=>{null===lX.audioBufferProperty.value&&(lX.audioBufferProperty.set(e),uX())}).catch(e=>{console.warn("promise rejection caught for audio decode, error = "+e),uX()});const dX=new gq(lX,{soundClipOptions:{initialOutputLevel:.39,enabledDuringPhetioStateSetting:!0},soundManagerOptions:{categoryName:"user-interface"}});oO.register("resetAllSoundPlayer",dX);const pX="data:audio/mpeg;base64,//swxAAABriDQRQRgAEmkW2XHpAAAJQAAHgAAGAAAABIDu4cDd3/r/1wAAAAAARC/9EREd3d3PQDFg/D/lAfflAx/BMH9QP/ghBDaMSKQDL9Jl8zrxkLJ1driXbAMCtXKORoVLbBiwvIKx8m21HBZEfMq/0x/+KVG0Sv/////Uc0dO+i8Kkj3feKlhICwuZ+X8KkA4p+8BQpQAET//syxAOAB+BfSzzDADDmiiFBjAzgIQWVhDQDISg5HQzTHx2LQbHxpFGUeaRR9PJpFGqnPX9VQTICeoDA0eWdqBpYb9GV2lga/wVf/Boz4EawwCWbQYHfhmyxUqUCkE48QHSMRwuglOIhIgJrr1hocKgoLSa/2MFBBwSJBQkaQDIkNVC6Xfi9TEFNRTMuOTkuM1VVVVVVVVVVVVVVVQ==",mX=aO(cO,pX),gX=JD.createLock(pX),fX=new hO;let yX=!1;const EX=()=>{yX||(gX(),yX=!0)},vX=cO.decodeAudioData(mX.buffer,e=>{null===fX.audioBufferProperty.value&&(fX.audioBufferProperty.set(e),EX())},e=>{console.warn("decode of audio data failed, using stubbed sound, error: "+e),fX.audioBufferProperty.set(cO.createBuffer(1,1,cO.sampleRate)),EX()});vX&&vX.then(e=>{null===fX.audioBufferProperty.value&&(fX.audioBufferProperty.set(e),EX())}).catch(e=>{console.warn("promise rejection caught for audio decode, error = "+e),EX()});const AX=new gq(fX,{soundClipOptions:{initialOutputLevel:.7},soundManagerOptions:{categoryName:"user-interface"}});oO.register("softClickSoundPlayer",AX);const bX=new gq(uY,{soundClipOptions:{initialOutputLevel:.7},soundManagerOptions:{categoryName:"user-interface"}});oO.register("stepBackwardSoundPlayer",bX);const SX=new gq(AY,{soundClipOptions:{initialOutputLevel:.7},soundManagerOptions:{categoryName:"user-interface"}});oO.register("stepForwardSoundPlayer",SX);class _X extends kO{constructor(e,t){super(t),this.soundClips=[];for(let i=0;i<e.length;i++){const t=e[i],n=new BO(t.sound,t.options);n.connect(this.soundSourceDestination),this.soundClips.push(n)}}play(){this.soundClips.forEach(e=>e.play())}stop(){this.soundClips.forEach(e=>e.stop())}connect(e){this.soundClips.forEach(t=>t.connect(e))}dispose(){this.soundClips.forEach(e=>e.dispose()),super.dispose()}get isPlaying(){return _.some(this.soundClips,e=>e.isPlaying)}setOutputLevel(e,t){this.soundClips.forEach(i=>i.setOutputLevel(e,t))}}oO.register("CompositeSoundClip",_X);class xX extends BO{constructor(e,t,i,n){const r=Vo()({initialOutputLevel:.7,loop:!0,trimSilence:!0,fadeStartDelay:.2,fadeTime:.15,delayBeforeStop:.1,playbackRateSpanOctaves:2,playbackRateCenterOffset:0,resetInProgressProperty:null,stopOnDisabled:!1},n);super(t,r),this.fadeTime=r.fadeTime,this.delayBeforeStop=r.delayBeforeStop,this.nonFadedOutputLevel=void 0===r.initialOutputLevel?1:r.initialOutputLevel,this.remainingFadeTime=0,this.setOutputLevel(0,0);const s=e=>{if(!r.resetInProgressProperty||!r.resetInProgressProperty.value){const t=Math.log(e/i.min)/Math.log(i.max/i.min),n=Math.pow(2,(t-.5)*r.playbackRateSpanOctaves)+r.playbackRateCenterOffset;this.setPlaybackRate(n),this.setOutputLevel(this.nonFadedOutputLevel),this.isPlaying||zE.value||this.play(),this.remainingFadeTime=r.fadeStartDelay+r.fadeTime+this.delayBeforeStop}};e.lazyLink(s),r.stopOnDisabled&&this.fullyEnabledProperty.lazyLink(e=>{!e&&this.stop(wO.DEFAULT_LINEAR_GAIN_CHANGE_TIME)}),this.disposeContinuousPropertySoundGenerator=()=>e.unlink(s)}dispose(){this.disposeContinuousPropertySoundGenerator(),super.dispose()}step(e){if(this.remainingFadeTime>0){if(this.remainingFadeTime=Math.max(this.remainingFadeTime-e,0),this.remainingFadeTime<this.fadeTime+this.delayBeforeStop&&this.outputLevel>0){const e=Math.max((this.remainingFadeTime-this.delayBeforeStop)/this.fadeTime,0);this.setOutputLevel(e*this.nonFadedOutputLevel)}0===this.remainingFadeTime&&this.isPlaying&&this.stop(0)}}reset(){this.stop(0),this.remainingFadeTime=0}}oO.register("ContinuousPropertySoundGenerator",xX);const wX="data:audio/mpeg;base64,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VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",TX=aO(cO,wX),PX=JD.createLock(wX),CX=new hO;let VX=!1;const RX=()=>{VX||(PX(),VX=!0)},NX=cO.decodeAudioData(TX.buffer,e=>{null===CX.audioBufferProperty.value&&(CX.audioBufferProperty.set(e),RX())},e=>{console.warn("decode of audio data failed, using stubbed sound, error: "+e),CX.audioBufferProperty.set(cO.createBuffer(1,1,cO.sampleRate)),RX()});NX&&NX.then(e=>{null===CX.audioBufferProperty.value&&(CX.audioBufferProperty.set(e),RX())}).catch(e=>{console.warn("promise rejection caught for audio decode, error = "+e),RX()});const MX=CX;class kX{constructor(e,t,i){const n=Vo()({tolerateOutOfRangeValues:!1},i);this.minValue=e.min,this.maxValue=e.max,this.span=e.getLength(),this.numBins=t,this.options=n}mapToBin(e){this.options.tolerateOutOfRangeValues;const t=(e-this.minValue)/this.span;return Math.min(Math.floor(t*this.numBins),this.numBins-1)}}oO.register("BinMapper",kX);const LX=kX;class IX extends BO{constructor(e,t,i){const n=Vo()({sound:MX,initialOutputLevel:1,numBins:7,playbackRateRange:new Hl(1,1),alwaysPlayOnChangesProperty:null,playSoundAtMin:!0,playSoundAtMax:!0,outOfRangeValuesOK:!1},i);super(n.sound,n);const r=new LX(t,n.numBins,{tolerateOutOfRangeValues:n.outOfRangeValuesOK}),s=(e,i)=>{const s=r.mapToBin(e),a=r.mapToBin(i);if(n.alwaysPlayOnChangesProperty&&n.alwaysPlayOnChangesProperty.value||e===t.min&&n.playSoundAtMin||e===t.max&&n.playSoundAtMax||s!==a){const i=(e-t.min)/t.getLength()*(n.playbackRateRange.max-n.playbackRateRange.min)+n.playbackRateRange.min;this.setPlaybackRate(i),this.play()}};e.lazyLink(s),this.disposeDiscreteSoundGenerator=()=>{e.unlink(s)}}dispose(){this.disposeDiscreteSoundGenerator(),super.dispose()}}oO.register("DiscreteSoundGenerator",IX);class BX extends kO{constructor(e,t){const i=Vo()({initialPlaybackRate:1},t);super(i),this.activeBufferSources=[],this.valueToWrappedAudioBufferMap=e,this.localGainNode=this.audioContext.createGain(),this.localGainNode.connect(this.soundSourceDestination),this.fullyEnabledProperty.lazyLink(e=>{e||this.stopAll()}),this.playbackRate=void 0===i.initialPlaybackRate?1:i.initialPlaybackRate,this.audioContextStateChangeListener=null,this.timeOfDeferredPlayRequest=Number.NEGATIVE_INFINITY}playAssociatedSound(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=this.valueToWrappedAudioBufferMap.get(e);if("running"===this.audioContext.state){if(this.fullyEnabled&&i.audioBufferProperty.value){const e=this.audioContext.currentTime;this.localGainNode.gain.cancelScheduledValues(e),this.localGainNode.gain.setValueAtTime(1,e);const n=this.audioContext.createBufferSource();n.buffer=i.audioBufferProperty.value,n.playbackRate.setValueAtTime(this.playbackRate,this.audioContext.currentTime),n.connect(this.localGainNode),this.activeBufferSources.push(n),n.onended=()=>{const e=this.activeBufferSources.indexOf(n);e>-1&&this.activeBufferSources.splice(e,1)},n.start(e+t)}}else this.audioContextStateChangeListener&&_O.removeStateChangeListener(this.audioContext,this.audioContextStateChangeListener),this.timeOfDeferredPlayRequest=Date.now(),this.audioContextStateChangeListener=()=>{(Date.now()-this.timeOfDeferredPlayRequest)/1e3<.2&&this.playAssociatedSound(e,.1),_O.removeStateChangeListener(this.audioContext,this.audioContextStateChangeListener),this.audioContextStateChangeListener=null},_O.addStateChangeListener(this.audioContext,this.audioContextStateChangeListener)}setPlaybackRate(e){this.playbackRate=e}stopAll(){const e=this.audioContext.currentTime+.1;this.localGainNode.gain.linearRampToValueAtTime(0,e),this.activeBufferSources.forEach(t=>{t.stop(e)}),this.activeBufferSources.length=0}}oO.register("MultiClip",BX);const DX=BX,OX=wO.DEFAULT_PARAM_CHANGE_TIME_CONSTANT;class qX extends kO{constructor(e){const t=Vo()({noiseType:"pink",lowPassCutoffFrequency:null,highPassCutoffFrequency:null,centerFrequency:null,qFactor:1,lfoInitiallyEnabled:!1,lfoInitialFrequency:2,lfoInitialDepth:1,lfoType:"sine"},e);super(t);const i=this.audioContext.currentTime;let n,r;t.lowPassCutoffFrequency&&(n=this.audioContext.createBiquadFilter(),n.type="lowpass",n.frequency.setValueAtTime(t.lowPassCutoffFrequency,i)),t.highPassCutoffFrequency&&(r=this.audioContext.createBiquadFilter(),r.type="highpass",r.frequency.setValueAtTime(t.highPassCutoffFrequency,i)),t.qFactor&&t.centerFrequency?(this.bandPassFilter=this.audioContext.createBiquadFilter(),this.bandPassFilter.type="bandpass",this.bandPassFilter.frequency.setValueAtTime(t.centerFrequency,i),this.bandPassFilter.Q.setValueAtTime(t.qFactor,i)):this.bandPassFilter=null;const s=2*this.audioContext.sampleRate;this.noiseBuffer=this.audioContext.createBuffer(1,s,this.audioContext.sampleRate);const a=this.noiseBuffer.getChannelData(0);let o;if("white"===t.noiseType)for(let h=0;h<s;h++)a[h]=2*ep.nextDouble()-1;else if("pink"===t.noiseType){let e=0,t=0,i=0,n=0,r=0,l=0,h=0;for(let u=0;u<s;u++)o=2*ep.nextDouble()-1,e=.99886*e+.0555179*o,t=.99332*t+.0750759*o,i=.969*i+.153852*o,n=.8665*n+.3104856*o,r=.55*r+.5329522*o,l=-.7616*l-.016898*o,a[u]=e+t+i+n+r+l+h+.5362*o,a[u]*=.11,h=.115926*o}else{if("brown"!==t.noiseType)throw new Error("unexpected value for noiseType: "+t.noiseType);{let e=0;for(let t=0;t<s;t++)o=2*ep.nextDouble()-1,a[t]=(e+.02*o)/1.02,e=a[t],a[t]*=3.5}}this.noiseSource=null,this.lfo=this.audioContext.createOscillator(),this.lfo.type=t.lfoType,this.lfo.frequency.setValueAtTime(t.lfoInitialFrequency,i),this.lfo.start(),this.lfoAttenuatorGainNode=this.audioContext.createGain(),this.lfoAttenuatorGainNode.gain.value=t.lfoInitialDepth/2,this.lfo.connect(this.lfoAttenuatorGainNode),this.lfoControlledGainNode=this.audioContext.createGain(),this.lfoControlledGainNode.gain.value=.5,t.lfoInitiallyEnabled?(this.lfoAttenuatorGainNode.gain.setTargetAtTime(.5,this.audioContext.currentTime,OX),this.lfoAttenuatorGainNode.connect(this.lfoControlledGainNode.gain)):this.lfoAttenuatorGainNode.gain.setTargetAtTime(1,this.audioContext.currentTime,OX),this.lfoControlledGainNode.connect(this.soundSourceDestination);let l=this.lfoControlledGainNode;r&&(r.connect(l),l=r),n&&(n.connect(l),l=n),this.bandPassFilter&&(this.bandPassFilter.connect(l),l=this.bandPassFilter),this.noiseSourceConnectionPoint=l,this.isPlaying=!1,this.timeOfDeferredStartRequest=Number.NEGATIVE_INFINITY,this.audioContextStateChangeListener=e=>{"running"===e&&this.isPlaying&&(this.start(),_O.removeStateChangeListener(this.audioContext,this.audioContextStateChangeListener))}}start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if("running"===this.audioContext.state){const t=this.audioContext.currentTime;this.isPlaying||(this.noiseSource=this.audioContext.createBufferSource(),this.noiseSource.buffer=this.noiseBuffer,this.noiseSource.loop=!0,this.noiseSource.connect(this.noiseSourceConnectionPoint),this.noiseSource.start(t+e))}else this.timeOfDeferredStartRequest=Date.now(),_O.hasListener(this.audioContext,this.audioContextStateChangeListener)||_O.addStateChangeListener(this.audioContext,this.audioContextStateChangeListener);this.isPlaying=!0}stop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.isPlaying&&this.noiseSource&&(this.noiseSource.stop(e),this.noiseSource=null),this.isPlaying=!1}setLfoFrequency(e){this.lfo.frequency.setTargetAtTime(e,this.audioContext.currentTime,OX)}setLfoDepth(e){this.lfoAttenuatorGainNode.gain.setTargetAtTime(e/2,this.audioContext.currentTime,.05)}setLfoEnabled(e){e?(this.lfoAttenuatorGainNode.gain.setTargetAtTime(.5,this.audioContext.currentTime,OX),this.lfoAttenuatorGainNode.connect(this.lfoControlledGainNode.gain)):(this.lfoAttenuatorGainNode.disconnect(this.lfoControlledGainNode.gain),this.lfoAttenuatorGainNode.gain.setTargetAtTime(1,this.audioContext.currentTime,OX))}setBandpassFilterCenterFrequency(e,t){t=t||OX,null!==this.bandPassFilter&&this.bandPassFilter.frequency.setTargetAtTime(e,this.audioContext.currentTime,t)}}oO.register("NoiseGenerator",qX);class YX extends kO{constructor(e){const t=Vo()({initialFrequency:440,initialWaveformType:"sine"},e);super(t),this.oscillatorNode=null,this.frequency=t.initialFrequency,this.waveformType=t.initialWaveformType}play(){this.oscillatorNode||(this.oscillatorNode=cO.createOscillator(),this.oscillatorNode.type=this.waveformType,this.oscillatorNode.frequency.setValueAtTime(this.frequency,cO.currentTime),this.oscillatorNode.connect(this.mainGainNode),this.oscillatorNode.start())}stop(){this.oscillatorNode&&(this.oscillatorNode.stop(),this.oscillatorNode=null)}setWaveformType(e){this.waveformType=e,this.oscillatorNode&&(this.oscillatorNode.type=e)}}oO.register("OscillatorSoundGenerator",YX);class HX extends kO{constructor(e){const t=Vo()({pitchRange:new Hl(220,660),numPopGenerators:8},e);super(t),this.pitchRange=t.pitchRange;const i=this.audioContext.createDynamicsCompressor(),n=this.audioContext.currentTime;i.threshold.setValueAtTime(-3,n),i.knee.setValueAtTime(0,n),i.ratio.setValueAtTime(12,n),i.attack.setValueAtTime(0,n),i.release.setValueAtTime(.25,n),i.connect(this.soundSourceDestination),this.soundSources=[],_.times(t.numPopGenerators,()=>{const e=this.audioContext.createOscillator(),n=this.audioContext.currentTime;e.type="sine",e.frequency.setValueAtTime(t.pitchRange.min,n),e.start(0);const r=this.audioContext.createGain();r.gain.setValueAtTime(0,n),e.connect(r),r.connect(i),this.soundSources.push({oscillator:e,gainNode:r})}),this.nextSoundSourceIndex=0}playPop(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.02;if(!this.fullyEnabled)return;const i=this.pitchRange.min,n=i+e*(this.pitchRange.max-i),r=this.soundSources[this.nextSoundSourceIndex];this.nextSoundSourceIndex=(this.nextSoundSourceIndex+1)%this.soundSources.length;const s=this.audioContext.currentTime;r.gainNode.gain.cancelScheduledValues(s),r.oscillator.frequency.setValueAtTime(n/2,s),r.gainNode.gain.setValueAtTime(0,s),r.oscillator.frequency.linearRampToValueAtTime(2*n,s+t),r.gainNode.gain.setTargetAtTime(1,s,.005),r.gainNode.gain.setTargetAtTime(0,s+t,.005)}}oO.register("PitchedPopGenerator",HX);class GX extends DX{constructor(e,t,i){const n=Vo()({linkLazily:!0},i);super(t,n);const r=e=>{this.playAssociatedSound(e)};n.linkLazily?e.lazyLink(r):e.link(r),this.disposePropertyMultiClip=()=>{e.unlink(r)}}dispose(){this.disposePropertyMultiClip()}}oO.register("PropertyMultiClip",GX);class FX extends kO{constructor(e,t){const i=Vo()({initialOutputLevel:.7,soundClipOptions:null,arpeggiate:!1,arpeggiateTime:.1,chordPlaybackRates:[Math.pow(2,1/12),Math.pow(2,4/12),Math.pow(2,7/12)]},t);i.soundClipOptions,super(i),this.arpeggiate=i.arpeggiate,this.arpeggiateTime=i.arpeggiateTime,this.playbackSoundClips=i.chordPlaybackRates.map(t=>{const n=new BO(e,Po({initialPlaybackRate:t},i.soundClipOptions));return n.connect(this.soundSourceDestination),n}),this.isPlayingProperty=Rb.or(this.playbackSoundClips.map(e=>e.isPlayingProperty))}play(){this.playbackSoundClips.forEach((e,t)=>{const i=this.arpeggiate?t*this.arpeggiateTime/this.playbackSoundClips.length:0;e.play(i)})}stop(){this.playbackSoundClips.forEach(e=>{e.stop()})}dispose(){this.playbackSoundClips.forEach(e=>e.dispose()),this.playbackSoundClips.length=0,super.dispose()}}oO.register("SoundClipChord",FX);class zX extends qb{constructor(e){const t=Vo()({frequencyProperty:null,depthProperty:null,waveformProperty:null},e);super(t),this.myEnabledProperty=this.enabledProperty,this.frequencyProperty=t.frequencyProperty||new zb(5),this.depthProperty=t.depthProperty||new zb(.9),this.waveformProperty=t.waveformProperty||new ty("sine"),this.modulatedGainNode=cO.createGain(),this.modulatedGainNode.gain.value=.5;const i=cO.createGain();i.connect(this.modulatedGainNode.gain);let n=null;const r=e=>{const t=cO.currentTime;if(e){const e=this.depthProperty.value;i.gain.setValueAtTime(e/2,cO.currentTime),this.modulatedGainNode.gain.setValueAtTime(1-e/2,cO.currentTime),n=cO.createOscillator(),n.frequency.setValueAtTime(this.frequencyProperty.value,t),n.type=this.waveformProperty.value,n.connect(i),n.start()}else n.stop(),n=null,this.modulatedGainNode.gain.setValueAtTime(1,t)};this.enabledProperty.link(r);const s=e=>{n&&(i.gain.setValueAtTime(e/2,cO.currentTime),this.modulatedGainNode.gain.setValueAtTime(1-e/2,cO.currentTime))};this.depthProperty.link(s);const a=e=>{n&&(n.type=e)};this.waveformProperty.link(a);const o=e=>{n&&n.frequency.setValueAtTime(e,cO.currentTime)};this.frequencyProperty.link(o),this.disposeAmplitudeModulator=()=>{this.enabledProperty.unlink(r),this.depthProperty.unlink(s),this.waveformProperty.unlink(a),this.frequencyProperty.unlink(o)}}dispose(){this.disposeAmplitudeModulator(),super.dispose()}getConnectionPoint(){return this.modulatedGainNode}connect(e){this.modulatedGainNode.connect(e)}}oO.register("AmplitudeModulator",zX);class UX extends AudioWorkletNode{constructor(e){const t=Vo()({logZeroValues:!1},e);super(cO,"peak-detector"),this.port.onmessage=e=>{if(void 0!==e.data.peak){const i=e.data.peak;(i>0||t.logZeroValues)&&console.log("peak = "+i)}}}}console.log("loading peak-detector module on audio rendering thread..."),cO.audioWorklet.addModule("../../tambo/js/peak-detector.js").then(()=>{console.log("peak detector worklet loaded successfully")}).catch(e=>{console.warn("error while loading peak detector worklet, peak detector probably won't work, error: "+e)}),oO.register("PeakDetectorAudioNode",UX);const WX=AB("TAMBO");oO.register("TamboStrings",WX);const XX=new el("Float64ArrayIO",{valueType:Float64Array,toStateObject:e=>{const t=[];return e.forEach(e=>t.push(e)),t},fromStateObject:e=>new Float64Array(e),stateSchema:Zo.asValue("Float64Array",{isValidValue:e=>Array.isArray(e)&&void 0===e.find(e=>"number"!=typeof e)}),applyState:(e,t)=>e.set(t)});zo.register("Float64ArrayIO",XX);const jX=new yh,QX={valueType:Array,isValidValue:e=>Array.isArray(e)&&e.every(e=>Array.isArray(e))};function KX(e,t){const i=e.typeName+","+t.typeName;return jX.has(i)||jX.set(i,new el(`MapIO<${e.typeName},${t.typeName}>`,{valueType:Map,isValidValue:i=>{for(const[n,r]of i){if(!Ho.isValueValid(n,e.validator))return!1;if(!Ho.isValueValid(r,t.validator))return!1}return!0},parameterTypes:[e,t],toStateObject:i=>{const n=[];for(const[r,s]of i)n.push([e.toStateObject(r),t.toStateObject(s)]);return n},fromStateObject:i=>{const n=i.map(i=>[e.fromStateObject(i[0]),t.fromStateObject(i[1])]);return new Map(n)},documentation:"IO Type for the built-in JS Map type, with the key and value types specified.",stateSchema:Zo.asValue(`Map<${e.typeName},${t.typeName}>`,{isValidValue:e=>{if(!Ho.isValueValid(e,QX))return!1;for(let t=0;t<e.length;t++){const i=e[t];if(!Array.isArray(i))return!1;if(2!==i.length)return!1}return!0}})})),jX.get(i)}zo.register("MapIO",KX);class ZX extends Lm{constructor(e,t,i){super(e,t,Vo()({isValidTandemName:e=>Lm.getRegexFromCharacterClass(jo.BASE_DYNAMIC_TANDEM_CHARACTER_CLASS).test(e)},i))}}zo.register("DynamicTandem",ZX);const JX=ZX;class $X extends Km{constructor(e,t,i){const n=Vo()({phetioState:!1,supportsDynamicState:!0,containerSuffix:"Container",phetioDynamicElementName:void 0},i);if(Array.isArray(t),n.tandem&&!n.phetioDynamicElementName&&(n.phetioDynamicElementName=n.tandem.name.slice(0,n.tandem.name.length-n.containerSuffix.length)),super(n),this.supportsDynamicState=n.supportsDynamicState,this.phetioDynamicElementName=n.phetioDynamicElementName,this.createElement=e,this.defaultArguments=t,this._archetype=this.createArchetype(),this.elementCreatedEmitter=new hb({parameters:[{valueType:Km,phetioType:n.phetioType.parameterTypes[0],name:"element"},{name:"phetioID",phetioType:Om}],tandem:n.tandem.createTandem("elementCreatedEmitter"),phetioDocumentation:"Emitter that fires whenever a new dynamic element is added to the container."}),this.elementDisposedEmitter=new hb({parameters:[{valueType:Km,phetioType:n.phetioType.parameterTypes[0],name:"element"},{name:"phetioID",phetioType:Om}],tandem:n.tandem.createTandem("elementDisposedEmitter"),phetioDocumentation:"Emitter that fires whenever a dynamic element is removed from the container."}),Lm.PHET_IO_ENABLED&&(this.elementCreatedEmitter.addListener(e=>this.createdEventListener(e)),this.elementDisposedEmitter.addListener(e=>this.disposedEventListener(e))),this.notificationsDeferred=!1,this.deferredCreations=[],this.deferredDisposals=[],Lm.PHET_IO_ENABLED&&this.supportsDynamicState&&!this.phetioIsArchetype){const e=phet.phetio.phetioEngine.phetioStateEngine;e.clearDynamicElementsEmitter.addListener((e,t)=>{this.tandem.hasAncestor(t)&&(this.clear({phetioState:e}),this.setNotificationsDeferred(!0))}),e.undeferEmitter.addListener(()=>{this.notificationsDeferred&&this.setNotificationsDeferred(!1)}),e.addSetStateHelper((e,t)=>{let i=!1,n=0;for(;this.deferredCreations.length>0;){if(n>200)throw new Error("Too many iterations in deferred creations, stillToSetIDs = "+t.join(", "));const e=this.deferredCreations[0];this.stateSetOnAllChildrenOfDynamicElement(e.tandem.phetioID,t)&&(this.notifyElementCreatedWhileDeferred(e),i=!0),n++}return i})}}stateSetOnAllChildrenOfDynamicElement(e,t){for(let i=0;i<t.length;i++)if(phetio.PhetioIDUtils.isAncestor(e,t[i]))return!1;return!0}createArchetype(){if(_.hasIn(window,"phet.joist.sim")&&phet.joist.sim.isConstructionCompleteProperty.value)return null;if(Lm.PHET_IO_ENABLED&&phet.preloads.phetio.createArchetypes){const e=Array.isArray(this.defaultArguments)?this.defaultArguments:this.defaultArguments(),t=this.createElement(this.tandem.createTandem(Cm),...e);return this.isPhetioInstrumented()&&t.markDynamicElementArchetype(),t}return null}createDynamicElement(e,t,i){let n;n=this.tandem.hasChild(e)?this.tandem.createTandem(e,this.tandem.getExtendedOptions()):new JX(this.tandem,e,this.tandem.getExtendedOptions());const r=this.createElement(n,...t);return Lm.PHET_IO_ENABLED&&Fo(r,i.validator),r}assertDynamicPhetioObject(e){Lm.PHET_IO_ENABLED&&Lm.VALIDATION}emitDataStreamEvent(e,t,i){this.phetioStartEvent(t,{data:Po({phetioID:e.tandem.phetioID},i)}),this.phetioEndEvent()}createdEventListener(e){const t=e.phetioState?{state:this.phetioType.parameterTypes[0].toStateObject(e)}:null;this.emitDataStreamEvent(e,"created",t)}disposedEventListener(e){this.emitDataStreamEvent(e,"disposed")}dispose(){}disposeElement(e){e.dispose(),this.notificationsDeferred?this.deferredDisposals.push(e):this.elementDisposedEmitter.emit(e,e.tandem.phetioID)}notifyElementDisposedWhileDeferred(e){this.elementDisposedEmitter.emit(e,e.tandem.phetioID),rm(this.deferredDisposals,e)}notifyElementCreated(e){this.notificationsDeferred?this.deferredCreations.push(e):this.elementCreatedEmitter.emit(e,e.tandem.phetioID)}notifyElementCreatedWhileDeferred(e){this.elementCreatedEmitter.emit(e,e.tandem.phetioID),rm(this.deferredCreations,e)}setNotificationsDeferred(e){if(!e){for(;this.deferredCreations.length>0;)this.notifyElementCreatedWhileDeferred(this.deferredCreations[0]);for(;this.deferredDisposals.length>0;)this.notifyElementDisposedWhileDeferred(this.deferredDisposals[0])}this.notificationsDeferred=e}get archetype(){return function(e){if(null===e)throw new Error("archetype should exist");return e}(this._archetype)}getMetadata(e){const t=super.getMetadata(e);return Po({phetioDynamicElementName:this.phetioDynamicElementName},t)}}zo.register("PhetioDynamicElementContainer",$X);const ej=$X,tj=phetio.PhetioIDUtils.CAPSULE_SUFFIX,ij=new yh;class nj extends ej{constructor(e,t,i){const n=Vo()({containerSuffix:tj,disposeOnClear:!0},i);super(e,t,n),this.element=null,this.disposeOnClear=n.disposeOnClear}disposeElement(){super.disposeElement(this.element),this.element=null}hasElement(){return null!==this.element}getElement(){if(!this.element){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.create(t)}return this.element}clear(e){const t=Vo()({phetioState:null},e);if(this.element&&this.disposeOnClear){var i;t.phetioState&&null!==(i=t.phetioState.hasOwnProperty(this.element.phetioID))&&void 0!==i&&i||this.disposeElement()}}create(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.element=this.createDynamicElement(this.phetioDynamicElementName,e,Lm.PHET_IO_ENABLED?this.phetioType.parameterTypes[0]:null),this.notifyElementCreated(this.element),this.element}}Et=nj,_defineProperty(nj,"PhetioCapsuleIO",e=>(ij.has(e)||ij.set(e,new el(`PhetioCapsuleIO<${e.typeName}>`,{valueType:Et,documentation:"An array that sends notifications when its values have changed.",parameterTypes:[e],metadataDefaults:{phetioDynamicElementName:null},addChildElement(t,i,n){const r=e.stateObjectToCreateElementArguments(n);return t.create(r,!0)}})),ij.get(e))),zo.register("PhetioCapsule",nj);const rj=new yh;class sj extends ej{constructor(e,t,i){var n;const r=Vo()({groupElementStartingIndex:1,containerSuffix:"Group"},i);super(e,t,r),this._array=[],this.groupElementStartingIndex=r.groupElementStartingIndex,this.groupElementIndex=this.groupElementStartingIndex,this.countProperty=new zb(0,{tandem:null===(n=r.tandem)||void 0===n?void 0:n.createTandem("countProperty"),phetioDocumentation:"the number of elements in the group",phetioReadOnly:!0,phetioFeatured:!0,numberType:"Integer"})}dispose(){}disposeElement(e){rm(this._array,e),this.countProperty.value=this._array.length,super.disposeElement(e)}getArray(){return this._array}getArrayCopy(){return this._array.slice()}getElement(e){return this._array[e]}getLastElement(){return this.getElement(this.count-1)}get count(){return this.countProperty.value}filter(e){return this._array.filter(e)}includes(e){return this._array.includes(e)}indexOf(e){return this._array.indexOf(e)}forEach(e){this._array.forEach(e)}find(e){return this._array.find(e)}map(e){return this._array.map(e)}clear(e){const t=Vo()({phetioState:null,resetIndex:!0},e);for(;this._array.length>0;)this.disposeElement(this._array[0]);t.resetIndex&&(this.groupElementIndex=this.groupElementStartingIndex)}createCorrespondingGroupElement(e){const t=window.phetio.PhetioIDUtils.getGroupElementIndex(e);this.groupElementIndex===t&&this.groupElementIndex++;for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return this.createIndexedElement(t,n)}createNextElement(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.createIndexedElement(this.groupElementIndex++,t)}createIndexedElement(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=this.phetioDynamicElementName+window.phetio.PhetioIDUtils.GROUP_SEPARATOR+e,n=Lm.PHET_IO_ENABLED?this.phetioType.parameterTypes[0]:null,r=this.createDynamicElement(i,t,n);return this._array.push(r),this.countProperty.value=this._array.length,this.notifyElementCreated(r),r}}_defineProperty(sj,"PhetioGroupIO",e=>(rj.has(e)||rj.set(e,new el(`PhetioGroupIO<${e.typeName}>`,{isValidValue:e=>e instanceof(window.phet?phet.tandem.PhetioGroup:zo.PhetioGroup),documentation:"An array that sends notifications when its values have changed.",metadataDefaults:{phetioDynamicElementName:null},parameterTypes:[e],addChildElement(t,i,n){const r=e.stateObjectToCreateElementArguments(n),s=window.phetio.PhetioIDUtils.getGroupElementIndex(i),a=t.createIndexedElement(s,r,!0);return t.groupElementIndex=Math.max(s+1,t.groupElementIndex),a}})),rj.get(e))),zo.register("PhetioGroup",sj);n(37);const aj=new bt("tappi");class oj{constructor(e,t,i,n){this.x=e,this.y=t,this.time=i,this.name=n}}aj.register("VibrationTestEvent",oj);const lj=oj;class hj{constructor(e){this.events=[],window.addEventListener("message",t=>{if("string"==typeof t.data&&"requestVibrationData"===t.data){const t=this.dataToString();e.saveTestEvents(t)}})}addTestEvent(e){this.events.push(e)}dataToString(){let e="";return this.events.forEach(t=>{e+=t.x+",",e+=t.y+",",e+=t.time+",",e+=t.name+";"}),e}}aj.register("VibrationTestEventRecorder",hj);class uj{constructor(e){this.eventRecorder=e,this.elapsedTime=0,this._pointerListener={up:e=>{const t=e.pointer.point,i=new lj(t.x,t.y,this.elapsedTime,e.pointer.type+"up");this.eventRecorder.addTestEvent(i),this.handleRelease()},cancel:e=>{this.handleRelease()},move:e=>{const t=e.pointer.point,i=new lj(t.x,t.y,this.elapsedTime,e.pointer.type+"move");this.eventRecorder.addTestEvent(i)}},this.pointer=null}handleRelease(e){this.pointer.removeInputListener(this._pointerListener),this.pointer=null}interrupt(){this.pointer&&(this.pointer.removeInputListener(this._pointerListener),this.pointer=null)}down(e){if(null===this.pointer){this.pointer=e.pointer;const t=e.pointer.point,i=new lj(t.x,t.y,this.elapsedTime,e.pointer.type+"down");this.eventRecorder.addTestEvent(i),e.pointer.addInputListener(this._pointerListener,!1)}}click(e){const t=e.target.globalBounds.center;console.log(t);const i=new lj(t.x,t.y,this.elapsedTime,e.pointer.type);this.eventRecorder.addTestEvent(i)}setElapsedTime(e){this.elapsedTime=e}}aj.register("VibrationTestInputListener",uj);class cj extends cv{constructor(e,t,i,n){n=Po({labelFont:new gD(24)},n),super(),this.vibratingProperty=e,this.timeProperty=new zb(0),this.vibrationSeries=new wD({color:"orange"});const r=new gA("Vibration",{rotation:-Math.PI/2,font:n.labelFont}),s=new gA("Time (s)",{font:n.labelFont}),a=new FD(this.timeProperty,[this.vibrationSeries],new gA(""),{width:t,height:i,verticalAxisLabelNode:r,horizontalAxisLabelNode:s,numberVerticalLines:10,numberHorizontalLines:3,verticalRanges:[new Hl(-1.5,1.5)]}),o=new cv;o.addChild(a);const l=new ED(o,{fill:"lightgrey"});this.addChild(l),this.mutate(n)}step(e){this.timeProperty.set(this.timeProperty.get()+e);const t=this.vibratingProperty.get()?1:-1;for(this.vibrationSeries.addXYDataPoint(this.timeProperty.get(),t);this.vibrationSeries.getDataPoint(0).x<this.timeProperty.value-10;)this.vibrationSeries.shiftData()}}aj.register("VibrationChart",cj);class dj extends cv{constructor(e){super(),this.timeProperty=new zb(0),this.vibratingProperty=e;const t=new xA(0,0,40,75,4,4,{fill:"white"}),i=new xA(0,0,t.width-5,t.height-20,{fill:"white",center:t.center}),n=new AA(2,{fill:"black",center:t.centerBottom.minusXY(0,5)}),r=new xA(0,0,.35*t.width,.03*t.height,4,4,{fill:"black",center:t.centerTop.plusXY(0,5)});t.addChild(i),t.addChild(n),t.addChild(r);const s=new Ip;s.moveTo(0,0),s.zigZagTo(0,i.height,.1*t.width,3,!0);const a=t.leftCenter.minusXY(8,0),o=t.rightCenter.plusXY(8,0);this.leftVibrationPath=new aA(s,{stroke:"orange",lineWidth:4,rightCenter:a}),this.leftVibrationPath.setScaleMagnitude(-1,1),this.rightVibrationPath=new aA(s,{stroke:"orange",lineWidth:4,leftCenter:o}),t.addChild(this.leftVibrationPath),t.addChild(this.rightVibrationPath);const l=new xA(0,0,t.width,t.height+10,5,5,{fill:"black"});t.center=l.center,l.addChild(t),this.addChild(l),this.vibratingProperty.link(e=>{i.fill=e?"lightblue":"grey",this.leftVibrationPath.visible=e,this.rightVibrationPath.visible=e,this.leftVibrationPath.center=a,this.rightVibrationPath.center=o})}step(e){if(this.timeProperty.set(this.timeProperty.get()+e),this.vibratingProperty.get()){const e=-Math.sin(70*this.timeProperty.get()),t=.5*Math.sin(10*this.timeProperty.get());this.rightVibrationPath.translate(e,t),this.leftVibrationPath.translate(e,t)}}}aj.register("VibrationIndicator",dj);class pj{constructor(e,t){_defineProperty(this,"patternIndex",0),_defineProperty(this,"patternValue",0),_defineProperty(this,"valueTime",0),_defineProperty(this,"runningPattern",!1);const i=Vo()({repeat:!0,sharpness:1,intensity:1,activePattern:[]},t);this.vibrationManageriOS=e,this.activePattern=i.activePattern,this.repeat=i.repeat,this.intensity=i.intensity,this.sharpness=i.sharpness,this.pendingPattern=this.activePattern}step(e){this.runningPattern&&(this.valueTime+=e,this.valueTime>=this.patternValue&&(this.valueTime=0,this.patternIndex++,this.patternIndex<this.activePattern.length?(this.patternValue=this.activePattern[this.patternIndex],this.patternIndex%2==0?this.vibrationManageriOS.vibrateContinuous({intensity:this.intensity,sharpness:this.sharpness}):this.vibrationManageriOS.stop()):this.repeat?(_.isEqual(this.pendingPattern,this.activePattern)||this.setNewActivePattern(this.pendingPattern),this.start()):this.stop()))}setNewActivePattern(e){this.activePattern=e,this.resetPattern()}setPattern(e){this.pendingPattern=e,this.runningPattern||this.setNewActivePattern(this.pendingPattern)}setIntensity(e){this.intensity=e}setSharpness(e){this.sharpness=e}setRepeat(e){this.repeat=e}start(){this.runningPattern=!0,this.resetPattern(),this.vibrationManageriOS.vibrateContinuous({intensity:this.intensity,sharpness:this.sharpness})}stop(){this.runningPattern&&(this.vibrationManageriOS.stop(),this.runningPattern=!1,this.resetPattern())}resetPattern(){this.patternIndex=0,this.patternValue=this.activePattern[this.patternIndex],this.valueTime=0}}aj.register("ContinuousPatternVibrationController",pj);class mj{constructor(){if(!window.webkit)throw new Error("not on this device!");this.vibrationMessageHandlers=window.webkit.messageHandlers}vibrate(e){this.vibrationMessageHandlers&&this.vibrationMessageHandlers.vibrateMessageHandler&&this.vibrationMessageHandlers.vibrateMessageHandler.postMessage({duration:e})}vibrateForever(){this.vibrationMessageHandlers&&this.vibrationMessageHandlers.vibrateForeverMessageHandler&&this.vibrationMessageHandlers.vibrateForeverMessageHandler.postMessage({})}vibrateContinuous(e){const t=Vo()({pattern:[],sharpness:1,intensity:1,frequency:null,duration:null},e);this.vibrationMessageHandlers&&this.vibrationMessageHandlers.vibrateContinuousMessageHandler&&this.vibrationMessageHandlers.vibrateContinuousMessageHandler.postMessage({pattern:t.pattern,sharpness:t.sharpness,duration:t.duration,intensity:t.intensity,frequency:t.frequency})}vibrateTransient(e){const t=Vo()({sharpness:1,intensity:1},e);this.vibrationMessageHandlers&&this.vibrationMessageHandlers.vibrateTransientMessageHandler&&this.vibrationMessageHandlers.vibrateTransientMessageHandler.postMessage({sharpness:t.sharpness,intensity:t.intensity})}vibrateAtFrequency(e,t){this.vibrationMessageHandlers&&this.vibrationMessageHandlers.vibrateFrequencyMessageHandler&&this.vibrationMessageHandlers.vibrateFrequencyMessageHandler.postMessage({duration:e,frequency:t})}vibrateAtFrequencyForever(e,t){t="number"==typeof t?t:1,t=fl.clamp(t,0,1),this.debug(""+t),this.vibrationMessageHandlers&&this.vibrationMessageHandlers.vibrateFrequencyForeverMessageHandler&&this.vibrationMessageHandlers.messageHandlers.vibrateFrequencyForeverMessageHandler.postMessage({frequency:e,intensity:t})}vibrateWithCustomPattern(e,t,i){this.vibrationMessageHandlers&&this.vibrationMessageHandlers.vibrateWithCustomPatternMessageHandler&&this.vibrationMessageHandlers.vibrateWithCustomPatternMessageHandler.postMessage({vibrationPattern:e,duration:t,loopForever:i})}vibrateWithCustomPatternDuration(e,t){this.vibrationMessageHandlers&&this.vibrationMessageHandlers.vibrateWithCustomPatternDurationMessageHandler&&this.vibrationMessageHandlers.vibrateWithCustomPatternDurationMessageHandler.postMessage({vibrationPattern:e,duration:t})}vibrateWithCustomPatternForever(e){this.vibrationMessageHandlers&&this.vibrationMessageHandlers.vibrateWithCustomPatternForeverMessageHandler&&this.vibrationMessageHandlers.vibrateWithCustomPatternForeverMessageHandler.postMessage({vibrationPattern:e})}setVibrationIntensity(e){this.vibrationMessageHandlers&&this.vibrationMessageHandlers.vibrationIntensityMessageHandler&&this.vibrationMessageHandlers.vibrationIntensityMessageHandler.postMessage({intensity:e})}setVibrationSharpness(e){this.vibrationMessageHandlers&&this.vibrationMessageHandlers.vibrationSharpnessMessageHandler&&this.vibrationMessageHandlers.vibrationSharpnessMessageHandler.postMessage({sharpness:e})}stop(){this.vibrationMessageHandlers&&this.vibrationMessageHandlers.stopMessageHandler&&this.vibrationMessageHandlers.stopMessageHandler.postMessage({})}saveTestEvents(e){this.vibrationMessageHandlers&&this.vibrationMessageHandlers.saveDataMessageHandler&&this.vibrationMessageHandlers.saveDataMessageHandler.postMessage({dataString:e})}debug(e){this.vibrationMessageHandlers&&this.vibrationMessageHandlers.debugMessageHandler&&this.vibrationMessageHandlers.debugMessageHandler.postMessage({debugString:e})}}aj.register("VibrationManageriOS",mj);const gj={HZ_2_5:[200,200],HZ_5:[100,100],HZ_10:[50,50],HZ_25:[25,25],MOTOR_CALL:null,HZ_50:[10,10],HZ_200:[5,5],QUICK_BALL_ROLL:[70,100],SLOW_BALL_ROLL:[700,300],FLUTTER:[10,10,10,10,10,20,10,20,10,20,10,20,10,20,10,50,10,50,10,50,10,50,10,50,10,70,10,70,10,70,10],SLOW_DOWN:[70,300,70,400,100,500,200,500],HEARTBEAT:[100,100,150,1e3],QUICK_HEARTBEAT:[50,50,100,700],interactionSuccess:e=>{e.vibrateTransient(),vb.setTimeout(()=>{e.vibrateTransient(),vb.setTimeout(()=>{e.vibrateTransient()},150)},150)}};aj.register("VibrationPatterns",gj);const fj=[8,8],yj=[Number.MAX_SAFE_INTEGER,0];class Ej extends Fl{}_defineProperty(Ej,"HIGH",new(vt=Ej)),_defineProperty(Ej,"LOW",new vt),_defineProperty(Ej,"enumeration",new Xl(vt));const vj=_.noop,Aj=[Number.MAX_SAFE_INTEGER];const bj=new class{constructor(){_defineProperty(this,"enabledProperty",new gy(!0)),_defineProperty(this,"vibratingProperty",new gy(!1)),_defineProperty(this,"intensityProperty",new kq(Ej.HIGH)),_defineProperty(this,"_runningVibration",!1),_defineProperty(this,"_vibrationPattern",Aj),_defineProperty(this,"_intensityDuration",0),_defineProperty(this,"_timeRunningCurrentInterval",0),_defineProperty(this,"_patternTimeLimit",Number.POSITIVE_INFINITY),_defineProperty(this,"_timeRunningCurrentPattern",0),_defineProperty(this,"_currentIntervalIndex",0),_defineProperty(this,"_vibrationIntensityPattern",yj),_defineProperty(this,"_navigatorVibrationCallback",vj),_defineProperty(this,"expandedPatternInterval",vj)}initialize(e,t){this.setVibrationIntensity(this.intensityProperty.get()),pS.multilink([this.vibratingProperty,this.intensityProperty],(e,t)=>{this.controlNavigator()}),pS.multilink([this.enabledProperty,e,t],(e,t,i)=>{e&&t&&i&&this.stopVibrate()})}controlNavigator(){if(this._navigatorVibrationCallback&&(vb.clearInterval(this._navigatorVibrationCallback),this._navigatorVibrationCallback=vj,navigator.vibrate(0)),this.vibratingProperty.get()){const e=()=>{navigator.vibrate(this._vibrationIntensityPattern)};this._navigatorVibrationCallback=vb.setInterval(e,this._intensityDuration),e()}}startVibrate(e){this.resetTimingVariables(),this._runningVibration=!0,this._vibrationPattern=e||Aj}stopVibrate(){this._runningVibration=!1,this.vibratingProperty.set(!1)}startTimedVibrate(e,t){this.resetTimingVariables(),this._patternTimeLimit=e,this._runningVibration=!0,this._vibrationPattern=t||Aj}startRepeatingVibrationPattern(e){this.stopRepeatingVibrationPattern();const t=e.reduce((e,t)=>e+t,0);phet.log&&phet.log("providedPatternDuration = "+t);const i=Math.floor(5e3/t)+1;phet.log&&phet.log("repeatCount = "+i);const n=[];let r=0;_.times(i,()=>{e.forEach(e=>{n.push(e),r+=e})}),phet.log&&phet.log("expandedPattern = "+n),phet.log&&phet.log("expandedPattern.length = "+n.length),phet.log&&phet.log("totalPatternTime = "+r),navigator.vibrate(n),this.expandedPatternInterval=vb.setInterval(()=>{navigator.vibrate(n),phet.log&&phet.log("restarting pattern")},r)}stopRepeatingVibrationPattern(){navigator.vibrate(0),this.expandedPatternInterval!==vj&&(vb.clearInterval(this.expandedPatternInterval),this.expandedPatternInterval=vj)}isVibrating(){return this.vibratingProperty.get()}isRunningPattern(){return this._runningVibration}setVibrationIntensity(e){e===Ej.LOW?this._vibrationIntensityPattern=fj:e===Ej.HIGH&&(this._vibrationIntensityPattern=yj);const t=_.reduce(this._vibrationIntensityPattern,(e,t)=>e+t);this._intensityDuration="number"==typeof t?t:0,this.intensityProperty.set(e)}resetTimingVariables(){this._timeRunningCurrentInterval=0,this._timeRunningCurrentPattern=0,this._currentIntervalIndex=0,this._patternTimeLimit=Number.POSITIVE_INFINITY}step(e){if(e*=1e3,this._runningVibration){const t=this._vibrationPattern[this._currentIntervalIndex];if(this._timeRunningCurrentInterval>t){const e=this._currentIntervalIndex+1;this._currentIntervalIndex=e<this._vibrationPattern.length?e:0,this._timeRunningCurrentInterval=0}else this._currentIntervalIndex%2==0?this.vibratingProperty.set(!0):this.vibratingProperty.set(!1);this._timeRunningCurrentInterval+=e,this._timeRunningCurrentPattern+=e,this._timeRunningCurrentPattern>=this._patternTimeLimit&&this.stopVibrate()}}};aj.register("vibrationManager",bj);class Sj{constructor(e){_defineProperty(this,"timeElapsed",0);const t=Vo()({valueProperty:new mg(0),velocityProperty:new mg(0),damping:1,force:1,targetValue:0},e);this.valueProperty=t.valueProperty,this.velocityProperty=t.velocityProperty,this._damping=t.damping,this._force=t.force,this._targetValue=t.targetValue,this.recompute()}get targetValue(){return this._targetValue}set targetValue(e){this._targetValue=e,this.recompute()}get damping(){return this._damping}set damping(e){this._damping=e,this.recompute()}get force(){return this._force}set force(e){this._force=e,this.recompute()}recompute(){this.timeElapsed=0,this.harmonic=new ZB(1,Math.sqrt(4*this._force)*this._damping,this._force,this.valueProperty.value-this._targetValue,this.velocityProperty.value)}step(e){this.timeElapsed+=e,this.valueProperty.value=this._targetValue+this.harmonic.getValue(this.timeElapsed),this.velocityProperty.value=this.harmonic.getDerivative(this.timeElapsed)}}KU.register("DampedAnimation",Sj);function _j(e){return e}wo.register("required",_j);const xj=_j;class wj extends iW{constructor(e,t,i){const n={fromTargets:xj(i.fromTargets),toTargets:xj(i.toTargets),resetNode:xj(i.resetNode),targetOptions:null};i=Po({},n,i);const r=Po({},i.targetOptions);let s=[];e&&(s=s.concat(i.fromTargets.map(t=>No(t,{object:e},r)))),t&&(s=s.concat(i.toTargets.map(e=>No(e,{object:t},r)))),super(No({targets:s},_.omit(i,_.keys(n)))),this.endedEmitter.addListener(()=>{e&&i.resetNode(e),t&&i.resetNode(t)})}static slideLeft(e,t,i,n){return wj.createSlide(t,i,"x",e.width,!0,n)}static slideRight(e,t,i,n){return wj.createSlide(t,i,"x",e.width,!1,n)}static slideUp(e,t,i,n){return wj.createSlide(t,i,"y",e.height,!0,n)}static slideDown(e,t,i,n){return wj.createSlide(t,i,"y",e.height,!1,n)}static wipeLeft(e,t,i,n){return wj.createWipe(e,t,i,"maxX","minX",n)}static wipeRight(e,t,i,n){return wj.createWipe(e,t,i,"minX","maxX",n)}static wipeUp(e,t,i,n){return wj.createWipe(e,t,i,"maxY","minY",n)}static wipeDown(e,t,i,n){return wj.createWipe(e,t,i,"minY","maxY",n)}static dissolve(e,t,i){const n=(e,t,i)=>Math.pow((1-i)*e+i*t,r.gamma),r=Vo()({gamma:1,fromTargets:[{attribute:"opacity",from:1,to:0,blend:n}],toTargets:[{attribute:"opacity",from:0,to:1,blend:n}],resetNode:e=>{e.opacity=1}},i);return new wj(e,t,r)}static createSlide(e,t,i,n,r,s){const a=r?-1:1;return new wj(e,t,Vo()({fromTargets:[{attribute:i,from:0,to:n*a}],toTargets:[{attribute:i,from:-n*a,to:0}],resetNode:e=>{e[i]=0}},s))}static createWipe(e,t,i,n,r,s){const a=e.copy(),o=e.copy();a[n]=e[r],o[r]=e[n];const l=(e,t,i)=>Ip.bounds(e.blend(t,i));return new wj(t,i,Vo()({fromTargets:[{attribute:"clipArea",from:e,to:a,blend:l}],toTargets:[{attribute:"clipArea",from:o,to:e,blend:l}],resetNode:function(e){e.clipArea=null}},s))}}KU.register("Transition",wj);const Tj=wj;class Pj extends cv{constructor(e,t){const i=Vo()({content:null,useBoundsClip:!0,cachedNodes:[]},t);super(),_defineProperty(this,"toContent",null),this.transitionBoundsProperty=e,this.useBoundsClip=i.useBoundsClip,this.cachedNodes=i.cachedNodes,this.fromContent=i.content,this.children=this.cachedNodes;for(let n=0;n<this.cachedNodes.length;n++){const e=this.cachedNodes[n];e.visible=e===this.fromContent}this.fromContent&&!_.includes(this.cachedNodes,this.fromContent)&&this.addChild(this.fromContent),this.transition=null,this.paddingNode=new cv,this.addChild(this.paddingNode),this.boundsListener=this.onBoundsChange.bind(this),this.transitionBoundsProperty.link(this.boundsListener),this.mutate(i)}step(e){this.transition&&this.transition.step(e)}interrupt(){this.transition&&this.transition.stop()}onBoundsChange(e){this.interrupt(),this.useBoundsClip&&(this.clipArea=Ip.bounds(e)),this.paddingNode.localBounds=e}slideLeftTo(e,t){return this.interrupt(),this.startTransition(e,Tj.slideLeft(this.transitionBoundsProperty.value,this.fromContent,e,t))}slideRightTo(e,t){return this.interrupt(),this.startTransition(e,Tj.slideRight(this.transitionBoundsProperty.value,this.fromContent,e,t))}slideUpTo(e,t){return this.interrupt(),this.startTransition(e,Tj.slideUp(this.transitionBoundsProperty.value,this.fromContent,e,t))}slideDownTo(e,t){return this.interrupt(),this.startTransition(e,Tj.slideDown(this.transitionBoundsProperty.value,this.fromContent,e,t))}wipeLeftTo(e,t){return this.interrupt(),this.startTransition(e,Tj.wipeLeft(this.transitionBoundsProperty.value,this.fromContent,e,t))}wipeRightTo(e,t){return this.interrupt(),this.startTransition(e,Tj.wipeRight(this.transitionBoundsProperty.value,this.fromContent,e,t))}wipeUpTo(e,t){return this.interrupt(),this.startTransition(e,Tj.wipeUp(this.transitionBoundsProperty.value,this.fromContent,e,t))}wipeDownTo(e,t){return this.interrupt(),this.startTransition(e,Tj.wipeDown(this.transitionBoundsProperty.value,this.fromContent,e,t))}dissolveTo(e,t){return this.interrupt(),this.startTransition(e,Tj.dissolve(this.fromContent,e,t))}startTransition(e,t){return this.interrupt(),this.toContent=e,e&&(_.includes(this.cachedNodes,e)?e.visible=!0:this.addChild(e)),this.transition=t,this.fromContent&&(this.fromContent.pickable=!1),this.toContent&&(this.toContent.pickable=!1),t.endedEmitter.addListener(()=>{this.fromContent&&(this.fromContent.pickable=null),this.toContent&&(this.toContent.pickable=null),this.transition=null,this.fromContent&&(_.includes(this.cachedNodes,this.fromContent)?this.fromContent.visible=!1:this.removeChild(this.fromContent)),this.fromContent=this.toContent,this.toContent=null}),t.start(),t}dispose(){this.interrupt(),this.transitionBoundsProperty.unlink(this.boundsListener),super.dispose()}}KU.register("TransitionNode",Pj);Kb.register("ActivationUtterance",class extends lS{constructor(e){const t=Vo()({alertStableDelay:500},e);super(t)}});class Cj extends lS{constructor(e){Bo("Please use AccessibleValueHander.a11yCreateContextResponseAlert(), see https://github.com/phetsims/sun/issues/685"),super(Vo()({alertStableDelay:1e3},e))}}Kb.register("ValueChangeUtterance",Cj);const Vj=new bt("vegas"),Rj=AB("VEGAS");Vj.register("VegasStrings",Rj);const Nj=Rj;Vj.register("AllLevelsCompletedNode",class extends cv{constructor(e,t){super();const i=Vo()({faceDiameter:160,maxTextWidth:300},t),n=new zG(i.faceDiameter),r=new CT(Nj.youCompletedAllLevelsStringProperty,{font:new gD(25),lineWrap:300,maxWidth:i.maxTextWidth,maxHeight:300}),s=new eY({content:new gA(Nj.doneStringProperty,{font:new gD(30),maxWidth:i.maxTextWidth}),listener:e,baseColor:"yellow"});this.addChild(new ED(new aT({children:[n,r,s],spacing:20}),{xMargin:50,yMargin:20})),this.mutate(i)}});class Mj extends cv{constructor(e,t){super();const i=Vo()({fill:"white",stroke:"black",lineWidth:2},t);this.addChild(new AA(e,i)),this.addChild(new AA(.15*e,{fill:i.stroke}));const n={stroke:i.stroke,lineWidth:i.lineWidth,lineCap:"round",lineJoin:"round"};this.addChild(new SA(0,0,0,.75*-e,n)),this.addChild(new SA(0,0,.45*e,.3*e,n)),this.centerX=e,this.centerY=e,this.mutate(i)}}JI.register("SimpleClockIcon",Mj);class kj{constructor(){this.isRunningProperty=new gy(!1),this.elapsedTimeProperty=new zb(0),this.intervalId=null}reset(){this.isRunningProperty.reset(),this.elapsedTimeProperty.reset()}start(){this.isRunningProperty.value||(this.elapsedTimeProperty.value=0,this.intervalId=vb.setInterval(()=>{this.elapsedTimeProperty.value=this.elapsedTimeProperty.value+1},1e3),this.isRunningProperty.value=!0)}stop(){this.isRunningProperty.value&&(vb.clearInterval(this.intervalId),this.intervalId=null,this.isRunningProperty.value=!1)}restart(){this.stop(),this.start()}static formatTime(e){const t=Math.floor(e/3600),i=Math.floor((e-3600*t)/60),n=Math.floor(e-3600*t-60*i),r=i>9||0===t?i:"0"+i,s=n>9?n:"0"+n;return t>0?Qb.format(Nj.pattern["0hours"]["1minutes"]["2secondsStringProperty"].value,t,r,s):Qb.format(Nj.pattern["0minutes"]["1secondsStringProperty"].value,r,s)}}Vj.register("GameTimer",kj);class Lj extends cv{constructor(e,t,i){const n=Vo()({barFill:"lightGray",barStroke:null,barHeight:50,xMargin:10,yMargin:8,floatToTop:!1,dynamicAlignment:!0},i),r=new xA({fill:n.barFill,stroke:n.barStroke}),s=[r];n.children=s.concat(n.children||[]),super(n);const a=new ty(Zl.EVERYTHING,{valueType:Zl});this.positioningBoundsProperty=a;const o=t=>{const i=n.floatToTop?t.top:e.top;r.setRect(t.minX,i,t.width,n.barHeight),a.value=new Zl((n.dynamicAlignment?r.left:e.minX)+n.xMargin,r.top,(n.dynamicAlignment?r.right:e.maxX)-n.xMargin,r.bottom)};t.link(o),this.disposeStatusBar=()=>{t.hasListener(o)&&t.unlink(o)}}dispose(){this.disposeStatusBar(),super.dispose()}}_defineProperty(Lj,"DEFAULT_FONT",new gD(20)),_defineProperty(Lj,"DEFAULT_TEXT_FILL",Hg.BLACK),JI.register("StatusBar",Lj);const Ij=Lj;class Bj extends sT{constructor(e,t){const i=Vo()({clockIconRadius:15,font:Ij.DEFAULT_FONT,textFill:"black",spacing:8},t),n=new Mj(i.clockIconRadius),r=new gA("",{font:i.font,fill:i.textFill});i.children=[n,r],super(i);const s=e=>{r.string=kj.formatTime(e)};e.link(s),this.disposeElapsedTimeNode=()=>{e.hasListener(s)&&e.unlink(s)}}dispose(){this.disposeElapsedTimeNode(),super.dispose()}}Vj.register("ElapsedTimeNode",Bj);class Dj extends cv{constructor(e,t){const i=Vo()({font:Ij.DEFAULT_FONT,textFill:"black",scoreDecimalPlaces:0},t),n=new Rb([Nj.pattern.score.numberStringProperty,e],(e,t)=>Qb.fillIn(e,{score:fl.toFixed(t,i.scoreDecimalPlaces)})),r=new gA(n,{font:i.font,fill:i.textFill});i.children=[r],super(i),this.disposeScoreDisplayLabeledNumber=()=>{n.dispose()}}dispose(){this.disposeScoreDisplayLabeledNumber(),super.dispose()}}Vj.register("ScoreDisplayLabeledNumber",Dj);Vj.register("FiniteStatusBar",class extends Ij{constructor(e,t,i,n){var r;const s=Vo()({challengeIndexProperty:null,numberOfChallengesProperty:null,levelProperty:null,elapsedTimeProperty:null,timerEnabledProperty:null,levelVisible:!0,challengeNumberVisible:!0,font:Ij.DEFAULT_FONT,textFill:Ij.DEFAULT_TEXT_FILL,createScoreDisplay:e=>new Dj(e,{font:n&&n.font?n.font:Ij.DEFAULT_FONT,textFill:n&&n.textFill?n.textFill:Ij.DEFAULT_TEXT_FILL}),startOverButtonText:Nj.startOverStringProperty,clockIconRadius:15,xSpacing:50,xMargin:20,yMargin:10,barFill:null,barStroke:null},n);s.startOverButtonOptions=No({font:s.font,textFill:s.textFill,baseColor:VH.BUTTON_YELLOW,xMargin:10,yMargin:8,listener:_.noop,tandem:null===(r=s.tandem)||void 0===r?void 0:r.createTandem("startOverButton"),maxWidth:.2*(e.width-2*s.xMargin)},s.startOverButtonOptions),s.levelTextOptions=No({fill:s.textFill,font:s.font},s.levelTextOptions),s.challengeTextOptions=No({fill:s.textFill,font:s.font},s.challengeTextOptions);const a=new xA({fill:s.barFill,stroke:s.barStroke}),o=[];let l,h;if(s.levelProperty&&s.levelVisible){var u;const e=new Rb([Nj.label.levelStringProperty,s.levelProperty],(e,t)=>Qb.format(e,t));l=new gA(e,No({tandem:null===(u=s.tandem)||void 0===u?void 0:u.createTandem("levelText")},s.levelTextOptions)),o.push(l)}if(s.challengeIndexProperty&&s.numberOfChallengesProperty){var c;const e=new Rb([Nj.pattern["0challenge"]["1maxStringProperty"],s.challengeIndexProperty,s.numberOfChallengesProperty],(e,t,i)=>Qb.format(e,t+1,i));h=new gA(e,No({tandem:null===(c=s.tandem)||void 0===c?void 0:c.createTandem("challengeNumberText")},s.challengeTextOptions)),o.push(h)}const d=s.createScoreDisplay(i);let p;o.push(d),s.elapsedTimeProperty&&s.timerEnabledProperty&&(p=new Bj(s.elapsedTimeProperty,{visibleProperty:s.timerEnabledProperty,clockIconRadius:s.clockIconRadius,font:s.font,textFill:s.textFill}),o.push(p));const m=new AH(s.startOverButtonText,s.startOverButtonOptions),g=new sT({excludeInvisibleChildrenFromBounds:!1,spacing:s.xSpacing,children:o,maxWidth:e.width-2*s.xMargin-m.width-s.xSpacing});s.children=[a,g,m],s.barHeight=Math.max(g.height,d.height)+2*s.yMargin,super(e,t,s),pS.multilink([this.positioningBoundsProperty,g.boundsProperty,m.boundsProperty],(e,t,i)=>{g.left=e.left,g.centerY=e.centerY,m.right=e.right,m.centerY=e.centerY}),this.disposeFiniteStatusBar=()=>{l.dispose(),h.dispose(),d.dispose(),p&&p.dispose(),m.dispose(),p&&p.dispose()}}dispose(){this.disposeFiniteStatusBar(),super.dispose()}});const Oj="data:audio/mpeg;base64,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",qj=aO(cO,Oj),Yj=JD.createLock(Oj),Hj=new hO;let Gj=!1;const Fj=()=>{Gj||(Yj(),Gj=!0)},zj=cO.decodeAudioData(qj.buffer,e=>{null===Hj.audioBufferProperty.value&&(Hj.audioBufferProperty.set(e),Fj())},e=>{console.warn("decode of audio data failed, using stubbed sound, error: "+e),Hj.audioBufferProperty.set(cO.createBuffer(1,1,cO.sampleRate)),Fj()});zj&&zj.then(e=>{null===Hj.audioBufferProperty.value&&(Hj.audioBufferProperty.set(e),Fj())}).catch(e=>{console.warn("promise rejection caught for audio decode, error = "+e),Fj()});const Uj=Hj,Wj="data:audio/mpeg;base64,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",Xj=aO(cO,Wj),jj=JD.createLock(Wj),Qj=new hO;let Kj=!1;const Zj=()=>{Kj||(jj(),Kj=!0)},Jj=cO.decodeAudioData(Xj.buffer,e=>{null===Qj.audioBufferProperty.value&&(Qj.audioBufferProperty.set(e),Zj())},e=>{console.warn("decode of audio data failed, using stubbed sound, error: "+e),Qj.audioBufferProperty.set(cO.createBuffer(1,1,cO.sampleRate)),Zj()});Jj&&Jj.then(e=>{null===Qj.audioBufferProperty.value&&(Qj.audioBufferProperty.set(e),Zj())}).catch(e=>{console.warn("promise rejection caught for audio decode, error = "+e),Zj()});const $j=Qj,eQ="data:audio/mpeg;base64,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",tQ=aO(cO,eQ),iQ=JD.createLock(eQ),nQ=new hO;let rQ=!1;const sQ=()=>{rQ||(iQ(),rQ=!0)},aQ=cO.decodeAudioData(tQ.buffer,e=>{null===nQ.audioBufferProperty.value&&(nQ.audioBufferProperty.set(e),sQ())},e=>{console.warn("decode of audio data failed, using stubbed sound, error: "+e),nQ.audioBufferProperty.set(cO.createBuffer(1,1,cO.sampleRate)),sQ()});aQ&&aQ.then(e=>{null===nQ.audioBufferProperty.value&&(nQ.audioBufferProperty.set(e),sQ())}).catch(e=>{console.warn("promise rejection caught for audio decode, error = "+e),sQ()});const oQ=nQ,lQ="data:audio/mpeg;base64,//NgxAAcgrJUBUlAAgCpRASIMmjRoITIxWK0aNtAgYsjAOAMDbw7PIMGgrABgHKAHBefCbvBb6IiIjvoiIiO7vCCiSKGJ8+6bvaChhYNAaGS73////pW7uguL3CV///+lf6VKJ/x6J///+73AuH//EDgQ/+fLvxOCDviCIHT7FXRBvkeW2JlWD0lGMWVzS6UQ9gE7HIYBLhLiyEk//NixB0loxasAY9oACmMEHsgKEQURhwtRaFRG8uGhuOATQXiWE5EaHiU1MakugRBsCbDsWXgkAn5YJWt/MFlAzQUYjBmpsW3E8E7HotvrHrboJkVBV5sYjhG8k3S/Vaaa+mal5LVdT5dG9m/qQf+n3JRM1/QX6JLt+51SPf7+aPaVnuDL+G1gAAIAE5EJw0lwWE64KCN6pupM19tZf/zYsQWJHN+uj/PaADNZaF8mmcHU9V71fPY4gymROMTU6Uyg6ZRSOkI8UEqlMtA3MTAd4XFNCyZoXnuiouoH/6jI+J8JSWuJQNi3WtMvqQTTpugaHmagdcOAkkretNaDf+pMuG5TdGgv/0P+iU0l61f/Q61Imctr/0HS/86gspWSPP+pECgkE+tDAJNVOuWKAzHIvnxmRAsJInWoIv/82LEFCDT3sD+Ys74GkXLd1TFbeWF8f7zGpRWr+SwrWrt0/OwpDIhK9tnz83w4dFTbP570SEHUw8BhJOOUIXOker7HhWONx0CwPy/80xCZb/8bAuLcbH/m6mfmBEVAEEv2P/+nRXMFJf/0dX/5o6OjQyxp3/fmtqOqaOk1QgBRzW7pqg7qqrT0ELAkb3bEszMAIeQA3sDwmj4I7lu//NgxCAk4+KgDsPUvKwTeXBPp4W/1KrafesJ9bhIzyZvujeSBwhgVzptnybKq2f/DLpNWkXMXy6+5VEWOpQ8nbVmnkqeYQjR6oWBsBWx/5hhp//ohCIwcfml/+c381hWb0X/7NnIhMPU/6OcZ/pshHUyf/VGnKzu6nEJMMCd+WFVFIAaiEcqVZCXBZr6bPhHF8cC87dkLeKOSV/I//NixBsmu3aofnrPbE+uyxocNCjJjubZN4CEPI98VO887oHzdxvhSpV1EQl+/jm65OXLP7YTPbct3ztaUAOCWTiIOyv0FmUSD9dbqO124wJQdcaGjGU/47/+o1JzDGUmb9UONZ/V3KAuGpQgp55hxn/s29CAVfPPMM0mmp/0lCaEDYJm/pfBgRDVg+o2YDRNK4WQRhogGoNBYYjuU//zYsQQIvtqtDR6zxi0xIqgjNy4XmpKLldUdMzWtn7Mh7xxx7UPnoREUOnJqHJH4Ht7MZmhovChotTP01Fn9s/jQBIBoEF4gipaLZVbJi2V09Jc5nFBGIQ2SL2LdVGvn/muOD5hj2Ns7oyNbfsN0FYTs5I023//uw+XZ3r1/to2jRycaK/84YqbJaUSSSjbcs+Y2JYxjiOKlidBRE//82LEFCPz9uW+YgsbFQW40T1K+hYAMOIMn8XTGHhJPxAK8ReZSOX4L6i/Oapj1vj+v50GnYmMsTobJ6jZkt3h0qmJfATGoOZJ+EY52vr6sgDEvXrRE1TVFyi7A48l7/pVLVo08QZXtO4mbOqlqhJSSoF1UpDpno6y3PsIgMowWBDlMQUFyC9s7Q2yIkrEpNeEwlQmRmRGUEpyAbPR//NgxBQfg9LRHklF4DjWLBBntERwMIqxFlLS3/6MHWcgpVfqZq5We/bUYz5twYy/8//qawwJ8bEi0I5EpjnvvckVQMPqaqzZAxee9rZKrL/8aJBq/+/X/LBi6Zj1T7I5CpvZyvb8qP76+kMzJ/p+rIkK5UMj8YkAqwpJyNx74QGglg4UHkCiOqKrm2fJgA8KWpHAVapqNnuLos6D//NixCUfQ+LRvkoK/DuEqwwDW1Dofd7nh+azzlA+ZRqlrUIw4hQbVXl1SykXMbfLW0TLjwp8xXFnOhG0rr1ICNq7JW3RSTW6iAcN///+kX+2iHQtq99HINJWv9Po+ZRUgiHHahUwgAwFboRzHKHQwH0VEJbsY1+YExIo2nAUTXcbEIlAEhYJI1c0eerIwbmLV8OpGQvc4DInrmqPXP/zYsQ4H6vmwHZ6VJT7XGxZj3zzLsg8D7RrF7qcYWJ36nL6uJv/e7W/+Tt1W+b9Ld9EJ/OMJ0TR3Sci86UJwJD/rorM3r+UFccpQ7/+h3nk5Vuo2gC2EANV2D4T3RNadKyk5qr5slumLSbZvRz8K74kzNupuOoL+ahdWanbTHb8Pi/9NZcfW/m7v7/cVCW7JxGTc25rKj69d3onqv3/82LESR9DCsmeYtscUP61T316yyyLHdctfdOuwLh7+oUYlFaS16TOzLXrdRFCWNmbdSad7/UpF9JIyJX/+j/+GQA3BVqRu0qcBKT5mFrP/TtFhgDOWjlCYYJQDAqyfkpS+eB5S/Vpp5dx8nS5f1Hxan+hQTqobtpQjL3dUIDHzCoXDNb5gfLFJn0Tc8ySCS00DEjAzlq7JGBubOyS//NgxFwe++LVlkqa/rdSjqr10h9C+Opv//W/qJqX/+r/5Y3//+p2RQJ5w74vApx6wjsH2LjdBidtqlSa63ZWR2dqia0aGqJmyYVwHiayxvVRIEy7+NHY7Rf3dXsKaO3wRdOZEBDOm0wrEU2nvkRPsToe+fkP2H5J6jP/yN0NP7VafQAwmR9C5N0u1kd/yMKUs37f+zfFQ3/6mHnf//NixG8ew+K8RnsVDPj8KU9dyc7//VuPjRhKJt2ud8oFVB2iX9IJq1njaiSRf0/u8VyUjeZePC14RN4W765BCgYzuUzpld6n/yCwNi0tnUaQ2erXzpbrHY6Krc4e1oKLpQaixNEkWk/ds1PpIp1/vUDeKRvqpjYaoJLTQPNM0jY80ydwrBgx8PJO+YJm9aqNSNIza5gRAkZcR0W////zYsSEI1Pe0PZ6Wyr8xLPrX//35KKVEUnY5skWOlSlobgpS2uDp0pEQyJ0+BxvI4D47Y2G2N8/BZrVTLj47U301XZUTXNWv0kKbXJSoO57fWu3B9bfGYjrdRKXplxxOUhaKVDyyrlFPNg/Lf5kUU/Fp/6mPJ37alYjh0KXWka2SRWknonE9Vah3AVis9/dtfzrI6zALgi7+30E0XX/82LEhinMFrAOettqr+pAR4nCdNbHELd1MktTumXTBmF0AOZGKVnW6ak0jEyPKhlJ13EH6L5rFQIMgnBJKuE7I2+aW8BygxANfdmw1x8l6BexO1xcYaG/FPUaSjb3VsYnm8E+EdcaCxFzXDgq4+PXUpyZ5q/GN2riBrUeTrxHJfBL7r48SzOSoTY0ZukrUamTv+/cxKzZtIepo6la//NgxG4qdBawDnmbhi7so0eq1QYxoQ29+v9SPOlQtln/vZdzA1TV32nAoy4g+ZqWzPpGt0FKWgTlGhUOcAMi+SSd1LdJJzUyQhlOWupkW2Xq6RQ0Riai4+Q1eTocwEht1a6IBsadSmJ0Wp6BUSfyP5a+mwcGT4RKH19vbKqPjGiM7P3Mv8xiNFaxTehqXJ7JYW7dWVQSv1q+eubp//NixFMyG+KcDsPbpBskkysSLeNXPPn1WFCxLN0mLFp646lbtQ1K5Wv55D3Z5rR458Boo3M82f81WifcwNP1UJ0LWJ0UmuoiKfzM/ROH2XWnUOECdR91GLKd0letq9BYJKtJ/X5Il1Zon1I9MMYlJhrL5gmvr19b2PVDvDcKbXMjRHUQIbt3u+whSuSRRqXBPBlGyBJEPgWAdV+Cef/zYsQaJpPewN5j21FNjQrEq8jRTbF5mKZxIDKGuZef4Eu8Jlx/vtqEejVtvHUrrF7fUnrrb49jRpKkUJe3vuCrc2ao33nPOJoi+kI9Avs3rvGKYyxUbjWMKa67u60WRAySOfRuohG7V6HUfTu+sPwXln+nbV+i3TSHw0b/0jdk/+sfTXqTOf/6nbSL41VQ1ilHJZJokQ4H4eulBhH/82DEDyL73tT+Ylq6YQ8hQhn9IOjVHxMTDv4rPfQuo7fYHG8P528/rT+Ejv41YDz2t/nd+j1uVC/PDSQjxiW0iQYzQGxFVzpPQQppD8DyUGU/2MGJAlDTepVabk4T0CBn6qz6fzFtSu71phTl5utRl1Or6KlVGxJgrZia/+ih/9Y0l5e67f//omxTi479JNTYWqwmRsJq2QiWOSH/82LEEiRT4sAuetsPTGJauDf1aLGTjxB+6JrSgcG2c4scpx9xXi49h+I1/rAkH6ay3B8IdiQfzGm4uEfOlM1vQXnSz5dW3USy/+7JLb/4mw3P1s/zI9zV17Z4EaJug7mB9FVa0dSzAlDczWcMieA2BuNa6f6kUm/8dpHb0W/XTdlTqK6jMGweQ4ffhKohAOLTvbW5c+2ZVtdF7s9H//NixBAjdA7AVnobbqnF0fLF6sXgKhUGsdAxNYpPmEibxd+iTfNbredZ+cMGsCzusevDLzfwLHZV/X/lAnuEoQjhK6lCFaGh6Vd5APHzHMA1O++P9lq//GIg/clFK6J5qC3Z6LVDHCwMPqX/6lPqUgS6n/9aSH/yKS6utFvv6SrJUFkkJuyaWyXWduEGapqS3MCUQ8fz+7XWK2qK8f/zYsQSI9vi1ZZ5245PnPlda0ofaA0Hauy328LeIyexX62WZiQVmJf5zlsjOOh6XP+2bnpGvXGMq+01/1nhrQS/n0KP8mPv4lf9VIikib0MU9C8oBIESXnPzbqrtXjwC+rfpHDj/84yKNIuDQBNTQtT/6SKLf9QgIlS18xX9TX1LOLU1YKUmxVKxNWABQupy2RdCMGr6sLMxQ2jLwn/82DEEiL73sV2etreQ7pK406W7nhCkAy+K6yiOtEha+b6zAk00nXPDyhVjPqS07EX8bvoRyG2FY6j51r7SqiHNuKrUl9DX/1mH1fWWl5PqOI/bnDNXSxAh5mXecRb/qOo6ZoTgSxKm3u+8gk1N767IyIJaD+apMouFhsj9/0jGuiEoSVnFijdDhpKc0FJq8eeLNjm24Y9NguThur/82LEFR+8Dsj2e1VLwTZODXlaJLHDr/XOQJSzLcOk52KOAz6h7284PZpdT0VFEYdP6nWbJLWX3bPB9SXVt6l8SU+PDvKie3/urf/jE70Zv//1D9/ob/9utRVP/+5OY//KHienKETfouk4qWzQcAfJph72R1Km1+YRARffoJuuIaF1sNZkYF9RWlFlq2R8OqCmexeRjBEL+pVEQwZO//NixCYgq+K9dnramLwkE1Eqni9Q3O0SnrbqTHI/RpPR6VPmBGzi2U9bVFxvnVesgt/z5uXFa+9adQgIX41fUO4lFo9JKmiab0XUSAJEWV9/q/Q601iWH29vsXlVV/qJwnT6lH2///YjuuhCyk5OVRChM2NXDCK1XZRnZw/FVq76LFEWi1DV20SK/lfvLwVnD95wvi5CRbXik84dxv/zYsQzI5PivNZ7Gs6S3uoStzK6UaTijB9HXTDAJC5MDWmkqt5mNRZW+narGDP1dudQLz/613E2FNDqMUfrbU+/pii/1mK//TdVZmVgham+/rQPvvf0wuwL6K1oIk9/3/o8vhcGpMVEagIM1/IHay5ET6oexV45iK/1+qKjgt4rN4LL71hM/Q2HG3qK28NQqtf5+CnaSD4S+m3nEo7/82DENCPL4rAWwttEB+a0FC6YuETZ89XAVlsvvoV1OH4cjSYSD0GWaWJ6K+svF1q6xyb/7FZ//viSDyR6i+av89u9W+JoHNr9NBHrfXWa0a5WEhSRf/qRf/zpJCRVzNP9X9atEdgjz1VIRItxNuObbUNhZHFx2oB6smQ4gVDH53ejatr848fpTbyuSnb1V9baxWSRq5+9xATeS7L/82LEMyHj3uZeS9qzXMRwp7Kl9TGupOhuNQwrSIS6Fq9MxIaus8k/n/18xZE2+vvUIYofGGMvolmZoUNKwW4EEUr3WdJdv+tltWXh+CTFD/7MYIf86IQeS+ih//16i6PJRXhZ85bcQGu9VkkI/0Pbn+WtyxLAWPk7dWs5JyGY2ctf7aSzN3nzUJmWlszd6DQZMFLm9AGJN40Iz+d7//NixDsgs+bI7nnbUoWAu8oM1fbKF/t+Q/84gZHn/1WIQnLtnRh023qRup6W2NYI0v1oJdX5i57UPYWQKNFS9SPzdSCPV8xD4ka7Gqv/9aHHmFwLHaSVpa+W3xCwUIGAgAhOZs34kcyZZHmrN1LvwczUE70brVoXAxlb6h3BRWaX8SuJ1qv3k9mjXz3zmA6vcoxW+L2G7p+cHsbNUv/zYsRIJAwS1ZZK2zKgUdH6tZOZEufU/ZYYUHbKzQlfmjVrP3sikkKoLhdS9S/dvOmLNUfOBAav+tBM9/4WwxVukmr7LepqyQTUkdC6AOVMw67XUbuqjKIa+u5LeVIQMu6jUx4FkuFcxqazVA82VvWGD0ttl0hf3C3moynmmutj0FDRxv9N2/0LdZFMWL4rFVbaiIN2qPEIXWIwF7b/82DERySMDto2eptvON0ahVvkY/ebUBB/m80RHwkX1VNth/Lz9Zgh9+t/7BlS+pFPr+dSTVUmVhJ3/+izt/1B8QfZS2+p7M2bspaAmoA/Ec8yrooIoHGKVZAAqJwvozEITh/YJEZIssUSlE9GojyNm84VJfXN9K94TiaykmzEG7i2d4SQNRdXgYpJ/dYtIF+jaenRCV3+3aKepGn/82LEQyQT4rVmeZtiWnBbPl3bfZvnFP45/+pNAdwyn9S6+FaJ2/KyXHoeUpGSGipFzGo2RMRAiOiv7/+s4/TWJwk//pJM3/UIRAx3Wl/+uikuolwsD49FjQSV4QBZa5bfYOicJJcLadShNJZbZ2jIwyz1ic8KocKhioBTmpmYIA4fOqbrMqAW039AiN+061SqFkVCUa1fXUVHvW6G//NixEIkdA7VlmHar7nRiG9J99Zus6j6Vq06QVgUyfWJyQW8zUumut+xWARy43Udalq+dL7pVKMgdxYft/WePo/+cEIPFT2TOfoutSC6zIun3OkgHUlnoOup5m5N0JZtNRy7+xOStd52p0/pjErSHe0u1c6ubenXIJsVPiOBlRjoXitVzZIhH/WIGepXnCB971VDpnRtqfNs3W/mJ//zYMRAIIPe5Z5K2rabnTZD/lxZg//4fiUP9R49/0UvaoWZCM9VS9+3nSe+klDqdSX2ZT5+m9WpNHOCTA5C9Y6al0oV9X86pWYhThzLQkkARtOXWXkCFGHIvIqU+nC1EuIRH/xNnGfaXETYQuqAuFFcKjM9pcfaVBbigv7jp/x8jH20+UBkzKyVLhJjIUTx31hyRSU5+cJ5WuaIif/zYsRNIsPiwB5h2vaoFEGS6Gs1RqSSKQyPrVUlQEkCkU2pX//8migh+v/1odTqDkJ//MDzv/zg0C0XqYmr+ii3ug+ozCqHiLV1GkC85JdNmXctlItqaGlKWSOXtim30h6QZ9vw7KPUVlHTYSFObK6lnj1egBj11E5scLVNruBgI1EcNlyotlRKdgMRvNjF71hPT63bQ5eNx9JX3X3/82LEUiKb4sQ2edr6WF7Dwnzg1nvWXmzMu0FO7LEACVTX5xJ/f1kse1JmYONM9/6zdf9Wocwo+cY2//W556x8EHNG8sLqjARNprpbcVDImGA1rA9RejNNhRqR1F+d6Wj5CbFunKtEeh8+niEDKi6dMm8687S6A5j3WosP0uylVSIeysnUdaN0j3zA2+VNR/WtOg332mIQZBS6iSPf//NixFcgK+LaNmJaNjRsxNvVRE+A5lD1nFv/zp9HUiSYbCj3/pOz/9ZLhwK3Ur/t7Ps4XK/w3fVBeKUcd3YCqZ0eQYIIsJCh9R6/MnfInDrD4wNPSW0h5VPGLqCokwytdvzr6b/reQNfbYLo+n1TIZGRRaoz9ZcmI1mvqQVvUC0m9218kT61t/XwT0onv///yseb+uXHX1eszdVUmv/zYMRmImQO2Z5bV5seiB9uuSJRQN92+VlMKVHQUXjT/FMl1ucjcuQAQOoW3/tquWWAAAAUHT+5CFVPhAH+aqOnKZu247ZpVf8ht5xCscyyLnj3dfRdn58vkdCd/XscmELv0Girs2vuilVmt1O5GFLNF4+KTqCyhwsDdPO+UCon/d7//k5O3iLHH8zPcez7M5w9AMI0//+d0RgXX//zYsRrH6Piuf57FQj/nkrv/xeFGClOeev/9U0JAbX+pYAAMAGTUs5dpqJAxQSb0tqJRDVCHc6Sujo1gDUjeF0yWAIRXr8XBGWBsjQNcaaqTD/51DdeC1OFwfSxP+YAeHP+R0L7q5P81wI4N20RR8NSAMpgbN4fhlFRmqe8qBvlFSH60K3/VrrEAKRp6m/6KX9MPCvrZ//9SBUJsbf/82LEfCLD4rGeetto/2e//MRPSUfrO///z48n1AdYpRuWaoF0VSkyDpHK0qc6L95Fm+SxzYmyUJMwJjs1he7QI0L4MxSrWNZ6s1ZIZyxuSgSM9VUovEei1ZpTdFEYo4tAZDj8jUV4m5snfJMlNFyoG4bqS6OpmWS37bucDYHga9Ziv5xqlIMjvWGwFTPdTE0lkvt5JvqNRmA7m3/0//NixIElO+LNnmPabtav/iakFfR/pfrMzCqQQZYUPYjSgAIQaKdoX127SSDPwxlzJBxYmi3Oew68zikzrhUKhWklAuzsX2j8ECbGo46YxRROH9jFskDREJgQN1EiOj/MD8q6M8ux0rzBGp6kJgPqH0Ud3IghzSr+Pdpv/1VAsgXW9P/3b+bCL///u3RSCoGn/1GiHq+oJiQb3dBv1v/zYMR8I2QOtY58muO6ZupZ4zSZRQAoKCKbOpusxnqDQ1yVHLbYDW5z4HPoaW2QkUSbnl+h3bDsaI42AMQ1mO4cpTGjwkgs1IF2UW5maOJeRn1JGX763/Uwm4lmMwyj60pwzl4lCMh1l9XlQZzOvvrPNJJ/W1SCJNB7C4mjayiYOvl7k1NJJ2RqCSgkRL+o4ZW/ziB5Waj+F3E5dv/zYsR9I+ve0Z5L2m7/mBg57/nBNTA5scTT//qblondhgKoIxOS2JPFvlyJk6a4Sjtz3mu1wt1Tum49FmIT8B3t+7zQDVgUT1ONIVt7vsfHFbMC1fh5alVCIOpPv7C6Eq0ZiFOlk4PZ2HcNrWyVR11HC3/siyv+2BgljNrKSq+g+1FWzpF4FIZ/OJt/1PXmhPC0kN/f1pLPntVusqD/82LEfSMj3sWeedtGN5fXpsm3/9FSqyaG45XBpYANSTqyucQl+jOai6azytOXlzYm0sMfCenhLpou4ibR/SfqBkeaU1iMJpM29qXqy1pgXN/kdtf8lJlo38b92QJLuTYEY/LfJfeq+bqQT+K6H21JIHDV/60aQf7dZ5H6T7s/fYN1D9v/U3Xhyil/66am/5wQp9Hpsv9BJWk5w6i6//NixIAixA6otnrbFiQAJqUDetdancyQgAIInbBpDVrajQpTVPU7R+UZwtUY6ail1ypIsJJIGqSDJ1YaFvDCvgTa/E4+qq/OE75Q0/8CyidacaX2woTbv+rBiILIR66DtSk80P0XQnO1YqUX/itcmL+uq3AYHSzcxv3zf8GAa3/b/0MfzAWS329Ctm/5wUY2Meap3/+qdxDK9CqUAP/zYMSFIIvelD57FSTJLjHVzAjqq0ISoy+MAZMB+Z7pVHuTqJo2c0slb3OPelEmrNYmkk1N9IapP8ZXWu1sk+A23G3Zah+/PvPPnvYrMW0t9Os4/zBHzovpfXrRRRMX+l6hBiGi3QQ+n1L9LHcEt+rf+idVKHkS3/uZb/oCpdt2X9f+2eJFnJ3AAaXnaTPp43JtW51vn7bspvNPmf/zYsSRHyvekU57T3RzMiQRH0Pb1a1mWUhHyRlZ3oq1JEfa49oON6xPb+pJNzD8tX1UA4YRHqVeJReUG8odMA0SmqLfUzJ/iM/YToRr/Wjv6fgcBQ/oDkjvmaFyL7M6CsAYn9X/+a3Y8dZv/uff/kyLdDW//v5g6hYKkaiONFA+5E1R53lj4tKVS6318ZguN5wpd5YZmBPha7dDY+n/82LEpB+r3olWw858+bCeq15wD0pI7jY1m10ghyouC/aH33moPm+b4to7Z5qf0rcmj17svW+Yv8xQ8rO/+qtv/zAjP1If+j/nRao/qb/0W1zofEHt/03f/nSeQFdTP//q8tqpQ6k5ZbGCP8Z5LZdaZl9Qau8xXC1+1ejJQ/kYJtfC6t6JqT13yNOrO9Y1j+RM1wN2P/v6G405rquF//NgxLUeo958LsPanGRqH8u5L8rYygXAkuVAzerWqd3DwXLbeDpv7KFobnfr5+NCJIk1vqqQrC/BuFvOHEnvmR/OKf8kA8GX9v/V6mJMN//WYqAZUjIT0rC1y9iUyE0ErqVp0ll2c30QObEmoa8CpaZtJh5lFWH41TSdU41Q900Q7EJucBc2yQXmiryTfECFK00Kaa9SaUEEW9C7//NixMkfswKlnnrbivjEIXt/VkOb/ypgWS/Ih1KOyEo7Ufjwx0c6aAcGIs/KKam53sQMtXFQLkQ5z7/vZ/+VFUWf/6Ign+YthKn+oc6GnfphTE7+aaMbfiIkxX1y6NMCd0yJN/GyPdzw+BBtc0fWRTkG3rFcbbpvguFLLUS/3JFKWL/ndS+3l/p1axNByayVdXNcns/l9Nqqzc//zf/zYsTaIDN2gLZ7VO6d0W/+O1j/UYI/d8xTv6yaDvSb0km/9NumcNz//2Rd//GFU/rZ///VPopMQU0EYSAj3LqrYguMvou1bxnQ3wkEJFnoN3eD8pa0y89L3vxXfXZ+N7iid8XCkdLN7ThKlkafOEISc/TdlCDH7Nml1XFkGVnOC2LyZYqMrB2EuadZILetzACWJV/x45CPG/1nCWP/82LE6SCj3mwsw9q4wv0FZvm8p9qC8Bon/GP//Q8mBoMb/3/71KD0vkG/8dUJE4IJgxt3rgRTp2E9k/2NR2XCx2ouVEha05HzfGbrNkop9hgEJZrEgItnVYhHYQ0i1oqGeSy1GY7I8ZsmwJKbUUIQ6xm3PIHFG8HU9HkTv9eSP75hTkCX8LMkE21lGsan+oqPziYzAkR51v+i6ixv//NgxPMgm3Z5nntVNP1kman/Nv/TV/H8ShvXQ/+zqqSMxMijb/qZX/qK062/6UBO1X3aVUxBAGETBWPaw1KywJVhuYFzBI6rsM1+4rkhGMBBJ3EdjilEPCA/S1rOA+z3cUdNz4SkCaXOJGlQ4VqB1m+y4sd2aMOemj1IV6RfHu9R91dWZu/rZuoeLf8+flz/8ulJ+tA1q3SXl06p//NixP8lk3JYBMPbSGhXkAKUsf0TN//SUtklGIgKbd/5Sf+gYfVHT/vr+orhlQBDaiCilyVQ7UVpvujpuCzaV7xAqHqVuAk2TzAeaEadicYxAoYa/7kc7UEImXSG/hTA9j4lVktTMzpuH+o9A6Q7Yts5qwOea/yuFIn6GbrU9iRCWdCXKb1iYzUSUXzy11o0anEcKaNX5WQB5mp1fv/zYsT2IaPidbZ7RVxxKs3cqHiIstQzo4jCqm6Jvj4hTW6S0QiwGWf+yL//bVQKjZv/V//Lx/p/6P/7dSUajRK0dnZ+SPK+LqwY6TJ8obVE9sLZ8XTxlYILT3L1mRu4X4otP9ObegtrLbFN3bPnZj0Ll+/eq//wiT0IyyBu/TnDUu++QSZoe2oMuRC41ReZb5tSJiW9Z29bj8IOW1f/82LE/yezdlwew9sM6jVI4Tn+3x7GT86q3pG2bofsJqG8l6qT/+vqY4RUv/9v/OH9H/oV9QrYqw9TPhF5l6GTxcmffaDxEnK1IKHiXz8wYIiIGqUVOslqooHTbf2DsY0ThwPu/qq8Q0nG2P0UzOwVa+5EItGkV5Dvh5ZIgZxvaygYxlqH89WW06Sxxhf6lDwZT52o3PP1l01Vx+BC//NgxPAhk3JgDsGbYIt2+gX7lyYvr/UAARH9RQPezEL1FUr7HIeFAtfX/9+qBUZ//drf9Rc91//f9LXa+LUqTAIDABuyNBbdhmw5WiISLqO6Ahwniubx7lw1FHk0MS6Sw94gEaP40XB8lRB3E14YWTetWzrD1Mm4tD/WXg3T9fJhHjAtUtNWYFUQmRMWTj6YMW+g60jc4gOs3ype//NixPgmm25UBMtVbEh5fX51AuhS/lP15Qz+I4KTPo3/0+oXZZ//b/9Sl3/vFUxBTUUzLjk5LjOqMECHpCljciVvUsm5mArpMCxF2+kLzTKNO8y5s/QOtB60FzDULPWy7+ZSt/tP+nxTOgutQ7oqj1ENLx0I4bG61iPnqrk0bU23up5TJ/UZt5jcwZupatUzEmb/k7MlP/6ysl5wuv/zYsTsH0NuaZZ7VURk1BVFsrmSm11ibBPqfzk/+/1CX/9XXtrzRU3oArP0/RUCGQIoaNns02BOFjMtUrJAAMK8C+wse+K/IKTHgR/hDND1l+5OwJN80UYe2ziT/MI7VpHIc9Kds4aqxR9LsmgiT7mlKn2jRknkRtrGYmwIyaqVUdOHoxOaSY60A6gsmQSOsYZ0cy2ECIydCpzN5ib/82LE9CEbbmRWxE9YohQchBrfqdFqQl/Xm1AqhSGtoaf9WyFb5zQvgIzvWv//pBuD3/6f6r+6oVF63ciLgSpBl4dVTEFNICVRBXSxs1e2PT4a6p6AuhLvmo2HyNXyXMkULWmm852kaIdAAuj6Wt+QtuYzd/VlbWi/1h6ynQAyUfFkA8vefBtWRtvUxbCL1Hvqs0Xm+hQm0YYgF1/4//NgxP8pEwJMFMtVbNqM//oIset0Q/38oZf49A8X/M///Gj/u/DPR6L/F5ooQBsQIXD2A6eAla26M7hhbYR6mX0yaHGh0pFiWehJe6OwbfkC6gemQ5shk/pgRZ60rvWTsB/sJ4ozTq2Mr8e6tGklq2rhChuO811Ewc1Mr2v5s2xrSLHluje9nl121QeeiXxbGSRcZZiwugeI62+i//NixOYduwJptntVQE8eDF4nn3t60GWE3C9Hm1Uvo601e1R8yZX3//+gf/f9oZ0RhReZ3vrrVRsfRVL1FEAxykhu0kqrs2fZ2YJYyJIlkPshszCqCA2xaGUYV5bUZ43cWXa5EJP9ctXK6Oly3Hia8xOxbK9q99C1q/pEO3l8rbCcPubYPu7H/fyHxsUsZtzff9lbws1/GqG6RiDBef/zYsT/J8MCTDbD2xTfdBNZR79XzbADSAa9Hf/mrb5CFj///9lEC//2r37NlH7Fa2ucsAH7OT4q9JTU0+UqIAGGUi+Evk1DAmT4S+GBLMw9LoyeSp/Cx4TbITzsqdi836lCU17Uko9NlKhqejpP/MnFBUvhnDGgPStAvoAOUU2tLhdRsx6JKnH56zWZJMsQha1yUdeiSFRLvqrOJ6f/82LE8CQTblA0wlVogyH/9BLZBv/9BHt5x/7ZRP4KCtv0//9oW///+zIPOBjstUx1yVuXsHXZ9Re16lhlJdEGAwkh3TQNNNsXw4vGZsI0S+FASE8awvnHqx2wMWVQbYLWbrinmEZZbf4bxRWcm7G5NfLF8j2cv64bRJXd7730VvtTn8xsMGauxIkN2jl54rryLtFFfm6I7Si844zA//NgxO8kO3JMVMNPUKcPBaLex0nGqRme1aq2Wofwsl//tp/5uQ3//X/X2Tw3hbqvQgdxVzG7fv0KEBmgLjzpcpJF3obHRw0UGtPEu6DoEfFgUtpFZrFS31sTZSiVr3+g72xCMMr7GuZQS226OP/2gsfQrqkFpHuRa1UYBYJU9RjknpSP1tWjmQi7qVAGLjr0Cx6iIQVep3lADQz///NixO0iWpphvnrboLAiQHQTLev3GooN//9f5olL////KO+v89vv4TUh7jSwMLJCmKHibFE2BA2ZcaRVQHkACtbYU2yuP4+nphkuynwQuo6+VlahfuoS1GP46CCXues1G4IVfa5/pErZ53NqccNY+1nQhiO3jeFeJq6xfyZP/VDE37XthbW2E8Eq3sspB/YdzVegTO5x3cRgxb/Qjf/zYsTzJEsCSDTED2SVS3qvyh/2/9P88z////I1/9lLttHZY09FZ/AtdDWtXPG1CJVMQU1FVVUJgeURfuk1E/Nx8XUWiCd4chruTXDdXDId3co6Lgk9thSftgYrzDZvlQWNsu7u5HxF7WonC4CkyZx8tQ677/lyWzSC8ZzZh80BAD9CjJoPVHSPzPcDhHL2/gVUb/6D//+f/KA/////82DE8SETBkg0exWE+I/9rU/tWrdbGTq/32ZXVFks7IT2W6kCHz9MxNUjffhMQU1FMy45OS4zqqqqqqqqqqqqSCYtkLWE1WbWhta2ihS+AI9EcGtimkPLEsm1bBIremfXhGVbvvzOBrt3ewbpjPrCiQijcf/35eJ/XeKRppi+lVQjuEw5PPUrEvlxFupzrcqD2R7/qIYKJG/9Azn/82LE9SF8MkAoecWJ3+7ln//p3eVssagYfLLVWpFsBSTS9XGPBlhsglzxxYUqGQUUNti0RsFhRx8L8JiBRrDeuRaKSxIstMLx8EErzlr28r2zSlzQhwLsXjxSOmw+j+T5ViiEuq6zgsSFTpqJvTfXUtUjxGraSKGswqMn+ZK1zIUgVrr97ZP/3G////xX1/dP9Jys1+lO7aMz7lys//NixOwfEipIPHtFiJOxrXZUs7rYzIxbmIyEc6HcYUqCyhFuY0NODixGI01CvRnMLyPi8NsYV0K27mL1NszULTTZPdysOoT4Iz++320JhqmYI9EWCuz22XTdP8J5wyA9PL/MxgWVssmZi+lWyShpEhuj6163+YnnqqCWa3V0v/q6jX6v7f/v//29/pps1J/7z/7/renjtfe4pryNm//zYsT/I+xKOAp8hTWGp2hoNuo92gVXUxxXmNQ9W2LRxPy219LYugk1ohxcqIpMQU1F/xBanxmeWRua0Ozw/o0VeTerG9bvcSrkpt+DvtR1yTRvg+YGt4z8T/otwfB9mrbtJA/dTuPlpfrWk0HP+pjoe7+r6mlRoR/dOenSjLrn06//9eaR/9/Pt7Kltkrnos7bMZmWU33qqGlj1JX/82DE/yPsfjAAe014sUS8R6js2YZZTnQGwuaOKSedMks+31kX/f2dcRhaEJVMQU1FMy45OS4zVVVVIAIFv5GAd6zrKjRF8MjrgPlyauokYTR6CTy4RBUMtr6qwAl8WCTsWtWh0+nu4lytvtQzGpNXqGjnSk03DNrLsnfO2H+UzWrrsX26lOp/+RHz/hRJclJGHI7/Ph5G3XaHsfX/82LE+iKsgjAKec18jt/eRDrF1R/Ilnir0k1MoR7D8ZHRTOiR9yEorMFd2BOqTICEWMZSzIIlmEQKzlVn2QweKnKVjX1Yxqt6lhn6hWMz/opZjGMbXob/Q3/qFayGM/Qz/ylLmfyt0ev/T/NmM/0KUrSgIluv9WrXce1at+s7WZnDlS09b2TkxJRkfPVWuphCUtPMxLnkoSiUqOT3//NixPIgjII1lkFG/KEcQOolruW2uW2xWJ3zY6EZedEoSo2Vq11adXW1rWToykxBTUUzLjk5LjOqqpdsIyaZkZlTRGRbTMjMqYSMi2mZGZU0RkW0zIzKmEjIj/mRk1/kZH/+0IyMy3IyIyp/+ZEZU8zL///yMiMv/zI7q6uvm7GUVlUk0kk0k0l4ThV1ebGSqFEQkQyHhsgIy6Bs8f/zYsT+I7SCCCgomVwwpIhkaEQyNDZARoG2HNKrKpJqLqrKrJpLqLppJ0GLVUxBTUUzLjk5LjNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/82DE9SEMbTGKCFNdVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU=",hQ=aO(cO,lQ),uQ=JD.createLock(lQ),cQ=new hO;let dQ=!1;const pQ=()=>{dQ||(uQ(),dQ=!0)},mQ=cO.decodeAudioData(hQ.buffer,e=>{null===cQ.audioBufferProperty.value&&(cQ.audioBufferProperty.set(e),pQ())},e=>{console.warn("decode of audio data failed, using stubbed sound, error: "+e),cQ.audioBufferProperty.set(cO.createBuffer(1,1,cO.sampleRate)),pQ()});mQ&&mQ.then(e=>{null===cQ.audioBufferProperty.value&&(cQ.audioBufferProperty.set(e),pQ())}).catch(e=>{console.warn("promise rejection caught for audio decode, error = "+e),pQ()});const gQ=cQ,fQ="data:audio/mpeg;base64,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",yQ=aO(cO,fQ),EQ=JD.createLock(fQ),vQ=new hO;let AQ=!1;const bQ=()=>{AQ||(EQ(),AQ=!0)},SQ=cO.decodeAudioData(yQ.buffer,e=>{null===vQ.audioBufferProperty.value&&(vQ.audioBufferProperty.set(e),bQ())},e=>{console.warn("decode of audio data failed, using stubbed sound, error: "+e),vQ.audioBufferProperty.set(cO.createBuffer(1,1,cO.sampleRate)),bQ()});SQ&&SQ.then(e=>{null===vQ.audioBufferProperty.value&&(vQ.audioBufferProperty.set(e),bQ())}).catch(e=>{console.warn("promise rejection caught for audio decode, error = "+e),bQ()});const _Q=vQ,xQ=new BO(oQ),wQ=new BO(Uj),TQ=new BO(_Q),PQ=new BO($j),CQ=new BO(gQ);let VQ=!1;Vj.register("GameAudioPlayer",class{constructor(){VQ||(QO.addSoundGenerator(xQ),QO.addSoundGenerator(wQ),QO.addSoundGenerator(TQ),QO.addSoundGenerator(PQ),QO.addSoundGenerator(CQ),VQ=!0)}correctAnswer(){xQ.play()}wrongAnswer(){wQ.play()}challengeComplete(){CQ.play()}gameOverZeroScore(){wQ.play()}gameOverImperfectScore(){TQ.play()}gameOverPerfectScore(){PQ.play()}});const RQ=new gD(24);Vj.register("GameInfoDialog",class extends aG{constructor(e,t){const i=Vo()({descriptionTextOptions:{font:RQ},vBoxOptions:{align:"left",spacing:20},maxContentWidth:.75*hH.DEFAULT_LAYOUT_BOUNDS.width,tandem:Lm.REQUIRED},t);i.title&&(i.title=new cv({children:[i.title],maxWidth:i.maxContentWidth}));const n=e.map((e,t)=>new CT(e,Vo()({tandem:i.tandem.createTandem(`level${t}DescriptionText`)},i.descriptionTextOptions)));i.gameLevels&&n.forEach((e,t)=>{e.visible=i.gameLevels.includes(t+1)}),super(new aT(Vo()({children:n,maxWidth:i.maxContentWidth},i.vBoxOptions)),i),this.disposeGameInfoDialog=()=>{n.forEach(e=>e.dispose())}}dispose(){this.disposeGameInfoDialog(),super.dispose()}});const NQ="data:audio/mpeg;base64,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VVVVVVVVVVVVVVVVVVVVVVVMQU1FMy45OS41VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7MsSFAMQYRv2jCSqwfoPTuPekJ1VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+zDEqIPAAAGkAAAAIAAANIAAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+zLEu4PAAAGkAAAAIAAANIAAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",MQ=aO(cO,NQ),kQ=JD.createLock(NQ),LQ=new hO;let IQ=!1;const BQ=()=>{IQ||(kQ(),IQ=!0)},DQ=cO.decodeAudioData(MQ.buffer,e=>{null===LQ.audioBufferProperty.value&&(LQ.audioBufferProperty.set(e),BQ())},e=>{console.warn("decode of audio data failed, using stubbed sound, error: "+e),LQ.audioBufferProperty.set(cO.createBuffer(1,1,cO.sampleRate)),BQ()});DQ&&DQ.then(e=>{null===LQ.audioBufferProperty.value&&(LQ.audioBufferProperty.set(e),BQ())}).catch(e=>{console.warn("promise rejection caught for audio decode, error = "+e),BQ()});const OQ=LQ;class qQ extends eY{constructor(e){const t=Vo()({xMargin:8,yMargin:10.9,baseColor:VH.BUTTON_YELLOW},e);if(!t.soundPlayer){const e=new BO(OQ,{initialOutputLevel:.35});QO.addSoundGenerator(e,{categoryName:"user-interface"}),t.soundPlayer=e}const i=new $I(0,0,-28.5,0,{tailWidth:8,headWidth:18,headHeight:15});t.content=new aA(i,{fill:"black"}),super(t)}}JI.register("BackButton",qQ);class YQ extends Ip{constructor(e){const t=Vo()({outerRadius:15,innerRadius:7.5,numberStarPoints:5},e);super();const i=2*t.numberStarPoints;_.times(i,e=>{const n=e/i*Math.PI*2-Math.PI/2,r=e%2==0?t.outerRadius:t.innerRadius;this.lineTo(r*Math.cos(n),r*Math.sin(n))}),this.close(),this.makeImmutable()}}JI.register("StarShape",YQ);class HQ extends cv{constructor(e){const t=Vo()({value:1,emptyFill:"#e1e1e1",emptyStroke:"#d3d1d1 ",emptyLineWidth:1.5,emptyLineJoin:"round",filledFill:"#fcff03",filledStroke:"black",filledLineWidth:1.5,filledLineJoin:"round",starShapeOptions:{}},e);super();const i=new GQ({stroke:t.emptyStroke,fill:t.emptyFill,lineWidth:t.emptyLineWidth,lineJoin:t.emptyLineJoin,starShapeOptions:t.starShapeOptions});if(this.addChild(i),t.value>0){const e=new GQ({stroke:t.filledStroke,fill:t.filledFill,lineWidth:t.filledLineWidth,lineJoin:t.filledLineJoin,starShapeOptions:t.starShapeOptions});if(t.value<1){const i=e.starShapeBounds,n=i.dilated(1.5*t.filledLineWidth);e.clipArea=Ip.bounds(n.withMaxX(i.left+t.value*i.width))}this.addChild(e)}this.mutate(t)}}class GQ extends aA{constructor(e){const t=Vo()({starShapeOptions:{}},e);t.boundsMethod="none";const i=new YQ(t.starShapeOptions);super(i,t),this.starShapeBounds=i.getBounds()}computeShapeBounds(){return this.starShapeBounds}}JI.register("StarNode",HQ);const FQ=HQ;class zQ extends sT{constructor(e,t){const i=Vo()({font:Ij.DEFAULT_FONT,textFill:"black",scoreDecimalPlaces:0,starNodeOptions:{starShapeOptions:{outerRadius:10,innerRadius:5},filledLineWidth:1.5,emptyLineWidth:1.5},spacing:5},t);super(i);const n=e=>{const t=[];0===e?t.push(new FQ(No({value:0},i.starNodeOptions))):(t.push(new gA(fl.toFixed(e,i.scoreDecimalPlaces),{font:i.font,fill:i.textFill})),t.push(new FQ(No({value:1},i.starNodeOptions)))),this.children=t};e.link(n),this.disposeScoreDisplayNumberAndStar=function(){e.unlink(n)}}dispose(){this.disposeScoreDisplayNumberAndStar(),super.dispose()}}Vj.register("ScoreDisplayNumberAndStar",zQ);Vj.register("InfiniteStatusBar",class extends Ij{constructor(e,t,i,n,r){var s;const a=Vo()({backButtonListener:_.noop,xMargin:20,yMargin:10,spacing:10,createScoreDisplay:e=>new zQ(e)},r),o=new qQ({listener:a.backButtonListener,xMargin:8,yMargin:10,tandem:null===(s=a.tandem)||void 0===s?void 0:s.createTandem("backButton")}),l=new sT({spacing:a.spacing,align:"center",children:[o,i],maxWidth:.7*e.width}),h=a.createScoreDisplay(n);h.maxWidth=.2*e.width,a.children=[l,h],a.barHeight=Math.max(l.height,h.height)+2*a.yMargin,super(e,t,a),this.positioningBoundsProperty.link(e=>{l.left=e.left,l.centerY=e.centerY,h.right=e.right,h.centerY=e.centerY}),h.localBoundsProperty.link(()=>{h.right=this.positioningBoundsProperty.value.right}),this.disposeInfiniteStatusBar=()=>{h.dispose()}}dispose(){this.disposeInfiniteStatusBar(),super.dispose()}});class UQ extends sT{constructor(e,t){const i=Vo()({numberOfStars:1,perfectScore:1,starNodeOptions:{starShapeOptions:{outerRadius:10,innerRadius:5},filledLineWidth:1.5,emptyLineWidth:1.5},spacing:3},t),n=i.numberOfStars,r=i.perfectScore;super(i);const s=e=>{const t=[],s=e/r,a=Math.floor(s*n);for(let n=0;n<a;n++)t.push(new FQ(No({value:1},i.starNodeOptions)));const o=s*n-a;o>1e-6&&t.push(new FQ(No({value:o},i.starNodeOptions)));const l=n-t.length;for(let n=0;n<l;n++)t.push(new FQ(No({value:0},i.starNodeOptions)));this.children=t};e.link(s),this.disposeScoreDisplayStars=function(){e.unlink(s)}}dispose(){this.disposeScoreDisplayStars(),super.dispose()}}Vj.register("ScoreDisplayStars",UQ);const WQ=new gD({size:28,weight:"bold"}),XQ=new gD({size:22,weight:"bold"}),jQ=new gD(26);Vj.register("LevelCompletedNode",class extends ED{constructor(e,t,i,n,r,s,a,o,l,h){const u=Vo()({levelVisible:!0,ySpacing:30,titleFont:WQ,infoFont:XQ,buttonFont:jQ,buttonFill:VH.BUTTON_YELLOW,starDiameter:62,contentMaxWidth:null,fill:"rgb( 180, 205, 255 )",stroke:"black",lineWidth:2,cornerRadius:35,xMargin:20,yMargin:20,tandem:Lm.REQUIRED},h),c=[],d=t/i;let p=Nj.keepTryingStringProperty;d>.95?p=Nj.excellentStringProperty:d>.75?p=Nj.greatStringProperty:d>=.5&&(p=Nj.goodStringProperty);const m=new gA(p,{font:u.titleFont,maxWidth:u.contentMaxWidth});c.push(m);const g=new UQ(new ty(t),{numberOfStars:n,perfectScore:i,starNodeOptions:{starShapeOptions:{innerRadius:u.starDiameter/4,outerRadius:u.starDiameter/2}},maxWidth:u.contentMaxWidth});if(c.push(g),u.levelVisible){const t=new Rb([Nj.label.levelStringProperty],t=>Qb.format(t,e));c.push(new gA(t,{font:u.infoFont,maxWidth:u.contentMaxWidth}))}const f=new Rb([Nj.label.score.maxStringProperty],e=>Qb.format(e,t,i));if(c.push(new gA(f,{font:u.infoFont,maxWidth:u.contentMaxWidth})),r){const e=new Rb([Nj.label.timeStringProperty],e=>Qb.format(e,kj.formatTime(s)),{accessNonDependencies:!0});let t;t=o?new Rb([e,Nj.yourNewBestStringProperty],(e,t)=>`${e}<br>${t}`):null!==a?new Rb([e,Nj.pattern["0yourBestStringProperty"]],(e,t)=>`${e}<br>${Qb.format(t,kj.formatTime(a))}`):e,c.push(new CT(t,{font:u.infoFont,align:"center",maxWidth:u.contentMaxWidth}))}const y=new AH(Nj.continueStringProperty,{listener:l,font:u.buttonFont,baseColor:u.buttonFill,tandem:u.tandem.createTandem("continueButton"),maxWidth:u.contentMaxWidth});c.push(y),super(new aT({children:c,spacing:u.ySpacing}),u),this.disposeLevelCompletedNode=()=>{c.forEach(e=>e.dispose())}}dispose(){this.disposeLevelCompletedNode(),super.dispose()}});const QQ="data:audio/mpeg;base64,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",KQ=aO(cO,QQ),ZQ=JD.createLock(QQ),JQ=new hO;let $Q=!1;const eK=()=>{$Q||(ZQ(),$Q=!0)},tK=cO.decodeAudioData(KQ.buffer,e=>{null===JQ.audioBufferProperty.value&&(JQ.audioBufferProperty.set(e),eK())},e=>{console.warn("decode of audio data failed, using stubbed sound, error: "+e),JQ.audioBufferProperty.set(cO.createBuffer(1,1,cO.sampleRate)),eK()});tK&&tK.then(e=>{null===JQ.audioBufferProperty.value&&(JQ.audioBufferProperty.set(e),eK())}).catch(e=>{console.warn("promise rejection caught for audio decode, error = "+e),eK()});const iK=JQ,nK=new gD(24);class rK extends eY{constructor(e,t,i){const n=Vo()({buttonWidth:150,buttonHeight:150,createScoreDisplay:()=>new UQ(t),scoreDisplayProportion:.2,scoreDisplayMinXMargin:10,scoreDisplayMinYMargin:5,iconToScoreDisplayYSpace:10,bestTimeProperty:null,bestTimeVisibleProperty:null,bestTimeFill:"black",bestTimeFont:nK,bestTimeYSpacing:10,cornerRadius:10,baseColor:"rgb( 242, 255, 204 )",xMargin:10,yMargin:10,soundPlayerIndex:0,tandem:Lm.REQUIRED},i),r=n.buttonWidth-2*n.xMargin,s=n.createScoreDisplay(t),a=n.buttonHeight*n.scoreDisplayProportion,o=new xA(0,0,r,a,{cornerRadius:n.cornerRadius,fill:"white",stroke:"black",pickable:!1});s.maxWidth=o.width-2*n.scoreDisplayMinXMargin,s.maxHeight=o.height-2*n.scoreDisplayMinYMargin;const l=n.buttonHeight-o.height-2*n.yMargin-n.iconToScoreDisplayYSpace,h=new My(r,l),u=rK.createSizedImageNode(e,h);u.centerX=o.centerX,u.bottom=o.top-n.iconToScoreDisplayYSpace;const c=()=>{s.center=o.center};if(s.boundsProperty.lazyLink(c),c(),n.content=new cv({children:[u,o,s]}),void 0===n.soundPlayer){const e=new BO(iK,{initialOutputLevel:.5,rateChangesAffectPlayingSounds:!1});QO.addSoundGenerator(e,{categoryName:"user-interface"}),n.soundPlayer={play(){e.setPlaybackRate(Math.pow(wO.TWELFTH_ROOT_OF_TWO,n.soundPlayerIndex),0),e.play()},stop(){e.stop()}}}super(n);let d=null,p=null;if(n.bestTimeProperty){const e=new gA("",{font:n.bestTimeFont,fill:n.bestTimeFill,maxWidth:this.width}),t=this.centerX;e.top=this.bottom+n.bestTimeYSpacing,this.addChild(e),d=i=>{null!==i&&(e.string=i?kj.formatTime(i):"",e.centerX=t)},n.bestTimeProperty.link(d),n.bestTimeVisibleProperty&&(p=t=>{e.visible=t},n.bestTimeVisibleProperty.link(p))}this.disposeLevelSelectionButton=()=>{s.dispose(),n.bestTimeProperty&&d&&n.bestTimeProperty.hasListener(d)&&n.bestTimeProperty.unlink(d),n.bestTimeVisibleProperty&&p&&n.bestTimeVisibleProperty.hasListener(p)&&n.bestTimeVisibleProperty.unlink(p)}}static createSizedImageNode(e,t){if(e.scale(Math.min(t.width/e.bounds.width,t.height/e.bounds.height)),Math.abs(e.bounds.width-t.width)<1e-4&&Math.abs(e.bounds.height-t.height)<1e-4)return e;const i=xA.dimension(t);return e.center=i.center,i.addChild(e),i}dispose(){this.disposeLevelSelectionButton(),super.dispose()}}Vj.register("LevelSelectionButton",rK);Vj.register("LevelSelectionButtonGroup",class extends cv{constructor(e,t){const i=Vo()({flowBoxOptions:{orientation:"horizontal",spacing:10},tandem:Lm.REQUIRED},t),n={group:new rT},r=e.map((e,t)=>{let r=Lm.OPT_OUT;if(i.tandem.supplied){const n=e.tandemName||`level${t+1}Button`;r=i.tandem.createTandem(n)}return new rK(new eT(e.icon,n),e.scoreProperty,No({tandem:r},i.levelSelectionButtonOptions,e.options))});let s;i.gameLevels&&r.forEach((e,t)=>{e.visible=i.gameLevels.includes(t+1)}),s=i.createLayoutNode?i.createLayoutNode(r):new Hw(No({children:r},i.flowBoxOptions)),i.children=[s],super(i),this.buttons=r}focusLevelSelectionButton(e){this.buttons[e-1].focus()}});const sK=new Image,aK=JD.createLock(sK);sK.onload=aK,sK.src="data:image/png;base64,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";const oK=sK,lK=new gD(20),hK=new gD({size:38,weight:"bold"});Vj.register("RewardDialog",class extends aG{constructor(e,t){var i,n;const r=Vo()({phetGirlScale:.6,buttonsFont:lK,buttonsWidth:145,buttonsYSpacing:20,keepGoingButtonListener:_.noop,newLevelButtonListener:_.noop,scoreDisplayOptions:{font:hK,spacing:8,starNodeOptions:{starShapeOptions:{outerRadius:20,innerRadius:10},filledLineWidth:2}},closeButtonLastInPDOM:!0},t),s=new rA(oK,{scale:r.phetGirlScale}),a="number"==typeof e?new zb(e):e,o=new zQ(a,r.scoreDisplayOptions),l={font:r.buttonsFont,minWidth:r.buttonsWidth,maxWidth:r.buttonsWidth},h={font:lK,maxWidth:.9*r.buttonsWidth},u=new eY(No({},l,{content:new gA(Nj.newLevelStringProperty,h),listener:r.newLevelButtonListener,baseColor:VH.PHET_LOGO_YELLOW,tandem:null===(i=r.tandem)||void 0===i?void 0:i.createTandem("newLevelButton")})),c=new eY(No({},l,{content:new gA(Nj.keepGoingStringProperty,h),listener:r.keepGoingButtonListener,baseColor:"white",tandem:null===(n=r.tandem)||void 0===n?void 0:n.createTandem("keepGoingButton")})),d=new aT({children:[u,c],spacing:r.buttonsYSpacing}),p=(s.height-o.height-d.height)/2,m=new aT({children:[o,d],align:"center",spacing:p}),g=new sT({align:"bottom",children:[s,m],spacing:52});r.focusOnShowNode=u,super(g,r)}});class uK extends vA{constructor(e){const t=Vo()({nodes:null,scaleForResolution:2,stepEmitter:null},e);super(t),this.scaleForResolution=t.scaleForResolution,this.rewardImages=[],this.canvasDisplayBounds=new Zl(0,0,0,0),this.transformTracker=null,this.isInitialized=!1,this.stepEmitterListener=e=>this.step(e),t.stepEmitter&&t.stepEmitter.addListener(this.stepEmitterListener),this.nodes=t.nodes||uK.createRandomNodes([new zG(40,{headStroke:"black",headLineWidth:1.5}),new FQ],150),this.cachedImages=_.uniq(this.nodes).map(e=>{const t={image:null,node:e,width:e.width,height:e.height},i=new cv({children:[e],scale:this.scaleForResolution});return i.toImage(e=>{t.image=e,i.dispose()}),t}),this.initializer=()=>this.initialize(),Lm.PHET_IO_ENABLED&&phet.phetio.phetioEngine.phetioStateEngine.stateSetEmitter.addListener(this.initializer),this.disposeRewardNode=()=>{t.stepEmitter&&t.stepEmitter.removeListener(this.stepEmitterListener),this.transformTracker&&this.transformTracker.dispose(),Lm.PHET_IO_ENABLED&&phet.phetio.phetioEngine.phetioStateEngine.stateSetEmitter.removeListener(this.initializer)}}dispose(){this.disposeRewardNode(),super.dispose()}paintCanvas(e){e.scale(1/this.scaleForResolution,1/this.scaleForResolution),this.rewardImages.forEach(t=>{t.cachedImage.image&&e.drawImage(t.cachedImage.image,t.x,t.y)})}getScreenView(){return this.getUniqueTrail(e=>e instanceof hH).rootNode()}initialize(){const e=SH("phet.joist.display");if(!this.isInitialized&&this.getUniqueTrail().length>0){const t=this.getUniqueTrail(),i=t.nodes.indexOf(this.getScreenView()),n=t.slice(i),r=()=>{this.canvasDisplayBounds=n.globalToLocalBounds(e.bounds);const t=this.globalToLocalBounds(e.bounds);this.setCanvasBounds(t)};this.transformTracker=new QA(t),this.transformTracker.addListener(r),r(),this.rewardImages=this.nodes.map(e=>{const t=_.find(this.cachedImages,t=>t.node===e);return{cachedImage:t,x:this.randomX(t.width),y:this.randomY(t.height),speed:200*(ep.nextDouble()+1)}}),this.isInitialized=!0}}randomX(e){return(ep.nextDouble()*this.canvasDisplayBounds.width+this.canvasDisplayBounds.left)*this.scaleForResolution-e/2}randomY(e){return this.canvasDisplayBounds.top-ep.nextDouble()*this.canvasDisplayBounds.height*2-200-e}step(e){this.initialize();const t=this.canvasDisplayBounds.height*this.scaleForResolution;this.rewardImages.forEach(i=>{i.y+=i.speed*e,i.y>t&&(i.x=this.randomX(i.cachedImage.width),i.y=this.randomY(i.cachedImage.height))}),this.invalidatePaint()}static createRandomNodes(e,t){const i=[];for(let n=0;n<t;n++)i.push(e[n%e.length]);return i}}Vj.register("RewardNode",uK);function cK(e){return{public:!0,type:"array",elementSchema:{type:"number",isValidValue:t=>Number.isInteger(t)&&t>0&&t<=e},defaultValue:Array.from({length:e},(e,t)=>t+1),isValidValue:e=>null===e||e.length>0&&e.length===_.uniq(e).length&&_.every(e,(e,t,i)=>0===t||i[t-1]<=e)}}Vj.register("ScoreDisplayLabeledStars",class extends sT{constructor(e,t){const i=Vo()({font:Ij.DEFAULT_FONT,textFill:"black",spacing:5},t),n=new gA(Nj.scoreStringProperty,{font:i.font,fill:i.textFill}),r=new UQ(e,i);i.children=[n,r],super(i),this.disposeScoreDisplayLabeledStars=()=>{n.dispose(),r.dispose()}}dispose(){this.disposeScoreDisplayLabeledStars(),super.dispose()}}),Vj.register("getGameLevelsSchema",cK);const dK=QueryStringMachine.getAll({component:{type:"string",defaultValue:null}});Vj.register("vegasQueryParameters",dK);if(!window.hasOwnProperty("_"))throw new Error("Underscore/Lodash not found: _");if(!window.hasOwnProperty("$"))throw new Error("jQuery not found: $");phet.scenery.Utils.polyfillRequestAnimationFrame()})()})()}();